var ZZe=Object.defineProperty;var eet=(e,t,n)=>t in e?ZZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tet=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ml=(e,t,n)=>eet(e,typeof t!="symbol"?t+"":t,n);var yTn=tet((AAn,ole)=>{function net(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var on=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function c0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ret(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var uCe={exports:{}},tL={},lCe={exports:{}},Rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K3=Symbol.for("react.element"),iet=Symbol.for("react.portal"),set=Symbol.for("react.fragment"),oet=Symbol.for("react.strict_mode"),aet=Symbol.for("react.profiler"),uet=Symbol.for("react.provider"),cet=Symbol.for("react.context"),fet=Symbol.for("react.forward_ref"),det=Symbol.for("react.suspense"),het=Symbol.for("react.memo"),pet=Symbol.for("react.lazy"),the=Symbol.iterator;function met(e){return e===null||typeof e!="object"?null:(e=the&&e[the]||e["@@iterator"],typeof e=="function"?e:null)}var cCe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fCe=Object.assign,dCe={};function bT(e,t,n){this.props=e,this.context=t,this.refs=dCe,this.updater=n||cCe}bT.prototype.isReactComponent={};bT.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bT.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hCe(){}hCe.prototype=bT.prototype;function aJ(e,t,n){this.props=e,this.context=t,this.refs=dCe,this.updater=n||cCe}var uJ=aJ.prototype=new hCe;uJ.constructor=aJ;fCe(uJ,bT.prototype);uJ.isPureReactComponent=!0;var nhe=Array.isArray,pCe=Object.prototype.hasOwnProperty,lJ={current:null},mCe={key:!0,ref:!0,__self:!0,__source:!0};function gCe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)pCe.call(t,r)&&!mCe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:K3,type:e,key:s,ref:o,props:i,_owner:lJ.current}}function get(e,t){return{$$typeof:K3,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cJ(e){return typeof e=="object"&&e!==null&&e.$$typeof===K3}function yet(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rhe=/\/+/g;function IU(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yet(""+e.key):t.toString(36)}function F6(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case K3:case iet:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+IU(o,0):r,nhe(i)?(n="",e!=null&&(n=e.replace(rhe,"$&/")+"/"),F6(i,t,n,"",function(l){return l})):i!=null&&(cJ(i)&&(i=get(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(rhe,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",nhe(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+IU(s,a);o+=F6(s,t,n,u,i)}else if(u=met(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+IU(s,a++),o+=F6(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function MO(e,t,n){if(e==null)return e;var r=[],i=0;return F6(e,r,"","",function(s){return t.call(n,s,i++)}),r}function vet(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wl={current:null},M6={transition:null},bet={ReactCurrentDispatcher:Wl,ReactCurrentBatchConfig:M6,ReactCurrentOwner:lJ};function yCe(){throw Error("act(...) is not supported in production builds of React.")}Rr.Children={map:MO,forEach:function(e,t,n){MO(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return MO(e,function(){t++}),t},toArray:function(e){return MO(e,function(t){return t})||[]},only:function(e){if(!cJ(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rr.Component=bT;Rr.Fragment=set;Rr.Profiler=aet;Rr.PureComponent=aJ;Rr.StrictMode=oet;Rr.Suspense=det;Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bet;Rr.act=yCe;Rr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=fCe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=lJ.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)pCe.call(t,u)&&!mCe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:K3,type:e.type,key:i,ref:s,props:r,_owner:o}};Rr.createContext=function(e){return e={$$typeof:cet,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:uet,_context:e},e.Consumer=e};Rr.createElement=gCe;Rr.createFactory=function(e){var t=gCe.bind(null,e);return t.type=e,t};Rr.createRef=function(){return{current:null}};Rr.forwardRef=function(e){return{$$typeof:fet,render:e}};Rr.isValidElement=cJ;Rr.lazy=function(e){return{$$typeof:pet,_payload:{_status:-1,_result:e},_init:vet}};Rr.memo=function(e,t){return{$$typeof:het,type:e,compare:t===void 0?null:t}};Rr.startTransition=function(e){var t=M6.transition;M6.transition={};try{e()}finally{M6.transition=t}};Rr.unstable_act=yCe;Rr.useCallback=function(e,t){return Wl.current.useCallback(e,t)};Rr.useContext=function(e){return Wl.current.useContext(e)};Rr.useDebugValue=function(){};Rr.useDeferredValue=function(e){return Wl.current.useDeferredValue(e)};Rr.useEffect=function(e,t){return Wl.current.useEffect(e,t)};Rr.useId=function(){return Wl.current.useId()};Rr.useImperativeHandle=function(e,t,n){return Wl.current.useImperativeHandle(e,t,n)};Rr.useInsertionEffect=function(e,t){return Wl.current.useInsertionEffect(e,t)};Rr.useLayoutEffect=function(e,t){return Wl.current.useLayoutEffect(e,t)};Rr.useMemo=function(e,t){return Wl.current.useMemo(e,t)};Rr.useReducer=function(e,t,n){return Wl.current.useReducer(e,t,n)};Rr.useRef=function(e){return Wl.current.useRef(e)};Rr.useState=function(e){return Wl.current.useState(e)};Rr.useSyncExternalStore=function(e,t,n){return Wl.current.useSyncExternalStore(e,t,n)};Rr.useTransition=function(){return Wl.current.useTransition()};Rr.version="18.3.1";lCe.exports=Rr;var N=lCe.exports;const yi=c0(N),rM=net({__proto__:null,default:yi},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xet=N,wet=Symbol.for("react.element"),_et=Symbol.for("react.fragment"),Eet=Object.prototype.hasOwnProperty,Cet=xet.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tet={key:!0,ref:!0,__self:!0,__source:!0};function vCe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Eet.call(t,r)&&!Tet.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:wet,type:e,key:s,ref:o,props:i,_owner:Cet.current}}tL.Fragment=_et;tL.jsx=vCe;tL.jsxs=vCe;uCe.exports=tL;var E=uCe.exports,cW={},bCe={exports:{}},Jf={},xCe={exports:{}},wCe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,J){var L=Y.length;Y.push(J);e:for(;0<L;){var U=L-1>>>1,W=Y[U];if(0<i(W,J))Y[U]=J,Y[L]=W,L=U;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var J=Y[0],L=Y.pop();if(L!==J){Y[0]=L;e:for(var U=0,W=Y.length,B=W>>>1;U<B;){var q=2*(U+1)-1,Z=Y[q],re=q+1,xe=Y[re];if(0>i(Z,L))re<W&&0>i(xe,Z)?(Y[U]=xe,Y[re]=L,U=re):(Y[U]=Z,Y[q]=L,U=q);else if(re<W&&0>i(xe,L))Y[U]=xe,Y[re]=L,U=re;else break e}}return J}function i(Y,J){var L=Y.sortIndex-J.sortIndex;return L!==0?L:Y.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Y){for(var J=n(l);J!==null;){if(J.callback===null)r(l);else if(J.startTime<=Y)r(l),J.sortIndex=J.expirationTime,t(u,J);else break;J=n(l)}}function _(Y){if(m=!1,b(Y),!p)if(n(u)!==null)p=!0,j(w);else{var J=n(l);J!==null&&G(_,J.startTime-Y)}}function w(Y,J){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var L=d;try{for(b(J),f=n(u);f!==null&&(!(f.expirationTime>J)||Y&&!R());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var W=U(f.expirationTime<=J);J=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(J)}else r(u);f=n(u)}if(f!==null)var B=!0;else{var q=n(l);q!==null&&G(_,q.startTime-J),B=!1}return B}finally{f=null,d=L,h=!1}}var S=!1,T=null,A=-1,k=5,I=-1;function R(){return!(e.unstable_now()-I<k)}function F(){if(T!==null){var Y=e.unstable_now();I=Y;var J=!0;try{J=T(!0,Y)}finally{J?O():(S=!1,T=null)}}else S=!1}var O;if(typeof v=="function")O=function(){v(F)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,V=$.port2;$.port1.onmessage=F,O=function(){V.postMessage(null)}}else O=function(){g(F,0)};function j(Y){T=Y,S||(S=!0,O())}function G(Y,J){A=g(function(){Y(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,j(w))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(Y){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var L=d;d=J;try{return Y()}finally{d=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,J){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var L=d;d=Y;try{return J()}finally{d=L}},e.unstable_scheduleCallback=function(Y,J,L){var U=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?U+L:U):L=U,Y){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=L+W,Y={id:c++,callback:J,priorityLevel:Y,startTime:L,expirationTime:W,sortIndex:-1},L>U?(Y.sortIndex=L,t(l,Y),n(u)===null&&Y===n(l)&&(m?(y(A),A=-1):m=!0,G(_,L-U))):(Y.sortIndex=W,t(u,Y),p||h||(p=!0,j(w))),Y},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(Y){var J=d;return function(){var L=d;d=J;try{return Y.apply(this,arguments)}finally{d=L}}}})(wCe);xCe.exports=wCe;var Aet=xCe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Det=N,Mf=Aet;function kt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _Ce=new Set,eR={};function N_(e,t){XS(e,t),XS(e+"Capture",t)}function XS(e,t){for(eR[e]=t,e=0;e<t.length;e++)_Ce.add(t[e])}var Wg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fW=Object.prototype.hasOwnProperty,Iet=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ihe={},she={};function ket(e){return fW.call(she,e)?!0:fW.call(ihe,e)?!1:Iet.test(e)?she[e]=!0:(ihe[e]=!0,!1)}function Ret(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Net(e,t,n,r){if(t===null||typeof t>"u"||Ret(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Gl(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var hu={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){hu[e]=new Gl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];hu[t]=new Gl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){hu[e]=new Gl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){hu[e]=new Gl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){hu[e]=new Gl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){hu[e]=new Gl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){hu[e]=new Gl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){hu[e]=new Gl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){hu[e]=new Gl(e,5,!1,e.toLowerCase(),null,!1,!1)});var fJ=/[\-:]([a-z])/g;function dJ(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fJ,dJ);hu[t]=new Gl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fJ,dJ);hu[t]=new Gl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fJ,dJ);hu[t]=new Gl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){hu[e]=new Gl(e,1,!1,e.toLowerCase(),null,!1,!1)});hu.xlinkHref=new Gl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){hu[e]=new Gl(e,1,!1,e.toLowerCase(),null,!0,!0)});function hJ(e,t,n,r){var i=hu.hasOwnProperty(t)?hu[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Net(t,n,i,r)&&(n=null),r||i===null?ket(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xy=Det.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$O=Symbol.for("react.element"),F2=Symbol.for("react.portal"),M2=Symbol.for("react.fragment"),pJ=Symbol.for("react.strict_mode"),dW=Symbol.for("react.profiler"),ECe=Symbol.for("react.provider"),SCe=Symbol.for("react.context"),mJ=Symbol.for("react.forward_ref"),hW=Symbol.for("react.suspense"),pW=Symbol.for("react.suspense_list"),gJ=Symbol.for("react.memo"),y1=Symbol.for("react.lazy"),CCe=Symbol.for("react.offscreen"),ohe=Symbol.iterator;function oD(e){return e===null||typeof e!="object"?null:(e=ohe&&e[ohe]||e["@@iterator"],typeof e=="function"?e:null)}var Xs=Object.assign,kU;function oI(e){if(kU===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);kU=t&&t[1]||""}return`
`+kU+e}var RU=!1;function NU(e,t){if(!e||RU)return"";RU=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{RU=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?oI(e):""}function Pet(e){switch(e.tag){case 5:return oI(e.type);case 16:return oI("Lazy");case 13:return oI("Suspense");case 19:return oI("SuspenseList");case 0:case 2:case 15:return e=NU(e.type,!1),e;case 11:return e=NU(e.type.render,!1),e;case 1:return e=NU(e.type,!0),e;default:return""}}function mW(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M2:return"Fragment";case F2:return"Portal";case dW:return"Profiler";case pJ:return"StrictMode";case hW:return"Suspense";case pW:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case SCe:return(e.displayName||"Context")+".Consumer";case ECe:return(e._context.displayName||"Context")+".Provider";case mJ:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gJ:return t=e.displayName||null,t!==null?t:mW(e.type)||"Memo";case y1:t=e._payload,e=e._init;try{return mW(e(t))}catch{}}return null}function Oet(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mW(t);case 8:return t===pJ?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tv(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function TCe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fet(e){var t=TCe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function LO(e){e._valueTracker||(e._valueTracker=Fet(e))}function ACe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=TCe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function iM(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gW(e,t){var n=t.checked;return Xs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ahe(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Tv(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function DCe(e,t){t=t.checked,t!=null&&hJ(e,"checked",t,!1)}function yW(e,t){DCe(e,t);var n=Tv(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vW(e,t.type,n):t.hasOwnProperty("defaultValue")&&vW(e,t.type,Tv(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function uhe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function vW(e,t,n){(t!=="number"||iM(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var aI=Array.isArray;function aS(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Tv(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function bW(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(kt(91));return Xs({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lhe(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(kt(92));if(aI(n)){if(1<n.length)throw Error(kt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Tv(n)}}function ICe(e,t){var n=Tv(t.value),r=Tv(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function che(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kCe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xW(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kCe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var BO,RCe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(BO=BO||document.createElement("div"),BO.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=BO.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tR(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ZI={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Met=["Webkit","ms","Moz","O"];Object.keys(ZI).forEach(function(e){Met.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ZI[t]=ZI[e]})});function NCe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ZI.hasOwnProperty(e)&&ZI[e]?(""+t).trim():t+"px"}function PCe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=NCe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var $et=Xs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wW(e,t){if(t){if($et[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(kt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(kt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(kt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(kt(62))}}function _W(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var EW=null;function yJ(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var SW=null,uS=null,lS=null;function fhe(e){if(e=J3(e)){if(typeof SW!="function")throw Error(kt(280));var t=e.stateNode;t&&(t=oL(t),SW(e.stateNode,e.type,t))}}function OCe(e){uS?lS?lS.push(e):lS=[e]:uS=e}function FCe(){if(uS){var e=uS,t=lS;if(lS=uS=null,fhe(e),t)for(e=0;e<t.length;e++)fhe(t[e])}}function MCe(e,t){return e(t)}function $Ce(){}var PU=!1;function LCe(e,t,n){if(PU)return e(t,n);PU=!0;try{return MCe(e,t,n)}finally{PU=!1,(uS!==null||lS!==null)&&($Ce(),FCe())}}function nR(e,t){var n=e.stateNode;if(n===null)return null;var r=oL(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(kt(231,t,typeof n));return n}var CW=!1;if(Wg)try{var aD={};Object.defineProperty(aD,"passive",{get:function(){CW=!0}}),window.addEventListener("test",aD,aD),window.removeEventListener("test",aD,aD)}catch{CW=!1}function Let(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var ek=!1,sM=null,oM=!1,TW=null,Bet={onError:function(e){ek=!0,sM=e}};function jet(e,t,n,r,i,s,o,a,u){ek=!1,sM=null,Let.apply(Bet,arguments)}function Uet(e,t,n,r,i,s,o,a,u){if(jet.apply(this,arguments),ek){if(ek){var l=sM;ek=!1,sM=null}else throw Error(kt(198));oM||(oM=!0,TW=l)}}function P_(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function BCe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function dhe(e){if(P_(e)!==e)throw Error(kt(188))}function zet(e){var t=e.alternate;if(!t){if(t=P_(e),t===null)throw Error(kt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return dhe(i),e;if(s===r)return dhe(i),t;s=s.sibling}throw Error(kt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(kt(189))}}if(n.alternate!==r)throw Error(kt(190))}if(n.tag!==3)throw Error(kt(188));return n.stateNode.current===n?e:t}function jCe(e){return e=zet(e),e!==null?UCe(e):null}function UCe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=UCe(e);if(t!==null)return t;e=e.sibling}return null}var zCe=Mf.unstable_scheduleCallback,hhe=Mf.unstable_cancelCallback,Vet=Mf.unstable_shouldYield,Het=Mf.unstable_requestPaint,So=Mf.unstable_now,qet=Mf.unstable_getCurrentPriorityLevel,vJ=Mf.unstable_ImmediatePriority,VCe=Mf.unstable_UserBlockingPriority,aM=Mf.unstable_NormalPriority,Wet=Mf.unstable_LowPriority,HCe=Mf.unstable_IdlePriority,nL=null,Tm=null;function Get(e){if(Tm&&typeof Tm.onCommitFiberRoot=="function")try{Tm.onCommitFiberRoot(nL,e,void 0,(e.current.flags&128)===128)}catch{}}var tp=Math.clz32?Math.clz32:Xet,Yet=Math.log,Ket=Math.LN2;function Xet(e){return e>>>=0,e===0?32:31-(Yet(e)/Ket|0)|0}var jO=64,UO=4194304;function uI(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uM(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=uI(a):(s&=o,s!==0&&(r=uI(s)))}else o=n&~i,o!==0?r=uI(o):s!==0&&(r=uI(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-tp(t),i=1<<n,r|=e[n],t&=~i;return r}function Qet(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jet(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-tp(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=Qet(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function AW(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qCe(){var e=jO;return jO<<=1,!(jO&4194240)&&(jO=64),e}function OU(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function X3(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tp(t),e[t]=n}function Zet(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-tp(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function bJ(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-tp(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var qi=0;function WCe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var GCe,xJ,YCe,KCe,XCe,DW=!1,zO=[],tv=null,nv=null,rv=null,rR=new Map,iR=new Map,D1=[],ett="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function phe(e,t){switch(e){case"focusin":case"focusout":tv=null;break;case"dragenter":case"dragleave":nv=null;break;case"mouseover":case"mouseout":rv=null;break;case"pointerover":case"pointerout":rR.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":iR.delete(t.pointerId)}}function uD(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=J3(t),t!==null&&xJ(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ttt(e,t,n,r,i){switch(t){case"focusin":return tv=uD(tv,e,t,n,r,i),!0;case"dragenter":return nv=uD(nv,e,t,n,r,i),!0;case"mouseover":return rv=uD(rv,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return rR.set(s,uD(rR.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,iR.set(s,uD(iR.get(s)||null,e,t,n,r,i)),!0}return!1}function QCe(e){var t=ow(e.target);if(t!==null){var n=P_(t);if(n!==null){if(t=n.tag,t===13){if(t=BCe(n),t!==null){e.blockedOn=t,XCe(e.priority,function(){YCe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $6(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=IW(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);EW=r,n.target.dispatchEvent(r),EW=null}else return t=J3(n),t!==null&&xJ(t),e.blockedOn=n,!1;t.shift()}return!0}function mhe(e,t,n){$6(e)&&n.delete(t)}function ntt(){DW=!1,tv!==null&&$6(tv)&&(tv=null),nv!==null&&$6(nv)&&(nv=null),rv!==null&&$6(rv)&&(rv=null),rR.forEach(mhe),iR.forEach(mhe)}function lD(e,t){e.blockedOn===t&&(e.blockedOn=null,DW||(DW=!0,Mf.unstable_scheduleCallback(Mf.unstable_NormalPriority,ntt)))}function sR(e){function t(i){return lD(i,e)}if(0<zO.length){lD(zO[0],e);for(var n=1;n<zO.length;n++){var r=zO[n];r.blockedOn===e&&(r.blockedOn=null)}}for(tv!==null&&lD(tv,e),nv!==null&&lD(nv,e),rv!==null&&lD(rv,e),rR.forEach(t),iR.forEach(t),n=0;n<D1.length;n++)r=D1[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<D1.length&&(n=D1[0],n.blockedOn===null);)QCe(n),n.blockedOn===null&&D1.shift()}var cS=xy.ReactCurrentBatchConfig,lM=!0;function rtt(e,t,n,r){var i=qi,s=cS.transition;cS.transition=null;try{qi=1,wJ(e,t,n,r)}finally{qi=i,cS.transition=s}}function itt(e,t,n,r){var i=qi,s=cS.transition;cS.transition=null;try{qi=4,wJ(e,t,n,r)}finally{qi=i,cS.transition=s}}function wJ(e,t,n,r){if(lM){var i=IW(e,t,n,r);if(i===null)HU(e,t,r,cM,n),phe(e,r);else if(ttt(i,e,t,n,r))r.stopPropagation();else if(phe(e,r),t&4&&-1<ett.indexOf(e)){for(;i!==null;){var s=J3(i);if(s!==null&&GCe(s),s=IW(e,t,n,r),s===null&&HU(e,t,r,cM,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else HU(e,t,r,null,n)}}var cM=null;function IW(e,t,n,r){if(cM=null,e=yJ(r),e=ow(e),e!==null)if(t=P_(e),t===null)e=null;else if(n=t.tag,n===13){if(e=BCe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cM=e,null}function JCe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qet()){case vJ:return 1;case VCe:return 4;case aM:case Wet:return 16;case HCe:return 536870912;default:return 16}default:return 16}}var B1=null,_J=null,L6=null;function ZCe(){if(L6)return L6;var e,t=_J,n=t.length,r,i="value"in B1?B1.value:B1.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return L6=i.slice(e,1<r?1-r:void 0)}function B6(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function VO(){return!0}function ghe(){return!1}function Zf(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?VO:ghe,this.isPropagationStopped=ghe,this}return Xs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=VO)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=VO)},persist:function(){},isPersistent:VO}),t}var xT={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},EJ=Zf(xT),Q3=Xs({},xT,{view:0,detail:0}),stt=Zf(Q3),FU,MU,cD,rL=Xs({},Q3,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SJ,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cD&&(cD&&e.type==="mousemove"?(FU=e.screenX-cD.screenX,MU=e.screenY-cD.screenY):MU=FU=0,cD=e),FU)},movementY:function(e){return"movementY"in e?e.movementY:MU}}),yhe=Zf(rL),ott=Xs({},rL,{dataTransfer:0}),att=Zf(ott),utt=Xs({},Q3,{relatedTarget:0}),$U=Zf(utt),ltt=Xs({},xT,{animationName:0,elapsedTime:0,pseudoElement:0}),ctt=Zf(ltt),ftt=Xs({},xT,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dtt=Zf(ftt),htt=Xs({},xT,{data:0}),vhe=Zf(htt),ptt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mtt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gtt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ytt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gtt[e])?!!t[e]:!1}function SJ(){return ytt}var vtt=Xs({},Q3,{key:function(e){if(e.key){var t=ptt[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=B6(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mtt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SJ,charCode:function(e){return e.type==="keypress"?B6(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?B6(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),btt=Zf(vtt),xtt=Xs({},rL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bhe=Zf(xtt),wtt=Xs({},Q3,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SJ}),_tt=Zf(wtt),Ett=Xs({},xT,{propertyName:0,elapsedTime:0,pseudoElement:0}),Stt=Zf(Ett),Ctt=Xs({},rL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ttt=Zf(Ctt),Att=[9,13,27,32],CJ=Wg&&"CompositionEvent"in window,tk=null;Wg&&"documentMode"in document&&(tk=document.documentMode);var Dtt=Wg&&"TextEvent"in window&&!tk,eTe=Wg&&(!CJ||tk&&8<tk&&11>=tk),xhe=" ",whe=!1;function tTe(e,t){switch(e){case"keyup":return Att.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nTe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $2=!1;function Itt(e,t){switch(e){case"compositionend":return nTe(t);case"keypress":return t.which!==32?null:(whe=!0,xhe);case"textInput":return e=t.data,e===xhe&&whe?null:e;default:return null}}function ktt(e,t){if($2)return e==="compositionend"||!CJ&&tTe(e,t)?(e=ZCe(),L6=_J=B1=null,$2=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eTe&&t.locale!=="ko"?null:t.data;default:return null}}var Rtt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _he(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rtt[e.type]:t==="textarea"}function rTe(e,t,n,r){OCe(r),t=fM(t,"onChange"),0<t.length&&(n=new EJ("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nk=null,oR=null;function Ntt(e){pTe(e,0)}function iL(e){var t=j2(e);if(ACe(t))return e}function Ptt(e,t){if(e==="change")return t}var iTe=!1;if(Wg){var LU;if(Wg){var BU="oninput"in document;if(!BU){var Ehe=document.createElement("div");Ehe.setAttribute("oninput","return;"),BU=typeof Ehe.oninput=="function"}LU=BU}else LU=!1;iTe=LU&&(!document.documentMode||9<document.documentMode)}function She(){nk&&(nk.detachEvent("onpropertychange",sTe),oR=nk=null)}function sTe(e){if(e.propertyName==="value"&&iL(oR)){var t=[];rTe(t,oR,e,yJ(e)),LCe(Ntt,t)}}function Ott(e,t,n){e==="focusin"?(She(),nk=t,oR=n,nk.attachEvent("onpropertychange",sTe)):e==="focusout"&&She()}function Ftt(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return iL(oR)}function Mtt(e,t){if(e==="click")return iL(t)}function $tt(e,t){if(e==="input"||e==="change")return iL(t)}function Ltt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fp=typeof Object.is=="function"?Object.is:Ltt;function aR(e,t){if(fp(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fW.call(t,i)||!fp(e[i],t[i]))return!1}return!0}function Che(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function The(e,t){var n=Che(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Che(n)}}function oTe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oTe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function aTe(){for(var e=window,t=iM();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=iM(e.document)}return t}function TJ(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Btt(e){var t=aTe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&oTe(n.ownerDocument.documentElement,n)){if(r!==null&&TJ(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=The(n,s);var o=The(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jtt=Wg&&"documentMode"in document&&11>=document.documentMode,L2=null,kW=null,rk=null,RW=!1;function Ahe(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;RW||L2==null||L2!==iM(r)||(r=L2,"selectionStart"in r&&TJ(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rk&&aR(rk,r)||(rk=r,r=fM(kW,"onSelect"),0<r.length&&(t=new EJ("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=L2)))}function HO(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var B2={animationend:HO("Animation","AnimationEnd"),animationiteration:HO("Animation","AnimationIteration"),animationstart:HO("Animation","AnimationStart"),transitionend:HO("Transition","TransitionEnd")},jU={},uTe={};Wg&&(uTe=document.createElement("div").style,"AnimationEvent"in window||(delete B2.animationend.animation,delete B2.animationiteration.animation,delete B2.animationstart.animation),"TransitionEvent"in window||delete B2.transitionend.transition);function sL(e){if(jU[e])return jU[e];if(!B2[e])return e;var t=B2[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uTe)return jU[e]=t[n];return e}var lTe=sL("animationend"),cTe=sL("animationiteration"),fTe=sL("animationstart"),dTe=sL("transitionend"),hTe=new Map,Dhe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pb(e,t){hTe.set(e,t),N_(t,[e])}for(var UU=0;UU<Dhe.length;UU++){var zU=Dhe[UU],Utt=zU.toLowerCase(),ztt=zU[0].toUpperCase()+zU.slice(1);pb(Utt,"on"+ztt)}pb(lTe,"onAnimationEnd");pb(cTe,"onAnimationIteration");pb(fTe,"onAnimationStart");pb("dblclick","onDoubleClick");pb("focusin","onFocus");pb("focusout","onBlur");pb(dTe,"onTransitionEnd");XS("onMouseEnter",["mouseout","mouseover"]);XS("onMouseLeave",["mouseout","mouseover"]);XS("onPointerEnter",["pointerout","pointerover"]);XS("onPointerLeave",["pointerout","pointerover"]);N_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));N_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));N_("onBeforeInput",["compositionend","keypress","textInput","paste"]);N_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));N_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));N_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vtt=new Set("cancel close invalid load scroll toggle".split(" ").concat(lI));function Ihe(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Uet(r,t,void 0,e),e.currentTarget=null}function pTe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Ihe(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Ihe(i,a,l),s=u}}}if(oM)throw e=TW,oM=!1,TW=null,e}function vs(e,t){var n=t[MW];n===void 0&&(n=t[MW]=new Set);var r=e+"__bubble";n.has(r)||(mTe(t,e,2,!1),n.add(r))}function VU(e,t,n){var r=0;t&&(r|=4),mTe(n,e,r,t)}var qO="_reactListening"+Math.random().toString(36).slice(2);function uR(e){if(!e[qO]){e[qO]=!0,_Ce.forEach(function(n){n!=="selectionchange"&&(Vtt.has(n)||VU(n,!1,e),VU(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qO]||(t[qO]=!0,VU("selectionchange",!1,t))}}function mTe(e,t,n,r){switch(JCe(t)){case 1:var i=rtt;break;case 4:i=itt;break;default:i=wJ}n=i.bind(null,t,n,e),i=void 0,!CW||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function HU(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ow(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}LCe(function(){var l=s,c=yJ(n),f=[];e:{var d=hTe.get(e);if(d!==void 0){var h=EJ,p=e;switch(e){case"keypress":if(B6(n)===0)break e;case"keydown":case"keyup":h=btt;break;case"focusin":p="focus",h=$U;break;case"focusout":p="blur",h=$U;break;case"beforeblur":case"afterblur":h=$U;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=yhe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=att;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=_tt;break;case lTe:case cTe:case fTe:h=ctt;break;case dTe:h=Stt;break;case"scroll":h=stt;break;case"wheel":h=Ttt;break;case"copy":case"cut":case"paste":h=dtt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=bhe}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,y!==null&&(_=nR(v,y),_!=null&&m.push(lR(v,_,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==EW&&(p=n.relatedTarget||n.fromElement)&&(ow(p)||p[Gg]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?ow(p):null,p!==null&&(g=P_(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=yhe,_="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=bhe,_="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:j2(h),b=p==null?d:j2(p),d=new m(_,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,_=null,ow(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,_=m),g=_,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=jE(b))v++;for(b=0,_=y;_;_=jE(_))b++;for(;0<v-b;)m=jE(m),v--;for(;0<b-v;)y=jE(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=jE(m),y=jE(y)}m=null}else m=null;h!==null&&khe(f,d,h,m,!1),p!==null&&g!==null&&khe(f,g,p,m,!0)}}e:{if(d=l?j2(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=Ptt;else if(_he(d))if(iTe)w=$tt;else{w=Ftt;var S=Ott}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=Mtt);if(w&&(w=w(e,l))){rTe(f,w,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&vW(d,"number",d.value)}switch(S=l?j2(l):window,e){case"focusin":(_he(S)||S.contentEditable==="true")&&(L2=S,kW=l,rk=null);break;case"focusout":rk=kW=L2=null;break;case"mousedown":RW=!0;break;case"contextmenu":case"mouseup":case"dragend":RW=!1,Ahe(f,n,c);break;case"selectionchange":if(jtt)break;case"keydown":case"keyup":Ahe(f,n,c)}var T;if(CJ)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else $2?tTe(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(eTe&&n.locale!=="ko"&&($2||A!=="onCompositionStart"?A==="onCompositionEnd"&&$2&&(T=ZCe()):(B1=c,_J="value"in B1?B1.value:B1.textContent,$2=!0)),S=fM(l,A),0<S.length&&(A=new vhe(A,e,null,n,c),f.push({event:A,listeners:S}),T?A.data=T:(T=nTe(n),T!==null&&(A.data=T)))),(T=Dtt?Itt(e,n):ktt(e,n))&&(l=fM(l,"onBeforeInput"),0<l.length&&(c=new vhe("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=T))}pTe(f,t)})}function lR(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fM(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=nR(e,n),s!=null&&r.unshift(lR(e,s,i)),s=nR(e,t),s!=null&&r.push(lR(e,s,i))),e=e.return}return r}function jE(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function khe(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=nR(n,s),u!=null&&o.unshift(lR(n,u,a))):i||(u=nR(n,s),u!=null&&o.push(lR(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Htt=/\r\n?/g,qtt=/\u0000|\uFFFD/g;function Rhe(e){return(typeof e=="string"?e:""+e).replace(Htt,`
`).replace(qtt,"")}function WO(e,t,n){if(t=Rhe(t),Rhe(e)!==t&&n)throw Error(kt(425))}function dM(){}var NW=null,PW=null;function OW(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var FW=typeof setTimeout=="function"?setTimeout:void 0,Wtt=typeof clearTimeout=="function"?clearTimeout:void 0,Nhe=typeof Promise=="function"?Promise:void 0,Gtt=typeof queueMicrotask=="function"?queueMicrotask:typeof Nhe<"u"?function(e){return Nhe.resolve(null).then(e).catch(Ytt)}:FW;function Ytt(e){setTimeout(function(){throw e})}function qU(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),sR(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);sR(t)}function iv(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Phe(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var wT=Math.random().toString(36).slice(2),om="__reactFiber$"+wT,cR="__reactProps$"+wT,Gg="__reactContainer$"+wT,MW="__reactEvents$"+wT,Ktt="__reactListeners$"+wT,Xtt="__reactHandles$"+wT;function ow(e){var t=e[om];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gg]||n[om]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Phe(e);e!==null;){if(n=e[om])return n;e=Phe(e)}return t}e=n,n=e.parentNode}return null}function J3(e){return e=e[om]||e[Gg],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function j2(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(kt(33))}function oL(e){return e[cR]||null}var $W=[],U2=-1;function mb(e){return{current:e}}function Cs(e){0>U2||(e.current=$W[U2],$W[U2]=null,U2--)}function ds(e,t){U2++,$W[U2]=e.current,e.current=t}var Av={},Zu=mb(Av),Rc=mb(!1),zw=Av;function QS(e,t){var n=e.type.contextTypes;if(!n)return Av;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Nc(e){return e=e.childContextTypes,e!=null}function hM(){Cs(Rc),Cs(Zu)}function Ohe(e,t,n){if(Zu.current!==Av)throw Error(kt(168));ds(Zu,t),ds(Rc,n)}function gTe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(kt(108,Oet(e)||"Unknown",i));return Xs({},n,r)}function pM(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Av,zw=Zu.current,ds(Zu,e),ds(Rc,Rc.current),!0}function Fhe(e,t,n){var r=e.stateNode;if(!r)throw Error(kt(169));n?(e=gTe(e,t,zw),r.__reactInternalMemoizedMergedChildContext=e,Cs(Rc),Cs(Zu),ds(Zu,e)):Cs(Rc),ds(Rc,n)}var rg=null,aL=!1,WU=!1;function yTe(e){rg===null?rg=[e]:rg.push(e)}function Qtt(e){aL=!0,yTe(e)}function gb(){if(!WU&&rg!==null){WU=!0;var e=0,t=qi;try{var n=rg;for(qi=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rg=null,aL=!1}catch(i){throw rg!==null&&(rg=rg.slice(e+1)),zCe(vJ,gb),i}finally{qi=t,WU=!1}}return null}var z2=[],V2=0,mM=null,gM=0,Ed=[],Sd=0,Vw=null,gg=1,yg="";function Dx(e,t){z2[V2++]=gM,z2[V2++]=mM,mM=e,gM=t}function vTe(e,t,n){Ed[Sd++]=gg,Ed[Sd++]=yg,Ed[Sd++]=Vw,Vw=e;var r=gg;e=yg;var i=32-tp(r)-1;r&=~(1<<i),n+=1;var s=32-tp(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,gg=1<<32-tp(t)+i|n<<i|r,yg=s+e}else gg=1<<s|n<<i|r,yg=e}function AJ(e){e.return!==null&&(Dx(e,1),vTe(e,1,0))}function DJ(e){for(;e===mM;)mM=z2[--V2],z2[V2]=null,gM=z2[--V2],z2[V2]=null;for(;e===Vw;)Vw=Ed[--Sd],Ed[Sd]=null,yg=Ed[--Sd],Ed[Sd]=null,gg=Ed[--Sd],Ed[Sd]=null}var If=null,wf=null,$s=!1,Mh=null;function bTe(e,t){var n=Rd(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mhe(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,If=e,wf=iv(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,If=e,wf=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vw!==null?{id:gg,overflow:yg}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Rd(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,If=e,wf=null,!0):!1;default:return!1}}function LW(e){return(e.mode&1)!==0&&(e.flags&128)===0}function BW(e){if($s){var t=wf;if(t){var n=t;if(!Mhe(e,t)){if(LW(e))throw Error(kt(418));t=iv(n.nextSibling);var r=If;t&&Mhe(e,t)?bTe(r,n):(e.flags=e.flags&-4097|2,$s=!1,If=e)}}else{if(LW(e))throw Error(kt(418));e.flags=e.flags&-4097|2,$s=!1,If=e}}}function $he(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;If=e}function GO(e){if(e!==If)return!1;if(!$s)return $he(e),$s=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!OW(e.type,e.memoizedProps)),t&&(t=wf)){if(LW(e))throw xTe(),Error(kt(418));for(;t;)bTe(e,t),t=iv(t.nextSibling)}if($he(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(kt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wf=iv(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wf=null}}else wf=If?iv(e.stateNode.nextSibling):null;return!0}function xTe(){for(var e=wf;e;)e=iv(e.nextSibling)}function JS(){wf=If=null,$s=!1}function IJ(e){Mh===null?Mh=[e]:Mh.push(e)}var Jtt=xy.ReactCurrentBatchConfig;function fD(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(kt(309));var r=n.stateNode}if(!r)throw Error(kt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(kt(284));if(!n._owner)throw Error(kt(290,e))}return e}function YO(e,t){throw e=Object.prototype.toString.call(t),Error(kt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lhe(e){var t=e._init;return t(e._payload)}function wTe(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=uv(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,_){return v===null||v.tag!==6?(v=ZU(b,y.mode,_),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,_){var w=b.type;return w===M2?c(y,v,b.props.children,_,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===y1&&Lhe(w)===v.type)?(_=i(v,b.props),_.ref=fD(y,v,b),_.return=y,_):(_=W6(b.type,b.key,b.props,null,y.mode,_),_.ref=fD(y,v,b),_.return=y,_)}function l(y,v,b,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=ez(b,y.mode,_),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,_,w){return v===null||v.tag!==7?(v=Dw(b,y.mode,_,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ZU(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $O:return b=W6(v.type,v.key,v.props,null,y.mode,b),b.ref=fD(y,null,v),b.return=y,b;case F2:return v=ez(v,y.mode,b),v.return=y,v;case y1:var _=v._init;return f(y,_(v._payload),b)}if(aI(v)||oD(v))return v=Dw(v,y.mode,b,null),v.return=y,v;YO(y,v)}return null}function d(y,v,b,_){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,v,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $O:return b.key===w?u(y,v,b,_):null;case F2:return b.key===w?l(y,v,b,_):null;case y1:return w=b._init,d(y,v,w(b._payload),_)}if(aI(b)||oD(b))return w!==null?null:c(y,v,b,_,null);YO(y,b)}return null}function h(y,v,b,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(b)||null,a(v,y,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $O:return y=y.get(_.key===null?b:_.key)||null,u(v,y,_,w);case F2:return y=y.get(_.key===null?b:_.key)||null,l(v,y,_,w);case y1:var S=_._init;return h(y,v,b,S(_._payload),w)}if(aI(_)||oD(_))return y=y.get(b)||null,c(v,y,_,w,null);YO(v,_)}return null}function p(y,v,b,_){for(var w=null,S=null,T=v,A=v=0,k=null;T!==null&&A<b.length;A++){T.index>A?(k=T,T=null):k=T.sibling;var I=d(y,T,b[A],_);if(I===null){T===null&&(T=k);break}e&&T&&I.alternate===null&&t(y,T),v=s(I,v,A),S===null?w=I:S.sibling=I,S=I,T=k}if(A===b.length)return n(y,T),$s&&Dx(y,A),w;if(T===null){for(;A<b.length;A++)T=f(y,b[A],_),T!==null&&(v=s(T,v,A),S===null?w=T:S.sibling=T,S=T);return $s&&Dx(y,A),w}for(T=r(y,T);A<b.length;A++)k=h(T,y,A,b[A],_),k!==null&&(e&&k.alternate!==null&&T.delete(k.key===null?A:k.key),v=s(k,v,A),S===null?w=k:S.sibling=k,S=k);return e&&T.forEach(function(R){return t(y,R)}),$s&&Dx(y,A),w}function m(y,v,b,_){var w=oD(b);if(typeof w!="function")throw Error(kt(150));if(b=w.call(b),b==null)throw Error(kt(151));for(var S=w=null,T=v,A=v=0,k=null,I=b.next();T!==null&&!I.done;A++,I=b.next()){T.index>A?(k=T,T=null):k=T.sibling;var R=d(y,T,I.value,_);if(R===null){T===null&&(T=k);break}e&&T&&R.alternate===null&&t(y,T),v=s(R,v,A),S===null?w=R:S.sibling=R,S=R,T=k}if(I.done)return n(y,T),$s&&Dx(y,A),w;if(T===null){for(;!I.done;A++,I=b.next())I=f(y,I.value,_),I!==null&&(v=s(I,v,A),S===null?w=I:S.sibling=I,S=I);return $s&&Dx(y,A),w}for(T=r(y,T);!I.done;A++,I=b.next())I=h(T,y,A,I.value,_),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?A:I.key),v=s(I,v,A),S===null?w=I:S.sibling=I,S=I);return e&&T.forEach(function(F){return t(y,F)}),$s&&Dx(y,A),w}function g(y,v,b,_){if(typeof b=="object"&&b!==null&&b.type===M2&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $O:e:{for(var w=b.key,S=v;S!==null;){if(S.key===w){if(w=b.type,w===M2){if(S.tag===7){n(y,S.sibling),v=i(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===y1&&Lhe(w)===S.type){n(y,S.sibling),v=i(S,b.props),v.ref=fD(y,S,b),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}b.type===M2?(v=Dw(b.props.children,y.mode,_,b.key),v.return=y,y=v):(_=W6(b.type,b.key,b.props,null,y.mode,_),_.ref=fD(y,v,b),_.return=y,y=_)}return o(y);case F2:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=ez(b,y.mode,_),v.return=y,y=v}return o(y);case y1:return S=b._init,g(y,v,S(b._payload),_)}if(aI(b))return p(y,v,b,_);if(oD(b))return m(y,v,b,_);YO(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=ZU(b,y.mode,_),v.return=y,y=v),o(y)):n(y,v)}return g}var ZS=wTe(!0),_Te=wTe(!1),yM=mb(null),vM=null,H2=null,kJ=null;function RJ(){kJ=H2=vM=null}function NJ(e){var t=yM.current;Cs(yM),e._currentValue=t}function jW(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fS(e,t){vM=e,kJ=H2=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Sc=!0),e.firstContext=null)}function Bd(e){var t=e._currentValue;if(kJ!==e)if(e={context:e,memoizedValue:t,next:null},H2===null){if(vM===null)throw Error(kt(308));H2=e,vM.dependencies={lanes:0,firstContext:e}}else H2=H2.next=e;return t}var aw=null;function PJ(e){aw===null?aw=[e]:aw.push(e)}function ETe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,PJ(t)):(n.next=i.next,i.next=n),t.interleaved=n,Yg(e,r)}function Yg(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var v1=!1;function OJ(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function STe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rg(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sv(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ci&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Yg(e,n)}return i=r.interleaved,i===null?(t.next=t,PJ(r)):(t.next=i.next,i.next=t),r.interleaved=t,Yg(e,n)}function j6(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bJ(e,n)}}function Bhe(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bM(e,t,n,r){var i=e.updateQueue;v1=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Xs({},f,d);break e;case 2:v1=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);qw|=o,e.lanes=o,e.memoizedState=f}}function jhe(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(kt(191,i));i.call(r)}}}var Z3={},Am=mb(Z3),fR=mb(Z3),dR=mb(Z3);function uw(e){if(e===Z3)throw Error(kt(174));return e}function FJ(e,t){switch(ds(dR,t),ds(fR,e),ds(Am,Z3),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xW(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xW(t,e)}Cs(Am),ds(Am,t)}function eC(){Cs(Am),Cs(fR),Cs(dR)}function CTe(e){uw(dR.current);var t=uw(Am.current),n=xW(t,e.type);t!==n&&(ds(fR,e),ds(Am,n))}function MJ(e){fR.current===e&&(Cs(Am),Cs(fR))}var Ws=mb(0);function xM(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var GU=[];function $J(){for(var e=0;e<GU.length;e++)GU[e]._workInProgressVersionPrimary=null;GU.length=0}var U6=xy.ReactCurrentDispatcher,YU=xy.ReactCurrentBatchConfig,Hw=0,Ks=null,ta=null,Aa=null,wM=!1,ik=!1,hR=0,Ztt=0;function Su(){throw Error(kt(321))}function LJ(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!fp(e[n],t[n]))return!1;return!0}function BJ(e,t,n,r,i,s){if(Hw=s,Ks=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U6.current=e===null||e.memoizedState===null?rnt:int,e=n(r,i),ik){s=0;do{if(ik=!1,hR=0,25<=s)throw Error(kt(301));s+=1,Aa=ta=null,t.updateQueue=null,U6.current=snt,e=n(r,i)}while(ik)}if(U6.current=_M,t=ta!==null&&ta.next!==null,Hw=0,Aa=ta=Ks=null,wM=!1,t)throw Error(kt(300));return e}function jJ(){var e=hR!==0;return hR=0,e}function Kp(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Aa===null?Ks.memoizedState=Aa=e:Aa=Aa.next=e,Aa}function jd(){if(ta===null){var e=Ks.alternate;e=e!==null?e.memoizedState:null}else e=ta.next;var t=Aa===null?Ks.memoizedState:Aa.next;if(t!==null)Aa=t,ta=e;else{if(e===null)throw Error(kt(310));ta=e,e={memoizedState:ta.memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},Aa===null?Ks.memoizedState=Aa=e:Aa=Aa.next=e}return Aa}function pR(e,t){return typeof t=="function"?t(e):t}function KU(e){var t=jd(),n=t.queue;if(n===null)throw Error(kt(311));n.lastRenderedReducer=e;var r=ta,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Hw&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ks.lanes|=c,qw|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,fp(r,t.memoizedState)||(Sc=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ks.lanes|=s,qw|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function XU(e){var t=jd(),n=t.queue;if(n===null)throw Error(kt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);fp(s,t.memoizedState)||(Sc=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function TTe(){}function ATe(e,t){var n=Ks,r=jd(),i=t(),s=!fp(r.memoizedState,i);if(s&&(r.memoizedState=i,Sc=!0),r=r.queue,UJ(kTe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Aa!==null&&Aa.memoizedState.tag&1){if(n.flags|=2048,mR(9,ITe.bind(null,n,r,i,t),void 0,null),$a===null)throw Error(kt(349));Hw&30||DTe(n,t,i)}return i}function DTe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ks.updateQueue,t===null?(t={lastEffect:null,stores:null},Ks.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ITe(e,t,n,r){t.value=n,t.getSnapshot=r,RTe(t)&&NTe(e)}function kTe(e,t,n){return n(function(){RTe(t)&&NTe(e)})}function RTe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fp(e,n)}catch{return!0}}function NTe(e){var t=Yg(e,1);t!==null&&np(t,e,1,-1)}function Uhe(e){var t=Kp();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pR,lastRenderedState:e},t.queue=e,e=e.dispatch=nnt.bind(null,Ks,e),[t.memoizedState,e]}function mR(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ks.updateQueue,t===null?(t={lastEffect:null,stores:null},Ks.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function PTe(){return jd().memoizedState}function z6(e,t,n,r){var i=Kp();Ks.flags|=e,i.memoizedState=mR(1|t,n,void 0,r===void 0?null:r)}function uL(e,t,n,r){var i=jd();r=r===void 0?null:r;var s=void 0;if(ta!==null){var o=ta.memoizedState;if(s=o.destroy,r!==null&&LJ(r,o.deps)){i.memoizedState=mR(t,n,s,r);return}}Ks.flags|=e,i.memoizedState=mR(1|t,n,s,r)}function zhe(e,t){return z6(8390656,8,e,t)}function UJ(e,t){return uL(2048,8,e,t)}function OTe(e,t){return uL(4,2,e,t)}function FTe(e,t){return uL(4,4,e,t)}function MTe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $Te(e,t,n){return n=n!=null?n.concat([e]):null,uL(4,4,MTe.bind(null,t,e),n)}function zJ(){}function LTe(e,t){var n=jd();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&LJ(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function BTe(e,t){var n=jd();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&LJ(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function jTe(e,t,n){return Hw&21?(fp(n,t)||(n=qCe(),Ks.lanes|=n,qw|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Sc=!0),e.memoizedState=n)}function ent(e,t){var n=qi;qi=n!==0&&4>n?n:4,e(!0);var r=YU.transition;YU.transition={};try{e(!1),t()}finally{qi=n,YU.transition=r}}function UTe(){return jd().memoizedState}function tnt(e,t,n){var r=av(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zTe(e))VTe(t,n);else if(n=ETe(e,t,n,r),n!==null){var i=Nl();np(n,e,r,i),HTe(n,t,r)}}function nnt(e,t,n){var r=av(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zTe(e))VTe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,fp(a,o)){var u=t.interleaved;u===null?(i.next=i,PJ(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=ETe(e,t,i,r),n!==null&&(i=Nl(),np(n,e,r,i),HTe(n,t,r))}}function zTe(e){var t=e.alternate;return e===Ks||t!==null&&t===Ks}function VTe(e,t){ik=wM=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function HTe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bJ(e,n)}}var _M={readContext:Bd,useCallback:Su,useContext:Su,useEffect:Su,useImperativeHandle:Su,useInsertionEffect:Su,useLayoutEffect:Su,useMemo:Su,useReducer:Su,useRef:Su,useState:Su,useDebugValue:Su,useDeferredValue:Su,useTransition:Su,useMutableSource:Su,useSyncExternalStore:Su,useId:Su,unstable_isNewReconciler:!1},rnt={readContext:Bd,useCallback:function(e,t){return Kp().memoizedState=[e,t===void 0?null:t],e},useContext:Bd,useEffect:zhe,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,z6(4194308,4,MTe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return z6(4194308,4,e,t)},useInsertionEffect:function(e,t){return z6(4,2,e,t)},useMemo:function(e,t){var n=Kp();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Kp();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tnt.bind(null,Ks,e),[r.memoizedState,e]},useRef:function(e){var t=Kp();return e={current:e},t.memoizedState=e},useState:Uhe,useDebugValue:zJ,useDeferredValue:function(e){return Kp().memoizedState=e},useTransition:function(){var e=Uhe(!1),t=e[0];return e=ent.bind(null,e[1]),Kp().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ks,i=Kp();if($s){if(n===void 0)throw Error(kt(407));n=n()}else{if(n=t(),$a===null)throw Error(kt(349));Hw&30||DTe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,zhe(kTe.bind(null,r,s,e),[e]),r.flags|=2048,mR(9,ITe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Kp(),t=$a.identifierPrefix;if($s){var n=yg,r=gg;n=(r&~(1<<32-tp(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hR++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Ztt++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},int={readContext:Bd,useCallback:LTe,useContext:Bd,useEffect:UJ,useImperativeHandle:$Te,useInsertionEffect:OTe,useLayoutEffect:FTe,useMemo:BTe,useReducer:KU,useRef:PTe,useState:function(){return KU(pR)},useDebugValue:zJ,useDeferredValue:function(e){var t=jd();return jTe(t,ta.memoizedState,e)},useTransition:function(){var e=KU(pR)[0],t=jd().memoizedState;return[e,t]},useMutableSource:TTe,useSyncExternalStore:ATe,useId:UTe,unstable_isNewReconciler:!1},snt={readContext:Bd,useCallback:LTe,useContext:Bd,useEffect:UJ,useImperativeHandle:$Te,useInsertionEffect:OTe,useLayoutEffect:FTe,useMemo:BTe,useReducer:XU,useRef:PTe,useState:function(){return XU(pR)},useDebugValue:zJ,useDeferredValue:function(e){var t=jd();return ta===null?t.memoizedState=e:jTe(t,ta.memoizedState,e)},useTransition:function(){var e=XU(pR)[0],t=jd().memoizedState;return[e,t]},useMutableSource:TTe,useSyncExternalStore:ATe,useId:UTe,unstable_isNewReconciler:!1};function kh(e,t){if(e&&e.defaultProps){t=Xs({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function UW(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xs({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var lL={isMounted:function(e){return(e=e._reactInternals)?P_(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Nl(),i=av(e),s=Rg(r,i);s.payload=t,n!=null&&(s.callback=n),t=sv(e,s,i),t!==null&&(np(t,e,i,r),j6(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Nl(),i=av(e),s=Rg(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=sv(e,s,i),t!==null&&(np(t,e,i,r),j6(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nl(),r=av(e),i=Rg(n,r);i.tag=2,t!=null&&(i.callback=t),t=sv(e,i,r),t!==null&&(np(t,e,r,n),j6(t,e,r))}};function Vhe(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!aR(n,r)||!aR(i,s):!0}function qTe(e,t,n){var r=!1,i=Av,s=t.contextType;return typeof s=="object"&&s!==null?s=Bd(s):(i=Nc(t)?zw:Zu.current,r=t.contextTypes,s=(r=r!=null)?QS(e,i):Av),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Hhe(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&lL.enqueueReplaceState(t,t.state,null)}function zW(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},OJ(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Bd(s):(s=Nc(t)?zw:Zu.current,i.context=QS(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(UW(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&lL.enqueueReplaceState(i,i.state,null),bM(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function tC(e,t){try{var n="",r=t;do n+=Pet(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function QU(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function VW(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ont=typeof WeakMap=="function"?WeakMap:Map;function WTe(e,t,n){n=Rg(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){SM||(SM=!0,ZW=r),VW(e,t)},n}function GTe(e,t,n){n=Rg(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){VW(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){VW(e,t),typeof r!="function"&&(ov===null?ov=new Set([this]):ov.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function qhe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ont;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xnt.bind(null,e,t,n),t.then(e,e))}function Whe(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ghe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rg(-1,1),t.tag=2,sv(n,t,1))),n.lanes|=1),e)}var ant=xy.ReactCurrentOwner,Sc=!1;function wl(e,t,n,r){t.child=e===null?_Te(t,null,n,r):ZS(t,e.child,n,r)}function Yhe(e,t,n,r,i){n=n.render;var s=t.ref;return fS(t,i),r=BJ(e,t,n,r,s,i),n=jJ(),e!==null&&!Sc?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kg(e,t,i)):($s&&n&&AJ(t),t.flags|=1,wl(e,t,r,i),t.child)}function Khe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!XJ(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,YTe(e,t,s,r,i)):(e=W6(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:aR,n(o,r)&&e.ref===t.ref)return Kg(e,t,i)}return t.flags|=1,e=uv(s,r),e.ref=t.ref,e.return=t,t.child=e}function YTe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(aR(s,r)&&e.ref===t.ref)if(Sc=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Sc=!0);else return t.lanes=e.lanes,Kg(e,t,i)}return HW(e,t,n,r,i)}function KTe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ds(W2,pf),pf|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ds(W2,pf),pf|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ds(W2,pf),pf|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ds(W2,pf),pf|=r;return wl(e,t,i,n),t.child}function XTe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function HW(e,t,n,r,i){var s=Nc(n)?zw:Zu.current;return s=QS(t,s),fS(t,i),n=BJ(e,t,n,r,s,i),r=jJ(),e!==null&&!Sc?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Kg(e,t,i)):($s&&r&&AJ(t),t.flags|=1,wl(e,t,n,i),t.child)}function Xhe(e,t,n,r,i){if(Nc(n)){var s=!0;pM(t)}else s=!1;if(fS(t,i),t.stateNode===null)V6(e,t),qTe(t,n,r),zW(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Bd(l):(l=Nc(n)?zw:Zu.current,l=QS(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Hhe(t,o,r,l),v1=!1;var d=t.memoizedState;o.state=d,bM(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Rc.current||v1?(typeof c=="function"&&(UW(t,n,c,r),u=t.memoizedState),(a=v1||Vhe(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,STe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:kh(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Bd(u):(u=Nc(n)?zw:Zu.current,u=QS(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Hhe(t,o,r,u),v1=!1,d=t.memoizedState,o.state=d,bM(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Rc.current||v1?(typeof h=="function"&&(UW(t,n,h,r),p=t.memoizedState),(l=v1||Vhe(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return qW(e,t,n,r,s,i)}function qW(e,t,n,r,i,s){XTe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Fhe(t,n,!1),Kg(e,t,s);r=t.stateNode,ant.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ZS(t,e.child,null,s),t.child=ZS(t,null,a,s)):wl(e,t,a,s),t.memoizedState=r.state,i&&Fhe(t,n,!0),t.child}function QTe(e){var t=e.stateNode;t.pendingContext?Ohe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ohe(e,t.context,!1),FJ(e,t.containerInfo)}function Qhe(e,t,n,r,i){return JS(),IJ(i),t.flags|=256,wl(e,t,n,r),t.child}var WW={dehydrated:null,treeContext:null,retryLane:0};function GW(e){return{baseLanes:e,cachePool:null,transitions:null}}function JTe(e,t,n){var r=t.pendingProps,i=Ws.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ds(Ws,i&1),e===null)return BW(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=dL(o,r,0,null),e=Dw(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=GW(n),t.memoizedState=WW,e):VJ(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return unt(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=uv(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=uv(a,s):(s=Dw(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?GW(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=WW,r}return s=e.child,e=s.sibling,r=uv(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function VJ(e,t){return t=dL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function KO(e,t,n,r){return r!==null&&IJ(r),ZS(t,e.child,null,n),e=VJ(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function unt(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=QU(Error(kt(422))),KO(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=dL({mode:"visible",children:r.children},i,0,null),s=Dw(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&ZS(t,e.child,null,o),t.child.memoizedState=GW(o),t.memoizedState=WW,s);if(!(t.mode&1))return KO(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(kt(419)),r=QU(s,r,void 0),KO(e,t,o,r)}if(a=(o&e.childLanes)!==0,Sc||a){if(r=$a,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yg(e,i),np(r,e,i,-1))}return KJ(),r=QU(Error(kt(421))),KO(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=wnt.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,wf=iv(i.nextSibling),If=t,$s=!0,Mh=null,e!==null&&(Ed[Sd++]=gg,Ed[Sd++]=yg,Ed[Sd++]=Vw,gg=e.id,yg=e.overflow,Vw=t),t=VJ(t,r.children),t.flags|=4096,t)}function Jhe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),jW(e.return,t,n)}function JU(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ZTe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wl(e,t,r.children,n),r=Ws.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jhe(e,n,t);else if(e.tag===19)Jhe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ds(Ws,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&xM(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),JU(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&xM(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}JU(t,!0,n,null,s);break;case"together":JU(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function V6(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kg(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),qw|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(kt(153));if(t.child!==null){for(e=t.child,n=uv(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=uv(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lnt(e,t,n){switch(t.tag){case 3:QTe(t),JS();break;case 5:CTe(t);break;case 1:Nc(t.type)&&pM(t);break;case 4:FJ(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ds(yM,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ds(Ws,Ws.current&1),t.flags|=128,null):n&t.child.childLanes?JTe(e,t,n):(ds(Ws,Ws.current&1),e=Kg(e,t,n),e!==null?e.sibling:null);ds(Ws,Ws.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ZTe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ds(Ws,Ws.current),r)break;return null;case 22:case 23:return t.lanes=0,KTe(e,t,n)}return Kg(e,t,n)}var eAe,YW,tAe,nAe;eAe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};YW=function(){};tAe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,uw(Am.current);var s=null;switch(n){case"input":i=gW(e,i),r=gW(e,r),s=[];break;case"select":i=Xs({},i,{value:void 0}),r=Xs({},r,{value:void 0}),s=[];break;case"textarea":i=bW(e,i),r=bW(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=dM)}wW(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(eR.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(eR.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&vs("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};nAe=function(e,t,n,r){n!==r&&(t.flags|=4)};function dD(e,t){if(!$s)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Cu(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cnt(e,t,n){var r=t.pendingProps;switch(DJ(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cu(t),null;case 1:return Nc(t.type)&&hM(),Cu(t),null;case 3:return r=t.stateNode,eC(),Cs(Rc),Cs(Zu),$J(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(GO(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mh!==null&&(nG(Mh),Mh=null))),YW(e,t),Cu(t),null;case 5:MJ(t);var i=uw(dR.current);if(n=t.type,e!==null&&t.stateNode!=null)tAe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(kt(166));return Cu(t),null}if(e=uw(Am.current),GO(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[om]=t,r[cR]=s,e=(t.mode&1)!==0,n){case"dialog":vs("cancel",r),vs("close",r);break;case"iframe":case"object":case"embed":vs("load",r);break;case"video":case"audio":for(i=0;i<lI.length;i++)vs(lI[i],r);break;case"source":vs("error",r);break;case"img":case"image":case"link":vs("error",r),vs("load",r);break;case"details":vs("toggle",r);break;case"input":ahe(r,s),vs("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},vs("invalid",r);break;case"textarea":lhe(r,s),vs("invalid",r)}wW(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&WO(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&WO(r.textContent,a,e),i=["children",""+a]):eR.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&vs("scroll",r)}switch(n){case"input":LO(r),uhe(r,s,!0);break;case"textarea":LO(r),che(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=dM)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kCe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[om]=t,e[cR]=r,eAe(e,t,!1,!1),t.stateNode=e;e:{switch(o=_W(n,r),n){case"dialog":vs("cancel",e),vs("close",e),i=r;break;case"iframe":case"object":case"embed":vs("load",e),i=r;break;case"video":case"audio":for(i=0;i<lI.length;i++)vs(lI[i],e);i=r;break;case"source":vs("error",e),i=r;break;case"img":case"image":case"link":vs("error",e),vs("load",e),i=r;break;case"details":vs("toggle",e),i=r;break;case"input":ahe(e,r),i=gW(e,r),vs("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Xs({},r,{value:void 0}),vs("invalid",e);break;case"textarea":lhe(e,r),i=bW(e,r),vs("invalid",e);break;default:i=r}wW(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?PCe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&RCe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&tR(e,u):typeof u=="number"&&tR(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(eR.hasOwnProperty(s)?u!=null&&s==="onScroll"&&vs("scroll",e):u!=null&&hJ(e,s,u,o))}switch(n){case"input":LO(e),uhe(e,r,!1);break;case"textarea":LO(e),che(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Tv(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?aS(e,!!r.multiple,s,!1):r.defaultValue!=null&&aS(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=dM)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Cu(t),null;case 6:if(e&&t.stateNode!=null)nAe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(kt(166));if(n=uw(dR.current),uw(Am.current),GO(t)){if(r=t.stateNode,n=t.memoizedProps,r[om]=t,(s=r.nodeValue!==n)&&(e=If,e!==null))switch(e.tag){case 3:WO(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&WO(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[om]=t,t.stateNode=r}return Cu(t),null;case 13:if(Cs(Ws),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($s&&wf!==null&&t.mode&1&&!(t.flags&128))xTe(),JS(),t.flags|=98560,s=!1;else if(s=GO(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(kt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(kt(317));s[om]=t}else JS(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Cu(t),s=!1}else Mh!==null&&(nG(Mh),Mh=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ws.current&1?la===0&&(la=3):KJ())),t.updateQueue!==null&&(t.flags|=4),Cu(t),null);case 4:return eC(),YW(e,t),e===null&&uR(t.stateNode.containerInfo),Cu(t),null;case 10:return NJ(t.type._context),Cu(t),null;case 17:return Nc(t.type)&&hM(),Cu(t),null;case 19:if(Cs(Ws),s=t.memoizedState,s===null)return Cu(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)dD(s,!1);else{if(la!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=xM(e),o!==null){for(t.flags|=128,dD(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ds(Ws,Ws.current&1|2),t.child}e=e.sibling}s.tail!==null&&So()>nC&&(t.flags|=128,r=!0,dD(s,!1),t.lanes=4194304)}else{if(!r)if(e=xM(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),dD(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$s)return Cu(t),null}else 2*So()-s.renderingStartTime>nC&&n!==1073741824&&(t.flags|=128,r=!0,dD(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=So(),t.sibling=null,n=Ws.current,ds(Ws,r?n&1|2:n&1),t):(Cu(t),null);case 22:case 23:return YJ(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?pf&1073741824&&(Cu(t),t.subtreeFlags&6&&(t.flags|=8192)):Cu(t),null;case 24:return null;case 25:return null}throw Error(kt(156,t.tag))}function fnt(e,t){switch(DJ(t),t.tag){case 1:return Nc(t.type)&&hM(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return eC(),Cs(Rc),Cs(Zu),$J(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return MJ(t),null;case 13:if(Cs(Ws),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(kt(340));JS()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Cs(Ws),null;case 4:return eC(),null;case 10:return NJ(t.type._context),null;case 22:case 23:return YJ(),null;case 24:return null;default:return null}}var XO=!1,Bu=!1,dnt=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function q2(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){so(e,t,r)}else n.current=null}function KW(e,t,n){try{n()}catch(r){so(e,t,r)}}var Zhe=!1;function hnt(e,t){if(NW=lM,e=aTe(),TJ(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(PW={focusedElem:e,selectionRange:n},lM=!1,Kt=t;Kt!==null;)if(t=Kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Kt=e;else for(;Kt!==null;){t=Kt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:kh(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(kt(163))}}catch(_){so(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Kt=e;break}Kt=t.return}return p=Zhe,Zhe=!1,p}function sk(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&KW(t,n,s)}i=i.next}while(i!==r)}}function cL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function XW(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function rAe(e){var t=e.alternate;t!==null&&(e.alternate=null,rAe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[om],delete t[cR],delete t[MW],delete t[Ktt],delete t[Xtt])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iAe(e){return e.tag===5||e.tag===3||e.tag===4}function epe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iAe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function QW(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=dM));else if(r!==4&&(e=e.child,e!==null))for(QW(e,t,n),e=e.sibling;e!==null;)QW(e,t,n),e=e.sibling}function JW(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(JW(e,t,n),e=e.sibling;e!==null;)JW(e,t,n),e=e.sibling}var Za=null,Nh=!1;function n1(e,t,n){for(n=n.child;n!==null;)sAe(e,t,n),n=n.sibling}function sAe(e,t,n){if(Tm&&typeof Tm.onCommitFiberUnmount=="function")try{Tm.onCommitFiberUnmount(nL,n)}catch{}switch(n.tag){case 5:Bu||q2(n,t);case 6:var r=Za,i=Nh;Za=null,n1(e,t,n),Za=r,Nh=i,Za!==null&&(Nh?(e=Za,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Za.removeChild(n.stateNode));break;case 18:Za!==null&&(Nh?(e=Za,n=n.stateNode,e.nodeType===8?qU(e.parentNode,n):e.nodeType===1&&qU(e,n),sR(e)):qU(Za,n.stateNode));break;case 4:r=Za,i=Nh,Za=n.stateNode.containerInfo,Nh=!0,n1(e,t,n),Za=r,Nh=i;break;case 0:case 11:case 14:case 15:if(!Bu&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&KW(n,t,o),i=i.next}while(i!==r)}n1(e,t,n);break;case 1:if(!Bu&&(q2(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){so(n,t,a)}n1(e,t,n);break;case 21:n1(e,t,n);break;case 22:n.mode&1?(Bu=(r=Bu)||n.memoizedState!==null,n1(e,t,n),Bu=r):n1(e,t,n);break;default:n1(e,t,n)}}function tpe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new dnt),t.forEach(function(r){var i=_nt.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function bh(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Za=a.stateNode,Nh=!1;break e;case 3:Za=a.stateNode.containerInfo,Nh=!0;break e;case 4:Za=a.stateNode.containerInfo,Nh=!0;break e}a=a.return}if(Za===null)throw Error(kt(160));sAe(s,o,i),Za=null,Nh=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){so(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oAe(t,e),t=t.sibling}function oAe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bh(t,e),zp(e),r&4){try{sk(3,e,e.return),cL(3,e)}catch(m){so(e,e.return,m)}try{sk(5,e,e.return)}catch(m){so(e,e.return,m)}}break;case 1:bh(t,e),zp(e),r&512&&n!==null&&q2(n,n.return);break;case 5:if(bh(t,e),zp(e),r&512&&n!==null&&q2(n,n.return),e.flags&32){var i=e.stateNode;try{tR(i,"")}catch(m){so(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&DCe(i,s),_W(a,o);var l=_W(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?PCe(i,f):c==="dangerouslySetInnerHTML"?RCe(i,f):c==="children"?tR(i,f):hJ(i,c,f,l)}switch(a){case"input":yW(i,s);break;case"textarea":ICe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?aS(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?aS(i,!!s.multiple,s.defaultValue,!0):aS(i,!!s.multiple,s.multiple?[]:"",!1))}i[cR]=s}catch(m){so(e,e.return,m)}}break;case 6:if(bh(t,e),zp(e),r&4){if(e.stateNode===null)throw Error(kt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){so(e,e.return,m)}}break;case 3:if(bh(t,e),zp(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sR(t.containerInfo)}catch(m){so(e,e.return,m)}break;case 4:bh(t,e),zp(e);break;case 13:bh(t,e),zp(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(WJ=So())),r&4&&tpe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Bu=(l=Bu)||c,bh(t,e),Bu=l):bh(t,e),zp(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Kt=e,c=e.child;c!==null;){for(f=Kt=c;Kt!==null;){switch(d=Kt,h=d.child,d.tag){case 0:case 11:case 14:case 15:sk(4,d,d.return);break;case 1:q2(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){so(r,n,m)}}break;case 5:q2(d,d.return);break;case 22:if(d.memoizedState!==null){rpe(f);continue}}h!==null?(h.return=d,Kt=h):rpe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=NCe("display",o))}catch(m){so(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){so(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:bh(t,e),zp(e),r&4&&tpe(e);break;case 21:break;default:bh(t,e),zp(e)}}function zp(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(iAe(n)){var r=n;break e}n=n.return}throw Error(kt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(tR(i,""),r.flags&=-33);var s=epe(e);JW(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=epe(e);QW(e,a,o);break;default:throw Error(kt(161))}}catch(u){so(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pnt(e,t,n){Kt=e,aAe(e)}function aAe(e,t,n){for(var r=(e.mode&1)!==0;Kt!==null;){var i=Kt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||XO;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Bu;a=XO;var l=Bu;if(XO=o,(Bu=u)&&!l)for(Kt=i;Kt!==null;)o=Kt,u=o.child,o.tag===22&&o.memoizedState!==null?ipe(i):u!==null?(u.return=o,Kt=u):ipe(i);for(;s!==null;)Kt=s,aAe(s),s=s.sibling;Kt=i,XO=a,Bu=l}npe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Kt=s):npe(e)}}function npe(e){for(;Kt!==null;){var t=Kt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bu||cL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Bu)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:kh(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&jhe(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}jhe(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&sR(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(kt(163))}Bu||t.flags&512&&XW(t)}catch(d){so(t,t.return,d)}}if(t===e){Kt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Kt=n;break}Kt=t.return}}function rpe(e){for(;Kt!==null;){var t=Kt;if(t===e){Kt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Kt=n;break}Kt=t.return}}function ipe(e){for(;Kt!==null;){var t=Kt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{cL(4,t)}catch(u){so(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){so(t,i,u)}}var s=t.return;try{XW(t)}catch(u){so(t,s,u)}break;case 5:var o=t.return;try{XW(t)}catch(u){so(t,o,u)}}}catch(u){so(t,t.return,u)}if(t===e){Kt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Kt=a;break}Kt=t.return}}var mnt=Math.ceil,EM=xy.ReactCurrentDispatcher,HJ=xy.ReactCurrentOwner,Md=xy.ReactCurrentBatchConfig,ci=0,$a=null,Vo=null,uu=0,pf=0,W2=mb(0),la=0,gR=null,qw=0,fL=0,qJ=0,ok=null,yc=null,WJ=0,nC=1/0,J0=null,SM=!1,ZW=null,ov=null,QO=!1,j1=null,CM=0,ak=0,eG=null,H6=-1,q6=0;function Nl(){return ci&6?So():H6!==-1?H6:H6=So()}function av(e){return e.mode&1?ci&2&&uu!==0?uu&-uu:Jtt.transition!==null?(q6===0&&(q6=qCe()),q6):(e=qi,e!==0||(e=window.event,e=e===void 0?16:JCe(e.type)),e):1}function np(e,t,n,r){if(50<ak)throw ak=0,eG=null,Error(kt(185));X3(e,n,r),(!(ci&2)||e!==$a)&&(e===$a&&(!(ci&2)&&(fL|=n),la===4&&I1(e,uu)),Pc(e,r),n===1&&ci===0&&!(t.mode&1)&&(nC=So()+500,aL&&gb()))}function Pc(e,t){var n=e.callbackNode;Jet(e,t);var r=uM(e,e===$a?uu:0);if(r===0)n!==null&&hhe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&hhe(n),t===1)e.tag===0?Qtt(spe.bind(null,e)):yTe(spe.bind(null,e)),Gtt(function(){!(ci&6)&&gb()}),n=null;else{switch(WCe(r)){case 1:n=vJ;break;case 4:n=VCe;break;case 16:n=aM;break;case 536870912:n=HCe;break;default:n=aM}n=mAe(n,uAe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uAe(e,t){if(H6=-1,q6=0,ci&6)throw Error(kt(327));var n=e.callbackNode;if(dS()&&e.callbackNode!==n)return null;var r=uM(e,e===$a?uu:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=TM(e,r);else{t=r;var i=ci;ci|=2;var s=cAe();($a!==e||uu!==t)&&(J0=null,nC=So()+500,Aw(e,t));do try{vnt();break}catch(a){lAe(e,a)}while(!0);RJ(),EM.current=s,ci=i,Vo!==null?t=0:($a=null,uu=0,t=la)}if(t!==0){if(t===2&&(i=AW(e),i!==0&&(r=i,t=tG(e,i))),t===1)throw n=gR,Aw(e,0),I1(e,r),Pc(e,So()),n;if(t===6)I1(e,r);else{if(i=e.current.alternate,!(r&30)&&!gnt(i)&&(t=TM(e,r),t===2&&(s=AW(e),s!==0&&(r=s,t=tG(e,s))),t===1))throw n=gR,Aw(e,0),I1(e,r),Pc(e,So()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(kt(345));case 2:Ix(e,yc,J0);break;case 3:if(I1(e,r),(r&130023424)===r&&(t=WJ+500-So(),10<t)){if(uM(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Nl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=FW(Ix.bind(null,e,yc,J0),t);break}Ix(e,yc,J0);break;case 4:if(I1(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-tp(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=So()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mnt(r/1960))-r,10<r){e.timeoutHandle=FW(Ix.bind(null,e,yc,J0),r);break}Ix(e,yc,J0);break;case 5:Ix(e,yc,J0);break;default:throw Error(kt(329))}}}return Pc(e,So()),e.callbackNode===n?uAe.bind(null,e):null}function tG(e,t){var n=ok;return e.current.memoizedState.isDehydrated&&(Aw(e,t).flags|=256),e=TM(e,t),e!==2&&(t=yc,yc=n,t!==null&&nG(t)),e}function nG(e){yc===null?yc=e:yc.push.apply(yc,e)}function gnt(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!fp(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function I1(e,t){for(t&=~qJ,t&=~fL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tp(t),r=1<<n;e[n]=-1,t&=~r}}function spe(e){if(ci&6)throw Error(kt(327));dS();var t=uM(e,0);if(!(t&1))return Pc(e,So()),null;var n=TM(e,t);if(e.tag!==0&&n===2){var r=AW(e);r!==0&&(t=r,n=tG(e,r))}if(n===1)throw n=gR,Aw(e,0),I1(e,t),Pc(e,So()),n;if(n===6)throw Error(kt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ix(e,yc,J0),Pc(e,So()),null}function GJ(e,t){var n=ci;ci|=1;try{return e(t)}finally{ci=n,ci===0&&(nC=So()+500,aL&&gb())}}function Ww(e){j1!==null&&j1.tag===0&&!(ci&6)&&dS();var t=ci;ci|=1;var n=Md.transition,r=qi;try{if(Md.transition=null,qi=1,e)return e()}finally{qi=r,Md.transition=n,ci=t,!(ci&6)&&gb()}}function YJ(){pf=W2.current,Cs(W2)}function Aw(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Wtt(n)),Vo!==null)for(n=Vo.return;n!==null;){var r=n;switch(DJ(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hM();break;case 3:eC(),Cs(Rc),Cs(Zu),$J();break;case 5:MJ(r);break;case 4:eC();break;case 13:Cs(Ws);break;case 19:Cs(Ws);break;case 10:NJ(r.type._context);break;case 22:case 23:YJ()}n=n.return}if($a=e,Vo=e=uv(e.current,null),uu=pf=t,la=0,gR=null,qJ=fL=qw=0,yc=ok=null,aw!==null){for(t=0;t<aw.length;t++)if(n=aw[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}aw=null}return e}function lAe(e,t){do{var n=Vo;try{if(RJ(),U6.current=_M,wM){for(var r=Ks.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wM=!1}if(Hw=0,Aa=ta=Ks=null,ik=!1,hR=0,HJ.current=null,n===null||n.return===null){la=1,gR=t,Vo=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=uu,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Whe(o);if(h!==null){h.flags&=-257,Ghe(h,o,a,s,t),h.mode&1&&qhe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){qhe(s,l,t),KJ();break e}u=Error(kt(426))}}else if($s&&a.mode&1){var g=Whe(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Ghe(g,o,a,s,t),IJ(tC(u,a));break e}}s=u=tC(u,a),la!==4&&(la=2),ok===null?ok=[s]:ok.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=WTe(s,u,t);Bhe(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ov===null||!ov.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=GTe(s,a,t);Bhe(s,_);break e}}s=s.return}while(s!==null)}dAe(n)}catch(w){t=w,Vo===n&&n!==null&&(Vo=n=n.return);continue}break}while(!0)}function cAe(){var e=EM.current;return EM.current=_M,e===null?_M:e}function KJ(){(la===0||la===3||la===2)&&(la=4),$a===null||!(qw&268435455)&&!(fL&268435455)||I1($a,uu)}function TM(e,t){var n=ci;ci|=2;var r=cAe();($a!==e||uu!==t)&&(J0=null,Aw(e,t));do try{ynt();break}catch(i){lAe(e,i)}while(!0);if(RJ(),ci=n,EM.current=r,Vo!==null)throw Error(kt(261));return $a=null,uu=0,la}function ynt(){for(;Vo!==null;)fAe(Vo)}function vnt(){for(;Vo!==null&&!Vet();)fAe(Vo)}function fAe(e){var t=pAe(e.alternate,e,pf);e.memoizedProps=e.pendingProps,t===null?dAe(e):Vo=t,HJ.current=null}function dAe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fnt(n,t),n!==null){n.flags&=32767,Vo=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{la=6,Vo=null;return}}else if(n=cnt(n,t,pf),n!==null){Vo=n;return}if(t=t.sibling,t!==null){Vo=t;return}Vo=t=e}while(t!==null);la===0&&(la=5)}function Ix(e,t,n){var r=qi,i=Md.transition;try{Md.transition=null,qi=1,bnt(e,t,n,r)}finally{Md.transition=i,qi=r}return null}function bnt(e,t,n,r){do dS();while(j1!==null);if(ci&6)throw Error(kt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(kt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Zet(e,s),e===$a&&(Vo=$a=null,uu=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||QO||(QO=!0,mAe(aM,function(){return dS(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Md.transition,Md.transition=null;var o=qi;qi=1;var a=ci;ci|=4,HJ.current=null,hnt(e,n),oAe(n,e),Btt(PW),lM=!!NW,PW=NW=null,e.current=n,pnt(n),Het(),ci=a,qi=o,Md.transition=s}else e.current=n;if(QO&&(QO=!1,j1=e,CM=i),s=e.pendingLanes,s===0&&(ov=null),Get(n.stateNode),Pc(e,So()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(SM)throw SM=!1,e=ZW,ZW=null,e;return CM&1&&e.tag!==0&&dS(),s=e.pendingLanes,s&1?e===eG?ak++:(ak=0,eG=e):ak=0,gb(),null}function dS(){if(j1!==null){var e=WCe(CM),t=Md.transition,n=qi;try{if(Md.transition=null,qi=16>e?16:e,j1===null)var r=!1;else{if(e=j1,j1=null,CM=0,ci&6)throw Error(kt(331));var i=ci;for(ci|=4,Kt=e.current;Kt!==null;){var s=Kt,o=s.child;if(Kt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Kt=l;Kt!==null;){var c=Kt;switch(c.tag){case 0:case 11:case 15:sk(8,c,s)}var f=c.child;if(f!==null)f.return=c,Kt=f;else for(;Kt!==null;){c=Kt;var d=c.sibling,h=c.return;if(rAe(c),c===l){Kt=null;break}if(d!==null){d.return=h,Kt=d;break}Kt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Kt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Kt=o;else e:for(;Kt!==null;){if(s=Kt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:sk(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Kt=y;break e}Kt=s.return}}var v=e.current;for(Kt=v;Kt!==null;){o=Kt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Kt=b;else e:for(o=v;Kt!==null;){if(a=Kt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cL(9,a)}}catch(w){so(a,a.return,w)}if(a===o){Kt=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Kt=_;break e}Kt=a.return}}if(ci=i,gb(),Tm&&typeof Tm.onPostCommitFiberRoot=="function")try{Tm.onPostCommitFiberRoot(nL,e)}catch{}r=!0}return r}finally{qi=n,Md.transition=t}}return!1}function ope(e,t,n){t=tC(n,t),t=WTe(e,t,1),e=sv(e,t,1),t=Nl(),e!==null&&(X3(e,1,t),Pc(e,t))}function so(e,t,n){if(e.tag===3)ope(e,e,n);else for(;t!==null;){if(t.tag===3){ope(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ov===null||!ov.has(r))){e=tC(n,e),e=GTe(t,e,1),t=sv(t,e,1),e=Nl(),t!==null&&(X3(t,1,e),Pc(t,e));break}}t=t.return}}function xnt(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Nl(),e.pingedLanes|=e.suspendedLanes&n,$a===e&&(uu&n)===n&&(la===4||la===3&&(uu&130023424)===uu&&500>So()-WJ?Aw(e,0):qJ|=n),Pc(e,t)}function hAe(e,t){t===0&&(e.mode&1?(t=UO,UO<<=1,!(UO&130023424)&&(UO=4194304)):t=1);var n=Nl();e=Yg(e,t),e!==null&&(X3(e,t,n),Pc(e,n))}function wnt(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),hAe(e,n)}function _nt(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(kt(314))}r!==null&&r.delete(t),hAe(e,n)}var pAe;pAe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rc.current)Sc=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Sc=!1,lnt(e,t,n);Sc=!!(e.flags&131072)}else Sc=!1,$s&&t.flags&1048576&&vTe(t,gM,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;V6(e,t),e=t.pendingProps;var i=QS(t,Zu.current);fS(t,n),i=BJ(null,t,r,e,i,n);var s=jJ();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nc(r)?(s=!0,pM(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,OJ(t),i.updater=lL,t.stateNode=i,i._reactInternals=t,zW(t,r,e,n),t=qW(null,t,r,!0,s,n)):(t.tag=0,$s&&s&&AJ(t),wl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(V6(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Snt(r),e=kh(r,e),i){case 0:t=HW(null,t,r,e,n);break e;case 1:t=Xhe(null,t,r,e,n);break e;case 11:t=Yhe(null,t,r,e,n);break e;case 14:t=Khe(null,t,r,kh(r.type,e),n);break e}throw Error(kt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:kh(r,i),HW(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:kh(r,i),Xhe(e,t,r,i,n);case 3:e:{if(QTe(t),e===null)throw Error(kt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,STe(e,t),bM(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=tC(Error(kt(423)),t),t=Qhe(e,t,r,n,i);break e}else if(r!==i){i=tC(Error(kt(424)),t),t=Qhe(e,t,r,n,i);break e}else for(wf=iv(t.stateNode.containerInfo.firstChild),If=t,$s=!0,Mh=null,n=_Te(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(JS(),r===i){t=Kg(e,t,n);break e}wl(e,t,r,n)}t=t.child}return t;case 5:return CTe(t),e===null&&BW(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,OW(r,i)?o=null:s!==null&&OW(r,s)&&(t.flags|=32),XTe(e,t),wl(e,t,o,n),t.child;case 6:return e===null&&BW(t),null;case 13:return JTe(e,t,n);case 4:return FJ(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ZS(t,null,r,n):wl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:kh(r,i),Yhe(e,t,r,i,n);case 7:return wl(e,t,t.pendingProps,n),t.child;case 8:return wl(e,t,t.pendingProps.children,n),t.child;case 12:return wl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ds(yM,r._currentValue),r._currentValue=o,s!==null)if(fp(s.value,o)){if(s.children===i.children&&!Rc.current){t=Kg(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Rg(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),jW(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(kt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jW(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,fS(t,n),i=Bd(i),r=r(i),t.flags|=1,wl(e,t,r,n),t.child;case 14:return r=t.type,i=kh(r,t.pendingProps),i=kh(r.type,i),Khe(e,t,r,i,n);case 15:return YTe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:kh(r,i),V6(e,t),t.tag=1,Nc(r)?(e=!0,pM(t)):e=!1,fS(t,n),qTe(t,r,i),zW(t,r,i,n),qW(null,t,r,!0,e,n);case 19:return ZTe(e,t,n);case 22:return KTe(e,t,n)}throw Error(kt(156,t.tag))};function mAe(e,t){return zCe(e,t)}function Ent(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rd(e,t,n,r){return new Ent(e,t,n,r)}function XJ(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Snt(e){if(typeof e=="function")return XJ(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mJ)return 11;if(e===gJ)return 14}return 2}function uv(e,t){var n=e.alternate;return n===null?(n=Rd(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function W6(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")XJ(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case M2:return Dw(n.children,i,s,t);case pJ:o=8,i|=8;break;case dW:return e=Rd(12,n,t,i|2),e.elementType=dW,e.lanes=s,e;case hW:return e=Rd(13,n,t,i),e.elementType=hW,e.lanes=s,e;case pW:return e=Rd(19,n,t,i),e.elementType=pW,e.lanes=s,e;case CCe:return dL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ECe:o=10;break e;case SCe:o=9;break e;case mJ:o=11;break e;case gJ:o=14;break e;case y1:o=16,r=null;break e}throw Error(kt(130,e==null?e:typeof e,""))}return t=Rd(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Dw(e,t,n,r){return e=Rd(7,e,r,t),e.lanes=n,e}function dL(e,t,n,r){return e=Rd(22,e,r,t),e.elementType=CCe,e.lanes=n,e.stateNode={isHidden:!1},e}function ZU(e,t,n){return e=Rd(6,e,null,t),e.lanes=n,e}function ez(e,t,n){return t=Rd(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cnt(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=OU(0),this.expirationTimes=OU(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=OU(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function QJ(e,t,n,r,i,s,o,a,u){return e=new Cnt(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Rd(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},OJ(s),e}function Tnt(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F2,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function gAe(e){if(!e)return Av;e=e._reactInternals;e:{if(P_(e)!==e||e.tag!==1)throw Error(kt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nc(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(kt(171))}if(e.tag===1){var n=e.type;if(Nc(n))return gTe(e,n,t)}return t}function yAe(e,t,n,r,i,s,o,a,u){return e=QJ(n,r,!0,e,i,s,o,a,u),e.context=gAe(null),n=e.current,r=Nl(),i=av(n),s=Rg(r,i),s.callback=t??null,sv(n,s,i),e.current.lanes=i,X3(e,i,r),Pc(e,r),e}function hL(e,t,n,r){var i=t.current,s=Nl(),o=av(i);return n=gAe(n),t.context===null?t.context=n:t.pendingContext=n,t=Rg(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sv(i,t,o),e!==null&&(np(e,i,o,s),j6(e,i,o)),o}function AM(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ape(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function JJ(e,t){ape(e,t),(e=e.alternate)&&ape(e,t)}var vAe=typeof reportError=="function"?reportError:function(e){console.error(e)};function ZJ(e){this._internalRoot=e}pL.prototype.render=ZJ.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(kt(409));hL(e,t,null,null)};pL.prototype.unmount=ZJ.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ww(function(){hL(null,e,null,null)}),t[Gg]=null}};function pL(e){this._internalRoot=e}pL.prototype.unstable_scheduleHydration=function(e){if(e){var t=KCe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<D1.length&&t!==0&&t<D1[n].priority;n++);D1.splice(n,0,e),n===0&&QCe(e)}};function eZ(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function mL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function upe(){}function Ant(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=AM(o);s.call(l)}}var o=yAe(t,r,e,0,null,!1,!1,"",upe);return e._reactRootContainer=o,e[Gg]=o.current,uR(e.nodeType===8?e.parentNode:e),Ww(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=AM(u);a.call(l)}}var u=QJ(e,0,!1,null,null,!1,!1,"",upe);return e._reactRootContainer=u,e[Gg]=u.current,uR(e.nodeType===8?e.parentNode:e),Ww(function(){hL(t,u,n,r)}),u}function gL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=AM(o);a.call(u)}}hL(t,o,e,i)}else o=Ant(n,t,e,i,r);return AM(o)}GCe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=uI(t.pendingLanes);n!==0&&(bJ(t,n|1),Pc(t,So()),!(ci&6)&&(nC=So()+500,gb()))}break;case 13:Ww(function(){var r=Yg(e,1);if(r!==null){var i=Nl();np(r,e,1,i)}}),JJ(e,1)}};xJ=function(e){if(e.tag===13){var t=Yg(e,134217728);if(t!==null){var n=Nl();np(t,e,134217728,n)}JJ(e,134217728)}};YCe=function(e){if(e.tag===13){var t=av(e),n=Yg(e,t);if(n!==null){var r=Nl();np(n,e,t,r)}JJ(e,t)}};KCe=function(){return qi};XCe=function(e,t){var n=qi;try{return qi=e,t()}finally{qi=n}};SW=function(e,t,n){switch(t){case"input":if(yW(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=oL(r);if(!i)throw Error(kt(90));ACe(r),yW(r,i)}}}break;case"textarea":ICe(e,n);break;case"select":t=n.value,t!=null&&aS(e,!!n.multiple,t,!1)}};MCe=GJ;$Ce=Ww;var Dnt={usingClientEntryPoint:!1,Events:[J3,j2,oL,OCe,FCe,GJ]},hD={findFiberByHostInstance:ow,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Int={bundleType:hD.bundleType,version:hD.version,rendererPackageName:hD.rendererPackageName,rendererConfig:hD.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xy.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jCe(e),e===null?null:e.stateNode},findFiberByHostInstance:hD.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var JO=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!JO.isDisabled&&JO.supportsFiber)try{nL=JO.inject(Int),Tm=JO}catch{}}Jf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dnt;Jf.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eZ(t))throw Error(kt(200));return Tnt(e,t,null,n)};Jf.createRoot=function(e,t){if(!eZ(e))throw Error(kt(299));var n=!1,r="",i=vAe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=QJ(e,1,!1,null,null,n,!1,r,i),e[Gg]=t.current,uR(e.nodeType===8?e.parentNode:e),new ZJ(t)};Jf.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(kt(188)):(e=Object.keys(e).join(","),Error(kt(268,e)));return e=jCe(t),e=e===null?null:e.stateNode,e};Jf.flushSync=function(e){return Ww(e)};Jf.hydrate=function(e,t,n){if(!mL(t))throw Error(kt(200));return gL(null,e,t,!0,n)};Jf.hydrateRoot=function(e,t,n){if(!eZ(e))throw Error(kt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=vAe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=yAe(t,null,e,1,n??null,i,!1,s,o),e[Gg]=t.current,uR(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new pL(t)};Jf.render=function(e,t,n){if(!mL(t))throw Error(kt(200));return gL(null,e,t,!1,n)};Jf.unmountComponentAtNode=function(e){if(!mL(e))throw Error(kt(40));return e._reactRootContainer?(Ww(function(){gL(null,null,e,!1,function(){e._reactRootContainer=null,e[Gg]=null})}),!0):!1};Jf.unstable_batchedUpdates=GJ;Jf.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!mL(n))throw Error(kt(200));if(e==null||e._reactInternals===void 0)throw Error(kt(38));return gL(e,t,n,!1,r)};Jf.version="18.3.1-next-f1338f8080-20240426";function bAe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bAe)}catch(e){console.error(e)}}bAe(),bCe.exports=Jf;var eN=bCe.exports;const cI=c0(eN);var lpe=eN;cW.createRoot=lpe.createRoot,cW.hydrateRoot=lpe.hydrateRoot;var am=function(){return am=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},am.apply(this,arguments)};function tN(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function lg(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function cpe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function knt(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Gr(e){return this instanceof Gr?(this.v=e,this):new Gr(e)}function lw(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Gr?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function tz(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Gr(e[i](o)),done:!1}:s?s(o):o}:s}}function uk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof cpe=="function"?cpe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var G6="right-scroll-bar-position",Y6="width-before-scroll-bar",Rnt="with-scroll-bars-hidden",Nnt="--removed-body-scroll-bar-size";function nz(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Pnt(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var Ont=typeof window<"u"?N.useLayoutEffect:N.useEffect,fpe=new WeakMap;function Fnt(e,t){var n=Pnt(null,function(r){return e.forEach(function(i){return nz(i,r)})});return Ont(function(){var r=fpe.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||nz(a,null)}),s.forEach(function(a){i.has(a)||nz(a,o)})}fpe.set(n,e)},[e]),n}function Mnt(e){return e}function $nt(e,t){t===void 0&&(t=Mnt);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function Lnt(e){e===void 0&&(e={});var t=$nt(null);return t.options=am({async:!0,ssr:!1},e),t}var xAe=function(e){var t=e.sideCar,n=tN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,am({},n))};xAe.isSideCarExport=!0;function Bnt(e,t){return e.useMedium(t),xAe}var wAe=Lnt(),rz=function(){},yL=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:rz,onWheelCapture:rz,onTouchMoveCapture:rz}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=tN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=d,w=Fnt([n,t]),S=am(am({},b),i);return N.createElement(N.Fragment,null,c&&N.createElement(_,{sideCar:wAe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?N.cloneElement(N.Children.only(a),am(am({},S),{ref:w})):N.createElement(y,am({},S,{className:u,ref:w}),a))});yL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yL.classNames={fullWidth:Y6,zeroRight:G6};var jnt=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Unt(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=jnt();return t&&e.setAttribute("nonce",t),e}function znt(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Vnt(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Hnt=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Unt())&&(znt(t,n),Vnt(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},qnt=function(){var e=Hnt();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},_Ae=function(){var e=qnt(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Wnt={left:0,top:0,right:0,gap:0},iz=function(e){return parseInt(e||"",10)||0},Gnt=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[iz(n),iz(r),iz(i)]},Ynt=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Wnt;var t=Gnt(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Knt=_Ae(),hS="data-scroll-locked",Xnt=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Rnt,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(hS,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(G6,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Y6,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(G6," .").concat(G6,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Y6," .").concat(Y6,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hS,`] {
    `).concat(Nnt,": ").concat(a,`px;
  }
`)},dpe=function(){var e=parseInt(document.body.getAttribute(hS)||"0",10);return isFinite(e)?e:0},Qnt=function(){N.useEffect(function(){return document.body.setAttribute(hS,(dpe()+1).toString()),function(){var e=dpe()-1;e<=0?document.body.removeAttribute(hS):document.body.setAttribute(hS,e.toString())}},[])},Jnt=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;Qnt();var s=N.useMemo(function(){return Ynt(i)},[i]);return N.createElement(Knt,{styles:Xnt(s,!t,i,n?"":"!important")})},rG=!1;if(typeof window<"u")try{var ZO=Object.defineProperty({},"passive",{get:function(){return rG=!0,!0}});window.addEventListener("test",ZO,ZO),window.removeEventListener("test",ZO,ZO)}catch{rG=!1}var UE=rG?{passive:!1}:!1,Znt=function(e){return e.tagName==="TEXTAREA"},EAe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Znt(e)&&n[t]==="visible")},ert=function(e){return EAe(e,"overflowY")},trt=function(e){return EAe(e,"overflowX")},hpe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=SAe(e,r);if(i){var s=CAe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},nrt=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},rrt=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},SAe=function(e,t){return e==="v"?ert(t):trt(t)},CAe=function(e,t){return e==="v"?nrt(t):rrt(t)},irt=function(e,t){return e==="h"&&t==="rtl"?-1:1},srt=function(e,t,n,r,i){var s=irt(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=CAe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&SAe(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},e4=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ppe=function(e){return[e.deltaX,e.deltaY]},mpe=function(e){return e&&"current"in e?e.current:e},ort=function(e,t){return e[0]===t[0]&&e[1]===t[1]},art=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},urt=0,zE=[];function lrt(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(urt++)[0],s=N.useState(_Ae)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=knt([e.lockRef.current],(e.shards||[]).map(mpe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=e4(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],_="deltaY"in m?m.deltaY:v[1]-y[1],w,S=m.target,T=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in m&&T==="h"&&S.type==="range")return!1;var A=hpe(T,S);if(!A)return!0;if(A?w=T:(w=T==="v"?"h":"v",A=hpe(T,S)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||_)&&(r.current=w),!w)return!0;var k=r.current||w;return srt(k,g,m,k==="h"?b:_)},[]),u=N.useCallback(function(m){var g=m;if(!(!zE.length||zE[zE.length-1]!==s)){var y="deltaY"in g?ppe(g):e4(g),v=t.current.filter(function(w){return w.name===g.type&&(w.target===g.target||g.target===w.shadowParent)&&ort(w.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(mpe).filter(Boolean).filter(function(w){return w.contains(g.target)}),_=b.length>0?a(g,b[0]):!o.current.noIsolation;_&&g.cancelable&&g.preventDefault()}}},[]),l=N.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:crt(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),c=N.useCallback(function(m){n.current=e4(m),r.current=void 0},[]),f=N.useCallback(function(m){l(m.type,ppe(m),m.target,a(m,e.lockRef.current))},[]),d=N.useCallback(function(m){l(m.type,e4(m),m.target,a(m,e.lockRef.current))},[]);N.useEffect(function(){return zE.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,UE),document.addEventListener("touchmove",u,UE),document.addEventListener("touchstart",c,UE),function(){zE=zE.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,UE),document.removeEventListener("touchmove",u,UE),document.removeEventListener("touchstart",c,UE)}},[]);var h=e.removeScrollBar,p=e.inert;return N.createElement(N.Fragment,null,p?N.createElement(s,{styles:art(i)}):null,h?N.createElement(Jnt,{gapMode:e.gapMode}):null)}function crt(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const frt=Bnt(wAe,lrt);var rC=N.forwardRef(function(e,t){return N.createElement(yL,am({},e,{ref:t,sideCar:frt}))});rC.classNames=yL.classNames;function us(e){return Object.keys(e)}function sz(e){return e&&typeof e=="object"&&!Array.isArray(e)}function tZ(e,t){const n={...e},r=t;return sz(e)&&sz(t)&&Object.keys(t).forEach(i=>{sz(r[i])&&i in e?n[i]=tZ(n[i],r[i]):n[i]=r[i]}),n}function drt(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function hrt(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function yR(e){const t=hrt(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function oz(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function TAe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?oz(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?oz(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?oz(s):s}}return r}return n}const ze=TAe("rem",{shouldScale:!0}),DM=TAe("em");function yb(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function AAe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function vb(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==N.Fragment:!1}function gu(e){const t=N.createContext(null);return[({children:i,value:s})=>E.jsx(t.Provider,{value:s,children:i}),()=>{const i=N.useContext(t);if(i===null)throw new Error(e);return i}]}function _T(e=null){const t=N.createContext(e);return[({children:i,value:s})=>E.jsx(t.Provider,{value:s,children:i}),()=>N.useContext(t)]}function IM(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function kM(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function prt(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function mrt(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function grt(e,t,n){return kM(e,n)===kM(t,n)}function nZ({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=kM(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>grt(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=mrt(l,u,r),f=prt(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const yrt={app:100,modal:200,popover:300,overlay:400,max:9999};function Ep(e){return yrt[e]}const vrt=()=>{};function brt(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||vrt:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function ur(e,t="size",n=!0){if(e!==void 0)return AAe(e)?n?ze(e):e:`var(--${t}-${e})`}function qo(e){return ur(e,"mantine-spacing")}function Zi(e){return e===void 0?"var(--mantine-radius-default)":ur(e,"mantine-radius")}function Pl(e){return ur(e,"mantine-font-size")}function DAe(e){return ur(e,"mantine-line-height",!1)}function rZ(e){if(e)return ur(e,"mantine-shadow",!1)}function vg(e,t){return n=>{e==null||e(n),t==null||t(n)}}function iZ(e,t){return e in t.breakpoints?yR(t.breakpoints[e]):yR(e)}function vR(e,t){const n=e.map(r=>({value:r,px:iZ(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Wh(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function xrt(e,t,n){var r;return n?Array.from(((r=kM(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function wrt(){const[e,t]=N.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function bg(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function pS(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function k1(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function vL(e,t){const n=k1(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const gpe=["mousedown","touchstart"];function _rt(e,t,n){const r=N.useRef();return N.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||gpe).forEach(s=>document.addEventListener(s,i)),()=>{(t||gpe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function Ert(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function Srt(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function Crt(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=N.useState(n?t:Srt(e)),s=N.useRef();return N.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),Ert(s.current,o=>i(o.matches))},[e]),r}const O_=typeof document<"u"?N.useLayoutEffect:N.useEffect;function zm(e,t){const n=N.useRef(!1);N.useEffect(()=>()=>{n.current=!1},[]),N.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function IAe({opened:e,shouldReturnFocus:t=!0}){const n=N.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return zm(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function Trt(e,t="body > :not(script)"){const n=pS(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const Art=/input|select|textarea|button|object/,kAe="a, input, select, textarea, button, object, [tabindex]";function Drt(e){return e.style.display==="none"}function Irt(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(Drt(n))return!1;n=n.parentNode}return!0}function RAe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function iG(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(RAe(e));return(Art.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&Irt(e)}function NAe(e){const t=RAe(e);return(Number.isNaN(t)||t>=0)&&iG(e)}function krt(e){return Array.from(e.querySelectorAll(kAe)).filter(NAe)}function Rrt(e,t){const n=krt(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function Nrt(e=!0){const t=N.useRef(),n=N.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(kAe));o=a.find(NAe)||a.find(iG)||null,!o&&iG(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=N.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=Trt(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return N.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&Rrt(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const Prt=e=>(e+1)%1e6;function Ort(){const[,e]=N.useReducer(Prt,0);return e}const Frt=yi.useId||(()=>{});function Mrt(){const e=Frt();return e?`mantine-${e.replace(/:/g,"")}`:""}function ol(e){const t=Mrt(),[n,r]=N.useState(t);return O_(()=>{r(pS())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function PAe(e,t,n){N.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function sZ(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function OAe(...e){return t=>{e.forEach(n=>sZ(n,t))}}function Ro(...e){return N.useCallback(OAe(...e),e)}function FAe(e,t,n="ltr"){const r=N.useRef(null),i=N.useRef(!1),s=N.useRef(!1),o=N.useRef(0),[a,u]=N.useState(!1);return N.useEffect(()=>{i.current=!0},[]),N.useEffect(()=>{var v,b;const l=({x:_,y:w})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const T=bg((_-S.left)/S.width,0,1);e({x:n==="ltr"?T:1-T,y:bg((w-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=_=>{d(),_.preventDefault(),m(_)},m=_=>l({x:_.clientX,y:_.clientY}),g=_=>{_.cancelable&&_.preventDefault(),d(),y(_)},y=_=>{_.cancelable&&_.preventDefault(),l({x:_.changedTouches[0].clientX,y:_.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Ba({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=N.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function bL(e,t){return Crt("(prefers-reduced-motion: reduce)",e,t)}const $rt={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function kf(e){const t=N.useRef(0),n=N.useRef(null),[r,i]=N.useState($rt),s=N.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return N.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function Lrt(e){const[t,{width:n,height:r}]=kf(e);return{ref:t,width:n,height:r}}function Brt(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function jrt(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function Urt(e){return t=>jrt(Brt(e),t)}function zrt(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{Urt(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function oZ(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=N.useState(e),o=N.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=N.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=N.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function Vrt(e,t,n={autoInvoke:!1}){const r=N.useRef(null),i=N.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=N.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return N.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function Hrt(e,t,n){const r=N.useRef(),i=N.useRef(null);return N.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function qrt(){const[e,t]=N.useState(!1);return N.useEffect(()=>t(!0),[]),e}function Wrt(e,t){const n=k1(e),r=N.useRef(),i=N.useRef(),s=N.useRef(!0),o=N.useRef(t),a=N.useRef(-1),u=()=>window.clearTimeout(a.current),l=N.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=N.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=N.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return N.useEffect(()=>{o.current=t},[t]),[f,u]}function Grt(e,t){const[n,r]=N.useState(e),[i,s]=Wrt(r,t);return N.useEffect(()=>s,[]),[n,i]}function Yrt(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function Krt(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});O_(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>Yrt(`${e}:${String(r)}`,i[0])}return[t,n]}var Xrt={};function MAe(){return typeof process<"u"&&Xrt?"production":"development"}function $Ae(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=$Ae(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ao(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=$Ae(e))&&(r&&(r+=" "),r+=t);return r}const Qrt={};function Jrt(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Ao(t[r],i):t[r]=i})}),t}function xL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||Qrt);return Jrt(s)}function RM({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const LAe=N.createContext(null);function bb(){const e=N.useContext(LAe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function Zrt(){return bb().cssVariablesResolver}function eit(){return bb().classNamesPrefix}function aZ(){return bb().getStyleNonce}function tit(){return bb().withStaticClasses}function nit(){return bb().headless}function rit(){var e;return(e=bb().stylesTransform)==null?void 0:e.sx}function iit(){var e;return(e=bb().stylesTransform)==null?void 0:e.styles}function sit(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function oit(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function ait(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function uit(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function uZ(e){return sit(e)?oit(e):e.startsWith("rgb")?ait(e):e.startsWith("hsl")?uit(e):{r:0,g:0,b:0,a:1}}function t4(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=uZ(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function bR(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function az(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function lit(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function cit(e){if(e.startsWith("oklch("))return(lit(e)||0)/100;const{r:t,g:n,b:r}=uZ(e),i=t/255,s=n/255,o=r/255,a=az(i),u=az(s),l=az(o);return .2126*a+.7152*u+.0722*l}function pD(e,t=.179){return e.startsWith("var(")?!1:cit(e)>t}function f0({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:pD(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:pD(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:pD(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][bR(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:pD(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:pD(e,t.luminanceThreshold),shade:s,variable:void 0}}function Ki(e,t){const n=f0({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function sG(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Ki(n.from,t),i=Ki(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Xp(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=uZ(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const VE=Xp,fit=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=f0({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${ze(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${ze(1)} solid transparent`}:{background:e,hover:t4(e,.1),color:a,border:`${ze(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Xp(a,.1),hover:Xp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:Xp(e,.1),hover:Xp(e,.12),color:e,border:`${ze(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${ze(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Xp(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ze(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Xp(e,.05),color:e,border:`${ze(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Xp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:"transparent",hover:Xp(e,.12),color:e,border:`${ze(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${ze(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:t4(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:t4(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:t4(t.white,.01),color:e,border:`${ze(1)} solid transparent`}:n==="gradient"?{background:sG(r,t),hover:sG(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ze(1)} solid var(--mantine-color-default-border)`}:{}},dit={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},ype="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",lZ={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:dit,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:fit,autoContrast:!1,luminanceThreshold:.3,fontFamily:ype,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:ype,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ze(34),lineHeight:"1.3"},h2:{fontSize:ze(26),lineHeight:"1.35"},h3:{fontSize:ze(22),lineHeight:"1.4"},h4:{fontSize:ze(18),lineHeight:"1.45"},h5:{fontSize:ze(16),lineHeight:"1.5"},h6:{fontSize:ze(14),lineHeight:"1.5"}}},fontSizes:{xs:ze(12),sm:ze(14),md:ze(16),lg:ze(18),xl:ze(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ze(2),sm:ze(4),md:ze(8),lg:ze(16),xl:ze(32)},spacing:{xs:ze(10),sm:ze(12),md:ze(16),lg:ze(20),xl:ze(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), 0 ${ze(1)} ${ze(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(10)} ${ze(15)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(7)} ${ze(7)} ${ze(-5)}`,md:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(20)} ${ze(25)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(10)} ${ze(10)} ${ze(-5)}`,lg:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(28)} ${ze(23)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(12)} ${ze(12)} ${ze(-7)}`,xl:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(36)} ${ze(28)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(17)} ${ze(17)} ${ze(-7)}`},other:{},components:{}};function vpe(e){return e==="auto"||e==="dark"||e==="light"}function hit({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return vpe(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&vpe(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const pit="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",bpe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function uz(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function xpe(e){if(!(e.primaryColor in e.colors))throw new Error(pit);if(typeof e.primaryShade=="object"&&(!uz(e.primaryShade.dark)||!uz(e.primaryShade.light)))throw new Error(bpe);if(typeof e.primaryShade=="number"&&!uz(e.primaryShade))throw new Error(bpe)}function mit(e,t){var r;if(!t)return xpe(e),e;const n=tZ(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),xpe(n),n}const cZ=N.createContext(null),git=()=>N.useContext(cZ)||lZ;function No(){const e=N.useContext(cZ);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function BAe({theme:e,children:t,inherit:n=!0}){const r=git(),i=N.useMemo(()=>mit(n?r:lZ,e),[e,r,n]);return E.jsx(cZ.Provider,{value:i,children:t})}BAe.displayName="@mantine/core/MantineThemeProvider";function yit(){const e=No(),t=aZ(),n=us(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=yR(e.breakpoints[i]),a=s?`${o-.1}px`:DM(o-.1),u=s?`${o}px`:DM(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return E.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function lz(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function cz(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function vit(e,t){const n=lz(e.variables),r=n?cz(t,n):"",i=lz(e.dark),s=i?cz(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=lz(e.light),a=o?cz(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function xb({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&f0({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function wpe(e,t){return xb({color:e.colors[e.primaryColor][bR(e,t)],theme:e,autoContrast:null})}function n4({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=bR(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:VE(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:VE(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:VE(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=bR(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:VE(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:VE(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:VE(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function bit(e){return Array.isArray(e)?e:Array(10).fill(e)}function xit(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function HE(e,t,n){us(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const jAe=e=>{const t=bR(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:ze(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":wpe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":wpe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};HE(r.variables,e.breakpoints,"breakpoint"),HE(r.variables,e.spacing,"spacing"),HE(r.variables,e.fontSizes,"font-size"),HE(r.variables,e.lineHeights,"line-height"),HE(r.variables,e.shadows,"shadow"),HE(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),us(e.colors).forEach(s=>{const o=e.colors[s];if(xit(o)){Object.assign(r.light,n4({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,n4({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,n4({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,n4({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return us(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function wit({theme:e,generator:t}){const n=jAe(e),r=t==null?void 0:t(e);return r?tZ(n,r):n}const fz=jAe(lZ);function _it(e){const t={variables:{},light:{},dark:{}};return us(e.variables).forEach(n=>{fz.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),us(e.light).forEach(n=>{fz.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),us(e.dark).forEach(n=>{fz.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function Eit(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function UAe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=No(),r=aZ(),i=Zrt(),s=wit({theme:n,generator:i}),o=e===":root"&&t,a=o?_it(s):s,u=vit(a,e);return u?E.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":Eit(e)}`}}):null}UAe.displayName="@mantine/CssVariables";function Sit(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function qE(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function Cit({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=N.useRef(),[s,o]=N.useState(()=>e.get(t)),a=r||s,u=N.useCallback(c=>{r||(qE(c,n),o(c),e.set(c))},[e.set,a,r]),l=N.useCallback(()=>{o(t),qE(t,n),e.clear()},[e.clear,t]);return N.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),O_(()=>{qE(e.get(t),n)},[]),N.useEffect(()=>{var f;if(r)return qE(r,n),()=>{};r===void 0&&qE(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&qE(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function Tit({respectReducedMotion:e,getRootElement:t}){O_(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}Sit();function zAe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=hit(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=Cit({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return Tit({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),E.jsx(LAe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:E.jsxs(BAe,{theme:e,children:[o&&E.jsx(UAe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&E.jsx(yit,{}),t]})})}zAe.displayName="@mantine/core/MantineProvider";function nN({classNames:e,styles:t,props:n,stylesCtx:r}){const i=No();return{resolvedClassNames:xL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:RM({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const Ait={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function Dit({theme:e,options:t,unstyled:n}){return Ao((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||Ait[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function Iit({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return xL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function _pe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return xL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function kit({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function Rit({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function Nit({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function Pit({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=xL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function Oit({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function Fit({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Ao(Dit({theme:e,options:t,unstyled:a||h}),Pit({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),Oit({options:t,classes:o,selector:r,unstyled:a}),_pe({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),_pe({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),Iit({selector:r,stylesCtx:f,options:t,props:c,theme:e}),kit({rootSelector:l,selector:r,className:u}),Rit({selector:r,classes:o,unstyled:a||h}),d&&!h&&Nit({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function Mit({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return RM({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function oG({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...oG({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function $it(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...yb(n[r])}}),t),{})}function Lit({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=$it([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function Bit({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&Mit({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&RM({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&RM({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...Lit({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?oG({style:u,theme:e}):null,...oG({style:r==null?void 0:r.style,theme:e})}}function jit({props:e,stylesCtx:t,themeName:n}){var o;const r=No(),i=(o=iit())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Gt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=No(),h=eit(),p=tit(),m=nit(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=jit({props:n,stylesCtx:r,themeName:g});return(b,_)=>({className:Fit({theme:d,options:_,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([_==null?void 0:_.styles,l])}),style:Bit({theme:d,themeName:g,selector:b,options:_,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function ET(e,t){return typeof e=="boolean"?e:t.autoContrast}function Qe(e,t,n){var o;const r=No(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...yb(n)}}function dz(e){return us(e).reduce((t,n)=>e[n]!==void 0?`${t}${drt(n)}:${e[n]};`:t,"").trim()}function Uit({selector:e,styles:t,media:n,container:r}){const i=t?dz(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${dz(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${dz(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function F_(e){const t=aZ();return E.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:Uit(e)}})}function M_(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:_,c:w,opacity:S,ff:T,fz:A,fw:k,lts:I,ta:R,lh:F,fs:O,tt:$,td:V,w:j,miw:G,maw:Y,h:J,mih:L,mah:U,bgsz:W,bgp:B,bgr:q,bga:Z,pos:re,top:xe,left:pe,bottom:Te,right:ke,inset:it,display:Re,flex:ut,hiddenFrom:Ke,visibleFrom:Ct,lightHidden:gt,darkHidden:Ie,sx:Ve,...ft}=e;return{styleProps:yb({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:_,c:w,opacity:S,ff:T,fz:A,fw:k,lts:I,ta:R,lh:F,fs:O,tt:$,td:V,w:j,miw:G,maw:Y,h:J,mih:L,mah:U,bgsz:W,bgp:B,bgr:q,bga:Z,pos:re,top:xe,left:pe,bottom:Te,right:ke,inset:it,display:Re,flex:ut,hiddenFrom:Ke,visibleFrom:Ct,lightHidden:gt,darkHidden:Ie,sx:Ve}),rest:ft}}const zit={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function fZ(e,t){const n=f0({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function Vit(e,t){const n=f0({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:fZ(e,t)}function Hit(e,t){if(typeof e=="number")return ze(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${ze(n)}`;return r&&(s+=` ${r}`),bit.length>0&&(s+=` ${fZ(i.join(" "),t)}`),s.trim()}return e}const Epe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function qit(e){return typeof e=="string"&&e in Epe?Epe[e]:e}const Wit=["h1","h2","h3","h4","h5","h6"];function Git(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&Wit.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?ze(e):e}function Yit(e){return e}const Kit=["h1","h2","h3","h4","h5","h6"];function Xit(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&Kit.includes(e)?`var(--mantine-${e}-line-height)`:e}function Qit(e){return typeof e=="number"?ze(e):e}function Jit(e,t){if(typeof e=="number")return ze(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return ze(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const hz={color:fZ,textColor:Vit,fontSize:Git,spacing:Jit,identity:Yit,size:Qit,lineHeight:Xit,fontFamily:qit,border:Hit};function Spe(e){return e.replace("(min-width: ","").replace("em)","")}function Zit({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Spe(i))-Number(Spe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function est(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function tst(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function nst(e){return typeof e=="object"&&e!==null?us(e).filter(t=>t!=="base"):[]}function rst(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function VAe({styleProps:e,data:t,theme:n}){return Zit(us(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=tst(e[i]);if(!est(e[i]))return o.forEach(l=>{r.inlineStyles[l]=hz[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=nst(e[i]);return o.forEach(l=>{a&&(r.styles[l]=hz[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:hz[s.type](rst(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function rN(){return`__m__-${N.useId().replace(/:/g,"")}`}function dZ(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...dZ(r,t)}),{}):typeof e=="function"?e(t):e??{}}function HAe(e){return e.startsWith("data-")?e:`data-${e}`}function ist(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[HAe(n)]=e[n]),t},{})}function qAe(e){return e?typeof e=="string"?{[HAe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...qAe(n)}),{}):ist(e):null}function aG(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...aG(r,t)}),{}):typeof e=="function"?e(t):e??{}}function sst({theme:e,style:t,vars:n,styleProps:r}){const i=aG(t,e),s=aG(n,e);return{...i,...s,...r}}const WAe=N.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=No(),g=e||"div",{styleProps:y,rest:v}=M_(h),b=rit(),_=(A=b==null?void 0:b())==null?void 0:A(y.sx),w=rN(),S=VAe({styleProps:y,theme:m,data:zit}),T={ref:p,style:sst({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:Ao(r,_,{[w]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":AAe(o)?void 0:o||void 0,size:d,...qAe(s),...v};return E.jsxs(E.Fragment,{children:[S.hasResponsiveStyles&&E.jsx(F_,{selector:`.${w}`,styles:S.styles,media:S.media}),typeof f=="function"?f(T):E.jsx(g,{...T})]})});WAe.displayName="@mantine/core/Box";const Fe=WAe;function GAe(e){return e}function wt(e){const t=N.forwardRef(e);return t.extend=GAe,t}function ya(e){const t=N.forwardRef(e);return t.extend=GAe,t}const ost=N.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function wy(){return N.useContext(ost)}function ast(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function pz(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const mD=typeof window<"u"&&window.requestAnimationFrame;function ust({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=N.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=N.useState(r?{}:o),l=p=>{eN.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||ast(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}zm(()=>{typeof mD=="function"&&mD(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),mD(()=>{const p=pz(i);c({...f(p),height:p})})}:()=>{const p=pz(i);c({...f(p),willChange:"height",height:p}),mD(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=pz(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:OAe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const lst={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},wL=wt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Qe("Collapse",lst,e),c=No(),f=bL(),h=(c.respectReducedMotion?f:!1)?0:i,p=ust({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?E.jsx(Fe,{...l,children:n}):null:E.jsx(Fe,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...dZ(o,c)},ref:t,...l}),children:n})});wL.displayName="@mantine/core/Collapse";const[cst,Xd]=gu("ScrollArea.Root component was not found in tree");function iC(e,t){const n=k1(t);O_(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const fst=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Xd(),[s,o]=N.useState(0),[a,u]=N.useState(0),l=!!(s&&a);return iC(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),iC(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?E.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),dst=N.forwardRef((e,t)=>{const n=Xd(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?E.jsx(fst,{...e,ref:t}):null}),hst={scrollHideDelay:1e3,type:"hover"},YAe=N.forwardRef((e,t)=>{const n=Qe("ScrollAreaRoot",hst,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=N.useState(null),[l,c]=N.useState(null),[f,d]=N.useState(null),[h,p]=N.useState(null),[m,g]=N.useState(null),[y,v]=N.useState(0),[b,_]=N.useState(0),[w,S]=N.useState(!1),[T,A]=N.useState(!1),k=Ro(t,I=>u(I));return E.jsx(cst,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:w,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:_},children:E.jsx(Fe,{...o,ref:k,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});YAe.displayName="@mantine/core/ScrollAreaRoot";function KAe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function _L(e){const t=KAe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function XAe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function pst(e,[t,n]){return Math.min(n,Math.max(t,e))}function Cpe(e,t,n="ltr"){const r=_L(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=pst(e,u);return XAe([0,o],[0,a])(l)}function mst(e,t,n,r="ltr"){const i=_L(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return XAe([u,l],f)(e)}function QAe(e,t){return e>0&&e<t}function NM(e){return e?parseInt(e,10):0}function Iw(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[gst,JAe]=gu("ScrollAreaScrollbar was not found in tree"),ZAe=N.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Xd(),[h,p]=N.useState(null),m=Ro(t,A=>p(A)),g=N.useRef(null),y=N.useRef(""),{viewport:v}=d,b=n.content-n.viewport,_=k1(l),w=k1(a),S=vL(c,10),T=A=>{if(g.current){const k=A.clientX-g.current.left,I=A.clientY-g.current.top;u({x:k,y:I})}};return N.useEffect(()=>{const A=k=>{const I=k.target;(h==null?void 0:h.contains(I))&&_(k,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,_]),N.useEffect(w,[n,w]),iC(h,S),iC(d.content,S),E.jsx(gst,{value:{scrollbar:h,hasThumb:r,onThumbChange:k1(i),onThumbPointerUp:k1(s),onThumbPositionChange:w,onThumbPointerDown:k1(o)},children:E.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:Iw(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(A))}),onPointerMove:Iw(e.onPointerMove,T),onPointerUp:Iw(e.onPointerUp,A=>{const k=A.target;k.hasPointerCapture(A.pointerId)&&k.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),yst=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Xd(),[a,u]=N.useState(),l=N.useRef(null),c=Ro(t,l,o.onScrollbarXChange);return N.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),E.jsx(ZAe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${_L(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),QAe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:NM(a.paddingLeft),paddingEnd:NM(a.paddingRight)}})}})}),vst=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Xd(),[a,u]=N.useState(),l=N.useRef(null),c=Ro(t,l,o.onScrollbarYChange);return N.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),E.jsx(ZAe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${_L(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),QAe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:NM(a.paddingTop),paddingEnd:NM(a.paddingBottom)}})}})}),hZ=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=wy(),s=Xd(),o=N.useRef(null),a=N.useRef(0),[u,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=KAe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>mst(h,a.current,u,p);return n==="horizontal"?E.jsx(yst,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Cpe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?E.jsx(vst,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Cpe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),eDe=N.forwardRef((e,t)=>{const n=Xd(),{forceMount:r,...i}=e,[s,o]=N.useState(!1),a=e.orientation==="horizontal",u=vL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return iC(n.viewport,u),iC(n.content,u),r||s?E.jsx(hZ,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),bst=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Xd(),[s,o]=N.useState(!1);return N.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?E.jsx(eDe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),xst=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Xd(),s=e.orientation==="horizontal",[o,a]=N.useState("hidden"),u=vL(()=>a("idle"),100);return N.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),N.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?E.jsx(hZ,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Iw(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Iw(e.onPointerLeave,()=>a("idle"))}):null}),Tpe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Xd(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return N.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?E.jsx(bst,{...r,ref:t,forceMount:n}):i.type==="scroll"?E.jsx(xst,{...r,ref:t,forceMount:n}):i.type==="auto"?E.jsx(eDe,{...r,ref:t,forceMount:n}):i.type==="always"?E.jsx(hZ,{...r,ref:t}):null});function wst(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const _st=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Xd(),s=JAe(),{onThumbPositionChange:o}=s,a=Ro(t,c=>s.onThumbChange(c)),u=N.useRef(),l=vL(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=wst(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),E.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Iw(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Iw(e.onPointerUp,s.onThumbPointerUp)})}),Ape=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=JAe();return n||i.hasThumb?E.jsx(_st,{ref:t,...r}):null}),tDe=N.forwardRef(({children:e,style:t,...n},r)=>{const i=Xd(),s=Ro(r,i.onViewportChange);return E.jsx(Fe,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:E.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});tDe.displayName="@mantine/core/ScrollAreaViewport";var pZ={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const nDe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Est=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":ze(t)}}),Xg=wt((e,t)=>{const n=Qe("ScrollArea",nDe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,_]=N.useState(!1),w=Gt({name:"ScrollArea",props:n,classes:pZ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Est});return E.jsxs(YAe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...w("root"),...v,children:[E.jsx(tDe,{...d,...w("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var T;(T=d==null?void 0:d.onScroll)==null||T.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&E.jsx(Tpe,{...w("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:E.jsx(Ape,{...w("thumb")})}),(y==="xy"||y==="y")&&E.jsx(Tpe,{...w("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:E.jsx(Ape,{...w("thumb")})}),E.jsx(dst,{...w("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Xg.displayName="@mantine/core/ScrollArea";const mZ=wt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=Qe("ScrollAreaAutosize",nDe,e);return E.jsx(Fe,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:E.jsx(Fe,{style:{display:"flex",flexDirection:"column",flex:1},children:E.jsx(Xg,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Xg.classes=pZ;mZ.displayName="@mantine/core/ScrollAreaAutosize";mZ.classes=pZ;Xg.Autosize=mZ;var rDe={root:"m_87cf2631"};const Sst={__staticSelector:"UnstyledButton"},$f=ya((e,t)=>{const n=Qe("UnstyledButton",Sst,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Gt({name:s,props:n,classes:rDe,className:r,style:l,classNames:a,styles:u,unstyled:o});return E.jsx(Fe,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});$f.classes=rDe;$f.displayName="@mantine/core/UnstyledButton";var iDe={root:"m_515a97f8"};const Cst={},gZ=wt((e,t)=>{const n=Qe("VisuallyHidden",Cst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Gt({name:"VisuallyHidden",classes:iDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return E.jsx(Fe,{component:"span",ref:t,...c("root"),...l})});gZ.classes=iDe;gZ.displayName="@mantine/core/VisuallyHidden";var sDe={root:"m_1b7284a3"};const Tst={},Ast=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Zi(t),"--paper-shadow":rZ(n)}}),ST=ya((e,t)=>{const n=Qe("Paper",Tst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Gt({name:"Paper",props:n,classes:sDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Ast});return E.jsx(Fe,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});ST.classes=sDe;ST.displayName="@mantine/core/Paper";function CT(e){return oDe(e)?(e.nodeName||"").toLowerCase():"#document"}function Oc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function _y(e){var t;return(t=(oDe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function oDe(e){return e instanceof Node||e instanceof Oc(e).Node}function Ls(e){return e instanceof Element||e instanceof Oc(e).Element}function Lf(e){return e instanceof HTMLElement||e instanceof Oc(e).HTMLElement}function uG(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Oc(e).ShadowRoot}function iN(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ud(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Dst(e){return["table","td","th"].includes(CT(e))}function yZ(e){const t=vZ(),n=Ud(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Ist(e){let t=Qg(e);for(;Lf(t)&&!Dv(t);){if(yZ(t))return t;t=Qg(t)}return null}function vZ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Dv(e){return["html","body","#document"].includes(CT(e))}function Ud(e){return Oc(e).getComputedStyle(e)}function EL(e){return Ls(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Qg(e){if(CT(e)==="html")return e;const t=e.assignedSlot||e.parentNode||uG(e)&&e.host||_y(e);return uG(t)?t.host:t}function aDe(e){const t=Qg(e);return Dv(t)?e.ownerDocument?e.ownerDocument.body:e.body:Lf(t)&&iN(t)?t:aDe(t)}function Ng(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=aDe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Oc(i);return s?t.concat(o,o.visualViewport||[],iN(i)?i:[],o.frameElement&&n?Ng(o.frameElement):[]):t.concat(i,Ng(i,[],n))}function Dpe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function xR(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&uG(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function uDe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function lDe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function kst(e){return Pst()?!1:!Ipe()&&e.width===0&&e.height===0||Ipe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Rst(){return/apple/i.test(navigator.vendor)}function Ipe(){const e=/android/i;return e.test(uDe())||e.test(lDe())}function Nst(){return uDe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Pst(){return lDe().includes("jsdom/")}function lG(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Ost(e){return"nativeEvent"in e}function Fst(e){return e.matches("html,body")}function cw(e){return(e==null?void 0:e.ownerDocument)||document}function mz(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function x2(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Mst="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function $st(e){return Lf(e)&&e.matches(Mst)}const _f=Math.min,ju=Math.max,PM=Math.round,r4=Math.floor,Iv=e=>({x:e,y:e}),Lst={left:"right",right:"left",bottom:"top",top:"bottom"},Bst={start:"end",end:"start"};function cG(e,t,n){return ju(e,_f(t,n))}function Jg(e,t){return typeof e=="function"?e(t):e}function dp(e){return e.split("-")[0]}function TT(e){return e.split("-")[1]}function bZ(e){return e==="x"?"y":"x"}function xZ(e){return e==="y"?"height":"width"}function $_(e){return["top","bottom"].includes(dp(e))?"y":"x"}function wZ(e){return bZ($_(e))}function jst(e,t,n){n===void 0&&(n=!1);const r=TT(e),i=wZ(e),s=xZ(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=OM(o)),[o,OM(o)]}function Ust(e){const t=OM(e);return[fG(e),t,fG(t)]}function fG(e){return e.replace(/start|end/g,t=>Bst[t])}function zst(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function Vst(e,t,n,r){const i=TT(e);let s=zst(dp(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(fG)))),s}function OM(e){return e.replace(/left|right|bottom|top/g,t=>Lst[t])}function Hst(e){return{top:0,right:0,bottom:0,left:0,...e}}function _Z(e){return typeof e!="number"?Hst(e):{top:e,right:e,bottom:e,left:e}}function sC(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function kpe(e,t,n){let{reference:r,floating:i}=e;const s=$_(t),o=wZ(t),a=xZ(o),u=dp(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(TT(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const qst=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=kpe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:_,reset:w}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],..._}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(l=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:c,y:f}=kpe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function EZ(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Jg(t,e),p=_Z(h),g=a[d?f==="floating"?"reference":"floating":f],y=sC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},w=sC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-w.top+p.top)/_.y,bottom:(w.bottom-y.bottom+p.bottom)/_.y,left:(y.left-w.left+p.left)/_.x,right:(w.right-y.right+p.right)/_.x}}const Wst=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Jg(e,t)||{};if(l==null)return{};const f=_Z(c),d={x:n,y:r},h=wZ(i),p=xZ(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[h]-d[h]-s.floating[p],w=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=S?S[b]:0;(!T||!await(o.isElement==null?void 0:o.isElement(S)))&&(T=a.floating[b]||s.floating[p]);const A=_/2-w/2,k=T/2-m[p]/2-1,I=_f(f[y],k),R=_f(f[v],k),F=I,O=T-m[p]-R,$=T/2-m[p]/2+A,V=cG(F,$,O),j=!u.arrow&&TT(i)!=null&&$!==V&&s.reference[p]/2-($<F?I:R)-m[p]/2<0,G=j?$<F?$-F:$-O:0;return{[h]:d[h]+G,data:{[h]:V,centerOffset:$-V-G,...j&&{alignmentOffset:G}},reset:j}}}),Gst=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Jg(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=dp(i),v=dp(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),_=d||(v||!m?[OM(a)]:Ust(a));!d&&p!=="none"&&_.push(...Vst(a,m,p,b));const w=[a,..._],S=await EZ(t,g),T=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&T.push(S[y]),f){const F=jst(i,o,b);T.push(S[F[0]],S[F[1]])}if(A=[...A,{placement:i,overflows:T}],!T.every(F=>F<=0)){var k,I;const F=(((k=s.flip)==null?void 0:k.index)||0)+1,O=w[F];if(O)return{data:{index:F,overflows:A},reset:{placement:O}};let $=(I=A.filter(V=>V.overflows[0]<=0).sort((V,j)=>V.overflows[1]-j.overflows[1])[0])==null?void 0:I.placement;if(!$)switch(h){case"bestFit":{var R;const V=(R=A.map(j=>[j.placement,j.overflows.filter(G=>G>0).reduce((G,Y)=>G+Y,0)]).sort((j,G)=>j[1]-G[1])[0])==null?void 0:R[0];V&&($=V);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function cDe(e){const t=_f(...e.map(s=>s.left)),n=_f(...e.map(s=>s.top)),r=ju(...e.map(s=>s.right)),i=ju(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Yst(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>sC(cDe(i)))}const Kst=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Jg(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Yst(c),d=sC(cDe(c)),h=_Z(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if($_(n)==="y"){const I=f[0],R=f[f.length-1],F=dp(n)==="top",O=I.top,$=R.bottom,V=F?I.left:R.left,j=F?I.right:R.right,G=j-V,Y=$-O;return{top:O,bottom:$,left:V,right:j,width:G,height:Y,x:V,y:O}}const g=dp(n)==="left",y=ju(...f.map(I=>I.right)),v=_f(...f.map(I=>I.left)),b=f.filter(I=>g?I.left===v:I.right===y),_=b[0].top,w=b[b.length-1].bottom,S=v,T=y,A=T-S,k=w-_;return{top:_,bottom:w,left:S,right:T,width:A,height:k,x:S,y:_}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Xst(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=dp(n),a=TT(n),u=$_(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Jg(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const Qst=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Xst(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},Jst=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=Jg(e,t),l={x:n,y:r},c=await EZ(t,u),f=$_(dp(i)),d=bZ(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=cG(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=cG(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Zst=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Jg(e,t),c={x:n,y:r},f=$_(i),d=bZ(f);let h=c[d],p=c[f];const m=Jg(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",_=s.reference[d]-s.floating[b]+g.mainAxis,w=s.reference[d]+s.reference[b]-g.mainAxis;h<_?h=_:h>w&&(h=w)}if(l){var y,v;const b=d==="y"?"width":"height",_=["top","left"].includes(dp(i)),w=s.reference[f]-s.floating[b]+(_&&((y=o.offset)==null?void 0:y[f])||0)+(_?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(_?0:((v=o.offset)==null?void 0:v[f])||0)-(_?g.crossAxis:0);p<w?p=w:p>S&&(p=S)}return{[d]:h,[f]:p}}}},eot=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Jg(e,t),u=await EZ(t,a),l=dp(n),c=TT(n),f=$_(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=_f(h-u[p],g),b=_f(d-u[m],y),_=!t.middlewareData.shift;let w=v,S=b;if(f?S=c||_?_f(b,y):y:w=c||_?_f(v,g):g,_&&!c){const A=ju(u.left,0),k=ju(u.right,0),I=ju(u.top,0),R=ju(u.bottom,0);f?S=d-2*(A!==0||k!==0?A+k:ju(u.left,u.right)):w=h-2*(I!==0||R!==0?I+R:ju(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:w});const T=await i.getDimensions(s.floating);return d!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function fDe(e){const t=Ud(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Lf(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=PM(n)!==s||PM(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function SZ(e){return Ls(e)?e:e.contextElement}function mS(e){const t=SZ(e);if(!Lf(t))return Iv(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=fDe(t);let o=(s?PM(n.width):n.width)/r,a=(s?PM(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const tot=Iv(0);function dDe(e){const t=Oc(e);return!vZ()||!t.visualViewport?tot:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function not(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Oc(e)?!1:t}function Gw(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=SZ(e);let o=Iv(1);t&&(r?Ls(r)&&(o=mS(r)):o=mS(e));const a=not(s,n,r)?dDe(s):Iv(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Oc(s),h=r&&Ls(r)?Oc(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=mS(m),y=m.getBoundingClientRect(),v=Ud(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,_=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=_,p=Oc(m),m=p.frameElement}}return sC({width:c,height:f,x:u,y:l})}const rot=[":popover-open",":modal"];function CZ(e){return rot.some(t=>{try{return e.matches(t)}catch{return!1}})}function iot(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=_y(r),a=t?CZ(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=Iv(1);const c=Iv(0),f=Lf(r);if((f||!f&&!s)&&((CT(r)!=="body"||iN(o))&&(u=EL(r)),Lf(r))){const d=Gw(r);l=mS(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function sot(e){return Array.from(e.getClientRects())}function hDe(e){return Gw(_y(e)).left+EL(e).scrollLeft}function oot(e){const t=_y(e),n=EL(e),r=e.ownerDocument.body,i=ju(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ju(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+hDe(e);const a=-n.scrollTop;return Ud(r).direction==="rtl"&&(o+=ju(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function aot(e,t){const n=Oc(e),r=_y(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=vZ();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function uot(e,t){const n=Gw(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Lf(e)?mS(e):Iv(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Rpe(e,t,n){let r;if(t==="viewport")r=aot(e,n);else if(t==="document")r=oot(_y(e));else if(Ls(t))r=uot(t,n);else{const i=dDe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return sC(r)}function pDe(e,t){const n=Qg(e);return n===t||!Ls(n)||Dv(n)?!1:Ud(n).position==="fixed"||pDe(n,t)}function lot(e,t){const n=t.get(e);if(n)return n;let r=Ng(e,[],!1).filter(a=>Ls(a)&&CT(a)!=="body"),i=null;const s=Ud(e).position==="fixed";let o=s?Qg(e):e;for(;Ls(o)&&!Dv(o);){const a=Ud(o),u=yZ(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||iN(o)&&!u&&pDe(e,o))?r=r.filter(c=>c!==o):i=a,o=Qg(o)}return t.set(e,r),r}function cot(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?CZ(t)?[]:lot(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Rpe(t,c,i);return l.top=ju(f.top,l.top),l.right=_f(f.right,l.right),l.bottom=_f(f.bottom,l.bottom),l.left=ju(f.left,l.left),l},Rpe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function fot(e){const{width:t,height:n}=fDe(e);return{width:t,height:n}}function dot(e,t,n){const r=Lf(t),i=_y(t),s=n==="fixed",o=Gw(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=Iv(0);if(r||!r&&!s)if((CT(t)!=="body"||iN(i))&&(a=EL(t)),r){const f=Gw(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=hDe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function gz(e){return Ud(e).position==="static"}function Npe(e,t){return!Lf(e)||Ud(e).position==="fixed"?null:t?t(e):e.offsetParent}function mDe(e,t){const n=Oc(e);if(CZ(e))return n;if(!Lf(e)){let i=Qg(e);for(;i&&!Dv(i);){if(Ls(i)&&!gz(i))return i;i=Qg(i)}return n}let r=Npe(e,t);for(;r&&Dst(r)&&gz(r);)r=Npe(r,t);return r&&Dv(r)&&gz(r)&&!yZ(r)?n:r||Ist(e)||n}const hot=async function(e){const t=this.getOffsetParent||mDe,n=this.getDimensions,r=await n(e.floating);return{reference:dot(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function pot(e){return Ud(e).direction==="rtl"}const mot={convertOffsetParentRelativeRectToViewportRelativeRect:iot,getDocumentElement:_y,getClippingRect:cot,getOffsetParent:mDe,getElementRects:hot,getClientRects:sot,getDimensions:fot,getScale:mS,isElement:Ls,isRTL:pot};function got(e,t){let n=null,r;const i=_y(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=r4(c),p=r4(i.clientWidth-(l+f)),m=r4(i.clientHeight-(c+d)),g=r4(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ju(0,_f(1,u))||1};let b=!0;function _(w){const S=w[0].intersectionRatio;if(S!==u){if(!b)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(_,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(_,v)}n.observe(e)}return o(!0),s}function yot(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=SZ(e),c=i||s?[...l?Ng(l):[],...Ng(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?got(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Gw(e):null;u&&g();function g(){const y=Gw(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const vot=Qst,bot=Jst,xot=Gst,wot=eot,Ppe=Wst,_ot=Kst,Eot=Zst,Sot=(e,t,n)=>{const r=new Map,i={platform:mot,...n},s={...i.platform,_c:r};return qst(e,t,{...i,platform:s})};var K6=typeof document<"u"?N.useLayoutEffect:N.useEffect;function FM(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!FM(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!FM(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function gDe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ope(e,t){const n=gDe(e);return Math.round(t*n)/n}function Fpe(e){const t=N.useRef(e);return K6(()=>{t.current=e}),t}function Cot(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=N.useState(r);FM(d,r)||h(r);const[p,m]=N.useState(null),[g,y]=N.useState(null),v=N.useCallback(G=>{G!==S.current&&(S.current=G,m(G))},[]),b=N.useCallback(G=>{G!==T.current&&(T.current=G,y(G))},[]),_=s||p,w=o||g,S=N.useRef(null),T=N.useRef(null),A=N.useRef(c),k=u!=null,I=Fpe(u),R=Fpe(i),F=N.useCallback(()=>{if(!S.current||!T.current)return;const G={placement:t,strategy:n,middleware:d};R.current&&(G.platform=R.current),Sot(S.current,T.current,G).then(Y=>{const J={...Y,isPositioned:!0};O.current&&!FM(A.current,J)&&(A.current=J,eN.flushSync(()=>{f(J)}))})},[d,t,n,R]);K6(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(G=>({...G,isPositioned:!1})))},[l]);const O=N.useRef(!1);K6(()=>(O.current=!0,()=>{O.current=!1}),[]),K6(()=>{if(_&&(S.current=_),w&&(T.current=w),_&&w){if(I.current)return I.current(_,w,F);F()}},[_,w,F,I,k]);const $=N.useMemo(()=>({reference:S,floating:T,setReference:v,setFloating:b}),[v,b]),V=N.useMemo(()=>({reference:_,floating:w}),[_,w]),j=N.useMemo(()=>{const G={position:n,left:0,top:0};if(!V.floating)return G;const Y=Ope(V.floating,c.x),J=Ope(V.floating,c.y);return a?{...G,transform:"translate("+Y+"px, "+J+"px)",...gDe(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:J}},[n,a,V.floating,c.x,c.y]);return N.useMemo(()=>({...c,update:F,refs:$,elements:V,floatingStyles:j}),[c,F,$,V,j])}const Tot=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Ppe({element:r.current,padding:i}).fn(n):{}:r?Ppe({element:r,padding:i}).fn(n):{}}}},yDe=(e,t)=>({...vot(e),options:[e,t]}),TZ=(e,t)=>({...bot(e),options:[e,t]}),Mpe=(e,t)=>({...Eot(e),options:[e,t]}),dG=(e,t)=>({...xot(e),options:[e,t]}),Aot=(e,t)=>({...wot(e),options:[e,t]}),hG=(e,t)=>({..._ot(e),options:[e,t]}),vDe=(e,t)=>({...Tot(e),options:[e,t]}),bDe={...rM},Dot=bDe.useInsertionEffect,Iot=Dot||(e=>e());function R1(e){const t=N.useRef(()=>{});return Iot(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Dm=typeof document<"u"?N.useLayoutEffect:N.useEffect;let $pe=!1,kot=0;const Lpe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+kot++;function Rot(){const[e,t]=N.useState(()=>$pe?Lpe():void 0);return Dm(()=>{e==null&&t(Lpe())},[]),N.useEffect(()=>{$pe=!0},[]),e}const Not=bDe.useId,xDe=Not||Rot;function Pot(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Oot=N.createContext(null),Fot=N.createContext(null),AZ=()=>{var e;return((e=N.useContext(Oot))==null?void 0:e.id)||null},DZ=()=>N.useContext(Fot);function IZ(e){return"data-floating-ui-"+e}function Bpe(e){const t=N.useRef(e);return Dm(()=>{t.current=e}),t}const jpe=IZ("safe-polygon");function X6(e,t,n){return n&&!lG(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Mot(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=DZ(),m=AZ(),g=Bpe(c),y=Bpe(l),v=N.useRef(),b=N.useRef(-1),_=N.useRef(),w=N.useRef(-1),S=N.useRef(!0),T=N.useRef(!1),A=N.useRef(()=>{}),k=N.useCallback(()=>{var O;const $=(O=i.current.openEvent)==null?void 0:O.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);N.useEffect(()=>{if(!u)return;function O($){let{open:V}=$;V||(clearTimeout(b.current),clearTimeout(w.current),S.current=!0)}return s.on("openchange",O),()=>{s.off("openchange",O)}},[u,s]),N.useEffect(()=>{if(!u||!g.current||!n)return;function O(V){k()&&r(!1,V,"hover")}const $=cw(a).documentElement;return $.addEventListener("mouseleave",O),()=>{$.removeEventListener("mouseleave",O)}},[a,n,r,u,g,k]);const I=N.useCallback(function(O,$,V){$===void 0&&($=!0),V===void 0&&(V="hover");const j=X6(y.current,"close",v.current);j&&!_.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,O,V),j)):$&&(clearTimeout(b.current),r(!1,O,V))},[y,r]),R=R1(()=>{A.current(),_.current=void 0}),F=R1(()=>{if(T.current){const O=cw(a).body;O.style.pointerEvents="",O.removeAttribute(jpe),T.current=!1}});return N.useEffect(()=>{if(!u)return;function O(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(G){if(clearTimeout(b.current),S.current=!1,f&&!lG(v.current)||d>0&&!X6(y.current,"open"))return;const Y=X6(y.current,"open",v.current);Y?b.current=window.setTimeout(()=>{r(!0,G,"hover")},Y):r(!0,G,"hover")}function V(G){if(O())return;A.current();const Y=cw(a);if(clearTimeout(w.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),_.current=g.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){F(),R(),I(G,!0,"safe-polygon")}});const L=_.current;Y.addEventListener("mousemove",L),A.current=()=>{Y.removeEventListener("mousemove",L)};return}(v.current==="touch"?!xR(a,G.relatedTarget):!0)&&I(G)}function j(G){O()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){F(),R(),I(G)}})(G))}if(Ls(o)){const G=o;return n&&G.addEventListener("mouseleave",j),a==null||a.addEventListener("mouseleave",j),h&&G.addEventListener("mousemove",$,{once:!0}),G.addEventListener("mouseenter",$),G.addEventListener("mouseleave",V),()=>{n&&G.removeEventListener("mouseleave",j),a==null||a.removeEventListener("mouseleave",j),h&&G.removeEventListener("mousemove",$),G.removeEventListener("mouseenter",$),G.removeEventListener("mouseleave",V)}}},[o,a,u,e,f,d,h,I,R,F,r,n,p,y,g,i]),Dm(()=>{var O;if(u&&n&&(O=g.current)!=null&&O.__options.blockPointerEvents&&k()){const V=cw(a).body;if(V.setAttribute(jpe,""),V.style.pointerEvents="none",T.current=!0,Ls(o)&&a){var $;const j=o,G=p==null||($=p.nodesRef.current.find(Y=>Y.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return G&&(G.style.pointerEvents=""),j.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{j.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,k]),Dm(()=>{n||(v.current=void 0,R(),F())},[n,R,F]),N.useEffect(()=>()=>{R(),clearTimeout(b.current),clearTimeout(w.current),F()},[u,o,R,F]),N.useMemo(()=>{if(!u)return{};function O($){v.current=$.pointerType}return{reference:{onPointerDown:O,onPointerEnter:O,onMouseMove($){function V(){S.current||r(!0,$.nativeEvent,"hover")}f&&!lG(v.current)||n||d===0||(clearTimeout(w.current),v.current==="touch"?V():w.current=window.setTimeout(V,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave($){I($.nativeEvent,!1)}}}},[u,f,n,d,r,I])}const pG=()=>{},wDe=N.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:pG,setState:pG,isInstantPhase:!1}),_De=()=>N.useContext(wDe);function $ot(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=N.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=N.useRef(null),a=N.useCallback(u=>{s({currentId:u})},[]);return Dm(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),N.createElement(wDe.Provider,{value:N.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function Lot(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=_De(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Dm(()=>{u&&(f({delay:{open:1,close:X6(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Dm(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Dm(()=>{l===pG||!n||l(o)},[n,l,o]),a}function yz(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Bot={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},jot={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Upe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Uot(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=DZ(),v=R1(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,_=N.useRef(!1),w=N.useRef(!1),{escapeKey:S,outsidePress:T}=Upe(m),{escapeKey:A,outsidePress:k}=Upe(g),I=R1($=>{var V;if(!n||!u||!l||$.key!=="Escape")return;const j=(V=a.current.floatingContext)==null?void 0:V.nodeId,G=y?yz(y.nodesRef.current,j):[];if(!S&&($.stopPropagation(),G.length>0)){let Y=!0;if(G.forEach(J=>{var L;if((L=J.context)!=null&&L.open&&!J.context.dataRef.current.__escapeKeyBubbles){Y=!1;return}}),!Y)return}r(!1,Ost($)?$.nativeEvent:$,"escape-key")}),R=R1($=>{var V;const j=()=>{var G;I($),(G=x2($))==null||G.removeEventListener("keydown",j)};(V=x2($))==null||V.addEventListener("keydown",j)}),F=R1($=>{var V;const j=_.current;_.current=!1;const G=w.current;if(w.current=!1,f==="click"&&G||j||typeof b=="function"&&!b($))return;const Y=x2($),J="["+IZ("inert")+"]",L=cw(o).querySelectorAll(J);let U=Ls(Y)?Y:null;for(;U&&!Dv(U);){const Z=Qg(U);if(Dv(Z)||!Ls(Z))break;U=Z}if(L.length&&Ls(Y)&&!Fst(Y)&&!xR(Y,o)&&Array.from(L).every(Z=>!xR(U,Z)))return;if(Lf(Y)&&o){const Z=Y.clientWidth>0&&Y.scrollWidth>Y.clientWidth,re=Y.clientHeight>0&&Y.scrollHeight>Y.clientHeight;let xe=re&&$.offsetX>Y.clientWidth;if(re&&Ud(Y).direction==="rtl"&&(xe=$.offsetX<=Y.offsetWidth-Y.clientWidth),xe||Z&&$.offsetY>Y.clientHeight)return}const W=(V=a.current.floatingContext)==null?void 0:V.nodeId,B=y&&yz(y.nodesRef.current,W).some(Z=>{var re;return mz($,(re=Z.context)==null?void 0:re.elements.floating)});if(mz($,o)||mz($,s)||B)return;const q=y?yz(y.nodesRef.current,W):[];if(q.length>0){let Z=!0;if(q.forEach(re=>{var xe;if((xe=re.context)!=null&&xe.open&&!re.context.dataRef.current.__outsidePressBubbles){Z=!1;return}}),!Z)return}r(!1,$,"outside-press")}),O=R1($=>{var V;const j=()=>{var G;F($),(G=x2($))==null||G.removeEventListener(f,j)};(V=x2($))==null||V.addEventListener(f,j)});return N.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=T;function $(G){r(!1,G,"ancestor-scroll")}const V=cw(o);l&&V.addEventListener("keydown",A?R:I,A),b&&V.addEventListener(f,k?O:F,k);let j=[];return p&&(Ls(s)&&(j=Ng(s)),Ls(o)&&(j=j.concat(Ng(o))),!Ls(i)&&i&&i.contextElement&&(j=j.concat(Ng(i.contextElement)))),j=j.filter(G=>{var Y;return G!==((Y=V.defaultView)==null?void 0:Y.visualViewport)}),j.forEach(G=>{G.addEventListener("scroll",$,{passive:!0})}),()=>{l&&V.removeEventListener("keydown",A?R:I,A),b&&V.removeEventListener(f,k?O:F,k),j.forEach(G=>{G.removeEventListener("scroll",$)})}},[a,o,s,i,l,b,f,n,r,p,u,S,T,I,A,R,F,k,O]),N.useEffect(()=>{_.current=!1},[b,f]),N.useMemo(()=>u?{reference:{onKeyDown:I,[Bot[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:I,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[jot[f]]:()=>{_.current=!0}}}:{},[u,d,f,h,r,I])}function zot(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=xDe(),s=N.useRef({}),[o]=N.useState(()=>Pot()),a=AZ()!=null,[u,l]=N.useState(r.reference),c=R1((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=N.useMemo(()=>({setPositionReference:l}),[]),d=N.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return N.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function kZ(e){e===void 0&&(e={});const{nodeId:t}=e,n=zot({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=N.useState(null),[a,u]=N.useState(null),c=(i==null?void 0:i.reference)||s,f=N.useRef(null),d=DZ();Dm(()=>{c&&(f.current=c)},[c]);const h=Cot({...e,elements:{...i,...a&&{reference:a}}}),p=N.useCallback(b=>{const _=Ls(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(_),h.refs.setReference(_)},[h.refs]),m=N.useCallback(b=>{(Ls(b)||b===null)&&(f.current=b,o(b)),(Ls(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ls(b))&&h.refs.setReference(b)},[h.refs]),g=N.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=N.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=N.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Dm(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(_=>_.id===t);b&&(b.context=v)}),N.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function Vot(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=N.useRef(!1),c=N.useRef(),f=N.useRef(!0);return N.useEffect(()=>{if(!a)return;const d=Oc(o);function h(){!n&&Lf(o)&&o===Dpe(cw(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),N.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),N.useEffect(()=>()=>{clearTimeout(c.current)},[]),N.useMemo(()=>a?{reference:{onPointerDown(d){kst(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=x2(d.nativeEvent);if(u&&Ls(h))try{if(Rst()&&Nst())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!$st(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ls(h)&&h.hasAttribute(IZ("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=Dpe(o?o.ownerDocument:document);!h&&g===o||xR((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||xR(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const zpe="active",Vpe="selected";function vz(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[zpe]:o,[Vpe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[zpe,Vpe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function Hot(e){e===void 0&&(e=[]);const t=e,n=N.useCallback(s=>vz(s,e,"reference"),t),r=N.useCallback(s=>vz(s,e,"floating"),t),i=N.useCallback(s=>vz(s,e,"item"),e.map(s=>s==null?void 0:s.item));return N.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const qot=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Wot(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=qot.get(o))!=null?n:o,u=xDe(),c=AZ()!=null;return N.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function EDe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Hpe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function qpe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Got={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Yot({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:ze(t),height:ze(t),transform:"rotate(45deg)",position:"absolute",[Got[u]]:ze(r)},f=ze(-t/2);return u==="left"?{...c,...Hpe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Hpe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...qpe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...qpe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const RZ=N.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=wy();return s?E.jsx("div",{...l,ref:c,style:{...u,...Yot({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});RZ.displayName="@mantine/core/FloatingArrow";const[Kot,SDe]=gu("Popover component was not found in the tree");function SL({children:e,active:t=!0,refProp:n="ref"}){const r=Nrt(t),i=Ro(r,e==null?void 0:e.ref);return vb(e)?N.cloneElement(e,{[n]:i}):e}function CDe(e){return E.jsx(gZ,{tabIndex:-1,"data-autofocus":!0,...e})}SL.displayName="@mantine/core/FocusTrap";CDe.displayName="@mantine/core/FocusTrapInitialFocus";SL.InitialFocus=CDe;function Xot(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Qot={},TDe=N.forwardRef((e,t)=>{const{children:n,target:r,...i}=Qe("Portal",Qot,e),[s,o]=N.useState(!1),a=N.useRef(null);return O_(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Xot(i),sZ(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:eN.createPortal(E.jsx(E.Fragment,{children:n}),a.current)});TDe.displayName="@mantine/core/Portal";function AT({withinPortal:e=!0,children:t,...n}){return e?E.jsx(TDe,{...n,children:t}):E.jsx(E.Fragment,{children:t})}AT.displayName="@mantine/core/OptionalPortal";const gD=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${ze(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),i4={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${ze(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${ze(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${ze(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${ze(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${ze(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...gD("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...gD("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...gD("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...gD("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...gD("top"),common:{transformOrigin:"top right"}}},Wpe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Jot({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in i4?{transitionProperty:i4[e].transitionProperty,...i,...i4[e].common,...i4[e][Wpe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Wpe[t]]}}function Zot({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=No(),l=bL(),c=u.respectReducedMotion?l:!1,[f,d]=N.useState(c?0:e),[h,p]=N.useState(r?"entered":"exited"),m=N.useRef(-1),g=N.useRef(-1),y=v=>{const b=v?i:s,_=v?o:a;window.clearTimeout(m.current);const w=c?0:v?e:t;d(w),w===0?(typeof b=="function"&&b(),typeof _=="function"&&_(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{cI.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof _=="function"&&_(),p(v?"entered":"exited")},w)})})};return zm(()=>{y(r)},[r]),N.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Ey({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=Zot({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?E.jsx(E.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:E.jsx(E.Fragment,{children:s(Jot({transition:t,duration:f,state:d,timingFunction:h}))})}Ey.displayName="@mantine/core/Transition";var ADe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const eat={},NZ=wt((e,t)=>{var g,y,v,b;const n=Qe("PopoverDropdown",eat,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=SDe(),h=IAe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Ro(t,d.floating);return d.disabled?null:E.jsx(AT,{...d.portalProps,withinPortal:d.withinPortal,children:E.jsx(Ey,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:_=>E.jsx(SL,{active:d.trapFocus,children:E.jsxs(Fe,{...p,...f,variant:u,ref:m,onKeyDownCapture:brt(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{..._,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:ze(d.width)},i]}),children:[o,E.jsx(RZ,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});NZ.classes=ADe;NZ.displayName="@mantine/core/PopoverDropdown";const tat={refProp:"ref",popupType:"dialog"},DDe=wt((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Qe("PopoverTarget",tat,e);if(!vb(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=SDe(),u=Ro(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return N.cloneElement(n,{...o,...l,...a.targetProps,className:Ao(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});DDe.displayName="@mantine/core/PopoverTarget";function IDe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=N.useState(0);N.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return yot(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),zm(()=>{t.update()},r),zm(()=>{s(o=>o+1)},[e])}function nat(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function rat(e,t){const n=nat(e.middlewares),r=[yDe(e.offset)];return n.shift&&r.push(TZ(typeof n.shift=="boolean"?{limiter:Mpe(),padding:5}:{limiter:Mpe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?dG():dG(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?hG():hG(n.inline)),r.push(vDe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Aot({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function iat(e){const[t,n]=Ba({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=kZ({strategy:e.strategy,placement:e.position,middleware:rat(e,()=>s)});return IDe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),zm(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),zm(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const sat={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ep("popover"),__staticSelector:"Popover",width:"max-content"},oat=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Zi(t),"--popover-shadow":rZ(n)}});function Fc(e){var Ie,Ve,ft,_t,Mt,st;const t=Qe("Popover",sat,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:_,portalProps:w,closeOnEscape:S,clickOutsideEvents:T,trapFocus:A,onClose:k,onOpen:I,onChange:R,zIndex:F,radius:O,shadow:$,id:V,defaultOpened:j,__staticSelector:G,withRoles:Y,disabled:J,returnFocus:L,variant:U,keepMounted:W,vars:B,floatingStrategy:q,...Z}=t,re=Gt({name:G,props:t,classes:ADe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:B,varsResolver:oat}),xe=N.useRef(null),[pe,Te]=N.useState(null),[ke,it]=N.useState(null),{dir:Re}=wy(),ut=ol(V),Ke=iat({middlewares:c,width:l,position:EDe(Re,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:xe,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:j,onChange:R,onOpen:I,onClose:k,strategy:q});_rt(()=>b&&Ke.onClose(),T,[pe,ke]);const Ct=N.useCallback(X=>{Te(X),Ke.floating.refs.setReference(X)},[Ke.floating.refs.setReference]),gt=N.useCallback(X=>{it(X),Ke.floating.refs.setFloating(X)},[Ke.floating.refs.setFloating]);return E.jsx(Kot,{value:{returnFocus:L,disabled:J,controlled:Ke.controlled,reference:Ct,floating:gt,x:Ke.floating.x,y:Ke.floating.y,arrowX:(ft=(Ve=(Ie=Ke.floating)==null?void 0:Ie.middlewareData)==null?void 0:Ve.arrow)==null?void 0:ft.x,arrowY:(st=(Mt=(_t=Ke.floating)==null?void 0:_t.middlewareData)==null?void 0:Mt.arrow)==null?void 0:st.y,opened:Ke.opened,arrowRef:xe,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ke.floating.placement,trapFocus:A,withinPortal:_,portalProps:w,zIndex:F,radius:O,shadow:$,closeOnEscape:S,onClose:Ke.onClose,onToggle:Ke.onToggle,getTargetId:()=>`${ut}-target`,getDropdownId:()=>`${ut}-dropdown`,withRoles:Y,targetProps:Z,__staticSelector:G,classNames:y,styles:v,unstyled:g,variant:U,keepMounted:W,getStyles:re},children:n})}Fc.Target=DDe;Fc.Dropdown=NZ;Fc.displayName="@mantine/core/Popover";Fc.extend=e=>e;var Gh={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const aat=N.forwardRef(({className:e,...t},n)=>E.jsxs(Fe,{component:"span",className:Ao(Gh.barsLoader,e),...t,ref:n,children:[E.jsx("span",{className:Gh.bar}),E.jsx("span",{className:Gh.bar}),E.jsx("span",{className:Gh.bar})]})),uat=N.forwardRef(({className:e,...t},n)=>E.jsxs(Fe,{component:"span",className:Ao(Gh.dotsLoader,e),...t,ref:n,children:[E.jsx("span",{className:Gh.dot}),E.jsx("span",{className:Gh.dot}),E.jsx("span",{className:Gh.dot})]})),lat=N.forwardRef(({className:e,...t},n)=>E.jsx(Fe,{component:"span",className:Ao(Gh.ovalLoader,e),...t,ref:n})),kDe={bars:aat,oval:lat,dots:uat},cat={loaders:kDe,type:"oval"},fat=(e,{size:t,color:n})=>({root:{"--loader-size":ur(t,"loader-size"),"--loader-color":n?Ki(n,e):void 0}}),Zc=wt((e,t)=>{const n=Qe("Loader",cat,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Gt({name:"Loader",props:n,classes:Gh,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:fat});return p?E.jsx(Fe,{...g("root"),ref:t,...m,children:p}):E.jsx(Fe,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Zc.defaultLoaders=kDe;Zc.classes=Gh;Zc.displayName="@mantine/core/Loader";var CL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Gpe={orientation:"horizontal"},dat=(e,{borderWidth:t})=>({group:{"--ai-border-width":ze(t)}}),PZ=wt((e,t)=>{const n=Qe("ActionIconGroup",Gpe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Qe("ActionIconGroup",Gpe,e),p=Gt({name:"ActionIconGroup",props:n,classes:CL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:dat,rootSelector:"group"});return E.jsx(Fe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});PZ.classes=CL;PZ.displayName="@mantine/core/ActionIconGroup";const hat={},pat=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":ur(t,"ai-size"),"--ai-radius":n===void 0?void 0:Zi(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},L_=ya((e,t)=>{const n=Qe("ActionIcon",hat,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:_,mod:w,...S}=n,T=Gt({name:["ActionIcon",p],props:n,className:r,style:u,classes:CL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:pat});return E.jsxs($f,{...T("root",{active:!v&&!l&&!b}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},w],children:[E.jsx(Ey,{mounted:!!l,transition:"slide-down",duration:150,children:A=>E.jsx(Fe,{component:"span",...T("loader",{style:A}),"aria-hidden":!0,children:E.jsx(Zc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),E.jsx(Fe,{component:"span",mod:{loading:l},...T("icon"),children:y})]})});L_.classes=CL;L_.displayName="@mantine/core/ActionIcon";L_.Group=PZ;const RDe=N.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>E.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:E.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));RDe.displayName="@mantine/core/CloseIcon";var NDe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const mat={variant:"subtle"},gat=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":ur(t,"cb-size"),"--cb-radius":n===void 0?void 0:Zi(n),"--cb-icon-size":ze(r)}}),wb=ya((e,t)=>{const n=Qe("CloseButton",mat,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=Gt({name:"CloseButton",props:n,className:a,style:l,classes:NDe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:gat});return E.jsxs($f,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||E.jsx(RDe,{}),i]})});wb.classes=NDe;wb.displayName="@mantine/core/CloseButton";function yat(e){return N.Children.toArray(e).filter(Boolean)}var PDe={root:"m_4081bf90"};const vat={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},bat=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":qo(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),$i=wt((e,t)=>{const n=Qe("Group",vat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,_=yat(u),w=_.length,S=qo(l??"md"),A={childWidth:`calc(${100/w}% - (${S} - ${S} / ${w}))`},k=Gt({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:PDe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:bat});return E.jsx(Fe,{...k("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:_})});$i.classes=PDe;$i.displayName="@mantine/core/Group";var ODe={root:"m_9814e45f"};const xat={zIndex:Ep("modal")},wat=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Xp(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${ze(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Zi(s),"--overlay-z-index":o==null?void 0:o.toString()}}),wR=ya((e,t)=>{const n=Qe("Overlay",xat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,_=Gt({name:"Overlay",props:n,classes:ODe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wat});return E.jsx(Fe,{ref:t,..._("root"),mod:[{center:c,fixed:l},v],...b,children:f})});wR.classes=ODe;wR.displayName="@mantine/core/Overlay";const[_at,Sy]=gu("ModalBase component was not found in tree");function Eat({opened:e,transitionDuration:t}){const[n,r]=N.useState(e),i=N.useRef(),o=bL()?0:t;return N.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function Sat({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=ol(e),[u,l]=N.useState(!1),[c,f]=N.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=Eat({opened:n,transitionDuration:d});return PAe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),IAe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Cat=N.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},_)=>{const{_id:w,titleMounted:S,bodyMounted:T,shouldLockScroll:A,setTitleMounted:k,setBodyMounted:I}=Sat({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return E.jsx(AT,{...c,withinPortal:l,children:E.jsx(_at,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${w}-title`,getBodyId:()=>`${w}-body`,titleMounted:S,bodyMounted:T,setTitleMounted:k,setBodyMounted:I,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:E.jsx(rC,{enabled:A&&f,...v,children:E.jsx(Fe,{ref:_,...b,__vars:{...g,"--mb-z-index":(h||Ep("modal")).toString(),"--mb-shadow":rZ(p),"--mb-padding":qo(m)},children:d})})})})});function Tat(){const e=Sy();return N.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var oC={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const FDe=N.forwardRef(({className:e,...t},n)=>{const r=Tat(),i=Sy();return E.jsx(Fe,{ref:n,...t,id:r,className:Ao({[oC.body]:!i.unstyled},e)})});FDe.displayName="@mantine/core/ModalBaseBody";const MDe=N.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Sy();return E.jsx(wb,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Ao({[oC.close]:!i.unstyled},e),unstyled:i.unstyled})});MDe.displayName="@mantine/core/ModalBaseCloseButton";const Aat=N.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Sy();return E.jsx(Ey,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>E.jsx("div",{...n,className:Ao({[oC.inner]:!a.unstyled},n.className),children:E.jsx(SL,{active:a.opened&&a.trapFocus,children:E.jsx(ST,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Ao({[oC.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),$De=N.forwardRef(({className:e,...t},n)=>{const r=Sy();return E.jsx(Fe,{component:"header",ref:n,className:Ao({[oC.header]:!r.unstyled},e),...t})});$De.displayName="@mantine/core/ModalBaseHeader";const Dat={duration:200,timingFunction:"ease",transition:"fade"};function Iat(e){const t=Sy();return{...Dat,...t.transitionProps,...e}}const LDe=N.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Sy(),o=Iat(t);return E.jsx(Ey,{mounted:s.opened,...o,transition:"fade",children:a=>E.jsx(wR,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});LDe.displayName="@mantine/core/ModalBaseOverlay";function kat(){const e=Sy();return N.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const BDe=N.forwardRef(({className:e,...t},n)=>{const r=kat(),i=Sy();return E.jsx(Fe,{component:"h2",ref:n,className:Ao({[oC.title]:!i.unstyled},e),...t,id:r})});BDe.displayName="@mantine/core/ModalBaseTitle";function Rat({children:e}){return E.jsx(E.Fragment,{children:e})}const[Nat,DT]=_T({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Qd={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Ype={},Pat=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Pl(t)} - ${ze(2)})`}}),TL=wt((e,t)=>{const n=Qe("InputDescription",Ype,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Qe("InputDescription",Ype,n),p=DT(),m=Gt({name:["InputWrapper",c],props:n,classes:Qd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:Pat}),g=f&&(p==null?void 0:p.getStyles)||m;return E.jsx(Fe,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});TL.classes=Qd;TL.displayName="@mantine/core/InputDescription";const Oat={},Fat=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Pl(t)} - ${ze(2)})`}}),AL=wt((e,t)=>{const n=Qe("InputError",Oat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Gt({name:["InputWrapper",c],props:n,classes:Qd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:Fat}),m=DT(),g=f&&(m==null?void 0:m.getStyles)||p;return E.jsx(Fe,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});AL.classes=Qd;AL.displayName="@mantine/core/InputError";const Kpe={labelElement:"label"},Mat=(e,{size:t})=>({label:{"--input-label-size":Pl(t),"--input-asterisk-color":void 0}}),DL=wt((e,t)=>{const n=Qe("InputLabel",Kpe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=Qe("InputLabel",Kpe,n),b=Gt({name:["InputWrapper",m],props:n,classes:Qd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:Mat}),_=DT(),w=(_==null?void 0:_.getStyles)||b;return E.jsxs(Fe,{...w("label",_!=null&&_.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&E.jsx("span",{...w("required"),"aria-hidden":!0,children:" *"})]})});DL.classes=Qd;DL.displayName="@mantine/core/InputLabel";const Xpe={},OZ=wt((e,t)=>{const n=Qe("InputPlaceholder",Xpe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Qe("InputPlaceholder",Xpe,n),p=Gt({name:["InputPlaceholder",l],props:n,classes:Qd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return E.jsx(Fe,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});OZ.classes=Qd;OZ.displayName="@mantine/core/InputPlaceholder";function $at(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const Lat={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},Bat=(e,{size:t})=>({label:{"--input-label-size":Pl(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Pl(t)} - ${ze(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Pl(t)} - ${ze(2)})`}}),FZ=wt((e,t)=>{const n=Qe("InputWrapper",Lat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:_,children:w,withAsterisk:S,id:T,required:A,__stylesApiProps:k,mod:I,...R}=n,F=Gt({name:["InputWrapper",f],props:k||n,classes:Qd,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Bat}),O={size:l,variant:c,__staticSelector:f},$=ol(T),V=typeof S=="boolean"?S:A,j=(b==null?void 0:b.id)||`${$}-error`,G=(v==null?void 0:v.id)||`${$}-description`,Y=$,J=!!m&&typeof m!="boolean",L=!!g,U=`${J?j:""} ${L?G:""}`,W=U.trim().length>0?U.trim():void 0,B=(y==null?void 0:y.id)||`${$}-label`,q=p&&E.jsx(DL,{labelElement:_,id:B,htmlFor:Y,required:V,...O,...y,children:p},"label"),Z=L&&E.jsx(TL,{...v,...O,size:(v==null?void 0:v.size)||O.size,id:(v==null?void 0:v.id)||G,children:g},"description"),re=E.jsx(N.Fragment,{children:d(w)},"input"),xe=J&&N.createElement(AL,{...b,...O,size:(b==null?void 0:b.size)||O.size,key:"error",id:(b==null?void 0:b.id)||j},m),pe=h.map(Te=>{switch(Te){case"label":return q;case"input":return re;case"description":return Z;case"error":return xe;default:return null}});return E.jsx(Nat,{value:{getStyles:F,describedBy:W,inputId:Y,labelId:B,...$at(h,{hasDescription:L,hasError:J})},children:E.jsx(Fe,{ref:t,variant:c,size:l,mod:[{error:!!m},I],...F("root"),...R,children:pe})})});FZ.classes=Qd;FZ.displayName="@mantine/core/InputWrapper";const jat={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Uat=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":ur(t.size,"input-height"),"--input-fz":Pl(t.size),"--input-radius":t.radius===void 0?void 0:Zi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?ze(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?ze(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?ur(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),mo=ya((e,t)=>{const n=Qe("Input",jat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:_,rightSectionPointerEvents:w,leftSectionPointerEvents:S,variant:T,vars:A,pointer:k,multiline:I,radius:R,id:F,withAria:O,withErrorStyles:$,mod:V,inputSize:j,...G}=n,{styleProps:Y,rest:J}=M_(G),L=DT(),U={offsetBottom:L==null?void 0:L.offsetBottom,offsetTop:L==null?void 0:L.offsetTop},W=Gt({name:["Input",l],props:c||n,classes:Qd,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:U,rootSelector:"wrapper",vars:A,varsResolver:Uat}),B=O?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":L==null?void 0:L.describedBy,id:(L==null?void 0:L.inputId)||F}:{};return E.jsxs(Fe,{...W("wrapper"),...Y,...d,mod:[{error:!!h&&$,pointer:k,disabled:p,multiline:I,"data-with-right-section":!!v,"data-with-left-section":!!m},V],variant:T,size:f,children:[m&&E.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),E.jsx(Fe,{component:"input",...J,...B,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:T,__size:j,...W("input")}),v&&E.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});mo.classes=Qd;mo.Wrapper=FZ;mo.Label=DL;mo.Error=AL;mo.Description=TL;mo.Placeholder=OZ;mo.displayName="@mantine/core/Input";function zat(e,t,n){const r=Qe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:_,inputContainer:w,inputWrapperOrder:S,withAsterisk:T,variant:A,vars:k,mod:I,...R}=r,{styleProps:F,rest:O}=M_(R),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:_,inputContainer:w,inputWrapperOrder:S,withAsterisk:T,variant:A,id:v,mod:I,...y};return{...O,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...F},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const Vat={__staticSelector:"InputBase",withAria:!0},Jd=ya((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=zat("InputBase",Vat,e);return E.jsx(mo.Wrapper,{...r,children:E.jsx(mo,{...n,...i,ref:t})})});Jd.classes={...mo.classes,...mo.Wrapper.classes};Jd.displayName="@mantine/core/InputBase";const Hat={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var jDe={root:"m_8bffd616"};const qat={},Jt=ya((e,t)=>{const n=Qe("Flex",qat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=Gt({name:"Flex",classes:jDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=No(),b=rN(),_=VAe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:Hat});return E.jsxs(E.Fragment,{children:[_.hasResponsiveStyles&&E.jsx(F_,{selector:`.${b}`,styles:_.styles,media:_.media}),E.jsx(Fe,{ref:t,...y("root",{className:b,style:yb(_.inlineStyles)}),...g})]})});Jt.classes=jDe;Jt.displayName="@mantine/core/Flex";function Wat(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function Gat({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=N.useRef(),[s,o]=N.useState(!1),[a,u]=N.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=N.useRef(),d=N.useRef();return N.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),N.useEffect(()=>{if(t){const h=p=>{Wat(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),Vrt(()=>{MAe()!=="test"&&o(!0)},20,{autoInvoke:!0}),Hrt(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var UDe={root:"m_96b553a6"};const Yat={},Kat=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),MZ=wt((e,t)=>{const n=Qe("FloatingIndicator",Yat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=Gt({name:"FloatingIndicator",classes:UDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Kat}),g=N.useRef(null),{initialized:y,hidden:v}=Gat({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=Ro(t,g);return!l||!c?null:E.jsx(Fe,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});MZ.displayName="@mantine/core/FloatingIndicator";MZ.classes=UDe;const[Xat,$Z]=gu("Accordion component was not found in the tree");function IL({style:e,size:t=16,...n}){return E.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:ze(t),height:ze(t),display:"block"},...n,children:E.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}IL.displayName="@mantine/core/AccordionChevron";const[Qat,zDe]=gu("Accordion.Item component was not found in the tree");var sN={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const Jat={},LZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Qe("AccordionControl",Jat,e),{value:m}=zDe(),g=$Z(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,_=E.jsxs($f,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:w=>{l==null||l(w),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:nZ({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[E.jsx(Fe,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),E.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&E.jsx(Fe,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?E.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:_}):_});LZ.displayName="@mantine/core/AccordionControl";LZ.classes=sN;const Zat={},BZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Qe("AccordionItem",Zat,e),c=$Z();return E.jsx(Qat,{value:{value:a},children:E.jsx(Fe,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});BZ.displayName="@mantine/core/AccordionItem";BZ.classes=sN;const eut={},jZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Qe("AccordionPanel",eut,e),{value:l}=zDe(),c=$Z();return E.jsx(wL,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:E.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});jZ.displayName="@mantine/core/AccordionPanel";jZ.classes=sN;const tut={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:E.jsx(IL,{})},nut=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:ze(n),"--accordion-radius":r===void 0?void 0:Zi(r)}});function hc(e){const t=Qe("Accordion",tut,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:_,variant:w,radius:S,...T}=t,A=ol(h),[k,I]=Ba({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),R=$=>Array.isArray(k)?k.includes($):$===k,F=$=>{const V=Array.isArray(k)?k.includes($)?k.filter(j=>j!==$):[...k,$]:$===k?null:$;I(V)},O=Gt({name:"Accordion",classes:sN,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:nut});return E.jsx(Xat,{value:{isItemActive:R,onChange:F,getControlId:IM(`${A}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:IM(`${A}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:_,loop:p,getStyles:O,variant:w,unstyled:o},children:E.jsx(Fe,{...O("root"),id:A,...T,variant:w,"data-accordion":!0,children:u})})}const rut=e=>e;hc.extend=rut;hc.classes=sN;hc.displayName="@mantine/core/Accordion";hc.Item=BZ;hc.Panel=jZ;hc.Control=LZ;hc.Chevron=IL;var VDe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const iut={},sut=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Zi(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Pg=wt((e,t)=>{const n=Qe("Alert",iut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,..._}=n,w=Gt({name:"Alert",classes:VDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sut}),S=ol(h),T=f&&`${S}-title`||void 0,A=`${S}-body`;return E.jsx(Fe,{id:S,...w("root",{variant:v}),variant:v,ref:t,..._,role:"alert","aria-describedby":A,"aria-labelledby":T,children:E.jsxs("div",{...w("wrapper"),children:[p&&E.jsx("div",{...w("icon"),children:p}),E.jsxs("div",{...w("body"),children:[f&&E.jsx("div",{...w("title"),"data-with-close-button":m||void 0,children:E.jsx("span",{id:T,...w("label"),children:f})}),d&&E.jsx("div",{id:A,...w("message"),"data-variant":v,children:d})]}),m&&E.jsx(wb,{...w("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Pg.classes=VDe;Pg.displayName="@mantine/core/Alert";var HDe={root:"m_b6d8b162"};function out(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const aut={inherit:!1},uut=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Pl(i),"--text-lh":DAe(i),"--text-gradient":t==="gradient"?sG(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Ki(s,e):void 0}}),tt=ya((e,t)=>{const n=Qe("Text",aut,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,_=Gt({name:["Text",l],props:n,classes:HDe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:uut});return E.jsx(Fe,{..._("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":out(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});tt.classes=HDe;tt.displayName="@mantine/core/Text";var qDe={root:"m_849cf0da"};const lut={underline:"hover"},_b=ya((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Qe("Anchor",lut,e);return E.jsx(tt,{component:"a",ref:t,className:Ao({[qDe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});_b.classes=qDe;_b.displayName="@mantine/core/Anchor";const[cut,IT]=gu("AppShell was not found in tree");var Eb={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const fut={},UZ=wt((e,t)=>{const n=Qe("AppShellAside",fut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=IT();return h.disabled?null:E.jsx(Fe,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});UZ.classes=Eb;UZ.displayName="@mantine/core/AppShellAside";const dut={},zZ=wt((e,t)=>{var p;const n=Qe("AppShellFooter",dut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=IT();return h.disabled?null:E.jsx(Fe,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Ao({[rC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});zZ.classes=Eb;zZ.displayName="@mantine/core/AppShellFooter";const hut={},VZ=wt((e,t)=>{var p;const n=Qe("AppShellHeader",hut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=IT();return h.disabled?null:E.jsx(Fe,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Ao({[rC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});VZ.classes=Eb;VZ.displayName="@mantine/core/AppShellHeader";const put={},HZ=wt((e,t)=>{const n=Qe("AppShellMain",put,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IT();return E.jsx(Fe,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});HZ.classes=Eb;HZ.displayName="@mantine/core/AppShellMain";function oN(e){return typeof e=="object"?e.base:e}function aN(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function uN(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function mut({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),aN(s)){const f=ze(oN(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(uN(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=ze(s.base),e["--app-shell-aside-offset"]=ze(s.base)),us(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=ze(s[f]),t[f]["--app-shell-aside-offset"]=ze(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=iZ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function gut({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(aN(r)){const o=ze(oN(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}uN(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=ze(r.base),s&&(e["--app-shell-footer-offset"]=ze(r.base))),us(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=ze(r[o]),s&&(t[o]["--app-shell-footer-offset"]=ze(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function yut({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(aN(r)){const o=ze(oN(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}uN(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=ze(r.base),s&&(e["--app-shell-header-offset"]=ze(r.base))),us(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=ze(r[o]),s&&(t[o]["--app-shell-header-offset"]=ze(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function vut({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),aN(s)){const f=ze(oN(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(uN(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=ze(s.base),e["--app-shell-navbar-offset"]=ze(s.base)),us(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=ze(s[f]),t[f]["--app-shell-navbar-offset"]=ze(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=iZ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function bz(e){return Number(e)===0?"0px":qo(e)}function but({padding:e,baseStyles:t,minMediaStyles:n}){aN(e)&&(t["--app-shell-padding"]=bz(oN(e))),uN(e)&&(e.base&&(t["--app-shell-padding"]=bz(e.base)),us(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=bz(e[r]))}))}function xut({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};vut({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),mut({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),yut({baseStyles:u,minMediaStyles:o,header:t}),gut({baseStyles:u,minMediaStyles:o,footer:n}),but({baseStyles:u,minMediaStyles:o,padding:i});const l=vR(us(o),s).map(d=>({query:`(min-width: ${DM(d.px)})`,styles:o[d.value]})),c=vR(us(a),s).map(d=>({query:`(max-width: ${DM(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function wut({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=No(),o=bb(),{media:a,baseStyles:u}=xut({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return E.jsx(F_,{media:a,styles:u,selector:o.cssVariablesSelector})}const _ut={},qZ=wt((e,t)=>{const n=Qe("AppShellNavbar",_ut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=IT();return h.disabled?null:E.jsx(Fe,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});qZ.classes=Eb;qZ.displayName="@mantine/core/AppShellNavbar";const Eut={},WZ=ya((e,t)=>{const n=Qe("AppShellSection",Eut,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=IT();return E.jsx(Fe,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});WZ.classes=Eb;WZ.displayName="@mantine/core/AppShellSection";function Sut({transitionDuration:e,disabled:t}){const[n,r]=N.useState(!0),i=N.useRef(),s=N.useRef();return PAe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),O_(()=>{N.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const Cut={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Ep("app")},Tut=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Yi=wt((e,t)=>{const n=Qe("AppShell",Cut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:_,mod:w,...S}=n,T=Gt({name:"AppShell",classes:Eb,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Tut}),A=Sut({disabled:y,transitionDuration:d});return E.jsxs(cut,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:_},children:[E.jsx(wut,{navbar:l,header:p,aside:v,footer:b,padding:f}),E.jsx(Fe,{ref:t,...T("root"),mod:[{resizing:A,layout:g,disabled:y},w],...S})]})});Yi.classes=Eb;Yi.displayName="@mantine/core/AppShell";Yi.Navbar=qZ;Yi.Header=VZ;Yi.Main=HZ;Yi.Aside=UZ;Yi.Footer=zZ;Yi.Section=WZ;function WDe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>WDe(t))}:e}function GDe(e){return e?e.map(t=>WDe(t)):[]}function GZ(e){return e.reduce((t,n)=>"group"in n?{...t,...GZ(n.items)}:(t[n.value]=n,t),{})}var Uc={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const Aut={error:null},Dut=(e,{size:t})=>({chevron:{"--combobox-chevron-size":ur(t,"combobox-chevron-size")}}),YZ=wt((e,t)=>{const n=Qe("ComboboxChevron",Aut,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Gt({name:"ComboboxChevron",classes:Uc,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:Dut,rootSelector:"chevron"});return E.jsx(Fe,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:E.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});YZ.classes=Uc;YZ.displayName="@mantine/core/ComboboxChevron";const[Iut,Zd]=gu("Combobox component was not found in tree"),YDe=N.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>E.jsx(wb,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));YDe.displayName="@mantine/core/ComboboxClearButton";const kut={},KZ=wt((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Qe("ComboboxDropdown",kut,e),u=Zd();return E.jsx(Fc.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});KZ.classes=Uc;KZ.displayName="@mantine/core/ComboboxDropdown";const Rut={refProp:"ref"},KDe=wt((e,t)=>{const{children:n,refProp:r}=Qe("ComboboxDropdownTarget",Rut,e);if(Zd(),!vb(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return E.jsx(Fc.Target,{ref:t,refProp:r,children:n})});KDe.displayName="@mantine/core/ComboboxDropdownTarget";const Nut={},XZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ComboboxEmpty",Nut,e),u=Zd();return E.jsx(Fe,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});XZ.classes=Uc;XZ.displayName="@mantine/core/ComboboxEmpty";function QZ({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Zd(),[a,u]=N.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Put={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},XDe=wt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Qe("ComboboxEventsTarget",Put,e);if(!vb(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Zd(),f=QZ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return N.cloneElement(n,{...f,...l,[r]:Ro(t,c.store.targetRef,n==null?void 0:n.ref)})});XDe.displayName="@mantine/core/ComboboxEventsTarget";const Out={},JZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ComboboxFooter",Out,e),u=Zd();return E.jsx(Fe,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});JZ.classes=Uc;JZ.displayName="@mantine/core/ComboboxFooter";const Fut={},ZZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Qe("ComboboxGroup",Fut,e),c=Zd();return E.jsxs(Fe,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&E.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});ZZ.classes=Uc;ZZ.displayName="@mantine/core/ComboboxGroup";const Mut={},eee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ComboboxHeader",Mut,e),u=Zd();return E.jsx(Fe,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});eee.classes=Uc;eee.displayName="@mantine/core/ComboboxHeader";function QDe({value:e,valuesDivider:t=",",...n}){return E.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}QDe.displayName="@mantine/core/ComboboxHiddenInput";const $ut={},tee=wt((e,t)=>{const n=Qe("ComboboxOption",$ut,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Zd(),v=N.useId(),b=l||v;return E.jsx(Fe,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:_=>{var w;h?_.preventDefault():((w=y.onOptionSubmit)==null||w.call(y,n.value,n),u==null||u(_))},onMouseDown:_=>{_.preventDefault(),f==null||f(_)},onMouseOver:_=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(_)}})});tee.classes=Uc;tee.displayName="@mantine/core/ComboboxOption";const Lut={},nee=wt((e,t)=>{const n=Qe("ComboboxOptions",Lut,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Zd(),d=ol(a);return N.useEffect(()=>{f.store.setListId(d)},[d]),E.jsx(Fe,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});nee.classes=Uc;nee.displayName="@mantine/core/ComboboxOptions";const But={withAriaAttributes:!0,withKeyboardNavigation:!0},ree=wt((e,t)=>{const n=Qe("ComboboxSearch",But,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Zd(),h=d.getStyles("search"),p=QZ({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return E.jsx(mo,{ref:Ro(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});ree.classes=Uc;ree.displayName="@mantine/core/ComboboxSearch";const jut={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},JDe=wt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Qe("ComboboxTarget",jut,e);if(!vb(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Zd(),f=QZ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=N.cloneElement(n,{...f,...l});return E.jsx(Fc.Target,{ref:Ro(t,c.store.targetRef),children:d})});JDe.displayName="@mantine/core/ComboboxTarget";function Uut(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function zut(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Vut(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function iee({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Ba({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=N.useRef(null),c=N.useRef(-1),f=N.useRef(null),d=N.useRef(null),h=N.useRef(-1),p=N.useRef(-1),m=N.useRef(-1),g=N.useCallback((j="unknown")=>{a||(u(!0),i==null||i(j))},[u,i,a]),y=N.useCallback((j="unknown")=>{a&&(u(!1),r==null||r(j))},[u,r,a]),v=N.useCallback((j="unknown")=>{a?y(j):g(j)},[y,g,a]),b=N.useCallback(()=>{const j=document.querySelector(`#${l.current} [data-combobox-selected]`);j==null||j.removeAttribute("data-combobox-selected"),j==null||j.removeAttribute("aria-selected")},[]),_=N.useCallback(j=>{const G=document.getElementById(l.current),Y=G==null?void 0:G.querySelectorAll("[data-combobox-option]");if(!Y)return null;const J=j>=Y.length?0:j<0?Y.length-1:j;return c.current=J,Y!=null&&Y[J]&&!Y[J].hasAttribute("data-combobox-disabled")?(b(),Y[J].setAttribute("data-combobox-selected","true"),Y[J].setAttribute("aria-selected","true"),Y[J].scrollIntoView({block:"nearest",behavior:o}),Y[J].id):null},[o,b]),w=N.useCallback(()=>{const j=document.querySelector(`#${l.current} [data-combobox-active]`);if(j){const G=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Y=Array.from(G).findIndex(J=>J===j);return _(Y)}return _(0)},[_]),S=N.useCallback(()=>_(zut(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[_,s]),T=N.useCallback(()=>_(Uut(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[_,s]),A=N.useCallback(()=>_(Vut(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[_]),k=N.useCallback((j="selected",G)=>{m.current=window.setTimeout(()=>{var L;const Y=document.querySelectorAll(`#${l.current} [data-combobox-option]`),J=Array.from(Y).findIndex(U=>U.hasAttribute(`data-combobox-${j}`));c.current=J,G!=null&&G.scrollIntoView&&((L=Y[J])==null||L.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),I=N.useCallback(()=>{c.current=-1,b()},[b]),R=N.useCallback(()=>{const j=document.querySelectorAll(`#${l.current} [data-combobox-option]`),G=j==null?void 0:j[c.current];G==null||G.click()},[]),F=N.useCallback(j=>{l.current=j},[]),O=N.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=N.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),V=N.useCallback(()=>c.current,[]);return N.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:V,selectOption:_,selectFirstOption:A,selectActiveOption:w,selectNextOption:S,selectPreviousOption:T,resetSelectedOption:I,updateSelectedOptionIndex:k,listId:l.current,setListId:F,clickSelectedOption:R,searchRef:f,focusSearchInput:O,targetRef:d,focusTarget:$}}const Hut={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},qut=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Pl(t),"--combobox-option-padding":ur(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:ze(n),"--combobox-option-fz":Pl(t),"--combobox-option-padding":ur(t,"combobox-option-padding")}});function Yr(e){const t=Qe("Combobox",Hut,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=iee(),y=o||g,v=Gt({name:h||"Combobox",classes:Uc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:qut}),b=()=>{l==null||l(),y.closeDropdown()};return E.jsx(Iut,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:E.jsx(Fc,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const Wut=e=>e;Yr.extend=Wut;Yr.classes=Uc;Yr.displayName="@mantine/core/Combobox";Yr.Target=JDe;Yr.Dropdown=KZ;Yr.Options=nee;Yr.Option=tee;Yr.Search=ree;Yr.Empty=XZ;Yr.Chevron=YZ;Yr.Footer=JZ;Yr.Header=eee;Yr.EventsTarget=XDe;Yr.DropdownTarget=KDe;Yr.Group=ZZ;Yr.ClearButton=YDe;Yr.HiddenInput=QDe;var ZDe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const eIe=ZDe,kL=N.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,..._},w)=>{const S=Gt({name:e,props:t,className:n,style:y,classes:ZDe,classNames:r,styles:i,unstyled:s});return E.jsx(Fe,{...S("root"),ref:w,__vars:{"--label-fz":Pl(d),"--label-lh":ur(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,..._,children:E.jsxs(Fe,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,E.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&E.jsx(Fe,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&E.jsx(mo.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&E.jsx(mo.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});kL.displayName="@mantine/core/InlineInput";const tIe=N.createContext(null),Gut=tIe.Provider,nIe=()=>N.useContext(tIe),[Yut,Kut]=_T();var rIe={card:"m_26775b0a"};const Xut={withBorder:!0},Qut=(e,{radius:t})=>({card:{"--card-radius":Zi(t)}}),see=wt((e,t)=>{const n=Qe("CheckboxCard",Xut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=Gt({name:"CheckboxCard",classes:rIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qut,rootSelector:"card"}),g=nIe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return E.jsx(Yut,{value:{checked:y},children:E.jsx($f,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});see.displayName="@mantine/core/CheckboxCard";see.classes=rIe;function oee({children:e,role:t}){const n=DT();return n?E.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):E.jsx(E.Fragment,{children:e})}const Jut={},aee=wt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Qe("CheckboxGroup",Jut,e),[c,f]=Ba({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return E.jsx(Gut,{value:{value:c,onChange:d,size:s},children:E.jsx(mo.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:E.jsx(oee,{role:"group",children:a})})})});aee.classes=mo.Wrapper.classes;aee.displayName="@mantine/core/CheckboxGroup";function iIe({size:e,style:t,...n}){const r=e!==void 0?{width:ze(e),height:ze(e),...t}:t;return E.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:E.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function sIe({indeterminate:e,...t}){return e?E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:E.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):E.jsx(iIe,{...t})}var oIe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Zut={icon:sIe},elt=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=f0({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":ur(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Zi(t),"--checkbox-color":s==="outline"?u:Ki(n,e),"--checkbox-icon-color":i?Ki(i,e):ET(o,e)?xb({color:n,theme:e,autoContrast:o}):void 0}}},uee=wt((e,t)=>{const n=Qe("CheckboxIndicator",Zut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,_=l,w=Gt({name:"CheckboxIndicator",classes:oIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:elt,rootSelector:"indicator"}),S=Kut(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return E.jsx(Fe,{ref:t,...w("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],...b,children:E.jsx(_,{indeterminate:c,...w("icon")})})});uee.displayName="@mantine/core/CheckboxIndicator";uee.classes=oIe;var aIe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const tlt={labelPosition:"right",icon:sIe},nlt=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=f0({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":ur(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Zi(t),"--checkbox-color":s==="outline"?u:Ki(n,e),"--checkbox-icon-color":i?Ki(i,e):ET(o,e)?xb({color:n,theme:e,autoContrast:o}):void 0}}},Cc=wt((e,t)=>{const n=Qe("Checkbox",tlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:_,variant:w,indeterminate:S,icon:T,rootRef:A,iconColor:k,onChange:I,autoContrast:R,mod:F,...O}=n,$=nIe(),V=d||($==null?void 0:$.size),j=T,G=Gt({name:"Checkbox",props:n,classes:aIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nlt}),{styleProps:Y,rest:J}=M_(O),L=ol(f),U=$?{checked:$.value.includes(J.value),onChange:W=>{$.onChange(W),I==null||I(W)}}:{};return E.jsx(kL,{...G("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:L,size:V,labelPosition:y,label:c,description:v,error:b,disabled:_,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||g||void 0,variant:w,ref:A,mod:F,...Y,...p,children:E.jsxs(Fe,{...G("inner"),mod:{"data-label-position":y},children:[E.jsx(Fe,{component:"input",id:L,ref:t,checked:g,disabled:_,mod:{error:!!b,indeterminate:S},...G("input",{focusable:!0,variant:w}),onChange:I,...J,...U,type:"checkbox"}),E.jsx(j,{indeterminate:S,...G("icon")})]})})});Cc.classes={...aIe,...eIe};Cc.displayName="@mantine/core/Checkbox";Cc.Group=aee;Cc.Indicator=uee;Cc.Card=see;function aC(e){return"group"in e}function uIe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;aC(o)&&i.push({group:o.group,items:uIe({options:o.items,search:t,limit:n-i.length})}),aC(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function rlt(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function lIe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(aC(n))lIe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function ilt(e,t){return Array.isArray(e)?e.includes(t):e===t}function cIe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!aC(e)){const a=ilt(n,e.value),u=t&&a&&E.jsx(iIe,{className:Uc.optionsDropdownCheckIcon}),l=E.jsxs(E.Fragment,{children:[r==="left"&&u,E.jsx("span",{children:e.label}),r==="right"&&u]});return E.jsx(Yr.Option,{value:e.value,disabled:e.disabled,className:Ao({[Uc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>E.jsx(cIe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return E.jsx(Yr.Group,{label:e.group,children:o})}function fIe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){lIe(e);const b=typeof i=="string"?(r||uIe)({options:e,search:u?i:"",limit:s??1/0}):e,_=rlt(b),w=b.map(S=>E.jsx(cIe,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},aC(S)?S.group:S.value));return E.jsx(Yr.Dropdown,{hidden:t||n&&_,children:E.jsxs(Yr.Options,{labelledBy:p,"aria-label":y,children:[a?E.jsx(Xg.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:w}):w,_&&d&&E.jsx(Yr.Empty,{children:d})]})})}var dIe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const slt={},olt=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":ur(s,"badge-height"),"--badge-padding-x":ur(s,"badge-padding-x"),"--badge-fz":ur(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Zi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Ki(n,e):void 0}}},lv=ya((e,t)=>{const n=Qe("Badge",slt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,..._}=n,w=Gt({name:"Badge",props:n,classes:dIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:olt});return E.jsxs(Fe,{variant:m,mod:[{block:g,circle:v},b],...w("root",{variant:m}),ref:t,..._,children:[d&&E.jsx("span",{...w("section"),"data-position":"left",children:d}),E.jsx("span",{...w("label"),children:p}),h&&E.jsx("span",{...w("section"),"data-position":"right",children:h})]})});lv.classes=dIe;lv.displayName="@mantine/core/Badge";var RL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Qpe={orientation:"horizontal"},alt=(e,{borderWidth:t})=>({group:{"--button-border-width":ze(t)}}),lee=wt((e,t)=>{const n=Qe("ButtonGroup",Qpe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Qe("ButtonGroup",Qpe,e),p=Gt({name:"ButtonGroup",props:n,classes:RL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:alt,rootSelector:"group"});return E.jsx(Fe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});lee.classes=RL;lee.displayName="@mantine/core/ButtonGroup";const ult={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${ze(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},llt={},clt=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":ur(s,"button-height"),"--button-padding-x":ur(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Pl(s.replace("compact-","")):Pl(s),"--button-radius":t===void 0?void 0:Zi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},bn=ya((e,t)=>{const n=Qe("Button",llt,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":_,autoContrast:w,mod:S,...T}=n,A=Gt({name:"Button",props:n,classes:RL,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:clt}),k=!!l,I=!!c;return E.jsxs($f,{ref:t,...A("root",{active:!a&&!p&&!_}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||_,loading:p,block:f,"with-left-section":k,"with-right-section":I},S],...T,children:[E.jsx(Ey,{mounted:!!p,transition:ult,duration:150,children:R=>E.jsx(Fe,{component:"span",...A("loader",{style:R}),"aria-hidden":!0,children:E.jsx(Zc,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),E.jsxs("span",{...A("inner"),children:[l&&E.jsx(Fe,{component:"span",...A("section"),mod:{position:"left"},children:l}),E.jsx(Fe,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&E.jsx(Fe,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});bn.classes=RL;bn.displayName="@mantine/core/Button";bn.Group=lee;const[flt,dlt]=gu("Card component was not found in tree");var cee={root:"m_e615b15f",section:"m_599a2148"};const hlt={},NL=ya((e,t)=>{const n=Qe("CardSection",hlt,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=dlt();return E.jsx(Fe,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});NL.classes=cee;NL.displayName="@mantine/core/CardSection";const plt={},mlt=(e,{padding:t})=>({root:{"--card-padding":qo(t)}}),kT=ya((e,t)=>{const n=Qe("Card",plt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Gt({name:"Card",props:n,classes:cee,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mlt}),h=N.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===NL?N.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return E.jsx(flt,{value:{getStyles:d},children:E.jsx(ST,{ref:t,unstyled:a,...d("root"),...f,children:p})})});kT.classes=cee;kT.displayName="@mantine/core/Card";kT.Section=NL;var hIe={root:"m_4451eb3a"};const glt={},ma=ya((e,t)=>{const n=Qe("Center",glt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Gt({name:"Center",props:n,classes:hIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return E.jsx(Fe,{ref:t,mod:[{inline:l},c],...d("root"),...f})});ma.classes=hIe;ma.displayName="@mantine/core/Center";var pIe={root:"m_b183c0a2"};const ylt={},vlt=(e,{color:t})=>({root:{"--code-bg":t?Ki(t,e):void 0}}),lk=wt((e,t)=>{const n=Qe("Code",ylt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Gt({name:"Code",props:n,classes:pIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vlt});return E.jsx(Fe,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});lk.classes=pIe;lk.displayName="@mantine/core/Code";var mIe={root:"m_7485cace"};const blt={},xlt=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:ur(t,"container-size")}}),Bf=wt((e,t)=>{const n=Qe("Container",blt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Gt({name:"Container",classes:mIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xlt});return E.jsx(Fe,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Bf.classes=mIe;Bf.displayName="@mantine/core/Container";var gIe={root:"m_3eebeb36",label:"m_9e365f20"};const wlt={orientation:"horizontal"},_lt=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Ki(t,e):void 0,"--divider-border-style":n,"--divider-size":ur(r,"divider-size")}}),RT=wt((e,t)=>{const n=Qe("Divider",wlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Gt({name:"Divider",classes:gIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_lt});return E.jsx(Fe,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&E.jsx(Fe,{component:"span",mod:{position:d},...m("label"),children:f})})});RT.classes=gIe;RT.displayName="@mantine/core/Divider";function Elt({open:e,close:t,openDelay:n,closeDelay:r}){const i=N.useRef(-1),s=N.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return N.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[Slt,yIe]=gu("Grid component was not found in tree"),mG=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Jpe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":mG(e,t),Zpe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},eme=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function Clt({span:e,order:t,offset:n,selector:r}){var d;const i=No(),s=yIe(),a=Wh(e)===void 0?12:Wh(e),u=yb({"--col-order":(d=Wh(t))==null?void 0:d.toString(),"--col-flex-grow":Zpe(a,s.grow),"--col-flex-basis":mG(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Jpe(a,s.columns,s.grow),"--col-offset":eme(Wh(n),s.columns)}),l=us(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Zpe(e[p],s.grow),h[p]["--col-flex-basis"]=mG(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Jpe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=eme(n[p],s.columns)),h},{}),f=vR(us(l),i).filter(h=>us(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return E.jsx(F_,{styles:u,media:f,selector:r})}var fee={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Tlt={span:12},dee=wt((e,t)=>{const n=Qe("GridCol",Tlt,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=yIe(),h=rN();return E.jsxs(E.Fragment,{children:[E.jsx(Clt,{selector:`.${h}`,span:u,order:l,offset:c}),E.jsx(Fe,{ref:t,...d.getStyles("col",{className:Ao(i,h),style:s,classNames:r,styles:o}),...f})]})});dee.classes=fee;dee.displayName="@mantine/core/GridCol";function Alt({gutter:e,selector:t}){const n=No(),r=yb({"--grid-gutter":qo(Wh(e))}),i=us(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=qo(e[u])),a),{}),o=vR(us(i),n).filter(a=>us(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return E.jsx(F_,{styles:r,media:o,selector:t})}const Dlt={gutter:"md",grow:!1,columns:12},Ilt=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Ef=wt((e,t)=>{const n=Qe("Grid",Dlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=Gt({name:"Grid",classes:fee,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ilt}),y=rN();return E.jsxs(Slt,{value:{getStyles:g,grow:l,columns:f},children:[E.jsx(Alt,{selector:`.${y}`,...n}),E.jsx(Fe,{ref:t,...g("root",{className:y}),...m,children:E.jsx("div",{...g("inner"),children:p})})]})});Ef.classes=fee;Ef.displayName="@mantine/core/Grid";Ef.Col=dee;var vIe={root:"m_9e117634"};const klt={},Rlt=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Zi(t),"--image-object-fit":n}}),Sb=ya((e,t)=>{const n=Qe("Image",klt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=N.useState(!c);N.useEffect(()=>y(!c),[c]);const v=Gt({name:"Image",classes:vIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Rlt});return g&&h?E.jsx(Fe,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):E.jsx(Fe,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Sb.classes=vIe;Sb.displayName="@mantine/core/Image";function uC(){return uC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uC.apply(null,arguments)}function hee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Nlt=N.useLayoutEffect,Plt=function(t){var n=N.useRef(t);return Nlt(function(){n.current=t}),n},tme=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Olt=function(t,n){var r=N.useRef();return N.useCallback(function(i){t.current=i,r.current&&tme(r.current,null),r.current=n,n&&tme(n,i)},[n])},nme={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Flt=function(t){Object.keys(nme).forEach(function(n){t.style.setProperty(n,nme[n],"important")})},rme=Flt,gl=null,ime=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Mlt(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),gl||(gl=document.createElement("textarea"),gl.setAttribute("tabindex","-1"),gl.setAttribute("aria-hidden","true"),rme(gl)),gl.parentNode===null&&document.body.appendChild(gl);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;gl.style[h]=o[h]}),rme(gl),gl.value=t;var u=ime(gl,e);gl.value=t,u=ime(gl,e),gl.value="x";var l=gl.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var sme=function(){},$lt=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Llt=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Blt=!!document.documentElement.currentStyle,jlt=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=$lt(Llt,n),i=r.boxSizing;if(i==="")return null;Blt&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},Ult=jlt;function bIe(e,t,n){var r=Plt(n);N.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var zlt=function(t){bIe(window,"resize",t)},Vlt=function(t){bIe(document.fonts,"loadingdone",t)},Hlt=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],qlt=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?sme:o,u=t.onHeightChange,l=u===void 0?sme:u,c=hee(t,Hlt),f=c.value!==void 0,d=N.useRef(null),h=Olt(d,n),p=N.useRef(0),m=N.useRef(),g=function(){var b=d.current,_=r&&m.current?m.current:Ult(b);if(_){m.current=_;var w=Mlt(_,b.value||b.placeholder||"x",s,i),S=w[0],T=w[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),l(S,{rowHeight:T}))}},y=function(b){f||g(),a(b)};return N.useLayoutEffect(g),zlt(g),Vlt(g),N.createElement("textarea",uC({},c,{onChange:y,ref:h}))},Wlt=N.forwardRef(qlt);const Glt={},pee=wt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Qe("Textarea",Glt,e),u=n&&MAe()!=="test",l=u?{maxRows:r,minRows:i}:{};return E.jsx(Jd,{component:u?Wlt:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});pee.classes=Jd.classes;pee.displayName="@mantine/core/Textarea";const[Ylt,Klt]=gu("List component was not found in tree");var mee={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const Xlt={},gee=wt((e,t)=>{const n=Qe("ListItem",Xlt,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=Klt(),h=u||d.icon,p={classNames:r,styles:o};return E.jsx(Fe,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:E.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&E.jsx("span",{...d.getStyles("itemIcon",p),children:h}),E.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});gee.classes=mee;gee.displayName="@mantine/core/ListItem";const Qlt={type:"unordered"},Jlt=(e,{size:t,spacing:n})=>({root:{"--list-fz":Pl(t),"--list-lh":DAe(t),"--list-spacing":qo(n)}}),zu=wt((e,t)=>{const n=Qe("List",Qlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=Gt({name:"List",classes:mee,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Jlt});return E.jsx(Ylt,{value:{center:p,icon:d,getStyles:v},children:E.jsx(Fe,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});zu.classes=mee;zu.displayName="@mantine/core/List";zu.Item=gee;var xIe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const ome={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Ep("overlay")},Zlt=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),jf=wt((e,t)=>{const n=Qe("LoadingOverlay",ome,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=No(),g=Gt({name:"LoadingOverlay",classes:xIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Zlt}),y={...ome.overlayProps,...f};return E.jsx(Ey,{transition:"fade",...l,mounted:!!d,children:v=>E.jsxs(Fe,{...g("root",{style:v}),ref:t,...p,children:[E.jsx(Zc,{...g("loader"),unstyled:a,...c}),E.jsx(wR,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),E.jsx(wR,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});jf.classes=xIe;jf.displayName="@mantine/core/LoadingOverlay";const[ect,lN]=gu("Menu component was not found in the tree");var NT={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const tct={},yee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("MenuDivider",tct,e),u=lN();return E.jsx(Fe,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});yee.classes=NT;yee.displayName="@mantine/core/MenuDivider";const nct={},vee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Qe("MenuDropdown",nct,e),f=N.useRef(null),d=lN(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=vg(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=vg(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return E.jsxs(Fc.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:Ro(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[E.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});vee.classes=NT;vee.displayName="@mantine/core/MenuDropdown";const rct={},bee=ya((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Qe("MenuItem",rct,e),p=lN(),m=No(),{dir:g}=wy(),y=N.useRef(),v=p.getItemIndex(y.current),b=h,_=vg(b.onMouseLeave,()=>p.setHovered(-1)),w=vg(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=vg(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),T=vg(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,k=a?f0({color:a,theme:m}):null;return E.jsxs($f,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:T,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:Ro(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:w,onMouseLeave:_,onClick:S,onKeyDown:nZ({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":k!=null&&k.isThemeColor&&(k==null?void 0:k.shade)===void 0?`var(--mantine-color-${k.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&E.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&E.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&E.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});bee.classes=NT;bee.displayName="@mantine/core/MenuItem";const ict={},xee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("MenuLabel",ict,e),u=lN();return E.jsx(Fe,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});xee.classes=NT;xee.displayName="@mantine/core/MenuLabel";const sct={refProp:"ref"},wIe=N.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Qe("MenuTarget",sct,e);if(!vb(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=lN(),o=vg(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=vg(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=vg(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return E.jsx(Fc.Target,{refProp:r,popupType:"menu",ref:t,...i,children:N.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});wIe.displayName="@mantine/core/MenuTarget";const oct={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function El(e){const t=Qe("Menu",oct,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:_,keepMounted:w,...S}=t,T=Gt({name:"Menu",classes:NT,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:k,resetHovered:I}]=wrt(),[R,F]=Ba({value:s,defaultValue:o,finalValue:!1,onChange:u}),[O,$]=N.useState(!1),V=()=>{F(!1),$(!1),R&&(i==null||i())},j=()=>{F(!0),!R&&(r==null||r())},G=()=>{R?V():j()},{openDropdown:Y,closeDropdown:J}=Elt({open:j,close:V,closeDelay:p,openDelay:h}),L=B=>xrt("[data-menu-item]","[data-menu-dropdown]",B),{resolvedClassNames:U,resolvedStyles:W}=nN({classNames:m,styles:g,props:t});return zm(()=>{I()},[R]),E.jsx(ect,{value:{getStyles:T,opened:R,toggleDropdown:G,getItemIndex:L,hovered:A,setHovered:k,openedViaClick:O,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?V:J,openDropdown:d==="click"?j:Y,closeDropdownImmediately:V,loop:c,trigger:d,unstyled:y,menuItemTabIndex:_},children:E.jsx(Fc,{...S,opened:R,onChange:G,defaultOpened:o,trapFocus:w?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:W,unstyled:y,variant:v,keepMounted:w,children:n})})}El.extend=e=>e;El.classes=NT;El.displayName="@mantine/core/Menu";El.Item=bee;El.Label=xee;El.Dropdown=vee;El.Target=wIe;El.Divider=yee;const[act,PT]=gu("Modal component was not found in tree");var Cy={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const uct={},PL=wt((e,t)=>{const n=Qe("ModalBody",uct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=PT();return E.jsx(FDe,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});PL.classes=Cy;PL.displayName="@mantine/core/ModalBody";const lct={},OL=wt((e,t)=>{const n=Qe("ModalCloseButton",lct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=PT();return E.jsx(MDe,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});OL.classes=Cy;OL.displayName="@mantine/core/ModalCloseButton";const cct={},FL=wt((e,t)=>{const n=Qe("ModalContent",cct,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=PT(),f=c.scrollAreaComponent||Rat;return E.jsx(Aat,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:E.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${ze(c.yOffset)} * 2))`},children:u})})});FL.classes=Cy;FL.displayName="@mantine/core/ModalContent";const fct={},ML=wt((e,t)=>{const n=Qe("ModalHeader",fct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=PT();return E.jsx($De,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});ML.classes=Cy;ML.displayName="@mantine/core/ModalHeader";const dct={},$L=wt((e,t)=>{const n=Qe("ModalOverlay",dct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=PT();return E.jsx(LDe,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});$L.classes=Cy;$L.displayName="@mantine/core/ModalOverlay";const hct={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ep("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},pct=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Zi(t),"--modal-size":ur(n,"modal-size"),"--modal-y-offset":ze(r),"--modal-x-offset":ze(i)}}),LL=wt((e,t)=>{const n=Qe("ModalRoot",hct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=Gt({name:m,classes:Cy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pct});return E.jsx(act,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:E.jsx(Cat,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});LL.classes=Cy;LL.displayName="@mantine/core/ModalRoot";const mct={},BL=wt((e,t)=>{const n=Qe("ModalTitle",mct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=PT();return E.jsx(BDe,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});BL.classes=Cy;BL.displayName="@mantine/core/ModalTitle";const gct={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ep("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},ho=wt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Qe("Modal",gct,e),c=!!n||s;return E.jsxs(LL,{ref:t,radius:u,...l,children:[r&&E.jsx($L,{...i}),E.jsxs(FL,{radius:u,children:[c&&E.jsxs(ML,{children:[n&&E.jsx(BL,{children:n}),s&&E.jsx(OL,{...o})]}),E.jsx(PL,{children:a})]})]})});ho.classes=Cy;ho.displayName="@mantine/core/Modal";ho.Root=LL;ho.Overlay=$L;ho.Content=FL;ho.Body=PL;ho.Header=ML;ho.Title=BL;ho.CloseButton=OL;const[yct,wee]=_T(),[vct,bct]=_T();var jL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const xct={},wct=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?ur(t):ur(n,"pg-gap")}}),_ee=wt((e,t)=>{const n=Qe("PillGroup",xct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=wee(),h=(d==null?void 0:d.size)||l||void 0,p=Gt({name:"PillGroup",classes:jL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wct,stylesCtx:{size:h},rootSelector:"group"});return E.jsx(vct,{value:{size:h,disabled:c},children:E.jsx(Fe,{ref:t,size:h,...p("group"),...f})})});_ee.classes=jL;_ee.displayName="@mantine/core/PillGroup";const _ct={variant:"default"},Ect=(e,{radius:t},{size:n})=>({root:{"--pill-fz":ur(n,"pill-fz"),"--pill-height":ur(n,"pill-height"),"--pill-radius":t===void 0?void 0:Zi(t)}}),_R=wt((e,t)=>{const n=Qe("Pill",_ct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=bct(),_=wee(),w=m||(b==null?void 0:b.size)||void 0,S=(_==null?void 0:_.variant)==="filled"?"contrast":l||"default",T=Gt({name:"Pill",classes:jL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ect,stylesCtx:{size:w}});return E.jsxs(Fe,{component:"span",ref:t,variant:S,size:w,...T("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[E.jsx("span",{...T("label"),children:c}),f&&E.jsx(wb,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var k;A.preventDefault(),A.stopPropagation(),(k=h==null?void 0:h.onMouseDown)==null||k.call(h,A)},onClick:A=>{var k;A.stopPropagation(),d==null||d(),(k=h==null?void 0:h.onClick)==null||k.call(h,A)}})]})});_R.classes=jL;_R.displayName="@mantine/core/Pill";_R.Group=_ee;var _Ie={field:"m_45c4369d"};const Sct={type:"visible"},Eee=wt((e,t)=>{const n=Qe("PillsInputField",Sct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=wee(),g=DT(),y=Gt({name:"PillsInputField",classes:_Ie,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return E.jsx(Fe,{component:"input",ref:Ro(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});Eee.classes=_Ie;Eee.displayName="@mantine/core/PillsInputField";const Cct={},MM=wt((e,t)=>{const n=Qe("PillsInput",Cct,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=N.useRef();return E.jsx(yct,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:E.jsx(Jd,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});MM.displayName="@mantine/core/PillsInput";MM.Field=Eee;function Tct({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(aC(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const Act={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},See=wt((e,t)=>{const n=Qe("MultiSelect",Act,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:_,onOptionSubmit:w,comboboxProps:S,filter:T,limit:A,withScrollArea:k,maxDropdownHeight:I,searchValue:R,defaultSearchValue:F,onSearchChange:O,readOnly:$,disabled:V,onFocus:j,onBlur:G,onPaste:Y,radius:J,rightSection:L,rightSectionWidth:U,rightSectionPointerEvents:W,rightSectionProps:B,leftSection:q,leftSectionWidth:Z,leftSectionPointerEvents:re,leftSectionProps:xe,inputContainer:pe,inputWrapperOrder:Te,withAsterisk:ke,labelProps:it,descriptionProps:Re,errorProps:ut,wrapperProps:Ke,description:Ct,label:gt,error:Ie,maxValues:Ve,searchable:ft,nothingFoundMessage:_t,withCheckIcon:Mt,checkIconPosition:st,hidePickedOptions:X,withErrorStyles:de,name:we,form:ae,id:he,clearable:Ee,clearButtonProps:$e,hiddenInputProps:Be,placeholder:lt,hiddenInputValuesDivider:Je,required:Xt,mod:fn,renderOption:Wt,onRemove:an,onClear:Sn,scrollAreaProps:Mn,...ki}=n,di=ol(he),Li=GDe(m),As=GZ(Li),Br=iee({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Br.resetSelectedOption()}}),{styleProps:ls,rest:{type:ll,autoComplete:Fo,...qa}}=M_(ki),[Nr,Ri]=Ba({value:c,defaultValue:f,finalValue:[],onChange:d}),[hi,Vs]=Ba({value:R,defaultValue:F,finalValue:"",onChange:O}),ri=Gt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ni,resolvedStyles:ve}=nN({props:n,styles:o,classNames:r}),ce=Dt=>{h==null||h(Dt),Dt.key===" "&&!ft&&(Dt.preventDefault(),Br.toggleDropdown()),Dt.key==="Backspace"&&hi.length===0&&Nr.length>0&&(an==null||an(Nr[Nr.length-1]),Ri(Nr.slice(0,Nr.length-1)))},_e=Nr.map((Dt,Ht)=>{var xn,rr;return E.jsx(_R,{withRemoveButton:!$&&!((xn=As[Dt])!=null&&xn.disabled),onRemove:()=>{Ri(Nr.filter(mr=>Dt!==mr)),an==null||an(Dt)},unstyled:a,disabled:V,...ri("pill"),children:((rr=As[Dt])==null?void 0:rr.label)||Dt},`${Dt}-${Ht}`)});N.useEffect(()=>{_&&Br.selectFirstOption()},[_,Nr]);const Ue=Ee&&Nr.length>0&&!V&&!$&&E.jsx(Yr.ClearButton,{size:l,...$e,onClear:()=>{Sn==null||Sn(),Ri([]),Vs("")}}),je=Tct({data:Li,value:Nr});return E.jsxs(E.Fragment,{children:[E.jsxs(Yr,{store:Br,classNames:Ni,styles:ve,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:Dt=>{w==null||w(Dt),Vs(""),Br.updateSelectedOptionIndex("selected"),Nr.includes(As[Dt].value)?(Ri(Nr.filter(Ht=>Ht!==As[Dt].value)),an==null||an(As[Dt].value)):Nr.length<Ve&&Ri([...Nr,As[Dt].value])},...S,children:[E.jsx(Yr.DropdownTarget,{children:E.jsx(MM,{...ls,__staticSelector:"MultiSelect",classNames:Ni,styles:ve,unstyled:a,size:l,className:i,style:s,variant:p,disabled:V,radius:J,rightSection:L||Ue||E.jsx(Yr.Chevron,{size:l,error:Ie,unstyled:a}),rightSectionPointerEvents:W||(Ue?"all":"none"),rightSectionWidth:U,rightSectionProps:B,leftSection:q,leftSectionWidth:Z,leftSectionPointerEvents:re,leftSectionProps:xe,inputContainer:pe,inputWrapperOrder:Te,withAsterisk:ke,labelProps:it,descriptionProps:Re,errorProps:ut,wrapperProps:Ke,description:Ct,label:gt,error:Ie,multiline:!0,withErrorStyles:de,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ue?"all":"none"),multiline:!0},pointer:!ft,onClick:()=>ft?Br.openDropdown():Br.toggleDropdown(),"data-expanded":Br.dropdownOpened||void 0,id:di,required:Xt,mod:fn,children:E.jsxs(_R.Group,{disabled:V,unstyled:a,...ri("pillsList"),children:[_e,E.jsx(Yr.EventsTarget,{autoComplete:Fo,children:E.jsx(MM.Field,{...qa,ref:t,id:di,placeholder:lt,type:!ft&&!lt?"hidden":"visible",...ri("inputField"),unstyled:a,onFocus:Dt=>{j==null||j(Dt),ft&&Br.openDropdown()},onBlur:Dt=>{G==null||G(Dt),Br.closeDropdown(),Vs("")},onKeyDown:ce,value:hi,onChange:Dt=>{Vs(Dt.currentTarget.value),ft&&Br.openDropdown(),_&&Br.selectFirstOption()},disabled:V,readOnly:$||!ft,pointer:!ft})})]})})}),E.jsx(fIe,{data:X?je:Li,hidden:$||V,filter:T,search:hi,limit:A,hiddenWhenEmpty:!ft||!_t||X&&je.length===0&&hi.trim().length===0,withScrollArea:k,maxDropdownHeight:I,filterOptions:ft,value:Nr,checkIconPosition:st,withCheckIcon:Mt,nothingFoundMessage:_t,unstyled:a,labelId:gt?`${di}-label`:void 0,"aria-label":gt?void 0:ki["aria-label"],renderOption:Wt,scrollAreaProps:Mn})]}),E.jsx(Yr.HiddenInput,{name:we,valuesDivider:Je,value:Nr,form:ae,disabled:V,...Be})]})});See.classes={...Jd.classes,...Yr.classes};See.displayName="@mantine/core/MultiSelect";var EIe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const Dct={},Ict=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":qo(r)}}},UL=ya((e,t)=>{const n=Qe("NavLink",Dct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:_,noWrap:w,childrenOffset:S,onKeyDown:T,autoContrast:A,mod:k,...I}=n,R=Gt({name:"NavLink",props:n,classes:EIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ict}),[F,O]=Ba({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,V=j=>{h==null||h(j),$&&(j.preventDefault(),O(!F))};return E.jsxs(E.Fragment,{children:[E.jsxs($f,{...R("root"),component:"a",ref:t,onClick:V,onKeyDown:j=>{T==null||T(j),j.nativeEvent.code==="Space"&&$&&(j.preventDefault(),O(!F))},unstyled:a,mod:[{disabled:m,active:p,expanded:F},k],...I,children:[g&&E.jsx(Fe,{component:"span",...R("section"),mod:{position:"left"},children:g}),E.jsxs(Fe,{...R("body"),mod:{"no-wrap":w},children:[E.jsx(Fe,{component:"span",...R("label"),children:v}),E.jsx(Fe,{component:"span",mod:{active:p},...R("description"),children:b})]}),($||y)&&E.jsx(Fe,{...R("section"),component:"span",mod:{rotate:F&&!_,position:"right"},children:$?y||E.jsx(IL,{...R("chevron")}):y})]}),E.jsx(wL,{in:F,...R("collapse"),children:E.jsx("div",{...R("children"),children:d})})]})});UL.classes=EIe;UL.displayName="@mantine/core/NavLink";var SIe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const kct={withCloseButton:!0},Rct=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Zi(t),"--notification-color":n?Ki(n,e):void 0}}),Cee=wt((e,t)=>{const n=Qe("Notification",kct,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:b,mod:_,...w}=n,S=Gt({name:"Notification",classes:SIe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:b,varsResolver:Rct});return E.jsxs(Fe,{...S("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},_],ref:t,variant:v,...w,role:"alert",children:[c&&!o&&E.jsx("div",{...S("icon"),children:c}),o&&E.jsx(Zc,{size:28,color:i,...S("loader")}),E.jsxs("div",{...S("body"),children:[l&&E.jsx("div",{...S("title"),children:l}),E.jsx(Fe,{...S("description"),mod:{"data-with-title":!!l},children:f})]}),a&&E.jsx(wb,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...S("closeButton")})]})});Cee.classes=SIe;Cee.displayName="@mantine/core/Notification";function CIe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var ER;(function(e){e.event="event",e.props="prop"})(ER||(ER={}));function N1(){}function Nct(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function SR(e){return!!(e||"").match(/\d/)}function gS(e){return e==null}function Pct(e){return typeof e=="number"&&isNaN(e)}function TIe(e){return gS(e)||Pct(e)||typeof e=="number"&&!isFinite(e)}function AIe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Oct(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Fct(e,t,n){var r=Oct(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function Mct(e){var t=N.useRef(e);t.current=e;var n=N.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function Tee(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function $ct(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function DIe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function ame(e,t){return Array(t+1).join(e)}function IIe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+ame("0",Math.abs(o))+i:o>=a?i=i+ame("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function ume(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=Tee(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=DIe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Wx(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var kIe=Nct(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),Lct=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function Bct(e,t,n){return Math.min(Math.max(e,t),n)}function xz(e){return Math.max(e.selectionStart,e.selectionEnd)}function jct(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Uct(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function zct(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function Vct(e,t,n,r,i,s,o){o===void 0&&(o=zct);var a=i.findIndex(function(_){return _}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function lme(e,t,n,r){var i=e.length;if(t=Bct(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function Hct(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(SR(e[n])||SR(e[n-1]));return t}function RIe(e,t,n,r,i,s){s===void 0&&(s=N1);var o=Mct(function(p,m){var g,y;return TIe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?IIe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=N.useState(function(){return o(gS(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;gS(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return N.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function qct(e){return e.replace(/[^0-9]/g,"")}function Wct(e){return e}function Gct(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=Wct);var a=e.removeFormatting;a===void 0&&(a=qct);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=N1);var h=e.onKeyDown;h===void 0&&(h=N1);var p=e.onMouseUp;p===void 0&&(p=N1);var m=e.onFocus;m===void 0&&(m=N1);var g=e.onBlur;g===void 0&&(g=N1);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=Hct);var b=e.isValidInputCharacter;b===void 0&&(b=SR);var _=e.isCharacterSame,w=CIe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=RIe(y,u,!!l,o,a,c),T=S[0],A=T.formattedValue,k=T.numAsString,I=S[1],R=N.useRef(),F=N.useRef({formattedValue:A,numAsString:k}),O=function(Ie,Ve){F.current={formattedValue:Ie.formattedValue,numAsString:Ie.value},I(Ie,Ve)},$=N.useState(!1),V=$[0],j=$[1],G=N.useRef(null),Y=N.useRef({setCaretTimeout:null,focusTimeout:null});N.useEffect(function(){return j(!0),function(){clearTimeout(Y.current.setCaretTimeout),clearTimeout(Y.current.focusTimeout)}},[]);var J=o,L=function(Ie,Ve){var ft=parseFloat(Ve);return{formattedValue:Ie,value:Ve,floatValue:isNaN(ft)?void 0:ft}},U=function(Ie,Ve,ft){Ie.selectionStart===0&&Ie.selectionEnd===Ie.value.length||(Wx(Ie,Ve),Y.current.setCaretTimeout=setTimeout(function(){Ie.value===ft&&Ie.selectionStart!==Ve&&Wx(Ie,Ve)},0))},W=function(Ie,Ve,ft){return lme(Ie,Ve,v(Ie),ft)},B=function(Ie,Ve,ft){var _t=v(Ve),Mt=Vct(Ve,A,Ie,ft,_t,b,_);return Mt=lme(Ve,Mt,_t),Mt},q=function(Ie){var Ve=Ie.formattedValue;Ve===void 0&&(Ve="");var ft=Ie.input,_t=Ie.source,Mt=Ie.event,st=Ie.numAsString,X;if(ft){var de=Ie.inputValue||ft.value,we=xz(ft);ft.value=Ve,X=B(de,Ve,we),X!==void 0&&U(ft,X,Ve)}Ve!==A&&O(L(Ve,st),{event:Mt,source:_t})};N.useEffect(function(){var Ie=F.current,Ve=Ie.formattedValue,ft=Ie.numAsString;(A!==Ve||k!==ft)&&O(L(A,k),{event:void 0,source:ER.props})},[A,k]);var Z=G.current?xz(G.current):void 0,re=typeof window<"u"?N.useLayoutEffect:N.useEffect;re(function(){var Ie=G.current;if(A!==F.current.formattedValue&&Ie){var Ve=B(F.current.formattedValue,A,Z);Ie.value=A,U(Ie,Ve,A)}},[A]);var xe=function(Ie,Ve,ft){var _t=Ve.target,Mt=R.current?Lct(R.current,_t.selectionEnd):kIe(A,Ie),st=Object.assign(Object.assign({},Mt),{lastValue:A}),X=a(Ie,st),de=J(X);if(X=a(de,void 0),f&&!f(L(de,X))){var we=Ve.target,ae=xz(we),he=B(Ie,A,ae);return we.value=A,U(we,he,A),!1}return q({formattedValue:de,numAsString:X,inputValue:Ie,event:Ve,source:ft,input:Ve.target}),!0},pe=function(Ie,Ve){Ve===void 0&&(Ve=0);var ft=Ie.selectionStart,_t=Ie.selectionEnd;R.current={selectionStart:ft,selectionEnd:_t+Ve}},Te=function(Ie){var Ve=Ie.target,ft=Ve.value,_t=xe(ft,Ie,ER.event);_t&&d(Ie),R.current=void 0},ke=function(Ie){var Ve=Ie.target,ft=Ie.key,_t=Ve.selectionStart,Mt=Ve.selectionEnd,st=Ve.value;st===void 0&&(st="");var X;ft==="ArrowLeft"||ft==="Backspace"?X=Math.max(_t-1,0):ft==="ArrowRight"?X=Math.min(_t+1,st.length):ft==="Delete"&&(X=_t);var de=0;ft==="Delete"&&_t===Mt&&(de=1);var we=ft==="ArrowLeft"||ft==="ArrowRight";if(X===void 0||_t!==Mt&&!we){h(Ie),pe(Ve,de);return}var ae=X;if(we){var he=ft==="ArrowLeft"?"left":"right";ae=W(st,X,he),ae!==X&&Ie.preventDefault()}else ft==="Delete"&&!b(st[X])?ae=W(st,X,"right"):ft==="Backspace"&&!b(st[X])&&(ae=W(st,X,"left"));ae!==X&&U(Ve,ae,st),h(Ie),pe(Ve,de)},it=function(Ie){var Ve=Ie.target,ft=function(){var _t=Ve.selectionStart,Mt=Ve.selectionEnd,st=Ve.value;if(st===void 0&&(st=""),_t===Mt){var X=W(st,_t);X!==_t&&U(Ve,X,st)}};ft(),requestAnimationFrame(function(){ft()}),p(Ie),pe(Ve)},Re=function(Ie){Ie.persist&&Ie.persist();var Ve=Ie.target,ft=Ie.currentTarget;G.current=Ve,Y.current.focusTimeout=setTimeout(function(){var _t=Ve.selectionStart,Mt=Ve.selectionEnd,st=Ve.value;st===void 0&&(st="");var X=W(st,_t);X!==_t&&!(_t===0&&Mt===st.length)&&U(Ve,X,st),m(Object.assign(Object.assign({},Ie),{currentTarget:ft}))},0)},ut=function(Ie){G.current=null,clearTimeout(Y.current.focusTimeout),clearTimeout(Y.current.setCaretTimeout),g(Ie)},Ke=V&&jct()?"numeric":void 0,Ct=Object.assign({inputMode:Ke},w,{type:t,value:A,onChange:Te,onKeyDown:ke,onMouseUp:it,onFocus:Re,onBlur:ut});if(n==="text")return i?yi.createElement(yi.Fragment,null,i(A,w)||null):yi.createElement("span",Object.assign({},w,{ref:s}),A);if(r){var gt=r;return yi.createElement(gt,Object.assign({},Ct,{ref:s}))}return yi.createElement("input",Object.assign({},Ct,{ref:s}))}function cme(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=zL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=Tee(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=DIe(p,n,!!r)),l&&(h=Fct(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function zL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function Yct(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function Kct(e,t){return new RegExp("(^-)|[0-9]|"+AIe(e),"g")}function Xct(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function Qct(e,t,n){var r;t===void 0&&(t=Uct(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=zL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(SR(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(G,Y,J){var L=!1,U=!1;s.startsWith("-")?L=!1:G.startsWith("--")?(L=!1,U=!0):o.startsWith("-")&&G.length===o.length?L=!1:G[0]==="-"&&(L=!0);var W=L?1:0;return U&&(W=2),W&&(G=G.substring(W),Y-=W,J-=W),{value:G,start:Y,end:J,hasNegation:L}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var _=y(t.lastValue,u.start,u.end),w=_.start,S=_.end,T=_.value,A=e.substring(c,f);e.length&&T.length&&(w>T.length-o.length||S<s.length)&&!(A&&o.startsWith(A))&&(e=T);var k=0;e.startsWith(s)?k+=s.length:c<s.length&&(k=c),e=e.substring(k),f-=k;var I=e.length,R=e.length-o.length;e.endsWith(o)?I=R:(f>R||f>e.length-o.length)&&(I=f),e=e.substring(0,I),e=Yct(b?"-"+e:e,i),e=(e.match(Kct(p))||[]).join("");var F=e.indexOf(p);e=e.replace(new RegExp(AIe(p),"g"),function(G,Y){return Y===F?".":""});var O=Tee(e,i),$=O.beforeDecimal,V=O.afterDecimal,j=O.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(V)&&(e=j?"-":""),e}function Jct(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function Zct(e){var t=zL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function eft(e){e=Zct(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=N1);var s=e.onBlur;s===void 0&&(s=N1);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=CIe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=zL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(j){return cme(j,e)},b=function(j,G){return Qct(j,G,e)},_=gS(f)?c:f,w=d??Xct(_,l,t);gS(f)?gS(c)||(w=w||typeof c=="number"):w=w||typeof f=="number";var S=function(j){return TIe(j)?j:(typeof j=="number"&&(j=IIe(j)),w&&typeof a=="number"?ume(j,a,!!u):j)},T=RIe(S(f),S(c),!!w,v,b,h),A=T[0],k=A.numAsString,I=A.formattedValue,R=T[1],F=function(j){var G=j.target,Y=j.key,J=G.selectionStart,L=G.selectionEnd,U=G.value;if(U===void 0&&(U=""),(Y==="Backspace"||Y==="Delete")&&L<l.length){j.preventDefault();return}if(J!==L){i(j);return}Y==="Backspace"&&U[0]==="-"&&J===l.length+1&&n&&Wx(G,1),a&&u&&(Y==="Backspace"&&U[J-1]===g?(Wx(G,J-1),j.preventDefault()):Y==="Delete"&&U[J]===g&&j.preventDefault()),y!=null&&y.includes(Y)&&U[J]===g&&Wx(G,J+1);var W=o===!0?",":o;Y==="Backspace"&&U[J-1]===W&&Wx(G,J-1),Y==="Delete"&&U[J]===W&&Wx(G,J+1),i(j)},O=function(j){var G=k;if(G.match(/\d/g)||(G=""),r||(G=$ct(G)),u&&a&&(G=ume(G,a,u)),G!==k){var Y=cme(G,e);R({formattedValue:Y,value:G,floatValue:parseFloat(G)},{event:j,source:ER.event})}s(j)},$=function(j){return j===g?!0:SR(j)},V=function(j){var G=j.currentValue,Y=j.lastValue,J=j.formattedValue,L=j.currentValueIndex,U=j.formattedValueIndex,W=G[L],B=J[U],q=kIe(Y,G),Z=q.to;return L>=Z.start&&L<Z.end&&y&&y.includes(W)&&B===g?!0:W===B};return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:V,onValueChange:R,format:v,removeFormatting:b,getCaretBoundary:function(j){return Jct(j,e)},onKeyDown:F,onBlur:O})}function tft(e){var t=eft(e);return yi.createElement(Gct,Object.assign({},t))}function fme({direction:e,style:t,...n}){return E.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:E.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var gG={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const nft=/^(0\.0*|-0(\.0*)?)$/,rft=/^-?0\d+(\.\d+)?\.?$/;function ift(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function dme(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const sft={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},oft=(e,{size:t})=>({controls:{"--ni-chevron-size":ur(t,"ni-chevron-size")}}),Aee=wt((e,t)=>{const n=Qe("NumberInput",sft,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:_,decimalScale:w,onKeyDown:S,onKeyDownCapture:T,handlersRef:A,startValue:k,disabled:I,rightSectionPointerEvents:R,allowNegative:F,readOnly:O,size:$,rightSectionWidth:V,stepHoldInterval:j,stepHoldDelay:G,allowLeadingZeros:Y,withKeyboardEvents:J,trimLeadingZeroesOnBlur:L,...U}=n,W=Gt({name:"NumberInput",classes:gG,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:oft}),{resolvedClassNames:B,resolvedStyles:q}=nN({classNames:i,styles:s,props:n}),[Z,re]=Ba({value:c,defaultValue:f,onChange:u}),xe=G!==void 0&&j!==void 0,pe=N.useRef(null),Te=N.useRef(null),ke=N.useRef(0),it=(X,de)=>{de.source==="event"&&re(ift(X.floatValue)&&!nft.test(X.value)&&!(Y&&rft.test(X.value))?X.floatValue:X.value),l==null||l(X,de)},Re=X=>{const de=String(X).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return de?Math.max(0,(de[1]?de[1].length:0)-(de[2]?+de[2]:0)):0},ut=X=>{pe.current&&typeof X<"u"&&pe.current.setSelectionRange(X,X)},Ke=N.useRef();Ke.current=()=>{let X;const de=Re(Z),we=Re(p),ae=Math.max(de,we),he=10**ae;if(typeof Z!="number"||Number.isNaN(Z))X=bg(k,h,d);else if(d!==void 0){const $e=(Math.round(Z*he)+Math.round(p*he))/he;X=$e<=d?$e:d}else X=(Math.round(Z*he)+Math.round(p*he))/he;const Ee=X.toFixed(ae);re(parseFloat(Ee)),l==null||l({floatValue:parseFloat(Ee),formattedValue:Ee,value:Ee},{source:"increment"}),setTimeout(()=>{var $e;return ut(($e=pe.current)==null?void 0:$e.value.length)},0)};const Ct=N.useRef();Ct.current=()=>{let X;const de=h!==void 0?h:F?Number.MIN_SAFE_INTEGER:0,we=Re(Z),ae=Re(p),he=Math.max(we,ae),Ee=10**he;if(typeof Z!="number"||Number.isNaN(Z))X=bg(k,de,d);else{const Be=(Math.round(Z*Ee)-Math.round(p*Ee))/Ee;X=de!==void 0&&Be<de?de:Be}const $e=X.toFixed(he);re(parseFloat($e)),l==null||l({floatValue:parseFloat($e),formattedValue:$e,value:$e},{source:"decrement"}),setTimeout(()=>{var Be;return ut((Be=pe.current)==null?void 0:Be.value.length)},0)};const gt=X=>{S==null||S(X),!(O||!J)&&(X.key==="ArrowUp"&&(X.preventDefault(),Ke.current()),X.key==="ArrowDown"&&(X.preventDefault(),Ct.current()))},Ie=X=>{if(T==null||T(X),X.key==="Backspace"){const de=pe.current;de.selectionStart===0&&de.selectionStart===de.selectionEnd&&(X.preventDefault(),window.setTimeout(()=>ut(0),0))}};sZ(A,{increment:Ke.current,decrement:Ct.current});const Ve=X=>{X?Ke.current():Ct.current(),ke.current+=1},ft=X=>{if(Ve(X),xe){const de=typeof j=="number"?j:j(ke.current);Te.current=window.setTimeout(()=>ft(X),de)}},_t=(X,de)=>{var we;X.preventDefault(),(we=pe.current)==null||we.focus(),Ve(de),xe&&(Te.current=window.setTimeout(()=>ft(de),G))},Mt=()=>{Te.current&&window.clearTimeout(Te.current),Te.current=null,ke.current=0},st=E.jsxs("div",{...W("controls"),children:[E.jsx($f,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof Z=="number"&&d!==void 0&&Z>=d,mod:{direction:"up"},onMouseDown:X=>X.preventDefault(),onPointerDown:X=>{_t(X,!0)},onPointerUp:Mt,onPointerLeave:Mt,children:E.jsx(fme,{direction:"up"})}),E.jsx($f,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof Z=="number"&&h!==void 0&&Z<=h,mod:{direction:"down"},onMouseDown:X=>X.preventDefault(),onPointerDown:X=>{_t(X,!1)},onPointerUp:Mt,onPointerLeave:Mt,children:E.jsx(fme,{direction:"down"})})]});return E.jsx(Jd,{component:tft,allowNegative:F,className:Ao(gG.root,r),size:$,...U,readOnly:O,disabled:I,value:Z,getInputRef:Ro(t,pe),onValueChange:it,rightSection:m||O?g:g||st,classNames:B,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:_?w:0,onKeyDown:gt,onKeyDownCapture:Ie,rightSectionPointerEvents:R??(I?"none":void 0),rightSectionWidth:V??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:Y,onBlur:X=>{if(b==null||b(X),v==="blur"&&typeof Z=="number"&&bg(Z,h,d)!==Z&&re(bg(Z,h,d)),L&&typeof Z=="string"){const de=Z.replace(/^0+/,""),we=parseFloat(de);re(Number.isNaN(we)?de:we)}},isAllowed:X=>v==="strict"?y?y(X)&&dme(X.floatValue,h,d):dme(X.floatValue,h,d):y?y(X):!0})});Aee.classes={...Jd.classes,...gG};Aee.displayName="@mantine/core/NumberInput";const[aft,NIe]=gu("Progress.Root component was not found in tree");var cN={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const uft={},Dee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ProgressLabel",uft,e),u=NIe();return E.jsx(Fe,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});Dee.classes=cN;Dee.displayName="@mantine/core/ProgressLabel";const lft={},cft=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":ur(t,"progress-size"),"--progress-radius":n===void 0?void 0:Zi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),VL=wt((e,t)=>{const n=Qe("ProgressRoot",lft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Gt({name:"Progress",classes:cN,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cft});return E.jsx(aft,{value:{getStyles:d,autoContrast:l},children:E.jsx(Fe,{ref:t,...d("root"),...f})})});VL.classes=cN;VL.displayName="@mantine/core/ProgressRoot";const fft={withAria:!0},HL=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Qe("ProgressSection",fft,e),p=NIe(),m=No(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return E.jsx(Fe,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Ki(l,m),"--progress-label-color":ET(p.autoContrast,m)?xb({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});HL.classes=cN;HL.displayName="@mantine/core/ProgressSection";const dft={},OT=wt((e,t)=>{const n=Qe("Progress",dft,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=nN({classNames:i,styles:s,props:n});return E.jsx(VL,{ref:t,classNames:d,styles:h,vars:o,...f,children:E.jsx(HL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});OT.classes=cN;OT.displayName="@mantine/core/Progress";OT.Section=HL;OT.Root=VL;OT.Label=Dee;const[hft,PIe]=_T(),[pft,mft]=_T();var OIe={card:"m_9dc8ae12"};const gft={withBorder:!0},yft=(e,{radius:t})=>({card:{"--card-radius":Zi(t)}}),Iee=wt((e,t)=>{const n=Qe("RadioCard",gft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=Gt({name:"RadioCard",classes:OIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yft,rootSelector:"card"}),{dir:v}=wy(),b=PIe(),_=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,w=p||(b==null?void 0:b.name),S=T=>{if(m==null||m(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${w||"__mantine"}"]`)),k=A.findIndex(F=>F===T.target),I=k+1>=A.length?0:k+1,R=k-1<0?A.length-1:k-1;T.nativeEvent.code==="ArrowDown"&&(A[I].focus(),A[I].click()),T.nativeEvent.code==="ArrowUp"&&(A[R].focus(),A[R].click()),T.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?R:I].focus(),A[v==="ltr"?R:I].click()),T.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?I:R].focus(),A[v==="ltr"?I:R].click())}};return E.jsx(pft,{value:{checked:_},children:E.jsx($f,{ref:t,mod:[{"with-border":f,checked:_},c],...y("card"),...g,role:"radio","aria-checked":_,name:w,onClick:T=>{h==null||h(T),b==null||b.onChange(d||"")},onKeyDown:S})})});Iee.displayName="@mantine/core/RadioCard";Iee.classes=OIe;const vft={},kee=wt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Qe("RadioGroup",vft,e),f=ol(u),[d,h]=Ba({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return E.jsx(hft,{value:{value:d,onChange:p,size:s,name:f},children:E.jsx(mo.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:E.jsx(oee,{role:"radiogroup",children:a})})})});kee.classes=mo.Wrapper.classes;kee.displayName="@mantine/core/RadioGroup";function FIe({size:e,style:t,...n}){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:ze(e),height:ze(e),...t},"aria-hidden":!0,...n,children:E.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var MIe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const bft={icon:FIe},xft=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=f0({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":ur(r,"radio-size"),"--radio-radius":t===void 0?void 0:Zi(t),"--radio-color":s==="outline"?u:Ki(n,e),"--radio-icon-size":ur(r,"radio-icon-size"),"--radio-icon-color":i?Ki(i,e):ET(o,e)?xb({color:n,theme:e,autoContrast:o}):void 0}}},Ree=wt((e,t)=>{const n=Qe("RadioIndicator",bft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,_=Gt({name:"RadioIndicator",classes:MIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xft,rootSelector:"indicator"}),w=mft(),S=typeof p=="boolean"?p:(w==null?void 0:w.checked)||!1;return E.jsx(Fe,{ref:t,..._("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:E.jsx(b,{..._("icon")})})});Ree.displayName="@mantine/core/RadioIndicator";Ree.classes=MIe;var $Ie={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const wft={labelPosition:"right"},_ft=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=f0({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":ur(t,"radio-size"),"--radio-radius":n===void 0?void 0:Zi(n),"--radio-color":s==="outline"?u:Ki(r,e),"--radio-icon-color":i?Ki(i,e):ET(o,e)?xb({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":ur(t,"radio-icon-size")}}},Zg=wt((e,t)=>{const n=Qe("Radio",wft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:_=FIe,rootRef:w,iconColor:S,onChange:T,mod:A,...k}=n,I=Gt({name:"Radio",classes:$Ie,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_ft}),R=PIe(),F=(R==null?void 0:R.size)??c,O=n.size?c:F,{styleProps:$,rest:V}=M_(k),j=ol(l),G=R?{checked:R.value===V.value,name:V.name??R.name,onChange:Y=>{R.onChange(Y),T==null||T(Y)}}:{};return E.jsx(kL,{...I("root"),__staticSelector:"Radio",__stylesApiProps:n,id:j,size:O,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":G.checked||void 0,variant:y,ref:w,mod:A,...$,...b,children:E.jsxs(Fe,{...I("inner"),mod:{"label-position":d},children:[E.jsx(Fe,{...I("radio",{focusable:!0,variant:y}),onChange:T,...V,...G,component:"input",mod:{error:!!p},ref:t,id:j,disabled:v,type:"radio"}),E.jsx(_,{...I("icon"),"aria-hidden":!0})]})})});Zg.classes=$Ie;Zg.displayName="@mantine/core/Radio";Zg.Group=kee;Zg.Card=Iee;Zg.Indicator=Ree;const Eft={duration:100,transition:"fade"};function Sft(e,t){return{...Eft,...t,...e}}function Cft({offset:e,position:t}){const[n,r]=N.useState(!1),i=N.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=kZ({placement:t,middleware:[TZ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=N.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return N.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Ng(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var qL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Tft={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Ep("popover")},Aft=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Zi(t),"--tooltip-bg":n?Ki(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Nee=wt((e,t)=>{const n=Qe("TooltipFloating",Tft,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:_,portalProps:w,...S}=n,T=No(),A=Gt({name:"TooltipFloating",props:n,classes:qL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:_,varsResolver:Aft}),{handleMouseMove:k,x:I,y:R,opened:F,boundaryRef:O,floating:$,setOpened:V}=Cft({offset:p,position:m});if(!vb(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const j=Ro(O,r.ref,t),G=J=>{var L,U;(U=(L=r.props).onMouseEnter)==null||U.call(L,J),k(J),V(!0)},Y=J=>{var L,U;(U=(L=r.props).onMouseLeave)==null||U.call(L,J),V(!1)};return E.jsxs(E.Fragment,{children:[E.jsx(AT,{...w,withinPortal:s,children:E.jsx(Fe,{...S,...A("tooltip",{style:{...dZ(o,T),zIndex:y,display:!v&&F?"block":"none",top:(R&&Math.round(R))??"",left:(I&&Math.round(I))??""}}),variant:b,ref:$,mod:{multiline:g},children:h})}),N.cloneElement(r,{...r.props,[i]:j,onMouseEnter:G,onMouseLeave:Y})]})});Nee.classes=qL;Nee.displayName="@mantine/core/TooltipFloating";const LIe=N.createContext(!1),Dft=LIe.Provider,Ift=()=>N.useContext(LIe),kft={openDelay:0,closeDelay:0};function BIe(e){const{openDelay:t,closeDelay:n,children:r}=Qe("TooltipGroup",kft,e);return E.jsx(Dft,{value:!0,children:E.jsx($ot,{delay:{open:t,close:n},children:r})})}BIe.displayName="@mantine/core/TooltipGroup";function Rft(e){var S,T,A;const[t,n]=N.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Ift(),o=ol(),{delay:a,currentId:u,setCurrentId:l}=_De(),c=N.useCallback(k=>{n(k),k&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=kZ({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[yDe(e.offset),TZ({padding:8}),dG(),vDe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[hG()]:[]]}),{getReferenceProps:b,getFloatingProps:_}=Hot([Mot(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((T=e.events)!=null&&T.touch)}),Vot(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),Wot(h,{role:"tooltip"}),Uot(h,{enabled:typeof e.opened>"u"}),Lot(h,{id:o})]);IDe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),zm(()=>{var k;(k=e.onPositionChange)==null||k.call(e,g)},[g]);const w=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:_,getReferenceProps:b,isGroupPhase:w,opened:i,placement:g}}const hme={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Ep("popover"),positionDependencies:[]},Nft=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Zi(t),"--tooltip-bg":n?Ki(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),xs=wt((e,t)=>{const n=Qe("Tooltip",hme,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:_,arrowOffset:w,arrowRadius:S,arrowPosition:T,offset:A,transitionProps:k,multiline:I,events:R,zIndex:F,disabled:O,positionDependencies:$,onClick:V,onMouseEnter:j,onMouseLeave:G,inline:Y,variant:J,keepMounted:L,vars:U,portalProps:W,mod:B,floatingStrategy:q,...Z}=Qe("Tooltip",hme,n),{dir:re}=wy(),xe=N.useRef(null),pe=Rft({position:EDe(re,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:xe,arrowOffset:w,offset:typeof A=="number"?A+(b?_/2:0):A,positionDependencies:[...$,r],inline:Y,strategy:q}),Te=Gt({name:"Tooltip",props:n,classes:qL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:U,varsResolver:Nft});if(!vb(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ke=Ro(pe.reference,r.ref,t),it=Sft(k,{duration:100,transition:"fade"});return E.jsxs(E.Fragment,{children:[E.jsx(AT,{...W,withinPortal:f,children:E.jsx(Ey,{...it,keepMounted:L,mounted:!O&&!!pe.opened,duration:pe.isGroupPhase?10:it.duration,children:Re=>E.jsxs(Fe,{...Z,variant:J,mod:[{multiline:I},B],...pe.getFloatingProps({ref:pe.floating,className:Te("tooltip").className,style:{...Te("tooltip").style,...Re,zIndex:F,top:pe.y??0,left:pe.x??0}}),children:[o,E.jsx(RZ,{ref:xe,arrowX:pe.arrowX,arrowY:pe.arrowY,visible:b,position:pe.placement,arrowSize:_,arrowOffset:w,arrowRadius:S,arrowPosition:T,...Te("arrow")})]})})}),N.cloneElement(r,pe.getReferenceProps({onClick:V,onMouseEnter:j,onMouseLeave:G,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ke,className:Ao(v,r.props.className),...r.props}))]})});xs.classes=qL;xs.displayName="@mantine/core/Tooltip";xs.Floating=Nee;xs.Group=BIe;var jIe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const Pft={withItemsBorders:!0},Oft=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Zi(t),"--sc-color":n?Ki(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":ur(i,"sc-padding"),"--sc-font-size":Pl(i)}}),WL=wt((e,t)=>{var re,xe;const n=Qe("SegmentedControl",Pft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:_,transitionDuration:w,transitionTimingFunction:S,variant:T,autoContrast:A,withItemsBorders:k,mod:I,...R}=n,F=Gt({name:"SegmentedControl",props:n,classes:jIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Oft}),O=No(),$=l.map(pe=>typeof pe=="string"?{label:pe,value:pe}:pe),V=qrt(),[j,G]=N.useState(null),[Y,J]=N.useState({}),L=(pe,Te)=>{Y[Te]=pe,J(Y)},[U,W]=Ba({value:c,defaultValue:f,finalValue:Array.isArray(l)?((re=$.find(pe=>!pe.disabled))==null?void 0:re.value)??((xe=l[0])==null?void 0:xe.value)??null:null,onChange:d}),B=ol(p),q=$.map(pe=>N.createElement(Fe,{...F("control"),mod:{active:U===pe.value,orientation:v},key:pe.value},N.createElement("input",{...F("input"),disabled:m||pe.disabled,type:"radio",name:B,value:pe.value,id:`${B}-${pe.value}`,checked:U===pe.value,onChange:()=>!g&&W(pe.value),"data-focus-ring":O.focusRing,key:`${pe.value}-input`}),N.createElement(Fe,{component:"label",...F("label"),mod:{active:U===pe.value&&!(m||pe.disabled),disabled:m||pe.disabled,"read-only":g},htmlFor:`${B}-${pe.value}`,ref:Te=>L(Te,pe.value),__vars:{"--sc-label-color":_!==void 0?xb({color:_,theme:O,autoContrast:A}):void 0},key:`${pe.value}-label`},E.jsx("span",{...F("innerLabel"),children:pe.label})))),Z=Ro(t,pe=>G(pe));return l.length===0?null:E.jsxs(Fe,{...F("root"),variant:T,size:h,ref:Z,mod:[{"full-width":y,orientation:v,initialized:V,"with-items-borders":k},I],...R,role:"radiogroup",children:[typeof U=="string"&&E.jsx(MZ,{target:Y[U],parent:j,component:"span",transitionDuration:"var(--sc-transition-duration)",...F("indicator")}),q]})});WL.classes=jIe;WL.displayName="@mantine/core/SegmentedControl";const Fft={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},FT=wt((e,t)=>{const n=Qe("Select",Fft,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:_,readOnly:w,disabled:S,filter:T,limit:A,withScrollArea:k,maxDropdownHeight:I,size:R,searchable:F,rightSection:O,checkIconPosition:$,withCheckIcon:V,nothingFoundMessage:j,name:G,form:Y,searchValue:J,defaultSearchValue:L,onSearchChange:U,allowDeselect:W,error:B,rightSectionPointerEvents:q,id:Z,clearable:re,clearButtonProps:xe,hiddenInputProps:pe,renderOption:Te,onClear:ke,autoComplete:it,scrollAreaProps:Re,...ut}=n,Ke=N.useMemo(()=>GDe(m),[m]),Ct=N.useMemo(()=>GZ(Ke),[Ke]),gt=ol(Z),[Ie,Ve,ft]=Ba({value:g,defaultValue:y,finalValue:null,onChange:p}),_t=typeof Ie=="string"?Ct[Ie]:void 0,[Mt,st]=Ba({value:J,defaultValue:L,finalValue:_t?_t.label:"",onChange:U}),X=iee({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),X.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),X.resetSelectedOption()}}),{resolvedClassNames:de,resolvedStyles:we}=nN({props:n,styles:i,classNames:r});N.useEffect(()=>{v&&X.selectFirstOption()},[v,Ie]),N.useEffect(()=>{g===null&&st(""),typeof g=="string"&&_t&&st(_t.label)},[g,_t]);const ae=re&&!!Ie&&!S&&!w&&E.jsx(Yr.ClearButton,{size:R,...xe,onClear:()=>{Ve(null,null),st(""),ke==null||ke()}});return E.jsxs(E.Fragment,{children:[E.jsxs(Yr,{store:X,__staticSelector:"Select",classNames:de,styles:we,unstyled:s,readOnly:w,onOptionSubmit:he=>{b==null||b(he);const Ee=W&&Ct[he].value===Ie?null:Ct[he],$e=Ee?Ee.value:null;Ve($e,Ee),!ft&&st(typeof $e=="string"&&(Ee==null?void 0:Ee.label)||""),X.closeDropdown()},size:R,..._,children:[E.jsx(Yr.Target,{targetType:F?"input":"button",autoComplete:it,children:E.jsx(Jd,{id:gt,ref:t,rightSection:O||ae||E.jsx(Yr.Chevron,{size:R,error:B,unstyled:s}),rightSectionPointerEvents:q||(ae?"all":"none"),...ut,size:R,__staticSelector:"Select",disabled:S,readOnly:w||!F,value:Mt,onChange:he=>{st(he.currentTarget.value),X.openDropdown(),v&&X.selectFirstOption()},onFocus:he=>{F&&X.openDropdown(),f==null||f(he)},onBlur:he=>{var Ee;F&&X.closeDropdown(),st(Ie!=null&&((Ee=Ct[Ie])==null?void 0:Ee.label)||""),d==null||d(he)},onClick:he=>{F?X.openDropdown():X.toggleDropdown(),h==null||h(he)},classNames:de,styles:we,unstyled:s,pointer:!F,error:B})}),E.jsx(fIe,{data:Ke,hidden:w||S,filter:T,search:Mt,limit:A,hiddenWhenEmpty:!F||!j,withScrollArea:k,maxDropdownHeight:I,filterOptions:F&&(_t==null?void 0:_t.label)!==Mt,value:Ie,checkIconPosition:$,withCheckIcon:V,nothingFoundMessage:j,unstyled:s,labelId:ut.label?`${gt}-label`:void 0,"aria-label":ut.label?void 0:ut["aria-label"],renderOption:Te,scrollAreaProps:Re})]}),E.jsx(Yr.HiddenInput,{value:Ie,name:G,form:Y,disabled:S,...pe})]})});FT.classes={...Jd.classes,...Yr.classes};FT.displayName="@mantine/core/Select";function Mft({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=No(),s=t===void 0?e:t,o=yb({"--sg-spacing-x":qo(Wh(e)),"--sg-spacing-y":qo(Wh(s)),"--sg-cols":(c=Wh(n))==null?void 0:c.toString()}),a=us(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=qo(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=qo(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=vR(us(a),i).filter(f=>us(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return E.jsx(F_,{styles:o,media:l,selector:r})}function wz(e){return typeof e=="object"&&e!==null?us(e):[]}function $ft(e){return e.sort((t,n)=>yR(t)-yR(n))}function Lft({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...wz(e),...wz(t),...wz(n)]));return $ft(r)}function Bft({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=yb({"--sg-spacing-x":qo(Wh(e)),"--sg-spacing-y":qo(Wh(i)),"--sg-cols":(l=Wh(n))==null?void 0:l.toString()}),o=Lft({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=qo(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=qo(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return E.jsx(F_,{styles:s,container:u,selector:r})}var UIe={container:"m_925c2d2c",root:"m_2415a157"};const jft={cols:1,spacing:"md",type:"media"},Pee=wt((e,t)=>{const n=Qe("SimpleGrid",jft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Gt({name:"SimpleGrid",classes:UIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=rN();return d==="container"?E.jsxs(E.Fragment,{children:[E.jsx(Bft,{...n,selector:`.${m}`}),E.jsx("div",{...p("container"),children:E.jsx(Fe,{ref:t,...p("root",{className:m}),...h})})]}):E.jsxs(E.Fragment,{children:[E.jsx(Mft,{...n,selector:`.${m}`}),E.jsx(Fe,{ref:t,...p("root",{className:m}),...h})]})});Pee.classes=UIe;Pee.displayName="@mantine/core/SimpleGrid";const[zIe,GL]=gu("SliderProvider was not found in tree"),Oee=N.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=GL();return E.jsx(Fe,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});Oee.displayName="@mantine/core/SliderRoot";const $M=N.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=GL(),[b,_]=N.useState(!1),w=l||s||b||h&&p;return E.jsxs(Fe,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{_(!0),typeof f=="function"&&f()},onBlur:()=>{_(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,E.jsx(Ey,{mounted:i!=null&&!!w,transition:"fade",duration:0,...u,children:S=>E.jsx("div",{...v("label",{style:S}),children:i})})]})});$M.displayName="@mantine/core/SliderThumb";function LM({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Uft({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function VIe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=GL();if(!e)return null;const u=e.map((l,c)=>N.createElement(Fe,{...a("markWrapper"),__vars:{"--mark-offset":`${LM({value:l.value,min:t,max:n})}%`},key:c},E.jsx(Fe,{...a("mark"),mod:{filled:Uft({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&E.jsx("div",{...a("markLabel"),children:l.label})));return E.jsx("div",{children:u})}VIe.displayName="@mantine/core/SliderMarks";function Fee({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=GL();return E.jsx(E.Fragment,{children:E.jsx(Fe,{...u("trackContainer"),mod:{disabled:r},...o,children:E.jsxs(Fe,{...u("track"),mod:{inverted:s,disabled:r},children:[E.jsx(Fe,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,E.jsx(VIe,{...a,offset:i,disabled:r,inverted:s})]})})})}Fee.displayName="@mantine/core/SliderTrack";function yG({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function wd(e,t){return parseFloat(e.toFixed(t))}function HIe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var YL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const zft={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},Vft=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":ur(t,"slider-size"),"--slider-color":n?Ki(n,e):void 0,"--slider-radius":i===void 0?void 0:Zi(i),"--slider-thumb-size":r!==void 0?ze(r):"calc(var(--slider-size) * 2)"}}),fN=wt((e,t)=>{const n=Qe("Slider",zft,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:_,thumbChildren:w,disabled:S,unstyled:T,scale:A,inverted:k,className:I,style:R,vars:F,hiddenInputProps:O,...$}=n,V=Gt({name:"Slider",props:n,classes:YL,classNames:r,className:I,styles:i,style:R,vars:F,varsResolver:Vft,unstyled:T}),{dir:j}=wy(),[G,Y]=N.useState(!1),[J,L]=Ba({value:typeof s=="number"?bg(s,l,c):s,defaultValue:typeof h=="number"?bg(h,l,c):h,finalValue:bg(0,l,c),onChange:o}),U=N.useRef(J),W=N.useRef(),B=N.useRef(),q=LM({value:J,min:l,max:c}),Z=A(J),re=typeof g=="function"?g(Z):g,xe=d??HIe(f),pe=N.useCallback(({x:Re})=>{if(!S){const ut=yG({value:Re,min:l,max:c,step:f,precision:xe});L(ut),U.current=ut}},[S,l,c,f,xe,L]),{ref:Te,active:ke}=FAe(pe,{onScrubEnd:()=>a==null?void 0:a(U.current)},j),it=Re=>{var ut,Ke,Ct,gt,Ie,Ve;if(!S)switch(Re.key){case"ArrowUp":{Re.preventDefault(),(ut=B.current)==null||ut.focus();const ft=wd(Math.min(Math.max(J+f,l),c),xe);L(ft),a==null||a(ft);break}case"ArrowRight":{Re.preventDefault(),(Ke=B.current)==null||Ke.focus();const ft=wd(Math.min(Math.max(j==="rtl"?J-f:J+f,l),c),xe);L(ft),a==null||a(ft);break}case"ArrowDown":{Re.preventDefault(),(Ct=B.current)==null||Ct.focus();const ft=wd(Math.min(Math.max(J-f,l),c),xe);L(ft),a==null||a(ft);break}case"ArrowLeft":{Re.preventDefault(),(gt=B.current)==null||gt.focus();const ft=wd(Math.min(Math.max(j==="rtl"?J+f:J-f,l),c),xe);L(ft),a==null||a(ft);break}case"Home":{Re.preventDefault(),(Ie=B.current)==null||Ie.focus(),L(l),a==null||a(l);break}case"End":{Re.preventDefault(),(Ve=B.current)==null||Ve.focus(),L(c),a==null||a(c);break}}};return E.jsx(zIe,{value:{getStyles:V},children:E.jsxs(Oee,{...$,ref:Ro(t,W),onKeyDownCapture:it,onMouseDownCapture:()=>{var Re;return(Re=W.current)==null?void 0:Re.focus()},size:u,disabled:S,children:[E.jsx(Fee,{inverted:k,offset:0,filled:q,marks:m,min:l,max:c,value:Z,disabled:S,containerProps:{ref:Te,onMouseEnter:_?()=>Y(!0):void 0,onMouseLeave:_?()=>Y(!1):void 0},children:E.jsx($M,{max:c,min:l,value:Z,position:q,dragging:ke,label:re,ref:B,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:_,isHovered:G,disabled:S,children:w})}),E.jsx("input",{type:"hidden",name:p,value:Z,...O})]})})});fN.classes=YL;fN.displayName="@mantine/core/Slider";function Hft(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const qft=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":ur(t,"slider-size"),"--slider-color":n?Ki(n,e):void 0,"--slider-radius":i===void 0?void 0:Zi(i),"--slider-thumb-size":r!==void 0?ze(r):"calc(var(--slider-size) * 2)"}}),Wft={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},lC=wt((e,t)=>{const n=Qe("RangeSlider",Wft,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:_,thumbFromLabel:w,thumbToLabel:S,showLabelOnHover:T,thumbChildren:A,disabled:k,unstyled:I,scale:R,inverted:F,className:O,style:$,vars:V,hiddenInputProps:j,...G}=n,Y=Gt({name:"Slider",props:n,classes:YL,classNames:r,className:O,styles:i,style:$,vars:V,varsResolver:qft,unstyled:I}),{dir:J}=wy(),[L,U]=N.useState(-1),[W,B]=N.useState(!1),[q,Z]=Ba({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),re=N.useRef(q),xe=N.useRef([]),pe=N.useRef(void 0),Te=[LM({value:q[0],min:l,max:c}),LM({value:q[1],min:l,max:c})],ke=p??HIe(h),it=st=>{Z(st),re.current=st};N.useEffect(()=>{Array.isArray(s)&&(re.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const Re=(st,X,de)=>{const we=[...re.current];we[X]=st,X===0&&(st>we[1]-(f-1e-9)&&(we[1]=Math.min(st+f,c)),st>(c-(f-1e-9)||l)&&(we[X]=re.current[X]),we[1]-st>d&&(we[1]=st+d)),X===1&&(st<we[0]+f&&(we[0]=Math.max(st-f,l)),st<we[0]+f&&(we[X]=re.current[X]),st-we[0]>d&&(we[0]=st-d)),we[0]=wd(we[0],ke),we[1]=wd(we[1],ke),it(we),de&&(a==null||a(re.current))},ut=st=>{if(!k){const X=yG({value:st,min:l,max:c,step:h,precision:ke});Re(X,pe.current,!1)}},{ref:Ke,active:Ct}=FAe(({x:st})=>ut(st),{onScrubEnd:()=>a==null?void 0:a(re.current)},J);function gt(st){pe.current=st}const Ie=st=>{Ke.current.focus();const X=Ke.current.getBoundingClientRect(),de=Hft(st.nativeEvent),we=yG({value:de-X.left,max:c,min:l,step:h,containerWidth:X.width}),ae=Math.abs(q[0]-we)>Math.abs(q[1]-we)?1:0,he=J==="ltr"?ae:ae===1?0:1;pe.current=he},Ve=()=>L!==1&&L!==0?(U(0),0):L,ft=st=>{if(!k)switch(st.key){case"ArrowUp":{st.preventDefault();const X=Ve();xe.current[X].focus(),Re(wd(Math.min(Math.max(re.current[X]+h,l),c),ke),X,!0);break}case"ArrowRight":{st.preventDefault();const X=Ve();xe.current[X].focus(),Re(wd(Math.min(Math.max(J==="rtl"?re.current[X]-h:re.current[X]+h,l),c),ke),X,!0);break}case"ArrowDown":{st.preventDefault();const X=Ve();xe.current[X].focus(),Re(wd(Math.min(Math.max(re.current[X]-h,l),c),ke),X,!0);break}case"ArrowLeft":{st.preventDefault();const X=Ve();xe.current[X].focus(),Re(wd(Math.min(Math.max(J==="rtl"?re.current[X]+h:re.current[X]-h,l),c),ke),X,!0);break}}},_t={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:_,onBlur:()=>U(-1)},Mt=Array.isArray(A);return E.jsx(zIe,{value:{getStyles:Y},children:E.jsxs(Oee,{...G,size:u,ref:t,disabled:k,children:[E.jsxs(Fee,{offset:Te[0],marksOffset:q[0],filled:Te[1]-Te[0],marks:y,inverted:F,min:l,max:c,value:q[1],disabled:k,containerProps:{ref:Ke,onMouseEnter:T?()=>B(!0):void 0,onMouseLeave:T?()=>B(!1):void 0,onTouchStartCapture:Ie,onTouchEndCapture:()=>{pe.current=-1},onMouseDownCapture:Ie,onMouseUpCapture:()=>{pe.current=-1},onKeyDownCapture:ft},children:[E.jsx($M,{..._t,value:R(q[0]),position:Te[0],dragging:Ct,label:typeof v=="function"?v(wd(R(q[0]),ke)):v,ref:st=>{xe.current[0]=st},thumbLabel:w,onMouseDown:()=>gt(0),onFocus:()=>U(0),showLabelOnHover:T,isHovered:W,disabled:k,children:Mt?A[0]:A}),E.jsx($M,{..._t,thumbLabel:S,value:R(q[1]),position:Te[1],dragging:Ct,label:typeof v=="function"?v(wd(R(q[1]),ke)):v,ref:st=>{xe.current[1]=st},onMouseDown:()=>gt(1),onFocus:()=>U(1),showLabelOnHover:T,isHovered:W,disabled:k,children:Mt?A[1]:A})]}),E.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...j}),E.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...j})]})})});lC.classes=YL;lC.displayName="@mantine/core/RangeSlider";const Gft={},Rf=wt((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Qe("Space",Gft,e);return E.jsx(Fe,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Rf.displayName="@mantine/core/Space";var qIe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const Yft={maxHeight:100,initialState:!1},Kft=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),Mee=wt((e,t)=>{const n=Qe("Spoiler",Yft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=Gt({name:"Spoiler",classes:qIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Kft}),b=ol(g),_=`${b}-region`,[w,S]=N.useState(l),{ref:T,height:A}=Lrt(),k=w?f:d,I=k!==null&&c<A;return E.jsxs(Fe,{...v("root"),id:b,ref:t,"data-has-spoiler":I||void 0,...y,children:[I&&E.jsx(_b,{component:"button",type:"button",ref:p,onClick:()=>S(R=>!R),"aria-expanded":w,"aria-controls":_,...v("control"),children:k}),E.jsx("div",{...v("content",{style:{maxHeight:w?A?ze(A):void 0:ze(c)}}),"data-reduce-motion":!0,role:"region",id:_,children:E.jsx("div",{ref:T,children:h})})]})});Mee.classes=qIe;Mee.displayName="@mantine/core/Spoiler";var WIe={root:"m_6d731127"};const Xft={gap:"md",align:"stretch",justify:"flex-start"},Qft=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":qo(t),"--stack-align":n,"--stack-justify":r}}),Ys=wt((e,t)=>{const n=Qe("Stack",Xft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Gt({name:"Stack",props:n,classes:WIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qft});return E.jsx(Fe,{ref:t,...p("root"),variant:d,...h})});Ys.classes=WIe;Ys.displayName="@mantine/core/Stack";const GIe=N.createContext(null),Jft=GIe.Provider,Zft=()=>N.useContext(GIe),edt={},$ee=wt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Qe("SwitchGroup",edt,e),[c,f]=Ba({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return E.jsx(Jft,{value:{value:c,onChange:d,size:s},children:E.jsx(mo.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:E.jsx(oee,{role:"group",children:a})})})});$ee.classes=mo.Wrapper.classes;$ee.displayName="@mantine/core/SwitchGroup";var YIe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const tdt={labelPosition:"right"},ndt=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Zi(t),"--switch-height":ur(r,"switch-height"),"--switch-width":ur(r,"switch-width"),"--switch-thumb-size":ur(r,"switch-thumb-size"),"--switch-label-font-size":ur(r,"switch-label-font-size"),"--switch-track-label-padding":ur(r,"switch-track-label-padding"),"--switch-color":n?Ki(n,e):void 0}}),yS=wt((e,t)=>{const n=Qe("Switch",tdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:_,onChange:w,labelPosition:S,description:T,error:A,disabled:k,variant:I,rootRef:R,mod:F,...O}=n,$=Zft(),V=p||($==null?void 0:$.size),j=Gt({name:"Switch",props:n,classes:YIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ndt}),{styleProps:G,rest:Y}=M_(O),J=ol(h),L=$?{checked:$.value.includes(Y.value),onChange:$.onChange}:{},[U,W]=Ba({value:L.checked??b,defaultValue:_,finalValue:!1});return E.jsxs(kL,{...j("root"),__staticSelector:"Switch",__stylesApiProps:n,id:J,size:V,labelPosition:S,label:c,description:T,error:A,disabled:k,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":L.checked||void 0,variant:I,ref:R,mod:F,...G,...g,children:[E.jsx("input",{...Y,disabled:k,checked:U,onChange:B=>{var q;$?(q=L.onChange)==null||q.call(L,B):w==null||w(B),W(B.currentTarget.checked)},id:J,ref:t,type:"checkbox",role:"switch",...j("input")}),E.jsxs(Fe,{"aria-hidden":"true",mod:{error:A,"label-position":S},...j("track"),children:[E.jsx(Fe,{component:"span",mod:"reduce-motion",...j("thumb"),children:v}),E.jsx("span",{...j("trackLabel"),children:U?d:f})]})]})});yS.classes={...YIe,...eIe};yS.displayName="@mantine/core/Switch";yS.Group=$ee;const[rdt,idt]=gu("Table component was not found in the tree");var dN={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function sdt(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function B_(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=wt((i,s)=>{const o=Qe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=idt();return E.jsx(Fe,{component:e,ref:s,...sdt(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=dN,r}const vG=B_("th",{columnBorder:!0}),KIe=B_("td",{columnBorder:!0}),Q6=B_("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),XIe=B_("thead",{stickyHeader:!0}),QIe=B_("tbody"),JIe=B_("tfoot"),ZIe=B_("caption",{captionSide:!0});function Lee({data:e}){return E.jsxs(E.Fragment,{children:[e.caption&&E.jsx(ZIe,{children:e.caption}),e.head&&E.jsx(XIe,{children:E.jsx(Q6,{children:e.head.map((t,n)=>E.jsx(vG,{children:t},n))})}),e.body&&E.jsx(QIe,{children:e.body.map((t,n)=>E.jsx(Q6,{children:t.map((r,i)=>E.jsx(KIe,{children:r},i))},n))}),e.foot&&E.jsx(JIe,{children:E.jsx(Q6,{children:e.foot.map((t,n)=>E.jsx(vG,{children:t},n))})})]})}Lee.displayName="@mantine/core/TableDataRenderer";const odt={type:"scrollarea"},adt=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":ze(t),"--table-overflow":n==="native"?"auto":void 0}}),Bee=wt((e,t)=>{const n=Qe("TableScrollContainer",odt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Gt({name:"TableScrollContainer",classes:dN,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:adt,rootSelector:"scrollContainer"});return E.jsx(Fe,{component:f==="scrollarea"?Xg:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:E.jsx("div",{...h("scrollContainerInner"),children:l})})});Bee.classes=dN;Bee.displayName="@mantine/core/TableScrollContainer";const udt={withRowBorders:!0,verticalSpacing:7},ldt=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":qo(r),"--table-vertical-spacing":qo(i),"--table-border-color":s?Ki(s,e):void 0,"--table-striped-color":u&&o?Ki(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Ki(a,e):void 0,"--table-sticky-header-offset":f?ze(c):void 0}}),_n=wt((e,t)=>{const n=Qe("Table",udt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:_,variant:w,data:S,children:T,stickyHeader:A,stickyHeaderOffset:k,mod:I,...R}=n,F=Gt({name:"Table",props:n,className:i,style:s,classes:dN,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:ldt});return E.jsx(rdt,{value:{getStyles:F,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:E.jsx(Fe,{component:"table",variant:w,ref:t,mod:[{"data-with-table-border":v},I],...F("table"),...R,children:T||!!S&&E.jsx(Lee,{data:S})})})});_n.classes=dN;_n.displayName="@mantine/core/Table";_n.Td=KIe;_n.Th=vG;_n.Tr=Q6;_n.Thead=XIe;_n.Tbody=QIe;_n.Tfoot=JIe;_n.Caption=ZIe;_n.ScrollContainer=Bee;_n.DataRenderer=Lee;const[cdt,jee]=gu("Tabs component was not found in the tree");var hN={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const fdt={},Uee=wt((e,t)=>{const n=Qe("TabsList",fdt,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=jee();return E.jsx(Fe,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});Uee.classes=hN;Uee.displayName="@mantine/core/TabsList";const ddt={},zee=wt((e,t)=>{const n=Qe("TabsPanel",ddt,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=jee(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return E.jsx(Fe,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});zee.classes=hN;zee.displayName="@mantine/core/TabsPanel";const hdt={},Vee=wt((e,t)=>{const n=Qe("TabsTab",hdt,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=No(),{dir:b}=wy(),_=jee(),w=a===_.value,S=A=>{_.onChange(_.allowTabDeactivation&&a===_.value?null:a),u==null||u(A)},T={classNames:h,styles:p,props:n};return E.jsxs($f,{...y,..._.getStyles("tab",{className:r,style:d,variant:_.variant,...T}),disabled:c,unstyled:_.unstyled,variant:_.variant,mod:[{active:w,disabled:c,orientation:_.orientation,inverted:_.inverted,placement:_.orientation==="vertical"&&_.placement},g],ref:t,role:"tab",id:_.getTabId(a),"aria-selected":w,tabIndex:w||_.value===null?0:-1,"aria-controls":_.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?Ki(f,v):void 0},onKeyDown:nZ({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:_.activateTabWithKeyboard,loop:_.loop,orientation:_.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&E.jsx("span",{..._.getStyles("tabSection",T),"data-position":"left",children:o}),i&&E.jsx("span",{..._.getStyles("tabLabel",T),children:i}),s&&E.jsx("span",{..._.getStyles("tabSection",T),"data-position":"right",children:s})]})});Vee.classes=hN;Vee.displayName="@mantine/core/TabsTab";const pme="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",pdt={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},mdt=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Zi(t),"--tabs-color":Ki(n,e),"--tabs-text-color":ET(r,e)?xb({color:n,theme:e,autoContrast:r}):void 0}}),qr=wt((e,t)=>{const n=Qe("Tabs",pdt,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:_,className:w,style:S,vars:T,autoContrast:A,mod:k,...I}=n,R=ol(l),[F,O]=Ba({value:i,defaultValue:r,finalValue:null,onChange:s}),$=Gt({name:"Tabs",props:n,classes:hN,className:w,style:S,classNames:v,styles:b,unstyled:_,vars:T,varsResolver:mdt});return E.jsx(cdt,{value:{placement:g,value:F,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:IM(`${R}-tab`,pme),getPanelId:IM(`${R}-panel`,pme),onChange:O,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:_,getStyles:$},children:E.jsx(Fe,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},k],...$("root"),...I,children:a})})});qr.classes=hN;qr.displayName="@mantine/core/Tabs";qr.Tab=Vee;qr.Panel=zee;qr.List=Uee;const gdt={},xg=wt((e,t)=>{const n=Qe("TextInput",gdt,e);return E.jsx(Jd,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});xg.classes=Jd.classes;xg.displayName="@mantine/core/TextInput";const ydt=["h1","h2","h3","h4","h5","h6"];function vdt(e,t){const n=t!==void 0?t:`h${e}`;return ydt.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:ze(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var eke={root:"m_8a5d1357"};const bdt={order:1},xdt=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=vdt(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},lo=wt((e,t)=>{const n=Qe("Title",bdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Gt({name:"Title",props:n,classes:eke,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xdt});return[1,2,3,4,5,6].includes(u)?E.jsx(Fe,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});lo.classes=eke;lo.displayName="@mantine/core/Title";function wdt(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function _dt(e){return N.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Edt(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const Sdt=()=>wdt({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),j_=Sdt(),Cdt=(e=j_)=>_dt(e);function MT(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Edt(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Tdt(e,t=j_){const n=e.id||pS();return MT(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function tke(e,t=j_){return MT(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function Adt(e,t=j_){return MT(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function Ddt(e=j_){MT(e,()=>[])}function Idt(e=j_){MT(e,t=>t.slice(0,e.getState().limit))}const U_={show:Tdt,hide:tke,update:Adt,clean:Ddt,cleanQueue:Idt,updateState:MT};function bG(e,t){return bG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bG(e,t)}function nke(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,bG(e,t)}var rke={exports:{}},kdt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Rdt=kdt,Ndt=Rdt;function ike(){}function ske(){}ske.resetWarningCache=ike;var Pdt=function(){function e(r,i,s,o,a,u){if(u!==Ndt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ske,resetWarningCache:ike};return n.PropTypes=n,n};rke.exports=Pdt();var Odt=rke.exports;const mme=c0(Odt),gme={disabled:!1},BM=yi.createContext(null);var Fdt=function(t){return t.scrollTop},fI="unmounted",kx="exited",Rx="entering",w2="entered",xG="exiting",Ty=function(e){nke(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=kx,s.appearStatus=Rx):u=w2:r.unmountOnExit||r.mountOnEnter?u=fI:u=kx,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===fI?{status:kx}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Rx&&o!==w2&&(s=Rx):(o===Rx||o===w2)&&(s=xG)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Rx){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:cI.findDOMNode(this);o&&Fdt(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===kx&&this.setState({status:fI})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[cI.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||gme.disabled){this.safeSetState({status:w2},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Rx},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:w2},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:cI.findDOMNode(this);if(!s||gme.disabled){this.safeSetState({status:kx},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:xG},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:kx},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:cI.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===fI)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=hee(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return yi.createElement(BM.Provider,{value:null},typeof o=="function"?o(i,a):yi.cloneElement(yi.Children.only(o),a))},t}(yi.Component);Ty.contextType=BM;Ty.propTypes={};function WE(){}Ty.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:WE,onEntering:WE,onEntered:WE,onExit:WE,onExiting:WE,onExited:WE};Ty.UNMOUNTED=fI;Ty.EXITED=kx;Ty.ENTERING=Rx;Ty.ENTERED=w2;Ty.EXITING=xG;function Mdt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hee(e,t){var n=function(s){return t&&N.isValidElement(s)?t(s):s},r=Object.create(null);return e&&N.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function $dt(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function fw(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Ldt(e,t){return Hee(e.children,function(n){return N.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:fw(n,"appear",e),enter:fw(n,"enter",e),exit:fw(n,"exit",e)})})}function Bdt(e,t,n){var r=Hee(e.children),i=$dt(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(N.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=N.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:fw(o,"exit",e),enter:fw(o,"enter",e)}):!u&&a&&!c?i[s]=N.cloneElement(o,{in:!1}):u&&a&&N.isValidElement(l)&&(i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:fw(o,"exit",e),enter:fw(o,"enter",e)}))}}),i}var jdt=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Udt={component:"div",childFactory:function(t){return t}},b1=function(e){nke(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(Mdt(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?Ldt(i,a):Bdt(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=Hee(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=uC({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=hee(i,["component","childFactory"]),u=this.state.contextValue,l=jdt(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?yi.createElement(BM.Provider,{value:u},l):yi.createElement(BM.Provider,{value:u},yi.createElement(s,a,l))},t}(yi.Component);b1.propTypes={};b1.defaultProps=Udt;const oke=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function zdt(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),oke.reduce((n,r)=>(n[r]=[],n),{}))}const yme={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},Vdt={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function Hdt({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:yme[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:Vdt[o]},l={opacity:0,maxHeight:0,transform:yme[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function qdt(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const ake=N.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=qdt(n,e.autoClose),l=N.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return N.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),N.useEffect(()=>(d(),c),[u]),E.jsx(Cee,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});ake.displayName="@mantine/notifications/NotificationContainer";var uke={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const Wdt=Ty,Gdt={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Ep("overlay"),store:j_,withinPortal:!0},Ydt=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":ze(n)}}),Ay=wt((e,t)=>{const n=Qe("Notifications",Gdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...b}=n,_=No(),w=Cdt(g),S=Ort(),T=bL(),A=N.useRef({}),k=N.useRef(0),R=(_.respectReducedMotion?T:!1)?1:f,F=Gt({name:"Notifications",classes:uke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ydt});N.useEffect(()=>{g==null||g.updateState(V=>({...V,limit:p||5,defaultPosition:l}))},[p,l]),zm(()=>{w.notifications.length>k.current&&setTimeout(()=>S(),0),k.current=w.notifications.length},[w.notifications]);const O=zdt(w.notifications,l),$=oke.reduce((V,j)=>(V[j]=O[j].map(({style:G,...Y})=>E.jsx(Wdt,{timeout:R,onEnter:()=>A.current[Y.id].offsetHeight,nodeRef:{current:A.current[Y.id]},children:J=>E.jsx(ake,{ref:L=>{A.current[Y.id]=L},data:Y,onHide:L=>tke(L,g),autoClose:c,...F("notification",{style:{...Hdt({state:J,position:j,transitionDuration:R,maxHeight:h}),...G}})})},Y.id)),V),{});return E.jsxs(AT,{withinPortal:v,...y,children:[E.jsx(Fe,{...F("root"),"data-position":"top-center",ref:t,...b,children:E.jsx(b1,{children:$["top-center"]})}),E.jsx(Fe,{...F("root"),"data-position":"top-left",...b,children:E.jsx(b1,{children:$["top-left"]})}),E.jsx(Fe,{...F("root",{className:rC.classNames.fullWidth}),"data-position":"top-right",...b,children:E.jsx(b1,{children:$["top-right"]})}),E.jsx(Fe,{...F("root",{className:rC.classNames.fullWidth}),"data-position":"bottom-right",...b,children:E.jsx(b1,{children:$["bottom-right"]})}),E.jsx(Fe,{...F("root"),"data-position":"bottom-left",...b,children:E.jsx(b1,{children:$["bottom-left"]})}),E.jsx(Fe,{...F("root"),"data-position":"bottom-center",...b,children:E.jsx(b1,{children:$["bottom-center"]})})]})});Ay.classes=uke;Ay.displayName="@mantine/notifications/Notifications";Ay.show=U_.show;Ay.hide=U_.hide;Ay.update=U_.update;Ay.clean=U_.clean;Ay.cleanQueue=U_.cleanQueue;Ay.updateState=U_.updateState;const lke=N.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Po=()=>N.useContext(lke);function Kdt({children:e}){const[t,n]=N.useState(void 0),r=N.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return E.jsx(lke.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function CR(){return CR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CR.apply(this,arguments)}var U1;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(U1||(U1={}));const vme="popstate";function Xdt(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return wG("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:fke(i)}return Jdt(t,n,null,e)}function To(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function cke(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Qdt(){return Math.random().toString(36).substr(2,8)}function bme(e,t){return{usr:e.state,key:e.key,idx:t}}function wG(e,t,n,r){return n===void 0&&(n=null),CR({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$T(t):t,{state:n,key:t&&t.key||r||Qdt()})}function fke(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function $T(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Jdt(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=U1.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(CR({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=U1.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=U1.Push;let v=wG(m.location,g,y);l=c()+1;let b=bme(v,l),_=m.createHref(v);try{o.pushState(b,"",_)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(_)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=U1.Replace;let v=wG(m.location,g,y);l=c();let b=bme(v,l),_=m.createHref(v);o.replaceState(b,"",_),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:fke(g);return v=v.replace(/ $/,"%20"),To(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(vme,f),u=g,()=>{i.removeEventListener(vme,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var xme;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xme||(xme={}));function Zdt(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?$T(t):t,i=pke(r.pathname||"/",n);if(i==null)return null;let s=dke(e);eht(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=dht(i);o=lht(s[a],u)}return o}function dke(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(To(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=cv([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(To(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),dke(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:aht(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of hke(s.path))i(s,o,u)}),t}function hke(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=hke(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function eht(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:uht(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const tht=/^:[\w-]+$/,nht=3,rht=2,iht=1,sht=10,oht=-2,wme=e=>e==="*";function aht(e,t){let n=e.split("/"),r=n.length;return n.some(wme)&&(r+=oht),t&&(r+=rht),n.filter(i=>!wme(i)).reduce((i,s)=>i+(tht.test(s)?nht:s===""?iht:sht),r)}function uht(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function lht(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=cht({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:cv([i,c.pathname]),pathnameBase:ght(cv([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=cv([i,c.pathnameBase]))}return s}function cht(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=fht(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function fht(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),cke(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function dht(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cke(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function pke(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function hht(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?$T(e):e;return{pathname:n?n.startsWith("/")?n:pht(n,t):t,search:yht(r),hash:vht(i)}}function pht(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _z(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mht(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function qee(e,t){let n=mht(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Wee(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=$T(e):(i=CR({},e),To(!i.pathname||!i.pathname.includes("?"),_z("?","pathname","search",i)),To(!i.pathname||!i.pathname.includes("#"),_z("#","pathname","hash",i)),To(!i.search||!i.search.includes("#"),_z("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=hht(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const cv=e=>e.join("/").replace(/\/\/+/g,"/"),ght=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yht=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vht=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function bht(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const mke=["post","put","patch","delete"];new Set(mke);const xht=["get",...mke];new Set(xht);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function TR(){return TR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TR.apply(this,arguments)}const Gee=N.createContext(null),wht=N.createContext(null),z_=N.createContext(null),KL=N.createContext(null),d0=N.createContext({outlet:null,matches:[],isDataRoute:!1}),gke=N.createContext(null);function yke(e,t){let{relative:n}={};LT()||To(!1);let{basename:r,navigator:i}=N.useContext(z_),{hash:s,pathname:o,search:a}=Cht(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:cv([r,o])),i.createHref({pathname:u,search:a,hash:s})}function LT(){return N.useContext(KL)!=null}function Cb(){return LT()||To(!1),N.useContext(KL).location}function vke(e){N.useContext(z_).static||N.useLayoutEffect(e)}function Sp(){let{isDataRoute:e}=N.useContext(d0);return e?Mht():_ht()}function _ht(){LT()||To(!1);let e=N.useContext(Gee),{basename:t,future:n,navigator:r}=N.useContext(z_),{matches:i}=N.useContext(d0),{pathname:s}=Cb(),o=JSON.stringify(qee(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return vke(()=>{a.current=!0}),N.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=Wee(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:cv([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const Eht=N.createContext(null);function Sht(e){let t=N.useContext(d0).outlet;return t&&N.createElement(Eht.Provider,{value:e},t)}function Vm(){let{matches:e}=N.useContext(d0),t=e[e.length-1];return t?t.params:{}}function Cht(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(z_),{matches:i}=N.useContext(d0),{pathname:s}=Cb(),o=JSON.stringify(qee(i,r.v7_relativeSplatPath));return N.useMemo(()=>Wee(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function bke(e,t){return Tht(e,t)}function Tht(e,t,n,r){LT()||To(!1);let{navigator:i}=N.useContext(z_),{matches:s}=N.useContext(d0),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Cb(),c;if(t){var f;let g=typeof t=="string"?$T(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||To(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=Zdt(e,{pathname:h}),m=Rht(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:cv([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:cv([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?N.createElement(KL.Provider,{value:{location:TR({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:U1.Pop}},m):m}function Aht(){let e=Fht(),t=bht(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:i},n):null,null)}const Dht=N.createElement(Aht,null);class Iht extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(d0.Provider,{value:this.props.routeContext},N.createElement(gke.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kht(e){let{routeContext:t,match:n,children:r}=e,i=N.useContext(Gee);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(d0.Provider,{value:t},r)}function Rht(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||To(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||Dht,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=N.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,N.createElement(kht,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?N.createElement(Iht,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var xke=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xke||{}),jM=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jM||{});function Nht(e){let t=N.useContext(Gee);return t||To(!1),t}function Pht(e){let t=N.useContext(wht);return t||To(!1),t}function Oht(e){let t=N.useContext(d0);return t||To(!1),t}function wke(e){let t=Oht(),n=t.matches[t.matches.length-1];return n.route.id||To(!1),n.route.id}function Fht(){var e;let t=N.useContext(gke),n=Pht(jM.UseRouteError),r=wke(jM.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Mht(){let{router:e}=Nht(xke.UseNavigateStable),t=wke(jM.UseNavigateStable),n=N.useRef(!1);return vke(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,TR({fromRouteId:t},s)))},[e,t])}function Yee(e){let{to:t,replace:n,state:r,relative:i}=e;LT()||To(!1);let{future:s,static:o}=N.useContext(z_),{matches:a}=N.useContext(d0),{pathname:u}=Cb(),l=Sp(),c=Wee(t,qee(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return N.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function $ht(e){return Sht(e.context)}function Nx(e){To(!1)}function Lht(e){let{basename:t="/",children:n=null,location:r,navigationType:i=U1.Pop,navigator:s,static:o=!1,future:a}=e;LT()&&To(!1);let u=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:u,navigator:s,static:o,future:TR({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=$T(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=N.useMemo(()=>{let g=pke(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:N.createElement(z_.Provider,{value:l},N.createElement(KL.Provider,{children:n,value:m}))}function Bht(e){let{children:t,location:n}=e;return bke(_G(t),n)}new Promise(()=>{});function _G(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,i)=>{if(!N.isValidElement(r))return;let s=[...t,i];if(r.type===N.Fragment){n.push.apply(n,_G(r.props.children,s));return}r.type!==Nx&&To(!1),!r.props.index||!r.props.children||To(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_G(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function EG(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function jht(e,t){let n=EG(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Uht="6";try{window.__reactRouterVersion=Uht}catch{}const zht="startTransition",_me=rM[zht];function Vht(e){let{basename:t,children:n,future:r,window:i}=e,s=N.useRef();s.current==null&&(s.current=Xdt({window:i,v5Compat:!0}));let o=s.current,[a,u]=N.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=N.useCallback(f=>{l&&_me?_me(()=>u(f)):u(f)},[u,l]);return N.useLayoutEffect(()=>o.listen(c),[o,c]),N.createElement(Lht,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Eme;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Eme||(Eme={}));var Sme;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Sme||(Sme={}));function Tb(e){let t=N.useRef(EG(e)),n=N.useRef(!1),r=Cb(),i=N.useMemo(()=>jht(r.search,n.current?null:t.current),[r.search]),s=Sp(),o=N.useCallback((a,u)=>{const l=EG(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const Kee=N.createContext(null);Kee.displayName="@mantine/modals/ModalsContext";function Hht(){const e=N.useContext(Kee);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function qht({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=Hht(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return E.jsxs(E.Fragment,{children:[l&&E.jsx(Fe,{mb:"md",children:l}),E.jsxs($i,{justify:"flex-end",...o,children:[E.jsx(bn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),E.jsx(bn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[Wht,XL]=Krt("mantine-modals");XL("openModal");XL("closeModal");XL("closeAllModals");const Cme=XL("openConfirmModal");function Tme(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function Ght(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Tme(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Tme(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function Yht(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function Kht({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=N.useReducer(Ght,{modals:[],current:null}),o=N.useRef(i);o.current=i;const a=N.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=N.useCallback(({modalId:g,...y})=>{const v=g||pS();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=N.useCallback(({modalId:g,...y})=>{const v=g||pS();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=N.useCallback((g,{modalId:y,...v})=>{const b=y||pS();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=N.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);Wht({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:E.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=Yht(g.props);return{modalProps:y,content:E.jsx(qht,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:E.jsx(E.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return E.jsxs(Kee.Provider,{value:d,children:[E.jsx(ho,{zIndex:Ep("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xht={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=(e,t,n,r)=>{const i=N.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>N.createElement("svg",{ref:f,...Xht[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>N.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qht=Yn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jht=Yn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ck=Yn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ame=Yn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dme=Yn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zht=Yn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ept=Yn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tpt=Yn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var npt=Yn("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rpt=Yn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ipt=Yn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _ke=Yn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eke=Yn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var spt=Yn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ime=Yn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var opt=Yn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var apt=Yn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var upt=Yn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lpt=Yn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cpt=Yn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fpt=Yn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xee=Yn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dpt=Yn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hpt=Yn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ppt=Yn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mpt=Yn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gpt=Yn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ypt=Yn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vpt=Yn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ske=Yn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bpt=Yn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xpt=Yn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wpt=Yn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _pt=Yn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ept=Yn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cke=Yn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Spt=Yn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tke=Yn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cpt=Yn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ake=Yn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qee=Yn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kme=Yn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jee=Yn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tpt=Yn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Apt=Yn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dpt=Yn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function Dke(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Ll="/vis-decode/";function Rme(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Ike(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Ipt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,kpt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Rpt={};function Nme(e,t){return(Rpt.jsx?kpt:Ipt).test(e)}const Npt=/[ \t\n\f\r]/g;function Ppt(e){return typeof e=="object"?e.type==="text"?Pme(e.value):!1:Pme(e)}function Pme(e){return e.replace(Npt,"")===""}let pN=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};pN.prototype.property={};pN.prototype.normal={};pN.prototype.space=null;function kke(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new pN(n,r,t)}function AR(e){return e.toLowerCase()}let eh=class{constructor(t,n){this.property=t,this.attribute=n}};eh.prototype.space=null;eh.prototype.boolean=!1;eh.prototype.booleanish=!1;eh.prototype.overloadedBoolean=!1;eh.prototype.number=!1;eh.prototype.commaSeparated=!1;eh.prototype.spaceSeparated=!1;eh.prototype.commaOrSpaceSeparated=!1;eh.prototype.mustUseProperty=!1;eh.prototype.defined=!1;let Opt=0;const sr=V_(),Bo=V_(),Rke=V_(),Rt=V_(),fs=V_(),vS=V_(),ff=V_();function V_(){return 2**++Opt}const SG=Object.freeze(Object.defineProperty({__proto__:null,boolean:sr,booleanish:Bo,commaOrSpaceSeparated:ff,commaSeparated:vS,number:Rt,overloadedBoolean:Rke,spaceSeparated:fs},Symbol.toStringTag,{value:"Module"})),Ez=Object.keys(SG);class Zee extends eh{constructor(t,n,r,i){let s=-1;if(super(t,n),Ome(this,"space",i),typeof r=="number")for(;++s<Ez.length;){const o=Ez[s];Ome(this,Ez[s],(r&SG[o])===SG[o])}}}Zee.prototype.defined=!0;function Ome(e,t,n){n&&(e[t]=n)}const Fpt={}.hasOwnProperty;function BT(e){const t={},n={};let r;for(r in e.properties)if(Fpt.call(e.properties,r)){const i=e.properties[r],s=new Zee(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[AR(r)]=r,n[AR(s.attribute)]=r}return new pN(t,n,e.space)}const Nke=BT({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Pke=BT({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Oke(e,t){return t in e?e[t]:t}function Fke(e,t){return Oke(e,t.toLowerCase())}const Mke=BT({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Fke,properties:{xmlns:null,xmlnsXLink:null}}),$ke=BT({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Bo,ariaAutoComplete:null,ariaBusy:Bo,ariaChecked:Bo,ariaColCount:Rt,ariaColIndex:Rt,ariaColSpan:Rt,ariaControls:fs,ariaCurrent:null,ariaDescribedBy:fs,ariaDetails:null,ariaDisabled:Bo,ariaDropEffect:fs,ariaErrorMessage:null,ariaExpanded:Bo,ariaFlowTo:fs,ariaGrabbed:Bo,ariaHasPopup:null,ariaHidden:Bo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:fs,ariaLevel:Rt,ariaLive:null,ariaModal:Bo,ariaMultiLine:Bo,ariaMultiSelectable:Bo,ariaOrientation:null,ariaOwns:fs,ariaPlaceholder:null,ariaPosInSet:Rt,ariaPressed:Bo,ariaReadOnly:Bo,ariaRelevant:null,ariaRequired:Bo,ariaRoleDescription:fs,ariaRowCount:Rt,ariaRowIndex:Rt,ariaRowSpan:Rt,ariaSelected:Bo,ariaSetSize:Rt,ariaSort:null,ariaValueMax:Rt,ariaValueMin:Rt,ariaValueNow:Rt,ariaValueText:null,role:null}}),Mpt=BT({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Fke,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:vS,acceptCharset:fs,accessKey:fs,action:null,allow:null,allowFullScreen:sr,allowPaymentRequest:sr,allowUserMedia:sr,alt:null,as:null,async:sr,autoCapitalize:null,autoComplete:fs,autoFocus:sr,autoPlay:sr,blocking:fs,capture:null,charSet:null,checked:sr,cite:null,className:fs,cols:Rt,colSpan:null,content:null,contentEditable:Bo,controls:sr,controlsList:fs,coords:Rt|vS,crossOrigin:null,data:null,dateTime:null,decoding:null,default:sr,defer:sr,dir:null,dirName:null,disabled:sr,download:Rke,draggable:Bo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:sr,formTarget:null,headers:fs,height:Rt,hidden:sr,high:Rt,href:null,hrefLang:null,htmlFor:fs,httpEquiv:fs,id:null,imageSizes:null,imageSrcSet:null,inert:sr,inputMode:null,integrity:null,is:null,isMap:sr,itemId:null,itemProp:fs,itemRef:fs,itemScope:sr,itemType:fs,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:sr,low:Rt,manifest:null,max:null,maxLength:Rt,media:null,method:null,min:null,minLength:Rt,multiple:sr,muted:sr,name:null,nonce:null,noModule:sr,noValidate:sr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:sr,optimum:Rt,pattern:null,ping:fs,placeholder:null,playsInline:sr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:sr,referrerPolicy:null,rel:fs,required:sr,reversed:sr,rows:Rt,rowSpan:Rt,sandbox:fs,scope:null,scoped:sr,seamless:sr,selected:sr,shadowRootClonable:sr,shadowRootDelegatesFocus:sr,shadowRootMode:null,shape:null,size:Rt,sizes:null,slot:null,span:Rt,spellCheck:Bo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Rt,step:null,style:null,tabIndex:Rt,target:null,title:null,translate:null,type:null,typeMustMatch:sr,useMap:null,value:Bo,width:Rt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:fs,axis:null,background:null,bgColor:null,border:Rt,borderColor:null,bottomMargin:Rt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:sr,declare:sr,event:null,face:null,frame:null,frameBorder:null,hSpace:Rt,leftMargin:Rt,link:null,longDesc:null,lowSrc:null,marginHeight:Rt,marginWidth:Rt,noResize:sr,noHref:sr,noShade:sr,noWrap:sr,object:null,profile:null,prompt:null,rev:null,rightMargin:Rt,rules:null,scheme:null,scrolling:Bo,standby:null,summary:null,text:null,topMargin:Rt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Rt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:sr,disableRemotePlayback:sr,prefix:null,property:null,results:Rt,security:null,unselectable:null}}),$pt=BT({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Oke,properties:{about:ff,accentHeight:Rt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Rt,amplitude:Rt,arabicForm:null,ascent:Rt,attributeName:null,attributeType:null,azimuth:Rt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Rt,by:null,calcMode:null,capHeight:Rt,className:fs,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Rt,diffuseConstant:Rt,direction:null,display:null,dur:null,divisor:Rt,dominantBaseline:null,download:sr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Rt,enableBackground:null,end:null,event:null,exponent:Rt,externalResourcesRequired:null,fill:null,fillOpacity:Rt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:vS,g2:vS,glyphName:vS,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Rt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Rt,horizOriginX:Rt,horizOriginY:Rt,id:null,ideographic:Rt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Rt,k:Rt,k1:Rt,k2:Rt,k3:Rt,k4:Rt,kernelMatrix:ff,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Rt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Rt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Rt,overlineThickness:Rt,paintOrder:null,panose1:null,path:null,pathLength:Rt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:fs,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Rt,pointsAtY:Rt,pointsAtZ:Rt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ff,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ff,rev:ff,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ff,requiredFeatures:ff,requiredFonts:ff,requiredFormats:ff,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Rt,specularExponent:Rt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Rt,strikethroughThickness:Rt,string:null,stroke:null,strokeDashArray:ff,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Rt,strokeOpacity:Rt,strokeWidth:null,style:null,surfaceScale:Rt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ff,tabIndex:Rt,tableValues:null,target:null,targetX:Rt,targetY:Rt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ff,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Rt,underlineThickness:Rt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Rt,values:null,vAlphabetic:Rt,vMathematical:Rt,vectorEffect:null,vHanging:Rt,vIdeographic:Rt,version:null,vertAdvY:Rt,vertOriginX:Rt,vertOriginY:Rt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Rt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Lpt=/^data[-\w.:]+$/i,Fme=/-[a-z]/g,Bpt=/[A-Z]/g;function QL(e,t){const n=AR(t);let r=t,i=eh;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Lpt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Fme,Upt);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Fme.test(s)){let o=s.replace(Bpt,jpt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=Zee}return new i(r,t)}function jpt(e){return"-"+e.toLowerCase()}function Upt(e){return e.charAt(1).toUpperCase()}const zpt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},mN=kke([Pke,Nke,Mke,$ke,Mpt],"html"),Ab=kke([Pke,Nke,Mke,$ke,$pt],"svg");function Mme(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Lke(e){return e.join(" ").trim()}var Bke={},$me=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Vpt=/\n/g,Hpt=/^\s*/,qpt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Wpt=/^:\s*/,Gpt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Ypt=/^[;\s]*/,Kpt=/^\s+|\s+$/g,Xpt=`
`,Lme="/",Bme="*",Gx="",Qpt="comment",Jpt="declaration",Zpt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(Vpt);m&&(n+=m.length);var g=p.lastIndexOf(Xpt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(Hpt)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Lme!=e.charAt(0)||Bme!=e.charAt(1))){for(var m=2;Gx!=e.charAt(m)&&(Bme!=e.charAt(m)||Lme!=e.charAt(m+1));)++m;if(m+=2,Gx===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:Qpt,comment:g})}}function d(){var p=s(),m=u(qpt);if(m){if(f(),!u(Wpt))return a("property missing ':'");var g=u(Gpt),y=p({type:Jpt,property:jme(m[0].replace($me,Gx)),value:g?jme(g[0].replace($me,Gx)):Gx});return u(Ypt),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function jme(e){return e?e.replace(Kpt,Gx):Gx}var emt=on&&on.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bke,"__esModule",{value:!0});var tmt=emt(Zpt);function nmt(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,tmt.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Ume=Bke.default=nmt;const rmt=Ume.default||Ume,JL=jke("end"),h0=jke("start");function jke(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function imt(e){const t=h0(e),n=JL(e);if(t&&n)return{start:t,end:n}}function fk(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?zme(e.position):"start"in e||"end"in e?zme(e):"line"in e||"column"in e?CG(e):""}function CG(e){return Vme(e&&e.line)+":"+Vme(e&&e.column)}function zme(e){return CG(e&&e.start)+"-"+CG(e&&e.end)}function Vme(e){return e&&typeof e=="number"?e:1}class al extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=fk(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}al.prototype.file="";al.prototype.name="";al.prototype.reason="";al.prototype.message="";al.prototype.stack="";al.prototype.column=void 0;al.prototype.line=void 0;al.prototype.ancestors=void 0;al.prototype.cause=void 0;al.prototype.fatal=void 0;al.prototype.place=void 0;al.prototype.ruleId=void 0;al.prototype.source=void 0;const ete={}.hasOwnProperty,smt=new Map,omt=/[A-Z]/g,amt=/-([a-z])/g,umt=new Set(["table","tbody","thead","tfoot","tr"]),lmt=new Set(["td","th"]),Uke="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function cmt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=vmt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=ymt(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Ab:mN,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=zke(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function zke(e,t,n){if(t.type==="element")return fmt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return dmt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return pmt(e,t,n);if(t.type==="mdxjsEsm")return hmt(e,t);if(t.type==="root")return mmt(e,t,n);if(t.type==="text")return gmt(e,t)}function fmt(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Ab,e.schema=i),e.ancestors.push(t);const s=Hke(e,t.tagName,!1),o=bmt(e,t);let a=nte(e,t);return umt.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Ppt(u):!0})),Vke(e,o,s,t),tte(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function dmt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}DR(e,t.position)}function hmt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);DR(e,t.position)}function pmt(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Ab,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Hke(e,t.name,!0),o=xmt(e,t),a=nte(e,t);return Vke(e,o,s,t),tte(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function mmt(e,t,n){const r={};return tte(r,nte(e,t)),e.create(t,e.Fragment,r,n)}function gmt(e,t){return t.value}function Vke(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function tte(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function ymt(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function vmt(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=h0(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function bmt(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&ete.call(t.properties,i)){const s=wmt(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&lmt.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function xmt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else DR(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else DR(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function nte(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:smt;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=zke(e,s,o);a!==void 0&&n.push(a)}return n}function wmt(e,t,n){const r=QL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Ike(n):Lke(n)),r.property==="style"){let i=typeof n=="object"?n:_mt(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Emt(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?zpt[r.property]||r.property:r.attribute,n]}}function _mt(e,t){const n={};try{rmt(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new al("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Uke+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(amt,Cmt)),n[o]=s}}function Hke(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Nme(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Nme(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return ete.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);DR(e)}function DR(e,t){const n=new al("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Uke+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Emt(e){const t={};let n;for(n in e)ete.call(e,n)&&(t[Smt(n)]=e[n]);return t}function Smt(e){let t=e.replace(omt,Tmt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Cmt(e,t){return t.toUpperCase()}function Tmt(e){return"-"+e.toLowerCase()}const Sz={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Amt={};function Dmt(e,t){const n=Amt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return qke(e,r,i)}function qke(e,t,n){if(Imt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Hme(e.children,t,n)}return Array.isArray(e)?Hme(e,t,n):""}function Hme(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=qke(e[i],t,n);return r.join("")}function Imt(e){return!!(e&&typeof e=="object")}const qme=document.createElement("i");function rte(e){const t="&"+e+";";qme.innerHTML=t;const n=qme.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ey(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Cd(e,t){return e.length>0?(ey(e,e.length,0,t),e):t}const Wme={}.hasOwnProperty;function kmt(e){const t={};let n=-1;for(;++n<e.length;)Rmt(t,e[n]);return t}function Rmt(e,t){let n;for(n in t){const i=(Wme.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Wme.call(i,o)||(i[o]=[]);const a=s[o];Nmt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Nmt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ey(e,0,0,r)}function Wke(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function bS(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const um=Db(/[A-Za-z]/),Sf=Db(/[\dA-Za-z]/),Pmt=Db(/[#-'*+\--9=?A-Z^-~]/);function TG(e){return e!==null&&(e<32||e===127)}const AG=Db(/\d/),Omt=Db(/[\dA-Fa-f]/),Fmt=Db(/[!-/:-@[-`{-~]/);function Un(e){return e!==null&&e<-2}function Mc(e){return e!==null&&(e<0||e===32)}function Ai(e){return e===-2||e===-1||e===32}const Mmt=Db(new RegExp("\\p{P}|\\p{S}","u")),$mt=Db(/\s/);function Db(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function jT(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Sf(e.charCodeAt(n+1))&&Sf(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function hs(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Ai(u)?(e.enter(n),a(u)):t(u)}function a(u){return Ai(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const Lmt={tokenize:Bmt};function Bmt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),hs(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Un(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const jmt={tokenize:Umt},Gme={tokenize:zmt};function Umt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const _=n[r];return t.containerState=_[1],e.attempt(_[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const _=t.events.length;let w=_,S;for(;w--;)if(t.events[w][0]==="exit"&&t.events[w][1].type==="chunkFlow"){S=t.events[w][1].end;break}y(r);let T=_;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},S),T++;return ey(t.events,w+1,0,t.events.slice(_)),t.events.length=T,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Gme,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(Gme,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Un(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,_){const w=t.sliceStream(b);if(_&&w.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(w),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const T=t.events.length;let A=T,k,I;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(k){I=t.events[A][1].end;break}k=!0}for(y(r),S=T;S<t.events.length;)t.events[S][1].end=Object.assign({},I),S++;ey(t.events,A+1,0,t.events.slice(T)),t.events.length=S}}function y(b){let _=n.length;for(;_-- >b;){const w=n[_];t.containerState=w[1],w[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function zmt(e,t,n){return hs(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Yme(e){if(e===null||Mc(e)||$mt(e))return 1;if(Mmt(e))return 2}function ite(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const DG={name:"attention",tokenize:Hmt,resolveAll:Vmt};function Vmt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Kme(f,-u),Kme(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Cd(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Cd(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Cd(l,ite(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Cd(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Cd(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,ey(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Hmt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Yme(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Yme(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Kme(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const qmt={name:"autolink",tokenize:Wmt};function Wmt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return um(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Sf(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Sf(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||TG(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):Pmt(h)?(e.consume(h),l):n(h)}function c(h){return Sf(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Sf(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const ZL={tokenize:Gmt,partial:!0};function Gmt(e,t,n){return r;function r(s){return Ai(s)?hs(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Un(s)?t(s):n(s)}}const Gke={name:"blockQuote",tokenize:Ymt,continuation:{tokenize:Kmt},exit:Xmt};function Ymt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Ai(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Kmt(e,t,n){const r=this;return i;function i(o){return Ai(o)?hs(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Gke,t,n)(o)}}function Xmt(e){e.exit("blockQuote")}const Yke={name:"characterEscape",tokenize:Qmt};function Qmt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Fmt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Kke={name:"characterReference",tokenize:Jmt};function Jmt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Sf,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Omt,c):(e.enter("characterReferenceValue"),s=7,o=AG,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Sf&&!rte(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Xme={tokenize:e0t,partial:!0},Qme={name:"codeFenced",tokenize:Zmt,concrete:!0};function Zmt(e,t,n){const r=this,i={tokenize:w,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),Ai(S)?hs(e,f,"whitespace")(S):f(S))}function f(S){return S===null||Un(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(Xme,m,_)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||Un(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):Ai(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),hs(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||Un(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||Un(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,_,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&Ai(S)?hs(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||Un(S)?e.check(Xme,m,_)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||Un(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function _(S){return e.exit("codeFenced"),t(S)}function w(S,T,A){let k=0;return I;function I(V){return S.enter("lineEnding"),S.consume(V),S.exit("lineEnding"),R}function R(V){return S.enter("codeFencedFence"),Ai(V)?hs(S,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):F(V)}function F(V){return V===a?(S.enter("codeFencedFenceSequence"),O(V)):A(V)}function O(V){return V===a?(k++,S.consume(V),O):k>=o?(S.exit("codeFencedFenceSequence"),Ai(V)?hs(S,$,"whitespace")(V):$(V)):A(V)}function $(V){return V===null||Un(V)?(S.exit("codeFencedFence"),T(V)):A(V)}}}function e0t(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Cz={name:"codeIndented",tokenize:n0t},t0t={tokenize:r0t,partial:!0};function n0t(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),hs(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Un(l)?e.attempt(t0t,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Un(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function r0t(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Un(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):hs(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Un(o)?i(o):n(o)}}const i0t={name:"codeText",tokenize:a0t,resolve:s0t,previous:o0t};function s0t(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function o0t(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function a0t(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Un(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Un(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class u0t{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&yD(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),yD(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),yD(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);yD(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);yD(this.left,n.reverse())}}}function yD(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Xke(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new u0t(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,l0t(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return ey(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function l0t(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const c0t={tokenize:h0t,resolve:d0t},f0t={tokenize:p0t,partial:!0};function d0t(e){return Xke(e),e}function h0t(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Un(a)?e.check(f0t,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function p0t(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),hs(e,s,"linePrefix")}function s(o){if(o===null||Un(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Qke(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||TG(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Un(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Mc(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||TG(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function Jke(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Un(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Un(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Ai(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Zke(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Un(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),hs(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Un(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function dk(e,t){let n;return r;function r(i){return Un(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Ai(i)?hs(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const m0t={name:"definition",tokenize:y0t},g0t={tokenize:v0t,partial:!0};function y0t(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return Jke.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=bS(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Mc(h)?dk(e,l)(h):l(h)}function l(h){return Qke(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(g0t,f,f)(h)}function f(h){return Ai(h)?hs(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Un(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function v0t(e,t,n){return r;function r(a){return Mc(a)?dk(e,i)(a):n(a)}function i(a){return Zke(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Ai(a)?hs(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Un(a)?t(a):n(a)}}const b0t={name:"hardBreakEscape",tokenize:x0t};function x0t(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Un(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const w0t={name:"headingAtx",tokenize:E0t,resolve:_0t};function _0t(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ey(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function E0t(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Mc(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Un(c)?(e.exit("atxHeading"),t(c)):Ai(c)?hs(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Mc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const S0t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Jme=["pre","script","style","textarea"],C0t={name:"htmlFlow",tokenize:I0t,resolveTo:D0t,concrete:!0},T0t={tokenize:R0t,partial:!0},A0t={tokenize:k0t,partial:!0};function D0t(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function I0t(e,t,n){const r=this;let i,s,o,a,u;return l;function l(B){return c(B)}function c(B){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(B),f}function f(B){return B===33?(e.consume(B),d):B===47?(e.consume(B),s=!0,m):B===63?(e.consume(B),i=3,r.interrupt?t:L):um(B)?(e.consume(B),o=String.fromCharCode(B),g):n(B)}function d(B){return B===45?(e.consume(B),i=2,h):B===91?(e.consume(B),i=5,a=0,p):um(B)?(e.consume(B),i=4,r.interrupt?t:L):n(B)}function h(B){return B===45?(e.consume(B),r.interrupt?t:L):n(B)}function p(B){const q="CDATA[";return B===q.charCodeAt(a++)?(e.consume(B),a===q.length?r.interrupt?t:F:p):n(B)}function m(B){return um(B)?(e.consume(B),o=String.fromCharCode(B),g):n(B)}function g(B){if(B===null||B===47||B===62||Mc(B)){const q=B===47,Z=o.toLowerCase();return!q&&!s&&Jme.includes(Z)?(i=1,r.interrupt?t(B):F(B)):S0t.includes(o.toLowerCase())?(i=6,q?(e.consume(B),y):r.interrupt?t(B):F(B)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(B):s?v(B):b(B))}return B===45||Sf(B)?(e.consume(B),o+=String.fromCharCode(B),g):n(B)}function y(B){return B===62?(e.consume(B),r.interrupt?t:F):n(B)}function v(B){return Ai(B)?(e.consume(B),v):I(B)}function b(B){return B===47?(e.consume(B),I):B===58||B===95||um(B)?(e.consume(B),_):Ai(B)?(e.consume(B),b):I(B)}function _(B){return B===45||B===46||B===58||B===95||Sf(B)?(e.consume(B),_):w(B)}function w(B){return B===61?(e.consume(B),S):Ai(B)?(e.consume(B),w):b(B)}function S(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),u=B,T):Ai(B)?(e.consume(B),S):A(B)}function T(B){return B===u?(e.consume(B),u=null,k):B===null||Un(B)?n(B):(e.consume(B),T)}function A(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||Mc(B)?w(B):(e.consume(B),A)}function k(B){return B===47||B===62||Ai(B)?b(B):n(B)}function I(B){return B===62?(e.consume(B),R):n(B)}function R(B){return B===null||Un(B)?F(B):Ai(B)?(e.consume(B),R):n(B)}function F(B){return B===45&&i===2?(e.consume(B),j):B===60&&i===1?(e.consume(B),G):B===62&&i===4?(e.consume(B),U):B===63&&i===3?(e.consume(B),L):B===93&&i===5?(e.consume(B),J):Un(B)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(T0t,W,O)(B)):B===null||Un(B)?(e.exit("htmlFlowData"),O(B)):(e.consume(B),F)}function O(B){return e.check(A0t,$,W)(B)}function $(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),V}function V(B){return B===null||Un(B)?O(B):(e.enter("htmlFlowData"),F(B))}function j(B){return B===45?(e.consume(B),L):F(B)}function G(B){return B===47?(e.consume(B),o="",Y):F(B)}function Y(B){if(B===62){const q=o.toLowerCase();return Jme.includes(q)?(e.consume(B),U):F(B)}return um(B)&&o.length<8?(e.consume(B),o+=String.fromCharCode(B),Y):F(B)}function J(B){return B===93?(e.consume(B),L):F(B)}function L(B){return B===62?(e.consume(B),U):B===45&&i===2?(e.consume(B),L):F(B)}function U(B){return B===null||Un(B)?(e.exit("htmlFlowData"),W(B)):(e.consume(B),U)}function W(B){return e.exit("htmlFlow"),t(B)}}function k0t(e,t,n){const r=this;return i;function i(o){return Un(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function R0t(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(ZL,t,n)}}const N0t={name:"htmlText",tokenize:P0t};function P0t(e,t,n){const r=this;let i,s,o;return a;function a(L){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(L),u}function u(L){return L===33?(e.consume(L),l):L===47?(e.consume(L),w):L===63?(e.consume(L),b):um(L)?(e.consume(L),A):n(L)}function l(L){return L===45?(e.consume(L),c):L===91?(e.consume(L),s=0,p):um(L)?(e.consume(L),v):n(L)}function c(L){return L===45?(e.consume(L),h):n(L)}function f(L){return L===null?n(L):L===45?(e.consume(L),d):Un(L)?(o=f,G(L)):(e.consume(L),f)}function d(L){return L===45?(e.consume(L),h):f(L)}function h(L){return L===62?j(L):L===45?d(L):f(L)}function p(L){const U="CDATA[";return L===U.charCodeAt(s++)?(e.consume(L),s===U.length?m:p):n(L)}function m(L){return L===null?n(L):L===93?(e.consume(L),g):Un(L)?(o=m,G(L)):(e.consume(L),m)}function g(L){return L===93?(e.consume(L),y):m(L)}function y(L){return L===62?j(L):L===93?(e.consume(L),y):m(L)}function v(L){return L===null||L===62?j(L):Un(L)?(o=v,G(L)):(e.consume(L),v)}function b(L){return L===null?n(L):L===63?(e.consume(L),_):Un(L)?(o=b,G(L)):(e.consume(L),b)}function _(L){return L===62?j(L):b(L)}function w(L){return um(L)?(e.consume(L),S):n(L)}function S(L){return L===45||Sf(L)?(e.consume(L),S):T(L)}function T(L){return Un(L)?(o=T,G(L)):Ai(L)?(e.consume(L),T):j(L)}function A(L){return L===45||Sf(L)?(e.consume(L),A):L===47||L===62||Mc(L)?k(L):n(L)}function k(L){return L===47?(e.consume(L),j):L===58||L===95||um(L)?(e.consume(L),I):Un(L)?(o=k,G(L)):Ai(L)?(e.consume(L),k):j(L)}function I(L){return L===45||L===46||L===58||L===95||Sf(L)?(e.consume(L),I):R(L)}function R(L){return L===61?(e.consume(L),F):Un(L)?(o=R,G(L)):Ai(L)?(e.consume(L),R):k(L)}function F(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),i=L,O):Un(L)?(o=F,G(L)):Ai(L)?(e.consume(L),F):(e.consume(L),$)}function O(L){return L===i?(e.consume(L),i=void 0,V):L===null?n(L):Un(L)?(o=O,G(L)):(e.consume(L),O)}function $(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||Mc(L)?k(L):(e.consume(L),$)}function V(L){return L===47||L===62||Mc(L)?k(L):n(L)}function j(L){return L===62?(e.consume(L),e.exit("htmlTextData"),e.exit("htmlText"),t):n(L)}function G(L){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),Y}function Y(L){return Ai(L)?hs(e,J,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):J(L)}function J(L){return e.enter("htmlTextData"),o(L)}}const ste={name:"labelEnd",tokenize:B0t,resolveTo:L0t,resolveAll:$0t},O0t={tokenize:j0t},F0t={tokenize:U0t},M0t={tokenize:z0t};function $0t(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function L0t(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Cd(a,e.slice(s+1,s+r+3)),a=Cd(a,[["enter",c,t]]),a=Cd(a,ite(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Cd(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Cd(a,e.slice(o+1)),a=Cd(a,[["exit",u,t]]),ey(e,s,e.length,a),e}function B0t(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(bS(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(O0t,c,o?c:f)(d):d===91?e.attempt(F0t,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(M0t,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function j0t(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Mc(f)?dk(e,s)(f):s(f)}function s(f){return f===41?c(f):Qke(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Mc(f)?dk(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Zke(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Mc(f)?dk(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function U0t(e,t,n){const r=this;return i;function i(a){return Jke.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(bS(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function z0t(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const V0t={name:"labelStartImage",tokenize:H0t,resolveAll:ste.resolveAll};function H0t(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const q0t={name:"labelStartLink",tokenize:W0t,resolveAll:ste.resolveAll};function W0t(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Tz={name:"lineEnding",tokenize:G0t};function G0t(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),hs(e,t,"linePrefix")}}const J6={name:"thematicBreak",tokenize:Y0t};function Y0t(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Un(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Ai(l)?hs(e,a,"whitespace")(l):a(l))}}const lc={name:"list",tokenize:Q0t,continuation:{tokenize:J0t},exit:egt},K0t={tokenize:tgt,partial:!0},X0t={tokenize:Z0t,partial:!0};function Q0t(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:AG(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(J6,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return AG(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(ZL,r.interrupt?n:c,e.attempt(K0t,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Ai(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function J0t(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ZL,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,hs(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Ai(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(X0t,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,hs(e,e.attempt(lc,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Z0t(e,t,n){const r=this;return hs(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function egt(e){e.exit(this.containerState.type)}function tgt(e,t,n){const r=this;return hs(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Ai(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Zme={name:"setextUnderline",tokenize:rgt,resolveTo:ngt};function ngt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function rgt(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Ai(l)?hs(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Un(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const igt={tokenize:sgt};function sgt(e){const t=this,n=e.attempt(ZL,r,e.attempt(this.parser.constructs.flowInitial,i,hs(e,e.attempt(this.parser.constructs.flow,i,e.attempt(c0t,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const ogt={resolveAll:tRe()},agt=eRe("string"),ugt=eRe("text");function eRe(e){return{tokenize:t,resolveAll:tRe(e==="text"?lgt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function tRe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function lgt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function cgt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:_,attempt:T(w),check:T(S),interrupt:T(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=Cd(o,R),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=ite(s,l.events,l),l.events)}function d(R,F){return dgt(h(R),F)}function h(R){return fgt(o,R)}function p(){const{line:R,column:F,offset:O,_index:$,_bufferIndex:V}=r;return{line:R,column:F,offset:O,_index:$,_bufferIndex:V}}function m(R){i[R.line]=R.column,I()}function g(){let R;for(;r._index<o.length;){const F=o[r._index];if(typeof F=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<F.length;)y(F.charCodeAt(r._bufferIndex));else y(F)}}function y(R){c=c(R)}function v(R){Un(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,I()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function b(R,F){const O=F||{};return O.type=R,O.start=p(),l.events.push(["enter",O,l]),a.push(O),O}function _(R){const F=a.pop();return F.end=p(),l.events.push(["exit",F,l]),F}function w(R,F){A(R,F.from)}function S(R,F){F.restore()}function T(R,F){return O;function O($,V,j){let G,Y,J,L;return Array.isArray($)?W($):"tokenize"in $?W([$]):U($);function U(re){return xe;function xe(pe){const Te=pe!==null&&re[pe],ke=pe!==null&&re.null,it=[...Array.isArray(Te)?Te:Te?[Te]:[],...Array.isArray(ke)?ke:ke?[ke]:[]];return W(it)(pe)}}function W(re){return G=re,Y=0,re.length===0?j:B(re[Y])}function B(re){return xe;function xe(pe){return L=k(),J=re,re.partial||(l.currentConstruct=re),re.name&&l.parser.constructs.disable.null.includes(re.name)?Z():re.tokenize.call(F?Object.assign(Object.create(l),F):l,u,q,Z)(pe)}}function q(re){return R(J,L),V}function Z(re){return L.restore(),++Y<G.length?B(G[Y]):j}}}function A(R,F){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&ey(l.events,F,l.events.length-F,R.resolve(l.events.slice(F),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function k(){const R=p(),F=l.previous,O=l.currentConstruct,$=l.events.length,V=Array.from(a);return{restore:j,from:$};function j(){r=R,l.previous=F,l.currentConstruct=O,l.events.length=$,a=V,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function fgt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function dgt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const hgt={42:lc,43:lc,45:lc,48:lc,49:lc,50:lc,51:lc,52:lc,53:lc,54:lc,55:lc,56:lc,57:lc,62:Gke},pgt={91:m0t},mgt={[-2]:Cz,[-1]:Cz,32:Cz},ggt={35:w0t,42:J6,45:[Zme,J6],60:C0t,61:Zme,95:J6,96:Qme,126:Qme},ygt={38:Kke,92:Yke},vgt={[-5]:Tz,[-4]:Tz,[-3]:Tz,33:V0t,38:Kke,42:DG,60:[qmt,N0t],91:q0t,92:[b0t,Yke],93:ste,95:DG,96:i0t},bgt={null:[DG,ogt]},xgt={null:[42,95]},wgt={null:[]},_gt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:xgt,contentInitial:pgt,disable:wgt,document:hgt,flow:ggt,flowInitial:mgt,insideSpan:bgt,string:ygt,text:vgt},Symbol.toStringTag,{value:"Module"}));function Egt(e){const n=kmt([_gt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(Lmt),document:i(jmt),flow:i(igt),string:i(agt),text:i(ugt)};return r;function i(s){return o;function o(a){return cgt(r,s,a)}}}function Sgt(e){for(;!Xke(e););return e}const e0e=/[\0\t\n\r]/g;function Cgt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(e0e.lastIndex=f,l=e0e.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Tgt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Agt(e){return e.replace(Tgt,Dgt)}function Dgt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Wke(n.slice(s?2:1),s?16:10)}return rte(n)||e}const nRe={}.hasOwnProperty;function Igt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),kgt(n)(Sgt(Egt(n).document().write(Cgt()(e,t,!0))))}function kgt(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ft),autolinkProtocol:k,autolinkEmail:k,atxHeading:s(Ct),blockQuote:s(ke),characterEscape:k,characterReference:k,codeFenced:s(it),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(it,o),codeText:s(Re,o),codeTextData:k,data:k,codeFlowValue:k,definition:s(ut),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ke),hardBreakEscape:s(gt),hardBreakTrailing:s(gt),htmlFlow:s(Ie,o),htmlFlowData:k,htmlText:s(Ie,o),htmlTextData:k,image:s(Ve),label:o,link:s(ft),listItem:s(Mt),listItemValue:d,listOrdered:s(_t,f),listUnordered:s(_t),paragraph:s(st),reference:B,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ct),strong:s(X),thematicBreak:s(we)},exit:{atxHeading:u(),atxHeadingSequence:w,autolink:u(),autolinkEmail:Te,autolinkProtocol:pe,blockQuote:u(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:Z,characterReferenceMarkerNumeric:Z,characterReferenceValue:re,characterReference:xe,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:I,codeIndented:u(y),codeText:u(V),codeTextData:I,data:I,definition:u(),definitionDestinationString:_,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(F),hardBreakTrailing:u(F),htmlFlow:u(O),htmlFlowData:I,htmlText:u($),htmlTextData:I,image:u(G),label:J,labelText:Y,lineEnding:R,link:u(j),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:L,resourceTitleString:U,resource:W,setextHeading:u(A),setextHeadingLineSequence:T,setextHeadingText:S,strong:u(),thematicBreak:u()}};rRe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ae){let he={type:"root",children:[]};const Ee={stack:[he],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},$e=[];let Be=-1;for(;++Be<ae.length;)if(ae[Be][1].type==="listOrdered"||ae[Be][1].type==="listUnordered")if(ae[Be][0]==="enter")$e.push(Be);else{const lt=$e.pop();Be=i(ae,lt,Be)}for(Be=-1;++Be<ae.length;){const lt=t[ae[Be][0]];nRe.call(lt,ae[Be][1].type)&&lt[ae[Be][1].type].call(Object.assign({sliceSerialize:ae[Be][2].sliceSerialize},Ee),ae[Be][1])}if(Ee.tokenStack.length>0){const lt=Ee.tokenStack[Ee.tokenStack.length-1];(lt[1]||t0e).call(Ee,void 0,lt[0])}for(he.position={start:r1(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:r1(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},Be=-1;++Be<t.transforms.length;)he=t.transforms[Be](he)||he;return he}function i(ae,he,Ee){let $e=he-1,Be=-1,lt=!1,Je,Xt,fn,Wt;for(;++$e<=Ee;){const an=ae[$e];switch(an[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{an[0]==="enter"?Be++:Be--,Wt=void 0;break}case"lineEndingBlank":{an[0]==="enter"&&(Je&&!Wt&&!Be&&!fn&&(fn=$e),Wt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Wt=void 0}if(!Be&&an[0]==="enter"&&an[1].type==="listItemPrefix"||Be===-1&&an[0]==="exit"&&(an[1].type==="listUnordered"||an[1].type==="listOrdered")){if(Je){let Sn=$e;for(Xt=void 0;Sn--;){const Mn=ae[Sn];if(Mn[1].type==="lineEnding"||Mn[1].type==="lineEndingBlank"){if(Mn[0]==="exit")continue;Xt&&(ae[Xt][1].type="lineEndingBlank",lt=!0),Mn[1].type="lineEnding",Xt=Sn}else if(!(Mn[1].type==="linePrefix"||Mn[1].type==="blockQuotePrefix"||Mn[1].type==="blockQuotePrefixWhitespace"||Mn[1].type==="blockQuoteMarker"||Mn[1].type==="listItemIndent"))break}fn&&(!Xt||fn<Xt)&&(Je._spread=!0),Je.end=Object.assign({},Xt?ae[Xt][1].start:an[1].end),ae.splice(Xt||$e,0,["exit",Je,an[2]]),$e++,Ee++}if(an[1].type==="listItemPrefix"){const Sn={type:"listItem",_spread:!1,start:Object.assign({},an[1].start),end:void 0};Je=Sn,ae.splice($e,0,["enter",Sn,an[2]]),$e++,Ee++,fn=void 0,Wt=!0}}}return ae[he][1]._spread=lt,Ee}function s(ae,he){return Ee;function Ee($e){a.call(this,ae($e),$e),he&&he.call(this,$e)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ae,he,Ee){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([he,Ee]),ae.position={start:r1(he.start),end:void 0}}function u(ae){return he;function he(Ee){ae&&ae.call(this,Ee),l.call(this,Ee)}}function l(ae,he){const Ee=this.stack.pop(),$e=this.tokenStack.pop();if($e)$e[0].type!==ae.type&&(he?he.call(this,ae,$e[0]):($e[1]||t0e).call(this,ae,$e[0]));else throw new Error("Cannot close `"+ae.type+"` ("+fk({start:ae.start,end:ae.end})+"): its not open");Ee.position.end=r1(ae.end)}function c(){return Dmt(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(ae){if(this.data.expectingFirstListItemValue){const he=this.stack[this.stack.length-2];he.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.lang=ae}function p(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.meta=ae}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae.replace(/(\r?\n|\r)$/g,"")}function v(ae){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=he,Ee.identifier=bS(this.sliceSerialize(ae)).toLowerCase()}function b(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.title=ae}function _(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.url=ae}function w(ae){const he=this.stack[this.stack.length-1];if(!he.depth){const Ee=this.sliceSerialize(ae).length;he.depth=Ee}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function T(ae){const he=this.stack[this.stack.length-1];he.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function k(ae){const Ee=this.stack[this.stack.length-1].children;let $e=Ee[Ee.length-1];(!$e||$e.type!=="text")&&($e=de(),$e.position={start:r1(ae.start),end:void 0},Ee.push($e)),this.stack.push($e)}function I(ae){const he=this.stack.pop();he.value+=this.sliceSerialize(ae),he.position.end=r1(ae.end)}function R(ae){const he=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ee=he.children[he.children.length-1];Ee.position.end=r1(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(he.type)&&(k.call(this,ae),I.call(this,ae))}function F(){this.data.atHardBreak=!0}function O(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae}function $(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae}function V(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae}function j(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=he,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function G(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=he,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function Y(ae){const he=this.sliceSerialize(ae),Ee=this.stack[this.stack.length-2];Ee.label=Agt(he),Ee.identifier=bS(he).toLowerCase()}function J(){const ae=this.stack[this.stack.length-1],he=this.resume(),Ee=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ee.type==="link"){const $e=ae.children;Ee.children=$e}else Ee.alt=he}function L(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.url=ae}function U(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.title=ae}function W(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function q(ae){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=he,Ee.identifier=bS(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function Z(ae){this.data.characterReferenceType=ae.type}function re(ae){const he=this.sliceSerialize(ae),Ee=this.data.characterReferenceType;let $e;Ee?($e=Wke(he,Ee==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):$e=rte(he);const Be=this.stack[this.stack.length-1];Be.value+=$e}function xe(ae){const he=this.stack.pop();he.position.end=r1(ae.end)}function pe(ae){I.call(this,ae);const he=this.stack[this.stack.length-1];he.url=this.sliceSerialize(ae)}function Te(ae){I.call(this,ae);const he=this.stack[this.stack.length-1];he.url="mailto:"+this.sliceSerialize(ae)}function ke(){return{type:"blockquote",children:[]}}function it(){return{type:"code",lang:null,meta:null,value:""}}function Re(){return{type:"inlineCode",value:""}}function ut(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ke(){return{type:"emphasis",children:[]}}function Ct(){return{type:"heading",depth:0,children:[]}}function gt(){return{type:"break"}}function Ie(){return{type:"html",value:""}}function Ve(){return{type:"image",title:null,url:"",alt:null}}function ft(){return{type:"link",title:null,url:"",children:[]}}function _t(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function Mt(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function st(){return{type:"paragraph",children:[]}}function X(){return{type:"strong",children:[]}}function de(){return{type:"text",value:""}}function we(){return{type:"thematicBreak"}}}function r1(e){return{line:e.line,column:e.column,offset:e.offset}}function rRe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?rRe(e,r):Rgt(e,r)}}function Rgt(e,t){let n;for(n in t)if(nRe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function t0e(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+fk({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+fk({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+fk({start:t.start,end:t.end})+") is still open")}function Ngt(e){const t=this;t.parser=n;function n(r){return Igt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Pgt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Ogt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Fgt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Mgt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $gt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Lgt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=jT(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Bgt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jgt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function iRe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Ugt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return iRe(e,t);const i={src:jT(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function zgt(e,t){const n={src:jT(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Vgt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Hgt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return iRe(e,t);const i={href:jT(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function qgt(e,t){const n={href:jT(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Wgt(e,t,n){const r=e.all(t),i=n?Ggt(n):sRe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function Ggt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=sRe(n[r])}return t}function sRe(e){const t=e.spread;return t??e.children.length>1}function Ygt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Kgt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Xgt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Qgt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Jgt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=h0(t.children[1]),u=JL(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Zgt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function eyt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const n0e=9,r0e=32;function tyt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(i0e(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(i0e(t.slice(i),i>0,!1)),s.join("")}function i0e(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===n0e||s===r0e;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===n0e||s===r0e;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function nyt(e,t){const n={type:"text",value:tyt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function ryt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const iyt={blockquote:Pgt,break:Ogt,code:Fgt,delete:Mgt,emphasis:$gt,footnoteReference:Lgt,heading:Bgt,html:jgt,imageReference:Ugt,image:zgt,inlineCode:Vgt,linkReference:Hgt,link:qgt,listItem:Wgt,list:Ygt,paragraph:Kgt,root:Xgt,strong:Qgt,table:Jgt,tableCell:eyt,tableRow:Zgt,text:nyt,thematicBreak:ryt,toml:s4,yaml:s4,definition:s4,footnoteDefinition:s4};function s4(){}const oRe=-1,eB=0,UM=1,zM=2,ote=3,ate=4,ute=5,lte=6,aRe=7,uRe=8,s0e=typeof self=="object"?self:globalThis,syt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case eB:case oRe:return n(o,i);case UM:{const a=n([],i);for(const u of o)a.push(r(u));return a}case zM:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case ote:return n(new Date(o),i);case ate:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case ute:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case lte:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case aRe:{const{name:a,message:u}=o;return n(new s0e[a](u),i)}case uRe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new s0e[s](o),i)};return r},o0e=e=>syt(new Map,e)(0),GE="",{toString:oyt}={},{keys:ayt}=Object,vD=e=>{const t=typeof e;if(t!=="object"||!e)return[eB,t];const n=oyt.call(e).slice(8,-1);switch(n){case"Array":return[UM,GE];case"Object":return[zM,GE];case"Date":return[ote,GE];case"RegExp":return[ate,GE];case"Map":return[ute,GE];case"Set":return[lte,GE]}return n.includes("Array")?[UM,n]:n.includes("Error")?[aRe,n]:[zM,n]},o4=([e,t])=>e===eB&&(t==="function"||t==="symbol"),uyt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=vD(o);switch(a){case eB:{let c=o;switch(u){case"bigint":a=uRe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([oRe],o)}return i([a,c],o)}case UM:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case zM:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of ayt(o))(e||!o4(vD(o[d])))&&c.push([s(d),s(o[d])]);return f}case ote:return i([a,o.toISOString()],o);case ate:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case ute:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(o4(vD(d))||o4(vD(h))))&&c.push([s(d),s(h)]);return f}case lte:{const c=[],f=i([a,c],o);for(const d of o)(e||!o4(vD(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},a0e=(e,{json:t,lossy:n}={})=>{const r=[];return uyt(!(t||n),!!t,new Map,r)(e),r},cC=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?o0e(a0e(e,t)):structuredClone(e):(e,t)=>o0e(a0e(e,t));function lyt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function cyt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function fyt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||lyt,r=e.options.footnoteBackLabel||cyt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=jT(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...cC(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const lRe=function(e){if(e==null)return myt;if(typeof e=="function")return tB(e);if(typeof e=="object")return Array.isArray(e)?dyt(e):hyt(e);if(typeof e=="string")return pyt(e);throw new Error("Expected function, string, or object as test")};function dyt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=lRe(e[n]);return tB(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function hyt(e){const t=e;return tB(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function pyt(e){return tB(t);function t(n){return n&&n.type===e}}function tB(e){return t;function t(n,r,i){return!!(gyt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function myt(){return!0}function gyt(e){return e!==null&&typeof e=="object"&&"type"in e}const cRe=[],yyt=!0,u0e=!1,vyt="skip";function byt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=lRe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=cRe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=xyt(n(u,c)),h[0]===u0e))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==vyt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===u0e)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function xyt(e){return Array.isArray(e)?e:typeof e=="number"?[yyt,e]:e==null?cRe:[e]}function cte(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),byt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const IG={}.hasOwnProperty,wyt={};function _yt(e,t){const n=t||wyt,r=new Map,i=new Map,s=new Map,o={...iyt,...n.handlers},a={all:l,applyData:Syt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Eyt,wrap:Tyt};return cte(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(IG.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=cC(g);return y.children=a.all(c),y}return cC(c)}return(a.options.unknownHandler||Cyt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=l0e(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=l0e(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Eyt(e,t){e.position&&(t.position=imt(e))}function Syt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,cC(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Cyt(e,t){const n=t.data||{},r="value"in t&&!(IG.call(n,"hProperties")||IG.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Tyt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function l0e(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function c0e(e,t){const n=_yt(e,t),r=n.one(e,void 0),i=fyt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Ayt(e,t){return e&&"run"in e?async function(n,r){const i=c0e(n,{file:r,...t});await e.run(i,r)}:function(n,r){return c0e(n,{file:r,...t||e})}}function f0e(e){if(e)throw e}var Z6=Object.prototype.hasOwnProperty,fRe=Object.prototype.toString,d0e=Object.defineProperty,h0e=Object.getOwnPropertyDescriptor,p0e=function(t){return typeof Array.isArray=="function"?Array.isArray(t):fRe.call(t)==="[object Array]"},m0e=function(t){if(!t||fRe.call(t)!=="[object Object]")return!1;var n=Z6.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Z6.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||Z6.call(t,i)},g0e=function(t,n){d0e&&n.name==="__proto__"?d0e(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},y0e=function(t,n){if(n==="__proto__")if(Z6.call(t,n)){if(h0e)return h0e(t,n).value}else return;return t[n]},Dyt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=y0e(a,n),i=y0e(t,n),a!==i&&(c&&i&&(m0e(i)||(s=p0e(i)))?(s?(s=!1,o=r&&p0e(r)?r:[]):o=r&&m0e(r)?r:{},g0e(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&g0e(a,{name:n,newValue:i}));return a};const Az=c0(Dyt);function kG(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Iyt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?kyt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function kyt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Qp={basename:Ryt,dirname:Nyt,extname:Pyt,join:Oyt,sep:"/"};function Ryt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');gN(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Nyt(e){if(gN(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Pyt(e){gN(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Oyt(...e){let t=-1,n;for(;++t<e.length;)gN(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Fyt(n)}function Fyt(e){gN(e);const t=e.codePointAt(0)===47;let n=Myt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Myt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function gN(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const $yt={cwd:Lyt};function Lyt(){return"/"}function RG(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Byt(e){if(typeof e=="string")e=new URL(e);else if(!RG(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return jyt(e)}function jyt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Dz=["history","path","basename","stem","extname","dirname"];class dRe{constructor(t){let n;t?RG(t)?n={path:t}:typeof t=="string"||Uyt(t)?n={value:t}:n=t:n={},this.cwd=$yt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Dz.length;){const s=Dz[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Dz.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Qp.basename(this.path):void 0}set basename(t){kz(t,"basename"),Iz(t,"basename"),this.path=Qp.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Qp.dirname(this.path):void 0}set dirname(t){v0e(this.basename,"dirname"),this.path=Qp.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Qp.extname(this.path):void 0}set extname(t){if(Iz(t,"extname"),v0e(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Qp.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){RG(t)&&(t=Byt(t)),kz(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Qp.basename(this.path,this.extname):void 0}set stem(t){kz(t,"stem"),Iz(t,"stem"),this.path=Qp.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new al(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Iz(e,t){if(e&&e.includes(Qp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Qp.sep+"`")}function kz(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function v0e(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Uyt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const zyt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},Vyt={}.hasOwnProperty;class fte extends zyt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Iyt()}copy(){const t=new fte;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Az(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Pz("data",this.frozen),this.namespace[t]=n,this):Vyt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Pz("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=a4(t),r=this.parser||this.Parser;return Rz("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Rz("process",this.parser||this.Parser),Nz("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=a4(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);Wyt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Rz("processSync",this.parser||this.Parser),Nz("processSync",this.compiler||this.Compiler),this.process(t,i),x0e("processSync","process",n),r;function i(s,o){n=!0,f0e(s),r=o}}run(t,n,r){b0e(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=a4(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),x0e("runSync","run",r),i;function s(o,a){f0e(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=a4(n),i=this.compiler||this.Compiler;return Nz("stringify",i),b0e(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Pz("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=Az(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];kG(m)&&kG(h)&&(h=Az(!0,m,h)),r[d]=[l,h,...p]}}}}const Hyt=new fte().freeze();function Rz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Nz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Pz(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function b0e(e){if(!kG(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function x0e(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function a4(e){return qyt(e)?e:new dRe(e)}function qyt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Wyt(e){return typeof e=="string"||Gyt(e)}function Gyt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Yyt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",w0e=[],_0e={allowDangerousHtml:!0},Kyt=/^(https?|ircs?|mailto|xmpp)$/i,Xyt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Qyt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||w0e,u=e.remarkPlugins||w0e,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,..._0e}:_0e,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||Jyt,h=Hyt().use(Ngt).use(u).use(Ayt,l).use(a),p=new dRe;typeof r=="string"&&(p.value=r);for(const v of Xyt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+Yyt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),cte(g,y),cmt(g,{Fragment:E.Fragment,components:s,ignoreInvalidStyle:!0,jsx:E.jsx,jsxs:E.jsxs,passKeys:!0,passNode:!0});function y(v,b,_){if(v.type==="raw"&&_&&typeof b=="number")return c?_.children.splice(b,1):_.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let w;for(w in Sz)if(Object.hasOwn(Sz,w)&&Object.hasOwn(v.properties,w)){const S=v.properties[w],T=Sz[w];(T===null||T.includes(v.tagName))&&(v.properties[w]=d(String(S||""),w,v))}}if(v.type==="element"){let w=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!w&&n&&typeof b=="number"&&(w=!n(v,b,_)),w&&_&&typeof b=="number")return f&&v.children?_.children.splice(b,1,...v.children):_.children.splice(b,1),b}}}function Jyt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Kyt.test(e.slice(0,t))?e:""}const E0e=/[#.]/g;function Zyt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){E0e.lastIndex=i;const a=E0e.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const e1t=new Set(["button","menu","reset","submit"]),NG={}.hasOwnProperty;function hRe(e,t,n){const r=n&&i1t(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Zyt(s,t),l.tagName=l.tagName.toLowerCase(),r&&NG.call(r,l.tagName)&&(l.tagName=r[l.tagName]),t1t(o,l.tagName)){let c;for(c in o)NG.call(o,c)&&n1t(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)PG(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function t1t(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?e1t.has(e.type.toLowerCase()):!("value"in e)}function n1t(e,t,n,r){const i=QL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Mme(r):i.commaSeparated?o=Rme(r):i.commaOrSpaceSeparated?o=Mme(Rme(r).join(" ")):o=S0e(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?r1t(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=S0e(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function PG(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)PG(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?PG(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function S0e(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||AR(n)===AR(t)))return!0}return n}function r1t(e){const t=[];let n;for(n in e)NG.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function i1t(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const s1t=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],o1t=hRe(mN,"div"),a1t=hRe(Ab,"g",s1t),Oz=/\r?\n|\r/g;function u1t(e){const t=String(e),n=[];for(Oz.lastIndex=0;Oz.test(t);)n.push(Oz.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const dw={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},pRe={}.hasOwnProperty,l1t=Object.prototype;function c1t(e,t){const n=t;return dte({file:n.file||void 0,location:!1,schema:n.space==="svg"?Ab:mN,verbose:n.verbose||!1},e)}function dte(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},eF(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:mRe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=u1t(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},eF(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},eF(e,r,n),n}default:return n=f1t(e,t),n}}function mRe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=dte(e,t[n]);r.push(i)}return r}function f1t(e,t){const n=e.schema;e.schema=t.namespaceURI===dw.svg?Ab:mN;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;pRe.call(l1t,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?a1t:o1t)(t.tagName,i,mRe(e,t.childNodes));if(eF(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&G2(u.startTag),c=u&&u.endTag&&G2(u.endTag),f=dte(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function eF(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=d1t(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function d1t(e,t,n){const r=G2(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)pRe.call(n.attrs,o)&&(s[QL(e.schema,o).property]=G2(n.attrs[o]));n.startTag;const a=G2(n.startTag),u=n.endTag?G2(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function G2(e){const t=C0e({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=C0e({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function C0e(e){return e.line&&e.column?e:void 0}const T0e={}.hasOwnProperty;function gRe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&T0e.call(i,e)){const u=String(i[e]);o=T0e.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const h1t={}.hasOwnProperty,yRe=gRe("type",{handlers:{root:m1t,element:x1t,text:v1t,comment:b1t,doctype:y1t}});function p1t(e,t){const r=t.space;return yRe(e,r==="svg"?Ab:mN)}function m1t(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=hte(e.children,n,t),UT(e,n),n}function g1t(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=hte(e.children,n,t),UT(e,n),n}function y1t(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return UT(e,t),t}function v1t(e){const t={nodeName:"#text",value:e.value,parentNode:null};return UT(e,t),t}function b1t(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return UT(e,t),t}function x1t(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Ab);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&h1t.call(e.properties,s)){const u=w1t(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:dw[o],childNodes:[],parentNode:null};return a.childNodes=hte(e.children,a,r),UT(e,a),e.tagName==="template"&&e.content&&(a.content=g1t(e.content,r)),a}function w1t(e,t,n){const r=QL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Ike(n):Lke(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=dw[r.space]}return i}function hte(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=yRe(e[r],n);s.parentNode=t,i.push(s)}return i}function UT(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const _1t=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],E1t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Rs="";var oe;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(oe=oe||(oe={}));const ic={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function vRe(e){return e>=55296&&e<=57343}function S1t(e){return e>=56320&&e<=57343}function C1t(e,t){return(e-55296)*1024+9216+t}function bRe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function xRe(e){return e>=64976&&e<=65007||E1t.has(e)}var We;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(We=We||(We={}));const T1t=65536;class A1t{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=T1t,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(S1t(n))return this.pos++,this._addGap(),C1t(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,oe.EOF;return this._err(We.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,oe.EOF;const r=this.html.charCodeAt(n);return r===oe.CARRIAGE_RETURN?oe.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,oe.EOF;let t=this.html.charCodeAt(this.pos);return t===oe.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,oe.LINE_FEED):t===oe.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,vRe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===oe.LINE_FEED||t===oe.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){bRe(t)?this._err(We.controlCharacterInInputStream):xRe(t)&&this._err(We.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Er;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Er=Er||(Er={}));function wRe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const l1=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),D1t=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Fz;const I1t=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),k1t=(Fz=String.fromCodePoint)!==null&&Fz!==void 0?Fz:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function R1t(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=I1t.get(e))!==null&&t!==void 0?t:e}var ka;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ka||(ka={}));const N1t=32;var xm;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(xm||(xm={}));function OG(e){return e>=ka.ZERO&&e<=ka.NINE}function P1t(e){return e>=ka.UPPER_A&&e<=ka.UPPER_F||e>=ka.LOWER_A&&e<=ka.LOWER_F}function O1t(e){return e>=ka.UPPER_A&&e<=ka.UPPER_Z||e>=ka.LOWER_A&&e<=ka.LOWER_Z||OG(e)}function F1t(e){return e===ka.EQUALS||O1t(e)}var Ea;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ea||(Ea={}));var Yx;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Yx||(Yx={}));class M1t{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ea.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Yx.Strict}startEntity(t){this.decodeMode=t,this.state=Ea.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ea.EntityStart:return t.charCodeAt(n)===ka.NUM?(this.state=Ea.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ea.NamedEntity,this.stateNamedEntity(t,n));case Ea.NumericStart:return this.stateNumericStart(t,n);case Ea.NumericDecimal:return this.stateNumericDecimal(t,n);case Ea.NumericHex:return this.stateNumericHex(t,n);case Ea.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|N1t)===ka.LOWER_X?(this.state=Ea.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ea.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(OG(i)||P1t(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(OG(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ka.SEMI)this.consumed+=1;else if(this.decodeMode===Yx.Strict)return 0;return this.emitCodePoint(R1t(this.result),this.consumed),this.errors&&(t!==ka.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&xm.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=ERe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Yx.Attribute&&(s===0||F1t(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&xm.VALUE_LENGTH)>>14,s!==0){if(o===ka.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Yx.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&xm.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~xm.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ea.NamedEntity:return this.result!==0&&(this.decodeMode!==Yx.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ea.NumericDecimal:return this.emitNumericEntity(0,2);case Ea.NumericHex:return this.emitNumericEntity(0,3);case Ea.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ea.EntityStart:return 0}}}function _Re(e){let t="";const n=new M1t(e,r=>t+=k1t(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function ERe(e,t,n,r){const i=(t&xm.BRANCH_LENGTH)>>7,s=t&xm.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}_Re(l1);_Re(D1t);var ot;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(ot=ot||(ot={}));var fv;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(fv=fv||(fv={}));var gf;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(gf=gf||(gf={}));var Le;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Le=Le||(Le={}));var M;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(M=M||(M={}));const $1t=new Map([[Le.A,M.A],[Le.ADDRESS,M.ADDRESS],[Le.ANNOTATION_XML,M.ANNOTATION_XML],[Le.APPLET,M.APPLET],[Le.AREA,M.AREA],[Le.ARTICLE,M.ARTICLE],[Le.ASIDE,M.ASIDE],[Le.B,M.B],[Le.BASE,M.BASE],[Le.BASEFONT,M.BASEFONT],[Le.BGSOUND,M.BGSOUND],[Le.BIG,M.BIG],[Le.BLOCKQUOTE,M.BLOCKQUOTE],[Le.BODY,M.BODY],[Le.BR,M.BR],[Le.BUTTON,M.BUTTON],[Le.CAPTION,M.CAPTION],[Le.CENTER,M.CENTER],[Le.CODE,M.CODE],[Le.COL,M.COL],[Le.COLGROUP,M.COLGROUP],[Le.DD,M.DD],[Le.DESC,M.DESC],[Le.DETAILS,M.DETAILS],[Le.DIALOG,M.DIALOG],[Le.DIR,M.DIR],[Le.DIV,M.DIV],[Le.DL,M.DL],[Le.DT,M.DT],[Le.EM,M.EM],[Le.EMBED,M.EMBED],[Le.FIELDSET,M.FIELDSET],[Le.FIGCAPTION,M.FIGCAPTION],[Le.FIGURE,M.FIGURE],[Le.FONT,M.FONT],[Le.FOOTER,M.FOOTER],[Le.FOREIGN_OBJECT,M.FOREIGN_OBJECT],[Le.FORM,M.FORM],[Le.FRAME,M.FRAME],[Le.FRAMESET,M.FRAMESET],[Le.H1,M.H1],[Le.H2,M.H2],[Le.H3,M.H3],[Le.H4,M.H4],[Le.H5,M.H5],[Le.H6,M.H6],[Le.HEAD,M.HEAD],[Le.HEADER,M.HEADER],[Le.HGROUP,M.HGROUP],[Le.HR,M.HR],[Le.HTML,M.HTML],[Le.I,M.I],[Le.IMG,M.IMG],[Le.IMAGE,M.IMAGE],[Le.INPUT,M.INPUT],[Le.IFRAME,M.IFRAME],[Le.KEYGEN,M.KEYGEN],[Le.LABEL,M.LABEL],[Le.LI,M.LI],[Le.LINK,M.LINK],[Le.LISTING,M.LISTING],[Le.MAIN,M.MAIN],[Le.MALIGNMARK,M.MALIGNMARK],[Le.MARQUEE,M.MARQUEE],[Le.MATH,M.MATH],[Le.MENU,M.MENU],[Le.META,M.META],[Le.MGLYPH,M.MGLYPH],[Le.MI,M.MI],[Le.MO,M.MO],[Le.MN,M.MN],[Le.MS,M.MS],[Le.MTEXT,M.MTEXT],[Le.NAV,M.NAV],[Le.NOBR,M.NOBR],[Le.NOFRAMES,M.NOFRAMES],[Le.NOEMBED,M.NOEMBED],[Le.NOSCRIPT,M.NOSCRIPT],[Le.OBJECT,M.OBJECT],[Le.OL,M.OL],[Le.OPTGROUP,M.OPTGROUP],[Le.OPTION,M.OPTION],[Le.P,M.P],[Le.PARAM,M.PARAM],[Le.PLAINTEXT,M.PLAINTEXT],[Le.PRE,M.PRE],[Le.RB,M.RB],[Le.RP,M.RP],[Le.RT,M.RT],[Le.RTC,M.RTC],[Le.RUBY,M.RUBY],[Le.S,M.S],[Le.SCRIPT,M.SCRIPT],[Le.SECTION,M.SECTION],[Le.SELECT,M.SELECT],[Le.SOURCE,M.SOURCE],[Le.SMALL,M.SMALL],[Le.SPAN,M.SPAN],[Le.STRIKE,M.STRIKE],[Le.STRONG,M.STRONG],[Le.STYLE,M.STYLE],[Le.SUB,M.SUB],[Le.SUMMARY,M.SUMMARY],[Le.SUP,M.SUP],[Le.TABLE,M.TABLE],[Le.TBODY,M.TBODY],[Le.TEMPLATE,M.TEMPLATE],[Le.TEXTAREA,M.TEXTAREA],[Le.TFOOT,M.TFOOT],[Le.TD,M.TD],[Le.TH,M.TH],[Le.THEAD,M.THEAD],[Le.TITLE,M.TITLE],[Le.TR,M.TR],[Le.TRACK,M.TRACK],[Le.TT,M.TT],[Le.U,M.U],[Le.UL,M.UL],[Le.SVG,M.SVG],[Le.VAR,M.VAR],[Le.WBR,M.WBR],[Le.XMP,M.XMP]]);function zT(e){var t;return(t=$1t.get(e))!==null&&t!==void 0?t:M.UNKNOWN}const St=M,L1t={[ot.HTML]:new Set([St.ADDRESS,St.APPLET,St.AREA,St.ARTICLE,St.ASIDE,St.BASE,St.BASEFONT,St.BGSOUND,St.BLOCKQUOTE,St.BODY,St.BR,St.BUTTON,St.CAPTION,St.CENTER,St.COL,St.COLGROUP,St.DD,St.DETAILS,St.DIR,St.DIV,St.DL,St.DT,St.EMBED,St.FIELDSET,St.FIGCAPTION,St.FIGURE,St.FOOTER,St.FORM,St.FRAME,St.FRAMESET,St.H1,St.H2,St.H3,St.H4,St.H5,St.H6,St.HEAD,St.HEADER,St.HGROUP,St.HR,St.HTML,St.IFRAME,St.IMG,St.INPUT,St.LI,St.LINK,St.LISTING,St.MAIN,St.MARQUEE,St.MENU,St.META,St.NAV,St.NOEMBED,St.NOFRAMES,St.NOSCRIPT,St.OBJECT,St.OL,St.P,St.PARAM,St.PLAINTEXT,St.PRE,St.SCRIPT,St.SECTION,St.SELECT,St.SOURCE,St.STYLE,St.SUMMARY,St.TABLE,St.TBODY,St.TD,St.TEMPLATE,St.TEXTAREA,St.TFOOT,St.TH,St.THEAD,St.TITLE,St.TR,St.TRACK,St.UL,St.WBR,St.XMP]),[ot.MATHML]:new Set([St.MI,St.MO,St.MN,St.MS,St.MTEXT,St.ANNOTATION_XML]),[ot.SVG]:new Set([St.TITLE,St.FOREIGN_OBJECT,St.DESC]),[ot.XLINK]:new Set,[ot.XML]:new Set,[ot.XMLNS]:new Set};function SRe(e){return e===St.H1||e===St.H2||e===St.H3||e===St.H4||e===St.H5||e===St.H6}Le.STYLE,Le.SCRIPT,Le.XMP,Le.IFRAME,Le.NOEMBED,Le.NOFRAMES,Le.PLAINTEXT;const B1t=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var le;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(le||(le={}));const Co={DATA:le.DATA,RCDATA:le.RCDATA,RAWTEXT:le.RAWTEXT,SCRIPT_DATA:le.SCRIPT_DATA,PLAINTEXT:le.PLAINTEXT,CDATA_SECTION:le.CDATA_SECTION};function hk(e){return e>=oe.DIGIT_0&&e<=oe.DIGIT_9}function dI(e){return e>=oe.LATIN_CAPITAL_A&&e<=oe.LATIN_CAPITAL_Z}function j1t(e){return e>=oe.LATIN_SMALL_A&&e<=oe.LATIN_SMALL_Z}function c1(e){return j1t(e)||dI(e)}function FG(e){return c1(e)||hk(e)}function CRe(e){return e>=oe.LATIN_CAPITAL_A&&e<=oe.LATIN_CAPITAL_F}function TRe(e){return e>=oe.LATIN_SMALL_A&&e<=oe.LATIN_SMALL_F}function U1t(e){return hk(e)||CRe(e)||TRe(e)}function u4(e){return e+32}function ARe(e){return e===oe.SPACE||e===oe.LINE_FEED||e===oe.TABULATION||e===oe.FORM_FEED}function z1t(e){return e===oe.EQUALS_SIGN||FG(e)}function A0e(e){return ARe(e)||e===oe.SOLIDUS||e===oe.GREATER_THAN_SIGN}class V1t{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=le.DATA,this.returnState=le.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new A1t(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Er.START_TAG,tagName:"",tagID:M.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Er.END_TAG,tagName:"",tagID:M.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Er.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Er.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(wRe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(We.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=zT(t.tagName),t.type===Er.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(We.endTagWithAttributes),t.selfClosing&&this._err(We.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Er.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Er.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Er.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Er.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=ARe(t)?Er.WHITESPACE_CHARACTER:t===oe.NULL?Er.NULL_CHARACTER:Er.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Er.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=l1[0];s>=0&&(s=ERe(l1,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=l1[s];const a=o&xm.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==oe.SEMICOLON&&this._isCharacterReferenceInAttribute()&&z1t(this.preprocessor.peek(1))?(n=[oe.AMPERSAND],s+=u):(n=u===0?[l1[s]&~xm.VALUE_LENGTH]:u===1?[l1[++s]]:[l1[++s],l1[++s]],r=0,i=t!==oe.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(We.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===le.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case le.DATA:{this._stateData(t);break}case le.RCDATA:{this._stateRcdata(t);break}case le.RAWTEXT:{this._stateRawtext(t);break}case le.SCRIPT_DATA:{this._stateScriptData(t);break}case le.PLAINTEXT:{this._statePlaintext(t);break}case le.TAG_OPEN:{this._stateTagOpen(t);break}case le.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case le.TAG_NAME:{this._stateTagName(t);break}case le.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case le.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case le.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case le.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case le.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case le.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case le.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case le.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case le.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case le.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case le.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case le.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case le.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case le.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case le.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case le.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case le.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case le.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case le.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case le.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case le.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case le.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case le.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case le.BOGUS_COMMENT:{this._stateBogusComment(t);break}case le.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case le.COMMENT_START:{this._stateCommentStart(t);break}case le.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case le.COMMENT:{this._stateComment(t);break}case le.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case le.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case le.COMMENT_END:{this._stateCommentEnd(t);break}case le.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case le.DOCTYPE:{this._stateDoctype(t);break}case le.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case le.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case le.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case le.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case le.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case le.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case le.CDATA_SECTION:{this._stateCdataSection(t);break}case le.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case le.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case le.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case le.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case le.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case le.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case le.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case le.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=le.TAG_OPEN;break}case oe.AMPERSAND:{this.returnState=le.DATA,this.state=le.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitCodePoint(t);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case oe.AMPERSAND:{this.returnState=le.RCDATA,this.state=le.CHARACTER_REFERENCE;break}case oe.LESS_THAN_SIGN:{this.state=le.RCDATA_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=le.RAWTEXT_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(c1(t))this._createStartTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case oe.EXCLAMATION_MARK:{this.state=le.MARKUP_DECLARATION_OPEN;break}case oe.SOLIDUS:{this.state=le.END_TAG_OPEN;break}case oe.QUESTION_MARK:{this._err(We.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t);break}case oe.EOF:{this._err(We.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(We.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=le.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(c1(t))this._createEndTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case oe.GREATER_THAN_SIGN:{this._err(We.missingEndTagName),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(We.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_ATTRIBUTE_NAME;break}case oe.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.tagName+=Rs;break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(dI(t)?u4(t):t)}}_stateRcdataLessThanSign(t){t===oe.SOLIDUS?this.state=le.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){c1(t)?(this.state=le.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=le.BEFORE_ATTRIBUTE_NAME,!1;case oe.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=le.SELF_CLOSING_START_TAG,!1;case oe.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=le.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===oe.SOLIDUS?this.state=le.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){c1(t)?(this.state=le.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case oe.SOLIDUS:{this.state=le.SCRIPT_DATA_END_TAG_OPEN;break}case oe.EXCLAMATION_MARK:{this.state=le.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=le.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){c1(t)?(this.state=le.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===oe.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===oe.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case oe.HYPHEN_MINUS:{this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===oe.SOLIDUS?this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:c1(t)?(this._emitChars("<"),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){c1(t)?(this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(ic.SCRIPT,!1)&&A0e(this.preprocessor.peek(ic.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ic.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case oe.HYPHEN_MINUS:{this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===oe.SOLIDUS?(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(ic.SCRIPT,!1)&&A0e(this.preprocessor.peek(ic.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ic.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.SOLIDUS:case oe.GREATER_THAN_SIGN:case oe.EOF:{this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case oe.EQUALS_SIGN:{this._err(We.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=le.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:case oe.SOLIDUS:case oe.GREATER_THAN_SIGN:case oe.EOF:{this._leaveAttrName(),this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case oe.EQUALS_SIGN:{this._leaveAttrName(),this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case oe.QUOTATION_MARK:case oe.APOSTROPHE:case oe.LESS_THAN_SIGN:{this._err(We.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.name+=Rs;break}default:this.currentAttr.name+=String.fromCodePoint(dI(t)?u4(t):t)}}_stateAfterAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case oe.EQUALS_SIGN:{this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{this.state=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this.state=le.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingAttributeValue),this.state=le.DATA,this.emitCurrentTagToken();break}default:this.state=le.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case oe.QUOTATION_MARK:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case oe.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case oe.APOSTROPHE:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case oe.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case oe.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_UNQUOTED,this.state=le.CHARACTER_REFERENCE;break}case oe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case oe.QUOTATION_MARK:case oe.APOSTROPHE:case oe.LESS_THAN_SIGN:case oe.EQUALS_SIGN:case oe.GRAVE_ACCENT:{this._err(We.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case oe.SOLIDUS:{this._leaveAttrValue(),this.state=le.SELF_CLOSING_START_TAG;break}case oe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._err(We.missingWhitespaceBetweenAttributes),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case oe.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=le.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._err(We.unexpectedSolidusInTag),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.data+=Rs;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(ic.DASH_DASH,!0)?(this._createCommentToken(ic.DASH_DASH.length+1),this.state=le.COMMENT_START):this._consumeSequenceIfMatch(ic.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(ic.DOCTYPE.length+1),this.state=le.DOCTYPE):this._consumeSequenceIfMatch(ic.CDATA_START,!0)?this.inForeignNode?this.state=le.CDATA_SECTION:(this._err(We.cdataInHtmlContent),this._createCommentToken(ic.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=le.BOGUS_COMMENT):this._ensureHibernation()||(this._err(We.incorrectlyOpenedComment),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_START_DASH;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptClosingOfEmptyComment),this.state=le.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptClosingOfEmptyComment),this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_END_DASH;break}case oe.LESS_THAN_SIGN:{n.data+="<",this.state=le.COMMENT_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.data+=Rs;break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case oe.EXCLAMATION_MARK:{n.data+="!",this.state=le.COMMENT_LESS_THAN_SIGN_BANG;break}case oe.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===oe.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=le.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===oe.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=le.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==oe.GREATER_THAN_SIGN&&t!==oe.EOF&&this._err(We.nestedComment),this.state=le.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EXCLAMATION_MARK:{this.state=le.COMMENT_END_BANG;break}case oe.HYPHEN_MINUS:{n.data+="-";break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{n.data+="--!",this.state=le.COMMENT_END_DASH;break}case oe.GREATER_THAN_SIGN:{this._err(We.incorrectlyClosedComment),this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=le.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case oe.EOF:{this._err(We.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingWhitespaceBeforeDoctypeName),this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(dI(t))this._createDoctypeToken(String.fromCharCode(u4(t))),this.state=le.DOCTYPE_NAME;else switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.NULL:{this._err(We.unexpectedNullCharacter),this._createDoctypeToken(Rs),this.state=le.DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=le.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.AFTER_DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.name+=Rs;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(dI(t)?u4(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(ic.PUBLIC,!1)?this.state=le.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(ic.SYSTEM,!1)?this.state=le.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(We.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.QUOTATION_MARK:{this._err(We.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(We.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case oe.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.publicId+=Rs;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case oe.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.publicId+=Rs;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.QUOTATION_MARK:{this._err(We.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(We.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.QUOTATION_MARK:{this._err(We.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(We.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case oe.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.systemId+=Rs;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case oe.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.systemId+=Rs;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.NULL:{this._err(We.unexpectedNullCharacter);break}case oe.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case oe.RIGHT_SQUARE_BRACKET:{this.state=le.CDATA_SECTION_BRACKET;break}case oe.EOF:{this._err(We.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===oe.RIGHT_SQUARE_BRACKET?this.state=le.CDATA_SECTION_END:(this._emitChars("]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case oe.GREATER_THAN_SIGN:{this.state=le.DATA;break}case oe.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===oe.NUMBER_SIGN?this.state=le.NUMERIC_CHARACTER_REFERENCE:FG(t)?(this.state=le.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this.state=le.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){FG(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===oe.SEMICOLON&&this._err(We.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===oe.LATIN_SMALL_X||t===oe.LATIN_CAPITAL_X?this.state=le.HEXADEMICAL_CHARACTER_REFERENCE_START:hk(t)?(this.state=le.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(We.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(oe.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){U1t(t)?(this.state=le.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(We.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(oe.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){CRe(t)?this.charRefCode=this.charRefCode*16+t-55:TRe(t)?this.charRefCode=this.charRefCode*16+t-87:hk(t)?this.charRefCode=this.charRefCode*16+t-48:t===oe.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(We.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){hk(t)?this.charRefCode=this.charRefCode*10+t-48:t===oe.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(We.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===oe.NULL)this._err(We.nullCharacterReference),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(We.characterReferenceOutsideUnicodeRange),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(vRe(this.charRefCode))this._err(We.surrogateCharacterReference),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(xRe(this.charRefCode))this._err(We.noncharacterCharacterReference);else if(bRe(this.charRefCode)||this.charRefCode===oe.CARRIAGE_RETURN){this._err(We.controlCharacterReference);const n=B1t.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const DRe=new Set([M.DD,M.DT,M.LI,M.OPTGROUP,M.OPTION,M.P,M.RB,M.RP,M.RT,M.RTC]),D0e=new Set([...DRe,M.CAPTION,M.COLGROUP,M.TBODY,M.TD,M.TFOOT,M.TH,M.THEAD,M.TR]),l4=new Map([[M.APPLET,ot.HTML],[M.CAPTION,ot.HTML],[M.HTML,ot.HTML],[M.MARQUEE,ot.HTML],[M.OBJECT,ot.HTML],[M.TABLE,ot.HTML],[M.TD,ot.HTML],[M.TEMPLATE,ot.HTML],[M.TH,ot.HTML],[M.ANNOTATION_XML,ot.MATHML],[M.MI,ot.MATHML],[M.MN,ot.MATHML],[M.MO,ot.MATHML],[M.MS,ot.MATHML],[M.MTEXT,ot.MATHML],[M.DESC,ot.SVG],[M.FOREIGN_OBJECT,ot.SVG],[M.TITLE,ot.SVG]]),H1t=[M.H1,M.H2,M.H3,M.H4,M.H5,M.H6],q1t=[M.TR,M.TEMPLATE,M.HTML],W1t=[M.TBODY,M.TFOOT,M.THEAD,M.TEMPLATE,M.HTML],G1t=[M.TABLE,M.TEMPLATE,M.HTML],Y1t=[M.TD,M.TH];class K1t{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=M.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===M.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ot.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ot.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(H1t,ot.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Y1t,ot.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(G1t,ot.HTML)}clearBackToTableBodyContext(){this.clearBackTo(W1t,ot.HTML)}clearBackToTableRowContext(){this.clearBackTo(q1t,ot.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===M.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===M.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if(l4.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(SRe(n)&&r===ot.HTML)return!0;if(l4.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if((r===M.UL||r===M.OL)&&i===ot.HTML||l4.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if(r===M.BUTTON&&i===ot.HTML||l4.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ot.HTML){if(r===t)return!0;if(r===M.TABLE||r===M.TEMPLATE||r===M.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ot.HTML){if(n===M.TBODY||n===M.THEAD||n===M.TFOOT)return!0;if(n===M.TABLE||n===M.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ot.HTML){if(r===t)return!0;if(r!==M.OPTION&&r!==M.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;DRe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;D0e.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&D0e.has(this.currentTagId);)this.pop()}}const Mz=3;var $h;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})($h=$h||($h={}));const I0e={type:$h.Marker};class X1t{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===$h.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Mz)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Mz)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=Mz&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(I0e)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:$h.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:$h.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(I0e);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===$h.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===$h.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===$h.Element&&n.element===t)}}function k0e(e){return{nodeName:"#text",value:e,parentNode:null}}const _2={createDocument(){return{nodeName:"#document",mode:gf.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};_2.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(_2.isTextNode(n)){n.value+=t;return}}_2.appendChild(e,k0e(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&_2.isTextNode(r)?r.value+=t:_2.insertBefore(e,k0e(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},IRe="html",Q1t="about:legacy-compat",J1t="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",kRe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Z1t=[...kRe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],evt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),RRe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],tvt=[...RRe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function R0e(e,t){return t.some(n=>e.startsWith(n))}function nvt(e){return e.name===IRe&&e.publicId===null&&(e.systemId===null||e.systemId===Q1t)}function rvt(e){if(e.name!==IRe)return gf.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===J1t)return gf.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),evt.has(n))return gf.QUIRKS;let r=t===null?Z1t:kRe;if(R0e(n,r))return gf.QUIRKS;if(r=t===null?RRe:tvt,R0e(n,r))return gf.LIMITED_QUIRKS}return gf.NO_QUIRKS}const N0e={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},ivt="definitionurl",svt="definitionURL",ovt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),avt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ot.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ot.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ot.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ot.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ot.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ot.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ot.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ot.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ot.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ot.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ot.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ot.XMLNS}]]),uvt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),lvt=new Set([M.B,M.BIG,M.BLOCKQUOTE,M.BODY,M.BR,M.CENTER,M.CODE,M.DD,M.DIV,M.DL,M.DT,M.EM,M.EMBED,M.H1,M.H2,M.H3,M.H4,M.H5,M.H6,M.HEAD,M.HR,M.I,M.IMG,M.LI,M.LISTING,M.MENU,M.META,M.NOBR,M.OL,M.P,M.PRE,M.RUBY,M.S,M.SMALL,M.SPAN,M.STRONG,M.STRIKE,M.SUB,M.SUP,M.TABLE,M.TT,M.U,M.UL,M.VAR]);function cvt(e){const t=e.tagID;return t===M.FONT&&e.attrs.some(({name:r})=>r===fv.COLOR||r===fv.SIZE||r===fv.FACE)||lvt.has(t)}function NRe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===ivt){e.attrs[t].name=svt;break}}function PRe(e){for(let t=0;t<e.attrs.length;t++){const n=ovt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function pte(e){for(let t=0;t<e.attrs.length;t++){const n=avt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function fvt(e){const t=uvt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=zT(e.tagName))}function dvt(e,t){return t===ot.MATHML&&(e===M.MI||e===M.MO||e===M.MN||e===M.MS||e===M.MTEXT)}function hvt(e,t,n){if(t===ot.MATHML&&e===M.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===fv.ENCODING){const i=n[r].value.toLowerCase();return i===N0e.TEXT_HTML||i===N0e.APPLICATION_XML}}return t===ot.SVG&&(e===M.FOREIGN_OBJECT||e===M.DESC||e===M.TITLE)}function pvt(e,t,n,r){return(!r||r===ot.HTML)&&hvt(e,t,n)||(!r||r===ot.MATHML)&&dvt(e,t)}const mvt="hidden",gvt=8,yvt=3;var ye;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ye||(ye={}));const vvt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},ORe=new Set([M.TABLE,M.TBODY,M.TFOOT,M.THEAD,M.TR]),P0e={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:_2,onParseError:null};let O0e=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ye.INITIAL,this.originalInsertionMode=ye.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...P0e,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new V1t(this.options,this),this.activeFormattingElements=new X1t(this.treeAdapter),this.fragmentContextID=r?zT(this.treeAdapter.getTagName(r)):M.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new K1t(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...P0e,...n};t??(t=r.treeAdapter.createElement(Le.TEMPLATE,ot.HTML,[]));const i=r.treeAdapter.createElement("documentmock",ot.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===M.TEMPLATE&&s.tmplInsertionModeStack.unshift(ye.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:vvt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===ot.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,ot.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ye.TEXT}switchToPlaintextParsing(){this.insertionMode=ye.TEXT,this.originalInsertionMode=ye.IN_BODY,this.tokenizer.state=Co.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Le.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ot.HTML))switch(this.fragmentContextID){case M.TITLE:case M.TEXTAREA:{this.tokenizer.state=Co.RCDATA;break}case M.STYLE:case M.XMP:case M.IFRAME:case M.NOEMBED:case M.NOFRAMES:case M.NOSCRIPT:{this.tokenizer.state=Co.RAWTEXT;break}case M.SCRIPT:{this.tokenizer.state=Co.SCRIPT_DATA;break}case M.PLAINTEXT:{this.tokenizer.state=Co.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,ot.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,ot.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Le.HTML,ot.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,M.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Er.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===M.SVG&&this.treeAdapter.getTagName(n)===Le.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ot.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===M.MGLYPH||t.tagID===M.MALIGNMARK)&&!this._isIntegrationPoint(r,n,ot.HTML)}_processToken(t){switch(t.type){case Er.CHARACTER:{this.onCharacter(t);break}case Er.NULL_CHARACTER:{this.onNullCharacter(t);break}case Er.COMMENT:{this.onComment(t);break}case Er.DOCTYPE:{this.onDoctype(t);break}case Er.START_TAG:{this._processStartTag(t);break}case Er.END_TAG:{this.onEndTag(t);break}case Er.EOF:{this.onEof(t);break}case Er.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return pvt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===$h.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ye.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(M.P),this.openElements.popUntilTagNamePopped(M.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case M.TR:{this.insertionMode=ye.IN_ROW;return}case M.TBODY:case M.THEAD:case M.TFOOT:{this.insertionMode=ye.IN_TABLE_BODY;return}case M.CAPTION:{this.insertionMode=ye.IN_CAPTION;return}case M.COLGROUP:{this.insertionMode=ye.IN_COLUMN_GROUP;return}case M.TABLE:{this.insertionMode=ye.IN_TABLE;return}case M.BODY:{this.insertionMode=ye.IN_BODY;return}case M.FRAMESET:{this.insertionMode=ye.IN_FRAMESET;return}case M.SELECT:{this._resetInsertionModeForSelect(t);return}case M.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case M.HTML:{this.insertionMode=this.headElement?ye.AFTER_HEAD:ye.BEFORE_HEAD;return}case M.TD:case M.TH:{if(t>0){this.insertionMode=ye.IN_CELL;return}break}case M.HEAD:{if(t>0){this.insertionMode=ye.IN_HEAD;return}break}}this.insertionMode=ye.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===M.TEMPLATE)break;if(r===M.TABLE){this.insertionMode=ye.IN_SELECT_IN_TABLE;return}}this.insertionMode=ye.IN_SELECT}_isElementCausesFosterParenting(t){return ORe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case M.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ot.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case M.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return L1t[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Ybt(this,t);return}switch(this.insertionMode){case ye.INITIAL:{bD(this,t);break}case ye.BEFORE_HTML:{pk(this,t);break}case ye.BEFORE_HEAD:{mk(this,t);break}case ye.IN_HEAD:{gk(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{yk(this,t);break}case ye.AFTER_HEAD:{vk(this,t);break}case ye.IN_BODY:case ye.IN_CAPTION:case ye.IN_CELL:case ye.IN_TEMPLATE:{MRe(this,t);break}case ye.TEXT:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{$z(this,t);break}case ye.IN_TABLE_TEXT:{zRe(this,t);break}case ye.IN_COLUMN_GROUP:{VM(this,t);break}case ye.AFTER_BODY:{HM(this,t);break}case ye.AFTER_AFTER_BODY:{tF(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Gbt(this,t);return}switch(this.insertionMode){case ye.INITIAL:{bD(this,t);break}case ye.BEFORE_HTML:{pk(this,t);break}case ye.BEFORE_HEAD:{mk(this,t);break}case ye.IN_HEAD:{gk(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{yk(this,t);break}case ye.AFTER_HEAD:{vk(this,t);break}case ye.TEXT:{this._insertCharacters(t);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{$z(this,t);break}case ye.IN_COLUMN_GROUP:{VM(this,t);break}case ye.AFTER_BODY:{HM(this,t);break}case ye.AFTER_AFTER_BODY:{tF(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){MG(this,t);return}switch(this.insertionMode){case ye.INITIAL:case ye.BEFORE_HTML:case ye.BEFORE_HEAD:case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:case ye.IN_BODY:case ye.IN_TABLE:case ye.IN_CAPTION:case ye.IN_COLUMN_GROUP:case ye.IN_TABLE_BODY:case ye.IN_ROW:case ye.IN_CELL:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:case ye.IN_TEMPLATE:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:{MG(this,t);break}case ye.IN_TABLE_TEXT:{xD(this,t);break}case ye.AFTER_BODY:{Cvt(this,t);break}case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{Tvt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ye.INITIAL:{Avt(this,t);break}case ye.BEFORE_HEAD:case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:{this._err(t,We.misplacedDoctype);break}case ye.IN_TABLE_TEXT:{xD(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,We.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Kbt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ye.INITIAL:{bD(this,t);break}case ye.BEFORE_HTML:{Dvt(this,t);break}case ye.BEFORE_HEAD:{kvt(this,t);break}case ye.IN_HEAD:{Cp(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{Pvt(this,t);break}case ye.AFTER_HEAD:{Fvt(this,t);break}case ye.IN_BODY:{ul(this,t);break}case ye.IN_TABLE:{fC(this,t);break}case ye.IN_TABLE_TEXT:{xD(this,t);break}case ye.IN_CAPTION:{Rbt(this,t);break}case ye.IN_COLUMN_GROUP:{yte(this,t);break}case ye.IN_TABLE_BODY:{iB(this,t);break}case ye.IN_ROW:{sB(this,t);break}case ye.IN_CELL:{Obt(this,t);break}case ye.IN_SELECT:{qRe(this,t);break}case ye.IN_SELECT_IN_TABLE:{Mbt(this,t);break}case ye.IN_TEMPLATE:{Lbt(this,t);break}case ye.AFTER_BODY:{jbt(this,t);break}case ye.IN_FRAMESET:{Ubt(this,t);break}case ye.AFTER_FRAMESET:{Vbt(this,t);break}case ye.AFTER_AFTER_BODY:{qbt(this,t);break}case ye.AFTER_AFTER_FRAMESET:{Wbt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Xbt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ye.INITIAL:{bD(this,t);break}case ye.BEFORE_HTML:{Ivt(this,t);break}case ye.BEFORE_HEAD:{Rvt(this,t);break}case ye.IN_HEAD:{Nvt(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{Ovt(this,t);break}case ye.AFTER_HEAD:{Mvt(this,t);break}case ye.IN_BODY:{rB(this,t);break}case ye.TEXT:{wbt(this,t);break}case ye.IN_TABLE:{IR(this,t);break}case ye.IN_TABLE_TEXT:{xD(this,t);break}case ye.IN_CAPTION:{Nbt(this,t);break}case ye.IN_COLUMN_GROUP:{Pbt(this,t);break}case ye.IN_TABLE_BODY:{$G(this,t);break}case ye.IN_ROW:{HRe(this,t);break}case ye.IN_CELL:{Fbt(this,t);break}case ye.IN_SELECT:{WRe(this,t);break}case ye.IN_SELECT_IN_TABLE:{$bt(this,t);break}case ye.IN_TEMPLATE:{Bbt(this,t);break}case ye.AFTER_BODY:{YRe(this,t);break}case ye.IN_FRAMESET:{zbt(this,t);break}case ye.AFTER_FRAMESET:{Hbt(this,t);break}case ye.AFTER_AFTER_BODY:{tF(this,t);break}}}onEof(t){switch(this.insertionMode){case ye.INITIAL:{bD(this,t);break}case ye.BEFORE_HTML:{pk(this,t);break}case ye.BEFORE_HEAD:{mk(this,t);break}case ye.IN_HEAD:{gk(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{yk(this,t);break}case ye.AFTER_HEAD:{vk(this,t);break}case ye.IN_BODY:case ye.IN_TABLE:case ye.IN_CAPTION:case ye.IN_COLUMN_GROUP:case ye.IN_TABLE_BODY:case ye.IN_ROW:case ye.IN_CELL:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:{jRe(this,t);break}case ye.TEXT:{_bt(this,t);break}case ye.IN_TABLE_TEXT:{xD(this,t);break}case ye.IN_TEMPLATE:{GRe(this,t);break}case ye.AFTER_BODY:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{gte(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===oe.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:case ye.TEXT:case ye.IN_COLUMN_GROUP:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:{this._insertCharacters(t);break}case ye.IN_BODY:case ye.IN_CAPTION:case ye.IN_CELL:case ye.IN_TEMPLATE:case ye.AFTER_BODY:case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{FRe(this,t);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{$z(this,t);break}case ye.IN_TABLE_TEXT:{URe(this,t);break}}}};function bvt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):BRe(e,t),n}function xvt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function wvt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=yvt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=_vt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function _vt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Evt(e,t,n){const r=e.treeAdapter.getTagName(t),i=zT(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===M.TEMPLATE&&s===ot.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Svt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function mte(e,t){for(let n=0;n<gvt;n++){const r=bvt(e,t);if(!r)break;const i=xvt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=wvt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Evt(e,o,s),Svt(e,i,r)}}function MG(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Cvt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Tvt(e,t){e._appendCommentNode(t,e.document)}function gte(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Avt(e,t){e._setDocumentType(t);const n=t.forceQuirks?gf.QUIRKS:rvt(t);nvt(t)||e._err(t,We.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ye.BEFORE_HTML}function bD(e,t){e._err(t,We.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,gf.QUIRKS),e.insertionMode=ye.BEFORE_HTML,e._processToken(t)}function Dvt(e,t){t.tagID===M.HTML?(e._insertElement(t,ot.HTML),e.insertionMode=ye.BEFORE_HEAD):pk(e,t)}function Ivt(e,t){const n=t.tagID;(n===M.HTML||n===M.HEAD||n===M.BODY||n===M.BR)&&pk(e,t)}function pk(e,t){e._insertFakeRootElement(),e.insertionMode=ye.BEFORE_HEAD,e._processToken(t)}function kvt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.HEAD:{e._insertElement(t,ot.HTML),e.headElement=e.openElements.current,e.insertionMode=ye.IN_HEAD;break}default:mk(e,t)}}function Rvt(e,t){const n=t.tagID;n===M.HEAD||n===M.BODY||n===M.HTML||n===M.BR?mk(e,t):e._err(t,We.endTagWithoutMatchingOpenElement)}function mk(e,t){e._insertFakeElement(Le.HEAD,M.HEAD),e.headElement=e.openElements.current,e.insertionMode=ye.IN_HEAD,e._processToken(t)}function Cp(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case M.TITLE:{e._switchToTextParsing(t,Co.RCDATA);break}case M.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Co.RAWTEXT):(e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_HEAD_NO_SCRIPT);break}case M.NOFRAMES:case M.STYLE:{e._switchToTextParsing(t,Co.RAWTEXT);break}case M.SCRIPT:{e._switchToTextParsing(t,Co.SCRIPT_DATA);break}case M.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ye.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ye.IN_TEMPLATE);break}case M.HEAD:{e._err(t,We.misplacedStartTagForHeadElement);break}default:gk(e,t)}}function Nvt(e,t){switch(t.tagID){case M.HEAD:{e.openElements.pop(),e.insertionMode=ye.AFTER_HEAD;break}case M.BODY:case M.BR:case M.HTML:{gk(e,t);break}case M.TEMPLATE:{H_(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function H_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==M.TEMPLATE&&e._err(t,We.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(M.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,We.endTagWithoutMatchingOpenElement)}function gk(e,t){e.openElements.pop(),e.insertionMode=ye.AFTER_HEAD,e._processToken(t)}function Pvt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.BASEFONT:case M.BGSOUND:case M.HEAD:case M.LINK:case M.META:case M.NOFRAMES:case M.STYLE:{Cp(e,t);break}case M.NOSCRIPT:{e._err(t,We.nestedNoscriptInHead);break}default:yk(e,t)}}function Ovt(e,t){switch(t.tagID){case M.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ye.IN_HEAD;break}case M.BR:{yk(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function yk(e,t){const n=t.type===Er.EOF?We.openElementsLeftAfterEof:We.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ye.IN_HEAD,e._processToken(t)}function Fvt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.BODY:{e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=ye.IN_BODY;break}case M.FRAMESET:{e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_FRAMESET;break}case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:case M.NOFRAMES:case M.SCRIPT:case M.STYLE:case M.TEMPLATE:case M.TITLE:{e._err(t,We.abandonedHeadElementChild),e.openElements.push(e.headElement,M.HEAD),Cp(e,t),e.openElements.remove(e.headElement);break}case M.HEAD:{e._err(t,We.misplacedStartTagForHeadElement);break}default:vk(e,t)}}function Mvt(e,t){switch(t.tagID){case M.BODY:case M.HTML:case M.BR:{vk(e,t);break}case M.TEMPLATE:{H_(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function vk(e,t){e._insertFakeElement(Le.BODY,M.BODY),e.insertionMode=ye.IN_BODY,nB(e,t)}function nB(e,t){switch(t.type){case Er.CHARACTER:{MRe(e,t);break}case Er.WHITESPACE_CHARACTER:{FRe(e,t);break}case Er.COMMENT:{MG(e,t);break}case Er.START_TAG:{ul(e,t);break}case Er.END_TAG:{rB(e,t);break}case Er.EOF:{jRe(e,t);break}}}function FRe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function MRe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function $vt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Lvt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Bvt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_FRAMESET)}function jvt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML)}function Uvt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),SRe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,ot.HTML)}function zvt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Vvt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML),n||(e.formElement=e.openElements.current))}function Hvt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===M.LI&&i===M.LI||(n===M.DD||n===M.DT)&&(i===M.DD||i===M.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==M.ADDRESS&&i!==M.DIV&&i!==M.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML)}function qvt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.tokenizer.state=Co.PLAINTEXT}function Wvt(e,t){e.openElements.hasInScope(M.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.framesetOk=!1}function Gvt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Le.A);n&&(mte(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Yvt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Kvt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(M.NOBR)&&(mte(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Xvt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Qvt(e,t){e.treeAdapter.getDocumentMode(e.document)!==gf.QUIRKS&&e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=ye.IN_TABLE}function $Re(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ot.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function LRe(e){const t=wRe(e,fv.TYPE);return t!=null&&t.toLowerCase()===mvt}function Jvt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ot.HTML),LRe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Zvt(e,t){e._appendElement(t,ot.HTML),t.ackSelfClosing=!0}function ebt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._appendElement(t,ot.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function tbt(e,t){t.tagName=Le.IMG,t.tagID=M.IMG,$Re(e,t)}function nbt(e,t){e._insertElement(t,ot.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Co.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ye.TEXT}function rbt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Co.RAWTEXT)}function ibt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Co.RAWTEXT)}function F0e(e,t){e._switchToTextParsing(t,Co.RAWTEXT)}function sbt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ye.IN_TABLE||e.insertionMode===ye.IN_CAPTION||e.insertionMode===ye.IN_TABLE_BODY||e.insertionMode===ye.IN_ROW||e.insertionMode===ye.IN_CELL?ye.IN_SELECT_IN_TABLE:ye.IN_SELECT}function obt(e,t){e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML)}function abt(e,t){e.openElements.hasInScope(M.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,ot.HTML)}function ubt(e,t){e.openElements.hasInScope(M.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(M.RTC),e._insertElement(t,ot.HTML)}function lbt(e,t){e._reconstructActiveFormattingElements(),NRe(t),pte(t),t.selfClosing?e._appendElement(t,ot.MATHML):e._insertElement(t,ot.MATHML),t.ackSelfClosing=!0}function cbt(e,t){e._reconstructActiveFormattingElements(),PRe(t),pte(t),t.selfClosing?e._appendElement(t,ot.SVG):e._insertElement(t,ot.SVG),t.ackSelfClosing=!0}function M0e(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML)}function ul(e,t){switch(t.tagID){case M.I:case M.S:case M.B:case M.U:case M.EM:case M.TT:case M.BIG:case M.CODE:case M.FONT:case M.SMALL:case M.STRIKE:case M.STRONG:{Yvt(e,t);break}case M.A:{Gvt(e,t);break}case M.H1:case M.H2:case M.H3:case M.H4:case M.H5:case M.H6:{Uvt(e,t);break}case M.P:case M.DL:case M.OL:case M.UL:case M.DIV:case M.DIR:case M.NAV:case M.MAIN:case M.MENU:case M.ASIDE:case M.CENTER:case M.FIGURE:case M.FOOTER:case M.HEADER:case M.HGROUP:case M.DIALOG:case M.DETAILS:case M.ADDRESS:case M.ARTICLE:case M.SECTION:case M.SUMMARY:case M.FIELDSET:case M.BLOCKQUOTE:case M.FIGCAPTION:{jvt(e,t);break}case M.LI:case M.DD:case M.DT:{Hvt(e,t);break}case M.BR:case M.IMG:case M.WBR:case M.AREA:case M.EMBED:case M.KEYGEN:{$Re(e,t);break}case M.HR:{ebt(e,t);break}case M.RB:case M.RTC:{abt(e,t);break}case M.RT:case M.RP:{ubt(e,t);break}case M.PRE:case M.LISTING:{zvt(e,t);break}case M.XMP:{rbt(e,t);break}case M.SVG:{cbt(e,t);break}case M.HTML:{$vt(e,t);break}case M.BASE:case M.LINK:case M.META:case M.STYLE:case M.TITLE:case M.SCRIPT:case M.BGSOUND:case M.BASEFONT:case M.TEMPLATE:{Cp(e,t);break}case M.BODY:{Lvt(e,t);break}case M.FORM:{Vvt(e,t);break}case M.NOBR:{Kvt(e,t);break}case M.MATH:{lbt(e,t);break}case M.TABLE:{Qvt(e,t);break}case M.INPUT:{Jvt(e,t);break}case M.PARAM:case M.TRACK:case M.SOURCE:{Zvt(e,t);break}case M.IMAGE:{tbt(e,t);break}case M.BUTTON:{Wvt(e,t);break}case M.APPLET:case M.OBJECT:case M.MARQUEE:{Xvt(e,t);break}case M.IFRAME:{ibt(e,t);break}case M.SELECT:{sbt(e,t);break}case M.OPTION:case M.OPTGROUP:{obt(e,t);break}case M.NOEMBED:{F0e(e,t);break}case M.FRAMESET:{Bvt(e,t);break}case M.TEXTAREA:{nbt(e,t);break}case M.NOSCRIPT:{e.options.scriptingEnabled?F0e(e,t):M0e(e,t);break}case M.PLAINTEXT:{qvt(e,t);break}case M.COL:case M.TH:case M.TD:case M.TR:case M.HEAD:case M.FRAME:case M.TBODY:case M.TFOOT:case M.THEAD:case M.CAPTION:case M.COLGROUP:break;default:M0e(e,t)}}function fbt(e,t){if(e.openElements.hasInScope(M.BODY)&&(e.insertionMode=ye.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function dbt(e,t){e.openElements.hasInScope(M.BODY)&&(e.insertionMode=ye.AFTER_BODY,YRe(e,t))}function hbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function pbt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(M.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(M.FORM):n&&e.openElements.remove(n))}function mbt(e){e.openElements.hasInButtonScope(M.P)||e._insertFakeElement(Le.P,M.P),e._closePElement()}function gbt(e){e.openElements.hasInListItemScope(M.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(M.LI),e.openElements.popUntilTagNamePopped(M.LI))}function ybt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function vbt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function bbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function xbt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Le.BR,M.BR),e.openElements.pop(),e.framesetOk=!1}function BRe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==M.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function rB(e,t){switch(t.tagID){case M.A:case M.B:case M.I:case M.S:case M.U:case M.EM:case M.TT:case M.BIG:case M.CODE:case M.FONT:case M.NOBR:case M.SMALL:case M.STRIKE:case M.STRONG:{mte(e,t);break}case M.P:{mbt(e);break}case M.DL:case M.UL:case M.OL:case M.DIR:case M.DIV:case M.NAV:case M.PRE:case M.MAIN:case M.MENU:case M.ASIDE:case M.BUTTON:case M.CENTER:case M.FIGURE:case M.FOOTER:case M.HEADER:case M.HGROUP:case M.DIALOG:case M.ADDRESS:case M.ARTICLE:case M.DETAILS:case M.SECTION:case M.SUMMARY:case M.LISTING:case M.FIELDSET:case M.BLOCKQUOTE:case M.FIGCAPTION:{hbt(e,t);break}case M.LI:{gbt(e);break}case M.DD:case M.DT:{ybt(e,t);break}case M.H1:case M.H2:case M.H3:case M.H4:case M.H5:case M.H6:{vbt(e);break}case M.BR:{xbt(e);break}case M.BODY:{fbt(e,t);break}case M.HTML:{dbt(e,t);break}case M.FORM:{pbt(e);break}case M.APPLET:case M.OBJECT:case M.MARQUEE:{bbt(e,t);break}case M.TEMPLATE:{H_(e,t);break}default:BRe(e,t)}}function jRe(e,t){e.tmplInsertionModeStack.length>0?GRe(e,t):gte(e,t)}function wbt(e,t){var n;t.tagID===M.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function _bt(e,t){e._err(t,We.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function $z(e,t){if(ORe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ye.IN_TABLE_TEXT,t.type){case Er.CHARACTER:{zRe(e,t);break}case Er.WHITESPACE_CHARACTER:{URe(e,t);break}}else yN(e,t)}function Ebt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_CAPTION}function Sbt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_COLUMN_GROUP}function Cbt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Le.COLGROUP,M.COLGROUP),e.insertionMode=ye.IN_COLUMN_GROUP,yte(e,t)}function Tbt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_TABLE_BODY}function Abt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Le.TBODY,M.TBODY),e.insertionMode=ye.IN_TABLE_BODY,iB(e,t)}function Dbt(e,t){e.openElements.hasInTableScope(M.TABLE)&&(e.openElements.popUntilTagNamePopped(M.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Ibt(e,t){LRe(t)?e._appendElement(t,ot.HTML):yN(e,t),t.ackSelfClosing=!0}function kbt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,ot.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function fC(e,t){switch(t.tagID){case M.TD:case M.TH:case M.TR:{Abt(e,t);break}case M.STYLE:case M.SCRIPT:case M.TEMPLATE:{Cp(e,t);break}case M.COL:{Cbt(e,t);break}case M.FORM:{kbt(e,t);break}case M.TABLE:{Dbt(e,t);break}case M.TBODY:case M.TFOOT:case M.THEAD:{Tbt(e,t);break}case M.INPUT:{Ibt(e,t);break}case M.CAPTION:{Ebt(e,t);break}case M.COLGROUP:{Sbt(e,t);break}default:yN(e,t)}}function IR(e,t){switch(t.tagID){case M.TABLE:{e.openElements.hasInTableScope(M.TABLE)&&(e.openElements.popUntilTagNamePopped(M.TABLE),e._resetInsertionMode());break}case M.TEMPLATE:{H_(e,t);break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TBODY:case M.TD:case M.TFOOT:case M.TH:case M.THEAD:case M.TR:break;default:yN(e,t)}}function yN(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,nB(e,t),e.fosterParentingEnabled=n}function URe(e,t){e.pendingCharacterTokens.push(t)}function zRe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function xD(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)yN(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const VRe=new Set([M.CAPTION,M.COL,M.COLGROUP,M.TBODY,M.TD,M.TFOOT,M.TH,M.THEAD,M.TR]);function Rbt(e,t){const n=t.tagID;VRe.has(n)?e.openElements.hasInTableScope(M.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ye.IN_TABLE,fC(e,t)):ul(e,t)}function Nbt(e,t){const n=t.tagID;switch(n){case M.CAPTION:case M.TABLE:{e.openElements.hasInTableScope(M.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ye.IN_TABLE,n===M.TABLE&&IR(e,t));break}case M.BODY:case M.COL:case M.COLGROUP:case M.HTML:case M.TBODY:case M.TD:case M.TFOOT:case M.TH:case M.THEAD:case M.TR:break;default:rB(e,t)}}function yte(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.COL:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case M.TEMPLATE:{Cp(e,t);break}default:VM(e,t)}}function Pbt(e,t){switch(t.tagID){case M.COLGROUP:{e.openElements.currentTagId===M.COLGROUP&&(e.openElements.pop(),e.insertionMode=ye.IN_TABLE);break}case M.TEMPLATE:{H_(e,t);break}case M.COL:break;default:VM(e,t)}}function VM(e,t){e.openElements.currentTagId===M.COLGROUP&&(e.openElements.pop(),e.insertionMode=ye.IN_TABLE,e._processToken(t))}function iB(e,t){switch(t.tagID){case M.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_ROW;break}case M.TH:case M.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Le.TR,M.TR),e.insertionMode=ye.IN_ROW,sB(e,t);break}case M.CAPTION:case M.COL:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE,fC(e,t));break}default:fC(e,t)}}function $G(e,t){const n=t.tagID;switch(t.tagID){case M.TBODY:case M.TFOOT:case M.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE);break}case M.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE,IR(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TD:case M.TH:case M.TR:break;default:IR(e,t)}}function sB(e,t){switch(t.tagID){case M.TH:case M.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_CELL,e.activeFormattingElements.insertMarker();break}case M.CAPTION:case M.COL:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:case M.TR:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY,iB(e,t));break}default:fC(e,t)}}function HRe(e,t){switch(t.tagID){case M.TR:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY);break}case M.TABLE:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY,$G(e,t));break}case M.TBODY:case M.TFOOT:case M.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(M.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY,$G(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TD:case M.TH:break;default:IR(e,t)}}function Obt(e,t){const n=t.tagID;VRe.has(n)?(e.openElements.hasInTableScope(M.TD)||e.openElements.hasInTableScope(M.TH))&&(e._closeTableCell(),sB(e,t)):ul(e,t)}function Fbt(e,t){const n=t.tagID;switch(n){case M.TD:case M.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ye.IN_ROW);break}case M.TABLE:case M.TBODY:case M.TFOOT:case M.THEAD:case M.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),HRe(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:break;default:rB(e,t)}}function qRe(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.OPTION:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e._insertElement(t,ot.HTML);break}case M.OPTGROUP:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e.openElements.currentTagId===M.OPTGROUP&&e.openElements.pop(),e._insertElement(t,ot.HTML);break}case M.INPUT:case M.KEYGEN:case M.TEXTAREA:case M.SELECT:{e.openElements.hasInSelectScope(M.SELECT)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),t.tagID!==M.SELECT&&e._processStartTag(t));break}case M.SCRIPT:case M.TEMPLATE:{Cp(e,t);break}}}function WRe(e,t){switch(t.tagID){case M.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===M.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===M.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===M.OPTGROUP&&e.openElements.pop();break}case M.OPTION:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop();break}case M.SELECT:{e.openElements.hasInSelectScope(M.SELECT)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode());break}case M.TEMPLATE:{H_(e,t);break}}}function Mbt(e,t){const n=t.tagID;n===M.CAPTION||n===M.TABLE||n===M.TBODY||n===M.TFOOT||n===M.THEAD||n===M.TR||n===M.TD||n===M.TH?(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),e._processStartTag(t)):qRe(e,t)}function $bt(e,t){const n=t.tagID;n===M.CAPTION||n===M.TABLE||n===M.TBODY||n===M.TFOOT||n===M.THEAD||n===M.TR||n===M.TD||n===M.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),e.onEndTag(t)):WRe(e,t)}function Lbt(e,t){switch(t.tagID){case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:case M.NOFRAMES:case M.SCRIPT:case M.STYLE:case M.TEMPLATE:case M.TITLE:{Cp(e,t);break}case M.CAPTION:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:{e.tmplInsertionModeStack[0]=ye.IN_TABLE,e.insertionMode=ye.IN_TABLE,fC(e,t);break}case M.COL:{e.tmplInsertionModeStack[0]=ye.IN_COLUMN_GROUP,e.insertionMode=ye.IN_COLUMN_GROUP,yte(e,t);break}case M.TR:{e.tmplInsertionModeStack[0]=ye.IN_TABLE_BODY,e.insertionMode=ye.IN_TABLE_BODY,iB(e,t);break}case M.TD:case M.TH:{e.tmplInsertionModeStack[0]=ye.IN_ROW,e.insertionMode=ye.IN_ROW,sB(e,t);break}default:e.tmplInsertionModeStack[0]=ye.IN_BODY,e.insertionMode=ye.IN_BODY,ul(e,t)}}function Bbt(e,t){t.tagID===M.TEMPLATE&&H_(e,t)}function GRe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(M.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):gte(e,t)}function jbt(e,t){t.tagID===M.HTML?ul(e,t):HM(e,t)}function YRe(e,t){var n;if(t.tagID===M.HTML){if(e.fragmentContext||(e.insertionMode=ye.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===M.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else HM(e,t)}function HM(e,t){e.insertionMode=ye.IN_BODY,nB(e,t)}function Ubt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.FRAMESET:{e._insertElement(t,ot.HTML);break}case M.FRAME:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case M.NOFRAMES:{Cp(e,t);break}}}function zbt(e,t){t.tagID===M.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==M.FRAMESET&&(e.insertionMode=ye.AFTER_FRAMESET))}function Vbt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.NOFRAMES:{Cp(e,t);break}}}function Hbt(e,t){t.tagID===M.HTML&&(e.insertionMode=ye.AFTER_AFTER_FRAMESET)}function qbt(e,t){t.tagID===M.HTML?ul(e,t):tF(e,t)}function tF(e,t){e.insertionMode=ye.IN_BODY,nB(e,t)}function Wbt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.NOFRAMES:{Cp(e,t);break}}}function Gbt(e,t){t.chars=Rs,e._insertCharacters(t)}function Ybt(e,t){e._insertCharacters(t),e.framesetOk=!1}function KRe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==ot.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Kbt(e,t){if(cvt(t))KRe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===ot.MATHML?NRe(t):r===ot.SVG&&(fvt(t),PRe(t)),pte(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Xbt(e,t){if(t.tagID===M.P||t.tagID===M.BR){KRe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===ot.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Le.AREA,Le.BASE,Le.BASEFONT,Le.BGSOUND,Le.BR,Le.COL,Le.EMBED,Le.FRAME,Le.HR,Le.IMG,Le.INPUT,Le.KEYGEN,Le.LINK,Le.META,Le.PARAM,Le.SOURCE,Le.TRACK,Le.WBR;const Qbt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),$0e={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function XRe(e,t){const n=axt(e),r=gRe("type",{handlers:{root:Jbt,element:Zbt,text:ext,comment:JRe,doctype:txt,raw:rxt},unknown:ixt}),i={parser:n?new O0e($0e):O0e.getFragmentParser(void 0,$0e),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),VT(i,h0());const s=n?i.parser.document:i.parser.getFragment(),o=c1t(s,{file:i.options.file});return i.stitches&&cte(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function QRe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Jbt(e,t){QRe(e.children,t)}function Zbt(e,t){sxt(e,t),QRe(e.children,t),oxt(e,t)}function ext(e,t){const n={type:Er.CHARACTER,chars:e.value,location:vN(e)};VT(t,h0(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function txt(e,t){const n={type:Er.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:vN(e)};VT(t,h0(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function nxt(e,t){t.stitches=!0;const n=uxt(e);if("children"in e&&"children"in n){const r=XRe({type:"root",children:e.children},t.options);n.children=r.children}JRe({type:"comment",value:{stitch:n}},t)}function JRe(e,t){const n=e.value,r={type:Er.COMMENT,data:n,location:vN(e)};VT(t,h0(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function rxt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,ZRe(t,h0(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function ixt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))nxt(n,t);else{let r="";throw Qbt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function VT(e,t){ZRe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Co.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function ZRe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function sxt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Co.PLAINTEXT)return;VT(t,h0(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:dw.html;i===dw.html&&n==="svg"&&(i=dw.svg);const s=p1t({...e,children:[]},{space:i===dw.svg?"svg":"html"}),o={type:Er.START_TAG,tagName:n,tagID:zT(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:vN(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function oxt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&_1t.includes(n)||t.parser.tokenizer.state===Co.PLAINTEXT)return;VT(t,JL(e));const r={type:Er.END_TAG,tagName:n,tagID:zT(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:vN(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Co.RCDATA||t.parser.tokenizer.state===Co.RAWTEXT||t.parser.tokenizer.state===Co.SCRIPT_DATA)&&(t.parser.tokenizer.state=Co.DATA)}function axt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function vN(e){const t=h0(e)||{line:void 0,column:void 0,offset:void 0},n=JL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function uxt(e){return"children"in e?cC({...e,children:[]}):cC(e)}function lxt(e){return function(t,n){return XRe(t,{...e,file:n})}}function el({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return E.jsx(Sb,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return E.jsx(tt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return E.jsx(lo,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return E.jsx(lo,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return E.jsx(lo,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return E.jsx(lo,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return E.jsx(lo,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return E.jsx(lo,{...s,order:6,...s,pb:12})},a({node:i,...s}){return E.jsx(_b,{...s,ref:void 0})},ul({node:i,...s}){return E.jsx(zu,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return E.jsx(zu,{type:"ordered",withPadding:!0,...o,pb:8})}};return E.jsx(Qyt,{components:n,rehypePlugins:[lxt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function nF({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return E.jsx(el,{text:n})}const YE=14;function cxt({completed:e,inProgress:t,rejected:n}){return E.jsxs(Jt,{ml:4,gap:4,children:[E.jsx(xs,{label:"Completed",children:E.jsx(lv,{variant:"light",color:"green",leftSection:E.jsx(Eke,{width:YE,height:YE,style:{paddingTop:1}}),pb:1,children:e})}),E.jsx(xs,{label:"In Progress",children:E.jsx(lv,{variant:"light",color:"orange",leftSection:E.jsx(Ske,{width:YE,height:YE,style:{paddingTop:1}}),pb:1,children:t})}),E.jsx(xs,{label:"Rejected",children:E.jsx(lv,{variant:"light",color:"red",leftSection:E.jsx(Jee,{width:YE,height:YE,style:{paddingTop:1}}),pb:1,children:n})})]})}const fxt="https://github.com/revisit-studies/study/tree/main/public/";function dxt({configName:e,config:t,url:n}){const{storageEngine:r}=Po(),[i,s]=N.useState(null);N.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=N.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=N.useState(null);N.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=N.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return E.jsx(kT,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?E.jsxs(E.Fragment,{children:[E.jsx(tt,{fw:"bold",children:e}),E.jsxs(Jt,{align:"center",direction:"row",children:[E.jsx(ck,{color:"red"}),E.jsx(tt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),E.jsx(nF,{issues:t.errors,type:"error"}),t.warnings.length>0&&E.jsxs(E.Fragment,{children:[E.jsxs(Jt,{align:"center",direction:"row",children:[E.jsx(ck,{color:"orange"}),E.jsx(tt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),E.jsx(nF,{issues:t.warnings,type:"warning"})]})]}):E.jsxs(E.Fragment,{children:[E.jsx(Jt,{direction:"row",justify:"space-between",children:E.jsx(tt,{fw:"bold",children:t.studyMetadata.title})}),E.jsxs(tt,{c:"dimmed",children:[E.jsx(tt,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),E.jsx(tt,{c:"dimmed",children:t.studyMetadata.description}),E.jsx(tt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:E.jsxs(_b,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${fxt}${n}`,children:["View source:"," ",n,E.jsx(cpt,{style:{width:ze(18),height:ze(18),marginLeft:ze(2),marginBottom:ze(-3)}})]})}),t.warnings.length>0&&E.jsxs(E.Fragment,{children:[E.jsxs(Jt,{align:"center",direction:"row",children:[E.jsx(ck,{color:"orange"}),E.jsx(tt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),E.jsx(nF,{issues:t.warnings,type:"warning"})]}),E.jsx(RT,{my:"md"}),E.jsxs(Jt,{direction:"row",gap:"sm",children:[E.jsxs(tt,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&E.jsx(cxt,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&E.jsxs(tt,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),E.jsxs(Jt,{direction:"row",align:"end",gap:"sm",mt:"md",children:[E.jsx(bn,{leftSection:E.jsx(_ke,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${Ll}analysis/stats/${n}`,children:"Analyze & Manage Study"}),E.jsx(bn,{leftSection:E.jsx(hpt,{}),component:"a",href:`${Ll}${n}`,children:"Go to Study"})]})]})},e)}function KE({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=Dke(n);return E.jsx(dxt,{configName:n,config:r,url:i},n)})}function hxt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=n.filter(l=>l.startsWith("demo-")),i=n.filter(l=>l.startsWith("tutorial-")),s=n.filter(l=>l.startsWith("example-")),o=n.filter(l=>l.startsWith("test-")),a=n.filter(l=>l.startsWith("library-")),u=n.filter(l=>!l.startsWith("demo-")&&!l.startsWith("tutorial-")&&!l.startsWith("example-")&&!l.startsWith("test-")&&!l.startsWith("library-"));return E.jsx(Yi.Main,{children:E.jsxs(Bf,{size:"sm",px:0,children:[E.jsx(Sb,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Ll}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),E.jsxs(qr,{variant:"outline",defaultValue:u.length>0?"Others":"Demos",children:[E.jsxs(qr.List,{children:[u.length>0&&E.jsx(qr.Tab,{value:"Others",children:"Your Studies"}),E.jsx(qr.Tab,{value:"Demos",children:"Demo Studies"}),E.jsx(qr.Tab,{value:"Examples",children:"Example Studies"}),E.jsx(qr.Tab,{value:"Tutorials",children:"Tutorials"}),E.jsx(qr.Tab,{value:"Tests",children:"Tests"}),E.jsx(qr.Tab,{value:"Libraries",children:"Libraries"})]}),u.length>0&&E.jsx(qr.Panel,{value:"Others",children:E.jsx(KE,{configNames:u,studyConfigs:t})}),E.jsxs(qr.Panel,{value:"Demos",children:[E.jsx(tt,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),E.jsx(KE,{configNames:r,studyConfigs:t})]}),E.jsxs(qr.Panel,{value:"Examples",children:[E.jsx(tt,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),E.jsx(KE,{configNames:s,studyConfigs:t})]}),E.jsxs(qr.Panel,{value:"Tutorials",children:[E.jsx(tt,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),E.jsx(KE,{configNames:i,studyConfigs:t})]}),E.jsxs(qr.Panel,{value:"Tests",children:[E.jsx(tt,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),E.jsx(KE,{configNames:o,studyConfigs:t})]}),E.jsxs(qr.Panel,{value:"Libraries",children:[E.jsx(tt,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish"}),E.jsx(KE,{configNames:a,studyConfigs:t})]})]})]})})}var e3e={exports:{}},t3e={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bN=N;function pxt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mxt=typeof Object.is=="function"?Object.is:pxt,gxt=bN.useSyncExternalStore,yxt=bN.useRef,vxt=bN.useEffect,bxt=bN.useMemo,xxt=bN.useDebugValue;t3e.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=yxt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=bxt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,mxt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=gxt(e,s[0],s[1]);return vxt(function(){o.hasValue=!0,o.value=a},[a]),xxt(a),a};e3e.exports=t3e;var wxt=e3e.exports,Cf="default"in rM?yi:rM,L0e=Symbol.for("react-redux-context"),B0e=typeof globalThis<"u"?globalThis:{};function _xt(){if(!Cf.createContext)return{};const e=B0e[L0e]??(B0e[L0e]=new Map);let t=e.get(Cf.createContext);return t||(t=Cf.createContext(null),e.set(Cf.createContext,t)),t}var kv=_xt(),Ext=()=>{throw new Error("uSES not initialized!")};function vte(e=kv){return function(){return Cf.useContext(e)}}var n3e=vte(),r3e=Ext,Sxt=e=>{r3e=e},Cxt=(e,t)=>e===t;function Txt(e=kv){const t=e===kv?n3e:vte(e),n=(r,i={})=>{const{equalityFn:s=Cxt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Cf.useRef(!0);const d=Cf.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=r3e(u.addNestedSub,a.getState,l||a.getState,d,s);return Cf.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Axt=Txt();function Dxt(e){e()}function Ixt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Dxt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var j0e={notify(){},get:()=>[]};function kxt(e,t){let n,r=j0e,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Ixt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=j0e)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Rxt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nxt=typeof navigator<"u"&&navigator.product==="ReactNative",Pxt=Rxt||Nxt?Cf.useLayoutEffect:Cf.useEffect;function Oxt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Cf.useMemo(()=>{const l=kxt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Cf.useMemo(()=>e.getState(),[e]);Pxt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||kv;return Cf.createElement(u.Provider,{value:o},n)}var Fxt=Oxt;function i3e(e=kv){const t=e===kv?n3e:vte(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Mxt=i3e();function $xt(e=kv){const t=e===kv?Mxt:i3e(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var s3e=$xt();Sxt(wxt.useSyncExternalStoreWithSelector);function Ja(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Lxt=typeof Symbol=="function"&&Symbol.observable||"@@observable",U0e=Lxt,Lz=()=>Math.random().toString(36).substring(7).split("").join("."),Bxt={INIT:`@@redux/INIT${Lz()}`,REPLACE:`@@redux/REPLACE${Lz()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Lz()}`},qM=Bxt;function bte(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function o3e(e,t,n){if(typeof e!="function")throw new Error(Ja(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ja(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ja(1));return n(o3e)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Ja(3));return i}function f(g){if(typeof g!="function")throw new Error(Ja(4));if(u)throw new Error(Ja(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Ja(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!bte(g))throw new Error(Ja(7));if(typeof g.type>"u")throw new Error(Ja(8));if(typeof g.type!="string")throw new Error(Ja(17));if(u)throw new Error(Ja(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Ja(10));r=g,d({type:qM.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Ja(11));function v(){const _=y;_.next&&_.next(c())}return v(),{unsubscribe:g(v)}},[U0e](){return this}}}return d({type:qM.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[U0e]:p}}function jxt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:qM.INIT})>"u")throw new Error(Ja(12));if(typeof n(void 0,{type:qM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ja(13))})}function Uxt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{jxt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Ja(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function WM(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function zxt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Ja(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=WM(...a)(i.dispatch),{...i,dispatch:s}}}function Vxt(e){return bte(e)&&"type"in e&&typeof e.type=="string"}var a3e=Symbol.for("immer-nothing"),z0e=Symbol.for("immer-draftable"),Uf=Symbol.for("immer-state");function Bh(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var dC=Object.getPrototypeOf;function Rv(e){return!!e&&!!e[Uf]}function ty(e){var t;return e?u3e(e)||Array.isArray(e)||!!e[z0e]||!!((t=e.constructor)!=null&&t[z0e])||aB(e)||uB(e):!1}var Hxt=Object.prototype.constructor.toString();function u3e(e){if(!e||typeof e!="object")return!1;const t=dC(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Hxt}function GM(e,t){oB(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function oB(e){const t=e[Uf];return t?t.type_:Array.isArray(e)?1:aB(e)?2:uB(e)?3:0}function LG(e,t){return oB(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function l3e(e,t,n){const r=oB(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function qxt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function aB(e){return e instanceof Map}function uB(e){return e instanceof Set}function Px(e){return e.copy_||e.base_}function BG(e,t){if(aB(e))return new Map(e);if(uB(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=u3e(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Uf];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(dC(e),r)}else{const r=dC(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function xte(e,t=!1){return lB(e)||Rv(e)||!ty(e)||(oB(e)>1&&(e.set=e.add=e.clear=e.delete=Wxt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>xte(r,!0))),e}function Wxt(){Bh(2)}function lB(e){return Object.isFrozen(e)}var Gxt={};function Yw(e){const t=Gxt[e];return t||Bh(0,e),t}var kR;function c3e(){return kR}function Yxt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function V0e(e,t){t&&(Yw("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function jG(e){UG(e),e.drafts_.forEach(Kxt),e.drafts_=null}function UG(e){e===kR&&(kR=e.parent_)}function H0e(e){return kR=Yxt(kR,e)}function Kxt(e){const t=e[Uf];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function q0e(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Uf].modified_&&(jG(t),Bh(4)),ty(e)&&(e=YM(t,e),t.parent_||KM(t,e)),t.patches_&&Yw("Patches").generateReplacementPatches_(n[Uf].base_,e,t.patches_,t.inversePatches_)):e=YM(t,n,[]),jG(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==a3e?e:void 0}function YM(e,t,n){if(lB(t))return t;const r=t[Uf];if(!r)return GM(t,(i,s)=>W0e(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return KM(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),GM(s,(a,u)=>W0e(e,r,i,a,u,n,o)),KM(e,i,!1),n&&e.patches_&&Yw("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function W0e(e,t,n,r,i,s,o){if(Rv(i)){const a=s&&t&&t.type_!==3&&!LG(t.assigned_,r)?s.concat(r):void 0,u=YM(e,i,a);if(l3e(n,r,u),Rv(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ty(i)&&!lB(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;YM(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&KM(e,i)}}function KM(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&xte(t,n)}function Xxt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:c3e(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=wte;n&&(i=[r],s=RR);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var wte={get(e,t){if(t===Uf)return e;const n=Px(e);if(!LG(n,t))return Qxt(e,n,t);const r=n[t];return e.finalized_||!ty(r)?r:r===Bz(e.base_,t)?(jz(e),e.copy_[t]=VG(r,e)):r},has(e,t){return t in Px(e)},ownKeys(e){return Reflect.ownKeys(Px(e))},set(e,t,n){const r=f3e(Px(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Bz(Px(e),t),s=i==null?void 0:i[Uf];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(qxt(n,i)&&(n!==void 0||LG(e.base_,t)))return!0;jz(e),zG(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Bz(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,jz(e),zG(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Px(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Bh(11)},getPrototypeOf(e){return dC(e.base_)},setPrototypeOf(){Bh(12)}},RR={};GM(wte,(e,t)=>{RR[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});RR.deleteProperty=function(e,t){return RR.set.call(this,e,t,void 0)};RR.set=function(e,t,n){return wte.set.call(this,e[0],t,n,e[0])};function Bz(e,t){const n=e[Uf];return(n?Px(n):e)[t]}function Qxt(e,t,n){var i;const r=f3e(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function f3e(e,t){if(!(t in e))return;let n=dC(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=dC(n)}}function zG(e){e.modified_||(e.modified_=!0,e.parent_&&zG(e.parent_))}function jz(e){e.copy_||(e.copy_=BG(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Jxt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&Bh(6),r!==void 0&&typeof r!="function"&&Bh(7);let i;if(ty(t)){const s=H0e(this),o=VG(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?jG(s):UG(s)}return V0e(s,r),q0e(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===a3e&&(i=void 0),this.autoFreeze_&&xte(i,!0),r){const s=[],o=[];Yw("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Bh(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ty(e)||Bh(8),Rv(e)&&(e=d3e(e));const t=H0e(this),n=VG(e,void 0);return n[Uf].isManual_=!0,UG(t),n}finishDraft(e,t){const n=e&&e[Uf];(!n||!n.isManual_)&&Bh(9);const{scope_:r}=n;return V0e(r,t),q0e(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Yw("Patches").applyPatches_;return Rv(e)?r(e,t):this.produce(e,i=>r(i,t))}};function VG(e,t){const n=aB(e)?Yw("MapSet").proxyMap_(e,t):uB(e)?Yw("MapSet").proxySet_(e,t):Xxt(e,t);return(t?t.scope_:c3e()).drafts_.push(n),n}function d3e(e){return Rv(e)||Bh(10,e),h3e(e)}function h3e(e){if(!ty(e)||lB(e))return e;const t=e[Uf];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=BG(e,t.scope_.immer_.useStrictShallowCopy_)}else n=BG(e,!0);return GM(n,(r,i)=>{l3e(n,r,h3e(i))}),t&&(t.finalized_=!1),n}var zf=new Jxt,p3e=zf.produce;zf.produceWithPatches.bind(zf);zf.setAutoFreeze.bind(zf);zf.setUseStrictShallowCopy.bind(zf);zf.applyPatches.bind(zf);zf.createDraft.bind(zf);zf.finishDraft.bind(zf);function Zxt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function ewt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function twt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var G0e=e=>Array.isArray(e)?e:[e];function nwt(e){const t=Array.isArray(e[0])?e[0]:e;return twt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function rwt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var iwt=class{constructor(e){this.value=e}deref(){return this.value}},swt=typeof WeakRef<"u"?WeakRef:iwt,owt=0,Y0e=1;function c4(){return{s:owt,v:void 0,o:null,p:null}}function _te(e,t={}){let n=c4();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=c4(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=c4(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Y0e)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new swt(c):c}return l.s=Y0e,l.v=c,c}return o.clearCache=()=>{n=c4(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function m3e(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Zxt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=_te,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=G0e(d),y=G0e(p),v=nwt(i),b=f(function(){return s++,l.apply(null,arguments)},...g),_=h(function(){o++;const S=rwt(v,arguments);return a=b.apply(null,S),a},...y);return Object.assign(_,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var g3e=m3e(_te),awt=Object.assign((e,t=g3e)=>{ewt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>awt});function y3e(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var uwt=y3e(),lwt=y3e,cwt=(...e)=>{const t=m3e(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(Rv(o)?d3e(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};cwt(_te);var fwt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?WM:WM.apply(null,arguments)};function hC(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error($c(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Vxt(r)&&r.type===e,n}var v3e=class hI extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,hI.prototype)}static get[Symbol.species](){return hI}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new hI(...t[0].concat(this)):new hI(...t.concat(this))}};function K0e(e){return ty(e)?p3e(e,()=>{}):e}function X0e(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error($c(10));const r=n.insert(t,e);return e.set(t,r),r}function dwt(e){return typeof e=="boolean"}var hwt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new v3e;return n&&(dwt(n)?o.push(uwt):o.push(lwt(n.extraArgument))),o},pwt="RTK_autoBatch",b3e=e=>t=>{setTimeout(t,e)},mwt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:b3e(10),gwt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?mwt:e.type==="callback"?e.queueNotification:b3e(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[pwt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},ywt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new v3e(e);return r&&i.push(gwt(typeof r=="object"?r:void 0)),i};function vwt(e){const t=hwt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(bte(n))a=Uxt(n);else throw new Error($c(1));let u;typeof r=="function"?u=r(t):u=t();let l=WM;i&&(l=fwt({trace:!1,...typeof i=="object"&&i}));const c=zxt(...u),f=ywt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return o3e(a,s,h)}function x3e(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error($c(28));if(a in t)throw new Error($c(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function bwt(e){return typeof e=="function"}function xwt(e,t){let[n,r,i]=x3e(t),s;if(bwt(e))s=()=>K0e(e());else{const a=K0e(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(Rv(c)){const h=f(c,u);return h===void 0?c:h}else{if(ty(c))return p3e(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error($c(9))}return d}}return c},a)}return o.getInitialState=s,o}var wwt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",_wt=(e=21)=>{let t="",n=e;for(;n--;)t+=wwt[Math.random()*64|0];return t},Ewt=Symbol.for("rtk-slice-createasyncthunk");function Swt(e,t){return`${e}/${t}`}function Cwt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Ewt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error($c(11));const a=(typeof i.reducers=="function"?i.reducers(Dwt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,_){const w=typeof b=="string"?b:b.type;if(!w)throw new Error($c(12));if(w in l.sliceCaseReducersByType)throw new Error($c(13));return l.sliceCaseReducersByType[w]=_,c},addMatcher(b,_){return l.sliceMatchers.push({matcher:b,reducer:_}),c},exposeAction(b,_){return l.actionCreators[b]=_,c},exposeCaseReducer(b,_){return l.sliceCaseReducersByName[b]=_,c}};u.forEach(b=>{const _=a[b],w={reducerName:b,type:Swt(s,b),createNotation:typeof i.reducers=="function"};kwt(_)?Nwt(w,_,c,t):Iwt(w,_,c)});function f(){const[b={},_=[],w=void 0]=typeof i.extraReducers=="function"?x3e(i.extraReducers):[i.extraReducers],S={...b,...l.sliceCaseReducersByType};return xwt(i.initialState,T=>{for(let A in S)T.addCase(A,S[A]);for(let A of l.sliceMatchers)T.addMatcher(A.matcher,A.reducer);for(let A of _)T.addMatcher(A.matcher,A.reducer);w&&T.addDefaultCase(w)})}const d=b=>b,h=new Map;let p;function m(b,_){return p||(p=f()),p(b,_)}function g(){return p||(p=f()),p.getInitialState()}function y(b,_=!1){function w(T){let A=T[b];return typeof A>"u"&&_&&(A=g()),A}function S(T=d){const A=X0e(h,_,{insert:()=>new WeakMap});return X0e(A,T,{insert:()=>{const k={};for(const[I,R]of Object.entries(i.selectors??{}))k[I]=Twt(R,T,g,_);return k}})}return{reducerPath:b,getSelectors:S,get selectors(){return S(w)},selectSlice:w}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:_,...w}={}){const S=_??o;return b.inject({reducerPath:S,reducer:m},w),{...v,...y(S,!0)}}};return v}}function Twt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Awt=Cwt();function Dwt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Iwt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Rwt(r))throw new Error($c(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?hC(e,o):hC(e))}function kwt(e){return e._reducerDefinitionType==="asyncThunk"}function Rwt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Nwt({type:e,reducerName:t},n,r,i){if(!i)throw new Error($c(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||f4,pending:a||f4,rejected:u||f4,settled:l||f4})}function f4(){}var Pwt=(e,t)=>{if(typeof e!="function")throw new Error($c(32))},Ete="listenerMiddleware",Owt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=hC(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error($c(21));return Pwt(s),{predicate:i,type:t,effect:s}},Fwt=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Owt(e);return{id:_wt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error($c(22))}}},{withTypes:()=>Fwt}),Mwt=Object.assign(hC(`${Ete}/add`),{withTypes:()=>Mwt});hC(`${Ete}/removeAll`);var $wt=Object.assign(hC(`${Ete}/remove`),{withTypes:()=>$wt});function $c(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function hp(e){return e.components.flatMap(t=>typeof t=="string"?t:hp(t))}function w3e(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:w3e(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function _3e(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+hp(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+hp(e).length-1}];r+=1}else{const o=_3e(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function Ste(e,t){const n=_3e(e,t,0);return typeof n=="number"?null:n}function E3e(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=E3e(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Lwt(e,t){const n=E3e(e,t,0);return n.found?n.distance:-1}function S3e(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...S3e(i,`${t}-${s}`))}),n}function Cte(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>Cte(n,`${t}-${r}`))}}async function Bwt(e,t,n,r,i,s,o){const a=hp(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=Awt({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setIframeAnswers:(p,m)=>{p.iframeAnswers=m.payload},setIframeProvenance:(p,m)=>{p.iframeProvenance=m.payload},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:y,val:v}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[y]:v}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:y,questionKey:v,value:b,isChecked:_,choiceOptions:w}=m.payload,S=((g=p.matrixAnswers[y])==null?void 0:g[v])??"";let T="";_?S.length>0?T=[...S.split("|"),b].sort((A,k)=>w.map(I=>I.value).indexOf(A)-w.map(I=>I.value).indexOf(k)).join("|"):T=`${b}`:T=S.split("|").filter(A=>A!==b).join("|"),p.matrixAnswers={...p.matrixAnswers,[y]:{...p.matrixAnswers[y],[v]:T}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:y,startTime:v,endTime:b,provenanceGraph:_,windowEvents:w,timedOut:S,incorrectAnswers:T,helpButtonClickedCount:A}=m;p.answers[g]={incorrectAnswers:T,answer:y,startTime:v,endTime:b,provenanceGraph:_,windowEvents:w,timedOut:S,helpButtonClickedCount:A}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:y,question:v}=m;p.answers[v].incorrectAnswers||(p.answers[v].incorrectAnswers={}),p.answers[v].incorrectAnswers[g]||(p.answers[v].incorrectAnswers[g]={id:g,value:[]}),p.answers[v].incorrectAnswers[g].value.push(y)}}});return{store:vwt({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const C3e=N.createContext(null);function Bl(){return N.useContext(C3e).actions}const ef=s3e,vi=Axt;function jwt(e){return vi(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const Uwt=g3e(e=>e.sequence,e=>hp(e));function Tte(){return vi(Uwt)}var T3e={exports:{}};function pI(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Uz={exports:{}};const zwt={},Vwt=Object.freeze(Object.defineProperty({__proto__:null,default:zwt},Symbol.toStringTag,{value:"Module"})),A3e=ret(Vwt);var Q0e;function Qr(){return Q0e||(Q0e=1,function(e,t){(function(n,r){e.exports=r()})(on,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof on<"u"&&on.crypto&&(s=on.crypto),!s&&typeof pI=="function")try{s=A3e}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(b){var _;return v.prototype=b,_=new v,v.prototype=null,_}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(v){var b=a(this);return v&&b.mixIn(v),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var b in v)v.hasOwnProperty(b)&&(this[b]=v[b]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(v,b){v=this.words=v||[],b!=i?this.sigBytes=b:this.sigBytes=v.length*4},toString:function(v){return(v||h).stringify(this)},concat:function(v){var b=this.words,_=v.words,w=this.sigBytes,S=v.sigBytes;if(this.clamp(),w%4)for(var T=0;T<S;T++){var A=_[T>>>2]>>>24-T%4*8&255;b[w+T>>>2]|=A<<24-(w+T)%4*8}else for(var k=0;k<S;k+=4)b[w+k>>>2]=_[k>>>2];return this.sigBytes+=S,this},clamp:function(){var v=this.words,b=this.sigBytes;v[b>>>2]&=4294967295<<32-b%4*8,v.length=r.ceil(b/4)},clone:function(){var v=c.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var b=[],_=0;_<v;_+=4)b.push(o());return new f.init(b,v)}}),d=u.enc={},h=d.Hex={stringify:function(v){for(var b=v.words,_=v.sigBytes,w=[],S=0;S<_;S++){var T=b[S>>>2]>>>24-S%4*8&255;w.push((T>>>4).toString(16)),w.push((T&15).toString(16))}return w.join("")},parse:function(v){for(var b=v.length,_=[],w=0;w<b;w+=2)_[w>>>3]|=parseInt(v.substr(w,2),16)<<24-w%8*4;return new f.init(_,b/2)}},p=d.Latin1={stringify:function(v){for(var b=v.words,_=v.sigBytes,w=[],S=0;S<_;S++){var T=b[S>>>2]>>>24-S%4*8&255;w.push(String.fromCharCode(T))}return w.join("")},parse:function(v){for(var b=v.length,_=[],w=0;w<b;w++)_[w>>>2]|=(v.charCodeAt(w)&255)<<24-w%4*8;return new f.init(_,b)}},m=d.Utf8={stringify:function(v){try{return decodeURIComponent(escape(p.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return p.parse(unescape(encodeURIComponent(v)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=m.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var b,_=this._data,w=_.words,S=_.sigBytes,T=this.blockSize,A=T*4,k=S/A;v?k=r.ceil(k):k=r.max((k|0)-this._minBufferSize,0);var I=k*T,R=r.min(I*4,S);if(I){for(var F=0;F<I;F+=T)this._doProcessBlock(w,F);b=w.splice(0,I),_.sigBytes-=R}return new f.init(b,R)},clone:function(){var v=c.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(v){return function(b,_){return new v.init(_).finalize(b)}},_createHmacHelper:function(v){return function(b,_){return new y.HMAC.init(v,_).finalize(b)}}});var y=u.algo={};return u}(Math);return n})}(Uz)),Uz.exports}var zz={exports:{}},J0e;function cB(){return J0e||(J0e=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(zz)),zz.exports}var Vz={exports:{}},Z0e;function Hwt(){return Z0e||(Z0e=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(Vz)),Vz.exports}var Hz={exports:{}},ege;function qwt(){return ege||(ege=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(Hz)),Hz.exports}var qz={exports:{}},tge;function q_(){return tge||(tge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,y=p<<16|m<<8|g,v=0;v<4&&h+v*.75<c;v++)d.push(f.charAt(y>>>6*(3-v)&63));var b=f.charAt(64);if(b)for(;d.length%4;)d.push(b);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(qz)),qz.exports}var Wz={exports:{}},nge;function Wwt(){return nge||(nge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,y=c[p+2>>>2]>>>24-(p+2)%4*8&255,v=m<<16|g<<8|y,b=0;b<4&&p+b*.75<f;b++)h.push(d.charAt(v>>>6*(3-b)&63));var _=d.charAt(64);if(_)for(;h.length%4;)h.push(_);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(Wz)),Wz.exports}var Gz={exports:{}},rge;function W_(){return rge||(rge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var y=0;y<16;y++){var v=g+y,b=m[v];m[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var _=this._hash.words,w=m[g+0],S=m[g+1],T=m[g+2],A=m[g+3],k=m[g+4],I=m[g+5],R=m[g+6],F=m[g+7],O=m[g+8],$=m[g+9],V=m[g+10],j=m[g+11],G=m[g+12],Y=m[g+13],J=m[g+14],L=m[g+15],U=_[0],W=_[1],B=_[2],q=_[3];U=f(U,W,B,q,w,7,l[0]),q=f(q,U,W,B,S,12,l[1]),B=f(B,q,U,W,T,17,l[2]),W=f(W,B,q,U,A,22,l[3]),U=f(U,W,B,q,k,7,l[4]),q=f(q,U,W,B,I,12,l[5]),B=f(B,q,U,W,R,17,l[6]),W=f(W,B,q,U,F,22,l[7]),U=f(U,W,B,q,O,7,l[8]),q=f(q,U,W,B,$,12,l[9]),B=f(B,q,U,W,V,17,l[10]),W=f(W,B,q,U,j,22,l[11]),U=f(U,W,B,q,G,7,l[12]),q=f(q,U,W,B,Y,12,l[13]),B=f(B,q,U,W,J,17,l[14]),W=f(W,B,q,U,L,22,l[15]),U=d(U,W,B,q,S,5,l[16]),q=d(q,U,W,B,R,9,l[17]),B=d(B,q,U,W,j,14,l[18]),W=d(W,B,q,U,w,20,l[19]),U=d(U,W,B,q,I,5,l[20]),q=d(q,U,W,B,V,9,l[21]),B=d(B,q,U,W,L,14,l[22]),W=d(W,B,q,U,k,20,l[23]),U=d(U,W,B,q,$,5,l[24]),q=d(q,U,W,B,J,9,l[25]),B=d(B,q,U,W,A,14,l[26]),W=d(W,B,q,U,O,20,l[27]),U=d(U,W,B,q,Y,5,l[28]),q=d(q,U,W,B,T,9,l[29]),B=d(B,q,U,W,F,14,l[30]),W=d(W,B,q,U,G,20,l[31]),U=h(U,W,B,q,I,4,l[32]),q=h(q,U,W,B,O,11,l[33]),B=h(B,q,U,W,j,16,l[34]),W=h(W,B,q,U,J,23,l[35]),U=h(U,W,B,q,S,4,l[36]),q=h(q,U,W,B,k,11,l[37]),B=h(B,q,U,W,F,16,l[38]),W=h(W,B,q,U,V,23,l[39]),U=h(U,W,B,q,Y,4,l[40]),q=h(q,U,W,B,w,11,l[41]),B=h(B,q,U,W,A,16,l[42]),W=h(W,B,q,U,R,23,l[43]),U=h(U,W,B,q,$,4,l[44]),q=h(q,U,W,B,G,11,l[45]),B=h(B,q,U,W,L,16,l[46]),W=h(W,B,q,U,T,23,l[47]),U=p(U,W,B,q,w,6,l[48]),q=p(q,U,W,B,F,10,l[49]),B=p(B,q,U,W,J,15,l[50]),W=p(W,B,q,U,I,21,l[51]),U=p(U,W,B,q,G,6,l[52]),q=p(q,U,W,B,A,10,l[53]),B=p(B,q,U,W,V,15,l[54]),W=p(W,B,q,U,S,21,l[55]),U=p(U,W,B,q,O,6,l[56]),q=p(q,U,W,B,L,10,l[57]),B=p(B,q,U,W,R,15,l[58]),W=p(W,B,q,U,Y,21,l[59]),U=p(U,W,B,q,k,6,l[60]),q=p(q,U,W,B,j,10,l[61]),B=p(B,q,U,W,T,15,l[62]),W=p(W,B,q,U,$,21,l[63]),_[0]=_[0]+U|0,_[1]=_[1]+W|0,_[2]=_[2]+B|0,_[3]=_[3]+q|0},_doFinalize:function(){var m=this._data,g=m.words,y=this._nDataBytes*8,v=m.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=r.floor(y/4294967296),_=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var w=this._hash,S=w.words,T=0;T<4;T++){var A=S[T];S[T]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return w},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,y,v,b,_,w){var S=m+(g&y|~g&v)+b+w;return(S<<_|S>>>32-_)+g}function d(m,g,y,v,b,_,w){var S=m+(g&v|y&~v)+b+w;return(S<<_|S>>>32-_)+g}function h(m,g,y,v,b,_,w){var S=m+(g^y^v)+b+w;return(S<<_|S>>>32-_)+g}function p(m,g,y,v,b,_,w){var S=m+(y^(g|~v))+b+w;return(S<<_|S>>>32-_)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(Gz)),Gz.exports}var Yz={exports:{}},ige;function D3e(){return ige||(ige=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)u[v]=c[f+v]|0;else{var b=u[v-3]^u[v-8]^u[v-14]^u[v-16];u[v]=b<<1|b>>>31}var _=(h<<5|h>>>27)+y+u[v];v<20?_+=(p&m|~p&g)+1518500249:v<40?_+=(p^m^g)+1859775393:v<60?_+=(p&m|p&g|m&g)-1894007588:_+=(p^m^g)-899497514,y=g,g=m,m=p<<30|p>>>2,p=h,h=_}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(Yz)),Yz.exports}var Kz={exports:{}},sge;function Ate(){return sge||(sge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(y){for(var v=r.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}function p(y){return(y-(y|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],y=m[1],v=m[2],b=m[3],_=m[4],w=m[5],S=m[6],T=m[7],A=0;A<64;A++){if(A<16)f[A]=h[p+A]|0;else{var k=f[A-15],I=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,R=f[A-2],F=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;f[A]=I+f[A-7]+F+f[A-16]}var O=_&w^~_&S,$=g&y^g&v^y&v,V=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),j=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),G=T+j+O+c[A]+f[A],Y=V+$;T=S,S=w,w=_,_=b+G|0,b=v,v=y,y=g,g=G+Y|0}m[0]=m[0]+g|0,m[1]=m[1]+y|0,m[2]=m[2]+v|0,m[3]=m[3]+b|0,m[4]=m[4]+_|0,m[5]=m[5]+w|0,m[6]=m[6]+S|0,m[7]=m[7]+T|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(Kz)),Kz.exports}var Xz={exports:{}},oge;function Gwt(){return oge||(oge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Ate())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(Xz)),Xz.exports}var Qz={exports:{}},age;function I3e(){return age||(age=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),cB())})(on,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],_=g[3],w=g[4],S=g[5],T=g[6],A=g[7],k=y.high,I=y.low,R=v.high,F=v.low,O=b.high,$=b.low,V=_.high,j=_.low,G=w.high,Y=w.low,J=S.high,L=S.low,U=T.high,W=T.low,B=A.high,q=A.low,Z=k,re=I,xe=R,pe=F,Te=O,ke=$,it=V,Re=j,ut=G,Ke=Y,Ct=J,gt=L,Ie=U,Ve=W,ft=B,_t=q,Mt=0;Mt<80;Mt++){var st,X,de=d[Mt];if(Mt<16)X=de.high=p[m+Mt*2]|0,st=de.low=p[m+Mt*2+1]|0;else{var we=d[Mt-15],ae=we.high,he=we.low,Ee=(ae>>>1|he<<31)^(ae>>>8|he<<24)^ae>>>7,$e=(he>>>1|ae<<31)^(he>>>8|ae<<24)^(he>>>7|ae<<25),Be=d[Mt-2],lt=Be.high,Je=Be.low,Xt=(lt>>>19|Je<<13)^(lt<<3|Je>>>29)^lt>>>6,fn=(Je>>>19|lt<<13)^(Je<<3|lt>>>29)^(Je>>>6|lt<<26),Wt=d[Mt-7],an=Wt.high,Sn=Wt.low,Mn=d[Mt-16],ki=Mn.high,di=Mn.low;st=$e+Sn,X=Ee+an+(st>>>0<$e>>>0?1:0),st=st+fn,X=X+Xt+(st>>>0<fn>>>0?1:0),st=st+di,X=X+ki+(st>>>0<di>>>0?1:0),de.high=X,de.low=st}var Li=ut&Ct^~ut&Ie,As=Ke&gt^~Ke&Ve,Br=Z&xe^Z&Te^xe&Te,ls=re&pe^re&ke^pe&ke,ll=(Z>>>28|re<<4)^(Z<<30|re>>>2)^(Z<<25|re>>>7),Fo=(re>>>28|Z<<4)^(re<<30|Z>>>2)^(re<<25|Z>>>7),qa=(ut>>>14|Ke<<18)^(ut>>>18|Ke<<14)^(ut<<23|Ke>>>9),Nr=(Ke>>>14|ut<<18)^(Ke>>>18|ut<<14)^(Ke<<23|ut>>>9),Ri=f[Mt],hi=Ri.high,Vs=Ri.low,ri=_t+Nr,Ni=ft+qa+(ri>>>0<_t>>>0?1:0),ri=ri+As,Ni=Ni+Li+(ri>>>0<As>>>0?1:0),ri=ri+Vs,Ni=Ni+hi+(ri>>>0<Vs>>>0?1:0),ri=ri+st,Ni=Ni+X+(ri>>>0<st>>>0?1:0),ve=Fo+ls,ce=ll+Br+(ve>>>0<Fo>>>0?1:0);ft=Ie,_t=Ve,Ie=Ct,Ve=gt,Ct=ut,gt=Ke,Ke=Re+ri|0,ut=it+Ni+(Ke>>>0<Re>>>0?1:0)|0,it=Te,Re=ke,Te=xe,ke=pe,xe=Z,pe=re,re=ri+ve|0,Z=Ni+ce+(re>>>0<ri>>>0?1:0)|0}I=y.low=I+re,y.high=k+Z+(I>>>0<re>>>0?1:0),F=v.low=F+pe,v.high=R+xe+(F>>>0<pe>>>0?1:0),$=b.low=$+ke,b.high=O+Te+($>>>0<ke>>>0?1:0),j=_.low=j+Re,_.high=V+it+(j>>>0<Re>>>0?1:0),Y=w.low=Y+Ke,w.high=G+ut+(Y>>>0<Ke>>>0?1:0),L=S.low=L+gt,S.high=J+Ct+(L>>>0<gt>>>0?1:0),W=T.low=W+Ve,T.high=U+Ie+(W>>>0<Ve>>>0?1:0),q=A.low=q+_t,A.high=B+ft+(q>>>0<_t>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,y=p.sigBytes*8;m[y>>>5]|=128<<24-y%32,m[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(y+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var v=this._hash.toX32();return v},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(Qz)),Qz.exports}var Jz={exports:{}},uge;function Ywt(){return uge||(uge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),cB(),I3e())})(on,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(Jz)),Jz.exports}var Zz={exports:{}},lge;function Kwt(){return lge||(lge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),cB())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,y=0,v=0;v<24;v++){f[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,_=(2*g+3*y)%5;g=b,y=_}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var w=1,S=0;S<24;S++){for(var T=0,A=0,k=0;k<7;k++){if(w&1){var I=(1<<k)-1;I<32?A^=1<<I:T^=1<<I-32}w&128?w=w<<1^113:w<<=1}h[S]=l.create(T,A)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,y){for(var v=this._state,b=this.blockSize/2,_=0;_<b;_++){var w=g[y+2*_],S=g[y+2*_+1];w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;var T=v[_];T.high^=S,T.low^=w}for(var A=0;A<24;A++){for(var k=0;k<5;k++){for(var I=0,R=0,F=0;F<5;F++){var T=v[k+5*F];I^=T.high,R^=T.low}var O=p[k];O.high=I,O.low=R}for(var k=0;k<5;k++)for(var $=p[(k+4)%5],V=p[(k+1)%5],j=V.high,G=V.low,I=$.high^(j<<1|G>>>31),R=$.low^(G<<1|j>>>31),F=0;F<5;F++){var T=v[k+5*F];T.high^=I,T.low^=R}for(var Y=1;Y<25;Y++){var I,R,T=v[Y],J=T.high,L=T.low,U=f[Y];U<32?(I=J<<U|L>>>32-U,R=L<<U|J>>>32-U):(I=L<<U-32|J>>>64-U,R=J<<U-32|L>>>64-U);var W=p[d[Y]];W.high=I,W.low=R}var B=p[0],q=v[0];B.high=q.high,B.low=q.low;for(var k=0;k<5;k++)for(var F=0;F<5;F++){var Y=k+5*F,T=v[Y],Z=p[Y],re=p[(k+1)%5+5*F],xe=p[(k+2)%5+5*F];T.high=Z.high^~re.high&xe.high,T.low=Z.low^~re.low&xe.low}var T=v[0],pe=h[A];T.high^=pe.high,T.low^=pe.low}},_doFinalize:function(){var g=this._data,y=g.words;this._nDataBytes*8;var v=g.sigBytes*8,b=this.blockSize*32;y[v>>>5]|=1<<24-v%32,y[(r.ceil((v+1)/b)*b>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,w=this.cfg.outputLength/8,S=w/8,T=[],A=0;A<S;A++){var k=_[A],I=k.high,R=k.low;I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,T.push(R),T.push(I)}return new o.init(T,w)},clone:function(){for(var g=a.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(Zz)),Zz.exports}var eV={exports:{}},cge;function Xwt(){return cge||(cge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(S,T){for(var A=0;A<16;A++){var k=T+A,I=S[k];S[k]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}var R=this._hash.words,F=h.words,O=p.words,$=l.words,V=c.words,j=f.words,G=d.words,Y,J,L,U,W,B,q,Z,re,xe;B=Y=R[0],q=J=R[1],Z=L=R[2],re=U=R[3],xe=W=R[4];for(var pe,A=0;A<80;A+=1)pe=Y+S[T+$[A]]|0,A<16?pe+=g(J,L,U)+F[0]:A<32?pe+=y(J,L,U)+F[1]:A<48?pe+=v(J,L,U)+F[2]:A<64?pe+=b(J,L,U)+F[3]:pe+=_(J,L,U)+F[4],pe=pe|0,pe=w(pe,j[A]),pe=pe+W|0,Y=W,W=U,U=w(L,10),L=J,J=pe,pe=B+S[T+V[A]]|0,A<16?pe+=_(q,Z,re)+O[0]:A<32?pe+=b(q,Z,re)+O[1]:A<48?pe+=v(q,Z,re)+O[2]:A<64?pe+=y(q,Z,re)+O[3]:pe+=g(q,Z,re)+O[4],pe=pe|0,pe=w(pe,G[A]),pe=pe+xe|0,B=xe,xe=re,re=w(Z,10),Z=q,q=pe;pe=R[1]+L+re|0,R[1]=R[2]+U+xe|0,R[2]=R[3]+W+B|0,R[3]=R[4]+Y+q|0,R[4]=R[0]+J+Z|0,R[0]=pe},_doFinalize:function(){var S=this._data,T=S.words,A=this._nDataBytes*8,k=S.sigBytes*8;T[k>>>5]|=128<<24-k%32,T[(k+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,S.sigBytes=(T.length+1)*4,this._process();for(var I=this._hash,R=I.words,F=0;F<5;F++){var O=R[F];R[F]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return I},clone:function(){var S=a.clone.call(this);return S._hash=this._hash.clone(),S}});function g(S,T,A){return S^T^A}function y(S,T,A){return S&T|~S&A}function v(S,T,A){return(S|~T)^A}function b(S,T,A){return S&A|T&~A}function _(S,T,A){return S^(T|~A)}function w(S,T){return S<<T|S>>>32-T}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(eV)),eV.exports}var tV={exports:{}},fge;function Dte(){return fge||(fge=1,function(e,t){(function(n,r){e.exports=r(Qr())})(on,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,y=0;y<f;y++)m[y]^=1549556828,g[y]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(tV)),tV.exports}var nV={exports:{}},dge;function Qwt(){return dge||(dge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Ate(),Dte())})(on,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),y=m.words,v=g.words,b=h.keySize,_=h.iterations;y.length<b;){var w=p.update(d).finalize(g);p.reset();for(var S=w.words,T=S.length,A=w,k=1;k<_;k++){A=p.finalize(A),p.reset();for(var I=A.words,R=0;R<T;R++)S[R]^=I[R]}m.concat(w),v[0]++}return m.sigBytes=b*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(nV)),nV.exports}var rV={exports:{}},hge;function Ib(){return hge||(hge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),D3e(),Dte())})(on,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,y=h.keySize,v=h.iterations;g.length<y;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var b=1;b<v;b++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=y*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(rV)),rV.exports}var iV={exports:{}},pge;function za(){return pge||(pge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),Ib())})(on,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(I,R){return this.create(this._ENC_XFORM_MODE,I,R)},createDecryptor:function(I,R){return this.create(this._DEC_XFORM_MODE,I,R)},init:function(I,R,F){this.cfg=this.cfg.extend(F),this._xformMode=I,this._key=R,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(I){return this._append(I),this._process()},finalize:function(I){I&&this._append(I);var R=this._doFinalize();return R},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function I(R){return typeof R=="string"?k:S}return function(R){return{encrypt:function(F,O,$){return I(O).encrypt(R,F,O,$)},decrypt:function(F,O,$){return I(O).decrypt(R,F,O,$)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var I=this._process(!0);return I},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(I,R){return this.Encryptor.create(I,R)},createDecryptor:function(I,R){return this.Decryptor.create(I,R)},init:function(I,R){this._cipher=I,this._iv=R}}),g=p.CBC=function(){var I=m.extend();I.Encryptor=I.extend({processBlock:function(F,O){var $=this._cipher,V=$.blockSize;R.call(this,F,O,V),$.encryptBlock(F,O),this._prevBlock=F.slice(O,O+V)}}),I.Decryptor=I.extend({processBlock:function(F,O){var $=this._cipher,V=$.blockSize,j=F.slice(O,O+V);$.decryptBlock(F,O),R.call(this,F,O,V),this._prevBlock=j}});function R(F,O,$){var V,j=this._iv;j?(V=j,this._iv=r):V=this._prevBlock;for(var G=0;G<$;G++)F[O+G]^=V[G]}return I}(),y=i.pad={},v=y.Pkcs7={pad:function(I,R){for(var F=R*4,O=F-I.sigBytes%F,$=O<<24|O<<16|O<<8|O,V=[],j=0;j<O;j+=4)V.push($);var G=a.create(V,O);I.concat(G)},unpad:function(I){var R=I.words[I.sigBytes-1>>>2]&255;I.sigBytes-=R}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:v}),reset:function(){var I;h.reset.call(this);var R=this.cfg,F=R.iv,O=R.mode;this._xformMode==this._ENC_XFORM_MODE?I=O.createEncryptor:(I=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==I?this._mode.init(this,F&&F.words):(this._mode=I.call(O,this,F&&F.words),this._mode.__creator=I)},_doProcessBlock:function(I,R){this._mode.processBlock(I,R)},_doFinalize:function(){var I,R=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(R.pad(this._data,this.blockSize),I=this._process(!0)):(I=this._process(!0),R.unpad(I)),I},blockSize:128/32});var b=s.CipherParams=o.extend({init:function(I){this.mixIn(I)},toString:function(I){return(I||this.formatter).stringify(this)}}),_=i.format={},w=_.OpenSSL={stringify:function(I){var R,F=I.ciphertext,O=I.salt;return O?R=a.create([1398893684,1701076831]).concat(O).concat(F):R=F,R.toString(c)},parse:function(I){var R,F=c.parse(I),O=F.words;return O[0]==1398893684&&O[1]==1701076831&&(R=a.create(O.slice(2,4)),O.splice(0,4),F.sigBytes-=16),b.create({ciphertext:F,salt:R})}},S=s.SerializableCipher=o.extend({cfg:o.extend({format:w}),encrypt:function(I,R,F,O){O=this.cfg.extend(O);var $=I.createEncryptor(F,O),V=$.finalize(R),j=$.cfg;return b.create({ciphertext:V,key:F,iv:j.iv,algorithm:I,mode:j.mode,padding:j.padding,blockSize:I.blockSize,formatter:O.format})},decrypt:function(I,R,F,O){O=this.cfg.extend(O),R=this._parse(R,O.format);var $=I.createDecryptor(F,O).finalize(R.ciphertext);return $},_parse:function(I,R){return typeof I=="string"?R.parse(I,this):I}}),T=i.kdf={},A=T.OpenSSL={execute:function(I,R,F,O,$){if(O||(O=a.random(64/8)),$)var V=d.create({keySize:R+F,hasher:$}).compute(I,O);else var V=d.create({keySize:R+F}).compute(I,O);var j=a.create(V.words.slice(R),F*4);return V.sigBytes=R*4,b.create({key:V,iv:j,salt:O})}},k=s.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:A}),encrypt:function(I,R,F,O){O=this.cfg.extend(O);var $=O.kdf.execute(F,I.keySize,I.ivSize,O.salt,O.hasher);O.iv=$.iv;var V=S.encrypt.call(this,I,R,$.key,O);return V.mixIn($),V},decrypt:function(I,R,F,O){O=this.cfg.extend(O),R=this._parse(R,O.format);var $=O.kdf.execute(F,I.keySize,I.ivSize,R.salt,O.hasher);O.iv=$.iv;var V=S.decrypt.call(this,I,R,$.key,O);return V}})}()})}(iV)),iV.exports}var sV={exports:{}},mge;function Jwt(){return mge||(mge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),za())})(on,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(sV)),sV.exports}var oV={exports:{}},gge;function Zwt(){return gge||(gge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),za())})(on,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(oV)),oV.exports}var aV={exports:{}},yge;function e_t(){return yge||(yge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),za())})(on,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(aV)),aV.exports}var uV={exports:{}},vge;function t_t(){return vge||(vge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),za())})(on,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(uV)),uV.exports}var lV={exports:{}},bge;function n_t(){return bge||(bge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),za())})(on,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(lV)),lV.exports}var cV={exports:{}},xge;function r_t(){return xge||(xge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),za())})(on,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(cV)),cV.exports}var fV={exports:{}},wge;function i_t(){return wge||(wge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),za())})(on,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(fV)),fV.exports}var dV={exports:{}},_ge;function s_t(){return _ge||(_ge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),za())})(on,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(dV)),dV.exports}var hV={exports:{}},Ege;function o_t(){return Ege||(Ege=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),za())})(on,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(hV)),hV.exports}var pV={exports:{}},Sge;function a_t(){return Sge||(Sge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),za())})(on,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(pV)),pV.exports}var mV={exports:{}},Cge;function u_t(){return Cge||(Cge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),za())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(mV)),mV.exports}var gV={exports:{}},Tge;function l_t(){return Tge||(Tge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),q_(),W_(),Ib(),za())})(on,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var b=[],_=0;_<256;_++)_<128?b[_]=_<<1:b[_]=_<<1^283;for(var w=0,S=0,_=0;_<256;_++){var T=S^S<<1^S<<2^S<<3^S<<4;T=T>>>8^T&255^99,a[w]=T,u[T]=w;var A=b[w],k=b[A],I=b[k],R=b[T]*257^T*16843008;l[w]=R<<24|R>>>8,c[w]=R<<16|R>>>16,f[w]=R<<8|R>>>24,d[w]=R;var R=I*16843009^k*65537^A*257^w*16843008;h[T]=R<<24|R>>>8,p[T]=R<<16|R>>>16,m[T]=R<<8|R>>>24,g[T]=R,w?(w=A^b[b[b[I^A]]],S^=b[b[S]]):w=S=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=s.extend({_doReset:function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var _=this._keyPriorReset=this._key,w=_.words,S=_.sigBytes/4,T=this._nRounds=S+6,A=(T+1)*4,k=this._keySchedule=[],I=0;I<A;I++)I<S?k[I]=w[I]:(b=k[I-1],I%S?S>6&&I%S==4&&(b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255]):(b=b<<8|b>>>24,b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255],b^=y[I/S|0]<<24),k[I]=k[I-S]^b);for(var R=this._invKeySchedule=[],F=0;F<A;F++){var I=A-F;if(F%4)var b=k[I];else var b=k[I-4];F<4||I<=4?R[F]=b:R[F]=h[a[b>>>24]]^p[a[b>>>16&255]]^m[a[b>>>8&255]]^g[a[b&255]]}}},encryptBlock:function(b,_){this._doCryptBlock(b,_,this._keySchedule,l,c,f,d,a)},decryptBlock:function(b,_){var w=b[_+1];b[_+1]=b[_+3],b[_+3]=w,this._doCryptBlock(b,_,this._invKeySchedule,h,p,m,g,u);var w=b[_+1];b[_+1]=b[_+3],b[_+3]=w},_doCryptBlock:function(b,_,w,S,T,A,k,I){for(var R=this._nRounds,F=b[_]^w[0],O=b[_+1]^w[1],$=b[_+2]^w[2],V=b[_+3]^w[3],j=4,G=1;G<R;G++){var Y=S[F>>>24]^T[O>>>16&255]^A[$>>>8&255]^k[V&255]^w[j++],J=S[O>>>24]^T[$>>>16&255]^A[V>>>8&255]^k[F&255]^w[j++],L=S[$>>>24]^T[V>>>16&255]^A[F>>>8&255]^k[O&255]^w[j++],U=S[V>>>24]^T[F>>>16&255]^A[O>>>8&255]^k[$&255]^w[j++];F=Y,O=J,$=L,V=U}var Y=(I[F>>>24]<<24|I[O>>>16&255]<<16|I[$>>>8&255]<<8|I[V&255])^w[j++],J=(I[O>>>24]<<24|I[$>>>16&255]<<16|I[V>>>8&255]<<8|I[F&255])^w[j++],L=(I[$>>>24]<<24|I[V>>>16&255]<<16|I[F>>>8&255]<<8|I[O&255])^w[j++],U=(I[V>>>24]<<24|I[F>>>16&255]<<16|I[O>>>8&255]<<8|I[$&255])^w[j++];b[_]=Y,b[_+1]=J,b[_+2]=L,b[_+3]=U},keySize:256/32});r.AES=s._createHelper(v)}(),n.AES})}(gV)),gV.exports}var yV={exports:{}},Age;function c_t(){return Age||(Age=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),q_(),W_(),Ib(),za())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var y=this._key,v=y.words,b=[],_=0;_<56;_++){var w=u[_]-1;b[_]=v[w>>>5]>>>31-w%32&1}for(var S=this._subKeys=[],T=0;T<16;T++){for(var A=S[T]=[],k=c[T],_=0;_<24;_++)A[_/6|0]|=b[(l[_]-1+k)%28]<<31-_%6,A[4+(_/6|0)]|=b[28+(l[_+24]-1+k)%28]<<31-_%6;A[0]=A[0]<<1|A[0]>>>31;for(var _=1;_<7;_++)A[_]=A[_]>>>(_-1)*4+3;A[7]=A[7]<<5|A[7]>>>27}for(var I=this._invSubKeys=[],_=0;_<16;_++)I[_]=S[15-_]},encryptBlock:function(y,v){this._doCryptBlock(y,v,this._subKeys)},decryptBlock:function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},_doCryptBlock:function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var _=0;_<16;_++){for(var w=b[_],S=this._lBlock,T=this._rBlock,A=0,k=0;k<8;k++)A|=f[k][((T^w[k])&d[k])>>>0];this._lBlock=T,this._rBlock=S^A}var I=this._lBlock;this._lBlock=this._rBlock,this._rBlock=I,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}function m(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),_=v.length<4?v.slice(0,2):v.slice(2,4),w=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=h.createEncryptor(s.create(b)),this._des2=h.createEncryptor(s.create(_)),this._des3=h.createEncryptor(s.create(w))},encryptBlock:function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},decryptBlock:function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(yV)),yV.exports}var vV={exports:{}},Dge;function f_t(){return Dge||(Dge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),q_(),W_(),Ib(),za())})(on,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,y=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+y)%256;var v=h[p];h[p]=h[m],h[m]=v}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(vV)),vV.exports}var bV={exports:{}},Ige;function d_t(){return Ige||(Ige=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),q_(),W_(),Ib(),za())})(on,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var y=h.words,v=y[0],b=y[1],_=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,w=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=_>>>16|w&4294901760,T=w<<16|_&65535;g[0]^=_,g[1]^=S,g[2]^=w,g[3]^=T,g[4]^=_,g[5]^=S,g[6]^=w,g[7]^=T;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(bV)),bV.exports}var xV={exports:{}},kge;function h_t(){return kge||(kge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),q_(),W_(),Ib(),za())})(on,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var y=h.words,v=y[0],b=y[1],_=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,w=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=_>>>16|w&4294901760,T=w<<16|_&65535;m[0]^=_,m[1]^=S,m[2]^=w,m[3]^=T,m[4]^=_,m[5]^=S,m[6]^=w,m[7]^=T;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(xV)),xV.exports}var wV={exports:{}},Rge;function p_t(){return Rge||(Rge=1,function(e,t){(function(n,r,i){e.exports=r(Qr(),q_(),W_(),Ib(),za())})(on,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,y){let v=y>>24&255,b=y>>16&255,_=y>>8&255,w=y&255,S=g.sbox[0][v]+g.sbox[1][b];return S=S^g.sbox[2][_],S=S+g.sbox[3][w],S}function d(g,y,v){let b=y,_=v,w;for(let S=0;S<a;++S)b=b^g.pbox[S],_=f(g,b)^_,w=b,b=_,_=w;return w=b,b=_,_=w,_=_^g.pbox[a],b=b^g.pbox[a+1],{left:b,right:_}}function h(g,y,v){let b=y,_=v,w;for(let S=a+1;S>1;--S)b=b^g.pbox[S],_=f(g,b)^_,w=b,b=_,_=w;return w=b,b=_,_=w,_=_^g.pbox[1],b=b^g.pbox[0],{left:b,right:_}}function p(g,y,v){for(let T=0;T<4;T++){g.sbox[T]=[];for(let A=0;A<256;A++)g.sbox[T][A]=l[T][A]}let b=0;for(let T=0;T<a+2;T++)g.pbox[T]=u[T]^y[b],b++,b>=v&&(b=0);let _=0,w=0,S=0;for(let T=0;T<a+2;T+=2)S=d(g,_,w),_=S.left,w=S.right,g.pbox[T]=_,g.pbox[T+1]=w;for(let T=0;T<4;T++)for(let A=0;A<256;A+=2)S=d(g,_,w),_=S.left,w=S.right,g.sbox[T][A]=_,g.sbox[T][A+1]=w;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;p(c,y,v)}},encryptBlock:function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},decryptBlock:function(g,y){var v=h(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(wV)),wV.exports}(function(e,t){(function(n,r,i){e.exports=r(Qr(),cB(),Hwt(),qwt(),q_(),Wwt(),W_(),D3e(),Ate(),Gwt(),I3e(),Ywt(),Kwt(),Xwt(),Dte(),Qwt(),Ib(),za(),Jwt(),Zwt(),e_t(),t_t(),n_t(),r_t(),i_t(),s_t(),o_t(),a_t(),u_t(),l_t(),c_t(),f_t(),d_t(),h_t(),p_t())})(on,function(n){return n})})(T3e);var HG=T3e.exports;function jh(e){const t=HG.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function m_t(e){const t=HG.AES.decrypt(atob(e),"notSecret").toString(HG.enc.Utf8);return parseInt(t,10)}function G_(){const{studyId:e}=Vm();return`${e}`}function th(){const{index:e}=Vm();return e===void 0?0:e.startsWith("reviewer-")?e:m_t(e)}function nh(){const e=th(),t=Tte();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var XM={exports:{}};XM.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",_="[object RegExp]",w="[object Set]",S="[object String]",T="[object Undefined]",A="[object WeakMap]",k="[object ArrayBuffer]",I="[object DataView]",R="[object Float32Array]",F="[object Float64Array]",O="[object Int8Array]",$="[object Int16Array]",V="[object Int32Array]",j="[object Uint8Array]",G="[object Uint8ClampedArray]",Y="[object Uint16Array]",J="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,B={};B[R]=B[F]=B[O]=B[$]=B[V]=B[j]=B[G]=B[Y]=B[J]=!0,B[a]=B[u]=B[k]=B[c]=B[I]=B[f]=B[d]=B[h]=B[m]=B[g]=B[v]=B[_]=B[w]=B[S]=B[A]=!1;var q=typeof on=="object"&&on&&on.Object===Object&&on,Z=typeof self=="object"&&self&&self.Object===Object&&self,re=q||Z||Function("return this")(),xe=t&&!t.nodeType&&t,pe=xe&&!0&&e&&!e.nodeType&&e,Te=pe&&pe.exports===xe,ke=Te&&q.process,it=function(){try{var fe=pe&&pe.require&&pe.require("util").types;return fe||ke&&ke.binding&&ke.binding("util")}catch{}}(),Re=it&&it.isTypedArray;function ut(fe,Se,He){switch(He.length){case 0:return fe.call(Se);case 1:return fe.call(Se,He[0]);case 2:return fe.call(Se,He[0],He[1]);case 3:return fe.call(Se,He[0],He[1],He[2])}return fe.apply(Se,He)}function Ke(fe,Se){for(var He=-1,Qt=Array(fe);++He<fe;)Qt[He]=Se(He);return Qt}function Ct(fe){return function(Se){return fe(Se)}}function gt(fe,Se){return fe==null?void 0:fe[Se]}function Ie(fe,Se){return function(He){return fe(Se(He))}}var Ve=Array.prototype,ft=Function.prototype,_t=Object.prototype,Mt=re["__core-js_shared__"],st=ft.toString,X=_t.hasOwnProperty,de=function(){var fe=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||"");return fe?"Symbol(src)_1."+fe:""}(),we=_t.toString,ae=st.call(Object),he=RegExp("^"+st.call(X).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=Te?re.Buffer:void 0,$e=re.Symbol,Be=re.Uint8Array;Ee&&Ee.allocUnsafe;var lt=Ie(Object.getPrototypeOf,Object),Je=Object.create,Xt=_t.propertyIsEnumerable,fn=Ve.splice,Wt=$e?$e.toStringTag:void 0,an=function(){try{var fe=yt(Object,"defineProperty");return fe({},"",{}),fe}catch{}}(),Sn=Ee?Ee.isBuffer:void 0,Mn=Math.max,ki=Date.now,di=yt(re,"Map"),Li=yt(Object,"create"),As=function(){function fe(){}return function(Se){if(!fh(Se))return{};if(Je)return Je(Se);fe.prototype=Se;var He=new fe;return fe.prototype=void 0,He}}();function Br(fe){var Se=-1,He=fe==null?0:fe.length;for(this.clear();++Se<He;){var Qt=fe[Se];this.set(Qt[0],Qt[1])}}function ls(){this.__data__=Li?Li(null):{},this.size=0}function ll(fe){var Se=this.has(fe)&&delete this.__data__[fe];return this.size-=Se?1:0,Se}function Fo(fe){var Se=this.__data__;if(Li){var He=Se[fe];return He===r?void 0:He}return X.call(Se,fe)?Se[fe]:void 0}function qa(fe){var Se=this.__data__;return Li?Se[fe]!==void 0:X.call(Se,fe)}function Nr(fe,Se){var He=this.__data__;return this.size+=this.has(fe)?0:1,He[fe]=Li&&Se===void 0?r:Se,this}Br.prototype.clear=ls,Br.prototype.delete=ll,Br.prototype.get=Fo,Br.prototype.has=qa,Br.prototype.set=Nr;function Ri(fe){var Se=-1,He=fe==null?0:fe.length;for(this.clear();++Se<He;){var Qt=fe[Se];this.set(Qt[0],Qt[1])}}function hi(){this.__data__=[],this.size=0}function Vs(fe){var Se=this.__data__,He=ir(Se,fe);if(He<0)return!1;var Qt=Se.length-1;return He==Qt?Se.pop():fn.call(Se,He,1),--this.size,!0}function ri(fe){var Se=this.__data__,He=ir(Se,fe);return He<0?void 0:Se[He][1]}function Ni(fe){return ir(this.__data__,fe)>-1}function ve(fe,Se){var He=this.__data__,Qt=ir(He,fe);return Qt<0?(++this.size,He.push([fe,Se])):He[Qt][1]=Se,this}Ri.prototype.clear=hi,Ri.prototype.delete=Vs,Ri.prototype.get=ri,Ri.prototype.has=Ni,Ri.prototype.set=ve;function ce(fe){var Se=-1,He=fe==null?0:fe.length;for(this.clear();++Se<He;){var Qt=fe[Se];this.set(Qt[0],Qt[1])}}function _e(){this.size=0,this.__data__={hash:new Br,map:new(di||Ri),string:new Br}}function Ue(fe){var Se=pt(this,fe).delete(fe);return this.size-=Se?1:0,Se}function je(fe){return pt(this,fe).get(fe)}function Dt(fe){return pt(this,fe).has(fe)}function Ht(fe,Se){var He=pt(this,fe),Qt=He.size;return He.set(fe,Se),this.size+=He.size==Qt?0:1,this}ce.prototype.clear=_e,ce.prototype.delete=Ue,ce.prototype.get=je,ce.prototype.has=Dt,ce.prototype.set=Ht;function xn(fe){var Se=this.__data__=new Ri(fe);this.size=Se.size}function rr(){this.__data__=new Ri,this.size=0}function mr(fe){var Se=this.__data__,He=Se.delete(fe);return this.size=Se.size,He}function jn(fe){return this.__data__.get(fe)}function Dr(fe){return this.__data__.has(fe)}function ii(fe,Se){var He=this.__data__;if(He instanceof Ri){var Qt=He.__data__;if(!di||Qt.length<n-1)return Qt.push([fe,Se]),this.size=++He.size,this;He=this.__data__=new ce(Qt)}return He.set(fe,Se),this.size=He.size,this}xn.prototype.clear=rr,xn.prototype.delete=mr,xn.prototype.get=jn,xn.prototype.has=Dr,xn.prototype.set=ii;function dn(fe,Se){var He=lh(fe),Qt=!He&&bu(fe),wr=!He&&!Qt&&ch(fe),ai=!He&&!Qt&&!wr&&_E(fe),Bi=He||Qt||wr||ai,wn=Bi?Ke(fe.length,String):[],Ei=wn.length;for(var ji in fe)Bi&&(ji=="length"||wr&&(ji=="offset"||ji=="parent")||ai&&(ji=="buffer"||ji=="byteLength"||ji=="byteOffset")||zt(ji,Ei))||wn.push(ji);return wn}function Ir(fe,Se,He){(He!==void 0&&!cl(fe[Se],He)||He===void 0&&!(Se in fe))&&un(fe,Se,He)}function Jr(fe,Se,He){var Qt=fe[Se];(!(X.call(fe,Se)&&cl(Qt,He))||He===void 0&&!(Se in fe))&&un(fe,Se,He)}function ir(fe,Se){for(var He=fe.length;He--;)if(cl(fe[He][0],Se))return He;return-1}function un(fe,Se,He){Se=="__proto__"&&an?an(fe,Se,{configurable:!0,enumerable:!0,value:He,writable:!0}):fe[Se]=He}var jr=Xe();function Pi(fe){return fe==null?fe===void 0?T:y:Wt&&Wt in Object(fe)?vt(fe):Ko(fe)}function Ds(fe){return xa(fe)&&Pi(fe)==a}function _i(fe){if(!fh(fe)||gr(fe))return!1;var Se=tx(fe)?he:U;return Se.test(Zb(fe))}function ns(fe){return xa(fe)&&wE(fe.length)&&!!B[Pi(fe)]}function Yo(fe){if(!fh(fe))return Pr(fe);var Se=si(fe),He=[];for(var Qt in fe)Qt=="constructor"&&(Se||!X.call(fe,Qt))||He.push(Qt);return He}function Wa(fe,Se,He,Qt,wr){fe!==Se&&jr(Se,function(ai,Bi){if(wr||(wr=new xn),fh(ai))Mo(fe,Se,Bi,He,Wa,Qt,wr);else{var wn=Qt?Qt(uh(fe,Bi),ai,Bi+"",fe,Se,wr):void 0;wn===void 0&&(wn=ai),Ir(fe,Bi,wn)}},R0)}function Mo(fe,Se,He,Qt,wr,ai,Bi){var wn=uh(fe,He),Ei=uh(Se,He),ji=Bi.get(Ei);if(ji){Ir(fe,He,ji);return}var Xo=ai?ai(wn,Ei,He+"",fe,Se,Bi):void 0,dh=Xo===void 0;if(dh){var Zs=lh(Ei),N0=!Zs&&ch(Ei),P0=!Zs&&!N0&&_E(Ei);Xo=Ei,Zs||N0||P0?lh(wn)?Xo=wn:ex(wn)?Xo=De(wn):N0?(dh=!1,Xo=te(Ei)):P0?(dh=!1,Xo=ue(Ei)):Xo=[]:VA(Ei)||bu(Ei)?(Xo=wn,bu(wn)?Xo=k0(wn):(!fh(wn)||tx(wn))&&(Xo=It(Ei))):dh=!1}dh&&(Bi.set(Ei,Xo),wr(Xo,Ei,Qt,ai,Bi),Bi.delete(Ei)),Ir(fe,He,Xo)}function Jl(fe,Se){return qy(sf(fe,Se,Ur),fe+"")}var td=an?function(fe,Se){return an(fe,"toString",{configurable:!0,enumerable:!1,value:oi(Se),writable:!0})}:Ur;function te(fe,Se){return fe.slice()}function be(fe){var Se=new fe.constructor(fe.byteLength);return new Be(Se).set(new Be(fe)),Se}function ue(fe,Se){var He=be(fe.buffer);return new fe.constructor(He,fe.byteOffset,fe.length)}function De(fe,Se){var He=-1,Qt=fe.length;for(Se||(Se=Array(Qt));++He<Qt;)Se[He]=fe[He];return Se}function Pe(fe,Se,He,Qt){var wr=!He;He||(He={});for(var ai=-1,Bi=Se.length;++ai<Bi;){var wn=Se[ai],Ei=void 0;Ei===void 0&&(Ei=fe[wn]),wr?un(He,wn,Ei):Jr(He,wn,Ei)}return He}function Ae(fe){return Jl(function(Se,He){var Qt=-1,wr=He.length,ai=wr>1?He[wr-1]:void 0,Bi=wr>2?He[2]:void 0;for(ai=fe.length>3&&typeof ai=="function"?(wr--,ai):void 0,Bi&&Xn(He[0],He[1],Bi)&&(ai=wr<3?void 0:ai,wr=1),Se=Object(Se);++Qt<wr;){var wn=He[Qt];wn&&fe(Se,wn,Qt,ai)}return Se})}function Xe(fe){return function(Se,He,Qt){for(var wr=-1,ai=Object(Se),Bi=Qt(Se),wn=Bi.length;wn--;){var Ei=Bi[++wr];if(He(ai[Ei],Ei,ai)===!1)break}return Se}}function pt(fe,Se){var He=fe.__data__;return nn(Se)?He[typeof Se=="string"?"string":"hash"]:He.map}function yt(fe,Se){var He=gt(fe,Se);return _i(He)?He:void 0}function vt(fe){var Se=X.call(fe,Wt),He=fe[Wt];try{fe[Wt]=void 0;var Qt=!0}catch{}var wr=we.call(fe);return Qt&&(Se?fe[Wt]=He:delete fe[Wt]),wr}function It(fe){return typeof fe.constructor=="function"&&!si(fe)?As(lt(fe)):{}}function zt(fe,Se){var He=typeof fe;return Se=Se??o,!!Se&&(He=="number"||He!="symbol"&&W.test(fe))&&fe>-1&&fe%1==0&&fe<Se}function Xn(fe,Se,He){if(!fh(He))return!1;var Qt=typeof Se;return(Qt=="number"?Wy(He)&&zt(Se,He.length):Qt=="string"&&Se in He)?cl(He[Se],fe):!1}function nn(fe){var Se=typeof fe;return Se=="string"||Se=="number"||Se=="symbol"||Se=="boolean"?fe!=="__proto__":fe===null}function gr(fe){return!!de&&de in fe}function si(fe){var Se=fe&&fe.constructor,He=typeof Se=="function"&&Se.prototype||_t;return fe===He}function Pr(fe){var Se=[];if(fe!=null)for(var He in Object(fe))Se.push(He);return Se}function Ko(fe){return we.call(fe)}function sf(fe,Se,He){return Se=Mn(Se===void 0?fe.length-1:Se,0),function(){for(var Qt=arguments,wr=-1,ai=Mn(Qt.length-Se,0),Bi=Array(ai);++wr<ai;)Bi[wr]=Qt[Se+wr];wr=-1;for(var wn=Array(Se+1);++wr<Se;)wn[wr]=Qt[wr];return wn[Se]=He(Bi),ut(fe,this,wn)}}function uh(fe,Se){if(!(Se==="constructor"&&typeof fe[Se]=="function")&&Se!="__proto__")return fe[Se]}var qy=Lp(td);function Lp(fe){var Se=0,He=0;return function(){var Qt=ki(),wr=s-(Qt-He);if(He=Qt,wr>0){if(++Se>=i)return arguments[0]}else Se=0;return fe.apply(void 0,arguments)}}function Zb(fe){if(fe!=null){try{return st.call(fe)}catch{}try{return fe+""}catch{}}return""}function cl(fe,Se){return fe===Se||fe!==fe&&Se!==Se}var bu=Ds(function(){return arguments}())?Ds:function(fe){return xa(fe)&&X.call(fe,"callee")&&!Xt.call(fe,"callee")},lh=Array.isArray;function Wy(fe){return fe!=null&&wE(fe.length)&&!tx(fe)}function ex(fe){return xa(fe)&&Wy(fe)}var ch=Sn||SE;function tx(fe){if(!fh(fe))return!1;var Se=Pi(fe);return Se==h||Se==p||Se==l||Se==b}function wE(fe){return typeof fe=="number"&&fe>-1&&fe%1==0&&fe<=o}function fh(fe){var Se=typeof fe;return fe!=null&&(Se=="object"||Se=="function")}function xa(fe){return fe!=null&&typeof fe=="object"}function VA(fe){if(!xa(fe)||Pi(fe)!=v)return!1;var Se=lt(fe);if(Se===null)return!0;var He=X.call(Se,"constructor")&&Se.constructor;return typeof He=="function"&&He instanceof He&&st.call(He)==ae}var _E=Re?Ct(Re):ns;function k0(fe){return Pe(fe,R0(fe))}function R0(fe){return Wy(fe)?dn(fe):Yo(fe)}var EE=Ae(function(fe,Se,He){Wa(fe,Se,He)});function oi(fe){return function(){return fe}}function Ur(fe){return fe}function SE(){return!1}e.exports=EE})(XM,XM.exports);var g_t=XM.exports;const Ite=c0(g_t);function Og(e){return structuredClone(e)}function kte(){const e=th(),n=`${nh()}_${e}`;return vi(i=>i.answers[n])}const k3e=N.createContext(null);function y_t(){const e=N.useContext(k3e);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function ny(){return vi(e=>e.config)}function HT(){const[e]=Tb();return!!e.get("participantId")}function Nge(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function R3e(){const e=th(),t=Tte(),r=`${nh()}_${e}`,i=vi(k=>k.trialValidation),s=vi(k=>k.sequence),o=vi(k=>k.answers),a=vi(k=>k.modes),u=ef(),{saveTrialAnswer:l,setIframeAnswers:c,setMatrixAnswersRadio:f,setMatrixAnswersCheckbox:d}=Bl(),{storageEngine:h}=Po(),p=G_(),m=N.useMemo(()=>a.dataCollectionEnabled,[a]),g=jwt(r),y=HT(),v=typeof e!="number"||y||!g,b=kte(),_=Sp(),w=ny(),S=N.useMemo(()=>Date.now(),[]),T=y_t(),A=N.useCallback((k=!0)=>{if(typeof e!="number")return;const I=Og(i[r]),R=Object.values(I).reduce((U,W)=>Object.hasOwn(W,"values")?{...U,...W.values}:U,{}),{provenanceGraph:F}=I,O=Date.now(),{incorrectAnswers:$,helpButtonClickedCount:V}=b,j=T&&"current"in T&&T.current?T.current.splice(0,T.current.length):[];if(m&&b.endTime===-1){const U={answer:k?R:{},startTime:S,endTime:O,incorrectAnswers:$,provenanceGraph:F,windowEvents:j,timedOut:!k,helpButtonClickedCount:V};u(l({identifier:r,...U})),h&&h.saveAnswers({...o,[r]:U}),u(c({})),u(d(null)),u(f(null))}let G=e+1;const Y=Ste(s,e),J=Y!==null&&Y.some(U=>Object.hasOwn(U.currentBlock,"skip")&&U.currentBlock.skip!==void 0),L={...o,[r]:{answer:R,startTime:S,endTime:O,provenanceGraph:F,windowEvents:j}};J&&[...Y.flatMap(W=>W.currentBlock.skip?W.currentBlock.skip.map(B=>({...B,firstIndex:W.firstIndex,lastIndex:W.lastIndex})):[])].some(W=>{let B=!1;const q=Object.fromEntries(Object.entries(L).filter(([re])=>{const xe=parseInt(re.slice(re.lastIndexOf("_")+1),10);return xe>=W.firstIndex&&xe<=e})),Z=W.check!=="block"?Object.entries(q).filter(([re])=>re.slice(0,re.lastIndexOf("_"))===W.name):Object.entries(q);if(Z.length===0)return!1;if(Z.some(([re,xe])=>!xe))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(W,null,2)}`);if(W.check==="response"||W.check==="responses"){const[re,xe]=Z[0];W.check==="response"?B=W.comparison==="equal"?W.value===xe.answer[W.responseId]:W.value!==xe.answer[W.responseId]:B=!Nge(xe.answer,re,w.components[re.slice(0,re.lastIndexOf("_"))],w)}else if(W.check==="block"||W.check==="repeatedComponent"){if(Z.length<W.value)return!1;const re=Z.map(([Te,ke])=>Nge(ke.answer,Te,w.components[Te.slice(0,Te.lastIndexOf("_"))],w)),xe=re.filter(Te=>Te).length,pe=re.length-xe;B=W.condition==="numCorrect"&&xe===W.value||W.condition==="numIncorrect"&&pe===W.value}if(B){const re=t.indexOf(W.to),xe=re===-1?Lwt(s,W.to):-1;return G=re===-1?xe:re,!0}return!1}),_(`/${p}/${jh(G)}${window.location.search}`)},[e,i,r,T,m,b,s,o,S,_,p,u,l,h,c,d,f,w,t]);return{isNextDisabled:v,goToNextStep:A}}function v_t({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=R3e(),o=ny(),a=Sp(),u=N.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=N.useState(void 0);N.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),N.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./__timeout")},[l,f,a,o.uiConfig.timeoutReject]);const h=N.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return E.jsxs(E.Fragment,{children:[E.jsx(bn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&E.jsxs(Pg,{mt:"md",title:"Please wait",color:"blue",icon:E.jsx(Xee,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?E.jsxs(Pg,{mt:"md",title:"Next button disables soon",color:"yellow",icon:E.jsx(ck,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&E.jsxs(Pg,{mt:"md",title:"Next button disabled",color:"red",icon:E.jsx(ck,{}),children:["The next button has timed out and is now disabled.",E.jsx($i,{justify:"right",mt:"sm",children:E.jsx(bn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function b_t(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const x_t=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Ya(e,t){x_t(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function w_t(e,t){e&&b_t(e),Ya(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Ya(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Ya(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Ya(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Ya(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Ya(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Ya(`mantine-form:${e}:clear-errors`,t.clearErrors),Ya(`mantine-form:${e}:reset`,t.reset),Ya(`mantine-form:${e}:validate`,t.validate),Ya(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Ya(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Ya(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Ya(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Ya(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Ya(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Ya(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Ya(`mantine-form:${e}:reset-touched`,t.resetTouched)}function __t(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function qG(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function E_t(e){const[t,n]=N.useState(qG(e)),r=N.useRef(t),i=N.useCallback(u=>{n(l=>{const c=qG(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=N.useCallback(()=>i({}),[]),o=N.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=N.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function N3e(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Pge(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Oge(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=N3e(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Pge(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Pge(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function S_t(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Fge(e,t,n){typeof n.value=="object"&&(n.value=Y2(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Y2(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Y2(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Y2(a),Y2(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Y2(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Fge(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Fge(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function P3e(e){return typeof e!="string"?[]:e.split(".")}function Tc(e,t){const n=P3e(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function fB(e,t,n){const r=P3e(e);if(r.length===0)return n;const i=Y2(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function C_t(e,{from:t,to:n},r){const i=Tc(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),fB(e,s,r)}function T_t(e,t,n,r){const i=Tc(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),fB(e,s,r)}function A_t(e,t,n){const r=Tc(e,n);return Array.isArray(r)?fB(e,r.filter((i,s)=>s!==t),n):n}function D_t({$values:e,$errors:t,$status:n}){const r=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>S_t(o,a,u)),e.setValues({values:C_t(o,a,e.refValues.current),updateState:!0})},[]),i=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Oge(o,a,u,-1)),e.setValues({values:A_t(o,a,e.refValues.current),updateState:!0})},[]),s=N.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Oge(o,u,l,1)),e.setValues({values:T_t(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var Rte=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const rF=c0(Rte);function d4(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function I_t({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=N.useState(t),[o,a]=N.useState(e),u=N.useRef(t),l=N.useRef(e),c=N.useCallback(w=>{const S=typeof w=="function"?w(u.current):w;u.current=S,n==="controlled"&&s(S)},[]),f=N.useCallback(w=>{const S=typeof w=="function"?w(l.current):w;l.current=S,n==="controlled"&&a(S)},[]),d=N.useCallback(()=>c({}),[]),h=w=>{const S=w?{...w,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=N.useCallback((w,S)=>{c(T=>d4(T,w)===S?T:{...T,[w]:S})},[]),m=N.useCallback((w,S)=>{f(T=>d4(T,w)===S?T:{...T,[w]:S})},[]),g=N.useCallback(w=>d4(u.current,w),[]),y=N.useCallback(w=>f(S=>{if(typeof w!="string")return S;const T=N3e(w,S);return delete T[w],rF(T,S)?S:T}),[]),v=N.useCallback(w=>{if(w){const T=Tc(w,l.current);if(typeof T=="boolean")return T;const A=Tc(w,r.refValues.current),k=Tc(w,r.valuesSnapshot.current);return!rF(A,k)}return Object.keys(l.current).length>0?d4(l.current):!rF(r.refValues.current,r.valuesSnapshot.current)},[]),b=N.useCallback(()=>l.current,[]),_=N.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:_}}function k_t({initialValues:e,onValuesChange:t,mode:n}){const r=N.useRef(!1),[i,s]=N.useState(e||{}),o=N.useRef(i),a=N.useRef(i),u=N.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,_=y?{...v,...b}:b;o.current=_,g&&s(_),t==null||t(_,v),m==null||m.filter(Boolean).forEach(w=>w({updatedValues:_,previousValues:v}))},[t]),l=N.useCallback(p=>{var y;const m=Tc(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=fB(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(_=>_({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=N.useCallback(p=>{a.current=p},[]),f=N.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=N.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=N.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function R_t({$status:e}){const t=N.useRef({}),n=N.useCallback((i,s)=>{N.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=N.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Tc(i,o.previousValues),value:Tc(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Mge(e,t){return e?`${e}-${t.toString()}`:t.toString()}function $ge(e){const t=qG(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function WG(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Tc(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>WG(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||WG(o,t,a,i)),i},r)}function GG(e,t){return $ge(typeof e=="function"?e(t):WG(e,t))}function h4(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=GG(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const N_t="__MANTINE_FORM_INDEX__";function Lge(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${N_t}`)):!1:!1}function O3e({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=E_t(r),p=k_t({initialValues:n,onValuesChange:l,mode:t}),m=I_t({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=D_t({$values:p,$errors:h,$status:m}),y=R_t({$status:m}),[v,b]=N.useState(0),[_,w]=N.useState({}),S=N.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(L=>L+1)},[]),T=N.useCallback(L=>{p.initialize(L,()=>t==="uncontrolled"&&b(U=>U+1))},[]),A=N.useCallback((L,U,W)=>{const B=Lge(L,a);m.clearFieldDirty(L),m.setFieldTouched(L,!0),!B&&o&&h.clearFieldError(L),p.setFieldValue({path:L,value:U,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(L),B?q=>{const Z=h4(L,d,q.updatedValues);Z.hasError?h.setFieldError(L,Z.error):h.clearFieldError(L)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>w(q=>({...q,[L]:(q[L]||0)+1})):null]})},[l,d]),k=N.useCallback(L=>{const U=p.refValues.current;p.setValues({values:L,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const B=Tc(W,p.refValues.current),q=Tc(W,U);B!==q&&y.getFieldSubscribers(W).forEach(Z=>Z({previousValues:U,updatedValues:p.refValues.current}))})},[l,o]),I=N.useCallback(()=>{const L=GG(d,p.refValues.current);return h.setErrors(L.errors),L},[d]),R=N.useCallback(L=>{const U=h4(L,d,p.refValues.current);return U.hasError?h.setFieldError(L,U.error):h.clearFieldError(L),U},[d]),F=(L,{type:U="input",withError:W=!0,withFocus:B=!0,...q}={})=>{const re={onChange:__t(xe=>A(L,xe,{forceUpdate:!1})),"data-path":Mge(e,L)};return W&&(re.error=h.errorsState[L]),U==="checkbox"?re[t==="controlled"?"checked":"defaultChecked"]=Tc(L,p.refValues.current):re[t==="controlled"?"value":"defaultValue"]=Tc(L,p.refValues.current),B&&(re.onFocus=()=>m.setFieldTouched(L,!0),re.onBlur=()=>{if(Lge(L,u)){const xe=h4(L,d,p.refValues.current);xe.hasError?h.setFieldError(L,xe.error):h.clearFieldError(L)}}),Object.assign(re,f==null?void 0:f({inputProps:re,field:L,options:{type:U,withError:W,withFocus:B,...q},form:J}))},O=(L,U)=>W=>{W==null||W.preventDefault();const B=I();B.hasErrors?U==null||U(B.errors,p.refValues.current,W):L==null||L(c(p.refValues.current),W)},$=L=>c(L||p.refValues.current),V=N.useCallback(L=>{L.preventDefault(),S()},[]),j=N.useCallback(L=>L?!h4(L,d,p.refValues.current).hasError:!GG(d,p.refValues.current).hasErrors,[d]),G=L=>`${v}-${L}-${_[L]||0}`,Y=N.useCallback(L=>document.querySelector(`[data-path="${Mge(e,L)}"]`),[]),J={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:k,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:I,validateField:R,getInputProps:F,onSubmit:O,onReset:V,isValid:j,getTransformedValues:$,key:G,getInputNode:Y};return w_t(e,J),J}function P_t(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function O_t(e){return P_t(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function F3e(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const F_t=new URLSearchParams(window.location.search),M_t=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=F_t.get(r.paramCapture):r.type==="iframe"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(o=>[o,""]))),n={...n,[r.id]:s}}}),{...n}},$_t=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(i=>i!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?F3e(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function L_t(e,t,n){const[r,i]=N.useState(null),s=O3e({initialValues:M_t(e,n),validate:$_t(e)});return N.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Y_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=F3e(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function B_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return E.jsx(Cc.Group,{label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(el,{text:s,required:o})})]}),description:u,...n,error:Y_(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsx($i,{mt:"xs",children:l.map(c=>E.jsx(Cc,{disabled:t,value:c.value,label:c.label},c.value))})})}function j_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return E.jsx(FT,{disabled:t,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(el,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:Y_(e,n,c)})}function U_t({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return E.jsx(mo.Wrapper,{label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${n}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(el,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&E.jsx(zu,{children:Array.isArray(t.value)?t.value.map(a=>E.jsx(zu.Item,{children:a},a)):E.jsx(zu.Item,{children:t.value})})})}function M3e({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f}=e,d=u.map(h=>typeof h=="string"?{value:h,label:h}:h);return E.jsx(Zg.Group,{name:`radioInput${e.id}`,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(el,{text:o,required:a})})]}),description:f,...n,error:Y_(e,n,d),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsxs($i,{mt:"md",gap:"lg",style:{display:"flex",alignItems:"flex-end",justifyContent:s?"space-around":"inherit"},children:[l?E.jsx(tt,{children:l}):null,d.map(h=>E.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[E.jsx(tt,{children:h.label}),E.jsx(Zg,{disabled:t,value:h.value,label:h.label,styles:{label:{display:"none"}}})]},h.label)),E.jsx(tt,{children:c})]})},e.id)}function z_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return E.jsx(M3e,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function V_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return E.jsx(Aee,{disabled:t,placeholder:l,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(el,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Y_(e,n)})}function H_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=N.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=Y_(e,n);return E.jsx(mo.Wrapper,{label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(el,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsx(fN,{disabled:t,marks:a,min:l,max:c,...n,h:40})})}function q_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return E.jsx(xg,{disabled:t,placeholder:s,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(el,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Y_(e,n)})}function W_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return E.jsx(pee,{disabled:t,placeholder:s,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(el,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Y_(e,n)})}function G_t({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return E.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>E.jsx(Cc,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function Y_t({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return E.jsx(Zg.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:E.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>E.jsx(Zg,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function K_t({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Bl(),a=ef(),{answerOptions:u,questionOptions:l,prompt:c,required:f}=e,h=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(b=>({value:b,label:b})):u.map(b=>typeof b=="string"?{value:b,label:b}:b),p=l.map(b=>typeof b=="string"?{value:b,label:b}:b),m=(b,_)=>{const w={type:"radio",questionKey:_,val:b,responseId:e.id};a(s(w))},g=(b,_,w)=>{const S=b.target.checked,T={questionKey:_,responseId:e.id,value:w.value,label:w.label,isChecked:S,choiceOptions:h};a(o(T))},y=h.length,v=p.length;return E.jsxs(E.Fragment,{children:[E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:0,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${n}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(el,{text:c,required:f})})]}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr",margin:"40px 100px 100px 100px"},children:[E.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:h.map((b,_)=>E.jsx(tt,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:b.label},`choice-${_}-label`))}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v}, 1fr)`},children:p.map((b,_)=>E.jsx(tt,{style:{height:"60px",display:"flex",alignItems:"center",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,paddingLeft:"10px"},children:b.label},`question-${_}-label`))}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v},1fr)`},children:p.map((b,_)=>E.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?E.jsx(Y_t,{disabled:r,idx:_,question:b,answer:t,_choices:h,_n:y,onChange:m,response:e}):E.jsx(G_t,{disabled:r,idx:_,question:b,answer:t,_choices:h,_n:y,onChange:g})},`question-${_}`))})]})]})}function X_t({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=Tb(),u=ny().uiConfig.enumerateQuestions??!1,l=N.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return E.jsxs(Fe,{mb:"md",children:[e.type==="numerical"&&E.jsx(V_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&E.jsx(q_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&E.jsx(W_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&E.jsx(z_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&E.jsx(j_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&E.jsx(H_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&E.jsx(M3e,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&E.jsx(B_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&E.jsx(U_t,{response:e,answer:i,index:r,enumerateQuestions:u}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&E.jsx(K_t,{disabled:l,response:e,answer:i,index:r,enumerateQuestions:u})]})}function QM({config:e,location:t,status:n,style:r}){var L;const{storageEngine:i}=Po(),s=ef(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=Bl(),c=th(),f=nh(),d=n==null?void 0:n.answer,h=G_(),p=Sp(),m=e,g=N.useMemo(()=>{var U;return((U=m==null?void 0:m.response)==null?void 0:U.filter(W=>W.location?W.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),y=N.useMemo(()=>g.map(U=>({...U,required:U.required===void 0?!0:U.required})),[g]),v=L_t(y,c,d||{}),[b,_]=N.useState(void 0),w=vi(U=>U.iframeAnswers),S=vi(U=>U.iframeProvenance),T=vi(U=>U.matrixAnswers),A=(m==null?void 0:m.provideFeedback)&&(((L=m==null?void 0:m.correctAnswer)==null?void 0:L.length)||0)>0,k=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[I,R]=N.useState(0),F=(m==null?void 0:m.trainingAttempts)||2,[O,$]=N.useState(!1),V=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");N.useEffect(()=>{const U=y.find(W=>W.type==="iframe");if(w&&U){const W=U.id;v.setValues({...v.values,[W]:w[W]})}},[w]),N.useEffect(()=>{S&&_(S)},[S]),N.useEffect(()=>{const U=y.filter(W=>W.type==="matrix-radio"||W.type==="matrix-checkbox");if(T&&U.length>0){const W={...v.values};U.forEach(B=>{const{id:q}=B;W[q]={...v.getInputProps(q).value,...T[q]}}),v.setValues(W)}},[T]),N.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:v.isValid(),values:Og(v.values),provenanceGraph:b}))},[v.values,f,c,t,s,o,b]);const[j,G]=N.useState(Object.fromEntries(y.map(U=>[U.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),Y=(U,W,B,q,Z)=>{G(re=>({...re,[U]:{visible:W,title:B,message:q,color:Z}}))},J=()=>{const U=I+1;R(U);const W=Object.fromEntries(y.map(B=>{var re,xe;const q=(xe=(re=m.correctAnswer)==null?void 0:re.find(pe=>pe.id===B.id))==null?void 0:xe.answer,Z=v.values[B.id];return[B.id,Array.isArray(Z)?typeof q=="string"?Z.length===1&&q===Z[0]:Z.length===q.length&&Z.every(pe=>q.includes(pe)):q===Z]}));A&&(y.forEach(B=>{var q;if(W[B.id]&&!((q=j[B.id])!=null&&q.message.includes("You've failed to answer this question correctly")))Y(B.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:B.id,answer:v.values[B.id]}));let Z="";F===-1?Z="Please try again.":U>=F?(Z=`You didn't answer this question correctly after ${F} attempts. ${k?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!k&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./__trainingFailed")},5e3)})):F-U===1?Z="Please try again. You have 1 attempt left.":Z=`Please try again. You have ${F-U} attempts left.`,Y(B.id,!0,"Incorrect Answer",Z,"red")}}),$(k&&U>=F||Object.values(W).every(B=>B)&&U<=F))};return E.jsxs("div",{style:r,children:[y.map((U,W)=>{var q,Z;const B=(Z=(q=m.correctAnswer)==null?void 0:q.find(re=>re.id===U.id))==null?void 0:Z.answer;return E.jsx(yi.Fragment,{children:U.hidden?"":E.jsxs(E.Fragment,{children:[E.jsx(X_t,{storedAnswer:d?d[U.id]:void 0,answer:{...v.getInputProps(U.id,{type:U.type==="checkbox"?"checkbox":"input"})},response:U,index:W+1}),j[U.id].visible&&E.jsxs(Pg,{mb:"md",title:j[U.id].title,color:j[U.id].color,children:[j[U.id].message," ",j[U.id].message.includes("Please try again")&&E.jsxs(E.Fragment,{children:[E.jsx("br",{}),E.jsx("br",{}),"If you're unsure"," ",E.jsx(_b,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),E.jsx("br",{}),E.jsx("br",{}),I>=F&&F>=0&&B&&` The correct answer was: ${B}.`]})]})},`${U.id}-${c}`)}),E.jsxs($i,{justify:"right",gap:"xs",children:[A&&V&&E.jsx(bn,{onClick:()=>J(),disabled:!v.isValid()||I>=F&&F>=0,children:"Check Answer"}),V&&E.jsx(v_t,{disabled:A&&!O||!v.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const wD="@REVISIT_COMMS",Q_t={minHeight:"500px",width:"100%",border:0};function J_t({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Bl(),r=ef(),i=s3e(),s=N.useRef(null),o=N.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=nh(),u=Sp(),l=N.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${wD}/${c}`,iframeId:o,message:f},"*")},[s,o]);return N.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${wD}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${wD}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${wD}/ANSWERS`:r(t(d.message));break;case`${wD}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),E.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${Ll}${e.path}?trialid=${a}&id=${o}`,style:Q_t})}async function Nte(e){const n=await(await fetch(`${Ll}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function Z_t(e){const t=await fetch(`${Ll}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function Nv({email:e,path:t}){const n=Cb();return E.jsxs(Bf,{fluid:!0,my:50,maw:800,mx:"auto",children:[E.jsx(lo,{order:2,children:E.jsx(tt,{span:!0,c:"orange",children:"404"})}),E.jsxs(tt,{children:[E.jsx(tt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),E.jsx(Rf,{h:"lg"}),E.jsxs(zu,{children:[E.jsx(zu.Item,{children:E.jsx(tt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),E.jsx(zu.Item,{children:E.jsxs(tt,{children:["If you're a participant, please contact the study administrator"," ",e&&E.jsxs(E.Fragment,{children:["at"," ",E.jsxs(_b,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const eEt={maxWidth:"100%"};function tEt({currentConfig:e}){const t={...eEt,...e.style},[n,r]=N.useState(!0),[i,s]=N.useState(!1);return N.useEffect(()=>{async function o(){const a=await Nte(e.path);s(!!a),r(!1)}o()},[e]),n||i?E.jsx(Sb,{mx:"auto",src:`${Ll}${e.path}`,style:t}):E.jsx(Nv,{path:e.path})}function Fg(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nEt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kb(e){let t,n,r;e.length!==2?(t=Fg,n=(a,u)=>Fg(e(a),u),r=(a,u)=>e(a)-u):(t=e===Fg||e===nEt?e:rEt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function rEt(){return 0}function $3e(e){return e===null?NaN:+e}function*iEt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const L3e=kb(Fg),Pv=L3e.right,sEt=L3e.left;kb($3e).center;function oEt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function aEt(e,t){const n=oEt(e,t);return n&&Math.sqrt(n)}function NR(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ol{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Bge extends Map{constructor(t,n=U3e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(YG(this,t))}has(t){return super.has(YG(this,t))}set(t,n){return super.set(B3e(this,t),n)}delete(t){return super.delete(j3e(this,t))}}class JM extends Set{constructor(t,n=U3e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(YG(this,t))}add(t){return super.add(B3e(this,t))}delete(t){return super.delete(j3e(this,t))}}function YG({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function B3e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function j3e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function U3e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function uEt(e,t){return Array.from(t,n=>e[n])}function lEt(e=Fg){if(e===Fg)return z3e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function z3e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const cEt=Math.sqrt(50),fEt=Math.sqrt(10),dEt=Math.sqrt(2);function ZM(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=cEt?10:s>=fEt?5:s>=dEt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?ZM(e,t,n*2):[a,u,l]}function KG(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?ZM(t,e,n):ZM(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function XG(e,t,n){return t=+t,e=+e,n=+n,ZM(e,t,n)[2]}function Ov(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?XG(t,e,n):XG(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Mg(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function QG(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function V3e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?z3e:lEt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));V3e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(_D(e,n,t),i(e[r],s)>0&&_D(e,n,r);o<a;){for(_D(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?_D(e,n,a):(++a,_D(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function _D(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function JG(e,t,n){if(e=Float64Array.from(iEt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return QG(e);if(t>=1)return Mg(e);var r,i=(r-1)*t,s=Math.floor(i),o=Mg(V3e(e,s).subarray(0,s+1)),a=QG(e.subarray(s+1));return o+(a-o)*(i-s)}}function H3e(e,t,n=$3e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function hEt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function q3e(e,t){return JG(e,.5,t)}function*pEt(e){for(const t of e)yield*t}function W3e(e){return Array.from(pEt(e))}function Ac(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function G3e(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function mEt(e,...t){e=new JM(e),t=t.map(gEt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function gEt(e){return e instanceof JM?e:new JM(e)}function yEt(...e){const t=new JM;for(const n of e)for(const r of n)t.add(r);return t}function vEt(e){return e}var _V=1,EV=2,ZG=3,mI=4,jge=1e-6;function bEt(e){return"translate("+e+",0)"}function xEt(e){return"translate(0,"+e+")"}function wEt(e){return t=>+e(t)}function _Et(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function EEt(){return!this.__axis}function Y3e(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===_V||e===mI?-1:1,c=e===mI||e===EV?"x":"y",f=e===_V||e===ZG?bEt:xEt;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):vEt),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+u,b=+y[y.length-1]+u,_=(t.bandwidth?_Et:wEt)(t.copy(),u),w=h.selection?h.selection():h,S=w.selectAll(".domain").data([null]),T=w.selectAll(".tick").data(p,t).order(),A=T.exit(),k=T.enter().append("g").attr("class","tick"),I=T.select("line"),R=T.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(k),I=I.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),R=R.merge(k.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===_V?"0em":e===ZG?"0.71em":"0.32em")),h!==w&&(S=S.transition(h),T=T.transition(h),I=I.transition(h),R=R.transition(h),A=A.transition(h).attr("opacity",jge).attr("transform",function(F){return isFinite(F=_(F))?f(F+u):this.getAttribute("transform")}),k.attr("opacity",jge).attr("transform",function(F){var O=this.parentNode.__axis;return f((O&&isFinite(O=O(F))?O:_(F))+u)})),A.remove(),S.attr("d",e===mI||e===EV?o?"M"+l*o+","+v+"H"+u+"V"+b+"H"+l*o:"M"+u+","+v+"V"+b:o?"M"+v+","+l*o+"V"+u+"H"+b+"V"+l*o:"M"+v+","+u+"H"+b),T.attr("opacity",1).attr("transform",function(F){return f(_(F)+u)}),I.attr(c+"2",l*s),R.attr(c,l*g).text(m),w.filter(EEt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===EV?"start":e===mI?"end":"middle"),w.each(function(){this.__axis=_})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function K3e(e){return Y3e(ZG,e)}function X3e(e){return Y3e(mI,e)}var SEt={value:()=>{}};function dB(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new iF(n)}function iF(e){this._=e}function CEt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}iF.prototype=dB.prototype={constructor:iF,on:function(e,t){var n=this._,r=CEt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=TEt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Uge(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Uge(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new iF(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function TEt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Uge(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=SEt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var eY="http://www.w3.org/1999/xhtml";const zge={svg:"http://www.w3.org/2000/svg",xhtml:eY,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hB(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),zge.hasOwnProperty(t)?{space:zge[t],local:e}:e}function AEt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===eY&&t.documentElement.namespaceURI===eY?t.createElement(e):t.createElementNS(n,e)}}function DEt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Q3e(e){var t=hB(e);return(t.local?DEt:AEt)(t)}function IEt(){}function Pte(e){return e==null?IEt:function(){return this.querySelector(e)}}function kEt(e){typeof e!="function"&&(e=Pte(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new jl(r,this._parents)}function J3e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function REt(){return[]}function Z3e(e){return e==null?REt:function(){return this.querySelectorAll(e)}}function NEt(e){return function(){return J3e(e.apply(this,arguments))}}function PEt(e){typeof e=="function"?e=NEt(e):e=Z3e(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new jl(r,i)}function eNe(e){return function(){return this.matches(e)}}function tNe(e){return function(t){return t.matches(e)}}var OEt=Array.prototype.find;function FEt(e){return function(){return OEt.call(this.children,e)}}function MEt(){return this.firstElementChild}function $Et(e){return this.select(e==null?MEt:FEt(typeof e=="function"?e:tNe(e)))}var LEt=Array.prototype.filter;function BEt(){return Array.from(this.children)}function jEt(e){return function(){return LEt.call(this.children,e)}}function UEt(e){return this.selectAll(e==null?BEt:jEt(typeof e=="function"?e:tNe(e)))}function zEt(e){typeof e!="function"&&(e=eNe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new jl(r,this._parents)}function nNe(e){return new Array(e.length)}function VEt(){return new jl(this._enter||this._groups.map(nNe),this._parents)}function e8(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}e8.prototype={constructor:e8,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function HEt(e){return function(){return e}}function qEt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new e8(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function WEt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new e8(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function GEt(e){return e.__data__}function YEt(e,t){if(!arguments.length)return Array.from(this,GEt);var n=t?WEt:qEt,r=this._parents,i=this._groups;typeof e!="function"&&(e=HEt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=KEt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,_,w;v<p;++v)if(_=m[v]){for(v>=b&&(b=v+1);!(w=g[b])&&++b<p;);_._next=w||null}}return o=new jl(o,r),o._enter=a,o._exit=u,o}function KEt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function XEt(){return new jl(this._exit||this._groups.map(nNe),this._parents)}function QEt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function JEt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new jl(a,this._parents)}function ZEt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function e2t(e){e||(e=t2t);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new jl(i,this._parents).order()}function t2t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function n2t(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function r2t(){return Array.from(this)}function i2t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function s2t(){let e=0;for(const t of this)++e;return e}function o2t(){return!this.node()}function a2t(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function u2t(e){return function(){this.removeAttribute(e)}}function l2t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function c2t(e,t){return function(){this.setAttribute(e,t)}}function f2t(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function d2t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function h2t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function p2t(e,t){var n=hB(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?l2t:u2t:typeof t=="function"?n.local?h2t:d2t:n.local?f2t:c2t)(n,t))}function rNe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function m2t(e){return function(){this.style.removeProperty(e)}}function g2t(e,t,n){return function(){this.style.setProperty(e,t,n)}}function y2t(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function v2t(e,t,n){return arguments.length>1?this.each((t==null?m2t:typeof t=="function"?y2t:g2t)(e,t,n??"")):pC(this.node(),e)}function pC(e,t){return e.style.getPropertyValue(t)||rNe(e).getComputedStyle(e,null).getPropertyValue(t)}function b2t(e){return function(){delete this[e]}}function x2t(e,t){return function(){this[e]=t}}function w2t(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function _2t(e,t){return arguments.length>1?this.each((t==null?b2t:typeof t=="function"?w2t:x2t)(e,t)):this.node()[e]}function iNe(e){return e.trim().split(/^|\s+/)}function Ote(e){return e.classList||new sNe(e)}function sNe(e){this._node=e,this._names=iNe(e.getAttribute("class")||"")}sNe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function oNe(e,t){for(var n=Ote(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function aNe(e,t){for(var n=Ote(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function E2t(e){return function(){oNe(this,e)}}function S2t(e){return function(){aNe(this,e)}}function C2t(e,t){return function(){(t.apply(this,arguments)?oNe:aNe)(this,e)}}function T2t(e,t){var n=iNe(e+"");if(arguments.length<2){for(var r=Ote(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?C2t:t?E2t:S2t)(n,t))}function A2t(){this.textContent=""}function D2t(e){return function(){this.textContent=e}}function I2t(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function k2t(e){return arguments.length?this.each(e==null?A2t:(typeof e=="function"?I2t:D2t)(e)):this.node().textContent}function R2t(){this.innerHTML=""}function N2t(e){return function(){this.innerHTML=e}}function P2t(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function O2t(e){return arguments.length?this.each(e==null?R2t:(typeof e=="function"?P2t:N2t)(e)):this.node().innerHTML}function F2t(){this.nextSibling&&this.parentNode.appendChild(this)}function M2t(){return this.each(F2t)}function $2t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function L2t(){return this.each($2t)}function B2t(e){var t=typeof e=="function"?e:Q3e(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function j2t(){return null}function U2t(e,t){var n=typeof e=="function"?e:Q3e(e),r=t==null?j2t:typeof t=="function"?t:Pte(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function z2t(){var e=this.parentNode;e&&e.removeChild(this)}function V2t(){return this.each(z2t)}function H2t(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function q2t(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function W2t(e){return this.select(e?q2t:H2t)}function G2t(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Y2t(e){return function(t){e.call(this,t,this.__data__)}}function K2t(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function X2t(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Q2t(e,t,n){return function(){var r=this.__on,i,s=Y2t(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function J2t(e,t,n){var r=K2t(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Q2t:X2t,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function uNe(e,t,n){var r=rNe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Z2t(e,t){return function(){return uNe(this,e,t)}}function eSt(e,t){return function(){return uNe(this,e,t.apply(this,arguments))}}function tSt(e,t){return this.each((typeof t=="function"?eSt:Z2t)(e,t))}function*nSt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Fte=[null];function jl(e,t){this._groups=e,this._parents=t}function xN(){return new jl([[document.documentElement]],Fte)}function rSt(){return this}jl.prototype=xN.prototype={constructor:jl,select:kEt,selectAll:PEt,selectChild:$Et,selectChildren:UEt,filter:zEt,data:YEt,enter:VEt,exit:XEt,join:QEt,merge:JEt,selection:rSt,order:ZEt,sort:e2t,call:n2t,nodes:r2t,node:i2t,size:s2t,empty:o2t,each:a2t,attr:p2t,style:v2t,property:_2t,classed:T2t,text:k2t,html:O2t,raise:M2t,lower:L2t,append:B2t,insert:U2t,remove:V2t,clone:W2t,datum:G2t,on:J2t,dispatch:tSt,[Symbol.iterator]:nSt};function vr(e){return typeof e=="string"?new jl([[document.querySelector(e)]],[document.documentElement]):new jl([[e]],Fte)}function iSt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function t8(e,t){if(e=iSt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function lNe(e){return typeof e=="string"?new jl([document.querySelectorAll(e)],[document.documentElement]):new jl([J3e(e)],Fte)}const tY={capture:!0,passive:!1};function nY(e){e.preventDefault(),e.stopImmediatePropagation()}function sSt(e){var t=e.document.documentElement,n=vr(e).on("dragstart.drag",nY,tY);"onselectstart"in t?n.on("selectstart.drag",nY,tY):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function oSt(e,t){var n=e.document.documentElement,r=vr(e).on("dragstart.drag",null);t&&(r.on("click.drag",nY,tY),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function qT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Rb(){}var Kw=.7,mC=1/Kw,xS="\\s*([+-]?\\d+)\\s*",PR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Im="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aSt=/^#([0-9a-f]{3,8})$/,uSt=new RegExp(`^rgb\\(${xS},${xS},${xS}\\)$`),lSt=new RegExp(`^rgb\\(${Im},${Im},${Im}\\)$`),cSt=new RegExp(`^rgba\\(${xS},${xS},${xS},${PR}\\)$`),fSt=new RegExp(`^rgba\\(${Im},${Im},${Im},${PR}\\)$`),dSt=new RegExp(`^hsl\\(${PR},${Im},${Im}\\)$`),hSt=new RegExp(`^hsla\\(${PR},${Im},${Im},${PR}\\)$`),Vge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qT(Rb,Xw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Hge,formatHex:Hge,formatHex8:pSt,formatHsl:mSt,formatRgb:qge,toString:qge});function Hge(){return this.rgb().formatHex()}function pSt(){return this.rgb().formatHex8()}function mSt(){return cNe(this).formatHsl()}function qge(){return this.rgb().formatRgb()}function Xw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=aSt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Wge(t):n===3?new Na(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?p4(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?p4(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uSt.exec(e))?new Na(t[1],t[2],t[3],1):(t=lSt.exec(e))?new Na(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cSt.exec(e))?p4(t[1],t[2],t[3],t[4]):(t=fSt.exec(e))?p4(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dSt.exec(e))?Kge(t[1],t[2]/100,t[3]/100,1):(t=hSt.exec(e))?Kge(t[1],t[2]/100,t[3]/100,t[4]):Vge.hasOwnProperty(e)?Wge(Vge[e]):e==="transparent"?new Na(NaN,NaN,NaN,0):null}function Wge(e){return new Na(e>>16&255,e>>8&255,e&255,1)}function p4(e,t,n,r){return r<=0&&(e=t=n=NaN),new Na(e,t,n,r)}function Mte(e){return e instanceof Rb||(e=Xw(e)),e?(e=e.rgb(),new Na(e.r,e.g,e.b,e.opacity)):new Na}function Fv(e,t,n,r){return arguments.length===1?Mte(e):new Na(e,t,n,r??1)}function Na(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}qT(Na,Fv,wN(Rb,{brighter(e){return e=e==null?mC:Math.pow(mC,e),new Na(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kw:Math.pow(Kw,e),new Na(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Na(kw(this.r),kw(this.g),kw(this.b),n8(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gge,formatHex:Gge,formatHex8:gSt,formatRgb:Yge,toString:Yge}));function Gge(){return`#${hw(this.r)}${hw(this.g)}${hw(this.b)}`}function gSt(){return`#${hw(this.r)}${hw(this.g)}${hw(this.b)}${hw((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yge(){const e=n8(this.opacity);return`${e===1?"rgb(":"rgba("}${kw(this.r)}, ${kw(this.g)}, ${kw(this.b)}${e===1?")":`, ${e})`}`}function n8(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kw(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hw(e){return e=kw(e),(e<16?"0":"")+e.toString(16)}function Kge(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Uh(e,t,n,r)}function cNe(e){if(e instanceof Uh)return new Uh(e.h,e.s,e.l,e.opacity);if(e instanceof Rb||(e=Xw(e)),!e)return new Uh;if(e instanceof Uh)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Uh(o,a,u,e.opacity)}function r8(e,t,n,r){return arguments.length===1?cNe(e):new Uh(e,t,n,r??1)}function Uh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}qT(Uh,r8,wN(Rb,{brighter(e){return e=e==null?mC:Math.pow(mC,e),new Uh(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kw:Math.pow(Kw,e),new Uh(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Na(SV(e>=240?e-240:e+120,i,r),SV(e,i,r),SV(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Uh(Xge(this.h),m4(this.s),m4(this.l),n8(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=n8(this.opacity);return`${e===1?"hsl(":"hsla("}${Xge(this.h)}, ${m4(this.s)*100}%, ${m4(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xge(e){return e=(e||0)%360,e<0?e+360:e}function m4(e){return Math.max(0,Math.min(1,e||0))}function SV(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const fNe=Math.PI/180,dNe=180/Math.PI,i8=18,hNe=.96422,pNe=1,mNe=.82521,gNe=4/29,wS=6/29,yNe=3*wS*wS,ySt=wS*wS*wS;function vNe(e){if(e instanceof km)return new km(e.l,e.a,e.b,e.opacity);if(e instanceof wg)return bNe(e);e instanceof Na||(e=Mte(e));var t=DV(e.r),n=DV(e.g),r=DV(e.b),i=CV((.2225045*t+.7168786*n+.0606169*r)/pNe),s,o;return t===n&&n===r?s=o=i:(s=CV((.4360747*t+.3850649*n+.1430804*r)/hNe),o=CV((.0139322*t+.0971045*n+.7141733*r)/mNe)),new km(116*i-16,500*(s-i),200*(i-o),e.opacity)}function s8(e,t,n,r){return arguments.length===1?vNe(e):new km(e,t,n,r??1)}function km(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}qT(km,s8,wN(Rb,{brighter(e){return new km(this.l+i8*(e??1),this.a,this.b,this.opacity)},darker(e){return new km(this.l-i8*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=hNe*TV(t),e=pNe*TV(e),n=mNe*TV(n),new Na(AV(3.1338561*t-1.6168667*e-.4906146*n),AV(-.9787684*t+1.9161415*e+.033454*n),AV(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function CV(e){return e>ySt?Math.pow(e,1/3):e/yNe+gNe}function TV(e){return e>wS?e*e*e:yNe*(e-gNe)}function AV(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function DV(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function vSt(e){if(e instanceof wg)return new wg(e.h,e.c,e.l,e.opacity);if(e instanceof km||(e=vNe(e)),e.a===0&&e.b===0)return new wg(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*dNe;return new wg(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function o8(e,t,n,r){return arguments.length===1?vSt(e):new wg(e,t,n,r??1)}function wg(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function bNe(e){if(isNaN(e.h))return new km(e.l,0,0,e.opacity);var t=e.h*fNe;return new km(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}qT(wg,o8,wN(Rb,{brighter(e){return new wg(this.h,this.c,this.l+i8*(e??1),this.opacity)},darker(e){return new wg(this.h,this.c,this.l-i8*(e??1),this.opacity)},rgb(){return bNe(this).rgb()}}));var xNe=-.14861,$te=1.78277,Lte=-.29227,pB=-.90649,OR=1.97294,Qge=OR*pB,Jge=OR*$te,Zge=$te*Lte-pB*xNe;function bSt(e){if(e instanceof Rw)return new Rw(e.h,e.s,e.l,e.opacity);e instanceof Na||(e=Mte(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Zge*r+Qge*t-Jge*n)/(Zge+Qge-Jge),s=r-i,o=(OR*(n-i)-Lte*s)/pB,a=Math.sqrt(o*o+s*s)/(OR*i*(1-i)),u=a?Math.atan2(o,s)*dNe-120:NaN;return new Rw(u<0?u+360:u,a,i,e.opacity)}function rY(e,t,n,r){return arguments.length===1?bSt(e):new Rw(e,t,n,r??1)}function Rw(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}qT(Rw,rY,wN(Rb,{brighter(e){return e=e==null?mC:Math.pow(mC,e),new Rw(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kw:Math.pow(Kw,e),new Rw(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*fNe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Na(255*(t+n*(xNe*r+$te*i)),255*(t+n*(Lte*r+pB*i)),255*(t+n*(OR*r)),this.opacity)}}));function wNe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function _Ne(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return wNe((n-r/t)*t,o,i,s,a)}}function ENe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return wNe((n-r/t)*t,i,s,o,a)}}const mB=e=>()=>e;function SNe(e,t){return function(n){return e+n*t}}function xSt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function gB(e,t){var n=t-e;return n?SNe(e,n>180||n<-180?n-360*Math.round(n/360):n):mB(isNaN(e)?t:e)}function wSt(e){return(e=+e)==1?Pa:function(t,n){return n-t?xSt(t,n,e):mB(isNaN(t)?n:t)}}function Pa(e,t){var n=t-e;return n?SNe(e,n):mB(isNaN(e)?t:e)}const FR=function e(t){var n=wSt(t);function r(i,s){var o=n((i=Fv(i)).r,(s=Fv(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Pa(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function CNe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Fv(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var _St=CNe(_Ne),ESt=CNe(ENe);function Bte(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function TNe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function SSt(e,t){return(TNe(t)?Bte:ANe)(e,t)}function ANe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Dy(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function DNe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Td(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function INe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Dy(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var iY=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,IV=new RegExp(iY.source,"g");function CSt(e){return function(){return e}}function TSt(e){return function(t){return e(t)+""}}function jte(e,t){var n=iY.lastIndex=IV.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=iY.exec(e))&&(i=IV.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Td(r,i)})),n=IV.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?TSt(u[0].x):CSt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Dy(e,t){var n=typeof t,r;return t==null||n==="boolean"?mB(t):(n==="number"?Td:n==="string"?(r=Xw(t))?(t=r,FR):jte:t instanceof Xw?FR:t instanceof Date?DNe:TNe(t)?Bte:Array.isArray(t)?ANe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?INe:Td)(e,t)}function ASt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function DSt(e,t){var n=gB(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function _N(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var eye=180/Math.PI,sY={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function kNe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*eye,skewX:Math.atan(u)*eye,scaleX:o,scaleY:a}}var g4;function ISt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?sY:kNe(t.a,t.b,t.c,t.d,t.e,t.f)}function kSt(e){return e==null||(g4||(g4=document.createElementNS("http://www.w3.org/2000/svg","g")),g4.setAttribute("transform",e),!(e=g4.transform.baseVal.consolidate()))?sY:(e=e.matrix,kNe(e.a,e.b,e.c,e.d,e.e,e.f))}function RNe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Td(l,f)},{i:m-2,x:Td(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Td(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Td(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Td(l,f)},{i:m-2,x:Td(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var NNe=RNe(ISt,"px, ","px)","deg)"),PNe=RNe(kSt,", ",")",")"),RSt=1e-12;function tye(e){return((e=Math.exp(e))+1/e)/2}function NSt(e){return((e=Math.exp(e))-1/e)/2}function PSt(e){return((e=Math.exp(2*e))-1)/(e+1)}const OSt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<RSt)y=Math.log(d/l)/t,g=function(T){return[a+T*h,u+T*p,l*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),_=(d*d-l*l-r*m)/(2*d*n*v),w=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(_*_+1)-_);y=(S-w)/t,g=function(T){var A=T*y,k=tye(w),I=l/(n*v)*(k*PSt(t*A+w)-NSt(w));return[a+I*h,u+I*p,l*k/tye(t*A+w)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function ONe(e){return function(t,n){var r=e((t=r8(t)).h,(n=r8(n)).h),i=Pa(t.s,n.s),s=Pa(t.l,n.l),o=Pa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const FSt=ONe(gB);var MSt=ONe(Pa);function $St(e,t){var n=Pa((e=s8(e)).l,(t=s8(t)).l),r=Pa(e.a,t.a),i=Pa(e.b,t.b),s=Pa(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function FNe(e){return function(t,n){var r=e((t=o8(t)).h,(n=o8(n)).h),i=Pa(t.c,n.c),s=Pa(t.l,n.l),o=Pa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const LSt=FNe(gB);var BSt=FNe(Pa);function MNe(e){return function t(n){n=+n;function r(i,s){var o=e((i=rY(i)).h,(s=rY(s)).h),a=Pa(i.s,s.s),u=Pa(i.l,s.l),l=Pa(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const jSt=MNe(gB);var USt=MNe(Pa);function Ute(e,t){t===void 0&&(t=e,e=Dy);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function zSt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const VSt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Dy,interpolateArray:SSt,interpolateBasis:_Ne,interpolateBasisClosed:ENe,interpolateCubehelix:jSt,interpolateCubehelixLong:USt,interpolateDate:DNe,interpolateDiscrete:ASt,interpolateHcl:LSt,interpolateHclLong:BSt,interpolateHsl:FSt,interpolateHslLong:MSt,interpolateHue:DSt,interpolateLab:$St,interpolateNumber:Td,interpolateNumberArray:Bte,interpolateObject:INe,interpolateRgb:FR,interpolateRgbBasis:_St,interpolateRgbBasisClosed:ESt,interpolateRound:_N,interpolateString:jte,interpolateTransformCss:NNe,interpolateTransformSvg:PNe,interpolateZoom:OSt,piecewise:Ute,quantize:zSt},Symbol.toStringTag,{value:"Module"}));var gC=0,gI=0,ED=0,$Ne=1e3,a8,yI,u8=0,Qw=0,yB=0,MR=typeof performance=="object"&&performance.now?performance:Date,LNe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function vB(){return Qw||(LNe(HSt),Qw=MR.now()+yB)}function HSt(){Qw=0}function $R(){this._call=this._time=this._next=null}$R.prototype=zte.prototype={constructor:$R,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?vB():+n)+(t==null?0:+t),!this._next&&yI!==this&&(yI?yI._next=this:a8=this,yI=this),this._call=e,this._time=n,oY()},stop:function(){this._call&&(this._call=null,this._time=1/0,oY())}};function zte(e,t,n){var r=new $R;return r.restart(e,t,n),r}function qSt(){vB(),++gC;for(var e=a8,t;e;)(t=Qw-e._time)>=0&&e._call.call(void 0,t),e=e._next;--gC}function nye(){Qw=(u8=MR.now())+yB,gC=gI=0;try{qSt()}finally{gC=0,GSt(),Qw=0}}function WSt(){var e=MR.now(),t=e-u8;t>$Ne&&(yB-=t,u8=e)}function GSt(){for(var e,t=a8,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:a8=n);yI=e,oY(r)}function oY(e){if(!gC){gI&&(gI=clearTimeout(gI));var t=e-Qw;t>24?(e<1/0&&(gI=setTimeout(nye,e-MR.now()-yB)),ED&&(ED=clearInterval(ED))):(ED||(u8=MR.now(),ED=setInterval(WSt,$Ne)),gC=1,LNe(nye))}}function rye(e,t,n){var r=new $R;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function YSt(e,t,n){var r=new $R,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?vB():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var KSt=dB("start","end","cancel","interrupt"),XSt=[],BNe=0,iye=1,aY=2,sF=3,sye=4,uY=5,oF=6;function bB(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;QSt(e,n,{name:t,index:r,group:i,on:KSt,tween:XSt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:BNe})}function Vte(e,t){var n=Tp(e,t);if(n.state>BNe)throw new Error("too late; already scheduled");return n}function p0(e,t){var n=Tp(e,t);if(n.state>sF)throw new Error("too late; already running");return n}function Tp(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function QSt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=zte(s,0,n.time);function s(l){n.state=iye,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==iye)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===sF)return rye(o);h.state===sye?(h.state=oF,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=oF,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(rye(function(){n.state===sF&&(n.state=sye,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=aY,n.on.call("start",e,e.__data__,n.index,n.group),n.state===aY){for(n.state=sF,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=uY,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===uY&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=oF,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function lY(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>aY&&r.state<uY,r.state=oF,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function JSt(e){return this.each(function(){lY(this,e)})}function ZSt(e,t){var n,r;return function(){var i=p0(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function eCt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=p0(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function tCt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Tp(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?ZSt:eCt)(n,e,t))}function Hte(e,t,n){var r=e._id;return e.each(function(){var i=p0(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Tp(i,r).value[t]}}function jNe(e,t){var n;return(typeof t=="number"?Td:t instanceof Xw?FR:(n=Xw(t))?(t=n,FR):jte)(e,t)}function nCt(e){return function(){this.removeAttribute(e)}}function rCt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iCt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function sCt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function oCt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function aCt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function uCt(e,t){var n=hB(e),r=n==="transform"?PNe:jNe;return this.attrTween(e,typeof t=="function"?(n.local?aCt:oCt)(n,r,Hte(this,"attr."+e,t)):t==null?(n.local?rCt:nCt)(n):(n.local?sCt:iCt)(n,r,t))}function lCt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function cCt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fCt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&cCt(e,s)),n}return i._value=t,i}function dCt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&lCt(e,s)),n}return i._value=t,i}function hCt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=hB(e);return this.tween(n,(r.local?fCt:dCt)(r,t))}function pCt(e,t){return function(){Vte(this,e).delay=+t.apply(this,arguments)}}function mCt(e,t){return t=+t,function(){Vte(this,e).delay=t}}function gCt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pCt:mCt)(t,e)):Tp(this.node(),t).delay}function yCt(e,t){return function(){p0(this,e).duration=+t.apply(this,arguments)}}function vCt(e,t){return t=+t,function(){p0(this,e).duration=t}}function bCt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yCt:vCt)(t,e)):Tp(this.node(),t).duration}function xCt(e,t){if(typeof t!="function")throw new Error;return function(){p0(this,e).ease=t}}function wCt(e){var t=this._id;return arguments.length?this.each(xCt(t,e)):Tp(this.node(),t).ease}function _Ct(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;p0(this,e).ease=n}}function ECt(e){if(typeof e!="function")throw new Error;return this.each(_Ct(this._id,e))}function SCt(e){typeof e!="function"&&(e=eNe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new ry(r,this._parents,this._name,this._id)}function CCt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new ry(o,this._parents,this._name,this._id)}function TCt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ACt(e,t,n){var r,i,s=TCt(t)?Vte:p0;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function DCt(e,t){var n=this._id;return arguments.length<2?Tp(this.node(),n).on.on(e):this.each(ACt(n,e,t))}function ICt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function kCt(){return this.on("end.remove",ICt(this._id))}function RCt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pte(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,bB(l[d],t,n,d,l,Tp(c,n)));return new ry(s,this._parents,t,n)}function NCt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Z3e(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Tp(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&bB(h,t,n,m,d,p);s.push(d),o.push(c)}return new ry(s,o,t,n)}var PCt=xN.prototype.constructor;function OCt(){return new PCt(this._groups,this._parents)}function FCt(e,t){var n,r,i;return function(){var s=pC(this,e),o=(this.style.removeProperty(e),pC(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function UNe(e){return function(){this.style.removeProperty(e)}}function MCt(e,t,n){var r,i=n+"",s;return function(){var o=pC(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function $Ct(e,t,n){var r,i,s;return function(){var o=pC(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),pC(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function LCt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=p0(this,e),l=u.on,c=u.value[s]==null?a||(a=UNe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function BCt(e,t,n){var r=(e+="")=="transform"?NNe:jNe;return t==null?this.styleTween(e,FCt(e,r)).on("end.style."+e,UNe(e)):typeof t=="function"?this.styleTween(e,$Ct(e,r,Hte(this,"style."+e,t))).each(LCt(this._id,e)):this.styleTween(e,MCt(e,r,t),n).on("end.style."+e,null)}function jCt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function UCt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&jCt(e,o,n)),r}return s._value=t,s}function zCt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,UCt(e,t,n??""))}function VCt(e){return function(){this.textContent=e}}function HCt(e){return function(){var t=e(this);this.textContent=t??""}}function qCt(e){return this.tween("text",typeof e=="function"?HCt(Hte(this,"text",e)):VCt(e==null?"":e+""))}function WCt(e){return function(t){this.textContent=e.call(this,t)}}function GCt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&WCt(i)),t}return r._value=e,r}function YCt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,GCt(e))}function KCt(){for(var e=this._name,t=this._id,n=zNe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Tp(u,t);bB(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ry(r,this._parents,e,n)}function XCt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=p0(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var QCt=0;function ry(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zNe(){return++QCt}var H0=xN.prototype;ry.prototype={constructor:ry,select:RCt,selectAll:NCt,selectChild:H0.selectChild,selectChildren:H0.selectChildren,filter:SCt,merge:CCt,selection:OCt,transition:KCt,call:H0.call,nodes:H0.nodes,node:H0.node,size:H0.size,empty:H0.empty,each:H0.each,on:DCt,attr:uCt,attrTween:hCt,style:BCt,styleTween:zCt,text:qCt,textTween:YCt,remove:kCt,tween:tCt,delay:gCt,duration:bCt,ease:wCt,easeVarying:ECt,end:XCt,[Symbol.iterator]:H0[Symbol.iterator]};const JCt=e=>+e;function ZCt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var eTt={time:null,delay:0,duration:250,ease:ZCt};function tTt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function nTt(e){var t,n;e instanceof ry?(t=e._id,e=e._name):(t=zNe(),(n=eTt).time=vB(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&bB(u,e,t,l,o,n||tTt(u,t));return new ry(r,this._parents,e,t)}xN.prototype.interrupt=JSt;xN.prototype.transition=nTt;const kV=e=>()=>e;function rTt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function iTt(e){e.stopImmediatePropagation()}function RV(e){e.preventDefault(),e.stopImmediatePropagation()}var oye={name:"drag"},NV={name:"space"},XE={name:"handle"},QE={name:"center"};const{abs:aye,max:Tu,min:Au}=Math;function uye(e){return[+e[0],+e[1]]}function cY(e){return[uye(e[0]),uye(e[1])]}var aF={name:"x",handles:["w","e"].map(LR),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},uF={name:"y",handles:["n","s"].map(LR),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},sTt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(LR),input:function(e){return e==null?null:cY(e)},output:function(e){return e}},q0={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},lye={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},cye={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},oTt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},aTt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function LR(e){return{type:e}}function uTt(e){return!e.ctrlKey&&!e.button}function lTt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function cTt(){return navigator.maxTouchPoints||"ontouchstart"in this}function PV(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function fTt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function VNe(){return qte(aF)}function HNe(){return qte(uF)}function qNe(){return qte(sTt)}function qte(e){var t=lTt,n=uTt,r=cTt,i=!0,s=dB("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([LR("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",q0.overlay).merge(y).each(function(){var b=PV(this).extent;vr(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([LR("selection")]).enter().append("rect").attr("class","selection").attr("cursor",q0.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return q0[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,_=b.__brush,w=c(b,arguments),S=_.selection,T=e.input(typeof y=="function"?y.apply(this,arguments):y,_.extent),A=Dy(S,T);function k(I){_.selection=I===1&&T===null?null:A(I),l.call(b),w.brush()}return S!==null&&T!==null?k:k(1)}):g.each(function(){var b=this,_=arguments,w=b.__brush,S=e.input(typeof y=="function"?y.apply(b,_):y,w.extent),T=c(b,_).beforestart();lY(b),w.selection=S===null?null:S,l.call(b),T.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=vr(this),y=PV(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=vr(this.that).datum();s.call(g,this.that,new rTt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?oye:i&&g.altKey?QE:XE,_=e===uF?null:oTt[v],w=e===aF?null:aTt[v],S=PV(y),T=S.extent,A=S.selection,k=T[0][0],I,R,F=T[0][1],O,$,V=T[1][0],j,G,Y=T[1][1],J,L,U=0,W=0,B,q=_&&w&&i&&g.shiftKey,Z,re,xe=Array.from(g.touches||[g],Ie=>{const Ve=Ie.identifier;return Ie=t8(Ie,y),Ie.point0=Ie.slice(),Ie.identifier=Ve,Ie});lY(y);var pe=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(B=!0);const Ie=[xe[0],xe[1]||xe[0]];S.selection=A=[[I=e===uF?k:Au(Ie[0][0],Ie[1][0]),O=e===aF?F:Au(Ie[0][1],Ie[1][1])],[j=e===uF?V:Tu(Ie[0][0],Ie[1][0]),J=e===aF?Y:Tu(Ie[0][1],Ie[1][1])]],xe.length>1&&ut(g)}else I=A[0][0],O=A[0][1],j=A[1][0],J=A[1][1];R=I,$=O,G=j,L=J;var Te=vr(y).attr("pointer-events","none"),ke=Te.selectAll(".overlay").attr("cursor",q0[v]);if(g.touches)pe.moved=Re,pe.ended=Ke;else{var it=vr(g.view).on("mousemove.brush",Re,!0).on("mouseup.brush",Ke,!0);i&&it.on("keydown.brush",Ct,!0).on("keyup.brush",gt,!0),sSt(g.view)}l.call(y),pe.start(g,b.name);function Re(Ie){for(const Ve of Ie.changedTouches||[Ie])for(const ft of xe)ft.identifier===Ve.identifier&&(ft.cur=t8(Ve,y));if(q&&!Z&&!re&&xe.length===1){const Ve=xe[0];aye(Ve.cur[0]-Ve[0])>aye(Ve.cur[1]-Ve[1])?re=!0:Z=!0}for(const Ve of xe)Ve.cur&&(Ve[0]=Ve.cur[0],Ve[1]=Ve.cur[1]);B=!0,RV(Ie),ut(Ie)}function ut(Ie){const Ve=xe[0],ft=Ve.point0;var _t;switch(U=Ve[0]-ft[0],W=Ve[1]-ft[1],b){case NV:case oye:{_&&(U=Tu(k-I,Au(V-j,U)),R=I+U,G=j+U),w&&(W=Tu(F-O,Au(Y-J,W)),$=O+W,L=J+W);break}case XE:{xe[1]?(_&&(R=Tu(k,Au(V,xe[0][0])),G=Tu(k,Au(V,xe[1][0])),_=1),w&&($=Tu(F,Au(Y,xe[0][1])),L=Tu(F,Au(Y,xe[1][1])),w=1)):(_<0?(U=Tu(k-I,Au(V-I,U)),R=I+U,G=j):_>0&&(U=Tu(k-j,Au(V-j,U)),R=I,G=j+U),w<0?(W=Tu(F-O,Au(Y-O,W)),$=O+W,L=J):w>0&&(W=Tu(F-J,Au(Y-J,W)),$=O,L=J+W));break}case QE:{_&&(R=Tu(k,Au(V,I-U*_)),G=Tu(k,Au(V,j+U*_))),w&&($=Tu(F,Au(Y,O-W*w)),L=Tu(F,Au(Y,J+W*w)));break}}G<R&&(_*=-1,_t=I,I=j,j=_t,_t=R,R=G,G=_t,v in lye&&ke.attr("cursor",q0[v=lye[v]])),L<$&&(w*=-1,_t=O,O=J,J=_t,_t=$,$=L,L=_t,v in cye&&ke.attr("cursor",q0[v=cye[v]])),S.selection&&(A=S.selection),Z&&(R=A[0][0],G=A[1][0]),re&&($=A[0][1],L=A[1][1]),(A[0][0]!==R||A[0][1]!==$||A[1][0]!==G||A[1][1]!==L)&&(S.selection=[[R,$],[G,L]],l.call(y),pe.brush(Ie,b.name))}function Ke(Ie){if(iTt(Ie),Ie.touches){if(Ie.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else oSt(Ie.view,B),it.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Te.attr("pointer-events","all"),ke.attr("cursor",q0.overlay),S.selection&&(A=S.selection),fTt(A)&&(S.selection=null,l.call(y)),pe.end(Ie,b.name)}function Ct(Ie){switch(Ie.keyCode){case 16:{q=_&&w;break}case 18:{b===XE&&(_&&(j=G-U*_,I=R+U*_),w&&(J=L-W*w,O=$+W*w),b=QE,ut(Ie));break}case 32:{(b===XE||b===QE)&&(_<0?j=G-U:_>0&&(I=R-U),w<0?J=L-W:w>0&&(O=$-W),b=NV,ke.attr("cursor",q0.selection),ut(Ie));break}default:return}RV(Ie)}function gt(Ie){switch(Ie.keyCode){case 16:{q&&(Z=re=q=!1,ut(Ie));break}case 18:{b===QE&&(_<0?j=G:_>0&&(I=R),w<0?J=L:w>0&&(O=$),b=XE,ut(Ie));break}case 32:{b===NV&&(Ie.altKey?(_&&(j=G-U*_,I=R+U*_),w&&(J=L-W*w,O=$+W*w),b=QE):(_<0?j=G:_>0&&(I=R),w<0?J=L:w>0&&(O=$),b=XE),ke.attr("cursor",q0[v]),ut(Ie));break}default:return}RV(Ie)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=cY(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:kV(cY(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:kV(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:kV(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const fY=Math.PI,dY=2*fY,Ox=1e-6,dTt=dY-Ox;function WNe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function hTt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return WNe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Wte=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?WNe:hTt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Ox)if(!(Math.abs(f*u-l*c)>Ox)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((fY-Math.acos((m+d-g)/(2*y*v)))/2),_=b/v,w=b/y;Math.abs(_-1)>Ox&&this._append`L${t+_*c},${n+_*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+w*u},${this._y1=n+w*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ox||Math.abs(this._y1-c)>Ox)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%dY+dY),d>dTt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Ox&&this._append`A${r},${r},0,${+(d>=fY)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function xB(){return new Wte}xB.prototype=Wte.prototype;const $g=11102230246251565e-32,Du=134217729,pTt=(3+8*$g)*$g;function OV(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function mTt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function EN(e){return new Float64Array(e)}const gTt=(3+16*$g)*$g,yTt=(2+12*$g)*$g,vTt=(9+64*$g)*$g*$g,JE=EN(4),fye=EN(8),dye=EN(12),hye=EN(16),yl=EN(4);function bTt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,_,w,S,T,A;const k=e-i,I=n-i,R=t-s,F=r-s;_=k*F,d=Du*k,h=d-(d-k),p=k-h,d=Du*F,m=d-(d-F),g=F-m,w=p*g-(_-h*m-p*m-h*g),S=R*I,d=Du*R,h=d-(d-R),p=R-h,d=Du*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=w-T,f=w-y,JE[0]=w-(y+f)+(f-T),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,JE[1]=b-(y+f)+(f-S),A=v+y,f=A-v,JE[2]=v-(A-f)+(y-f),JE[3]=A;let O=mTt(4,JE),$=yTt*o;if(O>=$||-O>=$||(f=e-k,a=e-(k+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-F,c=r-(F+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=vTt*o+pTt*Math.abs(O),O+=k*c+F*a-(R*l+I*u),O>=$||-O>=$))return O;_=a*F,d=Du*a,h=d-(d-a),p=a-h,d=Du*F,m=d-(d-F),g=F-m,w=p*g-(_-h*m-p*m-h*g),S=u*I,d=Du*u,h=d-(d-u),p=u-h,d=Du*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=w-T,f=w-y,yl[0]=w-(y+f)+(f-T),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,yl[1]=b-(y+f)+(f-S),A=v+y,f=A-v,yl[2]=v-(A-f)+(y-f),yl[3]=A;const V=OV(4,JE,4,yl,fye);_=k*c,d=Du*k,h=d-(d-k),p=k-h,d=Du*c,m=d-(d-c),g=c-m,w=p*g-(_-h*m-p*m-h*g),S=R*l,d=Du*R,h=d-(d-R),p=R-h,d=Du*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=w-T,f=w-y,yl[0]=w-(y+f)+(f-T),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,yl[1]=b-(y+f)+(f-S),A=v+y,f=A-v,yl[2]=v-(A-f)+(y-f),yl[3]=A;const j=OV(V,fye,4,yl,dye);_=a*c,d=Du*a,h=d-(d-a),p=a-h,d=Du*c,m=d-(d-c),g=c-m,w=p*g-(_-h*m-p*m-h*g),S=u*l,d=Du*u,h=d-(d-u),p=u-h,d=Du*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=w-T,f=w-y,yl[0]=w-(y+f)+(f-T),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,yl[1]=b-(y+f)+(f-S),A=v+y,f=A-v,yl[2]=v-(A-f)+(y-f),yl[3]=A;const G=OV(j,dye,4,yl,hye);return hye[G-1]}function y4(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=gTt*l?u:-bTt(e,t,n,r,i,s,l)}const pye=Math.pow(2,-52),v4=new Uint32Array(512);class l8{static from(t,n=STt,r=CTt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new l8(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let k=0;k<o;k++){const I=t[2*k],R=t[2*k+1];I<a&&(a=I),R<u&&(u=R),I>l&&(l=I),R>c&&(c=R),this._ids[k]=k}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let k=0,I=1/0;k<o;k++){const R=FV(f,d,t[2*k],t[2*k+1]);R<I&&(h=k,I=R)}const g=t[2*h],y=t[2*h+1];for(let k=0,I=1/0;k<o;k++){if(k===h)continue;const R=FV(g,y,t[2*k],t[2*k+1]);R<I&&R>0&&(p=k,I=R)}let v=t[2*p],b=t[2*p+1],_=1/0;for(let k=0;k<o;k++){if(k===h||k===p)continue;const I=_Tt(g,y,v,b,t[2*k],t[2*k+1]);I<_&&(m=k,_=I)}let w=t[2*m],S=t[2*m+1];if(_===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];K2(this._ids,this._dists,0,o-1);const k=new Uint32Array(o);let I=0;for(let R=0,F=-1/0;R<o;R++){const O=this._ids[R],$=this._dists[O];$>F&&(k[I++]=O,F=$)}this.hull=k.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(y4(g,y,v,b,w,S)<0){const k=p,I=v,R=b;p=m,v=w,b=S,m=k,w=I,S=R}const T=ETt(g,y,v,b,w,S);this._cx=T.x,this._cy=T.y;for(let k=0;k<o;k++)this._dists[k]=FV(t[2*k],t[2*k+1],T.x,T.y);K2(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(w,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let k=0,I,R;k<this._ids.length;k++){const F=this._ids[k],O=t[2*F],$=t[2*F+1];if(k>0&&Math.abs(O-I)<=pye&&Math.abs($-R)<=pye||(I=O,R=$,F===h||F===p||F===m))continue;let V=0;for(let L=0,U=this._hashKey(O,$);L<this._hashSize&&(V=s[(U+L)%this._hashSize],!(V!==-1&&V!==r[V]));L++);V=n[V];let j=V,G;for(;G=r[j],y4(O,$,t[2*j],t[2*j+1],t[2*G],t[2*G+1])>=0;)if(j=G,j===V){j=-1;break}if(j===-1)continue;let Y=this._addTriangle(j,F,r[j],-1,-1,i[j]);i[F]=this._legalize(Y+2),i[j]=Y,A++;let J=r[j];for(;G=r[J],y4(O,$,t[2*J],t[2*J+1],t[2*G],t[2*G+1])<0;)Y=this._addTriangle(J,F,G,i[F],-1,i[J]),i[F]=this._legalize(Y+2),r[J]=J,A--,J=G;if(j===V)for(;G=n[j],y4(O,$,t[2*G],t[2*G+1],t[2*j],t[2*j+1])<0;)Y=this._addTriangle(G,F,j,-1,i[j],i[G]),this._legalize(Y+2),i[G]=Y,r[j]=j,A--,j=G;this._hullStart=n[F]=j,r[j]=n[J]=F,r[F]=J,s[this._hashKey(O,$)]=F,s[this._hashKey(t[2*j],t[2*j+1])]=j}this.hull=new Uint32Array(A);for(let k=0,I=this._hullStart;k<A;k++)this.hull[k]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(xTt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=v4[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(wTt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<v4.length&&(v4[s++]=v)}else{if(s===0)break;t=v4[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function xTt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function FV(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function wTt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function _Tt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function ETt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function K2(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;SD(e,i,s),t[e[n]]>t[e[r]]&&SD(e,n,r),t[e[s]]>t[e[r]]&&SD(e,s,r),t[e[n]]>t[e[s]]&&SD(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;SD(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(K2(e,t,s,r),K2(e,t,n,o-1)):(K2(e,t,n,o-1),K2(e,t,s,r))}}function SD(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function STt(e){return e[0]}function CTt(e){return e[1]}const mye=1e-6;class pw{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>mye||Math.abs(this._y1-s)>mye)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class hY{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let TTt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const _=r[m]*2,w=r[m+1]*2,S=r[m+2]*2,T=t[_],A=t[_+1],k=t[w],I=t[w+1],R=t[S],F=t[S+1],O=k-T,$=I-A,V=R-T,j=F-A,G=(O*j-$*V)*2;if(Math.abs(G)<1e-9){if(s===void 0){s=o=0;for(const J of n)s+=t[J*2],o+=t[J*2+1];s/=n.length,o/=n.length}const Y=1e9*Math.sign((s-T)*j-(o-A)*V);v=(T+R)/2-Y*j,b=(A+F)/2+Y*V}else{const Y=1/G,J=O*O+$*$,L=V*V+j*j;v=T+(j*J-$*L)*Y,b=A+(O*L-V*J)*Y}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new pw:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new pw:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new pw:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new hY;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const ATt=2*Math.PI,ZE=Math.pow;function DTt(e){return e[0]}function ITt(e){return e[1]}function kTt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function RTt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Gte{static from(t,n=DTt,r=ITt,i){return new Gte("length"in t?NTt(t,n,r,i):Float64Array.from(PTt(t,n,r,i)))}constructor(t){this._delaunator=new l8(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&kTt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=RTt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new l8(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new TTt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=ZE(n-l[t*2],2)+ZE(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=ZE(n-l[p*2],2)+ZE(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&ZE(n-l[h*2],2)+ZE(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new pw:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new pw:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,ATt)}return r&&r.value()}renderHull(t){const n=t==null?t=new pw:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new hY;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new pw:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new hY;return this.renderTriangle(t,n),n.value()}}function NTt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*PTt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var gye={},MV={},$V=34,CD=10,LV=13;function GNe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function OTt(e,t){var n=GNe(e);return function(r,i){return t(n(r),i,e)}}function yye(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function cc(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function FTt(e){return e<0?"-"+cc(-e,6):e>9999?"+"+cc(e,6):cc(e,4)}function MTt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":FTt(e.getUTCFullYear())+"-"+cc(e.getUTCMonth()+1,2)+"-"+cc(e.getUTCDate(),2)+(i?"T"+cc(t,2)+":"+cc(n,2)+":"+cc(r,2)+"."+cc(i,3)+"Z":r?"T"+cc(t,2)+":"+cc(n,2)+":"+cc(r,2)+"Z":n||t?"T"+cc(t,2)+":"+cc(n,2)+"Z":"")}function YNe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?OTt(g,d):GNe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===CD&&--p,f.charCodeAt(p-1)===LV&&--p;function _(){if(v)return MV;if(b)return b=!1,gye;var S,T=m,A;if(f.charCodeAt(T)===$V){for(;m++<p&&f.charCodeAt(m)!==$V||f.charCodeAt(++m)===$V;);return(S=m)>=p?v=!0:(A=f.charCodeAt(m++))===CD?b=!0:A===LV&&(b=!0,f.charCodeAt(m)===CD&&++m),f.slice(T+1,S-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(S=m++))===CD)b=!0;else if(A===LV)b=!0,f.charCodeAt(m)===CD&&++m;else if(A!==n)continue;return f.slice(T,S)}return v=!0,f.slice(T,p)}for(;(y=_())!==MV;){for(var w=[];y!==gye&&y!==MV;)w.push(y),y=_();d&&(w=d(w,g++))==null||h.push(w)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=yye(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=yye(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?MTt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var $Tt=YNe(","),LTt=$Tt.parse;function BTt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function jTt(e,t){return fetch(e,t).then(BTt)}function UTt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),jTt(t,n).then(function(i){return e(i,r)})}}var KNe=UTt(LTt);function zTt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function VTt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return XNe(this.cover(t,n),t,n,e)}function XNe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function HTt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)XNe(this,o[n],a[n],e[n]);return this}function qTt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function WTt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function GTt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Dl(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function YTt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Dl(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Dl(h[3],g,y,u,l),new Dl(h[2],o,y,g,l),new Dl(h[1],g,a,u,y),new Dl(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),_=v*v+b*b;if(_<n){var w=Math.sqrt(n=_);i=e-w,s=t-w,c=e+w,f=t+w,r=h.data}}return r}function KTt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function XTt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function QTt(){return this._root}function JTt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function ZTt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Dl(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Dl(i,l,c,a,u)),(i=r[2])&&t.push(new Dl(i,s,c,l,u)),(i=r[1])&&t.push(new Dl(i,l,o,a,c)),(i=r[0])&&t.push(new Dl(i,s,o,l,c))}return this}function eAt(e){var t=[],n=[],r;for(this._root&&t.push(new Dl(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Dl(s,o,a,c,f)),(s=i[1])&&t.push(new Dl(s,c,a,u,f)),(s=i[2])&&t.push(new Dl(s,o,f,c,l)),(s=i[3])&&t.push(new Dl(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function tAt(e){return e[0]}function nAt(e){return arguments.length?(this._x=e,this):this._x}function rAt(e){return e[1]}function iAt(e){return arguments.length?(this._y=e,this):this._y}function Yte(e,t,n){var r=new Kte(t??tAt,n??rAt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Kte(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function vye(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Yl=Yte.prototype=Kte.prototype;Yl.copy=function(){var e=new Kte(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=vye(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=vye(r));return e};Yl.add=VTt;Yl.addAll=HTt;Yl.cover=qTt;Yl.data=WTt;Yl.extent=GTt;Yl.find=YTt;Yl.remove=KTt;Yl.removeAll=XTt;Yl.root=QTt;Yl.size=JTt;Yl.visit=ZTt;Yl.visitAfter=eAt;Yl.x=nAt;Yl.y=iAt;function kl(e){return function(){return e}}function z1(e){return(e()-.5)*1e-6}function sAt(e){return e.x+e.vx}function oAt(e){return e.y+e.vy}function aAt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=kl(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=Yte(t,sAt,oAt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,_,w,S,T){var A=b.data,k=b.r,I=m+k;if(A){if(A.index>d.index){var R=h-A.x-A.vx,F=p-A.y-A.vy,O=R*R+F*F;O<I*I&&(R===0&&(R=z1(r),O+=R*R),F===0&&(F=z1(r),O+=F*F),O=(I-(O=Math.sqrt(O)))/O*i,d.vx+=(R*=O)*(I=(k*=k)/(g+k)),d.vy+=(F*=O)*I,A.vx-=R*(I=1-I),A.vy-=F*I)}return}return _>h+I||S<h-I||w>p+I||T<p-I}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:kl(+l),u(),o):e},o}function uAt(e){return e.index}function bye(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function lAt(e){var t=uAt,n=f,r,i=kl(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,_,w,S,T,A,k,I;b<v;++b)_=e[b],w=_.source,S=_.target,T=S.x+S.vx-w.x-w.vx||z1(l),A=S.y+S.vy-w.y-w.vy||z1(l),k=Math.sqrt(T*T+A*A),k=(k-s[b])/k*g*r[b],T*=k,A*=k,S.vx-=T*(I=u[b]),S.vy-=A*I,w.vx+=T*(I=1-I),w.vy+=A*I}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((w,S)=>[t(w,S,o),w])),_;for(g=0,a=new Array(y);g<v;++g)_=e[g],_.index=g,typeof _.source!="object"&&(_.source=bye(b,_.source)),typeof _.target!="object"&&(_.target=bye(b,_.target)),a[_.source.index]=(a[_.source.index]||0)+1,a[_.target.index]=(a[_.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)_=e[g],u[g]=a[_.source.index]/(a[_.source.index]+a[_.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:kl(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:kl(+g),m(),d):i},d}const cAt=1664525,fAt=1013904223,xye=4294967296;function dAt(){let e=1;return()=>(e=(cAt*e+fAt)%xye)/xye}function hAt(e){return e.x}function pAt(e){return e.y}var mAt=10,gAt=Math.PI*(3-Math.sqrt(5));function yAt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=zte(f),l=dB("tick","end"),c=dAt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(_){_(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=mAt*Math.sqrt(.5+m),b=m*gAt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,_,w,S,T,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)T=e[v],_=m-T.x,w=g-T.y,S=_*_+w*w,S<y&&(A=T,y=S);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function vAt(){var e,t,n,r,i=kl(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=Yte(e,hAt,pAt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,_;if(h.length){for(v=b=_=0;_<4;++_)(m=h[_])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,_=y*y+v*v;if(b*b/u<_)return _<a&&(y===0&&(y=z1(n),_+=y*y),v===0&&(v=z1(n),_+=v*v),_<o&&(_=Math.sqrt(o*_)),t.vx+=y*h.value*r/_,t.vy+=v*h.value*r/_),!0;if(h.length||_>=a)return;(h.data!==t||h.next)&&(y===0&&(y=z1(n),_+=y*y),v===0&&(v=z1(n),_+=v*v),_<o&&(_=Math.sqrt(o*_)));do h.data!==t&&(b=s[h.data.index]*r/_,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:kl(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function bAt(e){var t=kl(.1),n,r,i;typeof e!="function"&&(e=kl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:kl(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:kl(+a),o(),s):e},s}function xAt(e){var t=kl(.1),n,r,i;typeof e!="function"&&(e=kl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:kl(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:kl(+a),o(),s):e},s}function wAt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function c8(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function yC(e){return e=c8(Math.abs(e)),e?e[1]:NaN}function _At(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function EAt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var SAt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jw(e){if(!(t=SAt.exec(e)))throw new Error("invalid format: "+e);var t;return new Xte({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Jw.prototype=Xte.prototype;function Xte(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xte.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CAt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var QNe;function TAt(e,t){var n=c8(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(QNe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+c8(e,Math.max(0,t+s-1))[0]}function wye(e,t){var n=c8(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _ye={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:wAt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wye(e*100,t),r:wye,s:TAt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Eye(e){return e}var Sye=Array.prototype.map,Cye=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function JNe(e){var t=e.grouping===void 0||e.thousands===void 0?Eye:_At(Sye.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Eye:EAt(Sye.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Jw(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,_=f.trim,w=f.type;w==="n"?(v=!0,w="g"):_ye[w]||(b===void 0&&(b=12),_=!0,w="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",T=m==="$"?r:/[%p]/.test(w)?o:"",A=_ye[w],k=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(R){var F=S,O=T,$,V,j;if(w==="c")O=A(R)+O,R="";else{R=+R;var G=R<0||1/R<0;if(R=isNaN(R)?u:A(Math.abs(R),b),_&&(R=CAt(R)),G&&+R==0&&p!=="+"&&(G=!1),F=(G?p==="("?p:a:p==="-"||p==="("?"":p)+F,O=(w==="s"?Cye[8+QNe/3]:"")+O+(G&&p==="("?")":""),k){for($=-1,V=R.length;++$<V;)if(j=R.charCodeAt($),48>j||j>57){O=(j===46?i+R.slice($+1):R.slice($))+O,R=R.slice(0,$);break}}}v&&!g&&(R=t(R,1/0));var Y=F.length+R.length+O.length,J=Y<y?new Array(y-Y+1).join(d):"";switch(v&&g&&(R=t(J+R,J.length?y-O.length:1/0),J=""),h){case"<":R=F+R+O+J;break;case"=":R=F+J+R+O;break;case"^":R=J.slice(0,Y=J.length>>1)+F+R+O+J.slice(Y);break;default:R=J+F+R+O;break}return s(R)}return I.toString=function(){return f+""},I}function c(f,d){var h=l((f=Jw(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(yC(d)/3)))*3,m=Math.pow(10,-p),g=Cye[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var b4,Nb,Qte;AAt({thousands:",",grouping:[3],currency:["$",""]});function AAt(e){return b4=JNe(e),Nb=b4.format,Qte=b4.formatPrefix,b4}function ZNe(e){return Math.max(0,-yC(Math.abs(e)))}function ePe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yC(t)/3)))*3-yC(Math.abs(e)))}function tPe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yC(t)-yC(e))+1}var Tn=1e-6,pY=1e-12,Tr=Math.PI,fo=Tr/2,f8=Tr/4,Ul=Tr*2,_o=180/Tr,Sr=Tr/180,Kr=Math.abs,WT=Math.atan,zd=Math.atan2,Cn=Math.cos,x4=Math.ceil,nPe=Math.exp,mY=Math.hypot,d8=Math.log,BV=Math.pow,gn=Math.sin,Nd=Math.sign||function(e){return e>0?1:e<0?-1:0},zl=Math.sqrt,Jte=Math.tan;function rPe(e){return e>1?0:e<-1?Tr:Math.acos(e)}function zc(e){return e>1?fo:e<-1?-fo:Math.asin(e)}function su(){}function h8(e,t){e&&Aye.hasOwnProperty(e.type)&&Aye[e.type](e,t)}var Tye={Feature:function(e,t){h8(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)h8(n[r].geometry,t)}},Aye={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){gY(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)gY(n[r],t,0)},Polygon:function(e,t){Dye(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Dye(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)h8(n[r],t)}};function gY(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Dye(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)gY(e[n],t,1);t.polygonEnd()}function cg(e,t){e&&Tye.hasOwnProperty(e.type)?Tye[e.type](e,t):h8(e,t)}var p8=new Ol,m8=new Ol,iPe,sPe,yY,vY,bY,Hm={point:su,lineStart:su,lineEnd:su,polygonStart:function(){p8=new Ol,Hm.lineStart=DAt,Hm.lineEnd=IAt},polygonEnd:function(){var e=+p8;m8.add(e<0?Ul+e:e),this.lineStart=this.lineEnd=this.point=su},sphere:function(){m8.add(Ul)}};function DAt(){Hm.point=kAt}function IAt(){oPe(iPe,sPe)}function kAt(e,t){Hm.point=oPe,iPe=e,sPe=t,e*=Sr,t*=Sr,yY=e,vY=Cn(t=t/2+f8),bY=gn(t)}function oPe(e,t){e*=Sr,t*=Sr,t=t/2+f8;var n=e-yY,r=n>=0?1:-1,i=r*n,s=Cn(t),o=gn(t),a=bY*o,u=vY*s+a*Cn(i),l=a*r*gn(i);p8.add(zd(l,u)),yY=e,vY=s,bY=o}function RAt(e){return m8=new Ol,cg(e,Hm),m8*2}function g8(e){return[zd(e[1],e[0]),zc(e[2])]}function Zw(e){var t=e[0],n=e[1],r=Cn(n);return[r*Cn(t),r*gn(t),gn(n)]}function w4(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vC(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function jV(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function _4(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function y8(e){var t=zl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var qs,vc,to,yf,Fx,aPe,uPe,_S,bk,x1,iy,ig={point:xY,lineStart:Iye,lineEnd:kye,polygonStart:function(){ig.point=cPe,ig.lineStart=NAt,ig.lineEnd=PAt,bk=new Ol,Hm.polygonStart()},polygonEnd:function(){Hm.polygonEnd(),ig.point=xY,ig.lineStart=Iye,ig.lineEnd=kye,p8<0?(qs=-(to=180),vc=-(yf=90)):bk>Tn?yf=90:bk<-1e-6&&(vc=-90),iy[0]=qs,iy[1]=to},sphere:function(){qs=-(to=180),vc=-(yf=90)}};function xY(e,t){x1.push(iy=[qs=e,to=e]),t<vc&&(vc=t),t>yf&&(yf=t)}function lPe(e,t){var n=Zw([e*Sr,t*Sr]);if(_S){var r=vC(_S,n),i=[r[1],-r[0],0],s=vC(i,r);y8(s),s=g8(s);var o=e-Fx,a=o>0?1:-1,u=s[0]*_o*a,l,c=Kr(o)>180;c^(a*Fx<u&&u<a*e)?(l=s[1]*_o,l>yf&&(yf=l)):(u=(u+360)%360-180,c^(a*Fx<u&&u<a*e)?(l=-s[1]*_o,l<vc&&(vc=l)):(t<vc&&(vc=t),t>yf&&(yf=t))),c?e<Fx?mf(qs,e)>mf(qs,to)&&(to=e):mf(e,to)>mf(qs,to)&&(qs=e):to>=qs?(e<qs&&(qs=e),e>to&&(to=e)):e>Fx?mf(qs,e)>mf(qs,to)&&(to=e):mf(e,to)>mf(qs,to)&&(qs=e)}else x1.push(iy=[qs=e,to=e]);t<vc&&(vc=t),t>yf&&(yf=t),_S=n,Fx=e}function Iye(){ig.point=lPe}function kye(){iy[0]=qs,iy[1]=to,ig.point=xY,_S=null}function cPe(e,t){if(_S){var n=e-Fx;bk.add(Kr(n)>180?n+(n>0?360:-360):n)}else aPe=e,uPe=t;Hm.point(e,t),lPe(e,t)}function NAt(){Hm.lineStart()}function PAt(){cPe(aPe,uPe),Hm.lineEnd(),Kr(bk)>Tn&&(qs=-(to=180)),iy[0]=qs,iy[1]=to,_S=null}function mf(e,t){return(t-=e)<0?t+360:t}function OAt(e,t){return e[0]-t[0]}function Rye(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function FAt(e){var t,n,r,i,s,o,a;if(yf=to=-(qs=vc=1/0),x1=[],cg(e,ig),n=x1.length){for(x1.sort(OAt),t=1,r=x1[0],s=[r];t<n;++t)i=x1[t],Rye(r,i[0])||Rye(r,i[1])?(mf(r[0],i[1])>mf(r[0],r[1])&&(r[1]=i[1]),mf(i[0],r[1])>mf(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=mf(r[1],i[0]))>o&&(o=a,qs=i[0],to=r[1])}return x1=iy=null,qs===1/0||vc===1/0?[[NaN,NaN],[NaN,NaN]]:[[qs,vc],[to,yf]]}var vI,v8,b8,x8,w8,_8,E8,S8,wY,_Y,EY,fPe,dPe,Cl,Tl,Al,Yh={sphere:su,point:Zte,lineStart:Nye,lineEnd:Pye,polygonStart:function(){Yh.lineStart=LAt,Yh.lineEnd=BAt},polygonEnd:function(){Yh.lineStart=Nye,Yh.lineEnd=Pye}};function Zte(e,t){e*=Sr,t*=Sr;var n=Cn(t);SN(n*Cn(e),n*gn(e),gn(t))}function SN(e,t,n){++vI,b8+=(e-b8)/vI,x8+=(t-x8)/vI,w8+=(n-w8)/vI}function Nye(){Yh.point=MAt}function MAt(e,t){e*=Sr,t*=Sr;var n=Cn(t);Cl=n*Cn(e),Tl=n*gn(e),Al=gn(t),Yh.point=$At,SN(Cl,Tl,Al)}function $At(e,t){e*=Sr,t*=Sr;var n=Cn(t),r=n*Cn(e),i=n*gn(e),s=gn(t),o=zd(zl((o=Tl*s-Al*i)*o+(o=Al*r-Cl*s)*o+(o=Cl*i-Tl*r)*o),Cl*r+Tl*i+Al*s);v8+=o,_8+=o*(Cl+(Cl=r)),E8+=o*(Tl+(Tl=i)),S8+=o*(Al+(Al=s)),SN(Cl,Tl,Al)}function Pye(){Yh.point=Zte}function LAt(){Yh.point=jAt}function BAt(){hPe(fPe,dPe),Yh.point=Zte}function jAt(e,t){fPe=e,dPe=t,e*=Sr,t*=Sr,Yh.point=hPe;var n=Cn(t);Cl=n*Cn(e),Tl=n*gn(e),Al=gn(t),SN(Cl,Tl,Al)}function hPe(e,t){e*=Sr,t*=Sr;var n=Cn(t),r=n*Cn(e),i=n*gn(e),s=gn(t),o=Tl*s-Al*i,a=Al*r-Cl*s,u=Cl*i-Tl*r,l=mY(o,a,u),c=zc(l),f=l&&-c/l;wY.add(f*o),_Y.add(f*a),EY.add(f*u),v8+=c,_8+=c*(Cl+(Cl=r)),E8+=c*(Tl+(Tl=i)),S8+=c*(Al+(Al=s)),SN(Cl,Tl,Al)}function UAt(e){vI=v8=b8=x8=w8=_8=E8=S8=0,wY=new Ol,_Y=new Ol,EY=new Ol,cg(e,Yh);var t=+wY,n=+_Y,r=+EY,i=mY(t,n,r);return i<pY&&(t=_8,n=E8,r=S8,v8<Tn&&(t=b8,n=x8,r=w8),i=mY(t,n,r),i<pY)?[NaN,NaN]:[zd(n,t)*_o,zc(r/i)*_o]}function SY(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function CY(e,t){return Kr(e)>Tr&&(e-=Math.round(e/Ul)*Ul),[e,t]}CY.invert=CY;function pPe(e,t,n){return(e%=Ul)?t||n?SY(Fye(e),Mye(t,n)):Fye(e):t||n?Mye(t,n):CY}function Oye(e){return function(t,n){return t+=e,Kr(t)>Tr&&(t-=Math.round(t/Ul)*Ul),[t,n]}}function Fye(e){var t=Oye(e);return t.invert=Oye(-e),t}function Mye(e,t){var n=Cn(e),r=gn(e),i=Cn(t),s=gn(t);function o(a,u){var l=Cn(u),c=Cn(a)*l,f=gn(a)*l,d=gn(u),h=d*n+c*r;return[zd(f*i-h*s,c*n-d*r),zc(h*i+f*s)]}return o.invert=function(a,u){var l=Cn(u),c=Cn(a)*l,f=gn(a)*l,d=gn(u),h=d*i-f*s;return[zd(f*i+d*s,c*n+h*r),zc(h*n-c*r)]},o}function zAt(e){e=pPe(e[0]*Sr,e[1]*Sr,e.length>2?e[2]*Sr:0);function t(n){return n=e(n[0]*Sr,n[1]*Sr),n[0]*=_o,n[1]*=_o,n}return t.invert=function(n){return n=e.invert(n[0]*Sr,n[1]*Sr),n[0]*=_o,n[1]*=_o,n},t}function VAt(e,t,n,r,i,s){if(n){var o=Cn(t),a=gn(t),u=r*n;i==null?(i=t+r*Ul,s=t-u/2):(i=$ye(o,i),s=$ye(o,s),(r>0?i<s:i>s)&&(i+=r*Ul));for(var l,c=i;r>0?c>s:c<s;c-=u)l=g8([o,-a*Cn(c),-a*gn(c)]),e.point(l[0],l[1])}}function $ye(e,t){t=Zw(t),t[0]-=e,y8(t);var n=rPe(-t[1]);return((-t[2]<0?-n:n)+Ul-Tn)%Ul}function mPe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:su,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function lF(e,t){return Kr(e[0]-t[0])<Tn&&Kr(e[1]-t[1])<Tn}function E4(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function gPe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(lF(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Tn}s.push(v=new E4(g,p,null,!0)),o.push(v.o=new E4(g,null,v,!1)),s.push(v=new E4(y,p,null,!1)),o.push(v.o=new E4(y,null,v,!0))}}),!!s.length){for(o.sort(t),Lye(s),Lye(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Lye(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function UV(e){return Kr(e[0])<=Tr?e[0]:Nd(e[0])*((Kr(e[0])+Tr)%Ul-Tr)}function HAt(e,t){var n=UV(t),r=t[1],i=gn(r),s=[gn(n),-Cn(n),0],o=0,a=0,u=new Ol;i===1?r=fo+Tn:i===-1&&(r=-fo-Tn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=UV(h),m=h[1]/2+f8,g=gn(m),y=Cn(m),v=0;v<d;++v,p=_,g=S,y=T,h=b){var b=f[v],_=UV(b),w=b[1]/2+f8,S=gn(w),T=Cn(w),A=_-p,k=A>=0?1:-1,I=k*A,R=I>Tr,F=g*S;if(u.add(zd(F*k*gn(I),y*T+F*Cn(I))),o+=R?A+k*Ul:A,R^p>=n^_>=n){var O=vC(Zw(h),Zw(b));y8(O);var $=vC(s,O);y8($);var V=(R^A>=0?-1:1)*zc($[2]);(r>V||r===V&&(O[0]||O[1]))&&(a+=R^A>=0?1:-1)}}return(o<-1e-6||o<Tn&&u<-1e-12)^a&1}function yPe(e,t,n,r){return function(i){var s=t(i),o=mPe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=W3e(c);var _=HAt(l,r);c.length?(u||(i.polygonStart(),u=!0),gPe(c,WAt,_,n,i)):_&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(_,w){e(_,w)&&i.point(_,w)}function p(_,w){s.point(_,w)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(_,w){f.push([_,w]),a.point(_,w)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var _=a.clean(),w=o.result(),S,T=w.length,A,k,I;if(f.pop(),l.push(f),f=null,!!T){if(_&1){if(k=w[0],(A=k.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<A;++S)i.point((I=k[S])[0],I[1]);i.lineEnd()}return}T>1&&_&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(qAt))}}return d}}function qAt(e){return e.length>1}function WAt(e,t){return((e=e.x)[0]<0?e[1]-fo-Tn:fo-e[1])-((t=t.x)[0]<0?t[1]-fo-Tn:fo-t[1])}const Bye=yPe(function(){return!0},GAt,KAt,[-Tr,-fo]);function GAt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Tr:-Tr,u=Kr(s-t);Kr(u-Tr)<Tn?(e.point(t,n=(n+o)/2>0?fo:-fo),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Tr&&(Kr(t-r)<Tn&&(t-=r*Tn),Kr(s-a)<Tn&&(s-=a*Tn),n=YAt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function YAt(e,t,n,r){var i,s,o=gn(e-n);return Kr(o)>Tn?WT((gn(t)*(s=Cn(r))*gn(n)-gn(r)*(i=Cn(t))*gn(e))/(i*s*o)):(t+r)/2}function KAt(e,t,n,r){var i;if(e==null)i=n*fo,r.point(-Tr,i),r.point(0,i),r.point(Tr,i),r.point(Tr,0),r.point(Tr,-i),r.point(0,-i),r.point(-Tr,-i),r.point(-Tr,0),r.point(-Tr,i);else if(Kr(e[0]-t[0])>Tn){var s=e[0]<t[0]?Tr:-Tr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function XAt(e){var t=Cn(e),n=2*Sr,r=t>0,i=Kr(t)>Tn;function s(c,f,d,h){VAt(h,e,n,d,c,f)}function o(c,f){return Cn(c)*Cn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,_=o(g,y),w=r?_?0:l(g,y):_?l(g+(g<0?Tr:-Tr),y):0;if(!f&&(p=h=_)&&c.lineStart(),_!==h&&(b=u(f,v),(!b||lF(f,b)||lF(v,b))&&(v[2]=1)),_!==h)m=0,_?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^_){var S;!(w&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}_&&(!f||!lF(f,v))&&c.point(v[0],v[1]),f=v,h=_,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Zw(c),p=Zw(f),m=[1,0,0],g=vC(h,p),y=w4(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var _=t*y/b,w=-t*v/b,S=vC(m,g),T=_4(m,_),A=_4(g,w);jV(T,A);var k=S,I=w4(T,k),R=w4(k,k),F=I*I-R*(w4(T,T)-1);if(!(F<0)){var O=zl(F),$=_4(k,(-I-O)/R);if(jV($,T),$=g8($),!d)return $;var V=c[0],j=f[0],G=c[1],Y=f[1],J;j<V&&(J=V,V=j,j=J);var L=j-V,U=Kr(L-Tr)<Tn,W=U||L<Tn;if(!U&&Y<G&&(J=G,G=Y,Y=J),W?U?G+Y>0^$[1]<(Kr($[0]-V)<Tn?G:Y):G<=$[1]&&$[1]<=Y:L>Tr^(V<=$[0]&&$[0]<=j)){var B=_4(k,(-I+O)/R);return jV(B,T),[$,g8(B)]}}}function l(c,f){var d=r?e:Tr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return yPe(o,a,s,r?[0,-e]:[-Tr,e-Tr])}function QAt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var S4=1e9,C4=-1e9;function vPe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Kr(l[0]-e)<Tn?c>0?0:3:Kr(l[0]-n)<Tn?c>0?2:1:Kr(l[1]-t)<Tn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=mPe(),d,h,p,m,g,y,v,b,_,w,S,T={point:A,lineStart:F,lineEnd:O,polygonStart:I,polygonEnd:R};function A(V,j){i(V,j)&&c.point(V,j)}function k(){for(var V=0,j=0,G=h.length;j<G;++j)for(var Y=h[j],J=1,L=Y.length,U=Y[0],W,B,q=U[0],Z=U[1];J<L;++J)W=q,B=Z,U=Y[J],q=U[0],Z=U[1],B<=r?Z>r&&(q-W)*(r-B)>(Z-B)*(e-W)&&++V:Z<=r&&(q-W)*(r-B)<(Z-B)*(e-W)&&--V;return V}function I(){c=f,d=[],h=[],S=!0}function R(){var V=k(),j=S&&V,G=(d=W3e(d)).length;(j||G)&&(l.polygonStart(),j&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),G&&gPe(d,a,V,s,l),l.polygonEnd()),c=l,d=h=p=null}function F(){T.point=$,h&&h.push(p=[]),w=!0,_=!1,v=b=NaN}function O(){d&&($(m,g),y&&_&&f.rejoin(),d.push(f.result())),T.point=A,_&&c.lineEnd()}function $(V,j){var G=i(V,j);if(h&&p.push([V,j]),w)m=V,g=j,y=G,w=!1,G&&(c.lineStart(),c.point(V,j));else if(G&&_)c.point(V,j);else{var Y=[v=Math.max(C4,Math.min(S4,v)),b=Math.max(C4,Math.min(S4,b))],J=[V=Math.max(C4,Math.min(S4,V)),j=Math.max(C4,Math.min(S4,j))];QAt(Y,J,e,t,n,r)?(_||(c.lineStart(),c.point(Y[0],Y[1])),c.point(J[0],J[1]),G||c.lineEnd(),S=!1):G&&(c.lineStart(),c.point(V,j),S=!1)}v=V,b=j,_=G}return T}}function jye(e,t,n){var r=Ac(e,t-Tn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Uye(e,t,n){var r=Ac(e,t-Tn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function JAt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ac(x4(r/c)*c,n,c).map(p).concat(Ac(x4(a/f)*f,o,f).map(m)).concat(Ac(x4(t/u)*u,e,u).filter(function(b){return Kr(b%c)>Tn}).map(d)).concat(Ac(x4(s/l)*l,i,l).filter(function(b){return Kr(b%f)>Tn}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=jye(s,i,90),h=Uye(t,e,g),p=jye(a,o,90),m=Uye(r,n,g),y):g},y.extentMajor([[-180,-90+Tn],[180,90-Tn]]).extentMinor([[-180,-80-Tn],[180,80+Tn]])}const BR=e=>e;var zV=new Ol,TY=new Ol,bPe,xPe,AY,DY,fg={point:su,lineStart:su,lineEnd:su,polygonStart:function(){fg.lineStart=ZAt,fg.lineEnd=tDt},polygonEnd:function(){fg.lineStart=fg.lineEnd=fg.point=su,zV.add(Kr(TY)),TY=new Ol},result:function(){var e=zV/2;return zV=new Ol,e}};function ZAt(){fg.point=eDt}function eDt(e,t){fg.point=wPe,bPe=AY=e,xPe=DY=t}function wPe(e,t){TY.add(DY*e-AY*t),AY=e,DY=t}function tDt(){wPe(bPe,xPe)}var bC=1/0,C8=bC,jR=-bC,T8=jR,A8={point:nDt,lineStart:su,lineEnd:su,polygonStart:su,polygonEnd:su,result:function(){var e=[[bC,C8],[jR,T8]];return jR=T8=-(C8=bC=1/0),e}};function nDt(e,t){e<bC&&(bC=e),e>jR&&(jR=e),t<C8&&(C8=t),t>T8&&(T8=t)}var IY=0,kY=0,bI=0,D8=0,I8=0,X2=0,RY=0,NY=0,xI=0,_Pe,EPe,lm,cm,Id={point:e_,lineStart:zye,lineEnd:Vye,polygonStart:function(){Id.lineStart=sDt,Id.lineEnd=oDt},polygonEnd:function(){Id.point=e_,Id.lineStart=zye,Id.lineEnd=Vye},result:function(){var e=xI?[RY/xI,NY/xI]:X2?[D8/X2,I8/X2]:bI?[IY/bI,kY/bI]:[NaN,NaN];return IY=kY=bI=D8=I8=X2=RY=NY=xI=0,e}};function e_(e,t){IY+=e,kY+=t,++bI}function zye(){Id.point=rDt}function rDt(e,t){Id.point=iDt,e_(lm=e,cm=t)}function iDt(e,t){var n=e-lm,r=t-cm,i=zl(n*n+r*r);D8+=i*(lm+e)/2,I8+=i*(cm+t)/2,X2+=i,e_(lm=e,cm=t)}function Vye(){Id.point=e_}function sDt(){Id.point=aDt}function oDt(){SPe(_Pe,EPe)}function aDt(e,t){Id.point=SPe,e_(_Pe=lm=e,EPe=cm=t)}function SPe(e,t){var n=e-lm,r=t-cm,i=zl(n*n+r*r);D8+=i*(lm+e)/2,I8+=i*(cm+t)/2,X2+=i,i=cm*e-lm*t,RY+=i*(lm+e),NY+=i*(cm+t),xI+=i*3,e_(lm=e,cm=t)}function CPe(e){this._context=e}CPe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ul);break}}},result:su};var PY=new Ol,VV,TPe,APe,wI,_I,UR={point:su,lineStart:function(){UR.point=uDt},lineEnd:function(){VV&&DPe(TPe,APe),UR.point=su},polygonStart:function(){VV=!0},polygonEnd:function(){VV=null},result:function(){var e=+PY;return PY=new Ol,e}};function uDt(e,t){UR.point=DPe,TPe=wI=e,APe=_I=t}function DPe(e,t){wI-=e,_I-=t,PY.add(zl(wI*wI+_I*_I)),wI=e,_I=t}let Hye,k8,qye,Wye;class Gye{constructor(t){this._append=t==null?IPe:lDt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==qye||this._append!==k8){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,qye=r,k8=this._append,Wye=this._,this._=i}this._+=Wye;break}}}result(){const t=this._;return this._="",t.length?t:null}}function IPe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function lDt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return IPe;if(t!==Hye){const n=10**t;Hye=t,k8=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return k8}function kPe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),cg(a,i(s))),s.result()}return o.area=function(a){return cg(a,i(fg)),fg.result()},o.measure=function(a){return cg(a,i(UR)),UR.result()},o.bounds=function(a){return cg(a,i(A8)),A8.result()},o.centroid=function(a){return cg(a,i(Id)),Id.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,BR):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Gye(n)):new CPe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Gye(n)),o},o.projection(e).digits(n).context(t)}function wB(e){return function(t){var n=new OY;for(var r in e)n[r]=e[r];return n.stream=t,n}}function OY(){}OY.prototype={constructor:OY,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ene(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),cg(n,e.stream(A8)),t(A8.result()),r!=null&&e.clipExtent(r),e}function _B(e,t,n){return ene(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function tne(e,t,n){return _B(e,[[0,0],t],n)}function nne(e,t,n){return ene(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function rne(e,t,n){return ene(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Yye=16,cDt=Cn(30*Sr);function Kye(e,t){return+t?dDt(e,t):fDt(e)}function fDt(e){return wB({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function dDt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var _=o+d,w=a+h,S=u+p,T=zl(_*_+w*w+S*S),A=zc(S/=T),k=Kr(Kr(S)-1)<Tn||Kr(s-f)<Tn?(s+f)/2:zd(w,_),I=e(k,A),R=I[0],F=I[1],O=R-r,$=F-i,V=v*O-y*$;(V*V/b>t||Kr((y*O+v*$)/b-.5)>.3||o*d+a*h+u*p<cDt)&&(n(r,i,s,o,a,u,R,F,k,_/=T,w/=T,S,m,g),g.point(R,F),n(R,F,k,_,w,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:_,polygonStart:function(){r.polygonStart(),g.lineStart=w},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,k){A=e(A,k),r.point(A[0],A[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(A,k){var I=Zw([A,k]),R=e(A,k);n(f,d,c,h,p,m,f=R[0],d=R[1],c=A,h=I[0],p=I[1],m=I[2],Yye,r),r.point(f,d)}function _(){g.point=y,r.lineEnd()}function w(){v(),g.point=S,g.lineEnd=T}function S(A,k){b(i=A,k),s=f,o=d,a=h,u=p,l=m,g.point=b}function T(){n(f,d,c,h,p,m,s,o,i,a,u,l,Yye,r),g.lineEnd=_,_()}return g}}var hDt=wB({point:function(e,t){this.stream.point(e*Sr,t*Sr)}});function pDt(e){return wB({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function mDt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Xye(e,t,n,r,i,s){if(!s)return mDt(e,t,n,r,i);var o=Cn(s),a=gn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function m0(e){return RPe(function(){return e})()}function RPe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Bye,g=null,y,v,b,_=BR,w=.5,S,T,A,k,I;function R(V){return A(V[0]*Sr,V[1]*Sr)}function F(V){return V=A.invert(V[0],V[1]),V&&[V[0]*_o,V[1]*_o]}R.stream=function(V){return k&&I===V?k:k=hDt(pDt(c)(m(S(_(I=V)))))},R.preclip=function(V){return arguments.length?(m=V,p=void 0,$()):m},R.postclip=function(V){return arguments.length?(_=V,g=y=v=b=null,$()):_},R.clipAngle=function(V){return arguments.length?(m=+V?XAt(p=V*Sr):(p=null,Bye),$()):p*_o},R.clipExtent=function(V){return arguments.length?(_=V==null?(g=y=v=b=null,BR):vPe(g=+V[0][0],y=+V[0][1],v=+V[1][0],b=+V[1][1]),$()):g==null?null:[[g,y],[v,b]]},R.scale=function(V){return arguments.length?(n=+V,O()):n},R.translate=function(V){return arguments.length?(r=+V[0],i=+V[1],O()):[r,i]},R.center=function(V){return arguments.length?(s=V[0]%360*Sr,o=V[1]%360*Sr,O()):[s*_o,o*_o]},R.rotate=function(V){return arguments.length?(a=V[0]%360*Sr,u=V[1]%360*Sr,l=V.length>2?V[2]%360*Sr:0,O()):[a*_o,u*_o,l*_o]},R.angle=function(V){return arguments.length?(f=V%360*Sr,O()):f*_o},R.reflectX=function(V){return arguments.length?(d=V?-1:1,O()):d<0},R.reflectY=function(V){return arguments.length?(h=V?-1:1,O()):h<0},R.precision=function(V){return arguments.length?(S=Kye(T,w=V*V),$()):zl(w)},R.fitExtent=function(V,j){return _B(R,V,j)},R.fitSize=function(V,j){return tne(R,V,j)},R.fitWidth=function(V,j){return nne(R,V,j)},R.fitHeight=function(V,j){return rne(R,V,j)};function O(){var V=Xye(n,0,0,d,h,f).apply(null,t(s,o)),j=Xye(n,r-V[0],i-V[1],d,h,f);return c=pPe(a,u,l),T=SY(t,j),A=SY(c,T),S=Kye(T,w),$()}function $(){return k=I=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&F,O()}}function ine(e){var t=0,n=Tr/3,r=RPe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Sr,n=s[1]*Sr):[t*_o,n*_o]},i}function gDt(e){var t=Cn(e);function n(r,i){return[r*t,gn(i)/t]}return n.invert=function(r,i){return[r/t,zc(i*t)]},n}function yDt(e,t){var n=gn(e),r=(n+gn(t))/2;if(Kr(r)<Tn)return gDt(e);var i=1+n*(2*r-n),s=zl(i)/r;function o(a,u){var l=zl(i-2*r*gn(u))/r;return[l*gn(a*=r),s-l*Cn(a)]}return o.invert=function(a,u){var l=s-u,c=zd(a,Kr(l))*Nd(l);return l*r<0&&(c-=Tr*Nd(a)*Nd(l)),[c/r,zc((i-(a*a+l*l)*r*r)/(2*r))]},o}function R8(){return ine(yDt).scale(155.424).center([0,33.6442])}function NPe(){return R8().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function vDt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function bDt(){var e,t,n=NPe(),r,i=R8().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=R8().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=vDt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Tn,m+.12*h+Tn],[p-.214*h-Tn,m+.234*h-Tn]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Tn,m+.166*h+Tn],[p-.115*h-Tn,m+.234*h-Tn]]).stream(l),f()},c.fitExtent=function(d,h){return _B(c,d,h)},c.fitSize=function(d,h){return tne(c,d,h)},c.fitWidth=function(d,h){return nne(c,d,h)},c.fitHeight=function(d,h){return rne(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function PPe(e){return function(t,n){var r=Cn(t),i=Cn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*gn(t),s*gn(n)]}}function CN(e){return function(t,n){var r=zl(t*t+n*n),i=e(r),s=gn(i),o=Cn(i);return[zd(t*s,r*o),zc(r&&n*s/r)]}}var OPe=PPe(function(e){return zl(2/(1+e))});OPe.invert=CN(function(e){return 2*zc(e/2)});function xDt(){return m0(OPe).scale(124.75).clipAngle(180-.001)}var FPe=PPe(function(e){return(e=rPe(e))&&e/gn(e)});FPe.invert=CN(function(e){return e});function wDt(){return m0(FPe).scale(79.4188).clipAngle(180-.001)}function EB(e,t){return[e,d8(Jte((fo+t)/2))]}EB.invert=function(e,t){return[e,2*WT(nPe(t))-fo]};function _Dt(){return MPe(EB).scale(961/Ul)}function MPe(e){var t=m0(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Tr*r(),d=t(zAt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===EB?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function T4(e){return Jte((fo+e)/2)}function EDt(e,t){var n=Cn(e),r=e===t?gn(e):d8(n/Cn(t))/d8(T4(t)/T4(e)),i=n*BV(T4(e),r)/r;if(!r)return EB;function s(o,a){i>0?a<-fo+Tn&&(a=-fo+Tn):a>fo-Tn&&(a=fo-Tn);var u=i/BV(T4(a),r);return[u*gn(r*o),i-u*Cn(r*o)]}return s.invert=function(o,a){var u=i-a,l=Nd(r)*zl(o*o+u*u),c=zd(o,Kr(u))*Nd(u);return u*r<0&&(c-=Tr*Nd(o)*Nd(u)),[c/r,2*WT(BV(i/l,1/r))-fo]},s}function SDt(){return ine(EDt).scale(109.5).parallels([30,30])}function N8(e,t){return[e,t]}N8.invert=N8;function CDt(){return m0(N8).scale(152.63)}function TDt(e,t){var n=Cn(e),r=e===t?gn(e):(n-Cn(t))/(t-e),i=n/r+e;if(Kr(r)<Tn)return N8;function s(o,a){var u=i-a,l=r*o;return[u*gn(l),i-u*Cn(l)]}return s.invert=function(o,a){var u=i-a,l=zd(o,Kr(u))*Nd(u);return u*r<0&&(l-=Tr*Nd(o)*Nd(u)),[l/r,i-Nd(r)*zl(o*o+u*u)]},s}function ADt(){return ine(TDt).scale(131.154).center([0,13.9389])}var xk=1.340264,wk=-.081106,_k=893e-6,Ek=.003796,P8=zl(3)/2,DDt=12;function $Pe(e,t){var n=zc(P8*gn(t)),r=n*n,i=r*r*r;return[e*Cn(n)/(P8*(xk+3*wk*r+i*(7*_k+9*Ek*r))),n*(xk+wk*r+i*(_k+Ek*r))]}$Pe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<DDt&&(a=n*(xk+wk*r+i*(_k+Ek*r))-t,u=xk+3*wk*r+i*(7*_k+9*Ek*r),n-=o=a/u,r=n*n,i=r*r*r,!(Kr(o)<pY));++s);return[P8*e*(xk+3*wk*r+i*(7*_k+9*Ek*r))/Cn(n),zc(gn(n)/P8)]};function IDt(){return m0($Pe).scale(177.158)}function LPe(e,t){var n=Cn(t),r=Cn(e)*n;return[n*gn(e)/r,gn(t)/r]}LPe.invert=CN(WT);function kDt(){return m0(LPe).scale(144.049).clipAngle(60)}function RDt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=wB({point:function(_,w){var S=b([_,w]);this.stream.point(S[0],S[1])}}),m=BR,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(_){var w=_[0]*d,S=_[1]*h;if(s){var T=S*o-w*a;w=w*o+S*a,S=T}return[w+t,S+n]}return b.invert=function(_){var w=_[0]-t,S=_[1]-n;if(s){var T=S*o+w*a;w=w*o-S*a,S=T}return[w/d,S/h]},b.stream=function(_){return g&&y===_?g:g=p(m(y=_))},b.postclip=function(_){return arguments.length?(m=_,u=l=c=f=null,v()):m},b.clipExtent=function(_){return arguments.length?(m=_==null?(u=l=c=f=null,BR):vPe(u=+_[0][0],l=+_[0][1],c=+_[1][0],f=+_[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(_){return arguments.length?(e=+_,v()):e},b.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],v()):[t,n]},b.angle=function(_){return arguments.length?(s=_%360*Sr,a=gn(s),o=Cn(s),v()):s*_o},b.reflectX=function(_){return arguments.length?(r=_?-1:1,v()):r<0},b.reflectY=function(_){return arguments.length?(i=_?-1:1,v()):i<0},b.fitExtent=function(_,w){return _B(b,_,w)},b.fitSize=function(_,w){return tne(b,_,w)},b.fitWidth=function(_,w){return nne(b,_,w)},b.fitHeight=function(_,w){return rne(b,_,w)},b}function BPe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}BPe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Kr(i)>Tn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function NDt(){return m0(BPe).scale(175.295)}function jPe(e,t){return[Cn(t)*gn(e),gn(t)]}jPe.invert=CN(zc);function PDt(){return m0(jPe).scale(249.5).clipAngle(90+Tn)}function UPe(e,t){var n=Cn(t),r=1+Cn(e)*n;return[n*gn(e)/r,gn(t)/r]}UPe.invert=CN(function(e){return 2*WT(e)});function ODt(){return m0(UPe).scale(250).clipAngle(142)}function zPe(e,t){return[d8(Jte((fo+t)/2)),-e]}zPe.invert=function(e,t){return[-t,2*WT(nPe(e))-fo]};function FDt(){var e=MPe(zPe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function MDt(e,t){return e.parent===t.parent?1:2}function $Dt(e){return e.reduce(LDt,0)/e.length}function LDt(e,t){return e+t.x}function BDt(e){return 1+e.reduce(jDt,0)}function jDt(e,t){return Math.max(e,t.y)}function UDt(e){for(var t;t=e.children;)e=t[0];return e}function zDt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function VDt(){var e=MDt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=$Dt(h),d.y=BDt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=UDt(s),l=zDt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function HDt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function qDt(){return this.eachAfter(HDt)}function WDt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function GDt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function YDt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function KDt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function XDt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function QDt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function JDt(e){for(var t=this,n=ZDt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function ZDt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function eIt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function tIt(){return Array.from(this)}function nIt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function rIt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*iIt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function SB(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=aIt)):t===void 0&&(t=oIt);for(var n=new xC(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new xC(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(VPe)}function sIt(){return SB(this).eachBefore(uIt)}function oIt(e){return e.children}function aIt(e){return Array.isArray(e)?e[1]:null}function uIt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function VPe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function xC(e){this.data=e,this.depth=this.height=0,this.parent=null}xC.prototype=SB.prototype={constructor:xC,count:qDt,each:WDt,eachAfter:YDt,eachBefore:GDt,find:KDt,sum:XDt,sort:QDt,path:JDt,ancestors:eIt,descendants:tIt,leaves:nIt,links:rIt,copy:sIt,[Symbol.iterator]:iIt};function cF(e){return e==null?null:HPe(e)}function HPe(e){if(typeof e!="function")throw new Error;return e}function Kx(){return 0}function E2(e){return function(){return e}}const lIt=1664525,cIt=1013904223,Qye=4294967296;function fIt(){let e=1;return()=>(e=(lIt*e+cIt)%Qye)/Qye}function dIt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hIt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function pIt(e,t){for(var n=0,r=(e=hIt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&qPe(o,s)?++n:(o=gIt(i=mIt(i,s)),n=0);return o}function mIt(e,t){var n,r;if(HV(t,e))return[t];for(n=0;n<e.length;++n)if(A4(t,e[n])&&HV(EI(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(A4(EI(e[n],e[r]),t)&&A4(EI(e[n],t),e[r])&&A4(EI(e[r],t),e[n])&&HV(WPe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function A4(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function qPe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function HV(e,t){for(var n=0;n<t.length;++n)if(!qPe(e,t[n]))return!1;return!0}function gIt(e){switch(e.length){case 1:return yIt(e[0]);case 2:return EI(e[0],e[1]);case 3:return WPe(e[0],e[1],e[2])}}function yIt(e){return{x:e.x,y:e.y,r:e.r}}function EI(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function WPe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,_=v-l*l-c*c+f*f,w=h*p-d*m,S=(p*_-m*b)/(w*2)-r,T=(m*g-p*y)/w,A=(h*b-d*_)/(w*2)-i,k=(d*y-h*g)/w,I=T*T+k*k-1,R=2*(s+S*T+A*k),F=S*S+A*A-s*s,O=-(Math.abs(I)>1e-6?(R+Math.sqrt(R*R-4*I*F))/(2*I):F/R);return{x:r+S+T*O,y:i+A+k*O,r:O}}function Jye(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Zye(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function e1e(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function D4(e){this._=e,this.next=null,this.previous=null}function vIt(e,t){if(!(s=(e=dIt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Jye(r,n,i=e[2]),n=new D4(n),r=new D4(r),i=new D4(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Jye(n._,r._,i=e[u]),i=new D4(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Zye(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Zye(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=e1e(n);(i=i.next)!==r;)(a=e1e(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=pIt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function bIt(e){return Math.sqrt(e.value)}function GPe(){var e=null,t=1,n=1,r=Kx;function i(s){const o=fIt();return s.x=t/2,s.y=n/2,e?s.eachBefore(t1e(e)).eachAfter(qV(r,.5,o)).eachBefore(n1e(1)):s.eachBefore(t1e(bIt)).eachAfter(qV(Kx,1,o)).eachAfter(qV(r,s.r/Math.min(t,n),o)).eachBefore(n1e(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=cF(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:E2(+s),i):r},i}function t1e(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function qV(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=vIt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function n1e(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function YPe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function TN(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function xIt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(YPe),o}function s(o,a){return function(u){u.children&&TN(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var wIt={depth:-1},r1e={},WV={};function _It(e){return e.id}function EIt(e){return e.parentId}function i1e(){var e=_It,t=EIt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((_,w)=>SIt(n(_,w,i))),v=y.map(s1e),b=new Set(y).add("");for(const _ of v)b.has(_)||(b.add(_),y.push(_),v.push(s1e(_)),s.push(WV));o=(_,w)=>y[w],a=(_,w)=>v[w]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new xC(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?r1e:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===r1e)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===WV&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===WV);--y)h.data=null}if(f.parent=wIt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(VPe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=cF(i),r):e},r.parentId=function(i){return arguments.length?(t=cF(i),r):t},r.path=function(i){return arguments.length?(n=cF(i),r):n},r}function SIt(e){e=`${e}`;let t=e.length;return FY(e,t-1)&&!FY(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function s1e(e){let t=e.length;if(t<2)return"";for(;--t>1&&!FY(e,t););return e.slice(0,t)}function FY(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function CIt(e,t){return e.parent===t.parent?1:2}function GV(e){var t=e.children;return t?t[0]:e.t}function YV(e){var t=e.children;return t?t[t.length-1]:e.t}function TIt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function AIt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function DIt(e,t,n){return e.a.parent===t.parent?e.a:n}function fF(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}fF.prototype=Object.create(xC.prototype);function IIt(e){for(var t=new fF(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new fF(s[o],o)),i.parent=n;return(t.parent=new fF(null,0)).children=[t],t}function kIt(){var e=CIt,t=1,n=1,r=null;function i(l){var c=IIt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){AIt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,_;p=YV(p),d=GV(d),p&&d;)m=GV(m),h=YV(h),h.a=l,_=p.z+v-d.z-g+e(p._,d._),_>0&&(TIt(DIt(p,l,f),l,_),g+=_,y+=_),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!YV(h)&&(h.t=p,h.m+=v-y),d&&!GV(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function CB(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var KPe=(1+Math.sqrt(5))/2;function XPe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,_,w,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,w=Math.max(p/h,h/p)/(m*e),S=g*g*w,_=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*w,b=Math.max(v/S,S/y),b>_){g-=l;break}_=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?TN(u,n,r,i,m?r+=p*g/m:s):CB(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const QPe=function e(t){function n(r,i,s,o,a){XPe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(KPe);function RIt(){var e=QPe,t=!1,n=1,r=1,i=[0],s=Kx,o=Kx,a=Kx,u=Kx,l=Kx;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(YPe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=HPe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:E2(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:E2(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:E2(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:E2(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:E2(+d),c):l},c}function NIt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],_=h/2+b,w=f+1,S=d-1;w<S;){var T=w+S>>>1;l[T]<_?w=T+1:S=T}_-l[w-1]<l[w]-_&&f+1<w&&--w;var A=l[w]-b,k=h-A;if(g-p>y-m){var I=h?(p*k+g*A)/h:g;c(f,w,A,p,m,I,y),c(w,d,k,I,m,g,y)}else{var R=h?(m*k+y*A)/h:y;c(f,w,A,p,m,g,R),c(w,d,k,p,R,g,y)}}}function PIt(e,t,n,r,i){(e.depth&1?CB:TN)(e,t,n,r,i)}const OIt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?TN(l,i,s,o,m?s+=(a-s)*l.value/m:a):CB(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=XPe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(KPe);function Ap(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Pb(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const MY=Symbol("implicit");function Ob(){var e=new Bge,t=[],n=[],r=MY;function i(s){let o=e.get(s);if(o===void 0){if(r!==MY)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Bge;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Ob(t,n).unknown(r)},Ap.apply(i,arguments),i}function GT(){var e=Ob().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Ac(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return GT(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Ap.apply(f(),arguments)}function FIt(e){return function(){return e}}function $Y(e){return+e}var o1e=[0,1];function Dc(e){return e}function LY(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:FIt(isNaN(t)?NaN:.5)}function MIt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function $It(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=LY(i,r),s=n(o,s)):(r=LY(r,i),s=n(s,o)),function(a){return s(r(a))}}function LIt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=LY(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=Pv(e,a,1,r)-1;return s[u](i[u](a))}}function AN(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function TB(){var e=o1e,t=o1e,n=Dy,r,i,s,o=Dc,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Dc&&(o=MIt(e[0],e[d-1])),a=d>2?LIt:$It,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Td)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,$Y),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=_N,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Dc,c()):o!==Dc},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function JPe(){return TB()(Dc,Dc)}function ZPe(e,t,n,r){var i=Ov(e,t,n),s;switch(r=Jw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=ePe(i,o))&&(r.precision=s),Qte(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=tPe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=ZNe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Nb(r)}function K_(e){var t=e.domain;return e.ticks=function(n){var r=t();return KG(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return ZPe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=XG(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function ja(){var e=JPe();return e.copy=function(){return AN(e,ja())},Ap.apply(e,arguments),K_(e)}function eOe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,$Y),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return eOe(e).unknown(t)},e=arguments.length?Array.from(e,$Y):[0,1],K_(n)}function tOe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function a1e(e){return Math.log(e)}function u1e(e){return Math.exp(e)}function BIt(e){return-Math.log(-e)}function jIt(e){return-Math.exp(-e)}function UIt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function zIt(e){return e===10?UIt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function VIt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function l1e(e){return(t,n)=>-e(-t,n)}function sne(e){const t=e(a1e,u1e),n=t.domain;let r=10,i,s;function o(){return i=VIt(r),s=zIt(r),n()[0]<0?(i=l1e(i),s=l1e(s),e(BIt,jIt)):e(a1e,u1e),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=KG(l,c,g))}else y=KG(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Jw(u)).precision==null&&(u.trim=!0),u=Nb(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(tOe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function nOe(){const e=sne(TB()).domain([1,10]);return e.copy=()=>AN(e,nOe()).base(e.base()),Ap.apply(e,arguments),e}function c1e(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function f1e(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function one(e){var t=1,n=e(c1e(t),f1e(t));return n.constant=function(r){return arguments.length?e(c1e(t=+r),f1e(t)):t},K_(n)}function rOe(){var e=one(TB());return e.copy=function(){return AN(e,rOe()).constant(e.constant())},Ap.apply(e,arguments)}function d1e(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function HIt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function qIt(e){return e<0?-e*e:e*e}function ane(e){var t=e(Dc,Dc),n=1;function r(){return n===1?e(Dc,Dc):n===.5?e(HIt,qIt):e(d1e(n),d1e(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},K_(t)}function une(){var e=ane(TB());return e.copy=function(){return AN(e,une()).exponent(e.exponent())},Ap.apply(e,arguments),e}function WIt(){return une.apply(null,arguments).exponent(.5)}function iOe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=H3e(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Pv(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Fg),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return iOe().domain(e).range(t).unknown(r)},Ap.apply(s,arguments)}function sOe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[Pv(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return sOe().domain([e,t]).range(i).unknown(s)},Ap.apply(K_(o),arguments)}function oOe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Pv(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return oOe().domain(e).range(t).unknown(n)},Ap.apply(i,arguments)}const KV=new Date,XV=new Date;function va(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>va(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(KV.setTime(+s),XV.setTime(+o),e(KV),e(XV),Math.floor(n(KV,XV))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const wC=va(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);wC.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?va(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):wC);wC.range;const _g=1e3,Pd=_g*60,Eg=Pd*60,sy=Eg*24,lne=sy*7,h1e=sy*30,QV=sy*365,Sg=va(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*_g)},(e,t)=>(t-e)/_g,e=>e.getUTCSeconds());Sg.range;const AB=va(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_g)},(e,t)=>{e.setTime(+e+t*Pd)},(e,t)=>(t-e)/Pd,e=>e.getMinutes());AB.range;const DB=va(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Pd)},(e,t)=>(t-e)/Pd,e=>e.getUTCMinutes());DB.range;const IB=va(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_g-e.getMinutes()*Pd)},(e,t)=>{e.setTime(+e+t*Eg)},(e,t)=>(t-e)/Eg,e=>e.getHours());IB.range;const kB=va(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Eg)},(e,t)=>(t-e)/Eg,e=>e.getUTCHours());kB.range;const Lg=va(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Pd)/sy,e=>e.getDate()-1);Lg.range;const dv=va(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sy,e=>e.getUTCDate()-1);dv.range;const aOe=va(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sy,e=>Math.floor(e/sy));aOe.range;function X_(e){return va(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Pd)/lne)}const YT=X_(0),O8=X_(1),GIt=X_(2),YIt=X_(3),_C=X_(4),KIt=X_(5),XIt=X_(6);YT.range;O8.range;GIt.range;YIt.range;_C.range;KIt.range;XIt.range;function Q_(e){return va(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/lne)}const KT=Q_(0),F8=Q_(1),QIt=Q_(2),JIt=Q_(3),EC=Q_(4),ZIt=Q_(5),ekt=Q_(6);KT.range;F8.range;QIt.range;JIt.range;EC.range;ZIt.range;ekt.range;const zR=va(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());zR.range;const VR=va(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());VR.range;const qm=va(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:va(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});qm.range;const Wm=va(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:va(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Wm.range;function uOe(e,t,n,r,i,s){const o=[[Sg,1,_g],[Sg,5,5*_g],[Sg,15,15*_g],[Sg,30,30*_g],[s,1,Pd],[s,5,5*Pd],[s,15,15*Pd],[s,30,30*Pd],[i,1,Eg],[i,3,3*Eg],[i,6,6*Eg],[i,12,12*Eg],[r,1,sy],[r,2,2*sy],[n,1,lne],[t,1,h1e],[t,3,3*h1e],[e,1,QV]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=kb(([,,g])=>g).right(o,d);if(h===o.length)return e.every(Ov(l/QV,c/QV,f));if(h===0)return wC.every(Math.max(Ov(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[tkt,nkt]=uOe(Wm,VR,KT,aOe,kB,DB),[rkt,ikt]=uOe(qm,zR,YT,Lg,IB,AB);function JV(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ZV(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function TD(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function lOe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=AD(i),c=DD(i),f=AD(s),d=DD(s),h=AD(o),p=DD(o),m=AD(a),g=DD(a),y=AD(u),v=DD(u),b={a:G,A:Y,b:J,B:L,c:null,d:b1e,e:b1e,f:Akt,g:$kt,G:Bkt,H:Skt,I:Ckt,j:Tkt,L:cOe,m:Dkt,M:Ikt,p:U,q:W,Q:_1e,s:E1e,S:kkt,u:Rkt,U:Nkt,V:Pkt,w:Okt,W:Fkt,x:null,X:null,y:Mkt,Y:Lkt,Z:jkt,"%":w1e},_={a:B,A:q,b:Z,B:re,c:null,d:x1e,e:x1e,f:Hkt,g:eRt,G:nRt,H:Ukt,I:zkt,j:Vkt,L:dOe,m:qkt,M:Wkt,p:xe,q:pe,Q:_1e,s:E1e,S:Gkt,u:Ykt,U:Kkt,V:Xkt,w:Qkt,W:Jkt,x:null,X:null,y:Zkt,Y:tRt,Z:rRt,"%":w1e},w={a:I,A:R,b:F,B:O,c:$,d:y1e,e:y1e,f:xkt,g:g1e,G:m1e,H:v1e,I:v1e,j:gkt,L:bkt,m:mkt,M:ykt,p:k,q:pkt,Q:_kt,s:Ekt,S:vkt,u:lkt,U:ckt,V:fkt,w:ukt,W:dkt,x:V,X:j,y:g1e,Y:m1e,Z:hkt,"%":wkt};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),_.x=S(n,_),_.X=S(r,_),_.c=S(t,_);function S(Te,ke){return function(it){var Re=[],ut=-1,Ke=0,Ct=Te.length,gt,Ie,Ve;for(it instanceof Date||(it=new Date(+it));++ut<Ct;)Te.charCodeAt(ut)===37&&(Re.push(Te.slice(Ke,ut)),(Ie=p1e[gt=Te.charAt(++ut)])!=null?gt=Te.charAt(++ut):Ie=gt==="e"?" ":"0",(Ve=ke[gt])&&(gt=Ve(it,Ie)),Re.push(gt),Ke=ut+1);return Re.push(Te.slice(Ke,ut)),Re.join("")}}function T(Te,ke){return function(it){var Re=TD(1900,void 0,1),ut=A(Re,Te,it+="",0),Ke,Ct;if(ut!=it.length)return null;if("Q"in Re)return new Date(Re.Q);if("s"in Re)return new Date(Re.s*1e3+("L"in Re?Re.L:0));if(ke&&!("Z"in Re)&&(Re.Z=0),"p"in Re&&(Re.H=Re.H%12+Re.p*12),Re.m===void 0&&(Re.m="q"in Re?Re.q:0),"V"in Re){if(Re.V<1||Re.V>53)return null;"w"in Re||(Re.w=1),"Z"in Re?(Ke=ZV(TD(Re.y,0,1)),Ct=Ke.getUTCDay(),Ke=Ct>4||Ct===0?F8.ceil(Ke):F8(Ke),Ke=dv.offset(Ke,(Re.V-1)*7),Re.y=Ke.getUTCFullYear(),Re.m=Ke.getUTCMonth(),Re.d=Ke.getUTCDate()+(Re.w+6)%7):(Ke=JV(TD(Re.y,0,1)),Ct=Ke.getDay(),Ke=Ct>4||Ct===0?O8.ceil(Ke):O8(Ke),Ke=Lg.offset(Ke,(Re.V-1)*7),Re.y=Ke.getFullYear(),Re.m=Ke.getMonth(),Re.d=Ke.getDate()+(Re.w+6)%7)}else("W"in Re||"U"in Re)&&("w"in Re||(Re.w="u"in Re?Re.u%7:"W"in Re?1:0),Ct="Z"in Re?ZV(TD(Re.y,0,1)).getUTCDay():JV(TD(Re.y,0,1)).getDay(),Re.m=0,Re.d="W"in Re?(Re.w+6)%7+Re.W*7-(Ct+5)%7:Re.w+Re.U*7-(Ct+6)%7);return"Z"in Re?(Re.H+=Re.Z/100|0,Re.M+=Re.Z%100,ZV(Re)):JV(Re)}}function A(Te,ke,it,Re){for(var ut=0,Ke=ke.length,Ct=it.length,gt,Ie;ut<Ke;){if(Re>=Ct)return-1;if(gt=ke.charCodeAt(ut++),gt===37){if(gt=ke.charAt(ut++),Ie=w[gt in p1e?ke.charAt(ut++):gt],!Ie||(Re=Ie(Te,it,Re))<0)return-1}else if(gt!=it.charCodeAt(Re++))return-1}return Re}function k(Te,ke,it){var Re=l.exec(ke.slice(it));return Re?(Te.p=c.get(Re[0].toLowerCase()),it+Re[0].length):-1}function I(Te,ke,it){var Re=h.exec(ke.slice(it));return Re?(Te.w=p.get(Re[0].toLowerCase()),it+Re[0].length):-1}function R(Te,ke,it){var Re=f.exec(ke.slice(it));return Re?(Te.w=d.get(Re[0].toLowerCase()),it+Re[0].length):-1}function F(Te,ke,it){var Re=y.exec(ke.slice(it));return Re?(Te.m=v.get(Re[0].toLowerCase()),it+Re[0].length):-1}function O(Te,ke,it){var Re=m.exec(ke.slice(it));return Re?(Te.m=g.get(Re[0].toLowerCase()),it+Re[0].length):-1}function $(Te,ke,it){return A(Te,t,ke,it)}function V(Te,ke,it){return A(Te,n,ke,it)}function j(Te,ke,it){return A(Te,r,ke,it)}function G(Te){return o[Te.getDay()]}function Y(Te){return s[Te.getDay()]}function J(Te){return u[Te.getMonth()]}function L(Te){return a[Te.getMonth()]}function U(Te){return i[+(Te.getHours()>=12)]}function W(Te){return 1+~~(Te.getMonth()/3)}function B(Te){return o[Te.getUTCDay()]}function q(Te){return s[Te.getUTCDay()]}function Z(Te){return u[Te.getUTCMonth()]}function re(Te){return a[Te.getUTCMonth()]}function xe(Te){return i[+(Te.getUTCHours()>=12)]}function pe(Te){return 1+~~(Te.getUTCMonth()/3)}return{format:function(Te){var ke=S(Te+="",b);return ke.toString=function(){return Te},ke},parse:function(Te){var ke=T(Te+="",!1);return ke.toString=function(){return Te},ke},utcFormat:function(Te){var ke=S(Te+="",_);return ke.toString=function(){return Te},ke},utcParse:function(Te){var ke=T(Te+="",!0);return ke.toString=function(){return Te},ke}}}var p1e={"-":"",_:" ",0:"0"},Va=/^\s*\d+/,skt=/^%/,okt=/[\\^$*+?|[\]().{}]/g;function bi(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function akt(e){return e.replace(okt,"\\$&")}function AD(e){return new RegExp("^(?:"+e.map(akt).join("|")+")","i")}function DD(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ukt(e,t,n){var r=Va.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function lkt(e,t,n){var r=Va.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ckt(e,t,n){var r=Va.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function fkt(e,t,n){var r=Va.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function dkt(e,t,n){var r=Va.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function m1e(e,t,n){var r=Va.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function g1e(e,t,n){var r=Va.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function hkt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function pkt(e,t,n){var r=Va.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function mkt(e,t,n){var r=Va.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function y1e(e,t,n){var r=Va.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function gkt(e,t,n){var r=Va.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function v1e(e,t,n){var r=Va.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ykt(e,t,n){var r=Va.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function vkt(e,t,n){var r=Va.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function bkt(e,t,n){var r=Va.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function xkt(e,t,n){var r=Va.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function wkt(e,t,n){var r=skt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function _kt(e,t,n){var r=Va.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Ekt(e,t,n){var r=Va.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function b1e(e,t){return bi(e.getDate(),t,2)}function Skt(e,t){return bi(e.getHours(),t,2)}function Ckt(e,t){return bi(e.getHours()%12||12,t,2)}function Tkt(e,t){return bi(1+Lg.count(qm(e),e),t,3)}function cOe(e,t){return bi(e.getMilliseconds(),t,3)}function Akt(e,t){return cOe(e,t)+"000"}function Dkt(e,t){return bi(e.getMonth()+1,t,2)}function Ikt(e,t){return bi(e.getMinutes(),t,2)}function kkt(e,t){return bi(e.getSeconds(),t,2)}function Rkt(e){var t=e.getDay();return t===0?7:t}function Nkt(e,t){return bi(YT.count(qm(e)-1,e),t,2)}function fOe(e){var t=e.getDay();return t>=4||t===0?_C(e):_C.ceil(e)}function Pkt(e,t){return e=fOe(e),bi(_C.count(qm(e),e)+(qm(e).getDay()===4),t,2)}function Okt(e){return e.getDay()}function Fkt(e,t){return bi(O8.count(qm(e)-1,e),t,2)}function Mkt(e,t){return bi(e.getFullYear()%100,t,2)}function $kt(e,t){return e=fOe(e),bi(e.getFullYear()%100,t,2)}function Lkt(e,t){return bi(e.getFullYear()%1e4,t,4)}function Bkt(e,t){var n=e.getDay();return e=n>=4||n===0?_C(e):_C.ceil(e),bi(e.getFullYear()%1e4,t,4)}function jkt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+bi(t/60|0,"0",2)+bi(t%60,"0",2)}function x1e(e,t){return bi(e.getUTCDate(),t,2)}function Ukt(e,t){return bi(e.getUTCHours(),t,2)}function zkt(e,t){return bi(e.getUTCHours()%12||12,t,2)}function Vkt(e,t){return bi(1+dv.count(Wm(e),e),t,3)}function dOe(e,t){return bi(e.getUTCMilliseconds(),t,3)}function Hkt(e,t){return dOe(e,t)+"000"}function qkt(e,t){return bi(e.getUTCMonth()+1,t,2)}function Wkt(e,t){return bi(e.getUTCMinutes(),t,2)}function Gkt(e,t){return bi(e.getUTCSeconds(),t,2)}function Ykt(e){var t=e.getUTCDay();return t===0?7:t}function Kkt(e,t){return bi(KT.count(Wm(e)-1,e),t,2)}function hOe(e){var t=e.getUTCDay();return t>=4||t===0?EC(e):EC.ceil(e)}function Xkt(e,t){return e=hOe(e),bi(EC.count(Wm(e),e)+(Wm(e).getUTCDay()===4),t,2)}function Qkt(e){return e.getUTCDay()}function Jkt(e,t){return bi(F8.count(Wm(e)-1,e),t,2)}function Zkt(e,t){return bi(e.getUTCFullYear()%100,t,2)}function eRt(e,t){return e=hOe(e),bi(e.getUTCFullYear()%100,t,2)}function tRt(e,t){return bi(e.getUTCFullYear()%1e4,t,4)}function nRt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?EC(e):EC.ceil(e),bi(e.getUTCFullYear()%1e4,t,4)}function rRt(){return"+0000"}function w1e(){return"%"}function _1e(e){return+e}function E1e(e){return Math.floor(+e/1e3)}var e2,cne,pOe,DN,mOe;iRt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function iRt(e){return e2=lOe(e),cne=e2.format,pOe=e2.parse,DN=e2.utcFormat,mOe=e2.utcParse,e2}function sRt(e){return new Date(e)}function oRt(e){return e instanceof Date?+e:+new Date(+e)}function fne(e,t,n,r,i,s,o,a,u,l){var c=JPe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),_=l("%Y");function w(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:_)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,oRt)):d().map(sRt)},c.ticks=function(S){var T=d();return e(T[0],T[T.length-1],S??10)},c.tickFormat=function(S,T){return T==null?w:l(T)},c.nice=function(S){var T=d();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?d(tOe(T,S)):c},c.copy=function(){return AN(c,fne(e,t,n,r,i,s,o,a,u,l))},c}function dne(){return Ap.apply(fne(rkt,ikt,qm,zR,YT,Lg,IB,AB,Sg,cne).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aRt(){return Ap.apply(fne(tkt,nkt,Wm,VR,KT,dv,kB,DB,Sg,DN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function RB(){var e=0,t=1,n,r,i,s,o=Dc,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Dy),l.rangeRound=c(_N),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Fb(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function hne(){var e=K_(RB()(Dc));return e.copy=function(){return Fb(e,hne())},Pb.apply(e,arguments)}function gOe(){var e=sne(RB()).domain([1,10]);return e.copy=function(){return Fb(e,gOe()).base(e.base())},Pb.apply(e,arguments)}function yOe(){var e=one(RB());return e.copy=function(){return Fb(e,yOe()).constant(e.constant())},Pb.apply(e,arguments)}function pne(){var e=ane(RB());return e.copy=function(){return Fb(e,pne()).exponent(e.exponent())},Pb.apply(e,arguments)}function uRt(){return pne.apply(null,arguments).exponent(.5)}function NB(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Dc,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=Ute(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Dy),h.rangeRound=p(_N),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function vOe(){var e=K_(NB()(Dc));return e.copy=function(){return Fb(e,vOe())},Pb.apply(e,arguments)}function bOe(){var e=sne(NB()).domain([.1,1,10]);return e.copy=function(){return Fb(e,bOe()).base(e.base())},Pb.apply(e,arguments)}function xOe(){var e=one(NB());return e.copy=function(){return Fb(e,xOe()).constant(e.constant())},Pb.apply(e,arguments)}function mne(){var e=ane(NB());return e.copy=function(){return Fb(e,mne()).exponent(e.exponent())},Pb.apply(e,arguments)}function lRt(){return mne.apply(null,arguments).exponent(.5)}function Dp(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const cRt=Dp("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),fRt=Dp("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),dRt=Dp("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),hRt=Dp("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),pRt=Dp("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),mRt=Dp("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),gRt=Dp("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),yRt=Dp("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),vRt=Dp("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),bRt=Dp("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),PB=Dp("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function hr(e){return function(){return e}}const S1e=Math.abs,Iu=Math.atan2,gx=Math.cos,xRt=Math.max,eH=Math.min,Vp=Math.sin,mw=Math.sqrt,Ou=1e-12,SC=Math.PI,M8=SC/2,Sk=2*SC;function wRt(e){return e>1?0:e<-1?SC:Math.acos(e)}function C1e(e){return e>=1?M8:e<=-1?-M8:Math.asin(e)}function OB(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Wte(t)}function _Rt(e){return e.innerRadius}function ERt(e){return e.outerRadius}function SRt(e){return e.startAngle}function CRt(e){return e.endAngle}function TRt(e){return e&&e.padAngle}function ARt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Ou))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function I4(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/mw(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,_=v*v+b*b,w=i-s,S=d*m-p*h,T=(b<0?-1:1)*mw(xRt(0,w*w*_-S*S)),A=(S*b-v*T)/_,k=(-S*v-b*T)/_,I=(S*b+v*T)/_,R=(-S*v+b*T)/_,F=A-g,O=k-y,$=I-g,V=R-y;return F*F+O*O>$*$+V*V&&(A=I,k=R),{cx:A,cy:k,x01:-c,y01:-f,x11:A*(i/w-1),y11:k*(i/w-1)}}function BY(){var e=_Rt,t=ERt,n=hr(0),r=null,i=SRt,s=CRt,o=TRt,a=null,u=OB(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-M8,m=s.apply(this,arguments)-M8,g=S1e(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Ou))a.moveTo(0,0);else if(g>Sk-Ou)a.moveTo(h*gx(p),h*Vp(p)),a.arc(0,0,h,p,m,!y),d>Ou&&(a.moveTo(d*gx(m),d*Vp(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,_=p,w=m,S=g,T=g,A=o.apply(this,arguments)/2,k=A>Ou&&(r?+r.apply(this,arguments):mw(d*d+h*h)),I=eH(S1e(h-d)/2,+n.apply(this,arguments)),R=I,F=I,O,$;if(k>Ou){var V=C1e(k/d*Vp(A)),j=C1e(k/h*Vp(A));(S-=V*2)>Ou?(V*=y?1:-1,_+=V,w-=V):(S=0,_=w=(p+m)/2),(T-=j*2)>Ou?(j*=y?1:-1,v+=j,b-=j):(T=0,v=b=(p+m)/2)}var G=h*gx(v),Y=h*Vp(v),J=d*gx(w),L=d*Vp(w);if(I>Ou){var U=h*gx(b),W=h*Vp(b),B=d*gx(_),q=d*Vp(_),Z;if(g<SC)if(Z=ARt(G,Y,B,q,U,W,J,L)){var re=G-Z[0],xe=Y-Z[1],pe=U-Z[0],Te=W-Z[1],ke=1/Vp(wRt((re*pe+xe*Te)/(mw(re*re+xe*xe)*mw(pe*pe+Te*Te)))/2),it=mw(Z[0]*Z[0]+Z[1]*Z[1]);R=eH(I,(d-it)/(ke-1)),F=eH(I,(h-it)/(ke+1))}else R=F=0}T>Ou?F>Ou?(O=I4(B,q,G,Y,h,F,y),$=I4(U,W,J,L,h,F,y),a.moveTo(O.cx+O.x01,O.cy+O.y01),F<I?a.arc(O.cx,O.cy,F,Iu(O.y01,O.x01),Iu($.y01,$.x01),!y):(a.arc(O.cx,O.cy,F,Iu(O.y01,O.x01),Iu(O.y11,O.x11),!y),a.arc(0,0,h,Iu(O.cy+O.y11,O.cx+O.x11),Iu($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,F,Iu($.y11,$.x11),Iu($.y01,$.x01),!y))):(a.moveTo(G,Y),a.arc(0,0,h,v,b,!y)):a.moveTo(G,Y),!(d>Ou)||!(S>Ou)?a.lineTo(J,L):R>Ou?(O=I4(J,L,U,W,d,-R,y),$=I4(G,Y,B,q,d,-R,y),a.lineTo(O.cx+O.x01,O.cy+O.y01),R<I?a.arc(O.cx,O.cy,R,Iu(O.y01,O.x01),Iu($.y01,$.x01),!y):(a.arc(O.cx,O.cy,R,Iu(O.y01,O.x01),Iu(O.y11,O.x11),!y),a.arc(0,0,d,Iu(O.cy+O.y11,O.cx+O.x11),Iu($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,R,Iu($.y11,$.x11),Iu($.y01,$.x01),!y))):a.arc(0,0,d,w,_,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-SC/2;return[gx(f)*c,Vp(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:hr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:hr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:hr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:hr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:hr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:hr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:hr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function FB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wOe(e){this._context=e}wOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function gne(e){return new wOe(e)}function _Oe(e){return e[0]}function EOe(e){return e[1]}function MB(e,t){var n=hr(!0),r=null,i=gne,s=null,o=OB(a);e=typeof e=="function"?e:e===void 0?_Oe:hr(e),t=typeof t=="function"?t:t===void 0?EOe:hr(t);function a(u){var l,c=(u=FB(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:hr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:hr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:hr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function SOe(e,t,n){var r=null,i=hr(!0),s=null,o=gne,a=null,u=OB(l);e=typeof e=="function"?e:e===void 0?_Oe:hr(+e),t=typeof t=="function"?t:hr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?EOe:hr(+n);function l(f){var d,h,p,m=(f=FB(f)).length,g,y=!1,v,b=new Array(m),_=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],_[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),_[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):_[d]))}if(v)return a=null,v+""||null}function c(){return MB().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:hr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:hr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:hr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:hr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:hr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:hr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:hr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function DRt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function IRt(e){return e}function kRt(){var e=IRt,t=DRt,n=null,r=hr(0),i=hr(Sk),s=hr(0);function o(a){var u,l=(a=FB(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(Sk,Math.max(-Sk,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),_;for(u=0;u<l;++u)(_=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=_);for(t!=null?h.sort(function(w,S){return t(p[w],p[S])}):n!=null&&h.sort(function(w,S){return n(a[w],a[S])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],_=p[c],y=m+(_>0?_*f:0)+b,p[c]={data:a[c],index:u,value:_,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:hr(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:hr(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:hr(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:hr(+a),o):s},o}const RRt={draw(e,t){const n=mw(t/SC);e.moveTo(n,0),e.arc(0,0,n,0,Sk)}};function NRt(e,t){let n=null,r=OB(i);e=typeof e=="function"?e:hr(e||RRt),t=typeof t=="function"?t:hr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:hr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:hr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Mv(){}function $8(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function $B(e){this._context=e}$B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$8(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$8(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function PRt(e){return new $B(e)}function COe(e){this._context=e}COe.prototype={areaStart:Mv,areaEnd:Mv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$8(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ORt(e){return new COe(e)}function TOe(e){this._context=e}TOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:$8(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function FRt(e){return new TOe(e)}function AOe(e,t){this._basis=new $B(e),this._beta=t}AOe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const MRt=function e(t){function n(r){return t===1?new $B(r):new AOe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function L8(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function yne(e,t){this._context=e,this._k=(1-t)/6}yne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:L8(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:L8(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $Rt=function e(t){function n(r){return new yne(r,t)}return n.tension=function(r){return e(+r)},n}(0);function vne(e,t){this._context=e,this._k=(1-t)/6}vne.prototype={areaStart:Mv,areaEnd:Mv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:L8(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const LRt=function e(t){function n(r){return new vne(r,t)}return n.tension=function(r){return e(+r)},n}(0);function bne(e,t){this._context=e,this._k=(1-t)/6}bne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:L8(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const BRt=function e(t){function n(r){return new bne(r,t)}return n.tension=function(r){return e(+r)},n}(0);function xne(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Ou){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Ou){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function DOe(e,t){this._context=e,this._alpha=t}DOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:xne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jRt=function e(t){function n(r){return t?new DOe(r,t):new yne(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function IOe(e,t){this._context=e,this._alpha=t}IOe.prototype={areaStart:Mv,areaEnd:Mv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:xne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const URt=function e(t){function n(r){return t?new IOe(r,t):new vne(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function kOe(e,t){this._context=e,this._alpha=t}kOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zRt=function e(t){function n(r){return t?new kOe(r,t):new bne(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function ROe(e){this._context=e}ROe.prototype={areaStart:Mv,areaEnd:Mv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function VRt(e){return new ROe(e)}function T1e(e){return e<0?-1:1}function A1e(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(T1e(s)+T1e(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function D1e(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function tH(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function B8(e){this._context=e}B8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tH(this,this._t0,D1e(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,tH(this,D1e(this,n=A1e(this,e,t)),n);break;default:tH(this,this._t0,n=A1e(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function NOe(e){this._context=new POe(e)}(NOe.prototype=Object.create(B8.prototype)).point=function(e,t){B8.prototype.point.call(this,t,e)};function POe(e){this._context=e}POe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function HRt(e){return new B8(e)}function qRt(e){return new NOe(e)}function OOe(e){this._context=e}OOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=I1e(e),i=I1e(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function I1e(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function WRt(e){return new OOe(e)}function LB(e,t){this._context=e,this._t=t}LB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function GRt(e){return new LB(e,.5)}function YRt(e){return new LB(e,0)}function KRt(e){return new LB(e,1)}function k1e(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function R1e(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function XRt(e,t){return e[t]}function QRt(e){const t=[];return t.key=e,t}function JRt(){var e=hr([]),t=R1e,n=k1e,r=XRt;function i(s){var o=Array.from(e.apply(this,arguments),QRt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=FB(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:hr(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:hr(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?R1e:typeof s=="function"?s:hr(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??k1e,i):n},i}function SI(e,t,n){this.k=e,this.x=t,this.y=n}SI.prototype={constructor:SI,scale:function(e){return e===1?this:new SI(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new SI(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};SI.prototype;function zh(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function $v(e){return!!e&&!!e[Fs]}function oy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===a3t}(e)||Array.isArray(e)||!!e[L1e]||!!(!((t=e.constructor)===null||t===void 0)&&t[L1e])||wne(e)||_ne(e))}function t_(e,t,n){n===void 0&&(n=!1),XT(e)===0?(n?Object.keys:SS)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function XT(e){var t=e[Fs];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:wne(e)?2:_ne(e)?3:0}function ES(e,t){return XT(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ZRt(e,t){return XT(e)===2?e.get(t):e[t]}function FOe(e,t,n){var r=XT(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function MOe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function wne(e){return s3t&&e instanceof Map}function _ne(e){return o3t&&e instanceof Set}function Mx(e){return e.o||e.t}function Ene(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=LOe(e);delete t[Fs];for(var n=SS(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Sne(e,t){return t===void 0&&(t=!1),Cne(e)||$v(e)||!oy(e)||(XT(e)>1&&(e.set=e.add=e.clear=e.delete=e3t),Object.freeze(e),t&&t_(e,function(n,r){return Sne(r,!0)},!0)),e}function e3t(){zh(2)}function Cne(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Rm(e){var t=VY[e];return t||zh(18,e),t}function t3t(e,t){VY[e]||(VY[e]=t)}function jY(){return HR}function nH(e,t){t&&(Rm("Patches"),e.u=[],e.s=[],e.v=t)}function j8(e){UY(e),e.p.forEach(n3t),e.p=null}function UY(e){e===HR&&(HR=e.l)}function N1e(e){return HR={p:[],l:HR,h:e,m:!0,_:0}}function n3t(e){var t=e[Fs];t.i===0||t.i===1?t.j():t.g=!0}function rH(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Rm("ES5").S(t,e,r),r?(n[Fs].P&&(j8(t),zh(4)),oy(e)&&(e=U8(t,e),t.l||z8(t,e)),t.u&&Rm("Patches").M(n[Fs].t,e,t.u,t.s)):e=U8(t,n,[]),j8(t),t.u&&t.v(t.u,t.s),e!==$Oe?e:void 0}function U8(e,t,n){if(Cne(t))return t;var r=t[Fs];if(!r)return t_(t,function(a,u){return P1e(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return z8(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Ene(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),t_(s,function(a,u){return P1e(e,r,i,a,u,n,o)}),z8(e,i,!1),n&&e.u&&Rm("Patches").N(r,n,e.u,e.s)}return r.o}function P1e(e,t,n,r,i,s,o){if($v(i)){var a=U8(e,i,s&&t&&t.i!==3&&!ES(t.R,r)?s.concat(r):void 0);if(FOe(n,r,a),!$v(a))return;e.m=!1}else o&&n.add(i);if(oy(i)&&!Cne(i)){if(!e.h.D&&e._<1)return;U8(e,i),t&&t.A.l||z8(e,i)}}function z8(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Sne(t,n)}function iH(e,t){var n=e[Fs];return(n?Mx(n):e)[t]}function O1e(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function P1(e){e.P||(e.P=!0,e.l&&P1(e.l))}function sH(e){e.o||(e.o=Ene(e.t))}function zY(e,t,n){var r=wne(t)?Rm("MapSet").F(t,n):_ne(t)?Rm("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:jY(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=qR;o&&(u=[a],l=CI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Rm("ES5").J(t,n);return(n?n.A:jY()).p.push(r),r}function r3t(e){return $v(e)||zh(22,e),function t(n){if(!oy(n))return n;var r,i=n[Fs],s=XT(n);if(i){if(!i.P&&(i.i<4||!Rm("ES5").K(i)))return i.t;i.I=!0,r=F1e(n,s),i.I=!1}else r=F1e(n,s);return t_(r,function(o,a){i&&ZRt(i.t,o)===a||FOe(r,o,t(a))}),s===3?new Set(r):r}(e)}function F1e(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ene(e)}function i3t(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Fs];return qR.get(u,s)},set:function(u){var l=this[Fs];qR.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Fs];if(!a.P)switch(a.i){case 5:r(a)&&P1(a);break;case 4:n(a)&&P1(a)}}}function n(s){for(var o=s.t,a=s.k,u=SS(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Fs){var f=o[c];if(f===void 0&&!ES(o,c))return!0;var d=a[c],h=d&&d[Fs];if(h?h.t!==f:!MOe(d,f))return!0}}var p=!!o[Fs];return u.length!==SS(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};t3t("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=LOe(f);delete p[Fs];for(var m=SS(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:jY(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Fs,{value:l,writable:!0}),u},S:function(s,o,a){a?$v(o)&&o[Fs].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Fs];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)t_(d,function(b){b!==Fs&&(f[b]!==void 0||ES(f,b)?h[b]||u(d[b]):(h[b]=!0,P1(c)))}),t_(f,function(b){d[b]!==void 0||ES(d,b)||(h[b]=!1,P1(c))});else if(p===5){if(r(c)&&(P1(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var M1e,HR,Tne=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",s3t=typeof Map<"u",o3t=typeof Set<"u",$1e=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",$Oe=Tne?Symbol.for("immer-nothing"):((M1e={})["immer-nothing"]=!0,M1e),L1e=Tne?Symbol.for("immer-draftable"):"__$immer_draftable",Fs=Tne?Symbol.for("immer-state"):"__$immer_state",a3t=""+Object.prototype.constructor,SS=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,LOe=Object.getOwnPropertyDescriptors||function(e){var t={};return SS(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},VY={},qR={get:function(e,t){if(t===Fs)return e;var n=Mx(e);if(!ES(n,t))return function(i,s,o){var a,u=O1e(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!oy(r)?r:r===iH(e.t,t)?(sH(e),e.o[t]=zY(e.A.h,r,e)):r},has:function(e,t){return t in Mx(e)},ownKeys:function(e){return Reflect.ownKeys(Mx(e))},set:function(e,t,n){var r=O1e(Mx(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=iH(Mx(e),t),s=i==null?void 0:i[Fs];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(MOe(n,i)&&(n!==void 0||ES(e.t,t)))return!0;sH(e),P1(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return iH(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,sH(e),P1(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Mx(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){zh(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){zh(12)}},CI={};t_(qR,function(e,t){CI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),CI.deleteProperty=function(e,t){return CI.set.call(this,e,t,void 0)},CI.set=function(e,t,n){return qR.set.call(this,e[0],t,n,e[0])};var u3t=function(){function e(n){var r=this;this.O=$1e,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(_){var w;return(w=s).call.apply(w,[g,_].concat(v))})}}var l;if(typeof s!="function"&&zh(6),o!==void 0&&typeof o!="function"&&zh(7),oy(i)){var c=N1e(r),f=zY(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?j8(c):UY(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return nH(c,o),rH(m,c)},function(m){throw j8(c),m}):(nH(c,o),rH(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===$Oe&&(l=void 0),r.D&&Sne(l,!0),o){var h=[],p=[];Rm("Patches").M(i,l,h,p),o(h,p)}return l}zh(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){oy(n)||zh(8),$v(n)&&(n=r3t(n));var r=N1e(this),i=zY(this,n,void 0);return i[Fs].C=!0,UY(r),i},t.finishDraft=function(n,r){var i=n&&n[Fs],s=i.A;return nH(s,r),rH(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!$1e&&zh(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Rm("Patches").$;return $v(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Vf=new u3t,BOe=Vf.produce;Vf.produceWithPatches.bind(Vf);Vf.setAutoFreeze.bind(Vf);Vf.setUseProxies.bind(Vf);Vf.applyPatches.bind(Vf);Vf.createDraft.bind(Vf);Vf.finishDraft.bind(Vf);function WR(e){"@babel/helpers - typeof";return WR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WR(e)}function l3t(e,t){if(WR(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(WR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c3t(e){var t=l3t(e,"string");return WR(t)=="symbol"?t:t+""}function f3t(e,t,n){return(t=c3t(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B1e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function j1e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B1e(Object(n),!0).forEach(function(r){f3t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B1e(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mu(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var U1e=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),oH=function(){return Math.random().toString(36).substring(7).split("").join(".")},V8={INIT:"@@redux/INIT"+oH(),REPLACE:"@@redux/REPLACE"+oH(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+oH()}};function d3t(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function jOe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Mu(1));return n(jOe)(e,t)}if(typeof e!="function")throw new Error(Mu(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Mu(3));return s}function f(m){if(typeof m!="function")throw new Error(Mu(4));if(u)throw new Error(Mu(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Mu(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!d3t(m))throw new Error(Mu(7));if(typeof m.type>"u")throw new Error(Mu(8));if(u)throw new Error(Mu(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(Mu(10));i=m,d({type:V8.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Mu(11));function b(){v.next&&v.next(c())}b();var _=g(b);return{unsubscribe:_}}},m[U1e]=function(){return this},m}return d({type:V8.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[U1e]=p,r}function h3t(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:V8.INIT});if(typeof r>"u")throw new Error(Mu(12));if(typeof n(void 0,{type:V8.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mu(13))})}function p3t(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{h3t(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Mu(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function H8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function m3t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Mu(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=H8.apply(void 0,a)(i.dispatch),j1e(j1e({},i),{},{dispatch:s})}}}function UOe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var HY=UOe();HY.withExtraArgument=UOe;var zOe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),IN=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},n_=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},g3t=Object.defineProperty,y3t=Object.defineProperties,v3t=Object.getOwnPropertyDescriptors,z1e=Object.getOwnPropertySymbols,b3t=Object.prototype.hasOwnProperty,x3t=Object.prototype.propertyIsEnumerable,V1e=function(e,t,n){return t in e?g3t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},hv=function(e,t){for(var n in t||(t={}))b3t.call(t,n)&&V1e(e,n,t[n]);if(z1e)for(var r=0,i=z1e(t);r<i.length;r++){var n=i[r];x3t.call(t,n)&&V1e(e,n,t[n])}return e},aH=function(e,t){return y3t(e,v3t(t))},kN=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},w3t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?H8:H8.apply(null,arguments)};function VOe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var _3t=function(e){return e&&typeof e.match=="function"};function Nm(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return hv(hv({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function E3t(e){return VOe(e)&&"type"in e}var S3t=function(e){zOe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,n_([void 0],n[0].concat(this)))):new(t.bind.apply(t,n_([void 0],n.concat(this))))},t}(Array),C3t=function(e){zOe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,n_([void 0],n[0].concat(this)))):new(t.bind.apply(t,n_([void 0],n.concat(this))))},t}(Array);function qY(e){return oy(e)?BOe(e,function(){}):e}function T3t(e){return typeof e=="boolean"}function A3t(){return function(t){return D3t(t)}}function D3t(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new S3t;return n&&(T3t(n)?r.push(HY):r.push(HY.withExtraArgument(n.extraArgument))),r}function I3t(e){var t=A3t(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(VOe(i))h=p3t(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=m3t.apply(void 0,p),g=H8;u&&(g=w3t(hv({trace:!1},typeof u=="object"&&u)));var y=new C3t(m),v=y;Array.isArray(d)?v=n_([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return jOe(h,c,b)}function HOe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function k3t(e){return typeof e=="function"}function R3t(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?HOe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(k3t(e))u=function(){return qY(e())};else{var l=qY(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=n_([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if($v(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(oy(p))return BOe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function N3t(e,t){return e+"/"+t}function P3t(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:qY(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=N3t(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Nm(d,p):Nm(d)});function u(){var c=typeof e.extraReducers=="function"?HOe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=hv(hv({},d),o);return R3t(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var _=0,w=p;_<w.length;_++){var S=w[_];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var O3t="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",qOe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=O3t[Math.random()*64|0];return t},F3t=["name","message","stack","code"],uH=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),H1e=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),M3t=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=F3t;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Nm(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:aH(hv({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Nm(t+"/pending",function(l,c,f){return{payload:void 0,meta:aH(hv({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Nm(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||M3t)(l||"Rejected"),meta:aH(hv({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):qOe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return kN(this,null,function(){var v,b,_,w,S,T,A;return IN(this,function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),w=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),L3t(w)?[4,w]:[3,2];case 1:w=k.sent(),k.label=2;case 2:if(w===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(I,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,R){return new uH(I,R)},fulfillWithValue:function(I,R){return new H1e(I,R)}})).then(function(I){if(I instanceof uH)throw I;return I instanceof H1e?i(I.payload,h,l,I.meta):i(I,h,l)})])];case 3:return _=k.sent(),[3,5];case 4:return T=k.sent(),_=T instanceof uH?o(null,h,l,T.payload,T.meta):o(T,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(_)&&_.meta.condition,A||c(_),[2,_]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then($3t)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function $3t(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function L3t(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var B3t=function(e,t){return _3t(e)?e.match(t):e(t)};function q1e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return B3t(r,n)})}}var Ane=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},WY=function(){},WOe=function(e,t){return t===void 0&&(t=WY),e.catch(t),e},GOe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},CS=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},j3t="task",YOe="listener",KOe="completed",Dne="cancelled",U3t="task-"+Dne,z3t="task-"+KOe,XOe=YOe+"-"+Dne,V3t=YOe+"-"+KOe,BB=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=j3t+" "+Dne+" (reason: "+t+")"}return e}(),TS=function(e){if(e.aborted)throw new BB(e.reason)};function QOe(e,t){var n=WY;return new Promise(function(r,i){var s=function(){return i(new BB(e.reason))};if(e.aborted){s();return}n=GOe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=WY})}var H3t=function(e,t){return kN(void 0,null,function(){var n,r;return IN(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof BB?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},q8=function(e){return function(t){return WOe(QOe(e,t).then(function(n){return TS(e),n}))}},JOe=function(e){var t=q8(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},q3t=Object.assign,W1e={},RN="listenerMiddleware",W3t=function(e,t){var n=function(r){return GOe(e,function(){return CS(r,e.reason)})};return function(r,i){Ane(r,"taskExecutor");var s=new AbortController;n(s);var o=H3t(function(){return kN(void 0,null,function(){var a;return IN(this,function(u){switch(u.label){case 0:return TS(e),TS(s.signal),[4,r({pause:q8(s.signal),delay:JOe(s.signal),signal:s.signal})];case 1:return a=u.sent(),TS(s.signal),[2,a]}})})},function(){return CS(s,z3t)});return i!=null&&i.autoJoin&&t.push(o),{result:q8(e)(o),cancel:function(){CS(s,U3t)}}}},G3t=function(e,t){var n=function(r,i){return kN(void 0,null,function(){var s,o,a,u;return IN(this,function(l){switch(l.label){case 0:TS(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,QOe(t,Promise.race(a))];case 2:return u=l.sent(),TS(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return WOe(n(r,i))}},ZOe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Nm(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Ane(s,"options.listener"),{predicate:i,type:t,effect:s}},Y3t=function(e){var t=ZOe(e),n=t.type,r=t.predicate,i=t.effect,s=qOe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},GY=function(e){e.pending.forEach(function(t){CS(t,XOe)})},K3t=function(e){return function(){e.forEach(GY),e.clear()}},G1e=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},X3t=Nm(RN+"/add"),Q3t=Nm(RN+"/removeAll"),J3t=Nm(RN+"/remove"),Z3t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,n_([RN+"/error"],e))};function eNt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?Z3t:i;Ane(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&GY(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=Y3t(h)),o(p)},l=function(h){var p=ZOe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var _=typeof m=="string"?b.type===m:b.predicate===y;return _&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&GY(v)),!!v},c=function(h,p,m,g){return kN(t,null,function(){var y,v,b,_;return IN(this,function(w){switch(w.label){case 0:y=new AbortController,v=G3t(u,y.signal),b=[],w.label=1;case 1:return w.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,q3t({},m,{getOriginalState:g,condition:function(S,T){return v(S,T).then(Boolean)},take:v,delay:JOe(y.signal),pause:q8(y.signal),extra:r,signal:y.signal,fork:W3t(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,T,A){S!==y&&(CS(S,XOe),A.delete(S))})}})))];case 2:return w.sent(),[3,6];case 3:return _=w.sent(),_ instanceof BB||G1e(s,_,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return w.sent(),CS(y,V3t),h.pending.delete(y),[7];case 6:return[2]}})})},f=K3t(n),d=function(h){return function(p){return function(m){if(!E3t(m))return p(m);if(X3t.match(m))return u(m.payload);if(Q3t.match(m)){f();return}if(J3t.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===W1e)throw new Error(RN+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),_=Array.from(n.values()),w=0,S=_;w<S.length;w++){var T=S[w],A=!1;try{A=T.predicate(m,b,g)}catch(k){A=!1,G1e(s,k,{raisedBy:"predicate"})}A&&c(T,m,h,y)}}finally{g=W1e}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Y1e;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);i3t();function tNt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let k4;const nNt=new Uint8Array(16);function rNt(){if(!k4&&(k4=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!k4))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return k4(nNt)}const Ka=[];for(let e=0;e<256;++e)Ka.push((e+256).toString(16).slice(1));function iNt(e,t=0){return(Ka[e[t+0]]+Ka[e[t+1]]+Ka[e[t+2]]+Ka[e[t+3]]+"-"+Ka[e[t+4]]+Ka[e[t+5]]+"-"+Ka[e[t+6]]+Ka[e[t+7]]+"-"+Ka[e[t+8]]+Ka[e[t+9]]+"-"+Ka[e[t+10]]+Ka[e[t+11]]+Ka[e[t+12]]+Ka[e[t+13]]+Ka[e[t+14]]+Ka[e[t+15]]).toLowerCase()}const sNt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),K1e={randomUUID:sNt};function X1e(e,t,n){if(K1e.randomUUID&&!e)return K1e.randomUUID();e=e||{};const r=e.random||(e.rng||rNt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,iNt(r)}class Pm{static get(){let t=X1e();for(;this.ids.has(t);)t=X1e();return this.ids.set(t,!0),t}}Pm.ids=new Map;function rp(e){return"parent"in e}function oNt(e){return!rp(e)}function aNt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Pm.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Pm.get(),createdOn:Date.now(),val:r}]:[];return{id:Pm.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function uNt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Pm.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Pm.get(),createdOn:Date.now(),val:s}]:[];return{id:Pm.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function ao(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=yNt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r_(e){return!!e&&!!e[Hf]}function Lv(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===vNt}(e)||Array.isArray(e)||!!e[Ck]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ck])||jB(e)||UB(e))}function CC(e,t,n){n===void 0&&(n=!1),Bv(e)===0?(n?Object.keys:One)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Bv(e){var t=e[Hf];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:jB(e)?2:UB(e)?3:0}function GR(e,t){return Bv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dF(e,t){return Bv(e)===2?e.get(t):e[t]}function e4e(e,t,n){var r=Bv(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function lNt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function jB(e){return mNt&&e instanceof Map}function UB(e){return gNt&&e instanceof Set}function $x(e){return e.o||e.t}function Ine(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=bNt(e);delete t[Hf];for(var n=One(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function kne(e,t){return t===void 0&&(t=!1),Rne(e)||r_(e)||!Lv(e)||(Bv(e)>1&&(e.set=e.add=e.clear=e.delete=cNt),Object.freeze(e),t&&CC(e,function(n,r){return kne(r,!0)},!0)),e}function cNt(){ao(2)}function Rne(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Om(e){var t=QY[e];return t||ao(18,e),t}function fNt(e,t){QY[e]||(QY[e]=t)}function Q1e(){return{}.NODE_ENV==="production"||TC||ao(0),TC}function lH(e,t){t&&(Om("Patches"),e.u=[],e.s=[],e.v=t)}function W8(e){YY(e),e.p.forEach(dNt),e.p=null}function YY(e){e===TC&&(TC=e.l)}function J1e(e){return TC={p:[],l:TC,h:e,m:!0,_:0}}function dNt(e){var t=e[Hf];t.i===0||t.i===1?t.j():t.O=!0}function cH(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Om("ES5").S(t,e,r),r?(n[Hf].P&&(W8(t),ao(4)),Lv(e)&&(e=G8(t,e),t.l||Y8(t,e)),t.u&&Om("Patches").M(n[Hf].t,e,t.u,t.s)):e=G8(t,n,[]),W8(t),t.u&&t.v(t.u,t.s),e!==Pne?e:void 0}function G8(e,t,n){if(Rne(t))return t;var r=t[Hf];if(!r)return CC(t,function(s,o){return Z1e(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Y8(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Ine(r.k):r.o;CC(r.i===3?new Set(i):i,function(s,o){return Z1e(e,r,i,s,o,n)}),Y8(e,i,!1),n&&e.u&&Om("Patches").R(r,n,e.u,e.s)}return r.o}function Z1e(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&ao(5),r_(i)){var o=G8(e,i,s&&t&&t.i!==3&&!GR(t.D,r)?s.concat(r):void 0);if(e4e(n,r,o),!r_(o))return;e.m=!1}if(Lv(i)&&!Rne(i)){if(!e.h.F&&e._<1)return;G8(e,i),t&&t.A.l||Y8(e,i)}}function Y8(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&kne(t,n)}function fH(e,t){var n=e[Hf];return(n?$x(n):e)[t]}function eve(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function KY(e){e.P||(e.P=!0,e.l&&KY(e.l))}function dH(e){e.o||(e.o=Ine(e.t))}function XY(e,t,n){var r=jB(t)?Om("MapSet").N(t,n):UB(t)?Om("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Q1e(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=JY;o&&(u=[a],l=TI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Om("ES5").J(t,n);return(n?n.A:Q1e()).p.push(r),r}function hNt(e){return r_(e)||ao(22,e),function t(n){if(!Lv(n))return n;var r,i=n[Hf],s=Bv(n);if(i){if(!i.P&&(i.i<4||!Om("ES5").K(i)))return i.t;i.I=!0,r=tve(n,s),i.I=!1}else r=tve(n,s);return CC(r,function(o,a){i&&dF(i.t,o)===a||e4e(r,o,t(a))}),s===3?new Set(r):r}(e)}function tve(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ine(e)}function pNt(){function e(r){if(!Lv(r))return r;if(Array.isArray(r))return r.map(e);if(jB(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(UB(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return GR(r,Ck)&&(i[Ck]=r[Ck]),i}function t(r){return r_(r)?e(r):r}var n="add";fNt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Bv(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||ao(24),typeof u=="function"&&f==="prototype"&&ao(24),typeof(u=dF(u,f))!="object"&&ao(15,o.join("/"))}var d=Bv(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:ao(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:ao(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;CC(a.D,function(h,p){var m=dF(f,h),g=dF(d,h),y=p?GR(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Pne?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var nve,TC,Nne=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",mNt=typeof Map<"u",gNt=typeof Set<"u",rve=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Pne=Nne?Symbol.for("immer-nothing"):((nve={})["immer-nothing"]=!0,nve),Ck=Nne?Symbol.for("immer-draftable"):"__$immer_draftable",Hf=Nne?Symbol.for("immer-state"):"__$immer_state",yNt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},vNt=""+Object.prototype.constructor,One=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,bNt=Object.getOwnPropertyDescriptors||function(e){var t={};return One(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},QY={},JY={get:function(e,t){if(t===Hf)return e;var n=$x(e);if(!GR(n,t))return function(i,s,o){var a,u=eve(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Lv(r)?r:r===fH(e.t,t)?(dH(e),e.o[t]=XY(e.A.h,r,e)):r},has:function(e,t){return t in $x(e)},ownKeys:function(e){return Reflect.ownKeys($x(e))},set:function(e,t,n){var r=eve($x(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=fH($x(e),t),s=i==null?void 0:i[Hf];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(lNt(n,i)&&(n!==void 0||GR(e.t,t)))return!0;dH(e),KY(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return fH(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,dH(e),KY(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=$x(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){ao(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ao(12)}},TI={};CC(JY,function(e,t){TI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),TI.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&ao(13),TI.set.call(this,e,t,void 0)},TI.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&ao(14),JY.set.call(this,e[0],t,n,e[0])};var xNt=function(){function e(n){var r=this;this.g=rve,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(_){var w;return(w=s).call.apply(w,[g,_].concat(v))})}}var l;if(typeof s!="function"&&ao(6),o!==void 0&&typeof o!="function"&&ao(7),Lv(i)){var c=J1e(r),f=XY(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?W8(c):YY(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return lH(c,o),cH(m,c)},function(m){throw W8(c),m}):(lH(c,o),cH(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Pne&&(l=void 0),r.F&&kne(l,!0),o){var h=[],p=[];Om("Patches").M(i,l,h,p),o(h,p)}return l}ao(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Lv(n)||ao(8),r_(n)&&(n=hNt(n));var r=J1e(this),i=XY(this,n,void 0);return i[Hf].C=!0,YY(r),i},t.finishDraft=function(n,r){var i=n&&n[Hf];({}).NODE_ENV!=="production"&&(i&&i.C||ao(9),i.I&&ao(10));var s=i.A;return lH(s,r),cH(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!rve&&ao(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Om("Patches").$;return r_(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),qf=new xNt,wNt=qf.produce;qf.produceWithPatches.bind(qf);qf.setAutoFreeze.bind(qf);qf.setUseProxies.bind(qf);qf.applyPatches.bind(qf);qf.createDraft.bind(qf);qf.finishDraft.bind(qf);function _Nt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=aNt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return P3t({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Pm.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Pm.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function ENt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=_Nt(e),s=eNt();s.startListening({matcher:q1e(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=q1e(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=I3t({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Pm.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var SNt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),CNt=Object.prototype.hasOwnProperty;function ZY(e,t){return CNt.call(e,t)}function eK(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)ZY(e,i)&&r.push(i);return r}function Ic(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function tK(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Lx(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function t4e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function nK(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(nK(e[t]))return!0}else if(typeof e=="object"){for(var r=eK(e),i=r.length,s=0;s<i;s++)if(nK(e[r[s]]))return!0}}return!1}function ive(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var n4e=function(e){SNt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,ive(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=ive(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),ro=n4e,TNt=Ic,Q2={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=K8(n,this.path);r&&(r=Ic(r));var i=Nw(n,{op:"remove",path:this.from}).removed;return Nw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=K8(n,this.from);return Nw(n,{op:"add",path:this.path,value:Ic(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:YR(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},ANt={add:function(e,t,n){return tK(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Q2.move,copy:Q2.copy,test:Q2.test,_get:Q2._get};function K8(e,t){if(t=="")return e;var n={op:"_get",path:t};return Nw(e,n),n.value}function Nw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):X8(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=K8(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=YR(e,t.value),o.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ro("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ic(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=X8;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=t4e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!tK(h))throw new ro("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);tK(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ro("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=ANt[t.op].call(t,l,h,e);if(o.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Q2[t.op].call(t,l,h,e);if(o.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ro("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function zB(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ro("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ic(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Nw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function DNt(e,t,n){var r=Nw(e,t);if(r.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function X8(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ro("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Q2[e.op]){if(typeof e.path!="string")throw new ro("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ro('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ro("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ro("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&nK(e.value))throw new ro("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ro("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ro("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=r4e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ro("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ro("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function r4e(e,t,n){try{if(!Array.isArray(e))throw new ro("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)zB(Ic(t),Ic(e),n||!0);else{n=n||X8;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ro)return i;throw i}}function YR(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!YR(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!YR(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const INt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ro,_areEquals:YR,applyOperation:Nw,applyPatch:zB,applyReducer:DNt,deepClone:TNt,getValueByPointer:K8,validate:r4e,validator:X8},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Fne=new WeakMap,kNt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),RNt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function NNt(e){return Fne.get(e)}function PNt(e,t){return e.observers.get(t)}function ONt(e,t){e.observers.delete(t.callback)}function FNt(e,t){t.unobserve()}function MNt(e,t){var n=[],r,i=NNt(e);if(!i)i=new kNt(e),Fne.set(e,i);else{var s=PNt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ic(e),t){r.callback=t,r.next=null;var o=function(){rK(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){rK(r),clearTimeout(r.next),ONt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new RNt(t,r)),r}function rK(e,t){t===void 0&&(t=!1);var n=Fne.get(e.object);Mne(n.value,e.object,e.patches,"",t),e.patches.length&&zB(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Mne(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=eK(t),o=eK(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(ZY(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Mne(c,f,n,r+"/"+Lx(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Lx(l),value:Ic(c)}),n.push({op:"replace",path:r+"/"+Lx(l),value:Ic(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Lx(l),value:Ic(c)}),n.push({op:"remove",path:r+"/"+Lx(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!ZY(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Lx(l),value:Ic(t[l])})}}}function i4e(e,t,n){n===void 0&&(n=!1);var r=[];return Mne(e,t,r,"",n),r}const $Nt=Object.freeze(Object.defineProperty({__proto__:null,compare:i4e,generate:rK,observe:MNt,unobserve:FNt},Symbol.toStringTag,{value:"Module"}));Object.assign({},INt,$Nt,{JsonPatchError:n4e,deepClone:Ic,escapePathComponent:Lx,unescapePathComponent:t4e});var AI=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(AI||{});function hF(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=s4e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=hF(i,t);return zB(a,Ic(o),!0,!1).newDocument}function LNt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function J_({registry:e,initialState:t}){let n=!1;const r=tNt(),i=ENt(t);function s(c){return i.backend.nodes[c]}r.listen(AI.TRAVERSAL_START,()=>{n=!0}),r.listen(AI.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return hF(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=hF(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=i4e(y,f);if(LNt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=uNt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=hF(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(AI.TRAVERSAL_START);const f=s4e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);jNt(p,m)?rp(p)&&d.push(...p.sideEffects.undo):rp(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(AI.TRAVERSAL_END)},undo(){const{current:c}=i;return rp(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return o4e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function BNt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;rp(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)rp(r)&&(r=n[r.parent]),rp(i)&&(i=n[i.parent]);return r.id}function s4e(e,t,n){const r=BNt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),rp(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),rp(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function jNt(e,t){if(rp(e)&&e.parent===t.id)return!0;if(rp(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function o4e(e,t){return{...e,children:e.children.map(n=>o4e(t[n],t)),name:`${e.label}`}}pNt();function UNt(e){return e.length===2?wNt(e):e}class Iy{static create(){return new Iy}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:UNt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Nm(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}const sve=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},QT=e=>{const t=N.useRef(null),n=sve(e),[r,i]=N.useState(0),[s,o]=N.useState(0);N.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=sve({...n,width:n.width||r,height:n.height||s});return[t,a]},zNt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:QT},Symbol.toStringTag,{value:"Module"})),VNt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function HNt({parameters:e,setAnswer:t}){const[n,r]=QT(VNt),[i,s]=N.useState(100),[o,a]=N.useState(100),[u,l]=N.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=N.useMemo(()=>{const p=Iy.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=J_({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=N.useCallback(p=>{const m=vr("#movingCircle"),g=vr("#clickAccuracySvg"),y=t8(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return N.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;vr(n.current).select("circle").transition().duration(y).ease(JCt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:E.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[E.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),E.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),E.jsxs(Fe,{children:["Adjust speed (px/s):",E.jsx(fN,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const qNt=Object.freeze(Object.defineProperty({__proto__:null,default:HNt},Symbol.toStringTag,{value:"Module"}));function $ne({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?DN("%B"):Nb(".2s"))(c),[s]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?E.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>E.jsxs("g",{transform:`translate(${f}, ${n})`,children:[E.jsx("line",{y2:"6",stroke:"currentColor"}),o?E.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,E.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:E.jsx(ma,{children:E.jsx(xs,{withinPortal:!0,label:c,children:E.jsx(tt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const WNt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:$ne},Symbol.toStringTag,{value:"Module"}));function a4e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>E.jsxs("g",{transform:`translate(${n}, ${l})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),s?E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,E.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:E.jsx("foreignObject",{width:a,height:20,children:E.jsx($i,{style:{width:"100%",height:"100%"},justify:"right",children:E.jsx(tt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const GNt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:a4e},Symbol.toStringTag,{value:"Module"})),cd={top:15,left:100,right:50,bottom:50};function iK({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=kf(),o=N.useMemo(()=>s-cd.left-cd.right,[s]),a=N.useMemo(()=>i-cd.top-cd.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Ob(PB).domain(d)},[n,t.category]),l=N.useMemo(()=>e?ja([cd.left,o+cd.left]).domain([0,Mg(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?GT([cd.top,a+cd.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:E.jsxs("g",{children:[E.jsx("rect",{x:cd.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-cd.left},h),E.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?E.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E.jsx($ne,{xScale:l,yRange:c.range(),vertPosition:a+cd.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?E.jsx(a4e,{yScale:c,horizontalPosition:cd.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):E.jsx(Zc,{})}const YNt=Object.freeze(Object.defineProperty({__proto__:null,Bar:iK,default:iK},Symbol.toStringTag,{value:"Module"})),pi=Array.isArray;function Vc(e){return e!=null?pi(e)?e:[e]:[]}function KNt(e=0,t=1/0){return`${ove(e)} < row_number() && row_number() <= ${ove(t)}`}function ove(e){return e<0?`count() + ${e}`:e}class u4e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(KNt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Vc(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function pr(e){throw Error(e)}function Vl(e){return typeof e=="number"}function Ts(e){return typeof e=="function"}function VB(e,t){const n=Array(e);if(Ts(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let XNt=class extends u4e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){pr("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){pr("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){pr("Not implemented")}getter(t){pr("Not implemented")}objects(t){pr("Not implemented")}object(t){pr("Not implemented")}[Symbol.iterator](){pr("Not implemented")}print(t={}){Vl(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=VB(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},QNt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},JNt=function(e){return e&&Ts(e.get)?e:new QNt(e)};function ay(e){return e instanceof Date}function tl(e){return e===Object(e)}function Q8(e){return e instanceof RegExp}function yu(e){return typeof e=="string"}function ZNt(e,t){const n=r=>pr(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?ave(e.entries(),t):ay(e)?n("Date"):Q8(e)?n("RegExp"):yu(e)?n():pi(e)?ePt(e,t):Ts(e[Symbol.iterator])?tPt(e,t):tl(e)?ave(Object.entries(e),t):n()}function ave(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function ePt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function tPt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:nPt}=Object.prototype;function pp(e,t){return nPt.call(e,t)}function ed(e){return e?new uve({...e.data()},e.columnNames()):new uve}class uve{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return pp(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const li=void 0,rPt=Object.getPrototypeOf(Int8Array);function NN(e){return e instanceof rPt}function gw(e){return pi(e)||NN(e)}function Kh(e){return e!=null&&e===e}const ID=e=>gw(e)||yu(e),iPt={compact:e=>gw(e)?e.filter(t=>Kh(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>ID(e)?e.includes(t,n):!1,indexof:(e,t)=>ID(e)?e.indexOf(t):-1,join:(e,t)=>gw(e)?e.join(t):li,lastindexof:(e,t)=>ID(e)?e.lastIndexOf(t):-1,length:e=>ID(e)?e.length:0,pluck:(e,t)=>gw(e)?e.map(n=>Kh(n)?n[t]:li):li,reverse:e=>gw(e)?e.slice().reverse():yu(e)?e.split("").reverse().join(""):li,slice:(e,t,n)=>ID(e)?e.slice(t,n):li};function sPt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function pF(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Hp=e=>(e<10?"0":"")+e,oPt=e=>e<0?"-"+pF(-e,6):e>9999?"+"+pF(e,6):pF(e,4);function l4e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return oPt(e)+"-"+Hp(t+1)+"-"+Hp(n)+(!u||o?"T"+Hp(r)+":"+Hp(i)+":"+Hp(s)+"."+pF(o,3)+l:s?"T"+Hp(r)+":"+Hp(i)+":"+Hp(s)+l:i||r||!a?"T"+Hp(r)+":"+Hp(i)+l:"")}function c4e(e,t){return isNaN(e)?"Invalid Date":l4e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function HB(e,t){return isNaN(e)?"Invalid Date":l4e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const aPt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function uPt(e){return e.match(aPt)&&!isNaN(Date.parse(e))}function lPt(e,t=Date.parse){return uPt(e)?t(e):e}const f4e=6e4,d4e=864e5,h4e=6048e5,oo=new Date,uo=new Date,xo=e=>(oo.setTime(typeof e=="string"?lPt(e):e),oo);function cPt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function fPt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function dPt(e){uo.setTime(+e),uo.setHours(0,0,0,0),oo.setTime(+uo),oo.setMonth(0),oo.setDate(1);const t=(uo.getTimezoneOffset()-oo.getTimezoneOffset())*f4e;return Math.floor(1+(uo-oo-t)/d4e)}function hPt(e){uo.setTime(+e),uo.setUTCHours(0,0,0,0);const t=Date.UTC(uo.getUTCFullYear(),0,1);return Math.floor(1+(uo-t)/d4e)}function pPt(e,t){const n=t||0;uo.setTime(+e),uo.setDate(uo.getDate()-(uo.getDay()+7-n)%7),uo.setHours(0,0,0,0),oo.setTime(+e),oo.setMonth(0),oo.setDate(1),oo.setDate(1-(oo.getDay()+7-n)%7),oo.setHours(0,0,0,0);const r=(uo.getTimezoneOffset()-oo.getTimezoneOffset())*f4e;return Math.floor((1+(uo-oo)-r)/h4e)}function mPt(e,t){const n=t||0;return uo.setTime(+e),uo.setUTCDate(uo.getUTCDate()-(uo.getUTCDay()+7-n)%7),uo.setUTCHours(0,0,0,0),oo.setTime(+e),oo.setUTCMonth(0),oo.setUTCDate(1),oo.setUTCDate(1-(oo.getUTCDay()+7-n)%7),oo.setUTCHours(0,0,0,0),Math.floor((1+(uo-oo))/h4e)}const gPt={format_date:(e,t)=>c4e(xo(e),!t),format_utcdate:(e,t)=>HB(xo(e),!t),timestamp:e=>+xo(e),year:e=>xo(e).getFullYear(),quarter:e=>Math.floor(xo(e).getMonth()/3),month:e=>xo(e).getMonth(),date:e=>xo(e).getDate(),dayofweek:e=>xo(e).getDay(),hours:e=>xo(e).getHours(),minutes:e=>xo(e).getMinutes(),seconds:e=>xo(e).getSeconds(),milliseconds:e=>xo(e).getMilliseconds(),utcyear:e=>xo(e).getUTCFullYear(),utcquarter:e=>Math.floor(xo(e).getUTCMonth()/3),utcmonth:e=>xo(e).getUTCMonth(),utcdate:e=>xo(e).getUTCDate(),utcdayofweek:e=>xo(e).getUTCDay(),utchours:e=>xo(e).getUTCHours(),utcminutes:e=>xo(e).getUTCMinutes(),utcseconds:e=>xo(e).getUTCSeconds(),utcmilliseconds:e=>xo(e).getUTCMilliseconds(),datetime:cPt,dayofyear:dPt,week:pPt,utcdatetime:fPt,utcdayofyear:hPt,utcweek:mPt,now:Date.now};function Lne(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:ay(e)||ay(t)?+e==+t:Q8(e)&&Q8(t)?e+""==t+"":tl(e)&&tl(t)?yPt(e,t):!1}function yPt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return lve(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!lve(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!Lne(e[o],t[o]))return!1}return!0}function lve(e,t,n=Lne){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const vPt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let bPt=Math.random;function JT(){return bPt()}const xPt={random:JT,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Bne(e){return e instanceof Map}function wPt(e){return e instanceof Set}function mF(e){return Bne(e)||wPt(e)}function hH(e){return Array.from(e)}const _Pt={has:(e,t)=>mF(e)?e.has(t):e!=null?pp(e,t):!1,keys:e=>Bne(e)?hH(e.keys()):e!=null?Object.keys(e):[],values:e=>mF(e)?hH(e.values()):e!=null?Object.values(e):[],entries:e=>mF(e)?hH(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):li};function EPt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(pp(t,e))return t[e];return n!==void 0?n:e}function SPt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const CPt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},J2={bin:sPt,equal:Lne,recode:EPt,sequence:SPt,...iPt,...gPt,...vPt,...xPt,..._Pt,...CPt};function KR(e){return typeof e=="bigint"}function Gm(e){return e===void 0?e+"":KR(e)?e+"n":JSON.stringify(e)}function or(e,t=[],n=[]){return new TPt(e,Vc(t),Vc(n))}let TPt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Gm(n)}]`),...this.params.map(Gm)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const p4e=e=>or("any",e),m4e=()=>or("count"),g4e=e=>or("array_agg",e),y4e=e=>or("array_agg_distinct",e),v4e=(e,t)=>or("map_agg",[e,t]),b4e=(e,t)=>or("object_agg",[e,t]),x4e=(e,t)=>or("entries_agg",[e,t]);({...J2});function APt(e,t){e=mF(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function DPt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function IPt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function kPt(e,t,n,r){const i=r==="map"||r===!0?v4e:r==="entries"?x4e:r==="object"?b4e:pr('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=APt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:g4e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const RPt="ArrayPattern",NPt="ArrowFunctionExpression",PPt="FunctionExpression",pv="Identifier",ZT="Literal",w4e="MemberExpression",OPt="ObjectExpression",_4e="ObjectPattern",E4e="Property",PN="Column",FPt="Constant",MPt="Dictionary",$Pt="Function",LPt="Parameter",S4e="Op",cs=(e,t)=>{const n=BPt[e.type];return n?n(e,t):pr(`Unsupported expression construct: ${e.type}`)},pH=(e,t)=>"("+cs(e.left,t)+" "+e.operator+" "+cs(e.right,t)+")",mH=(e,t)=>"("+Jp(e.params,t)+")=>"+cs(e.body,t),cve=(e,t)=>cs(e.callee,t)+"("+Jp(e.arguments,t)+")",Jp=(e,t,n=",")=>e.map(r=>cs(r,t)).join(n),C4e=e=>e.computed?`[${Gm(e.name)}]`:`.${e.name}`,fve=(e,t,n)=>{const r=e.table||"";return`data${r}${C4e(e)}.${n}(${t.index}${r})`},BPt={Constant:e=>e.raw,Column:(e,t)=>fve(e,t,"get"),Dictionary:(e,t)=>fve(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${C4e(e)}`,Op:(e,t)=>`op(${Gm(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+cs(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=cs(e.object,t),i=cs(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:cve,NewExpression:(e,t)=>"new "+cve(e,t),ArrayExpression:(e,t)=>"["+Jp(e.elements,t)+"]",AssignmentExpression:pH,BinaryExpression:pH,LogicalExpression:pH,UnaryExpression:(e,t)=>"("+e.operator+cs(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+cs(e.test,t)+"?"+cs(e.consequent,t)+":"+cs(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Jp(e.properties,t)+"})",Property:(e,t)=>{const n=cs(e.key,t);return(e.computed?`[${n}]`:n)+":"+cs(e.value,t)},ArrowFunctionExpression:mH,FunctionExpression:mH,FunctionDeclaration:mH,ArrayPattern:(e,t)=>"["+Jp(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Jp(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Jp(e.declarations,t,","),VariableDeclarator:(e,t)=>cs(e.id,t)+"="+cs(e.init,t),SpreadElement:(e,t)=>"..."+cs(e.argument,t),BlockStatement:(e,t)=>"{"+Jp(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>cs(e.expression,t),IfStatement:(e,t)=>"if ("+cs(e.test,t)+")"+cs(e.consequent,t)+(e.alternate?" else "+cs(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+cs(e.discriminant,t)+") {"+Jp(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+cs(e.test,t):"default")+": "+Jp(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+cs(e.argument,t),Program:(e,t)=>cs(e.body[0],t)};function J8(e,t={index:"row"}){return cs(e,t)}function jPt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function AC(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:ay(e)?+e:pi(e)||NN(e)?`[${e.map(AC)}]`:Q8(e)?e+"":UPt(e)}function UPt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${AC(e[r])}`;return t+="}",t}function Z8(e,t){const n=e.length;return n===1?(r,i)=>AC(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=AC(a)}return s}}function zPt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=AC(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=AC(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function sg(){}function VPt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function ea(e){return e.init=e.init||sg,e.add=e.add||sg,e.rem=e.rem||sg,e}function dve(e,t){return e.product_v=!1,e.product=t}const T4e={count:{create:()=>ea({value:e=>e.count}),param:[]},array_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>ea({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:li}),param:[1]},valid:{create:()=>ea({value:e=>e.valid}),param:[1]},invalid:{create:()=>ea({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=zPt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>ea({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>ea({value:e=>{let t=li,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:li,add:(e,t)=>KR(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>dve(e,1),value:e=>e.valid?e.product_v?dve(e,VPt(e.list.values())):e.product:void 0,add:(e,t)=>KR(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:li,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>ea({value:e=>e.valid?e.mean:li}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):li,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>ea({value:e=>e.valid>1?e.dev/e.valid:li}),param:[1],req:["variance"]},stdev:{create:()=>ea({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):li}),param:[1],req:["variance"]},stdevp:{create:()=>ea({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):li}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=li,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===li)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=li,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===li)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>ea({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>ea({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):li,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>ea({value:e=>e.valid>1?e.cov/e.valid:li}),param:[2],req:["covariance"]},corr:{create:()=>ea({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):li}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>ea({value:i=>jPt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},hve={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},pve={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},A4e={row_number:{create(){return{init:sg,value:e=>e.index+1}},param:[]},rank:hve,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=hve.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:pve,ntile:{create(e){e=+e,e>0||pr("ntile num must be greater than zero.");const{init:t,value:n}=pve.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=li){return e=+e||1,{init:sg,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=li){return e=+e||1,{init:sg,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:sg,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:sg,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||pr("nth_value nth must be greater than zero."),{init:sg,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):li}}},param:[1,1]},fill_down:{create(e=li){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Kh(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=li){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=HPt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function HPt(e,t,n){for(const r=e.size;n<r;++n)if(Kh(e.value(n,t)))return n;return-1}function jne(e){return pp(T4e,e)}function Une(e){return pp(A4e,e)}function D4e(e){return pp(J2,e)||e==="row_object"}function I4e(e){return jne(e)&&T4e[e]}function k4e(e){return Une(e)&&A4e[e]}function kD(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const zne={escape:(e,t,n)=>kD(e,t,n),expr:(e,t)=>kD(`(row,data,op)=>${e}`,J2,t),expr2:(e,t)=>kD(`(row0,data0,row,data)=>${e}`,J2,t),join:(e,t)=>kD(`(row1,data1,row2,data2)=>${e}`,J2,t),param:(e,t)=>kD(e,J2,t)},qPt={"==":1,"!=":1,"===":1,"!==":1};function R4e(e,t,n=0,r,i){if(e.type=PN,e.name=t,e.table=n,i&&r&&Ts(r.keyFor)){const s=qPt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===ZT&&WPt(i,e,s,r.keyFor(s.value))}return e}function WPt(e,t,n,r){return r<0?(e.type=ZT,e.value=!1,e.raw="false"):(t.type=MPt,n.value=r,n.raw=r+""),!0}function qB(e){return pi(e)?e:Bne(e)?e.entries():e?Object.entries(e):[]}const N4e="row_object";function P4e(e,t){e.type=OPt;const n=e.properties=[];for(const r of qB(t)){const[i,s]=pi(r)?r:[r,r];n.push({type:E4e,key:{type:ZT,raw:Gm(s)},value:R4e({computed:!0},i)})}return e}function O4e(e){return J8(P4e({},e))}function F4e(e){return zne.expr(O4e(e))}const GPt=new TextDecoder("utf-8"),sK=e=>GPt.decode(e),YPt=new TextEncoder,Vne=e=>YPt.encode(e),KPt=e=>typeof e=="boolean",pc=e=>typeof e=="function",Mb=e=>e!=null&&Object(e)===e,WB=e=>Mb(e)&&pc(e.then),Hne=e=>Mb(e)&&pc(e[Symbol.iterator]),GB=e=>Mb(e)&&pc(e[Symbol.asyncIterator]),XPt=e=>Mb(e)&&"done"in e&&"value"in e,M4e=e=>"_getDOMStream"in e&&"_getNodeStream"in e,QPt=e=>Mb(e)&&pc(e.abort)&&pc(e.getWriter)&&!M4e(e),JPt=e=>Mb(e)&&pc(e.end)&&pc(e.write)&&KPt(e.writable)&&!M4e(e),ZPt=e=>Mb(e)&&pc(e.clear)&&pc(e.bytes)&&pc(e.position)&&pc(e.setPosition)&&pc(e.capacity)&&pc(e.getBufferIdentifier)&&pc(e.createLong),qne=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function eOt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function e5(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Ym(e,t){const n=eOt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?e5(o,s,a):o=s;break}e5(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Ca(e,t){let n=XPt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Vne(n)),n instanceof ArrayBuffer?new e(n):n instanceof qne?new e(n):ZPt(n)?Ca(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const RD=e=>Ca(Int32Array,e),Vi=e=>Ca(Uint8Array,e),oK=e=>(e.next(),e);function*tOt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof qne?n(t):Hne(t)?t:n(t);return yield*oK(function*(i){let s=null;do s=i.next(yield Ca(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const nOt=e=>tOt(Uint8Array,e);function $4e(e,t){return lw(this,arguments,function*(){if(WB(t))return yield Gr(yield Gr(yield*tz(uk($4e(e,yield Gr(t))))));const r=function(o){return lw(this,arguments,function*(){yield yield Gr(yield Gr(o))})},i=function(o){return lw(this,arguments,function*(){yield Gr(yield*tz(uk(oK(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof qne?r(t):Hne(t)?i(t):GB(t)?t:r(t);return yield Gr(yield*tz(uk(oK(function(o){return lw(this,arguments,function*(){let a=null;do a=yield Gr(o.next(yield yield Gr(Ca(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Gr(new e)})}const rOt=e=>$4e(Uint8Array,e);function L4e(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function iOt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const mve={fromIterable(e){return R4(sOt(e))},fromAsyncIterable(e){return R4(oOt(e))},fromDOMStream(e){return R4(aOt(e))},fromNodeStream(e){return R4(lOt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},R4=e=>(e.next(),e);function*sOt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Ym(r,o)[0]:([i,r,a]=Ym(r,o),i)}({cmd:s,size:o}=yield null);const l=nOt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function oOt(e){return lw(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Ym(i,a)[0]:([s,i,u]=Ym(i,a),s)}({cmd:o,size:a}=yield yield Gr(null));const c=rOt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gr(c.next()):yield Gr(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Gr(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Gr(c.return(new Uint8Array(0))))}return yield Gr(null)})}function aOt(e){return lw(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Ym(i,a)[0]:([s,i,u]=Ym(i,a),s)}({cmd:o,size:a}=yield yield Gr(null));const c=new uOt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gr(c.read()):yield Gr(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Vi(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Gr(c.cancel(f)))}finally{r===!1?yield Gr(c.cancel()):e.locked&&c.releaseLock()}return yield Gr(null)})}class uOt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return lg(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return lg(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Vi(n)),n})}}const gH=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function lOt(e){return lw(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Ym(l,a)[0]:([c,l,u]=Ym(l,a),c)}if({cmd:o,size:a}=yield yield Gr(null),e.isTTY)return yield yield Gr(new Uint8Array(0)),yield Gr(null);try{n[0]=gH(e,"end"),n[1]=gH(e,"error");do{if(n[2]=gH(e,"readable"),[r,s]=yield Gr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Vi(e.read(a-u)),c.byteLength<a-u&&(c=Vi(e.read()))):c=Vi(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Gr(f()));while(a<u)}while(!i)}finally{yield Gr(d(n,r==="error"?s:null))}return yield Gr(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Il;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Il||(Il={}));var Hc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Hc||(Hc={}));var lu;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(lu||(lu={}));var Km;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Km||(Km={}));var Rn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Rn||(Rn={}));var Xm;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Xm||(Xm={}));var Da;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Da||(Da={}));var ge;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(ge||(ge={}));var Z0;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Z0||(Z0={}));const cOt=void 0;function i_(e){if(e===null)return"null";if(e===cOt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>i_(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const fOt=Symbol.for("isArrowBigNum");function Ip(e,...t){return t.length===0?Object.setPrototypeOf(Ca(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Ip.prototype[fOt]=!0;Ip.prototype.toJSON=function(){return`"${QR(this)}"`};Ip.prototype.valueOf=function(){return B4e(this)};Ip.prototype.toString=function(){return QR(this)};Ip.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return B4e(this);case"string":return QR(this);case"default":return dOt(this)}return QR(this)};function AS(...e){return Ip.apply(this,e)}function DS(...e){return Ip.apply(this,e)}function XR(...e){return Ip.apply(this,e)}Object.setPrototypeOf(AS.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(DS.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(XR.prototype,Object.create(Uint32Array.prototype));Object.assign(AS.prototype,Ip.prototype,{constructor:AS,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(DS.prototype,Ip.prototype,{constructor:DS,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(XR.prototype,Ip.prototype,{constructor:XR,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function B4e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const QR=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return yH(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return yH(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${yH(t)}`},dOt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:QR(e);function yH(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class Wne{static new(t,n){switch(n){case!0:return new AS(t);case!1:return new DS(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new AS(t)}return t.byteLength===16?new XR(t):new DS(t)}static signed(t){return new AS(t)}static unsigned(t){return new DS(t)}static decimal(t){return new XR(t)}constructor(t,n){return Wne.new(t,n)}}function mp(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var j4e,U4e,z4e,V4e,H4e,q4e,W4e,G4e,Y4e,K4e,X4e,Q4e,J4e,Z4e,e6e,t6e,n6e,r6e,i6e,s6e;let br=class aK{static isNull(t){return(t==null?void 0:t.typeId)===ge.Null}static isInt(t){return(t==null?void 0:t.typeId)===ge.Int}static isFloat(t){return(t==null?void 0:t.typeId)===ge.Float}static isBinary(t){return(t==null?void 0:t.typeId)===ge.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===ge.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===ge.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===ge.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===ge.Date}static isTime(t){return(t==null?void 0:t.typeId)===ge.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===ge.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===ge.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===ge.Duration}static isList(t){return(t==null?void 0:t.typeId)===ge.List}static isStruct(t){return(t==null?void 0:t.typeId)===ge.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===ge.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===ge.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===ge.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===ge.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===ge.Dictionary}static isDenseUnion(t){return aK.isUnion(t)&&t.mode===Hc.Dense}static isSparseUnion(t){return aK.isUnion(t)&&t.mode===Hc.Sparse}get typeId(){return ge.NONE}};j4e=Symbol.toStringTag;br[j4e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(br.prototype);let uy=class extends br{toString(){return"Null"}get typeId(){return ge.Null}};U4e=Symbol.toStringTag;uy[U4e]=(e=>e[Symbol.toStringTag]="Null")(uy.prototype);class Hl extends br{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return ge.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}z4e=Symbol.toStringTag;Hl[z4e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Hl.prototype);class Gne extends Hl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Yne extends Hl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class jv extends Hl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class Kne extends Hl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class Xne extends Hl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Qne extends Hl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class Jne extends Hl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class Zne extends Hl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(Gne.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Yne.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(jv.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Kne.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(Xne.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Qne.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Jne.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(Zne.prototype,"ArrayType",{value:BigUint64Array});class Uv extends br{constructor(t){super(),this.precision=t}get typeId(){return ge.Float}get ArrayType(){switch(this.precision){case lu.HALF:return Uint16Array;case lu.SINGLE:return Float32Array;case lu.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}V4e=Symbol.toStringTag;Uv[V4e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Uv.prototype);class o6e extends Uv{constructor(){super(lu.HALF)}}class ere extends Uv{constructor(){super(lu.SINGLE)}}class tre extends Uv{constructor(){super(lu.DOUBLE)}}Object.defineProperty(o6e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ere.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(tre.prototype,"ArrayType",{value:Float64Array});let JR=class extends br{constructor(){super()}get typeId(){return ge.Binary}toString(){return"Binary"}};H4e=Symbol.toStringTag;JR[H4e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(JR.prototype);let DC=class extends br{constructor(){super()}get typeId(){return ge.Utf8}toString(){return"Utf8"}};q4e=Symbol.toStringTag;DC[q4e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(DC.prototype);let ZR=class extends br{constructor(){super()}get typeId(){return ge.Bool}toString(){return"Bool"}};W4e=Symbol.toStringTag;ZR[W4e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(ZR.prototype);let t5=class extends br{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return ge.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};G4e=Symbol.toStringTag;t5[G4e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(t5.prototype);class IC extends br{constructor(t){super(),this.unit=t}get typeId(){return ge.Date}toString(){return`Date${(this.unit+1)*32}<${Km[this.unit]}>`}}Y4e=Symbol.toStringTag;IC[Y4e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(IC.prototype);class hOt extends IC{constructor(){super(Km.DAY)}}class pOt extends IC{constructor(){super(Km.MILLISECOND)}}class ly extends br{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return ge.Time}toString(){return`Time${this.bitWidth}<${Rn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}K4e=Symbol.toStringTag;ly[K4e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(ly.prototype);class mOt extends ly{constructor(){super(Rn.SECOND,32)}}class gOt extends ly{constructor(){super(Rn.MILLISECOND,32)}}class yOt extends ly{constructor(){super(Rn.MICROSECOND,64)}}class vOt extends ly{constructor(){super(Rn.NANOSECOND,64)}}class n5 extends br{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return ge.Timestamp}toString(){return`Timestamp<${Rn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}X4e=Symbol.toStringTag;n5[X4e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(n5.prototype);class kC extends br{constructor(t){super(),this.unit=t}get typeId(){return ge.Interval}toString(){return`Interval<${Xm[this.unit]}>`}}Q4e=Symbol.toStringTag;kC[Q4e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(kC.prototype);class bOt extends kC{constructor(){super(Xm.DAY_TIME)}}class xOt extends kC{constructor(){super(Xm.YEAR_MONTH)}}let r5=class extends br{constructor(t){super(),this.unit=t}get typeId(){return ge.Duration}toString(){return`Duration<${Rn[this.unit]}>`}};J4e=Symbol.toStringTag;r5[J4e]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(r5.prototype);let RC=class extends br{constructor(t){super(),this.children=[t]}get typeId(){return ge.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Z4e=Symbol.toStringTag;RC[Z4e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(RC.prototype);class Vu extends br{constructor(t){super(),this.children=t}get typeId(){return ge.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}e6e=Symbol.toStringTag;Vu[e6e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Vu.prototype);class e3 extends br{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return ge.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}t6e=Symbol.toStringTag;e3[t6e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(e3.prototype);let i5=class extends br{constructor(t){super(),this.byteWidth=t}get typeId(){return ge.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};n6e=Symbol.toStringTag;i5[n6e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(i5.prototype);let NC=class extends br{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return ge.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};r6e=Symbol.toStringTag;NC[r6e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(NC.prototype);class t3 extends br{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return ge.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}i6e=Symbol.toStringTag;t3[i6e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(t3.prototype);const wOt=(e=>()=>++e)(-1);class zv extends br{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?wOt():mp(r)}get typeId(){return ge.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}s6e=Symbol.toStringTag;zv[s6e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(zv.prototype);function tm(e){const t=e;switch(e.typeId){case ge.Decimal:return e.bitWidth/32;case ge.Timestamp:return 2;case ge.Date:return 1+t.unit;case ge.Interval:return 1+t.unit;case ge.FixedSizeList:return t.listSize;case ge.FixedSizeBinary:return t.byteWidth;default:return 1}}class xr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return _Ot(this,t,n)}getVisitFnByTypeId(t,n=!0){return S2(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function _Ot(e,t,n=!0){return typeof t=="number"?S2(e,t,n):typeof t=="string"&&t in ge?S2(e,ge[t],n):t&&t instanceof br?S2(e,gve(t),n):t!=null&&t.type&&t.type instanceof br?S2(e,gve(t.type),n):S2(e,ge.NONE,n)}function S2(e,t,n=!0){let r=null;switch(t){case ge.Null:r=e.visitNull;break;case ge.Bool:r=e.visitBool;break;case ge.Int:r=e.visitInt;break;case ge.Int8:r=e.visitInt8||e.visitInt;break;case ge.Int16:r=e.visitInt16||e.visitInt;break;case ge.Int32:r=e.visitInt32||e.visitInt;break;case ge.Int64:r=e.visitInt64||e.visitInt;break;case ge.Uint8:r=e.visitUint8||e.visitInt;break;case ge.Uint16:r=e.visitUint16||e.visitInt;break;case ge.Uint32:r=e.visitUint32||e.visitInt;break;case ge.Uint64:r=e.visitUint64||e.visitInt;break;case ge.Float:r=e.visitFloat;break;case ge.Float16:r=e.visitFloat16||e.visitFloat;break;case ge.Float32:r=e.visitFloat32||e.visitFloat;break;case ge.Float64:r=e.visitFloat64||e.visitFloat;break;case ge.Utf8:r=e.visitUtf8;break;case ge.Binary:r=e.visitBinary;break;case ge.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case ge.Date:r=e.visitDate;break;case ge.DateDay:r=e.visitDateDay||e.visitDate;break;case ge.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case ge.Timestamp:r=e.visitTimestamp;break;case ge.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case ge.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case ge.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case ge.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case ge.Time:r=e.visitTime;break;case ge.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case ge.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case ge.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case ge.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case ge.Decimal:r=e.visitDecimal;break;case ge.List:r=e.visitList;break;case ge.Struct:r=e.visitStruct;break;case ge.Union:r=e.visitUnion;break;case ge.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case ge.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case ge.Dictionary:r=e.visitDictionary;break;case ge.Interval:r=e.visitInterval;break;case ge.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case ge.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case ge.Duration:r=e.visitDuration;break;case ge.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case ge.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case ge.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case ge.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case ge.FixedSizeList:r=e.visitFixedSizeList;break;case ge.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${ge[t]}'`)}function gve(e){switch(e.typeId){case ge.Null:return ge.Null;case ge.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?ge.Int8:ge.Uint8;case 16:return n?ge.Int16:ge.Uint16;case 32:return n?ge.Int32:ge.Uint32;case 64:return n?ge.Int64:ge.Uint64}return ge.Int}case ge.Float:switch(e.precision){case lu.HALF:return ge.Float16;case lu.SINGLE:return ge.Float32;case lu.DOUBLE:return ge.Float64}return ge.Float;case ge.Binary:return ge.Binary;case ge.Utf8:return ge.Utf8;case ge.Bool:return ge.Bool;case ge.Decimal:return ge.Decimal;case ge.Time:switch(e.unit){case Rn.SECOND:return ge.TimeSecond;case Rn.MILLISECOND:return ge.TimeMillisecond;case Rn.MICROSECOND:return ge.TimeMicrosecond;case Rn.NANOSECOND:return ge.TimeNanosecond}return ge.Time;case ge.Timestamp:switch(e.unit){case Rn.SECOND:return ge.TimestampSecond;case Rn.MILLISECOND:return ge.TimestampMillisecond;case Rn.MICROSECOND:return ge.TimestampMicrosecond;case Rn.NANOSECOND:return ge.TimestampNanosecond}return ge.Timestamp;case ge.Date:switch(e.unit){case Km.DAY:return ge.DateDay;case Km.MILLISECOND:return ge.DateMillisecond}return ge.Date;case ge.Interval:switch(e.unit){case Xm.DAY_TIME:return ge.IntervalDayTime;case Xm.YEAR_MONTH:return ge.IntervalYearMonth}return ge.Interval;case ge.Duration:switch(e.unit){case Rn.SECOND:return ge.DurationSecond;case Rn.MILLISECOND:return ge.DurationMillisecond;case Rn.MICROSECOND:return ge.DurationMicrosecond;case Rn.NANOSECOND:return ge.DurationNanosecond}return ge.Duration;case ge.Map:return ge.Map;case ge.List:return ge.List;case ge.Struct:return ge.Struct;case ge.Union:switch(e.mode){case Hc.Dense:return ge.DenseUnion;case Hc.Sparse:return ge.SparseUnion}return ge.Union;case ge.FixedSizeBinary:return ge.FixedSizeBinary;case ge.FixedSizeList:return ge.FixedSizeList;case ge.Dictionary:return ge.Dictionary}throw new Error(`Unrecognized type '${ge[e.typeId]}'`)}xr.prototype.visitInt8=null;xr.prototype.visitInt16=null;xr.prototype.visitInt32=null;xr.prototype.visitInt64=null;xr.prototype.visitUint8=null;xr.prototype.visitUint16=null;xr.prototype.visitUint32=null;xr.prototype.visitUint64=null;xr.prototype.visitFloat16=null;xr.prototype.visitFloat32=null;xr.prototype.visitFloat64=null;xr.prototype.visitDateDay=null;xr.prototype.visitDateMillisecond=null;xr.prototype.visitTimestampSecond=null;xr.prototype.visitTimestampMillisecond=null;xr.prototype.visitTimestampMicrosecond=null;xr.prototype.visitTimestampNanosecond=null;xr.prototype.visitTimeSecond=null;xr.prototype.visitTimeMillisecond=null;xr.prototype.visitTimeMicrosecond=null;xr.prototype.visitTimeNanosecond=null;xr.prototype.visitDenseUnion=null;xr.prototype.visitSparseUnion=null;xr.prototype.visitIntervalDayTime=null;xr.prototype.visitIntervalYearMonth=null;xr.prototype.visitDuration=null;xr.prototype.visitDurationSecond=null;xr.prototype.visitDurationMillisecond=null;xr.prototype.visitDurationMicrosecond=null;xr.prototype.visitDurationNanosecond=null;const a6e=new Float64Array(1),t2=new Uint32Array(a6e.buffer);function u6e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function l6e(e){if(e!==e)return 32256;a6e[0]=e;const t=(t2[1]&2147483648)>>16&65535;let n=t2[1]&2146435072,r=0;return n>=1089470464?t2[0]>0?n=31744:(n=(n&2080374784)>>16,r=(t2[1]&1048575)>>10):n<=1056964608?(r=1048576+(t2[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(t2[1]&1048575)+512>>10),t|n|r&65535}class $n extends xr{}function Vn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const EOt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},nre=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},SOt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},COt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},c6e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},TOt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},ky=({values:e},t,n)=>{e[t]=n},rre=({values:e},t,n)=>{e[t]=n},f6e=({values:e},t,n)=>{e[t]=l6e(n)},AOt=(e,t,n)=>{switch(e.type.precision){case lu.HALF:return f6e(e,t,n);case lu.SINGLE:case lu.DOUBLE:return rre(e,t,n)}},ire=({values:e},t,n)=>{EOt(e,t,n.valueOf())},sre=({values:e},t,n)=>{nre(e,t*2,n.valueOf())},d6e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},DOt=({values:e,valueOffsets:t},n,r)=>c6e(e,t,n,r),IOt=({values:e,valueOffsets:t},n,r)=>{c6e(e,t,n,Vne(r))},h6e=(e,t,n)=>{e.type.unit===Km.DAY?ire(e,t,n):sre(e,t,n)},ore=({values:e},t,n)=>nre(e,t*2,n/1e3),are=({values:e},t,n)=>nre(e,t*2,n),ure=({values:e},t,n)=>SOt(e,t*2,n),lre=({values:e},t,n)=>COt(e,t*2,n),p6e=(e,t,n)=>{switch(e.type.unit){case Rn.SECOND:return ore(e,t,n);case Rn.MILLISECOND:return are(e,t,n);case Rn.MICROSECOND:return ure(e,t,n);case Rn.NANOSECOND:return lre(e,t,n)}},cre=({values:e},t,n)=>{e[t]=n},fre=({values:e},t,n)=>{e[t]=n},dre=({values:e},t,n)=>{e[t]=n},hre=({values:e},t,n)=>{e[t]=n},m6e=(e,t,n)=>{switch(e.type.unit){case Rn.SECOND:return cre(e,t,n);case Rn.MILLISECOND:return fre(e,t,n);case Rn.MICROSECOND:return dre(e,t,n);case Rn.NANOSECOND:return hre(e,t,n)}},g6e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},kOt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Vd.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},ROt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Vd.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},NOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),POt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),OOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),FOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),MOt=(e,t,n)=>{const r=e.type.children.map(s=>Vd.getVisitFn(s.type)),i=n instanceof Map?OOt(t,n):n instanceof mi?POt(t,n):Array.isArray(n)?NOt(t,n):FOt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},$Ot=(e,t,n)=>{e.type.mode===Hc.Dense?y6e(e,t,n):v6e(e,t,n)},y6e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Vd.visit(i,e.valueOffsets[t],n)},v6e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Vd.visit(i,t,n)},LOt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},b6e=(e,t,n)=>{e.type.unit===Xm.DAY_TIME?pre(e,t,n):mre(e,t,n)},pre=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},mre=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},gre=({values:e},t,n)=>{e[t]=n},yre=({values:e},t,n)=>{e[t]=n},vre=({values:e},t,n)=>{e[t]=n},bre=({values:e},t,n)=>{e[t]=n},x6e=(e,t,n)=>{switch(e.type.unit){case Rn.SECOND:return gre(e,t,n);case Rn.MILLISECOND:return yre(e,t,n);case Rn.MICROSECOND:return vre(e,t,n);case Rn.NANOSECOND:return bre(e,t,n)}},BOt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Vd.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};$n.prototype.visitBool=Vn(TOt);$n.prototype.visitInt=Vn(ky);$n.prototype.visitInt8=Vn(ky);$n.prototype.visitInt16=Vn(ky);$n.prototype.visitInt32=Vn(ky);$n.prototype.visitInt64=Vn(ky);$n.prototype.visitUint8=Vn(ky);$n.prototype.visitUint16=Vn(ky);$n.prototype.visitUint32=Vn(ky);$n.prototype.visitUint64=Vn(ky);$n.prototype.visitFloat=Vn(AOt);$n.prototype.visitFloat16=Vn(f6e);$n.prototype.visitFloat32=Vn(rre);$n.prototype.visitFloat64=Vn(rre);$n.prototype.visitUtf8=Vn(IOt);$n.prototype.visitBinary=Vn(DOt);$n.prototype.visitFixedSizeBinary=Vn(d6e);$n.prototype.visitDate=Vn(h6e);$n.prototype.visitDateDay=Vn(ire);$n.prototype.visitDateMillisecond=Vn(sre);$n.prototype.visitTimestamp=Vn(p6e);$n.prototype.visitTimestampSecond=Vn(ore);$n.prototype.visitTimestampMillisecond=Vn(are);$n.prototype.visitTimestampMicrosecond=Vn(ure);$n.prototype.visitTimestampNanosecond=Vn(lre);$n.prototype.visitTime=Vn(m6e);$n.prototype.visitTimeSecond=Vn(cre);$n.prototype.visitTimeMillisecond=Vn(fre);$n.prototype.visitTimeMicrosecond=Vn(dre);$n.prototype.visitTimeNanosecond=Vn(hre);$n.prototype.visitDecimal=Vn(g6e);$n.prototype.visitList=Vn(kOt);$n.prototype.visitStruct=Vn(MOt);$n.prototype.visitUnion=Vn($Ot);$n.prototype.visitDenseUnion=Vn(y6e);$n.prototype.visitSparseUnion=Vn(v6e);$n.prototype.visitDictionary=Vn(LOt);$n.prototype.visitInterval=Vn(b6e);$n.prototype.visitIntervalDayTime=Vn(pre);$n.prototype.visitIntervalYearMonth=Vn(mre);$n.prototype.visitDuration=Vn(x6e);$n.prototype.visitDurationSecond=Vn(gre);$n.prototype.visitDurationMillisecond=Vn(yre);$n.prototype.visitDurationMicrosecond=Vn(vre);$n.prototype.visitDurationNanosecond=Vn(bre);$n.prototype.visitFixedSizeList=Vn(BOt);$n.prototype.visitMap=Vn(ROt);const Vd=new $n,Ph=Symbol.for("parent"),IS=Symbol.for("rowIndex");class xre{constructor(t,n){return this[Ph]=t,this[IS]=n,new Proxy(this,new UOt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[IS],n=this[Ph],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=qc.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${i_(t)}: ${i_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new jOt(this[Ph],this[IS])}}class jOt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,qc.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(xre.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ph]:{writable:!0,enumerable:!1,configurable:!1,value:null},[IS]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class UOt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ph].type.children.map(n=>n.name)}has(t,n){return t[Ph].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Ph].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Ph].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=qc.visit(t[Ph].children[r],t[IS]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Ph].type.children.findIndex(s=>s.name===n);return i!==-1?(Vd.visit(t[Ph].children[i],t[IS],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Nn extends xr{}function Ln(e){return(t,n)=>t.getValid(n)?e(t,n):null}const zOt=(e,t)=>864e5*e[t],wre=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),VOt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,HOt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,w6e=e=>new Date(e),qOt=(e,t)=>w6e(zOt(e,t)),WOt=(e,t)=>w6e(wre(e,t)),GOt=(e,t)=>null,_6e=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},YOt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},E6e=({values:e},t)=>qOt(e,t),S6e=({values:e},t)=>WOt(e,t*2),$b=({stride:e,values:t},n)=>t[e*n],KOt=({stride:e,values:t},n)=>u6e(t[e*n]),C6e=({values:e},t)=>e[t],XOt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),QOt=({values:e,valueOffsets:t},n)=>_6e(e,t,n),JOt=({values:e,valueOffsets:t},n)=>{const r=_6e(e,t,n);return r!==null?sK(r):null},ZOt=({values:e},t)=>e[t],e4t=({type:e,values:t},n)=>e.precision!==lu.HALF?t[n]:u6e(t[n]),t4t=(e,t)=>e.type.unit===Km.DAY?E6e(e,t):S6e(e,t),T6e=({values:e},t)=>1e3*wre(e,t*2),A6e=({values:e},t)=>wre(e,t*2),D6e=({values:e},t)=>VOt(e,t*2),I6e=({values:e},t)=>HOt(e,t*2),n4t=(e,t)=>{switch(e.type.unit){case Rn.SECOND:return T6e(e,t);case Rn.MILLISECOND:return A6e(e,t);case Rn.MICROSECOND:return D6e(e,t);case Rn.NANOSECOND:return I6e(e,t)}},k6e=({values:e},t)=>e[t],R6e=({values:e},t)=>e[t],N6e=({values:e},t)=>e[t],P6e=({values:e},t)=>e[t],r4t=(e,t)=>{switch(e.type.unit){case Rn.SECOND:return k6e(e,t);case Rn.MILLISECOND:return R6e(e,t);case Rn.MICROSECOND:return N6e(e,t);case Rn.NANOSECOND:return P6e(e,t)}},i4t=({values:e,stride:t},n)=>Wne.decimal(e.subarray(t*n,t*(n+1))),s4t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new mi([u])},o4t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new YB(o.slice(i,s-i))},a4t=(e,t)=>new xre(e,t),u4t=(e,t)=>e.type.mode===Hc.Dense?O6e(e,t):F6e(e,t),O6e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return qc.visit(r,e.valueOffsets[t])},F6e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return qc.visit(r,t)},l4t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},c4t=(e,t)=>e.type.unit===Xm.DAY_TIME?M6e(e,t):$6e(e,t),M6e=({values:e},t)=>e.subarray(2*t,2*(t+1)),$6e=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},L6e=({values:e},t)=>e[t],B6e=({values:e},t)=>e[t],j6e=({values:e},t)=>e[t],U6e=({values:e},t)=>e[t],f4t=(e,t)=>{switch(e.type.unit){case Rn.SECOND:return L6e(e,t);case Rn.MILLISECOND:return B6e(e,t);case Rn.MICROSECOND:return j6e(e,t);case Rn.NANOSECOND:return U6e(e,t)}},d4t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new mi([s])};Nn.prototype.visitNull=Ln(GOt);Nn.prototype.visitBool=Ln(YOt);Nn.prototype.visitInt=Ln(ZOt);Nn.prototype.visitInt8=Ln($b);Nn.prototype.visitInt16=Ln($b);Nn.prototype.visitInt32=Ln($b);Nn.prototype.visitInt64=Ln(C6e);Nn.prototype.visitUint8=Ln($b);Nn.prototype.visitUint16=Ln($b);Nn.prototype.visitUint32=Ln($b);Nn.prototype.visitUint64=Ln(C6e);Nn.prototype.visitFloat=Ln(e4t);Nn.prototype.visitFloat16=Ln(KOt);Nn.prototype.visitFloat32=Ln($b);Nn.prototype.visitFloat64=Ln($b);Nn.prototype.visitUtf8=Ln(JOt);Nn.prototype.visitBinary=Ln(QOt);Nn.prototype.visitFixedSizeBinary=Ln(XOt);Nn.prototype.visitDate=Ln(t4t);Nn.prototype.visitDateDay=Ln(E6e);Nn.prototype.visitDateMillisecond=Ln(S6e);Nn.prototype.visitTimestamp=Ln(n4t);Nn.prototype.visitTimestampSecond=Ln(T6e);Nn.prototype.visitTimestampMillisecond=Ln(A6e);Nn.prototype.visitTimestampMicrosecond=Ln(D6e);Nn.prototype.visitTimestampNanosecond=Ln(I6e);Nn.prototype.visitTime=Ln(r4t);Nn.prototype.visitTimeSecond=Ln(k6e);Nn.prototype.visitTimeMillisecond=Ln(R6e);Nn.prototype.visitTimeMicrosecond=Ln(N6e);Nn.prototype.visitTimeNanosecond=Ln(P6e);Nn.prototype.visitDecimal=Ln(i4t);Nn.prototype.visitList=Ln(s4t);Nn.prototype.visitStruct=Ln(a4t);Nn.prototype.visitUnion=Ln(u4t);Nn.prototype.visitDenseUnion=Ln(O6e);Nn.prototype.visitSparseUnion=Ln(F6e);Nn.prototype.visitDictionary=Ln(l4t);Nn.prototype.visitInterval=Ln(c4t);Nn.prototype.visitIntervalDayTime=Ln(M6e);Nn.prototype.visitIntervalYearMonth=Ln($6e);Nn.prototype.visitDuration=Ln(f4t);Nn.prototype.visitDurationSecond=Ln(L6e);Nn.prototype.visitDurationMillisecond=Ln(B6e);Nn.prototype.visitDurationMicrosecond=Ln(j6e);Nn.prototype.visitDurationNanosecond=Ln(U6e);Nn.prototype.visitFixedSizeList=Ln(d4t);Nn.prototype.visitMap=Ln(o4t);const qc=new Nn,Vh=Symbol.for("keys"),kS=Symbol.for("vals");class YB{constructor(t){return this[Vh]=new mi([t.children[0]]).memoize(),this[kS]=t.children[1],new Proxy(this,new p4t)}[Symbol.iterator](){return new h4t(this[Vh],this[kS])}get size(){return this[Vh].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Vh],n=this[kS],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=qc.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${i_(t)}: ${i_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class h4t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),qc.visit(this.vals,t)]})}}class p4t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Vh].toArray().map(String)}has(t,n){return t[Vh].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Vh].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Vh].indexOf(n);if(r!==-1){const i=qc.visit(Reflect.get(t,kS),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Vh].indexOf(n);return i!==-1?(Vd.visit(Reflect.get(t,kS),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(YB.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Vh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kS]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let yve;function z6e(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(yve=s,s=o,o=yve),o>i&&(o=i),r?r(e,s,o):[s,o]}const vve=e=>e!==e;function eA(e){if(typeof e!=="object"||e===null)return vve(e)?vve:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?iOt(e,n):!1:e instanceof Map?g4t(e):Array.isArray(e)?m4t(e):e instanceof mi?y4t(e):v4t(e,!0)}function m4t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=eA(e[n]);return KB(t)}function g4t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=eA(r);return KB(n)}function y4t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=eA(e.get(n));return KB(t)}function v4t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=eA(e[n[i]]);return KB(r,n)}function KB(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return b4t(e,n);case Map:return bve(e,n,n.keys());case YB:case xre:case Object:case void 0:return bve(e,n,t||Object.keys(n))}return n instanceof mi?x4t(e,n):!1}}function b4t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function x4t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function bve(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function V6e(e,t,n,r){return(n&1<<r)!==0}function w4t(e,t,n,r){return(n&1<<r)>>r}function s5(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):H6e(new _re(n,e,t,null,V6e)).subarray(0,r)),i}return n}function H6e(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class _re{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function uK(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new _re(e,t,n-t,e,w4t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return uK(e,t,i)+uK(e,r,n)+_4t(e,i>>3,r-i>>3)}function _4t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=vH(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=vH(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=vH(s.getUint8(i)),i+=1;return r}function vH(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const E4t=-1;class zi{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return br.isSparseUnion(t)?this.children.some(n=>n.nullable):br.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(br.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=E4t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-uK(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof zi?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=tm(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(br.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Hc.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(br.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Hc.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(s5(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new zi(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ge.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(s5(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Z0.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Z0.TYPE])&&(o[Z0.TYPE]=s.subarray(t,t+n)),(s=o[Z0.OFFSET])&&(o[Z0.OFFSET]=s.subarray(t,t+n+1))||(s=o[Z0.DATA])&&(o[Z0.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}zi.prototype.children=Object.freeze([]);class Tk extends xr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new zi(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.data),s=Vi(t.nullBitmap),o=RD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.data),s=Vi(t.nullBitmap),o=RD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/tm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/tm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/tm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/tm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/tm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Vi(t.nullBitmap),o=RD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Vi(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ca(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(br.isSparseUnion(n))return new zi(n,r,o,a,[void 0,void 0,void 0,s],i);const u=RD(t.valueOffsets);return new zi(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.indices.ArrayType,t.data),{["dictionary"]:o=new mi([new Tk().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/tm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Tk().visit({type:n.valueType})}=t,s=Vi(t.nullBitmap),{["length"]:o=i.length/tm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Tk().visit({type:n.childType})}=t,s=Vi(t.nullBitmap),o=RD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,void 0,s],[i])}}const S4t=new Tk;function Lu(e){return S4t.visit(e)}class xve{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function q6e(e){return e.reduce((t,n)=>t+n.nullCount,0)}function W6e(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function G6e(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function Ere(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function Sre(e,t){return e.getValid(t)}function RS(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return Ere(r,this._offsets,n,t)}}function Y6e(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=Ere(s,this._offsets,r,n);return t=void 0,o}}function K6e(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):Ere(s,this._offsets,i,n);return t=void 0,o}}class Pn extends xr{}function C4t(e,t){return t===null&&e.length>0?0:-1}function T4t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new _re(n,e.offset+(t||0),e.length,n,V6e)){if(!i)return r;++r}return-1}function Jn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case ge.Union:break;case ge.Dictionary:break;default:return T4t(e,n)}const r=qc.getVisitFn(e),i=eA(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function X6e(e,t,n){const r=qc.getVisitFn(e),i=eA(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Pn.prototype.visitNull=C4t;Pn.prototype.visitBool=Jn;Pn.prototype.visitInt=Jn;Pn.prototype.visitInt8=Jn;Pn.prototype.visitInt16=Jn;Pn.prototype.visitInt32=Jn;Pn.prototype.visitInt64=Jn;Pn.prototype.visitUint8=Jn;Pn.prototype.visitUint16=Jn;Pn.prototype.visitUint32=Jn;Pn.prototype.visitUint64=Jn;Pn.prototype.visitFloat=Jn;Pn.prototype.visitFloat16=Jn;Pn.prototype.visitFloat32=Jn;Pn.prototype.visitFloat64=Jn;Pn.prototype.visitUtf8=Jn;Pn.prototype.visitBinary=Jn;Pn.prototype.visitFixedSizeBinary=Jn;Pn.prototype.visitDate=Jn;Pn.prototype.visitDateDay=Jn;Pn.prototype.visitDateMillisecond=Jn;Pn.prototype.visitTimestamp=Jn;Pn.prototype.visitTimestampSecond=Jn;Pn.prototype.visitTimestampMillisecond=Jn;Pn.prototype.visitTimestampMicrosecond=Jn;Pn.prototype.visitTimestampNanosecond=Jn;Pn.prototype.visitTime=Jn;Pn.prototype.visitTimeSecond=Jn;Pn.prototype.visitTimeMillisecond=Jn;Pn.prototype.visitTimeMicrosecond=Jn;Pn.prototype.visitTimeNanosecond=Jn;Pn.prototype.visitDecimal=Jn;Pn.prototype.visitList=Jn;Pn.prototype.visitStruct=Jn;Pn.prototype.visitUnion=Jn;Pn.prototype.visitDenseUnion=X6e;Pn.prototype.visitSparseUnion=X6e;Pn.prototype.visitDictionary=Jn;Pn.prototype.visitInterval=Jn;Pn.prototype.visitIntervalDayTime=Jn;Pn.prototype.visitIntervalYearMonth=Jn;Pn.prototype.visitDuration=Jn;Pn.prototype.visitDurationSecond=Jn;Pn.prototype.visitDurationMillisecond=Jn;Pn.prototype.visitDurationMicrosecond=Jn;Pn.prototype.visitDurationNanosecond=Jn;Pn.prototype.visitFixedSizeList=Jn;Pn.prototype.visitMap=Jn;const o5=new Pn;class On extends xr{}function Bn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===ge.Timestamp||t instanceof Hl&&t.bitWidth!==64||t instanceof ly&&t.bitWidth!==64||t instanceof Uv&&t.precision!==lu.HALF))return new xve(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new xve(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new A4t(o)})}class A4t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}On.prototype.visitNull=Bn;On.prototype.visitBool=Bn;On.prototype.visitInt=Bn;On.prototype.visitInt8=Bn;On.prototype.visitInt16=Bn;On.prototype.visitInt32=Bn;On.prototype.visitInt64=Bn;On.prototype.visitUint8=Bn;On.prototype.visitUint16=Bn;On.prototype.visitUint32=Bn;On.prototype.visitUint64=Bn;On.prototype.visitFloat=Bn;On.prototype.visitFloat16=Bn;On.prototype.visitFloat32=Bn;On.prototype.visitFloat64=Bn;On.prototype.visitUtf8=Bn;On.prototype.visitBinary=Bn;On.prototype.visitFixedSizeBinary=Bn;On.prototype.visitDate=Bn;On.prototype.visitDateDay=Bn;On.prototype.visitDateMillisecond=Bn;On.prototype.visitTimestamp=Bn;On.prototype.visitTimestampSecond=Bn;On.prototype.visitTimestampMillisecond=Bn;On.prototype.visitTimestampMicrosecond=Bn;On.prototype.visitTimestampNanosecond=Bn;On.prototype.visitTime=Bn;On.prototype.visitTimeSecond=Bn;On.prototype.visitTimeMillisecond=Bn;On.prototype.visitTimeMicrosecond=Bn;On.prototype.visitTimeNanosecond=Bn;On.prototype.visitDecimal=Bn;On.prototype.visitList=Bn;On.prototype.visitStruct=Bn;On.prototype.visitUnion=Bn;On.prototype.visitDenseUnion=Bn;On.prototype.visitSparseUnion=Bn;On.prototype.visitDictionary=Bn;On.prototype.visitInterval=Bn;On.prototype.visitIntervalDayTime=Bn;On.prototype.visitIntervalYearMonth=Bn;On.prototype.visitDuration=Bn;On.prototype.visitDurationSecond=Bn;On.prototype.visitDurationMillisecond=Bn;On.prototype.visitDurationMicrosecond=Bn;On.prototype.visitDurationNanosecond=Bn;On.prototype.visitFixedSizeList=Bn;On.prototype.visitMap=Bn;const Cre=new On,D4t=(e,t)=>e+t;class Lb extends xr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Rn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Qm.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Qm.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const I4t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),k4t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),R4t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Qm.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},N4t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Qm.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},P4t=(e,t)=>e.type.mode===Hc.Dense?Q6e(e,t):J6e(e,t),Q6e=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Qm.visit(t[s],r[i])},J6e=({children:e},t)=>4+Qm.visitMany(e,e.map(()=>t)).reduce(D4t,0);Lb.prototype.visitUtf8=I4t;Lb.prototype.visitBinary=k4t;Lb.prototype.visitList=R4t;Lb.prototype.visitFixedSizeList=N4t;Lb.prototype.visitUnion=P4t;Lb.prototype.visitDenseUnion=Q6e;Lb.prototype.visitSparseUnion=J6e;const Qm=new Lb;var Z6e;const eFe={},tFe={};class mi{constructor(t){var n,r,i;const s=t[0]instanceof mi?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof zi)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=eFe[o.typeId],f=s[0];this.isValid=d=>Sre(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,tFe[o.typeId]),this._offsets=W6e(s);break}this.data=s,this.type=o,this.stride=tm(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return q6e(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ge[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return Cre.visit(this)}concat(...t){return new mi(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new mi(z6e(this,t,n,({data:r,_offsets:i},s,o)=>G6e(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case ge.Int:case ge.Float:case ge.Decimal:case ge.Time:case ge.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new mi(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return br.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(br.isDictionary(this.type)){const t=new a5(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mi(n)}return new a5(this)}unmemoize(){if(br.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mi(n)}return this}}Z6e=Symbol.toStringTag;mi[Z6e]=(e=>{e.type=br.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(ge).map(n=>ge[n]).filter(n=>typeof n=="number"&&n!==ge.NONE);for(const n of t){const r=qc.getVisitFnByTypeId(n),i=Vd.getVisitFnByTypeId(n),s=o5.getVisitFnByTypeId(n),o=Qm.getVisitFnByTypeId(n);eFe[n]={get:r,set:i,indexOf:s,byteLength:o},tFe[n]=Object.create(e,{isValid:{value:RS(Sre)},get:{value:RS(qc.getVisitFnByTypeId(n))},set:{value:Y6e(Vd.getVisitFnByTypeId(n))},indexOf:{value:K6e(o5.getVisitFnByTypeId(n))},getByteLength:{value:RS(Qm.getVisitFnByTypeId(n))}})}return"Vector"})(mi.prototype);class a5 extends mi{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new a5(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new mi(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function O4t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${F4t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function F4t(e){return typeof e!="bigint"?i_(e):`${i_(e)}n`}const bH=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,M4t=(e,t=0)=>e.length>=t?e.subarray(0,t):e5(new e.constructor(t),e,0);class XB{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?bH(r*1,this.BYTES_PER_ELEMENT):bH(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=bH(t*this.stride,this.BYTES_PER_ELEMENT);const n=M4t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=e5(new this.ArrayType(t),this.buffer)}}XB.prototype.offset=0;class ON extends XB{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class nFe extends ON{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class rFe extends ON{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let tf=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=tm(t),this._nulls=new nFe,n&&n.length>0&&(this._isValid=O4t(n))}toVector(){return new mi([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),Lu({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};tf.prototype.length=1;tf.prototype.stride=1;tf.prototype.children=null;tf.prototype.finished=!1;tf.prototype.nullValues=null;tf.prototype._isValid=()=>!0;class Ry extends tf{constructor(t){super(t),this._values=new ON(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class QB extends tf{constructor(t){super(t),this._pendingLength=0,this._offsets=new rFe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof YB?n[Vh].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class lK{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const xH=2,fm=4,dg=4,es=4,w1=new Int32Array(2),wve=new Float32Array(w1.buffer),_ve=new Float64Array(w1.buffer),N4=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var cK;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(cK||(cK={}));let u5=class iFe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new iFe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return w1[0]=this.readInt32(t),wve[0]}readFloat64(t){return w1[N4?0:1]=this.readInt32(t),w1[N4?1:0]=this.readInt32(t+4),_ve[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){wve[0]=n,this.writeInt32(t,w1[0])}writeFloat64(t,n){_ve[0]=n,this.writeInt32(t,w1[N4?0:1]),this.writeInt32(t+4,w1[N4?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+fm+dg)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<dg;n++)t+=String.fromCharCode(this.readInt8(this.position_+fm+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=fm;const i=this.bytes_.subarray(t,t+r);return n===cK.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+fm}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=dg)throw new Error("FlatBuffers: file identifier must be length "+dg);for(let n=0;n<dg;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+fm+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},sFe=class oFe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=u5.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=oFe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=u5.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(fm,0),this.writeInt32(this.offset()-t+fm)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*xH;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=xH;l<s;l+=xH)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?es:0;if(n){const s=n;if(this.prep(this.minalign,fm+dg+i),s.length!=dg)throw new TypeError("FlatBuffers: file identifier must be length "+dg);for(let o=dg-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,fm+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(fm,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class ia{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ia).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+es),(n||new ia).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ia.startKeyValue(t),ia.addKey(t,n),ia.addValue(t,r),ia.endKeyValue(t)}}var PC;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(PC||(PC={}));var OC;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(OC||(OC={}));var l5;(function(e){e[e.DenseArray=0]="DenseArray"})(l5||(l5={}));class vf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new vf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+es),(n||new vf).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return vf.startInt(t),vf.addBitWidth(t,n),vf.addIsSigned(t,r),vf.endInt(t)}}class hg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new hg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+es),(n||new hg).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new vf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):l5.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,l5.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class yw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new yw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+es),(n||new yw).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return yw.startBinary(t),yw.endBinary(t)}}class vw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new vw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+es),(n||new vw).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return vw.startBool(t),vw.endBool(t)}}var c5;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(c5||(c5={}));let gF=class C2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new C2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+es),(n||new C2).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):c5.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,c5.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return C2.startDate(t),C2.addUnit(t,n),C2.endDate(t)}},T2=class f1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+es),(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return f1.startDecimal(t),f1.addPrecision(t,n),f1.addScale(t,r),f1.addBitWidth(t,i),f1.endDecimal(t)}};var Vv;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Vv||(Vv={}));class dm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new dm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+es),(n||new dm).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Vv.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Vv.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return dm.startDuration(t),dm.addUnit(t,n),dm.endDuration(t)}}class hm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new hm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+es),(n||new hm).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return hm.startFixedSizeBinary(t),hm.addByteWidth(t,n),hm.endFixedSizeBinary(t)}}class pm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new pm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+es),(n||new pm).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return pm.startFixedSizeList(t),pm.addListSize(t,n),pm.endFixedSizeList(t)}}var f5;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(f5||(f5={}));class mm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new mm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+es),(n||new mm).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):f5.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,f5.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return mm.startFloatingPoint(t),mm.addPrecision(t,n),mm.endFloatingPoint(t)}}var d5;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(d5||(d5={}));class gm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new gm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+es),(n||new gm).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):d5.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,d5.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return gm.startInterval(t),gm.addUnit(t,n),gm.endInterval(t)}}class bw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new bw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+es),(n||new bw).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return bw.startList(t),bw.endList(t)}}let yF=class A2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new A2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+es),(n||new A2).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return A2.startMap(t),A2.addKeysSorted(t,n),A2.endMap(t)}};class xw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new xw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+es),(n||new xw).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return xw.startNull(t),xw.endNull(t)}}class ww{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new ww).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+es),(n||new ww).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return ww.startStruct_(t),ww.endStruct_(t)}}let DI=class Bx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Bx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+es),(n||new Bx).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Vv.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Vv.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Bx.startTime(t),Bx.addUnit(t,n),Bx.addBitWidth(t,r),Bx.endTime(t)}},II=class jx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new jx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+es),(n||new jx).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Vv.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Vv.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return jx.startTimestamp(t),jx.addUnit(t,n),jx.addTimezone(t,r),jx.endTimestamp(t)}};var h5;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(h5||(h5={}));let Ux=class zx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new zx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+es),(n||new zx).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):h5.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,h5.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return zx.startUnion(t),zx.addMode(t,n),zx.addTypeIds(t,r),zx.endUnion(t)}};class _w{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new _w).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+es),(n||new _w).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return _w.startUtf8(t),_w.endUtf8(t)}}var Ps;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ps||(Ps={}));let vd=class vF{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new vF).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+es),(n||new vF).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ps.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new hg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new vF).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ps.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Zp=class Q0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Q0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+es),(n||new Q0).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):OC.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new vd).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,OC.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Q0.startSchema(t),Q0.addEndianness(t,n),Q0.addFields(t,r),Q0.addCustomMetadata(t,i),Q0.addFeatures(t,s),Q0.endSchema(t)}};class hf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new hf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+es),(n||new hf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):PC.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Zp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new lK).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new lK).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,PC.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Mi{constructor(t=[],n,r,i=Il.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=dK(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Mi(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Mi(n,this.metadata)}assign(...t){const n=t[0]instanceof Mi?t[0]:Array.isArray(t[0])?new Mi(t[0]):new Mi(t),r=[...this.fields],i=P4(P4(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:P4(P4(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=dK(s,new Map);return new Mi([...r,...s],i,new Map([...this.dictionaries,...o]))}}Mi.prototype.fields=null;Mi.prototype.metadata=null;Mi.prototype.dictionaries=null;let Xi=class fK{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new fK(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],fK.new(n,r,i,s)}};Xi.prototype.type=null;Xi.prototype.name=null;Xi.prototype.nullable=null;Xi.prototype.metadata=null;function P4(e,t){return new Map([...e||new Map,...t||new Map])}function dK(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(br.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&dK(s.children,t)}return t}var $4t=sFe,L4t=u5;class hK{static decode(t){t=new L4t(Vi(t));const n=hf.getRootAsFooter(t),r=Mi.decode(n.schema(),new Map,n.version());return new B4t(r,n)}static encode(t){const n=new $4t,r=Mi.encode(n,t.schema);hf.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Hv.encode(n,o);const i=n.endVector();hf.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Hv.encode(n,o);const s=n.endVector();return hf.startFooter(n),hf.addSchema(n,r),hf.addVersion(n,Il.V5),hf.addRecordBatches(n,i),hf.addDictionaries(n,s),hf.finishFooterBuffer(n,hf.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Il.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class B4t extends hK{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Hv.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Hv.decode(n)}return null}}class Hv{static decode(t){return new Hv(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return lK.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=mp(r),this.bodyLength=mp(n)}}const O4=Object.freeze({done:!0,value:void 0});class aFe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class j4t extends aFe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return lg(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(O4);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return mve.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return mve.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return lg(this,void 0,void 0,function*(){return yield this.abort(t),O4})}return(t){return lg(this,void 0,void 0,function*(){return yield this.close(),O4})}read(t){return lg(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return lg(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(O4)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class wH extends j4t{write(t){if((t=Vi(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?sK(this.toUint8Array(!0)):this.toUint8Array(!1).then(sK)}toUint8Array(t=!1){return t?Ym(this._values)[0]:lg(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=uk(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Ym(o,a)[0]})}}class uFe extends QB{constructor(t){super(t),this._values=new XB(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Vi(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class U4t extends tf{constructor(t){super(t),this._values=new nFe}setValue(t,n){this._values.set(t,+n)}}class JB extends Ry{}JB.prototype._setValue=h6e;class lFe extends JB{}lFe.prototype._setValue=ire;class cFe extends JB{}cFe.prototype._setValue=sre;class fFe extends Ry{}fFe.prototype._setValue=g6e;class z4t extends tf{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new zv(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=p5({type:this.type.indices,nullValues:n}),this.dictionary=p5({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class dFe extends Ry{}dFe.prototype._setValue=d6e;class V4t extends tf{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new NC(this.type.listSize,new Xi(n,t.type,!0)),r}}class ZB extends Ry{setValue(t,n){this._values.set(t,n)}}class H4t extends ZB{setValue(t,n){super.setValue(t,l6e(n))}}class q4t extends ZB{}class W4t extends ZB{}class e9 extends Ry{}e9.prototype._setValue=b6e;class hFe extends e9{}hFe.prototype._setValue=pre;class pFe extends e9{}pFe.prototype._setValue=mre;class tA extends Ry{}tA.prototype._setValue=x6e;class mFe extends tA{}mFe.prototype._setValue=gre;class gFe extends tA{}gFe.prototype._setValue=yre;class yFe extends tA{}yFe.prototype._setValue=vre;class vFe extends tA{}vFe.prototype._setValue=bre;class Ny extends Ry{setValue(t,n){this._values.set(t,n)}}class G4t extends Ny{}class Y4t extends Ny{}class K4t extends Ny{}class X4t extends Ny{}class Q4t extends Ny{}class J4t extends Ny{}class Z4t extends Ny{}class e6t extends Ny{}class t6t extends QB{constructor(t){super(t),this._offsets=new rFe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new RC(new Xi(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class n6t extends QB{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new t3(new Xi(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class r6t extends tf{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class i6t extends tf{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Vu([...this.type.children,new Xi(n,t.type,!0)]),r}}class nA extends Ry{}nA.prototype._setValue=p6e;class bFe extends nA{}bFe.prototype._setValue=ore;class xFe extends nA{}xFe.prototype._setValue=are;class wFe extends nA{}wFe.prototype._setValue=ure;class _Fe extends nA{}_Fe.prototype._setValue=lre;class rA extends Ry{}rA.prototype._setValue=m6e;class EFe extends rA{}EFe.prototype._setValue=cre;class SFe extends rA{}SFe.prototype._setValue=fre;class CFe extends rA{}CFe.prototype._setValue=dre;class TFe extends rA{}TFe.prototype._setValue=hre;class Tre extends tf{constructor(t){super(t),this._typeIds=new ON(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Xi(n,t.type)];return this.type=new e3(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class s6t extends Tre{}class o6t extends Tre{constructor(t){super(t),this._offsets=new ON(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class AFe extends QB{constructor(t){super(t),this._values=new XB(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Vne(n))}_flushPending(t,n){}}AFe.prototype._flushPending=uFe.prototype._flushPending;class a6t extends xr{visitNull(){return r6t}visitBool(){return U4t}visitInt(){return Ny}visitInt8(){return G4t}visitInt16(){return Y4t}visitInt32(){return K4t}visitInt64(){return X4t}visitUint8(){return Q4t}visitUint16(){return J4t}visitUint32(){return Z4t}visitUint64(){return e6t}visitFloat(){return ZB}visitFloat16(){return H4t}visitFloat32(){return q4t}visitFloat64(){return W4t}visitUtf8(){return AFe}visitBinary(){return uFe}visitFixedSizeBinary(){return dFe}visitDate(){return JB}visitDateDay(){return lFe}visitDateMillisecond(){return cFe}visitTimestamp(){return nA}visitTimestampSecond(){return bFe}visitTimestampMillisecond(){return xFe}visitTimestampMicrosecond(){return wFe}visitTimestampNanosecond(){return _Fe}visitTime(){return rA}visitTimeSecond(){return EFe}visitTimeMillisecond(){return SFe}visitTimeMicrosecond(){return CFe}visitTimeNanosecond(){return TFe}visitDecimal(){return fFe}visitList(){return t6t}visitStruct(){return i6t}visitUnion(){return Tre}visitDenseUnion(){return o6t}visitSparseUnion(){return s6t}visitDictionary(){return z4t}visitInterval(){return e9}visitIntervalDayTime(){return hFe}visitIntervalYearMonth(){return pFe}visitDuration(){return tA}visitDurationSecond(){return mFe}visitDurationMillisecond(){return gFe}visitDurationMicrosecond(){return yFe}visistDurationNanosecond(){return vFe}visitFixedSizeList(){return V4t}visitMap(){return n6t}}const u6t=new a6t;class Fn extends xr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Kl(e,t){return t instanceof e.constructor}function FN(e,t){return e===t||Kl(e,t)}function Py(e,t){return e===t||Kl(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function t9(e,t){return e===t||Kl(e,t)&&e.precision===t.precision}function l6t(e,t){return e===t||Kl(e,t)&&e.byteWidth===t.byteWidth}function Are(e,t){return e===t||Kl(e,t)&&e.unit===t.unit}function MN(e,t){return e===t||Kl(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function $N(e,t){return e===t||Kl(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function c6t(e,t){return e===t||Kl(e,t)&&e.children.length===t.children.length&&qv.compareManyFields(e.children,t.children)}function f6t(e,t){return e===t||Kl(e,t)&&e.children.length===t.children.length&&qv.compareManyFields(e.children,t.children)}function Dre(e,t){return e===t||Kl(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&qv.compareManyFields(e.children,t.children)}function d6t(e,t){return e===t||Kl(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&qv.visit(e.indices,t.indices)&&qv.visit(e.dictionary,t.dictionary)}function Ire(e,t){return e===t||Kl(e,t)&&e.unit===t.unit}function LN(e,t){return e===t||Kl(e,t)&&e.unit===t.unit}function h6t(e,t){return e===t||Kl(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&qv.compareManyFields(e.children,t.children)}function p6t(e,t){return e===t||Kl(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&qv.compareManyFields(e.children,t.children)}Fn.prototype.visitNull=FN;Fn.prototype.visitBool=FN;Fn.prototype.visitInt=Py;Fn.prototype.visitInt8=Py;Fn.prototype.visitInt16=Py;Fn.prototype.visitInt32=Py;Fn.prototype.visitInt64=Py;Fn.prototype.visitUint8=Py;Fn.prototype.visitUint16=Py;Fn.prototype.visitUint32=Py;Fn.prototype.visitUint64=Py;Fn.prototype.visitFloat=t9;Fn.prototype.visitFloat16=t9;Fn.prototype.visitFloat32=t9;Fn.prototype.visitFloat64=t9;Fn.prototype.visitUtf8=FN;Fn.prototype.visitBinary=FN;Fn.prototype.visitFixedSizeBinary=l6t;Fn.prototype.visitDate=Are;Fn.prototype.visitDateDay=Are;Fn.prototype.visitDateMillisecond=Are;Fn.prototype.visitTimestamp=MN;Fn.prototype.visitTimestampSecond=MN;Fn.prototype.visitTimestampMillisecond=MN;Fn.prototype.visitTimestampMicrosecond=MN;Fn.prototype.visitTimestampNanosecond=MN;Fn.prototype.visitTime=$N;Fn.prototype.visitTimeSecond=$N;Fn.prototype.visitTimeMillisecond=$N;Fn.prototype.visitTimeMicrosecond=$N;Fn.prototype.visitTimeNanosecond=$N;Fn.prototype.visitDecimal=FN;Fn.prototype.visitList=c6t;Fn.prototype.visitStruct=f6t;Fn.prototype.visitUnion=Dre;Fn.prototype.visitDenseUnion=Dre;Fn.prototype.visitSparseUnion=Dre;Fn.prototype.visitDictionary=d6t;Fn.prototype.visitInterval=Ire;Fn.prototype.visitIntervalDayTime=Ire;Fn.prototype.visitIntervalYearMonth=Ire;Fn.prototype.visitDuration=LN;Fn.prototype.visitDurationSecond=LN;Fn.prototype.visitDurationMillisecond=LN;Fn.prototype.visitDurationMicrosecond=LN;Fn.prototype.visitDurationNanosecond=LN;Fn.prototype.visitFixedSizeList=h6t;Fn.prototype.visitMap=p6t;const qv=new Fn;function pK(e,t){return qv.compareSchemas(e,t)}function p5(e){const t=e.type,n=new(u6t.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(p5(Object.assign(Object.assign({},l),{type:u})))}}return n}function _H(e,t){return m6t(e,t.map(n=>n.data.concat()))}function m6t(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=g6t(n,o,c,t,i),o>0&&(r[s++]=Lu({type:new Vu(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new bf(e,f))]}function g6t(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Lu({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var DFe;class bc{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Mi([]),this._offsets=[0],this;let i,s;t[0]instanceof Mi&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof bf)return[u];if(u instanceof bc)return u.batches;if(u instanceof zi){if(u.type instanceof Vu)return[new bf(new Mi(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new mi([u[h]])),f=new Mi(l.map((h,p)=>new Xi(String(h),c[p].type))),[,d]=_H(f,c);return d.length===0?[new bf(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Mi([]),!(i instanceof Mi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof bf))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!pK(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??W6e(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=q6e(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Cre.visit(new mi(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new bc(n,r.map(i=>new bf(n,i)))}slice(t,n){const r=this.schema;[t,n]=z6e({length:this.numRows},t,n);const i=G6e(this.data,this._offsets,t,n);return new bc(r,i.map(s=>new bf(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Lu({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new mi(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new mi([Lu({type:new uy,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=_H(r,a)}return new bc(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new bc(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new bc(..._H(s,o))}}DFe=Symbol.toStringTag;bc[DFe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=RS(Sre),e.get=RS(qc.getVisitFn(ge.Struct)),e.set=Y6e(Vd.getVisitFn(ge.Struct)),e.indexOf=K6e(o5.getVisitFn(ge.Struct)),e.getByteLength=RS(Qm.getVisitFn(ge.Struct)),"Table"))(bc.prototype);var IFe;let bf=class kI{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Mi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Lu({nullCount:0,type:new Vu(this.schema.fields),children:this.schema.fields.map(n=>Lu({type:n.type,nullCount:0}))})]=t,!(this.data instanceof zi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Eve(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Xi.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Mi(r),a=Lu({type:new Vu(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Eve(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=kFe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return qc.visit(this.data,t)}set(t,n){return Vd.visit(this.data,t,n)}indexOf(t,n){return o5.visit(this.data,t,n)}getByteLength(t){return Qm.visit(this.data,t)}[Symbol.iterator](){return Cre.visit(new mi([this.data]))}toArray(){return[...this]}concat(...t){return new bc(this.schema,[this,...t])}slice(t,n){const[r]=new mi([this.data]).slice(t,n).data;return new kI(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new mi([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new mi([Lu({type:new uy,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Mi(s,new Map(this.schema.metadata)),i=Lu({type:new Vu(s),children:o})}return new kI(r,i)}select(t){const n=this.schema.select(t),r=new Vu(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new kI(n,Lu({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Lu({type:new Vu(n.fields),length:this.numRows,children:r});return new kI(n,i)}};IFe=Symbol.toStringTag;bf[IFe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(bf.prototype);function Eve(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Lu({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Lu({type:new Vu(i),length:n,children:s})]}function kFe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])kFe(a.children,l==null?void 0:l.children,n);if(br.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class y6t extends bf{constructor(t){const n=t.fields.map(i=>Lu({type:i.type})),r=Lu({type:new Vu(t.fields),nullCount:0,children:n});super(t,r)}}var m5;(function(e){e[e.BUFFER=0]="BUFFER"})(m5||(m5={}));var g5;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(g5||(g5={}));class _1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new _1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+es),(n||new _1).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):g5.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):m5.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,g5.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,m5.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return _1.startBodyCompression(t),_1.addCodec(t,n),_1.addMethod(t,r),_1.endBodyCompression(t)}}let RFe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},NFe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},eg=class mK{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new mK).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+es),(n||new mK).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new NFe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new RFe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new _1).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},D2=class gK{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new gK).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+es),(n||new gK).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new eg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var y5;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(y5||(y5={}));let i1=class Wp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Wp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+es),(n||new Wp).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):PC.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):y5.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,PC.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,y5.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Wp.startMessage(t),Wp.addVersion(t,n),Wp.addHeaderType(t,r),Wp.addHeader(t,i),Wp.addBodyLength(t,s),Wp.addCustomMetadata(t,o),Wp.endMessage(t)}};class v6t extends xr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return xw.startNull(n),xw.endNull(n)}visitInt(t,n){return vf.startInt(n),vf.addBitWidth(n,t.bitWidth),vf.addIsSigned(n,t.isSigned),vf.endInt(n)}visitFloat(t,n){return mm.startFloatingPoint(n),mm.addPrecision(n,t.precision),mm.endFloatingPoint(n)}visitBinary(t,n){return yw.startBinary(n),yw.endBinary(n)}visitBool(t,n){return vw.startBool(n),vw.endBool(n)}visitUtf8(t,n){return _w.startUtf8(n),_w.endUtf8(n)}visitDecimal(t,n){return T2.startDecimal(n),T2.addScale(n,t.scale),T2.addPrecision(n,t.precision),T2.addBitWidth(n,t.bitWidth),T2.endDecimal(n)}visitDate(t,n){return gF.startDate(n),gF.addUnit(n,t.unit),gF.endDate(n)}visitTime(t,n){return DI.startTime(n),DI.addUnit(n,t.unit),DI.addBitWidth(n,t.bitWidth),DI.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return II.startTimestamp(n),II.addUnit(n,t.unit),r!==void 0&&II.addTimezone(n,r),II.endTimestamp(n)}visitInterval(t,n){return gm.startInterval(n),gm.addUnit(n,t.unit),gm.endInterval(n)}visitDuration(t,n){return dm.startDuration(n),dm.addUnit(n,t.unit),dm.endDuration(n)}visitList(t,n){return bw.startList(n),bw.endList(n)}visitStruct(t,n){return ww.startStruct_(n),ww.endStruct_(n)}visitUnion(t,n){Ux.startTypeIdsVector(n,t.typeIds.length);const r=Ux.createTypeIdsVector(n,t.typeIds);return Ux.startUnion(n),Ux.addMode(n,t.mode),Ux.addTypeIds(n,r),Ux.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return hg.startDictionaryEncoding(n),hg.addId(n,BigInt(t.id)),hg.addIsOrdered(n,t.isOrdered),r!==void 0&&hg.addIndexType(n,r),hg.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return hm.startFixedSizeBinary(n),hm.addByteWidth(n,t.byteWidth),hm.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return pm.startFixedSizeList(n),pm.addListSize(n,t.listSize),pm.endFixedSizeList(n)}visitMap(t,n){return yF.startMap(n),yF.addKeysSorted(n,t.keysSorted),yF.endMap(n)}}const EH=new v6t;function b6t(e,t=new Map){return new Mi(w6t(e,t),bF(e.metadata),t)}function PFe(e){return new Wf(e.count,OFe(e.columns),FFe(e.columns))}function x6t(e){return new Jm(PFe(e.data),e.id,e.isDelta)}function w6t(e,t){return(e.fields||[]).filter(Boolean).map(n=>Xi.fromJSON(n,t))}function Sve(e,t){return(e.children||[]).filter(Boolean).map(n=>Xi.fromJSON(n,t))}function OFe(e){return(e||[]).reduce((t,n)=>[...t,new Wv(n.count,_6t(n.VALIDITY)),...OFe(n.children)],[])}function FFe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new wm(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new wm(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new wm(t.length,i.OFFSET.length)),i.DATA&&t.push(new wm(t.length,i.DATA.length)),t=FFe(i.children,t)}return t}function _6t(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function E6t(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Tve(e,Sve(e,t)),i=new Xi(e.name,o,e.nullable,bF(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Cve(r):new jv,a=new zv(t.get(n),r,n,s.isOrdered),i=new Xi(e.name,a,e.nullable,bF(e.metadata))):(r=(r=s.indexType)?Cve(r):new jv,t.set(n,o=Tve(e,Sve(e,t))),a=new zv(o,r,n,s.isOrdered),i=new Xi(e.name,a,e.nullable,bF(e.metadata))),i||null}function bF(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Cve(e){return new Hl(e.isSigned,e.bitWidth)}function Tve(e,t){const n=e.type.name;switch(n){case"NONE":return new uy;case"null":return new uy;case"binary":return new JR;case"utf8":return new DC;case"bool":return new ZR;case"list":return new RC((t||[])[0]);case"struct":return new Vu(t||[]);case"struct_":return new Vu(t||[])}switch(n){case"int":{const r=e.type;return new Hl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Uv(lu[r.precision])}case"decimal":{const r=e.type;return new t5(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new IC(Km[r.unit])}case"time":{const r=e.type;return new ly(Rn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new n5(Rn[r.unit],r.timezone)}case"interval":{const r=e.type;return new kC(Xm[r.unit])}case"duration":{const r=e.type;return new r5(Rn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new e3(Hc[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new i5(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new NC(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new t3((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var S6t=sFe,C6t=u5;class ym{static fromJSON(t,n){const r=new ym(0,Il.V5,n);return r._createHeader=T6t(t,n),r}static decode(t){t=new C6t(Vi(t));const n=i1.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new ym(r,i,s);return o._createHeader=A6t(n,s),o}static encode(t){const n=new S6t;let r=-1;return t.isSchema()?r=Mi.encode(n,t.header()):t.isRecordBatch()?r=Wf.encode(n,t.header()):t.isDictionaryBatch()&&(r=Jm.encode(n,t.header())),i1.startMessage(n),i1.addVersion(n,Il.V5),i1.addHeader(n,r),i1.addHeaderType(n,t.headerType),i1.addBodyLength(n,BigInt(t.bodyLength)),i1.finishMessageBuffer(n,i1.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Mi)return new ym(0,Il.V5,Da.Schema,t);if(t instanceof Wf)return new ym(n,Il.V5,Da.RecordBatch,t);if(t instanceof Jm)return new ym(n,Il.V5,Da.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Da.Schema}isRecordBatch(){return this.headerType===Da.RecordBatch}isDictionaryBatch(){return this.headerType===Da.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=mp(t)}}class Wf{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=mp(t)}}class Jm{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=mp(n)}}class wm{constructor(t,n){this.offset=mp(t),this.length=mp(n)}}class Wv{constructor(t,n){this.length=mp(t),this.nullCount=mp(n)}}function T6t(e,t){return()=>{switch(t){case Da.Schema:return Mi.fromJSON(e);case Da.RecordBatch:return Wf.fromJSON(e);case Da.DictionaryBatch:return Jm.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Da[t]}, type: ${t} }`)}}function A6t(e,t){return()=>{switch(t){case Da.Schema:return Mi.decode(e.header(new Zp),new Map,e.version());case Da.RecordBatch:return Wf.decode(e.header(new eg),e.version());case Da.DictionaryBatch:return Jm.decode(e.header(new D2),e.version())}throw new Error(`Unrecognized Message type: { name: ${Da[t]}, type: ${t} }`)}}Xi.encode=L6t;Xi.decode=M6t;Xi.fromJSON=E6t;Mi.encode=$6t;Mi.decode=D6t;Mi.fromJSON=b6t;Wf.encode=B6t;Wf.decode=I6t;Wf.fromJSON=PFe;Jm.encode=j6t;Jm.decode=k6t;Jm.fromJSON=x6t;Wv.encode=U6t;Wv.decode=N6t;wm.encode=z6t;wm.decode=R6t;function D6t(e,t=new Map,n=Il.V5){const r=F6t(e,t);return new Mi(r,xF(e),t,n)}function I6t(e,t=Il.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Wf(e.length(),P6t(e),O6t(e,t))}function k6t(e,t=Il.V5){return new Jm(Wf.decode(e.data(),t),e.id(),e.isDelta())}function R6t(e){return new wm(e.offset(),e.length())}function N6t(e){return new Wv(e.length(),e.nullCount())}function P6t(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Wv.decode(n));return t}function O6t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Il.V4&&(r.bb_pos+=8*(i+1)),n[++s]=wm.decode(r));return n}function F6t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Xi.decode(r,t));return n}function Ave(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Xi.decode(r,t));return n}function M6t(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Ive(e,Ave(e,t)),r=new Xi(e.name(),i,e.nullable(),xF(e))):t.has(n=mp(a.id()))?(s=(s=a.indexType())?Dve(s):new jv,o=new zv(t.get(n),s,n,a.isOrdered()),r=new Xi(e.name(),o,e.nullable(),xF(e))):(s=(s=a.indexType())?Dve(s):new jv,t.set(n,i=Ive(e,Ave(e,t))),o=new zv(i,s,n,a.isOrdered()),r=new Xi(e.name(),o,e.nullable(),xF(e))),r||null}function xF(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Dve(e){return new Hl(e.isSigned(),e.bitWidth())}function Ive(e,t){const n=e.typeType();switch(n){case Ps.NONE:return new uy;case Ps.Null:return new uy;case Ps.Binary:return new JR;case Ps.Utf8:return new DC;case Ps.Bool:return new ZR;case Ps.List:return new RC((t||[])[0]);case Ps.Struct_:return new Vu(t||[])}switch(n){case Ps.Int:{const r=e.type(new vf);return new Hl(r.isSigned(),r.bitWidth())}case Ps.FloatingPoint:{const r=e.type(new mm);return new Uv(r.precision())}case Ps.Decimal:{const r=e.type(new T2);return new t5(r.scale(),r.precision(),r.bitWidth())}case Ps.Date:{const r=e.type(new gF);return new IC(r.unit())}case Ps.Time:{const r=e.type(new DI);return new ly(r.unit(),r.bitWidth())}case Ps.Timestamp:{const r=e.type(new II);return new n5(r.unit(),r.timezone())}case Ps.Interval:{const r=e.type(new gm);return new kC(r.unit())}case Ps.Duration:{const r=e.type(new dm);return new r5(r.unit())}case Ps.Union:{const r=e.type(new Ux);return new e3(r.mode(),r.typeIdsArray()||[],t||[])}case Ps.FixedSizeBinary:{const r=e.type(new hm);return new i5(r.byteWidth())}case Ps.FixedSizeList:{const r=e.type(new pm);return new NC(r.listSize(),(t||[])[0])}case Ps.Map:{const r=e.type(new yF);return new t3((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ps[n]}" (${n})`)}function $6t(e,t){const n=t.fields.map(s=>Xi.encode(e,s));Zp.startFieldsVector(e,n.length);const r=Zp.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Zp.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ia.startKeyValue(e),ia.addKey(e,a),ia.addValue(e,u),ia.endKeyValue(e)})):-1;return Zp.startSchema(e),Zp.addFields(e,r),Zp.addEndianness(e,V6t?OC.Little:OC.Big),i!==-1&&Zp.addCustomMetadata(e,i),Zp.endSchema(e)}function L6t(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;br.isDictionary(s)?(o=s.dictionary.typeId,i=EH.visit(s,e),r=EH.visit(s.dictionary,e)):r=EH.visit(s,e);const a=(s.children||[]).map(c=>Xi.encode(e,c)),u=vd.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?vd.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ia.startKeyValue(e),ia.addKey(e,d),ia.addValue(e,h),ia.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),vd.startField(e),vd.addType(e,r),vd.addTypeType(e,o),vd.addChildren(e,u),vd.addNullable(e,!!t.nullable),n!==-1&&vd.addName(e,n),i!==-1&&vd.addDictionary(e,i),l!==-1&&vd.addCustomMetadata(e,l),vd.endField(e)}function B6t(e,t){const n=t.nodes||[],r=t.buffers||[];eg.startNodesVector(e,n.length);for(const o of n.slice().reverse())Wv.encode(e,o);const i=e.endVector();eg.startBuffersVector(e,r.length);for(const o of r.slice().reverse())wm.encode(e,o);const s=e.endVector();return eg.startRecordBatch(e),eg.addLength(e,BigInt(t.length)),eg.addNodes(e,i),eg.addBuffers(e,s),eg.endRecordBatch(e)}function j6t(e,t){const n=Wf.encode(e,t.data);return D2.startDictionaryBatch(e),D2.addId(e,BigInt(t.id)),D2.addIsDelta(e,t.isDelta),D2.addData(e,n),D2.endDictionaryBatch(e)}function U6t(e,t){return NFe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function z6t(e,t){return RFe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const V6t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),yK="ARROW1",kre=new Uint8Array(yK.length);for(let e=0;e<yK.length;e+=1)kre[e]=yK.codePointAt(e);kre.length;class Do extends xr{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof bf?s.data.children:s.data),r=new Do;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof mi)return this.visitMany(t.data),this;const{type:n}=t;if(!br.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(br.isUnion(n))this.nodes.push(new Wv(r,0));else{const{nullCount:i}=t;br.isNull(n)||ip.call(this,i<=0?new Uint8Array(0):s5(t.offset,r,t.nullBitmap)),this.nodes.push(new Wv(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function ip(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new wm(this._byteLength,t)),this._byteLength+=t,this}function H6t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(ip.call(this,i),n.mode===Hc.Sparse)return vK.call(this,e);if(n.mode===Hc.Dense){if(e.offset<=0)return ip.call(this,s),vK.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);ip.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function q6t(e){let t;return e.nullCount>=e.length?ip.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?ip.call(this,s5(e.offset,e.length,t)):ip.call(this,H6e(e.values))}function Oy(e){return ip.call(this,e.values.subarray(0,e.length*e.stride))}function MFe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return ip.call(this,L4e(-i,t+1,r)),ip.call(this,n.subarray(i,i+o)),this}function Rre(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return ip.call(this,L4e(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function vK(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Do.prototype.visitBool=q6t;Do.prototype.visitInt=Oy;Do.prototype.visitFloat=Oy;Do.prototype.visitUtf8=MFe;Do.prototype.visitBinary=MFe;Do.prototype.visitFixedSizeBinary=Oy;Do.prototype.visitDate=Oy;Do.prototype.visitTimestamp=Oy;Do.prototype.visitTime=Oy;Do.prototype.visitDecimal=Oy;Do.prototype.visitList=Rre;Do.prototype.visitStruct=vK;Do.prototype.visitUnion=H6t;Do.prototype.visitInterval=Oy;Do.prototype.visitDuration=Oy;Do.prototype.visitFixedSizeList=Rre;Do.prototype.visitMap=Rre;class $Fe extends aFe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new wH,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Mb(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return WB(t)?t.then(n=>this.writeAll(n)):GB(t)?Fre(this,t):Ore(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof wH?this._sink=t:(this._sink=new wH,t&&QPt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&JPt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!pK(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof bc&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof bf&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!pK(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof bf?t instanceof y6t||this._writeRecordBatch(t):t instanceof bc?this.writeAll(t.batches):Hne(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=ym.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Da.RecordBatch?this._recordBatchBlocks.push(new Hv(a,t.bodyLength,this._position)):t.headerType===Da.DictionaryBatch&&this._dictionaryBlocks.push(new Hv(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Vi(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(ym.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(kre)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Do.assemble(t),o=new Wf(t.numRows,r,i),a=ym.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Do.assemble(new mi([t])),u=new Wf(t.length,s,o),l=new Jm(u,n,r),c=ym.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class Nre extends $Fe{static writeAll(t,n){const r=new Nre(n);return WB(t)?t.then(i=>r.writeAll(i)):GB(t)?Fre(r,t):Ore(r,t)}}class Pre extends $Fe{static writeAll(t){const n=new Pre;return WB(t)?t.then(r=>n.writeAll(r)):GB(t)?Fre(n,t):Ore(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=hK.encode(new hK(t,Il.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Ore(e,t){let n=t;t instanceof bc&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Fre(e,t){var n,r,i,s,o,a,u;return lg(this,void 0,void 0,function*(){try{for(n=!0,r=uk(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function W6t(e,t="stream"){return(t==="stream"?Nre:Pre).writeAll(e).toUint8Array(!0)}function Mre(e,t=1){return(e*t+63&-64||64)/t}function Gv(e,t,n=e.BYTES_PER_ELEMENT){return new e(Mre(t,n))}function $re(e){return e instanceof zi?e:new zi(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function G6t(e){return new mi([$re(e)])}const Lre=new TextEncoder;function Y6t(e,t,n){const r=Lre.encode(n);return e.set(r,t),r.length}function K6t(e,t,n){return Lre.encodeInto(n,e.subarray(t)).written}const X6t=Lre.encodeInto?K6t:Y6t;function kve(e,t){const n=Gv(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function Q6t(e,t){const n=Gv(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function J6t(e,t){const n=Gv(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Z6t(e,t){const n=Gv(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function eFt(e){const t=p5({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function tFt(e,t,n){const r=Gv(Int32Array,t+1),i=Gv(Uint8Array,3*n);let s=0;return{set(o,a){s+=X6t(i,s,o),r[a+1]=s},data:()=>{const o=Mre(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function nFt(e,t){const n=[],r=Gv(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:rFt(e.dictionary,n,o)})}}function rFt(e,t,n){const r=tFt(e,t.length,n);return t.forEach(r.set),G6t(r.data())}function iFt(e,t){const n=Gv(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function sFt(e,t,n=!0){let r;switch(e.typeId){case ge.Int:r=e.bitWidth<64?kve:null;break;case ge.Float:r=e.precision>0?kve:null;break;case ge.Dictionary:r=e.dictionary.typeId===ge.Utf8&&e.indices.typeId===ge.Int&&e.indices.bitWidth<64?nFt:null;break;case ge.Bool:r=Q6t;break;case ge.Date:r=e.unit?Z6t:J6t;break}return r==null?eFt(e):n?iFt(r(e,t),t):r(e,t)}function oFt(e,t){const n=e.length,r=Mre(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),$re({type:t,length:n,buffers:[null,i]})}function LFe(e,t,n,r,i=!0){const s=sFt(r,e,i);return t(n,s.set),$re(s.data())}function Bre(e){if(e instanceof br||e==null)return e;switch(e){case ge.Binary:return new JR;case ge.Bool:return new ZR;case ge.DateDay:return new hOt;case ge.DateMillisecond:case ge.Date:return new pOt;case ge.Dictionary:return new zv(new DC,new jv);case ge.Float16:return new o6e;case ge.Float32:return new ere;case ge.Float64:case ge.Float:return new tre;case ge.Int8:return new Gne;case ge.Int16:return new Yne;case ge.Int32:case ge.Int:return new jv;case ge.Int64:return new Kne;case ge.IntervalDayTime:return new bOt;case ge.Interval:case ge.IntervalYearMonth:return new xOt;case ge.Null:return new uy;case ge.TimeMicrosecond:return new yOt;case ge.TimeMillisecond:case ge.Time:return new gOt;case ge.TimeNanosecond:return new vOt;case ge.TimeSecond:return new mOt;case ge.Uint8:return new Xne;case ge.Uint16:return new Qne;case ge.Uint32:return new Jne;case ge.Uint64:return new Zne;case ge.Utf8:return new DC;default:pr(`Unsupported type code: ${Gm(e)}. Use a data type constructor instead?`)}}function aFt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function BFe(e,t){const n=bK();return e(t,n.add),n}function bK(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(ay(t))++e.dates,aFt(t)&&++e.utcdays;else if(gw(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=bK());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=bK())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return Bre(uFt(e))}};return e}function uFt(e){const t=e.count-e.nulls;if(t===0)return ge.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?ge.Float64:n<128?ge.Int8:n<32768?ge.Int16:ge.Int32:n>=2**32?ge.Float64:n<256?ge.Uint8:n<65536?ge.Uint16:ge.Uint32}else{if(e.nums===t)return ge.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?ge.Int64:pr(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?ge.Uint64:pr(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return ge.Bool;if(e.utcdays===t)return ge.DateDay;if(e.dates===t)return ge.DateMillisecond;if(e.arrays===t){const n=Xi.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new NC(e.minlen,n):new RC(n)}else if(e.structs===t){const n=e.struct_prof;return new Vu(Object.keys(n).map(r=>Xi.new(r,n[r].type(),!0)))}else{if(e.strings>0)return ge.Dictionary;pr("Type inference failure")}}}}function lFt(e,t,n,r,i,s=!0){if(i=Bre(i),!i){const o=BFe(r,t);s=o.nulls>0,i=o.type()}return LFe(n,r,t,i,s)}function cFt(e,t,n,r,i,s=!0){i=Bre(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=fFt(o);if(u&&a&&Rve(u.type,i))return u;const l=o.data;if(NN(l)){const c=dFt(l);if(a&&c&&Rve(c,i))return oFt(l,c);i=i||c,s=!1}if(!i){const c=BFe(r,o);s=c.nulls>0,i=c.type()}return LFe(n,r,o,i,s)}function fFt(e){return e instanceof mi?e:e.vector instanceof mi?e.vector:null}function dFt(e){const n={Float32Array:ere,Float64Array:tre,Int8Array:Gne,Int16Array:Yne,Int32Array:jv,Uint8Array:Xne,Uint16Array:Qne,Uint32Array:Jne,BigInt64Array:Kne,BigUint64Array:Zne}[e.constructor.name];return n?new n:null}function Rve(e,t){return!e||!t?!0:e.compareTo(t)}function hFt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function pFt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&gw(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const mFt=()=>pr("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function gFt(){try{return bc}catch{mFt()}}function jFe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=yFt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&pr("Column length mismatch"),a[l]=c});const u=gFt();return new u(a)}function yFt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=Ts(n)?n(e):pi(n)?n:null;if(pi(e))return{dataFrom:lFt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:hFt(e,r,i)};if(vFt(e))return{dataFrom:cFt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:pFt(e,r,i)};pr("Unsupported input data type")}function vFt(e){return e&&Ts(e.reify)}function bFt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return W6t(jFe(e,r),n)}function xFt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function wFt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&ay(u))++i,xFt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function n9(e,t){return Ts(t)?t(e):t||e.columnNames()}function UFe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=wFt(_Ft(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function _Ft(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function jre(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function EFt(e,t={}){const n=n9(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":ay(l)?HB(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return jre(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function zFe(e,t={}){if(Ts(t))return t(e)+"";const n=typeof e;if(n==="object"){if(ay(e))return t.utc?HB(e):c4e(e);{const r=JSON.stringify(e,(s,o)=>NN(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function r9(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function SFt(e,t={}){const n=n9(e,t.columns),{align:r,format:i}=UFe(e,n,t),s=CFt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(zFe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",_=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${_?` style="${_}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return jre(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function CFt(e){return r9(e.style,t=>Ts(t)?t:()=>t)}function TFt(e,t=!0,n=!1){return e===void 0||e?t:n}const AFt=e=>ay(e)?HB(e,!0):e;function DFt(e,t={}){const n=TFt(t.schema),r=t.format||{},i=n9(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||AFt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function IFt(e,t={}){const n=n9(e,t.columns),{align:r,format:i}=UFe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return jre(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(zFe(u,i[l]))+"|"}}),a+`
`}function VFe(e,t){for(const[n,r]of qB(t))e.set(n,r);return e}function kFt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function cy(e,t,n=new Map){return t=Vl(t)?e.columnName(t):t,yu(t)?n.set(t,t):pi(t)?t.forEach(r=>cy(e,r,n)):Ts(t)?cy(e,t(e),n):tl(t)?VFe(n,t):pr(`Invalid column selection: ${Gm(t)}`),n}function i9(e,t){return e.toObject=t,e}function HFe(e){return pi(e)?e.map(HFe):e&&e.toObject?e.toObject():e}function FC(){return i9(e=>e.columnNames(),()=>({all:[]}))}function qFe(...e){return e=e.flat(),i9(t=>{const n=cy(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:HFe(e)}))}function RFt(e,t){return i9(n=>{let r=Vl(e)?e:n.columnIndex(e),i=Vl(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function NFt(e){return yu(e)&&(e=RegExp(kFt(e))),i9(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function PFt(e){return NN(e.data)?e.data.constructor:Array}class pg extends XNt{static from(t,n){return new pg(ZNt(t,n),n)}static new(t,n){if(t instanceof pg)return t;const r={},i=[];for(const[s,o]of qB(t))r[s]=o,i.push(s);return new pg(r,n||i)}constructor(t,n,r,i,s,o){r9(t,JNt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new pg(t||this._data,n||(t?null:this._names),o,i!==void 0?i:DPt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=ed(r).groupby(r.groups());return t.forEach(s=>{s=pg.new(s),s.numRows()!==n&&pr("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):pr(`Unrecognized column: ${t}`)}object(t=0){return Nve(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=cy(this,t.columns||FC()),o=F4e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),kPt(this,u,a,n)}return a}*[Symbol.iterator](){const t=Nve(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(PFt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=IPt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return jFe(this,t)}toArrowBuffer(t){return bFt(this,t)}toCSV(t){return EFt(this,t)}toHTML(t){return SFt(this,t)}toJSON(t){return DFt(this,t)}toMarkdown(t){return IFt(this,t)}}function Nve(e){let t=e._builder;if(!t){const n=F4e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class OFt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function ei(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=FFt[e.type];s&&s(e,t,n)}const F4=(e,t,n)=>{ei(e.argument,t,n,e)},SH=(e,t,n)=>{ei(e.left,t,n,e),ei(e.right,t,n,e)},Pve=(e,t,n)=>{ei(e.test,t,n,e),ei(e.consequent,t,n,e),e.alternate&&ei(e.alternate,t,n,e)},CH=(e,t,n)=>{em(e.params,t,n,e),ei(e.body,t,n,e)},Ove=(e,t,n)=>{ei(e.callee,t,n,e),em(e.arguments,t,n,e)},em=(e,t,n,r)=>{e.forEach(i=>ei(i,t,n,r))},FFt={TemplateLiteral:(e,t,n)=>{em(e.expressions,t,n,e),em(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{ei(e.object,t,n,e),ei(e.property,t,n,e)},CallExpression:Ove,NewExpression:Ove,ArrayExpression:(e,t,n)=>{em(e.elements,t,n,e)},AssignmentExpression:SH,AwaitExpression:F4,BinaryExpression:SH,LogicalExpression:SH,UnaryExpression:F4,UpdateExpression:F4,ConditionalExpression:Pve,ObjectExpression:(e,t,n)=>{em(e.properties,t,n,e)},Property:(e,t,n)=>{ei(e.key,t,n,e),ei(e.value,t,n,e)},ArrowFunctionExpression:CH,FunctionExpression:CH,FunctionDeclaration:CH,VariableDeclaration:(e,t,n)=>{em(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{ei(e.id,t,n,e),ei(e.init,t,n,e)},SpreadElement:(e,t,n)=>{ei(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{em(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{ei(e.expression,t,n,e)},IfStatement:Pve,ForStatement:(e,t,n)=>{ei(e.init,t,n,e),ei(e.test,t,n,e),ei(e.update,t,n,e),ei(e.body,t,n,e)},WhileStatement:(e,t,n)=>{ei(e.test,t,n,e),ei(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{ei(e.body,t,n,e),ei(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{ei(e.discriminant,t,n,e),em(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&ei(e.test,t,n,e),em(e.consequent,t,n,e)},ReturnStatement:F4,Program:(e,t,n)=>{ei(e.body[0],t,n,e)}};function WFe(e){delete e.start,delete e.end,delete e.optional}function Fve(e){WFe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function MFt(e){return ei(e,null,{Column:Fve,Constant:Fve,Default:WFe}),e}function oa(e,t){return t&&t.type===e}function $Ft(e){return oa(PPt,e)||oa(NPt,e)}function LFt(e){return Ts(e)?e:()=>e}const BFt="Escaped functions are not valid as rollup or pivot values.";function jFt(e,t,n){e.aggronly&&pr(BFt);const r="(row,data)=>fn("+O4e(e.table.columnNames())+",$)";return{escape:zne.escape(r,LFt(t.expr),n)}}var UFt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],GFe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],zFt="-----------------------------------------------------------------------------------------------------------------------------------------------------",YFe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",TH={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},AH="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",VFt={5:AH,"5module":AH+" export import",6:AH+" const class extends export import super"},HFt=/^in(stanceof)?$/,qFt=new RegExp("["+YFe+"]"),WFt=new RegExp("["+YFe+zFt+"]");function xK(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function fy(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&qFt.test(String.fromCharCode(e)):t===!1?!1:xK(e,GFe)}function MC(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&WFt.test(String.fromCharCode(e)):t===!1?!1:xK(e,GFe)||xK(e,UFt)}var ui=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function fd(e,t){return new ui(e,{beforeExpr:!0,binop:t})}var dd={beforeExpr:!0},sc={startsExpr:!0},Ure={};function Hr(e,t){return t===void 0&&(t={}),t.keyword=e,Ure[e]=new ui(e,t)}var ne={num:new ui("num",sc),regexp:new ui("regexp",sc),string:new ui("string",sc),name:new ui("name",sc),privateId:new ui("privateId",sc),eof:new ui("eof"),bracketL:new ui("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ui("]"),braceL:new ui("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ui("}"),parenL:new ui("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ui(")"),comma:new ui(",",dd),semi:new ui(";",dd),colon:new ui(":",dd),dot:new ui("."),question:new ui("?",dd),questionDot:new ui("?."),arrow:new ui("=>",dd),template:new ui("template"),invalidTemplate:new ui("invalidTemplate"),ellipsis:new ui("...",dd),backQuote:new ui("`",sc),dollarBraceL:new ui("${",{beforeExpr:!0,startsExpr:!0}),eq:new ui("=",{beforeExpr:!0,isAssign:!0}),assign:new ui("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ui("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ui("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:fd("||",1),logicalAND:fd("&&",2),bitwiseOR:fd("|",3),bitwiseXOR:fd("^",4),bitwiseAND:fd("&",5),equality:fd("==/!=/===/!==",6),relational:fd("</>/<=/>=",7),bitShift:fd("<</>>/>>>",8),plusMin:new ui("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:fd("%",10),star:fd("*",10),slash:fd("/",10),starstar:new ui("**",{beforeExpr:!0}),coalesce:fd("??",1),_break:Hr("break"),_case:Hr("case",dd),_catch:Hr("catch"),_continue:Hr("continue"),_debugger:Hr("debugger"),_default:Hr("default",dd),_do:Hr("do",{isLoop:!0,beforeExpr:!0}),_else:Hr("else",dd),_finally:Hr("finally"),_for:Hr("for",{isLoop:!0}),_function:Hr("function",sc),_if:Hr("if"),_return:Hr("return",dd),_switch:Hr("switch"),_throw:Hr("throw",dd),_try:Hr("try"),_var:Hr("var"),_const:Hr("const"),_while:Hr("while",{isLoop:!0}),_with:Hr("with"),_new:Hr("new",{beforeExpr:!0,startsExpr:!0}),_this:Hr("this",sc),_super:Hr("super",sc),_class:Hr("class",sc),_extends:Hr("extends",dd),_export:Hr("export"),_import:Hr("import",sc),_null:Hr("null",sc),_true:Hr("true",sc),_false:Hr("false",sc),_in:Hr("in",{beforeExpr:!0,binop:7}),_instanceof:Hr("instanceof",{beforeExpr:!0,binop:7}),_typeof:Hr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Hr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Hr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},rh=/\r\n?|\n|\u2028|\u2029/,GFt=new RegExp(rh.source,"g");function iA(e){return e===10||e===13||e===8232||e===8233}function KFe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(iA(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var XFe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ad=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,QFe=Object.prototype,YFt=QFe.hasOwnProperty,KFt=QFe.toString,BN=Object.hasOwn||function(e,t){return YFt.call(e,t)},Mve=Array.isArray||function(e){return KFt.call(e)==="[object Array]"},$ve=Object.create(null);function V1(e){return $ve[e]||($ve[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Yv(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var XFt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,n3=function(t,n){this.line=t,this.column=n};n3.prototype.offset=function(t){return new n3(this.line,this.column+t)};var s9=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function JFe(e,t){for(var n=1,r=0;;){var i=KFe(e,r,t);if(i<0)return new n3(n,t-r);++n,r=i}}var wK={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Lve=!1;function QFt(e){var t={};for(var n in wK)t[n]=e&&BN(e,n)?e[n]:wK[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Lve&&typeof console=="object"&&console.warn&&(Lve=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Mve(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Mve(t.onComment)&&(t.onComment=JFt(t,t.onComment)),t}function JFt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new s9(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var r3=1,sA=2,zre=4,ZFe=8,eMe=16,tMe=32,Vre=64,nMe=128,jN=256,Hre=r3|sA|jN;function qre(e,t){return sA|(e?zre:0)|(t?ZFe:0)}var v5=0,Wre=1,Fy=2,rMe=3,iMe=4,sMe=5,ga=function(t,n,r){this.options=t=QFt(t),this.sourceFile=t.sourceFile,this.keywords=V1(VFt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=TH[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=V1(i);var s=(i?i+" ":"")+TH.strict;this.reservedWordsStrict=V1(s),this.reservedWordsStrictBind=V1(s+" "+TH.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(rh).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=ne.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(r3),this.regexpState=null,this.privateNameStack=[]},g0={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ga.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};g0.inFunction.get=function(){return(this.currentVarScope().flags&sA)>0};g0.inGenerator.get=function(){return(this.currentVarScope().flags&ZFe)>0&&!this.currentVarScope().inClassFieldInit};g0.inAsync.get=function(){return(this.currentVarScope().flags&zre)>0&&!this.currentVarScope().inClassFieldInit};g0.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&jN)return!1;if(t.flags&sA)return(t.flags&zre)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};g0.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Vre)>0||n||this.options.allowSuperOutsideMethod};g0.allowDirectSuper.get=function(){return(this.currentThisScope().flags&nMe)>0};g0.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};g0.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(sA|jN))>0||n};g0.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&jN)>0};ga.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};ga.parse=function(t,n){return new this(n,t).parse()};ga.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};ga.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(ga.prototype,g0);var Xl=ga.prototype,ZFt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Xl.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Ad.lastIndex=e,e+=Ad.exec(this.input)[0].length;var t=ZFt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Ad.lastIndex=e+t[0].length;var n=Ad.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||rh.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Ad.lastIndex=e,e+=Ad.exec(this.input)[0].length,this.input[e]===";"&&e++}};Xl.eat=function(e){return this.type===e?(this.next(),!0):!1};Xl.isContextual=function(e){return this.type===ne.name&&this.value===e&&!this.containsEsc};Xl.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Xl.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Xl.canInsertSemicolon=function(){return this.type===ne.eof||this.type===ne.braceR||rh.test(this.input.slice(this.lastTokEnd,this.start))};Xl.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Xl.semicolon=function(){!this.eat(ne.semi)&&!this.insertSemicolon()&&this.unexpected()};Xl.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Xl.expect=function(e){this.eat(e)||this.unexpected()};Xl.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var o9=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Xl.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Xl.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Xl.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Xl.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var cn=ga.prototype;cn.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==ne.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Gre={kind:"loop"},eMt={kind:"switch"};cn.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Ad.lastIndex=this.pos;var t=Ad.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(fy(r,!0)){for(var i=n+1;MC(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!HFt.test(s))return!0}return!1};cn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Ad.lastIndex=this.pos;var e=Ad.exec(this.input),t=this.pos+e[0].length,n;return!rh.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(MC(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};cn.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=ne._var,s="let"),r){case ne._break:case ne._continue:return this.parseBreakContinueStatement(i,r.keyword);case ne._debugger:return this.parseDebuggerStatement(i);case ne._do:return this.parseDoStatement(i);case ne._for:return this.parseForStatement(i);case ne._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case ne._class:return e&&this.unexpected(),this.parseClass(i,!0);case ne._if:return this.parseIfStatement(i);case ne._return:return this.parseReturnStatement(i);case ne._switch:return this.parseSwitchStatement(i);case ne._throw:return this.parseThrowStatement(i);case ne._try:return this.parseTryStatement(i);case ne._const:case ne._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case ne._while:return this.parseWhileStatement(i);case ne._with:return this.parseWithStatement(i);case ne.braceL:return this.parseBlock(!0,i);case ne.semi:return this.parseEmptyStatement(i);case ne._export:case ne._import:if(this.options.ecmaVersion>10&&r===ne._import){Ad.lastIndex=this.pos;var o=Ad.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===ne._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===ne.name&&c.type==="Identifier"&&this.eat(ne.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};cn.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(ne.semi)||this.insertSemicolon()?e.label=null:this.type!==ne.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};cn.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};cn.parseDoStatement=function(e){return this.next(),this.labels.push(Gre),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(ne._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(ne.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};cn.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Gre),this.enterScope(0),this.expect(ne.parenL),this.type===ne.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===ne._var||this.type===ne._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===ne._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new o9,u=this.parseExpression(t>-1?"await":!0,a);return this.type===ne._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===ne._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};cn.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Ak|(n?0:_K),!1,t)};cn.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(ne._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};cn.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(ne.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};cn.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(ne.braceL),this.labels.push(eMt),this.enterScope(0);for(var t,n=!1;this.type!==ne.braceR;)if(this.type===ne._case||this.type===ne._default){var r=this.type===ne._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(ne.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};cn.parseThrowStatement=function(e){return this.next(),rh.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var tMt=[];cn.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?tMe:0),this.checkLValPattern(e,t?iMe:Fy),this.expect(ne.parenR),e};cn.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===ne._catch){var t=this.startNode();this.next(),this.eat(ne.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(ne._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};cn.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};cn.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Gre),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};cn.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};cn.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};cn.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===ne._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};cn.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};cn.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(ne.braceL),e&&this.enterScope(0);this.type!==ne.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};cn.parseFor=function(e,t){return e.init=t,this.expect(ne.semi),e.test=this.type===ne.semi?null:this.parseExpression(),this.expect(ne.semi),e.update=this.type===ne.parenR?null:this.parseExpression(),this.expect(ne.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};cn.parseForIn=function(e,t){var n=this.type===ne._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(ne.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};cn.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(ne.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===ne._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(ne.comma))break}return e};cn.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Wre:Fy,!1)};var Ak=1,_K=2,oMe=4;cn.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===ne.star&&t&_K&&this.unexpected(),e.generator=this.eat(ne.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&Ak&&(e.id=t&oMe&&this.type!==ne.name?null:this.parseIdent(),e.id&&!(t&_K)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Wre:Fy:rMe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(qre(e.async,e.generator)),t&Ak||(e.id=this.type===ne.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&Ak?"FunctionDeclaration":"FunctionExpression")};cn.parseFunctionParams=function(e){this.expect(ne.parenL),e.params=this.parseBindingList(ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};cn.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(ne.braceL);this.type!==ne.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&nMt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};cn.parseClassElement=function(e){if(this.eat(ne.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(ne.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===ne.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===ne.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(ne.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===ne.parenL||o!=="method"||i||s){var l=!n.static&&b5(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};cn.isClassElementNameStart=function(){return this.type===ne.name||this.type===ne.privateId||this.type===ne.num||this.type===ne.string||this.type===ne.bracketL||this.type.keyword};cn.parseClassElementName=function(e){this.type===ne.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};cn.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&b5(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};cn.parseClassField=function(e){if(b5(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&b5(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(ne.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};cn.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(jN|Vre);this.type!==ne.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};cn.parseClassId=function(e,t){this.type===ne.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Fy,!1)):(t===!0&&this.unexpected(),e.id=null)};cn.parseClassSuper=function(e){e.superClass=this.eat(ne._extends)?this.parseExprSubscripts(null,!1):null};cn.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};cn.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];BN(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function nMt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function b5(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}cn.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==ne.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};cn.parseExport=function(e,t){if(this.next(),this.eat(ne.star))return this.parseExportAllDeclaration(e,t);if(this.eat(ne._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==ne.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};cn.parseExportDeclaration=function(e){return this.parseStatement(null)};cn.parseExportDefaultDeclaration=function(){var e;if(this.type===ne._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,Ak|oMe,!1,e)}else if(this.type===ne._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};cn.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),BN(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};cn.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};cn.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};cn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};cn.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};cn.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(ne.braceL);!this.eat(ne.braceR);){if(n)n=!1;else if(this.expect(ne.comma),this.afterTrailingComma(ne.braceR))break;t.push(this.parseExportSpecifier(e))}return t};cn.parseImport=function(e){return this.next(),this.type===ne.string?(e.specifiers=tMt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===ne.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};cn.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Fy),this.finishNode(e,"ImportSpecifier")};cn.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Fy),this.finishNode(e,"ImportDefaultSpecifier")};cn.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Fy),this.finishNode(e,"ImportNamespaceSpecifier")};cn.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===ne.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(ne.comma)))return e;if(this.type===ne.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(ne.braceL);!this.eat(ne.braceR);){if(t)t=!1;else if(this.expect(ne.comma),this.afterTrailingComma(ne.braceR))break;e.push(this.parseImportSpecifier())}return e};cn.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===ne.string){var e=this.parseLiteral(this.value);return XFt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};cn.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};cn.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var ih=ga.prototype;ih.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};ih.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};ih.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};ih.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==ne.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};ih.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case ne.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(ne.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case ne.braceL:return this.parseObj(!0)}return this.parseIdent()};ih.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(ne.comma),t&&this.type===ne.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===ne.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};ih.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};ih.parseBindingListItem=function(e){return e};ih.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(ne.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};ih.checkLValSimple=function(e,t,n){t===void 0&&(t=v5);var r=t!==v5;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Fy&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(BN(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==sMe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};ih.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=v5),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};ih.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=v5),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Eh=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Bs={b_stat:new Eh("{",!1),b_expr:new Eh("{",!0),b_tmpl:new Eh("${",!1),p_stat:new Eh("(",!1),p_expr:new Eh("(",!0),q_tmpl:new Eh("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Eh("function",!1),f_expr:new Eh("function",!0),f_expr_gen:new Eh("function",!0,!1,null,!0),f_gen:new Eh("function",!1,!1,null,!0)},oA=ga.prototype;oA.initialContext=function(){return[Bs.b_stat]};oA.curContext=function(){return this.context[this.context.length-1]};oA.braceIsBlock=function(e){var t=this.curContext();return t===Bs.f_expr||t===Bs.f_stat?!0:e===ne.colon&&(t===Bs.b_stat||t===Bs.b_expr)?!t.isExpr:e===ne._return||e===ne.name&&this.exprAllowed?rh.test(this.input.slice(this.lastTokEnd,this.start)):e===ne._else||e===ne.semi||e===ne.eof||e===ne.parenR||e===ne.arrow?!0:e===ne.braceL?t===Bs.b_stat:e===ne._var||e===ne._const||e===ne.name?!1:!this.exprAllowed};oA.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};oA.updateContext=function(e){var t,n=this.type;n.keyword&&e===ne.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};oA.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};ne.parenR.updateContext=ne.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Bs.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};ne.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Bs.b_stat:Bs.b_expr),this.exprAllowed=!0};ne.dollarBraceL.updateContext=function(){this.context.push(Bs.b_tmpl),this.exprAllowed=!0};ne.parenL.updateContext=function(e){var t=e===ne._if||e===ne._for||e===ne._with||e===ne._while;this.context.push(t?Bs.p_stat:Bs.p_expr),this.exprAllowed=!0};ne.incDec.updateContext=function(){};ne._function.updateContext=ne._class.updateContext=function(e){e.beforeExpr&&e!==ne._else&&!(e===ne.semi&&this.curContext()!==Bs.p_stat)&&!(e===ne._return&&rh.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===ne.colon||e===ne.braceL)&&this.curContext()===Bs.b_stat)?this.context.push(Bs.f_expr):this.context.push(Bs.f_stat),this.exprAllowed=!1};ne.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};ne.backQuote.updateContext=function(){this.curContext()===Bs.q_tmpl?this.context.pop():this.context.push(Bs.q_tmpl),this.exprAllowed=!1};ne.star.updateContext=function(e){if(e===ne._function){var t=this.context.length-1;this.context[t]===Bs.f_expr?this.context[t]=Bs.f_expr_gen:this.context[t]=Bs.f_gen}this.exprAllowed=!0};ne.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==ne.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Kn=ga.prototype;Kn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Kn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===ne.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(ne.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Kn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new o9,r=!0);var a=this.start,u=this.startLoc;(this.type===ne.parenL||this.type===ne.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===ne.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===ne.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Kn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(ne.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(ne.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Kn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Kn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==ne._in)&&s>r){var o=this.type===ne.logicalOR||this.type===ne.logicalAND,a=this.type===ne.coalesce;a&&(s=ne.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===ne.coalesce||a&&(this.type===ne.logicalOR||this.type===ne.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Kn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Kn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===ne.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&aMe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===ne.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==ne._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(ne.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function aMe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&aMe(e.expression)}Kn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Kn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Kn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(ne.arrow)};Kn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Kn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(ne.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(ne.bracketL);if(l||u&&this.type!==ne.parenL&&this.type!==ne.backQuote||this.eat(ne.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(ne.bracketR)):this.type===ne.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(ne.parenL)){var f=new o9,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(ne.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===ne.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Kn.parseExprAtom=function(e,t,n){this.type===ne.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case ne._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===ne.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==ne.dot&&this.type!==ne.bracketL&&this.type!==ne.parenL&&this.unexpected(),this.finishNode(r,"Super");case ne._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case ne.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(ne._function))return this.overrideContext(Bs.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(ne.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===ne.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(ne.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case ne.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case ne.num:case ne.string:return this.parseLiteral(this.value);case ne._null:case ne._true:case ne._false:return r=this.startNode(),r.value=this.type===ne._null?null:this.type===ne._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case ne.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case ne.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(ne.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case ne.braceL:return this.overrideContext(Bs.b_expr),this.parseObj(!1,e);case ne._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case ne._class:return this.parseClass(this.startNode(),!1);case ne._new:return this.parseNew();case ne.backQuote:return this.parseTemplate();case ne._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Kn.parseExprAtomDefault=function(){this.unexpected()};Kn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===ne.parenL&&!e)return this.parseDynamicImport(t);if(this.type===ne.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Kn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(ne.parenR)){var t=this.start;this.eat(ne.comma)&&this.eat(ne.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Kn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Kn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Kn.parseParenExpression=function(){this.expect(ne.parenL);var e=this.parseExpression();return this.expect(ne.parenR),e};Kn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Kn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new o9,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==ne.parenR;)if(l?l=!1:this.expect(ne.comma),s&&this.afterTrailingComma(ne.parenR,!0)){c=!0;break}else if(this.type===ne.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(ne.parenR),e&&this.shouldParseArrow(u)&&this.eat(ne.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Kn.parseParenItem=function(e){return e};Kn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var rMt=[];Kn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===ne.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(ne.parenL)?e.arguments=this.parseExprList(ne.parenR,this.options.ecmaVersion>=8,!1):e.arguments=rMt,this.finishNode(e,"NewExpression")};Kn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===ne.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===ne.backQuote,this.finishNode(n,"TemplateElement")};Kn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===ne.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(ne.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(ne.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Kn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===ne.name||this.type===ne.num||this.type===ne.string||this.type===ne.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===ne.star)&&!rh.test(this.input.slice(this.lastTokEnd,this.start))};Kn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(ne.braceR);){if(r)r=!1;else if(this.expect(ne.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(ne.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Kn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(ne.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===ne.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(ne.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(ne.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Kn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Kn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===ne.colon&&this.unexpected(),this.eat(ne.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===ne.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==ne.comma&&this.type!==ne.braceR&&this.type!==ne.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===ne.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Kn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(ne.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(ne.bracketR),e.key;e.computed=!1}return e.key=this.type===ne.num||this.type===ne.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Kn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Kn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(qre(t,r.generator)|Vre|(n?nMe:0)),this.expect(ne.parenL),r.params=this.parseBindingList(ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Kn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(qre(n,!1)|eMe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Kn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==ne.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,sMe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Kn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Kn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,Wre,t?null:n)}};Kn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(ne.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===ne.comma?o=null:this.type===ne.ellipsis?(o=this.parseSpread(r),r&&this.type===ne.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Kn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Kn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Kn.parseIdentNode=function(){var e=this.startNode();return this.type===ne.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=ne.name):this.unexpected(),e};Kn.parsePrivateIdent=function(){var e=this.startNode();return this.type===ne.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Kn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===ne.semi||this.canInsertSemicolon()||this.type!==ne.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(ne.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Kn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var x5=ga.prototype;x5.raise=function(e,t){var n=JFe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};x5.raiseRecoverable=x5.raise;x5.curPosition=function(){if(this.options.locations)return new n3(this.curLine,this.pos-this.lineStart)};var Bb=ga.prototype,iMt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Bb.enterScope=function(e){this.scopeStack.push(new iMt(e))};Bb.exitScope=function(){this.scopeStack.pop()};Bb.treatFunctionsAsVarInScope=function(e){return e.flags&sA||!this.inModule&&e.flags&r3};Bb.declareName=function(e,t,n){var r=!1;if(t===Fy){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&r3&&delete this.undefinedExports[e]}else if(t===iMe){var s=this.currentScope();s.lexical.push(e)}else if(t===rMe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&tMe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&r3&&delete this.undefinedExports[e],u.flags&Hre)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Bb.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Bb.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Bb.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Hre)return t}};Bb.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Hre&&!(t.flags&eMe))return t}};var a9=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new s9(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},UN=ga.prototype;UN.startNode=function(){return new a9(this,this.start,this.startLoc)};UN.startNodeAt=function(e,t){return new a9(this,e,t)};function uMe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}UN.finishNode=function(e,t){return uMe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};UN.finishNodeAt=function(e,t,n,r){return uMe.call(this,e,t,n,r)};UN.copyNode=function(e){var t=new a9(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var lMe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",cMe=lMe+" Extended_Pictographic",fMe=cMe,dMe=fMe+" EBase EComp EMod EPres ExtPict",hMe=dMe,sMt=hMe,oMt={9:lMe,10:cMe,11:fMe,12:dMe,13:hMe,14:sMt},aMt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",uMt={9:"",10:"",11:"",12:"",13:"",14:aMt},Bve="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",pMe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",mMe=pMe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",gMe=mMe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",yMe=gMe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",vMe=yMe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",lMt=vMe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",cMt={9:pMe,10:mMe,11:gMe,12:yMe,13:vMe,14:lMt},bMe={};function fMt(e){var t=bMe[e]={binary:V1(oMt[e]+" "+Bve),binaryOfStrings:V1(uMt[e]),nonBinary:{General_Category:V1(Bve),Script:V1(cMt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var DH=0,jve=[9,10,11,12,13,14];DH<jve.length;DH+=1){var dMt=jve[DH];fMt(dMt)}var Zt=ga.prototype,y0=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=bMe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};y0.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};y0.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};y0.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};y0.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};y0.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};y0.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};y0.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};y0.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};y0.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Zt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Zt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Zt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Zt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Zt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Zt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Zt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Zt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Zt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Zt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Zt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Zt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Zt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Zt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Zt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Zt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Zt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return xMe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function xMe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Zt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!xMe(n);)e.advance();return e.pos!==t};Zt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Zt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Zt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Zt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Yv(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Yv(e.lastIntValue);return!0}return!1};Zt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),hMt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function hMt(e){return fy(e,!0)||e===36||e===95}Zt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),pMt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function pMt(e){return MC(e,!0)||e===36||e===95||e===8204||e===8205}Zt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Zt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Zt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Zt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Zt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Zt.regexp_eatZero=function(e){return e.current()===48&&!u9(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Zt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Zt.regexp_eatControlLetter=function(e){var t=e.current();return wMe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function wMe(e){return e>=65&&e<=90||e>=97&&e<=122}Zt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&mMt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function mMt(e){return e>=0&&e<=1114111}Zt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Zt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var _Me=0,dy=1,kd=2;Zt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(gMt(t))return e.lastIntValue=-1,e.advance(),dy;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===kd&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return _Me};function gMt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Zt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),dy}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return _Me};Zt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){BN(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Zt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return dy;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return kd;e.raise("Invalid property name")};Zt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";EMe(t=e.current());)e.lastStringValue+=Yv(t),e.advance();return e.lastStringValue!==""};function EMe(e){return wMe(e)||e===95}Zt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";yMt(t=e.current());)e.lastStringValue+=Yv(t),e.advance();return e.lastStringValue!==""};function yMt(e){return EMe(e)||u9(e)}Zt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Zt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===kd&&e.raise("Negated character class may contain strings"),!0}return!1};Zt.regexp_classContents=function(e){return e.current()===93?dy:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),dy)};Zt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Zt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||TMe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Zt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Zt.regexp_classSetExpression=function(e){var t=dy,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===kd&&(t=kd);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==kd&&(t=dy);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===kd&&(t=kd)}};Zt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Zt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?dy:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Zt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===kd&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Zt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Zt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===kd&&(t=kd);return t};Zt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?dy:kd};Zt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&vMt(n)||bMt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function vMt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function bMt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Zt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return xMt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function xMt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Zt.regexp_eatClassControlLetter=function(e){var t=e.current();return u9(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Zt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Zt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;u9(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function u9(e){return e>=48&&e<=57}Zt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;SMe(n=e.current());)e.lastIntValue=16*e.lastIntValue+CMe(n),e.advance();return e.pos!==t};function SMe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function CMe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Zt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Zt.regexp_eatOctalDigit=function(e){var t=e.current();return TMe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function TMe(e){return e>=48&&e<=55}Zt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!SMe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+CMe(i),e.advance()}return!0};var Yre=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new s9(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Lr=ga.prototype;Lr.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Yre(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Lr.getToken=function(){return this.next(),new Yre(this)};typeof Symbol<"u"&&(Lr[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===ne.eof,value:t}}}});Lr.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(ne.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Lr.readToken=function(e){return fy(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Lr.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Lr.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=KFe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Lr.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!iA(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Lr.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&XFe.test(String.fromCharCode(e)))++this.pos;else break e}}};Lr.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Lr.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(ne.ellipsis)):(++this.pos,this.finishToken(ne.dot))};Lr.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(ne.assign,2):this.finishOp(ne.slash,1)};Lr.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?ne.star:ne.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=ne.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(ne.assign,n+1):this.finishOp(r,n)};Lr.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(ne.assign,3)}return this.finishOp(e===124?ne.logicalOR:ne.logicalAND,2)}return t===61?this.finishOp(ne.assign,2):this.finishOp(e===124?ne.bitwiseOR:ne.bitwiseAND,1)};Lr.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(ne.assign,2):this.finishOp(ne.bitwiseXOR,1)};Lr.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||rh.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(ne.incDec,2):t===61?this.finishOp(ne.assign,2):this.finishOp(ne.plusMin,1)};Lr.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(ne.assign,n+1):this.finishOp(ne.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(ne.relational,n))};Lr.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(ne.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(ne.arrow)):this.finishOp(e===61?ne.eq:ne.prefix,1)};Lr.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(ne.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(ne.assign,3)}return this.finishOp(ne.coalesce,2)}}return this.finishOp(ne.question,1)};Lr.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),fy(t,!0)||t===92))return this.finishToken(ne.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Yv(t)+"'")};Lr.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(ne.parenL);case 41:return++this.pos,this.finishToken(ne.parenR);case 59:return++this.pos,this.finishToken(ne.semi);case 44:return++this.pos,this.finishToken(ne.comma);case 91:return++this.pos,this.finishToken(ne.bracketL);case 93:return++this.pos,this.finishToken(ne.bracketR);case 123:return++this.pos,this.finishToken(ne.braceL);case 125:return++this.pos,this.finishToken(ne.braceR);case 58:return++this.pos,this.finishToken(ne.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(ne.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(ne.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Yv(e)+"'")};Lr.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Lr.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(rh.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new y0(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(ne.regexp,{pattern:i,flags:o,value:u})};Lr.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function wMt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function AMe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Lr.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=AMe(this.input.slice(t,this.pos)),++this.pos):fy(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ne.num,n)};Lr.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=AMe(this.input.slice(t,this.pos));return++this.pos,fy(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ne.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),fy(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=wMt(this.input.slice(t,this.pos),n);return this.finishToken(ne.num,s)};Lr.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Lr.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(iA(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(ne.string,t)};var DMe={};Lr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===DMe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Lr.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw DMe;this.raise(e,t)};Lr.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===ne.template||this.type===ne.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(ne.dollarBraceL)):(++this.pos,this.finishToken(ne.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(ne.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(iA(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Lr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(ne.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Lr.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Yv(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return iA(t)?"":String.fromCharCode(t)}};Lr.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Lr.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(MC(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?fy:MC)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Yv(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Lr.readWord=function(){var e=this.readWord1(),t=ne.name;return this.keywords.test(e)&&(t=Ure[e]),this.finishToken(t,e)};var _Mt="8.11.3";ga.acorn={Parser:ga,version:_Mt,defaultOptions:wK,Position:n3,SourceLocation:s9,getLineInfo:JFe,Node:a9,TokenType:ui,tokTypes:ne,keywordTypes:Ure,TokContext:Eh,tokContexts:Bs,isIdentifierChar:MC,isIdentifierStart:fy,Token:Yre,isNewLine:iA,lineBreak:rh,lineBreakG:GFt,nonASCIIwhitespace:XFe};function EMt(e,t){return ga.parse(e,t)}const Kre={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},SMt={ecmaVersion:11},Uve="$",CMt="d",TMt="d1",AMt="d2",eu=e=>(t,n)=>n.error(t,e+" not allowed"),DMt=eu("Aggregate function"),IMt=eu("Window function"),kMt="Invalid argument",Xre="Invalid column reference",RMt=Xre+" (must be input to an aggregate function)",IMe="Invalid function call",NMt="Invalid member expression",PMt="Invalid operator parameter",OMt="Invalid param reference",FMt="Invalid variable reference",MMt="Variable not accessible in operator call",$Mt="Unsupported variable declaration",LMt="Unsupported destructuring pattern",kMe="Table expressions do not support closures",RMe="Use aq.escape(fn) to use a function as-is (including closures)",BMt="use table.params({ name: value }) to define dynamic parameters",jMt="use aq.addFunction(name, fn) to add new op functions",UMt=`
Note: ${kMe}. ${RMe}, or ${BMt}.`,NMe=`
Note: ${kMe}. ${RMe}, or ${jMt}.`,zMt=`The ${N4e} method is not valid in multi-table expressions.`;function VMt(e,t){const n=HMt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,$Ft(r)?(WMt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=TMt),e.scope.add(e.tuple2=AMt),e.scope.add(e.$param=Uve)):(e.scope.add(e.tuple=CMt),e.scope.add(e.$param=Uve)),ei(r,e,Qre),e.root}function HMt(e){try{const t=e.field?qMt(e):pi(e)?Gm(e):e;return EMt(`expr=(${t})`,SMt).body[0].expression.right}catch{pr(`Expression parse error: ${e+""}`)}}function qMt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const Qre={FunctionDeclaration:eu("Function definitions"),ForStatement:eu("For loops"),ForOfStatement:eu("For-of loops"),ForInStatement:eu("For-in loops"),WhileStatement:eu("While loops"),DoWhileStatement:eu("Do-while loops"),AwaitExpression:eu("Await expressions"),ArrowFunctionExpression:eu("Function definitions"),AssignmentExpression:eu("Assignments"),FunctionExpression:eu("Function definitions"),NewExpression:eu('Use of "new"'),UpdateExpression:eu("Update expressions"),VariableDeclarator(e,t){CK(e.id,t)},Identifier(e,t,n){FMe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,FMt,UMt)},CallExpression(e,t){const n=PMe(e.callee),r=I4e(n)||k4e(n);if(r){if((t.join||t.aggregate===!1)&&jne(n)&&DMt(e,t),(t.join||t.window===!1)&&Une(n)&&IMt(e,t),t.$op=1,t.ast)SK(e,n,t),e.arguments.forEach(i=>ei(i,t,EK));else{const i=t.op(GMt(t,r,n,e.arguments));Object.assign(e,{type:S4e,name:i.id})}return t.$op=0,!1}else D4e(n)?SK(e,n,t):t.error(e,IMe,NMe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!oa(pv,r))return;const{name:s}=r;if(OMe(e)&&oa(pv,i)&&pp(Kre,i.name)){LMe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return zve(e,o,t,MMe,n);if(s===t.$param)return zve(e,o,t,KMt);t.paramsRef.has(s)?i3(e,t.paramsRef.get(s)):t.columnRef.has(s)?$Me(r,s,t,e):pp(t.params,s)&&i3(r,s)}};function zve(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(oa(ZT,s))a=s.value;else try{ei(s,n,Qre,e),a=n.param(s)}catch{n.error(e,NMt)}return r(e,a,t,n,i),!1}const EK={...Qre,VariableDeclarator:eu("Variable declaration in operator call"),Identifier(e,t,n){FMe(e,t,n)&&t.error(e,MMt)},CallExpression(e,t){const n=PMe(e.callee);D4e(n)?SK(e,n,t):t.error(e,IMe,NMe)}};function WMt(e,t){e.generator&&eu("Generator functions")(e,t),e.async&&eu("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(ND(t,n[0],"tuple1",i(1)),r>1&&ND(t,n[1],"tuple2",i(2)),r>2&&ND(t,n[2],"$param",s)):(ND(t,n[0],"tuple",i(0)),r>1&&ND(t,n[1],"$param",s))),t.root=e.body}function ND(e,t,n,r){oa(pv,t)?(e.scope.add(t.name),e[n]=t.name):oa(_4e,t)&&t.properties.forEach(i=>{const s=oa(pv,i.key)?i.key.name:oa(ZT,i.key)?i.key.value:e.error(i,kMt);oa(pv,i.value)||e.error(i.value,LMt),r(i.value.name,s)})}function GMt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(ei(u,e,EK),i.push(e.field(u))):l<a?(ei(u,e,EK),s.push(e.param(u))):e.error(u,PMt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function PMe(e){return oa(pv,e)?e.name:oa(w4e,e)?OMe(e)?YMt(e.property.name):e.property.name:null}function OMe(e){return oa(pv,e.object)&&e.object.name==="Math"}function YMt(e){return e==="max"?"greatest":e==="min"?"least":e}function FMe(e,t,n){const{name:r}=e;if(!(oa(w4e,n)&&n.property===e)){if(!(oa(E4e,n)&&n.key===e))if(t.paramsRef.has(r))i3(e,t.paramsRef.get(r));else if(t.columnRef.has(r))$Me(e,r,t,n);else if(pp(t.params,r))i3(e,r);else if(pp(Kre,r))LMe(e,r);else return!0}}function MMe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,Xre),r.aggronly&&!r.$op&&r.error(e,RMt),R4e(e,t,n,o,i)}function $Me(e,t,n,r){const[i,s]=n.columnRef.get(t);MMe(e,i,s,n,r)}function KMt(e,t,n,r){r.params&&!pp(r.params,t)&&r.error(e,OMt),i3(e,t)}function i3(e,t){e.type=LPt,e.name=t}function LMe(e,t){e.type=FPt,e.name=t,e.raw=Kre[t]}function SK(e,t,n){if(t===N4e){const r=n.table;r||n.error(e,zMt),P4e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Vl(s)?r.columnName(s):s;return r.column(o)||n.error(i,Xre),o}):r.columnNames())}else e.callee={type:$Pt,name:t}}function CK(e,t){oa(pv,e)?t.scope.add(e.name):oa(RPt,e)?e.elements.forEach(n=>CK(n,t)):oa(_4e,e)?e.properties.forEach(n=>CK(n.value,t)):t.error(e.id,$Mt)}const XMt={[PN]:1,[S4e]:1};function Wc(e,t={}){const n=t.generate||J8,r=t.compiler||zne,i=JMt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=QMt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return oa(ZT,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?MFt(g):f(n(g),i));u.push(y),XMt[g.type]&&y!==g&&tl(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,_=String(d.spec).slice(v,b);pr(`${g}: "${_}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of qB(e))d.value(m+"",g.escape?jFt(d,g,i):VMt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function QMt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function JMt(e){return(e.table?IH(e.table):e.join?{...IH(e.join[1]),...IH(e.join[0])}:{})||{}}function IH(e){return e&&Ts(e.params)?e.params():{}}const BMe="Expr",Sh="ExprList",jMe="ExprNumber",RI="ExprObject",Z2="JoinKeys",w5="JoinValues",bd="Options",Jre="OrderKeys",d1="SelectionList",Xx="TableRef",eS="TableRefList",ZMt="Descending",e8t="Query",t8t="Selection",n8t="Verb",r8t="Window";function l9(e,t){return e&&e.expr?new Vve({...e,...t}):new Vve(t,e)}class Vve{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Ts(this.expr)?{func:!0}:{}}}}function i8t(e){return l9(e,{desc:!0})}function s_(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return l9(e,t?{expr:t,...r}:r)}function s8t(e,t,n){return l9(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function o8t(e){const t=n=>n;return t.toString=()=>e,t}function Hve(e,t){return t=t&&Ts(t.query)?t.query():t,t&&Ts(t.evaluate)?t.evaluate(null,e):e(t)}function UMe(e){return tl(e)&&(pi(e.all)||pi(e.matches)||pi(e.not)||pi(e.range))}function s3(e){return e&&Ts(e.toObject)?e.toObject():Ts(e)?{expr:String(e),func:!0}:pi(e)?e.map(s3):tl(e)?r9(e,t=>s3(t)):e}function Zre(e){return pi(e)?e.map(Zre):tl(e)?pi(e.verbs)?tie.from(e):pi(e.all)?FC():pi(e.range)?RFt(...e.range):pi(e.match)?NFt(RegExp(...e.match)):pi(e.not)?qFe(e.not.map(s3)):a8t(e):e}function a8t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=s_(n):e.func===!0&&(t=n=o8t(n)),tl(e.window)){const{frame:r,peers:i}=e.window;t=n=s8t(n,r,i)}e.desc===!0&&(t=i8t(n))}return e===t?r9(e,r=>Zre(r)):t}function u8t(e){return pi(e)?e.map(l8t):e}function l8t(e){const t=[];return Vc(e).forEach(n=>{Vl(n)?t.push(n):yu(n)?t.push(s_(n,null)):tl(n)&&n.expr||Ts(n)?t.push(n):pr(`Invalid key value: ${n+""}`)}),t}function c8t(e){return pi(e)?e.map(f8t):e}function f8t(e,t){return t<2?Vc(e):e}function d8t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(tl(r)&&!Ts(r))for(const i in r)t.push(r[i]);else n=Vl(r)?r:yu(r)?s_(n):Ts(r)?n:pr(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const h8t={[BMe]:qMe,[Sh]:$C,[jMe]:b8t,[RI]:Kv,[Z2]:x8t,[w5]:w8t,[Jre]:$C,[d1]:y8t};function p8t(e,t,n){return t===Xx?qve(e):t===eS?e.map(qve):zMe(s3(e),t,n)}function zMe(e,t,n){return t===bd?e&&m8t(e,n):h8t[t](e)}function m8t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?zMe(i,t[r]):i}return n}function g8t(e,t){return Wc({expr:e},{...t,ast:!0}).exprs[0]}function eie(e){return{type:PN,name:e}}function VMe(e){return{type:PN,index:e}}function Kv(e,t){if(yu(e))return g8t(e,t);if(e.expr){let n;if(e.field===!0?n=eie(e.expr):e.func===!0&&(n=Kv(e.expr,t)),n)return e.desc&&(n={type:ZMt,expr:n}),e.window&&(n={type:r8t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Kv(e[n],t),as:n}))}function HMe(e){const t=t8t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:$C(e.not)}:e.range?{type:t,operator:"range",arguments:$C(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:pr("Invalid input")}function y8t(e){return Vc(e).map(v8t).flat()}function v8t(e){return UMe(e)?HMe(e):Vl(e)?VMe(e):yu(e)?eie(e):tl(e)?Object.keys(e).map(t=>({type:PN,name:t,as:e[t]})):pr("Invalid input")}function qMe(e){return UMe(e)?HMe(e):Vl(e)?VMe(e):yu(e)?eie(e):tl(e)?Kv(e):pr("Invalid input")}function $C(e){return Vc(e).map(qMe).flat()}function b8t(e){return Vl(e)?e:Kv(e)}function x8t(e){return pi(e)?e.map($C):Kv(e,{join:!0})}function w8t(e){return pi(e)?e.map((t,n)=>n<2?$C(t):Kv(t,{join:!0})):Kv(e,{join:!0})}function qve(e){return e&&Ts(e.toAST)?e.toAST():e}class WMe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Z2?u8t(a):o===w5?c8t(a):o===Jre?d8t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=TK[t.verb],r=(n.schema||[]).map(({name:i})=>Zre(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Xx?Hve(n,o):s===eS?o.map(a=>Hve(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=s3(this[n])}),t}toAST(){const t={type:n8t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=p8t(this[n],r,i)}),t}}function Gi(e,t){return Object.assign((...n)=>new WMe(e,t,n),{schema:t})}const TK={count:Gi("count",[{name:"options",type:bd}]),derive:Gi("derive",[{name:"values",type:RI},{name:"options",type:bd,props:{before:d1,after:d1}}]),filter:Gi("filter",[{name:"criteria",type:RI}]),groupby:Gi("groupby",[{name:"keys",type:Sh}]),orderby:Gi("orderby",[{name:"keys",type:Jre}]),relocate:Gi("relocate",[{name:"columns",type:d1},{name:"options",type:bd,props:{before:d1,after:d1}}]),rename:Gi("rename",[{name:"columns",type:d1}]),rollup:Gi("rollup",[{name:"values",type:RI}]),sample:Gi("sample",[{name:"size",type:jMe},{name:"options",type:bd,props:{weight:BMe}}]),select:Gi("select",[{name:"columns",type:d1}]),ungroup:Gi("ungroup"),unorder:Gi("unorder"),reify:Gi("reify"),dedupe:Gi("dedupe",[{name:"keys",type:Sh,default:[]}]),impute:Gi("impute",[{name:"values",type:RI},{name:"options",type:bd,props:{expand:Sh}}]),fold:Gi("fold",[{name:"values",type:Sh},{name:"options",type:bd}]),pivot:Gi("pivot",[{name:"keys",type:Sh},{name:"values",type:Sh},{name:"options",type:bd}]),spread:Gi("spread",[{name:"values",type:Sh},{name:"options",type:bd}]),unroll:Gi("unroll",[{name:"values",type:Sh},{name:"options",type:bd,props:{drop:Sh}}]),lookup:Gi("lookup",[{name:"table",type:Xx},{name:"on",type:Z2},{name:"values",type:Sh}]),join:Gi("join",[{name:"table",type:Xx},{name:"on",type:Z2},{name:"values",type:w5},{name:"options",type:bd}]),cross:Gi("cross",[{name:"table",type:Xx},{name:"values",type:w5},{name:"options",type:bd}]),semijoin:Gi("semijoin",[{name:"table",type:Xx},{name:"on",type:Z2}]),antijoin:Gi("antijoin",[{name:"table",type:Xx},{name:"on",type:Z2}]),concat:Gi("concat",[{name:"tables",type:eS}]),union:Gi("union",[{name:"tables",type:eS}]),intersect:Gi("intersect",[{name:"tables",type:eS}]),except:Gi("except",[{name:"tables",type:eS}])};let tie=class GMe extends u4e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new GMe(t.map(WMe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Wve(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Wve(this,"toAST",{type:e8t})}};function Wve(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function _8t(e,t){return new tie(e._verbs.concat(t),e._params,e._table)}for(const e in TK){const t=TK[e];tie.prototype["__"+e]=function(n,...r){return _8t(n,t(...r))}}function aA(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function E8t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function nie(e,t){const n=ed();return t.forEach((r,i)=>{const s=yu(r)?r:i;if(s){const o=e.column(i)||pr(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function YMe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||pr("relocate requires a before or after option."),i&&s&&pr("relocate accepts only one of the before or after options."),t=cy(e,t);const o=[...cy(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),nie(e,u)}function zN(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function rie(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function S8t(e,t=0,n=e.length){let r=n?e[t++]:li;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function C8t(e,t=0,n=e.length){let r=n?e[t++]:li;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function M4(e){return KR(e)?e:+e}function T8t(e,t){const n=e.length;if(!n)return li;if((t=+t)<=0||n<2)return M4(e[0]);if(t>=1)return M4(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=M4(e[i]);return KR(s)?s:s+(M4(e[i+1])-s)*(r-i)}class A8t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:S8t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:C8t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(rie)),T8t(this._sorted,t)}}const _5=(e,t,n)=>aA(t,"{"+zN(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function D8t(e,t){const{ops:n,output:r}=I8t(e,t),i=e[0].fields,s=i.length,o=s===0?iie:s===1?k8t:s===2?R8t:pr("Unsupported field count: "+s);return new o(i,n,r,t)}function I8t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=I4e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class iie extends OFt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new A8t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class k8t extends iie{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=_5(n,s,"add"),this._rem=_5(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Kh(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Kh(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class R8t extends iie{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=_5(n,s,"add"),this._rem=_5(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Kh(i)&&Kh(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Kh(i)&&Kh(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Z_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=uA(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function uA(e,t,n){if(!t.length)return n;const r=KMe(t),i=e.groups(),s=i?i.size:1;return n=n||VB(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=QMe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=XMe(e,o);o.write(a,n,0)}),n}function KMe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(D8t(r[i],t));return n}function XMe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function QMe(e,t,n){const{keys:r,size:i}=n,s=VB(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function JMe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function ZMe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Gve=ZMe(rie);function N8t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?aA(["w","r","k"],"{"+zN(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i.map(b=>b.init());for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,_=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Gve.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Gve.right(o,o[p.i1-1])));for(let w=0;w<d;++w){const S=i[w],T=a[w];for(let A=b;A<p.i0;++A)S.rem(T,s[A],e);for(let A=_;A<p.i1;++A)S.add(T,s[A],e);S.write(T,u,l)}return h(p,u,l),u}};return p}const P8t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),O8t=e=>!!e.peers;function F8t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=k4e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function M8t(e,t,n,r={},i){const s=e.data(),o=$8t(i,s),a=o.length,u=aA(["r","d","op"],"{"+zN(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=L8t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function $8t(e,t){const n={};return e.forEach(r=>{const i=P8t(r),s=O8t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});jne(r.name)?a.push(r):u.push(F8t(r))}),Object.values(n).map(r=>N8t(t,r.frame,r.peers,r.winOps,KMe(r.aggOps,r.frame[0]!=null?-1:1)))}function L8t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function B8t(e){return Une(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function sie(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=ed(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=j8t(r),c=e.isGrouped()?e.groups().size:1,f=uA(e,u,VB(r.length,()=>Array(c)));return l.length?M8t(e,a,n,f,l):U8t(e,a,n,f),e.create(o)}function j8t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(B8t(s)?n:t).push(s)}return[t,n]}function U8t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function z8t(e,t,n={}){const r=sie(e,Wc(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:YMe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function V8t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const $4=2147483648,H8t=4294967295;class e8e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&$4>>>t}set(t){this._bits[t>>5]|=$4>>>t}clear(t){this._bits[t>>5]&=~($4>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&H8t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=$4>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function q8t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new e8e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function W8t(e,t){const n=Wc({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=sie(e,n,{drop:!0}).column("p");r=s=>i[s]}return q8t(e,r)}function t8e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Z_(e,r,n),l=ed(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(_=>{if(!a.has(_)){const w=l.add(_,[]);c.has(_)||(f.push(e.column(_)),d.push(w))}}),t.forEach(_=>{a.has(_)||(l.has(_)||l.add(_,[]),h.push(l.data[_]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(_,w)=>{for(let S=0;S<g;++S)d[S].length=m+w,d[S].fill(f[S].get(_),m,m+w)},b=p?(_,w)=>{for(let S=0;S<w;++S)p[_+S]=S}:()=>{};if(y===1){const _=u[0],w=h[0];e.scan((S,T)=>{const A=Vc(_(S,T)),k=Math.min(A.length,s);v(S,k);for(let I=0;I<k;++I)w[m+I]=A[I];b(m,k),m+=k})}else e.scan((_,w)=>{let S=0;const T=u.map(A=>{const k=Vc(A(_,w));return S=Math.min(Math.max(S,k.length),s),k});v(_,S);for(let A=0;A<y;++A){const k=h[A],I=T[A];for(let R=0;R<S;++R)k[m+R]=I[R]}b(m,S),m+=S});return e.create(l.new())}function G8t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Z_(e,r,n);return t8e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function gp(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Vl(o)?t.columnName(o):o,yu(o)?i.set(o,s_(o)):Ts(o)?cy(t,o).forEach(s):tl(o)?VFe(i,o):pr(`Invalid ${e} value: ${o+""}`)};return Vc(n).forEach(s),r.preparse&&r.preparse(i),Wc(i,{table:t,...r})}function Y8t(e,t,n){return G8t(e,gp("fold",e,t),n)}function Yve(e,t,n,r){const i=n&&n.length;return K8t(i?X8t(e,n,r):e,t,i)}function K8t(e,{names:t,exprs:n,ops:r},i){const s=Z_(e,r,n),o=i?null:ed(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Kh(p)?p:d(h)})}),i?e:e.create(o)}function X8t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=Z8(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=ed(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=Z8(o.map((p,m)=>g=>g[m])),h=aA("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Kve(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Kve(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Kve(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function oie(e,{names:t,exprs:n,ops:r}){const i=ed(),s=e.groups();return s&&JMe(i,s),Q8t(t,n,s,uA(e,r),i),e.create(i.new())}function Q8t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function J8t(e,t,n={}){if(t=Wc(t,{table:e}),t.names.forEach(r=>e.column(r)?0:pr(`Invalid impute column ${Gm(r)}`)),n.expand){const r={preparse:Z8t,aggronly:!0},i=gp("impute",e,n.expand,r),s=oie(e.ungroup(),i);return Yve(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Yve(e,t)}function Z8t(e){e.forEach((t,n)=>t.field?e.set(n,y4e(t+"")):0)}function e5t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function n8e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function t5t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function n5t(e,t){const n=["i","a","j","b"];return aA(n,"{"+zN(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function r5t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=ed(),g=Array(p),y=Array(p);for(let _=0;_<r.length;++_)g[_]=m.add(r[_],[]),y[_]=i[_];const v=n5t(g,y);if((pi(n)?s5t:i5t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let _=0;_<u;++_)l[_]||v(a[_],o,-1,c);if(s.right)for(let _=0;_<d;++_)h[_]||v(-1,o,f[_],c);return e.create(m.new())}function i5t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function s5t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(S,T,A,k)=>e(A,k,S,T));const _=t5t(v,m,g),w=p.length;for(let S=0;S<w;++S){const T=p[S],A=_.get(d(T,f));if(A){const k=A.length;for(let I=0;I<k;++I){const R=A[I];b(T,f,v[R],m),y[R]=1}h[S]=1}}}function E5(e,t,n){const r=new Map;Vc(n).forEach((s,o)=>{s=Vl(s)?t.columnName(s):s,yu(s)?r.set(o,s_(s)):Ts(s)||tl(s)&&s.expr?r.set(o,s):pr(`Invalid ${e} key value: ${s+""}`)});const i=Wc(r,{table:t,aggregate:!1,window:!1});return Z8(i.exprs,!0)}function o5t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function aie(e,t,n){if(n)yu(n)?n=[n,n]:pi(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=o5t(e.columnNames(),t.columnNames());r.length||pr("Natural join requires shared column names."),n=[r,r]}return n}function r8e(e,t,n,r){return n.length!==r.length&&pr("Mismatched number of join keys"),[E5("join",e,n),E5("join",t,r)]}const a5t={aggregate:!1,window:!1},u5t={...a5t,index:1};function Xve(e,t,n,r,i={}){n=aie(e,t,n);const s={join:[e,t]};let o;if(pi(n)){const[a,u]=n.map(Vc);o=r8e(e,t,a,u),r||(r=l5t(e,a,u,i))}else o=Wc({on:n},s).exprs[0],r||(r=[FC(),FC()]);return r5t(e,t,o,c5t(e,t,r,s,i&&i.suffix),i)}function l5t(e,t,n,r){const i=[];t.forEach((o,a)=>yu(o)&&o===n[a]?i.push(o):0);const s=qFe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Gm(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,FC()]:[FC(),s]}function c5t(e,t,n,r,i=[]){if(pi(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=gp("join",e,n[0],r)),u--&&(o=gp("join",t,n[1],u5t)),u--&&(a=Wc(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Qve(s.names,l,i[0]||"_1"),i[1]!==""&&Qve(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Wc(n,r)}function Qve(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function f5t(e,t,n,r={}){const i=new e8e(e.totalRows());return(pi(n)?d5t:h5t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function d5t(e,t,n,[r,i]){const s=n8e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function h5t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Jve(e,t,n,r){n=aie(e,t,n);const i=pi(n)?r8e(e,t,...n.map(Vc)):Wc({on:n},{join:[e,t]}).exprs[0];return f5t(e,t,i,r)}function p5t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=ed(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(li)));const l=n8e(t,r),c=aA(["lr","rr","data"],"{"+zN(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Z_(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function m5t(e,t,n,r){return n=aie(e,t,n),p5t(e,t,[E5("lookup",e,n[0]),E5("lookup",t,n[1])],gp("lookup",t,r))}const AK=(e,t)=>e??t;function g5t(e,t,n,r={}){const{keys:i,keyColumn:s}=y5t(e,t,r),o=AK(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>uA(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(v5t(n,a,e.groups(),u))}function y5t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=AK(n.sort,!0),s=AK(n.keySeparator,"_"),o=Z_(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=uA(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function v5t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=ed(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&JMe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function b5t(e,t,n,r){return g5t(e,gp("fold",e,t),gp("fold",e,n,{preparse:x5t,aggronly:!0}),r)}function x5t(e){e.forEach((t,n)=>t.field?e.set(n,p4e(t+"")):0)}function w5t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),nie(e,cy(e,t,n))}function Zve(e,t){return oie(e,Wc(t,{table:e,aggronly:!0,window:!1}))}function _5t(e,t,n,r){return(t?r?S5t:E5t:r?T5t:C5t)(e.length,e,n,r)}function E5t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*JT()|0];return t}function S5t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=ZMe(rie).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*JT())];return t}function C5t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*JT();s<e&&(t[s|0]=n[i])}return t}function T5t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(JT())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function A5t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=JT()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function D5t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):_5t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&A5t(u),e.reify(u)}function I5t(e,t,n={}){return D5t(e,k5t(e,t),R5t(e,n.weight),n)}const i8e=e=>t=>e.get(t)||0;function k5t(e,t){return Vl(t)?()=>t:i8e(oie(e,Wc({size:t},{table:e,window:!1})).column("size"))}function R5t(e,t){return t==null?null:(t=Vl(t)?e.columnName(t):t,i8e(yu(t)?e.column(t):sie(e,Wc({w:t},{table:e}),{drop:!0}).column("w")))}function N5t(e,t){return nie(e,cy(e,t))}function P5t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Z_(e,r,n),l=ed(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=O5t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function O5t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Vc(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(li));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function F5t(e,t,n){return P5t(e,gp("spread",e,t),n)}function M5t(e,t){return e.concat(t).dedupe()}function $5t(e,t,n){return t8e(e,gp("unroll",e,t),n&&n.drop?{...n,drop:gp("unroll",e,n.drop).names}:n)}function L5t(e,t){return e.create({groups:B5t(e,t)})}function B5t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Z_(e,r,n);const o=Z8(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function j5t(e,t){return L5t(e,gp("groupby",e,t))}function U5t(e,t){return e.create({order:t})}const z5t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function V5t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Wc(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([J8(p,{index:"a",op:o}),J8(p,{index:"b",op:a})])},window:!1}),l=uA(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=z5t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function H5t(e,t){return U5t(e,q5t(e,t))}function q5t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(tl(o)&&!Ts(o))for(const a in o)i(o[a]);else i(Vl(o)?s_(s,e.columnName(o)):yu(o)?s_(s):Ts(o)?s:pr(`Invalid orderby field: ${s+""}`))}),V5t(e,r)}function W5t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=ed();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>li};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function G5t(e,t){const n=ed(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?QMe(e,t,r):[XMe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function Y5t(e){return e.isGrouped()?e.create({groups:null}):e}function K5t(e){return e.isOrdered()?e.create({order:null}):e}const X5t={__antijoin:(e,t,n)=>Jve(e,t,n,{anti:!0}),__count:(e,t={})=>Zve(e,{[t.as||"count"]:m4e()}),__cross:(e,t,n,r)=>Xve(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:W5t,__dedupe:E8t,__derive:z8t,__except:V8t,__filter:W8t,__fold:Y8t,__impute:J8t,__intersect:e5t,__join:Xve,__lookup:m5t,__pivot:b5t,__relocate:YMe,__rename:w5t,__rollup:Zve,__sample:I5t,__select:N5t,__semijoin:Jve,__spread:F5t,__union:M5t,__unroll:$5t,__groupby:j5t,__orderby:H5t,__ungroup:Y5t,__unorder:K5t,__reduce:G5t};Object.assign(pg.prototype,X5t);function s8e(e,t){return pg.from(e,t)}function NS(e){return l9(e,{escape:!0,toString(){pr("Escaped values can not be serialized.")}})}pg.prototype;var Q5t="Expected a function",ebe=NaN,J5t="[object Symbol]",Z5t=/^\s+|\s+$/g,e$t=/^[-+]0x[0-9a-f]+$/i,t$t=/^0b[01]+$/i,n$t=/^0o[0-7]+$/i,r$t=parseInt,i$t=typeof on=="object"&&on&&on.Object===Object&&on,s$t=typeof self=="object"&&self&&self.Object===Object&&self,o$t=i$t||s$t||Function("return this")(),a$t=Object.prototype,u$t=a$t.toString,l$t=Math.max,c$t=Math.min,kH=function(){return o$t.Date.now()};function f$t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(Q5t);t=tbe(t)||0,DK(n)&&(c=!!n.leading,f="maxWait"in n,s=f?l$t(tbe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var T=r,A=i;return r=i=void 0,l=S,o=e.apply(A,T),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var T=S-u,A=S-l,k=t-T;return f?c$t(k,s-A):k}function g(S){var T=S-u,A=S-l;return u===void 0||T>=t||T<0||f&&A>=s}function y(){var S=kH();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function _(){return a===void 0?o:v(kH())}function w(){var S=kH(),T=g(S);if(r=arguments,i=this,u=S,T){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return w.cancel=b,w.flush=_,w}function DK(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function d$t(e){return!!e&&typeof e=="object"}function h$t(e){return typeof e=="symbol"||d$t(e)&&u$t.call(e)==J5t}function tbe(e){if(typeof e=="number")return e;if(h$t(e))return ebe;if(DK(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=DK(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Z5t,"");var n=t$t.test(e);return n||n$t.test(e)?r$t(e.slice(2),n?2:8):e$t.test(e)?ebe:+e}var p$t=f$t;const Dh=c0(p$t);function o8e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>Nb(".2s"),[]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>E.jsxs("g",{transform:`translate(${n}, ${a})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),E.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const m$t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:o8e},Symbol.toStringTag,{value:"Module"})),RH=15;function a8e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=vr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<RH&&Math.abs(t(g[r.y])-p[1])<RH);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),E.jsx("circle",{style:{cursor:l?"pointer":"default"},r:RH,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const g$t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:a8e},Symbol.toStringTag,{value:"Module"})),Is={top:15,left:100,right:15,bottom:70};function IK({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=kf(),[c]=kf(),[f]=kf(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-Is.left-Is.right,[l]),m=N.useMemo(()=>u-Is.top-Is.bottom,[u]),g=N.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Ob(PB).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:_}=N.useMemo(()=>{const I=s.map(j=>+j[i.x]).filter(j=>j!==null),[R,F]=NR(I),O=s.map(j=>+j[i.y]).filter(j=>j!==null),[$,V]=NR(O);return{xMin:R,xMax:F,yMin:$,yMax:V}},[s,i.x,i.y]),w=N.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?dne([Is.left,p+Is.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):ja([Is.left,p+Is.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),S=N.useMemo(()=>{const I=_-v;return m<=0?null:ja([m+Is.top,Is.top]).domain([v-I/10,_+I/10]).nice()},[m,_,v]),T=N.useMemo(()=>{if(!w||!S)return()=>null;if(r==="Axis Selection"){const I=VNe().extent([[Is.left,Is.top+m-5],[Is.left+p,Is.top+m+5]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[F.selection[0],null],[F.selection[1],null]],w,S,F.mode)}),R=HNe().extent([[Is.left-5,Is.top],[Is.left+5,Is.top+m]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[null,F.selection[0]],[null,F.selection[1]]],w,S,F.mode)});return c.current&&f.current&&(vr(f.current).call(R),vr(c.current).call(I),t.hasBrush||(vr(f.current).call(R.move,[S(_),S(v)]),vr(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(_)],[w(new Date("2015-12-31")),S(v)]],w,S,"drag"))),()=>{vr(f.current).call(R.move,[S(_),S(v)]),vr(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(_)],[w(new Date("2015-12-31")),S(v)]],w,S,"clear")}}if(r==="Rectangular Selection"){const I=qNe().extent([[Is.left,Is.top],[Is.left+p,Is.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],w,S,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(vr(a.current).call(I.move,null),e(null))});return vr(a.current).call(I),()=>{vr(a.current).call(I.move,null),n([[null,null],[null,null]],w,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[w(y),S(_)],[w(b),S(v)]],w,S,null),()=>n([[w(y),S(_)],[w(b),S(v)]],w,S,"clear")):r==="Paintbrush Selection"?()=>n([[w(y),S(_)],[w(b),S(v)]],w,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,w,_,v,S]),A=N.useMemo(()=>o.length===0?null:new Set(o),[o]),k=N.useMemo(()=>!w||!S?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const F=i.dataType==="date"?w(new Date(I[i.x])):w(I[i.x]);return E.jsx("circle",{opacity:A&&!A.has(I[i.ids])?.3:1,r:3,fill:A&&!A.has(I[i.ids])?"lightgray":g(I[i.category]),cx:F,cy:S(I[i.y])},R)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,w,S]);return N.useEffect(()=>{r==="Axis Selection"&&lNe(".handle").style("fill","darkgrey")},[t,r]),E.jsxs(Ys,{children:[E.jsxs($i,{children:[E.jsx(bn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?E.jsx(WL,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),E.jsxs($i,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[E.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w&&S?E.jsxs("g",{children:[E.jsx(o8e,{yScale:S,label:i.y,horizontalPosition:Is.left,xRange:w.range()}),E.jsx($ne,{xScale:w,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+Is.top,label:i.x,ticks:w.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:w(I)}))})]}):null,k,E.jsx("g",{id:"brushXRef",ref:c}),E.jsx("g",{id:"brushYRef",ref:f}),w&&S&&r==="Paintbrush Selection"?E.jsx(a8e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:w,yScale:S}):null]}),r==="Slider Selection"&&w&&S?E.jsxs(Ys,{style:{flexGrow:1},gap:50,children:[E.jsxs(Ys,{gap:0,children:[E.jsx(tt,{children:i.x}),E.jsx(lC,{minRange:1,label:null,min:w.domain()[0],max:w.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[w(I[0]),t.y1],[w(I[1]),t.y2]],w,S,"drag")},style:{width:"300px"},marks:w.ticks(5).map(I=>({value:I,label:I})),value:[w.invert(t.x1),w.invert(t.x2)]})]}),E.jsxs(Ys,{gap:0,children:[E.jsx(tt,{children:i.y}),E.jsx(lC,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:I=>{n([[t.x1,S(I[1])],[t.x2,S(I[0])]],w,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(I=>({value:I,label:I})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const y$t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:IK,default:IK},Symbol.toStringTag,{value:"Module"}));function nbe({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=N.useState(null),[s,o]=N.useState(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]});N.useEffect(()=>{o(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]})},[n]);const[a,u]=N.useState(null);N.useEffect(()=>{KNe(`./data/${e.dataset}.csv`).then(y=>{u(y)})},[e]);const l=N.useMemo(()=>a?s8e(a):null,[a]),{actions:c,trrack:f}=N.useMemo(()=>{const y=Iy.create(),v=y.register("brush",(T,A)=>(T.all={brush:A},T)),b=y.register("brushMove",(T,A)=>(T.all={brush:A},T)),_=y.register("brushResize",(T,A)=>(T.all={brush:A},T)),w=y.register("brushClear",(T,A)=>(T.all={brush:A},T)),S=J_({registry:y,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:v,brushMove:b,brushResize:_,clearBrush:w},trrack:S}},[]),d=N.useCallback((y,v)=>{y==="drag"?f.apply("Move Brush",c.brushMove(v)):y==="handle"&&f.apply("Brush",c.brush(v))},[c,f]),h=N.useMemo(()=>Dh(d,100,{maxWait:100}),[d]),p=N.useCallback((y,v,b,_,w)=>{if(!v||!b)return;const S=v.invert(y[0][0]||s.x1),T=v.invert(y[1][0]||s.x2),A=b.invert(y[1][1]||s.y2),k=b.invert(y[0][1]||s.y1);let I=null;if(_==="clear")I=l;else if(w){const F=new Set(w);I=l.filter(NS(O=>F.has(O[e.ids])))}else e.brushType==="Axis Selection"?I=l.filter(NS(F=>new Date(F[e.x])>=new Date(S)&&new Date(F[e.x])<=new Date(T)&&F[e.y]>=A&&F[e.y]<=k)):I=l.filter(NS(F=>F[e.x]>=S&&F[e.x]<=T&&F[e.y]>=A&&F[e.y]<=k));const R={x1:y[0][0]||(s==null?void 0:s.x1)||0,x2:y[1][0]||(s==null?void 0:s.x2)||0,y1:y[0][1]||(s==null?void 0:s.y1)||0,y2:y[1][1]||(s==null?void 0:s.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?I==null?void 0:I.array("id"):[]};o(R),_==="drag"||_==="handle"?h(_,R):_==="clear"&&f.apply("Clear Brush",c.clearBrush(R)),i(I),t({status:!0,provenanceGraph:f.graph.backend,answers:{}})},[s,l,e,f,t,h,c]),m=N.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():l?l==null?void 0:l.groupby(e.category).count():null,[r,l,e.category]),g=N.useCallback(y=>{i(y)},[]);return a?E.jsxs(Ys,{gap:"xs",children:[E.jsx(IK,{brushedPoints:s==null?void 0:s.ids,data:a,params:e,brushType:e.brushType,setBrushedSpace:p,brushState:s,setFilteredTable:g}),E.jsx(iK,{data:a,parameters:e,barsTable:m})]}):E.jsx(Zc,{})}const v$t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:nbe,default:nbe},Symbol.toStringTag,{value:"Module"})),b$t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function u8e({data:e,xScale:t,yScale:n,height:r}){return E.jsx("g",{children:e.map((i,s)=>E.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const x$t=Object.freeze(Object.defineProperty({__proto__:null,Bars:u8e},Symbol.toStringTag,{value:"Module"}));function uie({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=ja().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsxs("g",{transform:`translate(0,${a})`,children:[E.jsx("line",{x2:`${r}`,stroke:"currentColor"}),E.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const w$t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:uie},Symbol.toStringTag,{value:"Module"}));function l8e({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=GT().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsx("g",{transform:`translate(${a}, 10)`,children:E.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const _$t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:l8e},Symbol.toStringTag,{value:"Module"})),E$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function S$t({parameters:e}){const[n,r]=QT(E$t),i=GT().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=ja().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return E.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:E.jsx("svg",{width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[E.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:E.jsx(l8e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),E.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:E.jsx(uie,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),E.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:E.jsx(u8e,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const C$t=Object.freeze(Object.defineProperty({__proto__:null,default:S$t},Symbol.toStringTag,{value:"Module"}));function c8e({data:e}){return E.jsx("g",{children:e.map(({bubble:t},n)=>E.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const T$t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:c8e},Symbol.toStringTag,{value:"Module"}));function lie({positions:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const A$t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:lie},Symbol.toStringTag,{value:"Module"})),D$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},I$t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=GPe().size([t-10,n-10]).padding(1.5),o=SB(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},k$t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function R$t({parameters:e}){const[t,n]=QT(D$t),r=I$t(e,n.width,n.height),i=k$t(r,e.selectedIndices);return E.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:E.jsx("svg",{width:n.width,height:n.height,children:E.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[E.jsx(c8e,{data:r}),E.jsx(lie,{positions:i})]})})})}const N$t=Object.freeze(Object.defineProperty({__proto__:null,default:R$t},Symbol.toStringTag,{value:"Module"}));function f8e({arcs:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const P$t=Object.freeze(Object.defineProperty({__proto__:null,Slices:f8e},Symbol.toStringTag,{value:"Module"}));function d8e({positions:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("g",{transform:`translate(${t.centroid()})`,children:E.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const O$t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:d8e},Symbol.toStringTag,{value:"Module"})),F$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},M$t=kRt().value(e=>e.value),PD=150;function $$t({parameters:e}){const[t,n]=QT(F$t),r=M$t(e.data),i=r.map(o=>BY().innerRadius(0).outerRadius(PD).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>BY().outerRadius(PD+10).innerRadius(PD+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return E.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:E.jsx("svg",{width:n.width,height:n.height,children:E.jsxs("g",{transform:`translate(${[n.marginLeft+PD,n.marginTop+PD].join(",")})`,children:[E.jsx(f8e,{arcs:i}),E.jsx(d8e,{positions:s})]})})})}const L$t=Object.freeze(Object.defineProperty({__proto__:null,default:$$t},Symbol.toStringTag,{value:"Module"}));function h8e({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=ja().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsxs("g",{transform:`translate(${a}, 0)`,children:[E.jsx("line",{y2:`${r}`,stroke:"currentColor"}),E.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const B$t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:h8e},Symbol.toStringTag,{value:"Module"}));function p8e({data:e,barWidth:t,yScale:n}){return E.jsx("g",{children:e.map((r,i)=>E.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const j$t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:p8e},Symbol.toStringTag,{value:"Module"})),U$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function z$t({parameters:e}){const[n,r]=QT(U$t),i=GT().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=ja().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,_)=>Number(b)+Number(_))/100,y={};p.forEach((b,_)=>{y[String.fromCharCode(_+65)]=b/g});const v=[y];return JRt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return E.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:E.jsx("svg",{width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[E.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:E.jsx(h8e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),E.jsx("g",{transform:"translate(0, 0)",children:E.jsx(uie,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),E.jsxs("g",{transform:"translate(0, 0)",children:[E.jsx(p8e,{data:c,barWidth:f,yScale:s}),E.jsx(lie,{positions:d})]})]})})})}const V$t=Object.freeze(Object.defineProperty({__proto__:null,default:z$t},Symbol.toStringTag,{value:"Module"}));function rbe({rankings:e}){return E.jsx("div",{style:{fontFamily:"sans-serif"},children:E.jsx("div",{children:e.map((t,n)=>E.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function H$t({parameters:e,setAnswer:t}){const n=nh(),[r,i]=N.useState(""),{goToNextStep:s,isNextDisabled:o}=R3e(),a=N.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=N.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=N.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=N.useCallback(()=>{o||s()},[o,s]);N.useEffect(()=>{const h=zrt([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),E.jsxs("div",{children:[E.jsxs(Ef,{children:[E.jsxs(Ef.Col,{span:2,children:[E.jsx(rbe,{rankings:a==="r1"?e.data.r1:e.data.r2}),E.jsx(bn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?E.jsx(Ime,{}):"Select this ranking"}),l&&r&&E.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),E.jsxs(Ef.Col,{span:2,children:[E.jsx(rbe,{rankings:a==="r1"?e.data.r2:e.data.r1}),E.jsx(bn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?E.jsx(Ime,{}):"Select this ranking"}),l&&r&&E.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&E.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const q$t=Object.freeze(Object.defineProperty({__proto__:null,default:H$t},Symbol.toStringTag,{value:"Module"})),W$t=N.createContext(null);function Hu(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let VN=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const L4={decode:function(e,t){return Hu(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function m8e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(m8e(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function ibe(e,t,n){const r=m8e(e,t||{});return n==null||n.appendChild(r),r}var G$t=Object.freeze({__proto__:null,createElement:ibe,default:ibe});const Y$t={fetchBlob:function(e,t,n){return Hu(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){Hu(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>Hu(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>Hu(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class K$t extends VN{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Hu(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}let kK=class RK extends VN{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=w=>{if(w.preventDefault(),w.stopPropagation(),u&&Date.now()-m<a)return;const S=w.clientX,T=w.clientY,A=S-d,k=T-h;if(p||Math.abs(A)>s||Math.abs(k)>s){const I=t.getBoundingClientRect(),{left:R,top:F}=I;p||(r==null||r(d-R,h-F),p=!0),n(A,k,S-R,T-F),d=S,h=T}},y=w=>{if(p){const S=w.clientX,T=w.clientY,A=t.getBoundingClientRect(),{left:k,top:I}=A;i==null||i(S-k,T-I)}l()},v=w=>{w.relatedTarget&&w.relatedTarget!==document.documentElement||y(w)},b=w=>{p&&(w.stopPropagation(),w.preventDefault())},_=w=>{p&&w.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("click",b,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",_),setTimeout(()=>{document.removeEventListener("click",b,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,b=0;for(let _=0;_<=a;_++){const w=Math.round(_*m);if(w>y){const A=Math.round(v*c*i),k=A+Math.round(b*c*i)||1;let I=c-A;n.barAlign==="top"?I=0:n.barAlign==="bottom"&&(I=l-k),r[g](y*(d+h),I,d,k,p),y=w,v=0,b=0}const S=Math.abs(s[_]||0),T=Math.abs(o[_]||0);S>v&&(v=S),T>b&&(b=T)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(RK.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);c%y!=0&&(c=Math.floor(c/y)*y)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const y=g*c,v=Math.min(l-y,c);if(v<=0)return;const b=t.map(_=>{const w=Math.floor(y/l*_.length),S=Math.floor((y+v)/l*_.length);return _.slice(w,S)});this.renderSingleCanvas(b,n,v,i,y,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:y}=this.scrollContainer,v=Math.floor(y/l*h);Object.keys(f).length>RK.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(v-1),d(v),d(v+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return Hu(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return Hu(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};kK.MAX_CANVAS_WIDTH=8e3,kK.MAX_NODES=10;class X$t extends VN{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class sbe extends VN{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Hu(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Hu(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return Hu(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const Q$t={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class o3 extends K$t{static create(t){return new o3(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new sbe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},Q$t,t),this.timer=new X$t;const r=n?void 0:this.getMediaElement();this.renderer=new kK(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=L4.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=L4.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return Hu(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield Y$t.fetchBlob(t,u,a)}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof sbe&&(a.duration=o)}if(r)this.decodedData=L4.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield L4.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return Hu(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return Hu(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return Hu(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Hu(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}o3.BasePlugin=class extends VN{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},o3.dom=G$t;function J$t(e){return o3.create(e)}function Z$t(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const obe=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),eLt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:obe(i),enabled:obe(s)}};function abe(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=Z$t(i)}return n}function tLt({container:e,plugins:t=[],onMount:n,...r}){const i=N.useRef(!1),[s,o]=N.useState({}),a=N.useRef([]),[u,l]=N.useState(null);return N.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=abe(s,t);a.current=Object.keys(f);const d=J$t({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),N.useEffect(()=>{if(u){const c=abe(s,t),{disabled:f,enabled:d}=eLt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function g8e({children:e,plugins:t=[],onMount:n,...r}){const i=tLt({plugins:t,onMount:n,...r});return yi.createElement(W$t.Provider,{value:i},e)}const y8e=({id:e="waveform",children:t})=>yi.createElement("div",{id:e},t);function NH(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let v8e=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},nLt=class extends v8e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class rLt extends v8e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const iLt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class cie extends nLt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new rLt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new cie(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const y=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),y)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return NH(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return NH(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||iLt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return NH(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function b8e({width:e=70,height:t=36}){const n=N.useRef(null),r=N.useRef(null),[i,s]=N.useState(!1);N.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(cie.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=N.useCallback(a=>{n.current=a,s(!0)},[]);return E.jsx(Fe,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:E.jsx(g8e,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:E.jsx(y8e,{id:"waveform",height:t})})})}function ube({setAnswer:e}){return N.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,s=i.createMediaStreamSource(n),o=i.createAnalyser();o.minDecibels=-45,s.connect(o);const a=o.frequencyBinCount,u=new Uint8Array(a);let l=!1;const c=()=>{if(!l){o.getByteFrequencyData(u);for(let f=0;f<a;f+=1)u[f]>0&&(l=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),E.jsx(ma,{style:{height:"70%",width:"100%"},children:E.jsxs(Ys,{children:[E.jsx(tt,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),E.jsx(tt,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),E.jsx(tt,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),E.jsx(ma,{children:E.jsx(b8e,{height:200,width:400})})]})})}const sLt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:ube,default:ube},Symbol.toStringTag,{value:"Module"}));function oLt(){return E.jsx("div",{children:"test react file"})}const aLt=Object.freeze(Object.defineProperty({__proto__:null,default:oLt},Symbol.toStringTag,{value:"Module"}));function uLt({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=N.useRef(null),o=10,a=N.useCallback(u=>{const l=vr("#Circle"),c=vr("#click_svg"),f=t8(u,c.node()),d=[+l.attr("cx"),+l.attr("cy")],h=`${Math.round(Math.sqrt((f[0]-d[0])**2+(f[1]-d[1])**2))}px`;t({status:!0,answers:{[n]:h}})},[t,n]);return E.jsx("div",{className:"Chart__wrapper",ref:s,onClick:a,style:{height:"650px"},children:E.jsx("svg",{id:"click_svg",width:400,height:400,children:E.jsx("circle",{id:"Circle",cx:r,cy:i,r:o,stroke:"black",strokeWidth:"2",fill:"white"})})})}const lLt=Object.freeze(Object.defineProperty({__proto__:null,default:uLt},Symbol.toStringTag,{value:"Module"}));function fie({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?DN("%B"):Nb(".2s"))(c),[s]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?E.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>E.jsxs("g",{transform:`translate(${f}, ${n})`,children:[E.jsx("line",{y2:"6",stroke:"currentColor"}),o?E.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,E.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:E.jsx(ma,{children:E.jsx(xs,{withinPortal:!0,label:c,children:E.jsx(tt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const cLt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:fie},Symbol.toStringTag,{value:"Module"}));function x8e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>E.jsxs("g",{transform:`translate(${n}, ${l})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),s?E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,E.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:E.jsx("foreignObject",{width:a,height:20,children:E.jsx($i,{style:{width:"100%",height:"100%"},justify:"right",children:E.jsx(tt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const fLt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:x8e},Symbol.toStringTag,{value:"Module"})),hd={top:15,left:100,right:50,bottom:50};function NK({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=kf(),o=N.useMemo(()=>s-hd.left-hd.right,[s]),a=N.useMemo(()=>i-hd.top-hd.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Ob(PB).domain(d)},[n,t.category]),l=N.useMemo(()=>e?ja([hd.left,o+hd.left]).domain([0,Mg(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?GT([hd.top,a+hd.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:E.jsxs("g",{children:[E.jsx("rect",{x:hd.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-hd.left},h),E.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?E.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E.jsx(fie,{xScale:l,yRange:c.range(),vertPosition:a+hd.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?E.jsx(x8e,{yScale:c,horizontalPosition:hd.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):E.jsx(Zc,{})}const dLt=Object.freeze(Object.defineProperty({__proto__:null,Bar:NK,default:NK},Symbol.toStringTag,{value:"Module"}));function w8e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>Nb(".2s"),[]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>E.jsxs("g",{transform:`translate(${n}, ${a})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),E.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const hLt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:w8e},Symbol.toStringTag,{value:"Module"})),PH=15;function _8e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=vr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<PH&&Math.abs(t(g[r.y])-p[1])<PH);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),E.jsx("circle",{style:{cursor:l?"pointer":"default"},r:PH,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const pLt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:_8e},Symbol.toStringTag,{value:"Module"})),ks={top:15,left:100,right:15,bottom:70};function PK({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=kf(),[c]=kf(),[f]=kf(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-ks.left-ks.right,[l]),m=N.useMemo(()=>u-ks.top-ks.bottom,[u]),g=N.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Ob(PB).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:_}=N.useMemo(()=>{const I=s.map(j=>+j[i.x]).filter(j=>j!==null),[R,F]=NR(I),O=s.map(j=>+j[i.y]).filter(j=>j!==null),[$,V]=NR(O);return{xMin:R,xMax:F,yMin:$,yMax:V}},[s,i.x,i.y]),w=N.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?dne([ks.left,p+ks.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):ja([ks.left,p+ks.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),S=N.useMemo(()=>{const I=_-v;return m<=0?null:ja([m+ks.top,ks.top]).domain([v-I/10,_+I/10]).nice()},[m,_,v]),T=N.useMemo(()=>{if(!w||!S)return()=>null;if(r==="Axis Selection"){const I=VNe().extent([[ks.left,ks.top+m-5],[ks.left+p,ks.top+m+5]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[F.selection[0],null],[F.selection[1],null]],w,S,F.mode)}),R=HNe().extent([[ks.left-5,ks.top],[ks.left+5,ks.top+m]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[null,F.selection[0]],[null,F.selection[1]]],w,S,F.mode)});return c.current&&f.current&&(vr(f.current).call(R),vr(c.current).call(I),t.hasBrush||(vr(f.current).call(R.move,[S(_),S(v)]),vr(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(_)],[w(new Date("2015-12-31")),S(v)]],w,S,"drag"))),()=>{vr(f.current).call(R.move,[S(_),S(v)]),vr(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(_)],[w(new Date("2015-12-31")),S(v)]],w,S,"clear")}}if(r==="Rectangular Selection"){const I=qNe().extent([[ks.left,ks.top],[ks.left+p,ks.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],w,S,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(vr(a.current).call(I.move,null),e(null))});return vr(a.current).call(I),()=>{vr(a.current).call(I.move,null),n([[null,null],[null,null]],w,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[w(y),S(_)],[w(b),S(v)]],w,S,null),()=>n([[w(y),S(_)],[w(b),S(v)]],w,S,"clear")):r==="Paintbrush Selection"?()=>n([[w(y),S(_)],[w(b),S(v)]],w,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,w,_,v,S]),A=N.useMemo(()=>o.length===0?null:new Set(o),[o]),k=N.useMemo(()=>!w||!S?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const F=i.dataType==="date"?w(new Date(I[i.x])):w(I[i.x]);return E.jsx("circle",{opacity:A&&!A.has(I[i.ids])?.3:1,r:3,fill:A&&!A.has(I[i.ids])?"lightgray":g(I[i.category]),cx:F,cy:S(I[i.y])},R)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,w,S]);return N.useEffect(()=>{r==="Axis Selection"&&lNe(".handle").style("fill","darkgrey")},[t,r]),E.jsxs(Ys,{children:[E.jsxs($i,{children:[E.jsx(bn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?E.jsx(WL,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),E.jsxs($i,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[E.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w&&S?E.jsxs("g",{children:[E.jsx(w8e,{yScale:S,label:i.y,horizontalPosition:ks.left,xRange:w.range()}),E.jsx(fie,{xScale:w,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+ks.top,label:i.x,ticks:w.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:w(I)}))})]}):null,k,E.jsx("g",{id:"brushXRef",ref:c}),E.jsx("g",{id:"brushYRef",ref:f}),w&&S&&r==="Paintbrush Selection"?E.jsx(_8e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:w,yScale:S}):null]}),r==="Slider Selection"&&w&&S?E.jsxs(Ys,{style:{flexGrow:1},gap:50,children:[E.jsxs(Ys,{gap:0,children:[E.jsx(tt,{children:i.x}),E.jsx(lC,{minRange:1,label:null,min:w.domain()[0],max:w.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[w(I[0]),t.y1],[w(I[1]),t.y2]],w,S,"drag")},style:{width:"300px"},marks:w.ticks(5).map(I=>({value:I,label:I})),value:[w.invert(t.x1),w.invert(t.x2)]})]}),E.jsxs(Ys,{gap:0,children:[E.jsx(tt,{children:i.y}),E.jsx(lC,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:I=>{n([[t.x1,S(I[1])],[t.x2,S(I[0])]],w,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(I=>({value:I,label:I})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const mLt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:PK,default:PK},Symbol.toStringTag,{value:"Module"}));function lbe({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=N.useState(null);N.useEffect(()=>{KNe(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=N.useMemo(()=>o?s8e(o):null,[o]),{actions:l,trrack:c}=N.useMemo(()=>{const g=Iy.create(),y=g.register("brush",(S,T)=>(S.all={brush:T},S)),v=g.register("brushMove",(S,T)=>(S.all={brush:T},S)),b=g.register("brushResize",(S,T)=>(S.all={brush:T},S)),_=g.register("brushClear",(S,T)=>(S.all={brush:T},S)),w=J_({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:_},trrack:w}},[]),f=N.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=N.useMemo(()=>Dh(f,100,{maxWait:100}),[f]),h=N.useCallback((g,y,v,b,_)=>{if(!y||!v)return;const w=y.invert(g[0][0]||i.x1),S=y.invert(g[1][0]||i.x2),T=v.invert(g[1][1]||i.y2),A=v.invert(g[0][1]||i.y1);let k=null;if(b==="clear")k=u;else if(_){const R=new Set(_);k=u.filter(NS(F=>R.has(F[e.ids])))}else e.brushType==="Axis Selection"?k=u.filter(NS(R=>new Date(R[e.x])>=new Date(w)&&new Date(R[e.x])<=new Date(S)&&R[e.y]>=T&&R[e.y]<=A)):k=u.filter(NS(R=>R[e.x]>=w&&R[e.x]<=S&&R[e.y]>=T&&R[e.y]<=A));const I={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?k==null?void 0:k.array("id"):[]};s(I),b==="drag"||b==="handle"?d(b,I):b==="clear"&&c.apply("Clear Brush",l.clearBrush(I)),r(k),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=N.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=N.useCallback(g=>{r(g)},[]);return o?E.jsxs(Ys,{gap:"xs",children:[E.jsx(PK,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),E.jsx(NK,{data:o,parameters:e,barsTable:p})]}):E.jsx(Zc,{})}const gLt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:lbe,default:lbe},Symbol.toStringTag,{value:"Module"})),yLt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),vLt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var E8e={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function bLt(e,t){if(S5(e,t))return e[t];throw typeof e[t]=="function"&&wLt(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function xLt(e,t,n){if(S5(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function S5(e,t){return!_Lt(e)&&!Array.isArray(e)?!1:T5(ELt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function wLt(e,t){return e==null||typeof e[t]!="function"||T5(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:T5(SLt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function _Lt(e){return typeof e=="object"&&e&&e.constructor===Object}var ELt={length:!0,name:!0},SLt={toString:!0,valueOf:!0,toLocaleString:!0};class CLt{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(t=>this.has(t)).values()}get(t){return bLt(this.wrappedObject,t)}set(t,n){return xLt(this.wrappedObject,t,n),this}has(t){return S5(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return TLt(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var n of this.keys())t(this.get(n),n,this)}delete(t){S5(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function TLt(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function bs(e){return typeof e=="number"}function Wo(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function ALt(e){return typeof e=="bigint"}function S8e(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function C8e(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function T8e(e){return e&&e.constructor.prototype.isUnit===!0||!1}function og(e){return typeof e=="string"}var jo=Array.isArray;function aa(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function C5(e){return Array.isArray(e)||aa(e)}function DLt(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function ILt(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function kLt(e){return e&&e.constructor.prototype.isRange===!0||!1}function die(e){return e&&e.constructor.prototype.isIndex===!0||!1}function RLt(e){return typeof e=="boolean"}function NLt(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function PLt(e){return e&&e.constructor.prototype.isHelp===!0||!1}function OLt(e){return typeof e=="function"}function FLt(e){return e instanceof Date}function MLt(e){return e instanceof RegExp}function hie(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!S8e(e)&&!C8e(e))}function $Lt(e){return e?e instanceof Map||e instanceof CLt||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function LLt(e){return e===null}function BLt(e){return e===void 0}function jLt(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function ULt(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function zLt(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function VLt(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function HLt(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function qLt(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function WLt(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function GLt(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function YLt(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function KLt(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function XLt(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function QLt(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function JLt(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function ZLt(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function eBt(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function tBt(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function nBt(e){return e&&e.constructor.prototype.isChain===!0||!1}function mv(e){var t=typeof e;return t==="object"?e===null?"null":Wo(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Eo(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(n){return Eo(n)});if(e instanceof Date)return new Date(e.valueOf());if(Wo(e))return e;if(hie(e))return rBt(e,Eo);if(t==="function")return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function rBt(e,t){var n={};for(var r in e)T5(e,r)&&(n[r]=t(e[r]));return n}function LC(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!LC(e[r],t[r]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!LC(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}else return e===t}}function T5(e,t){return e&&Object.hasOwnProperty.call(e,t)}function iBt(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],s=e[i];s!==void 0&&(n[i]=s)}return n}var sBt=["Matrix","Array"],oBt=["number","BigNumber","Fraction"],eE=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(E8e)};uC(eE,E8e,{MATRIX_OPTIONS:sBt,NUMBER_OPTIONS:oBt});function cbe(){return!0}function pd(){return!1}function n2(){}const fbe="Argument is not a typed-function.";function A8e(){function e(X){return typeof X=="object"&&X!==null&&X.constructor===Object}const t=[{name:"number",test:function(X){return typeof X=="number"}},{name:"string",test:function(X){return typeof X=="string"}},{name:"boolean",test:function(X){return typeof X=="boolean"}},{name:"Function",test:function(X){return typeof X=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(X){return X instanceof Date}},{name:"RegExp",test:function(X){return X instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(X){return X===null}},{name:"undefined",test:function(X){return X===void 0}}],n={name:"any",test:cbe,isAny:!0};let r,i,s=0,o={createCount:0};function a(X){const de=r.get(X);if(de)return de;let we='Unknown type "'+X+'"';const ae=X.toLowerCase();let he;for(he of i)if(he.toLowerCase()===ae){we+='. Did you mean "'+he+'" ?';break}throw new TypeError(we)}function u(X){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const we=de?a(de).index:i.length,ae=[];for(let Ee=0;Ee<X.length;++Ee){if(!X[Ee]||typeof X[Ee].name!="string"||typeof X[Ee].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const $e=X[Ee].name;if(r.has($e))throw new TypeError('Duplicate type name "'+$e+'"');ae.push($e),r.set($e,{name:$e,test:X[Ee].test,isAny:X[Ee].isAny,index:we+Ee,conversionsTo:[]})}const he=i.slice(we);i=i.slice(0,we).concat(ae).concat(he);for(let Ee=we+ae.length;Ee<i.length;++Ee)r.get(i[Ee]).index=Ee}function l(){r=new Map,i=[],s=0,u([n],!1)}l(),u(t);function c(){let X;for(X of i)r.get(X).conversionsTo=[];s=0}function f(X){const de=i.filter(we=>{const ae=r.get(we);return!ae.isAny&&ae.test(X)});return de.length?de:["any"]}function d(X){return X&&typeof X=="function"&&"_typedFunctionData"in X}function h(X,de,we){if(!d(X))throw new TypeError(fbe);const ae=we&&we.exact,he=Array.isArray(de)?de.join(","):de,Ee=_(he),$e=g(Ee);if(!ae||$e in X.signatures){const Xt=X._typedFunctionData.signatureMap.get($e);if(Xt)return Xt}const Be=Ee.length;let lt;if(ae){lt=[];let Xt;for(Xt in X.signatures)lt.push(X._typedFunctionData.signatureMap.get(Xt))}else lt=X._typedFunctionData.signatures;for(let Xt=0;Xt<Be;++Xt){const fn=Ee[Xt],Wt=[];let an;for(an of lt){const Sn=A(an.params,Xt);if(!(!Sn||fn.restParam&&!Sn.restParam)){if(!Sn.hasAny){const Mn=b(Sn);if(fn.types.some(ki=>!Mn.has(ki.name)))continue}Wt.push(an)}}if(lt=Wt,lt.length===0)break}let Je;for(Je of lt)if(Je.params.length<=Be)return Je;throw new TypeError("Signature not found (signature: "+(X.name||"unnamed")+"("+g(Ee,", ")+"))")}function p(X,de,we){return h(X,de,we).implementation}function m(X,de){const we=a(de);if(we.test(X))return X;const ae=we.conversionsTo;if(ae.length===0)throw new Error("There are no conversions to "+de+" defined.");for(let he=0;he<ae.length;he++)if(a(ae[he].from).test(X))return ae[he].convert(X);throw new Error("Cannot convert "+X+" to "+de)}function g(X){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return X.map(we=>we.name).join(de)}function y(X){const de=X.indexOf("...")===0,ae=(de?X.length>3?X.slice(3):"any":X).split("|").map(Be=>a(Be.trim()));let he=!1,Ee=de?"...":"";return{types:ae.map(function(Be){return he=Be.isAny||he,Ee+=Be.name+"|",{name:Be.name,typeIndex:Be.index,test:Be.test,isAny:Be.isAny,conversion:null,conversionIndex:-1}}),name:Ee.slice(0,-1),hasAny:he,hasConversion:!1,restParam:de}}function v(X){const de=X.types.map($e=>$e.name),we=G(de);let ae=X.hasAny,he=X.name;const Ee=we.map(function($e){const Be=a($e.from);return ae=Be.isAny||ae,he+="|"+$e.from,{name:$e.from,typeIndex:Be.index,test:Be.test,isAny:Be.isAny,conversion:$e,conversionIndex:$e.index}});return{types:X.types.concat(Ee),name:he,hasAny:ae,hasConversion:Ee.length>0,restParam:X.restParam}}function b(X){return X.typeSet||(X.typeSet=new Set,X.types.forEach(de=>X.typeSet.add(de.name))),X.typeSet}function _(X){const de=[];if(typeof X!="string")throw new TypeError("Signatures must be strings");const we=X.trim();if(we==="")return de;const ae=we.split(",");for(let he=0;he<ae.length;++he){const Ee=y(ae[he].trim());if(Ee.restParam&&he!==ae.length-1)throw new SyntaxError('Unexpected rest parameter "'+ae[he]+'": only allowed for the last parameter');if(Ee.types.length===0)return null;de.push(Ee)}return de}function w(X){const de=Te(X);return de?de.restParam:!1}function S(X){if(!X||X.types.length===0)return cbe;if(X.types.length===1)return a(X.types[0].name).test;if(X.types.length===2){const de=a(X.types[0].name).test,we=a(X.types[1].name).test;return function(he){return de(he)||we(he)}}else{const de=X.types.map(function(we){return a(we.name).test});return function(ae){for(let he=0;he<de.length;he++)if(de[he](ae))return!0;return!1}}}function T(X){let de,we,ae;if(w(X)){de=pe(X).map(S);const he=de.length,Ee=S(Te(X)),$e=function(Be){for(let lt=he;lt<Be.length;lt++)if(!Ee(Be[lt]))return!1;return!0};return function(lt){for(let Je=0;Je<de.length;Je++)if(!de[Je](lt[Je]))return!1;return $e(lt)&&lt.length>=he+1}}else return X.length===0?function(Ee){return Ee.length===0}:X.length===1?(we=S(X[0]),function(Ee){return we(Ee[0])&&Ee.length===1}):X.length===2?(we=S(X[0]),ae=S(X[1]),function(Ee){return we(Ee[0])&&ae(Ee[1])&&Ee.length===2}):(de=X.map(S),function(Ee){for(let $e=0;$e<de.length;$e++)if(!de[$e](Ee[$e]))return!1;return Ee.length===de.length})}function A(X,de){return de<X.length?X[de]:w(X)?Te(X):null}function k(X,de){const we=A(X,de);return we?b(we):new Set}function I(X){return X.conversion===null||X.conversion===void 0}function R(X,de){const we=new Set;return X.forEach(ae=>{const he=k(ae.params,de);let Ee;for(Ee of he)we.add(Ee)}),we.has("any")?["any"]:Array.from(we)}function F(X,de,we){let ae,he;const Ee=X||"unnamed";let $e=we,Be;for(Be=0;Be<de.length;Be++){const fn=[];if($e.forEach(Wt=>{const an=A(Wt.params,Be),Sn=S(an);(Be<Wt.params.length||w(Wt.params))&&Sn(de[Be])&&fn.push(Wt)}),fn.length===0){if(he=R($e,Be),he.length>0){const Wt=f(de[Be]);return ae=new TypeError("Unexpected type of argument in function "+Ee+" (expected: "+he.join(" or ")+", actual: "+Wt.join(" | ")+", index: "+Be+")"),ae.data={category:"wrongType",fn:Ee,index:Be,actual:Wt,expected:he},ae}}else $e=fn}const lt=$e.map(function(fn){return w(fn.params)?1/0:fn.params.length});if(de.length<Math.min.apply(null,lt))return he=R($e,Be),ae=new TypeError("Too few arguments in function "+Ee+" (expected: "+he.join(" or ")+", index: "+de.length+")"),ae.data={category:"tooFewArgs",fn:Ee,index:de.length,expected:he},ae;const Je=Math.max.apply(null,lt);if(de.length>Je)return ae=new TypeError("Too many arguments in function "+Ee+" (expected: "+Je+", actual: "+de.length+")"),ae.data={category:"tooManyArgs",fn:Ee,index:de.length,expectedLength:Je},ae;const Xt=[];for(let fn=0;fn<de.length;++fn)Xt.push(f(de[fn]).join("|"));return ae=new TypeError('Arguments of type "'+Xt.join(", ")+'" do not match any of the defined signatures of function '+Ee+"."),ae.data={category:"mismatch",actual:Xt},ae}function O(X){let de=i.length+1;for(let we=0;we<X.types.length;we++)I(X.types[we])&&(de=Math.min(de,X.types[we].typeIndex));return de}function $(X){let de=s+1;for(let we=0;we<X.types.length;we++)I(X.types[we])||(de=Math.min(de,X.types[we].conversionIndex));return de}function V(X,de){if(X.hasAny){if(!de.hasAny)return 1}else if(de.hasAny)return-1;if(X.restParam){if(!de.restParam)return 1}else if(de.restParam)return-1;if(X.hasConversion){if(!de.hasConversion)return 1}else if(de.hasConversion)return-1;const we=O(X)-O(de);if(we<0)return-1;if(we>0)return 1;const ae=$(X)-$(de);return ae<0?-1:ae>0?1:0}function j(X,de){const we=X.params,ae=de.params,he=Te(we),Ee=Te(ae),$e=w(we),Be=w(ae);if($e&&he.hasAny){if(!Be||!Ee.hasAny)return 1}else if(Be&&Ee.hasAny)return-1;let lt=0,Je=0,Xt;for(Xt of we)Xt.hasAny&&++lt,Xt.hasConversion&&++Je;let fn=0,Wt=0;for(Xt of ae)Xt.hasAny&&++fn,Xt.hasConversion&&++Wt;if(lt!==fn)return lt-fn;if($e&&he.hasConversion){if(!Be||!Ee.hasConversion)return 1}else if(Be&&Ee.hasConversion)return-1;if(Je!==Wt)return Je-Wt;if($e){if(!Be)return 1}else if(Be)return-1;const an=(we.length-ae.length)*($e?-1:1);if(an!==0)return an;const Sn=[];let Mn=0;for(let di=0;di<we.length;++di){const Li=V(we[di],ae[di]);Sn.push(Li),Mn+=Li}if(Mn!==0)return Mn;let ki;for(ki of Sn)if(ki!==0)return ki;return 0}function G(X){if(X.length===0)return[];const de=X.map(a);X.length>1&&de.sort((he,Ee)=>he.index-Ee.index);let we=de[0].conversionsTo;if(X.length===1)return we;we=we.concat([]);const ae=new Set(X);for(let he=1;he<de.length;++he){let Ee;for(Ee of de[he].conversionsTo)ae.has(Ee.from)||(we.push(Ee),ae.add(Ee.from))}return we}function Y(X,de){let we=de;if(X.some(he=>he.hasConversion)){const he=w(X),Ee=X.map(J);we=function(){const Be=[],lt=he?arguments.length-1:arguments.length;for(let Je=0;Je<lt;Je++)Be[Je]=Ee[Je](arguments[Je]);return he&&(Be[lt]=arguments[lt].map(Ee[lt])),de.apply(this,Be)}}let ae=we;if(w(X)){const he=X.length-1;ae=function(){return we.apply(this,ke(arguments,0,he).concat([ke(arguments,he)]))}}return ae}function J(X){let de,we,ae,he;const Ee=[],$e=[];switch(X.types.forEach(function(Be){Be.conversion&&(Ee.push(a(Be.conversion.from).test),$e.push(Be.conversion.convert))}),$e.length){case 0:return function(lt){return lt};case 1:return de=Ee[0],ae=$e[0],function(lt){return de(lt)?ae(lt):lt};case 2:return de=Ee[0],we=Ee[1],ae=$e[0],he=$e[1],function(lt){return de(lt)?ae(lt):we(lt)?he(lt):lt};default:return function(lt){for(let Je=0;Je<$e.length;Je++)if(Ee[Je](lt))return $e[Je](lt);return lt}}}function L(X){function de(we,ae,he){if(ae<we.length){const Ee=we[ae];let $e=[];if(Ee.restParam){const Be=Ee.types.filter(I);Be.length<Ee.types.length&&$e.push({types:Be,name:"..."+Be.map(lt=>lt.name).join("|"),hasAny:Be.some(lt=>lt.isAny),hasConversion:!1,restParam:!0}),$e.push(Ee)}else $e=Ee.types.map(function(Be){return{types:[Be],name:Be.name,hasAny:Be.isAny,hasConversion:Be.conversion,restParam:!1}});return Re($e,function(Be){return de(we,ae+1,he.concat([Be]))})}else return[he]}return de(X,0,[])}function U(X,de){const we=Math.max(X.length,de.length);for(let Be=0;Be<we;Be++){const lt=k(X,Be),Je=k(de,Be);let Xt=!1,fn;for(fn of Je)if(lt.has(fn)){Xt=!0;break}if(!Xt)return!1}const ae=X.length,he=de.length,Ee=w(X),$e=w(de);return Ee?$e?ae===he:he>=ae:$e?ae>=he:ae===he}function W(X){return X.map(de=>Ie(de)?Ct(de.referToSelf.callback):gt(de)?Ke(de.referTo.references,de.referTo.callback):de)}function B(X,de,we){const ae=[];let he;for(he of X){let Ee=we[he];if(typeof Ee!="number")throw new TypeError('No definition for referenced signature "'+he+'"');if(Ee=de[Ee],typeof Ee!="function")return!1;ae.push(Ee)}return ae}function q(X,de,we){const ae=W(X),he=new Array(ae.length).fill(!1);let Ee=!0;for(;Ee;){Ee=!1;let $e=!0;for(let Be=0;Be<ae.length;++Be){if(he[Be])continue;const lt=ae[Be];if(Ie(lt))ae[Be]=lt.referToSelf.callback(we),ae[Be].referToSelf=lt.referToSelf,he[Be]=!0,$e=!1;else if(gt(lt)){const Je=B(lt.referTo.references,ae,de);Je?(ae[Be]=lt.referTo.callback.apply(this,Je),ae[Be].referTo=lt.referTo,he[Be]=!0,$e=!1):Ee=!0}}if($e&&Ee)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return ae}function Z(X){const de=/\bthis(\(|\.signatures\b)/;Object.keys(X).forEach(we=>{const ae=X[we];if(de.test(ae.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function re(X,de){if(o.createCount++,Object.keys(de).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&Z(de);const we=[],ae=[],he={},Ee=[];let $e;for($e in de){if(!Object.prototype.hasOwnProperty.call(de,$e))continue;const un=_($e);if(!un)continue;we.forEach(function(_i){if(U(_i,un))throw new TypeError('Conflicting signatures "'+g(_i)+'" and "'+g(un)+'".')}),we.push(un);const jr=ae.length;ae.push(de[$e]);const Pi=un.map(v);let Ds;for(Ds of L(Pi)){const _i=g(Ds);Ee.push({params:Ds,name:_i,fn:jr}),Ds.every(ns=>!ns.hasConversion)&&(he[_i]=jr)}}Ee.sort(j);const Be=q(ae,he,ir);let lt;for(lt in he)Object.prototype.hasOwnProperty.call(he,lt)&&(he[lt]=Be[he[lt]]);const Je=[],Xt=new Map;for(lt of Ee)Xt.has(lt.name)||(lt.fn=Be[lt.fn],Je.push(lt),Xt.set(lt.name,lt));const fn=Je[0]&&Je[0].params.length<=2&&!w(Je[0].params),Wt=Je[1]&&Je[1].params.length<=2&&!w(Je[1].params),an=Je[2]&&Je[2].params.length<=2&&!w(Je[2].params),Sn=Je[3]&&Je[3].params.length<=2&&!w(Je[3].params),Mn=Je[4]&&Je[4].params.length<=2&&!w(Je[4].params),ki=Je[5]&&Je[5].params.length<=2&&!w(Je[5].params),di=fn&&Wt&&an&&Sn&&Mn&&ki;for(let un=0;un<Je.length;++un)Je[un].test=T(Je[un].params);const Li=fn?S(Je[0].params[0]):pd,As=Wt?S(Je[1].params[0]):pd,Br=an?S(Je[2].params[0]):pd,ls=Sn?S(Je[3].params[0]):pd,ll=Mn?S(Je[4].params[0]):pd,Fo=ki?S(Je[5].params[0]):pd,qa=fn?S(Je[0].params[1]):pd,Nr=Wt?S(Je[1].params[1]):pd,Ri=an?S(Je[2].params[1]):pd,hi=Sn?S(Je[3].params[1]):pd,Vs=Mn?S(Je[4].params[1]):pd,ri=ki?S(Je[5].params[1]):pd;for(let un=0;un<Je.length;++un)Je[un].implementation=Y(Je[un].params,Je[un].fn);const Ni=fn?Je[0].implementation:n2,ve=Wt?Je[1].implementation:n2,ce=an?Je[2].implementation:n2,_e=Sn?Je[3].implementation:n2,Ue=Mn?Je[4].implementation:n2,je=ki?Je[5].implementation:n2,Dt=fn?Je[0].params.length:-1,Ht=Wt?Je[1].params.length:-1,xn=an?Je[2].params.length:-1,rr=Sn?Je[3].params.length:-1,mr=Mn?Je[4].params.length:-1,jn=ki?Je[5].params.length:-1,Dr=di?6:0,ii=Je.length,dn=Je.map(un=>un.test),Ir=Je.map(un=>un.implementation),Jr=function(){for(let jr=Dr;jr<ii;jr++)if(dn[jr](arguments))return Ir[jr].apply(this,arguments);return o.onMismatch(X,arguments,Je)};function ir(un,jr){return arguments.length===Dt&&Li(un)&&qa(jr)?Ni.apply(this,arguments):arguments.length===Ht&&As(un)&&Nr(jr)?ve.apply(this,arguments):arguments.length===xn&&Br(un)&&Ri(jr)?ce.apply(this,arguments):arguments.length===rr&&ls(un)&&hi(jr)?_e.apply(this,arguments):arguments.length===mr&&ll(un)&&Vs(jr)?Ue.apply(this,arguments):arguments.length===jn&&Fo(un)&&ri(jr)?je.apply(this,arguments):Jr.apply(this,arguments)}try{Object.defineProperty(ir,"name",{value:X})}catch{}return ir.signatures=he,ir._typedFunctionData={signatures:Je,signatureMap:Xt},ir}function xe(X,de,we){throw F(X,de,we)}function pe(X){return ke(X,0,X.length-1)}function Te(X){return X[X.length-1]}function ke(X,de,we){return Array.prototype.slice.call(X,de,we)}function it(X,de){for(let we=0;we<X.length;we++)if(de(X[we]))return X[we]}function Re(X,de){return Array.prototype.concat.apply([],X.map(de))}function ut(){const X=pe(arguments).map(we=>g(_(we))),de=Te(arguments);if(typeof de!="function")throw new TypeError("Callback function expected as last argument");return Ke(X,de)}function Ke(X,de){return{referTo:{references:X,callback:de}}}function Ct(X){if(typeof X!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:X}}}function gt(X){return X&&typeof X.referTo=="object"&&Array.isArray(X.referTo.references)&&typeof X.referTo.callback=="function"}function Ie(X){return X&&typeof X.referToSelf=="object"&&typeof X.referToSelf.callback=="function"}function Ve(X,de){if(!X)return de;if(de&&de!==X){const we=new Error("Function names do not match (expected: "+X+", actual: "+de+")");throw we.data={actual:de,expected:X},we}return X}function ft(X){let de;for(const we in X)Object.prototype.hasOwnProperty.call(X,we)&&(d(X[we])||typeof X[we].signature=="string")&&(de=Ve(de,X[we].name));return de}function _t(X,de){let we;for(we in de)if(Object.prototype.hasOwnProperty.call(de,we)){if(we in X&&de[we]!==X[we]){const ae=new Error('Signature "'+we+'" is defined twice');throw ae.data={signature:we,sourceFunction:de[we],destFunction:X[we]},ae}X[we]=de[we]}}const Mt=o;o=function(X){const de=typeof X=="string",we=de?1:0;let ae=de?X:"";const he={};for(let Ee=we;Ee<arguments.length;++Ee){const $e=arguments[Ee];let Be={},lt;if(typeof $e=="function"?(lt=$e.name,typeof $e.signature=="string"?Be[$e.signature]=$e:d($e)&&(Be=$e.signatures)):e($e)&&(Be=$e,de||(lt=ft($e))),Object.keys(Be).length===0){const Je=new TypeError("Argument to 'typed' at index "+Ee+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Je.data={index:Ee,argument:$e},Je}de||(ae=Ve(ae,lt)),_t(he,Be)}return re(ae||"",he)},o.create=A8e,o.createCount=Mt.createCount,o.onMismatch=xe,o.throwMismatchError=xe,o.createError=F,o.clear=l,o.clearConversions=c,o.addTypes=u,o._findType=a,o.referTo=ut,o.referToSelf=Ct,o.convert=m,o.findSignature=h,o.find=p,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(X,de){let we="any";de!==!1&&r.has("Object")&&(we="Object"),o.addTypes([X],we)};function st(X){if(!X||typeof X.from!="string"||typeof X.to!="string"||typeof X.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(X.to===X.from)throw new SyntaxError('Illegal to define conversion from "'+X.from+'" to itself.')}return o.addConversion=function(X){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};st(X);const we=a(X.to),ae=we.conversionsTo.find(he=>he.from===X.from);if(ae)if(de&&de.override)o.removeConversion({from:ae.from,to:X.to,convert:ae.convert});else throw new Error('There is already a conversion from "'+X.from+'" to "'+we.name+'"');we.conversionsTo.push({from:X.from,convert:X.convert,index:s++})},o.addConversions=function(X,de){X.forEach(we=>o.addConversion(we,de))},o.removeConversion=function(X){st(X);const de=a(X.to),we=it(de.conversionsTo,he=>he.from===X.from);if(!we)throw new Error("Attempt to remove nonexistent conversion from "+X.from+" to "+X.to);if(we.convert!==X.convert)throw new Error("Conversion to remove does not match existing conversion");const ae=de.conversionsTo.indexOf(we);de.conversionsTo.splice(ae,1)},o.resolve=function(X,de){if(!d(X))throw new TypeError(fbe);const we=X._typedFunctionData.signatures;for(let ae=0;ae<we.length;++ae)if(we[ae].test(de))return we[ae];return null},o}const A5=A8e();function ni(e,t,n,r){function i(s){var o=iBt(s,t.map(lBt));return aBt(e,t,s),n(o)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function aBt(e,t,n){var r=t.filter(s=>!uBt(s)).every(s=>n[s]!==void 0);if(!r){var i=t.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function uBt(e){return e&&e[0]==="?"}function lBt(e){return e&&e[0]==="?"?e.slice(1):e}function Gs(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function OH(e,t,n){var r={2:"0b",8:"0o",16:"0x"},i=r[t],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Gs(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Gs(e))throw new Error("Value must be an integer");e<0&&(e=e+2**n),s="i".concat(n)}var o="";return e<0&&(e=-e,o="-"),"".concat(o).concat(i).concat(e.toString(t)).concat(s)}function OK(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:r,wordSize:i}=D8e(t);switch(n){case"fixed":return fBt(e,r);case"exponential":return I8e(e,r);case"engineering":return cBt(e,r);case"bin":return OH(e,2,i);case"oct":return OH(e,8,i);case"hex":return OH(e,16,i);case"auto":return dBt(e,r,t).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function D8e(e){var t="auto",n,r;if(e!==void 0)if(bs(e))n=e;else if(Wo(e))n=e.toNumber();else if(hie(e))e.precision!==void 0&&(n=dbe(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(r=dbe(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:n,wordSize:r}}function c9(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return o.length===0&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function cBt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=c9(e),r=f9(n,t),i=r.exponent,s=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(bs(t))for(;t>s.length||i-o+1>s.length;)s.push(0);else for(var a=Math.abs(i-o)-(s.length-1),u=0;u<a;u++)s.push(0);for(var l=Math.abs(i-o),c=1;l>0;)c++,l--;var f=s.slice(c).join(""),d=bs(t)&&f.length||f.match(/[1-9]/)?"."+f:"",h=s.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return r.sign+h}function fBt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=c9(e),r=typeof t=="number"?f9(n,n.exponent+1+t):n,i=r.coefficients,s=r.exponent+1,o=s+(t||0);return i.length<o&&(i=i.concat(PS(o-i.length))),s<0&&(i=PS(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function I8e(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=c9(e),r=t?f9(n,t):n,i=r.coefficients,s=r.exponent;i.length<t&&(i=i.concat(PS(t-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function dBt(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=hbe(n==null?void 0:n.lowerExp,-3),i=hbe(n==null?void 0:n.upperExp,5),s=c9(e),o=t?f9(s,t):s;if(o.exponent<r||o.exponent>=i)return I8e(e,t);var a=o.coefficients,u=o.exponent;a.length<t&&(a=a.concat(PS(t-a.length))),a=a.concat(PS(u-a.length+1+(a.length<t?t-a.length:0))),a=PS(-u).concat(a);var l=u>0?u:0;return l<a.length-1&&a.splice(l+1,0,"."),o.sign+a.join("")}function f9(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t){var i=r.splice(t,r.length-t);if(i[0]>=5){var s=t-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function PS(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function hBt(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function D5(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),r)}function pBt(e,t){var n=e>0?!0:e<0?!1:1/e===1/0,r=t>0?!0:t<0?!1:1/t===1/0;return n^r?-e:e}function dbe(e,t){if(bs(e))return e;if(Wo(e))return e.toNumber();t()}function hbe(e,t){return bs(e)?e:Wo(e)?e.toNumber():t}var k8e=function(){return k8e=A5.create,A5},mBt=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],gBt=ni("typed",mBt,function(t){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:s}=t,o=k8e();return o.clear(),o.addTypes([{name:"number",test:bs},{name:"Complex",test:S8e},{name:"BigNumber",test:Wo},{name:"bigint",test:ALt},{name:"Fraction",test:C8e},{name:"Unit",test:T8e},{name:"identifier",test:a=>/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:og},{name:"Chain",test:nBt},{name:"Array",test:jo},{name:"Matrix",test:aa},{name:"DenseMatrix",test:DLt},{name:"SparseMatrix",test:ILt},{name:"Range",test:kLt},{name:"Index",test:die},{name:"boolean",test:RLt},{name:"ResultSet",test:NLt},{name:"Help",test:PLt},{name:"function",test:OLt},{name:"Date",test:FLt},{name:"RegExp",test:MLt},{name:"null",test:LLt},{name:"undefined",test:BLt},{name:"AccessorNode",test:jLt},{name:"ArrayNode",test:ULt},{name:"AssignmentNode",test:zLt},{name:"BlockNode",test:VLt},{name:"ConditionalNode",test:HLt},{name:"ConstantNode",test:qLt},{name:"FunctionNode",test:GLt},{name:"FunctionAssignmentNode",test:WLt},{name:"IndexNode",test:YLt},{name:"Node",test:KLt},{name:"ObjectNode",test:XLt},{name:"OperatorNode",test:QLt},{name:"ParenthesisNode",test:JLt},{name:"RangeNode",test:ZLt},{name:"RelationalNode",test:eBt},{name:"SymbolNode",test:tBt},{name:"Map",test:$Lt},{name:"Object",test:hie}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||B4(u),hBt(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||j4(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||j4(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||B4(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return s||U4(u),new s(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||j4(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){s||U4(u);var l=new s(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||B4(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){s||U4(u);try{return new s(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||j4(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||B4(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return s||U4(u),new s(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||yBt(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&C5(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&C5(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o});function B4(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function j4(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function yBt(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function U4(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var FK=9e15,jb=1e9,MK="0123456789abcdef",I5="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",k5="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",$K={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:FK,crypto:!1},R8e,Cg,Gn=!0,d9="[DecimalError] ",Xv=d9+"Invalid argument: ",N8e=d9+"Precision limit exceeded",P8e=d9+"crypto unavailable",O8e="[object Decimal]",nl=Math.floor,na=Math.pow,vBt=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,bBt=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,xBt=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,F8e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,sp=1e7,Dn=7,wBt=9007199254740991,_Bt=I5.length-1,LK=k5.length-1,mt={toStringTag:O8e};mt.absoluteValue=mt.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),yn(e)};mt.ceil=function(){return yn(new this.constructor(this),this.e+1,2)};mt.clampedTo=mt.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(Xv+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};mt.comparedTo=mt.cmp=function(e){var t,n,r,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,u=s.s,l=e.s;if(!o||!a)return!u||!l?NaN:u!==l?u:o===a?0:!o^u<0?1:-1;if(!o[0]||!a[0])return o[0]?u:a[0]?-l:0;if(u!==l)return u;if(s.e!==e.e)return s.e>e.e^u<0?1:-1;for(r=o.length,i=a.length,t=0,n=r<i?r:i;t<n;++t)if(o[t]!==a[t])return o[t]>a[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};mt.cosine=mt.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Dn,r.rounding=1,n=EBt(r,j8e(r,n)),r.precision=e,r.rounding=t,yn(Cg==2||Cg==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};mt.cubeRoot=mt.cbrt=function(){var e,t,n,r,i,s,o,a,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Gn=!1,s=c.s*na(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=ou(c.d),e=c.e,(s=(e-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=na(n,1/3),e=nl((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?n="5e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new f(n),r.s=c.s):r=new f(s.toString()),o=(e=f.precision)+3;;)if(a=r,u=a.times(a).times(a),l=u.plus(c),r=os(l.plus(c).times(a),l.plus(u),o+2,1),ou(a.d).slice(0,o)===(n=ou(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(yn(a,e+1,0),a.times(a).times(a).eq(c))){r=a;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(yn(r,e+1,1),t=!r.times(r).times(r).eq(c));break}return Gn=!0,yn(r,e,f.rounding,t)};mt.decimalPlaces=mt.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-nl(this.e/Dn))*Dn,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};mt.dividedBy=mt.div=function(e){return os(this,new this.constructor(e))};mt.dividedToIntegerBy=mt.divToInt=function(e){var t=this,n=t.constructor;return yn(os(t,new n(e),0,1,1),n.precision,n.rounding)};mt.equals=mt.eq=function(e){return this.cmp(e)===0};mt.floor=function(){return yn(new this.constructor(this),this.e+1,3)};mt.greaterThan=mt.gt=function(e){return this.cmp(e)>0};mt.greaterThanOrEqualTo=mt.gte=function(e){var t=this.cmp(e);return t==1||t===0};mt.hyperbolicCosine=mt.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(e=Math.ceil(i/3),t=(1/p9(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=BC(o,1,s.times(t),new o(1),!0);for(var u,l=e,c=new o(8);l--;)u=s.times(s),s=a.minus(u.times(c.minus(u.times(c))));return yn(s,o.precision=n,o.rounding=r,!0)};mt.hyperbolicSine=mt.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=BC(s,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/p9(5,e)),i=BC(s,2,i,i,!0);for(var o,a=new s(5),u=new s(16),l=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(u.times(o).plus(l))))}return s.precision=t,s.rounding=n,yn(i,t,n,!0)};mt.hyperbolicTangent=mt.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,os(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};mt.inverseCosine=mt.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,s=n.rounding;return r!==-1?r===0?t.isNeg()?Xh(n,i,s):new n(0):new n(NaN):t.isZero()?Xh(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=Xh(n,i+4,s).times(.5),n.precision=i,n.rounding=s,e.minus(t))};mt.inverseHyperbolicCosine=mt.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Gn=!1,n=n.times(n).minus(1).sqrt().plus(n),Gn=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};mt.inverseHyperbolicSine=mt.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Gn=!1,n=n.times(n).plus(1).sqrt().plus(n),Gn=!0,r.precision=e,r.rounding=t,n.ln())};mt.inverseHyperbolicTangent=mt.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?yn(new s(i),e,t,!0):(s.precision=n=r-i.e,i=os(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)};mt.inverseSine=mt.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,t!==-1?t===0?(e=Xh(s,n+4,r).times(.5),e.s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))};mt.inverseTangent=mt.atan=function(){var e,t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=LK)return o=Xh(c,f+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(f+4<=LK)return o=Xh(c,f+4,d).times(.5),o.s=l.s,o}for(c.precision=a=f+10,c.rounding=1,n=Math.min(28,a/Dn+2|0),e=n;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Gn=!1,t=Math.ceil(a/Dn),r=1,u=l.times(l),o=new c(l),i=l;e!==-1;)if(i=i.times(u),s=o.minus(i.div(r+=2)),i=i.times(u),o=s.plus(i.div(r+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Gn=!0,yn(o,c.precision=f,c.rounding=d,!0)};mt.isFinite=function(){return!!this.d};mt.isInteger=mt.isInt=function(){return!!this.d&&nl(this.e/Dn)>this.d.length-2};mt.isNaN=function(){return!this.s};mt.isNegative=mt.isNeg=function(){return this.s<0};mt.isPositive=mt.isPos=function(){return this.s>0};mt.isZero=function(){return!!this.d&&this.d[0]===0};mt.lessThan=mt.lt=function(e){return this.cmp(e)<0};mt.lessThanOrEqualTo=mt.lte=function(e){return this.cmp(e)<1};mt.logarithm=mt.log=function(e){var t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(Gn=!1,a=f+h,o=H1(l,a),r=t?R5(c,a+10):H1(e,a),u=os(o,r,a,1),a3(u.d,i=f,d))do if(a+=10,o=H1(l,a),r=t?R5(c,a+10):H1(e,a),u=os(o,r,a,1),!s){+ou(u.d).slice(i+1,i+15)+1==1e14&&(u=yn(u,f+1,0));break}while(a3(u.d,i+=10,d));return Gn=!0,yn(u,f,d)};mt.minus=mt.sub=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return!h.s||!e.s?e=new p(NaN):h.d?e.s=-e.s:e=new p(e.d||h.s!==e.s?h:NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(l=h.d,d=e.d,a=p.precision,u=p.rounding,!l[0]||!d[0]){if(d[0])e.s=-e.s;else if(l[0])e=new p(h);else return new p(u===3?-0:0);return Gn?yn(e,a,u):e}if(n=nl(e.e/Dn),c=nl(h.e/Dn),l=l.slice(),s=c-n,s){for(f=s<0,f?(t=l,s=-s,o=d.length):(t=d,n=c,o=l.length),r=Math.max(Math.ceil(a/Dn),o)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=l.length,o=d.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}s=0}for(f&&(t=l,l=d,d=t,e.s=-e.s),o=l.length,r=d.length-o;r>0;--r)l[o++]=0;for(r=d.length;r>s;){if(l[--r]<d[r]){for(i=r;i&&l[--i]===0;)l[i]=sp-1;--l[i],l[r]+=sp}l[r]-=d[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=h9(l,n),Gn?yn(e,a,u):e):new p(u===3?-0:0)};mt.modulo=mt.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?yn(new r(n),r.precision,r.rounding):(Gn=!1,r.modulo==9?(t=os(n,e.abs(),0,3,1),t.s*=e.s):t=os(n,e,0,r.modulo,1),t=t.times(e),Gn=!0,n.minus(t))};mt.naturalExponential=mt.exp=function(){return BK(this)};mt.naturalLogarithm=mt.ln=function(){return H1(this)};mt.negated=mt.neg=function(){var e=new this.constructor(this);return e.s=-e.s,yn(e)};mt.plus=mt.add=function(e){var t,n,r,i,s,o,a,u,l,c,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return!f.s||!e.s?e=new d(NaN):f.d||(e=new d(e.d||f.s===e.s?f:NaN)),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(l=f.d,c=e.d,a=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(e=new d(f)),Gn?yn(e,a,u):e;if(s=nl(f.e/Dn),r=nl(e.e/Dn),l=l.slice(),i=s-r,i){for(i<0?(n=l,i=-i,o=c.length):(n=c,r=s,o=l.length),s=Math.ceil(a/Dn),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,n=c,c=l,l=n),t=0;i;)t=(l[--i]=l[i]+c[i]+t)/sp|0,l[i]%=sp;for(t&&(l.unshift(t),++r),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=h9(l,r),Gn?yn(e,a,u):e};mt.precision=mt.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Xv+e);return n.d?(t=M8e(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};mt.round=function(){var e=this,t=e.constructor;return yn(new t(e),e.e+1,t.rounding)};mt.sine=mt.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Dn,r.rounding=1,n=CBt(r,j8e(r,n)),r.precision=e,r.rounding=t,yn(Cg>2?n.neg():n,e,t,!0)):new r(NaN)};mt.squareRoot=mt.sqrt=function(){var e,t,n,r,i,s,o=this,a=o.d,u=o.e,l=o.s,c=o.constructor;if(l!==1||!a||!a[0])return new c(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(Gn=!1,l=Math.sqrt(+o),l==0||l==1/0?(t=ou(a),(t.length+u)%2==0&&(t+="0"),l=Math.sqrt(t),u=nl((u+1)/2)-(u<0||u%2),l==1/0?t="5e"+u:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),r=new c(t)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(s=r,r=s.plus(os(o,s,n+2,1)).times(.5),ou(s.d).slice(0,n)===(t=ou(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(yn(s,u+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(yn(r,u+1,1),e=!r.times(r).eq(o));break}return Gn=!0,yn(r,u,c.rounding,e)};mt.tangent=mt.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=os(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,yn(Cg==2||Cg==4?n.neg():n,e,t,!0)):new r(NaN)};mt.times=mt.mul=function(e){var t,n,r,i,s,o,a,u,l,c=this,f=c.constructor,d=c.d,h=(e=new f(e)).d;if(e.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!e.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?e.s/0:e.s*0);for(n=nl(c.e/Dn)+nl(e.e/Dn),u=d.length,l=h.length,u<l&&(s=d,d=h,h=s,o=u,u=l,l=o),s=[],o=u+l,r=o;r--;)s.push(0);for(r=l;--r>=0;){for(t=0,i=u+r;i>r;)a=s[i]+h[r]*d[i-r-1]+t,s[i--]=a%sp|0,t=a/sp|0;s[i]=(s[i]+t)%sp|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=h9(s,n),Gn?yn(e,f.precision,f.rounding):e};mt.toBinary=function(e,t){return pie(this,2,e,t)};mt.toDecimalPlaces=mt.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Gc(e,0,jb),t===void 0?t=r.rounding:Gc(t,0,8),yn(n,e+n.e+1,t))};mt.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Zm(r,!0):(Gc(e,0,jb),t===void 0?t=i.rounding:Gc(t,0,8),r=yn(new i(r),e+1,t),n=Zm(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};mt.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?n=Zm(i):(Gc(e,0,jb),t===void 0?t=s.rounding:Gc(t,0,8),r=yn(new s(i),e+i.e+1,t),n=Zm(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};mt.toFraction=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.d,m=h.constructor;if(!p)return new m(h);if(l=n=new m(1),r=u=new m(0),t=new m(r),s=t.e=M8e(p)-h.e-1,o=s%Dn,t.d[0]=na(10,o<0?Dn+o:o),e==null)e=s>0?t:l;else{if(a=new m(e),!a.isInt()||a.lt(l))throw Error(Xv+a);e=a.gt(t)?s>0?t:l:a}for(Gn=!1,a=new m(ou(p)),c=m.precision,m.precision=s=p.length*Dn*2;f=os(a,t,0,1,1),i=n.plus(f.times(r)),i.cmp(e)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=t,t=a.minus(f.times(i)),a=i;return i=os(e.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=h.s,d=os(l,r,s,1).minus(h).abs().cmp(os(u,n,s,1).minus(h).abs())<1?[l,r]:[u,n],m.precision=c,Gn=!0,d};mt.toHexadecimal=mt.toHex=function(e,t){return pie(this,16,e,t)};mt.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:Gc(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Gn=!1,n=os(n,e,0,t,1).times(e),Gn=!0,yn(n)):(e.s=n.s,n=e),n};mt.toNumber=function(){return+this};mt.toOctal=function(e,t){return pie(this,8,e,t)};mt.toPower=mt.pow=function(e){var t,n,r,i,s,o,a=this,u=a.constructor,l=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(na(+a,l));if(a=new u(a),a.eq(1))return a;if(r=u.precision,s=u.rounding,e.eq(1))return yn(a,r,s);if(t=nl(e.e/Dn),t>=e.d.length-1&&(n=l<0?-l:l)<=wBt)return i=$8e(u,a,n,r),e.s<0?new u(1).div(i):yn(i,r,s);if(o=a.s,o<0){if(t<e.d.length-1)return new u(NaN);if(e.d[t]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return n=na(+a,l),t=n==0||!isFinite(n)?nl(l*(Math.log("0."+ou(a.d))/Math.LN10+a.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(Gn=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),i=BK(e.times(H1(a,r+n)),r),i.d&&(i=yn(i,r+5,1),a3(i.d,r,s)&&(t=r+10,i=yn(BK(e.times(H1(a,t+n)),t),t+5,1),+ou(i.d).slice(r+1,r+15)+1==1e14&&(i=yn(i,r+1,0)))),i.s=o,Gn=!0,u.rounding=s,yn(i,r,s))};mt.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Zm(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Gc(e,1,jb),t===void 0?t=i.rounding:Gc(t,0,8),r=yn(new i(r),e,t),n=Zm(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};mt.toSignificantDigits=mt.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Gc(e,1,jb),t===void 0?t=r.rounding:Gc(t,0,8)),yn(new r(n),e,t)};mt.toString=function(){var e=this,t=e.constructor,n=Zm(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};mt.truncated=mt.trunc=function(){return yn(new this.constructor(this),this.e+1,1)};mt.valueOf=mt.toJSON=function(){var e=this,t=e.constructor,n=Zm(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function ou(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)r=e[t]+"",n=Dn-r.length,n&&(s+=E1(n)),s+=r;o=e[t],r=o+"",n=Dn-r.length,n&&(s+=E1(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function Gc(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Xv+e)}function a3(e,t,n,r){var i,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=Dn,i=0):(i=Math.ceil((t+1)/Dn),t%=Dn),s=na(10,Dn-t),a=e[i]%s|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),o=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(e[i+1]/s/100|0)==na(10,t-2)-1||(a==s/2||a==0)&&(e[i+1]/s/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),o=(r||n<4)&&a==9999||!r&&n>3&&a==4999):o=((r||n<4)&&a+1==s||!r&&n>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==na(10,t-3)-1,o}function wF(e,t,n){for(var r,i=[0],s,o=0,a=e.length;o<a;){for(s=i.length;s--;)i[s]*=t;for(i[0]+=MK.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function EBt(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/p9(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=BC(e,1,t.times(i),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var os=function(){function e(r,i,s){var o,a=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+a,r[u]=o%s|0,a=o/s|0;return a&&r.unshift(a),r}function t(r,i,s,o){var a,u;if(s!=o)u=s>o?1:-1;else for(a=u=0;a<s;a++)if(r[a]!=i[a]){u=r[a]>i[a]?1:-1;break}return u}function n(r,i,s,o){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*o+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o,a,u){var l,c,f,d,h,p,m,g,y,v,b,_,w,S,T,A,k,I,R,F,O=r.constructor,$=r.s==i.s?1:-1,V=r.d,j=i.d;if(!V||!V[0]||!j||!j[0])return new O(!r.s||!i.s||(V?j&&V[0]==j[0]:!j)?NaN:V&&V[0]==0||!j?$*0:$/0);for(u?(h=1,c=r.e-i.e):(u=sp,h=Dn,c=nl(r.e/h)-nl(i.e/h)),R=j.length,k=V.length,y=new O($),v=y.d=[],f=0;j[f]==(V[f]||0);f++);if(j[f]>(V[f]||0)&&c--,s==null?(S=s=O.precision,o=O.rounding):a?S=s+(r.e-i.e)+1:S=s,S<0)v.push(1),p=!0;else{if(S=S/h+2|0,f=0,R==1){for(d=0,j=j[0],S++;(f<k||d)&&S--;f++)T=d*u+(V[f]||0),v[f]=T/j|0,d=T%j|0;p=d||f<k}else{for(d=u/(j[0]+1)|0,d>1&&(j=e(j,d,u),V=e(V,d,u),R=j.length,k=V.length),A=R,b=V.slice(0,R),_=b.length;_<R;)b[_++]=0;F=j.slice(),F.unshift(0),I=j[0],j[1]>=u/2&&++I;do d=0,l=t(j,b,R,_),l<0?(w=b[0],R!=_&&(w=w*u+(b[1]||0)),d=w/I|0,d>1?(d>=u&&(d=u-1),m=e(j,d,u),g=m.length,_=b.length,l=t(m,b,g,_),l==1&&(d--,n(m,R<g?F:j,g,u))):(d==0&&(l=d=1),m=j.slice()),g=m.length,g<_&&m.unshift(0),n(b,m,_,u),l==-1&&(_=b.length,l=t(j,b,R,_),l<1&&(d++,n(b,R<_?F:j,_,u))),_=b.length):l===0&&(d++,b=[0]),v[f++]=d,l&&b[0]?b[_++]=V[A]||0:(b=[V[A]],_=1);while((A++<k||b[0]!==void 0)&&S--);p=b[0]!==void 0}v[0]||v.shift()}if(h==1)y.e=c,R8e=p;else{for(f=1,d=v[0];d>=10;d/=10)f++;y.e=f+c*h-1,yn(y,a?s+y.e+1:s,o,p)}return y}}();function yn(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor;e:if(t!=null){if(f=e.d,!f)return e;for(i=1,a=f[0];a>=10;a/=10)i++;if(s=t-i,s<0)s+=Dn,o=t,c=f[d=0],u=c/na(10,i-o-1)%10|0;else if(d=Math.ceil((s+1)/Dn),a=f.length,d>=a)if(r){for(;a++<=d;)f.push(0);c=u=0,i=1,s%=Dn,o=s-Dn+1}else break e;else{for(c=a=f[d],i=1;a>=10;a/=10)i++;s%=Dn,o=s-Dn+i,u=o<0?0:c/na(10,i-o-1)%10|0}if(r=r||t<0||f[d+1]!==void 0||(o<0?c:c%na(10,i-o-1)),l=n<4?(u||r)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(s>0?o>0?c/na(10,i-o):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,l?(t-=e.e+1,f[0]=na(10,(Dn-t%Dn)%Dn),e.e=-t||0):f[0]=e.e=0,e;if(s==0?(f.length=d,a=1,d--):(f.length=d+1,a=na(10,Dn-s),f[d]=o>0?(c/na(10,i-o)%na(10,o)|0)*a:0),l)for(;;)if(d==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,f[0]==sp&&(f[0]=1));break}else{if(f[d]+=a,f[d]!=sp)break;f[d--]=0,a=1}for(s=f.length;f[--s]===0;)f.pop()}return Gn&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function Zm(e,t,n){if(!e.isFinite())return B8e(e);var r,i=e.e,s=ou(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+E1(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+E1(-i-1)+s,n&&(r=n-o)>0&&(s+=E1(r))):i>=o?(s+=E1(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+E1(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=E1(r))),s}function h9(e,t){var n=e[0];for(t*=Dn;n>=10;n/=10)t++;return t}function R5(e,t,n){if(t>_Bt)throw Gn=!0,n&&(e.precision=n),Error(N8e);return yn(new e(I5),t,1,!0)}function Xh(e,t,n){if(t>LK)throw Error(N8e);return yn(new e(k5),t,n,!0)}function M8e(e){var t=e.length-1,n=t*Dn+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function E1(e){for(var t="";e--;)t+="0";return t}function $8e(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/Dn+4);for(Gn=!1;;){if(n%2&&(s=s.times(t),mbe(s.d,o)&&(i=!0)),n=nl(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}t=t.times(t),mbe(t.d,o)}return Gn=!0,s}function pbe(e){return e.d[e.d.length-1]&1}function L8e(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;)if(r=new e(t[s]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function BK(e,t){var n,r,i,s,o,a,u,l=0,c=0,f=0,d=e.constructor,h=d.rounding,p=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(Gn=!1,u=p):u=t,a=new d(.03125);e.e>-2;)e=e.times(a),f+=5;for(r=Math.log(na(2,f))/Math.LN10*2+5|0,u+=r,n=s=o=new d(1),d.precision=u;;){if(s=yn(s.times(e),u,1),n=n.times(++c),a=o.plus(os(s,n,u,1)),ou(a.d).slice(0,u)===ou(o.d).slice(0,u)){for(i=f;i--;)o=yn(o.times(o),u,1);if(t==null)if(l<3&&a3(o.d,u-r,h,l))d.precision=u+=10,n=s=a=new d(1),c=0,l++;else return yn(o,d.precision=p,h,Gn=!0);else return d.precision=p,o}o=a}}function H1(e,t){var n,r,i,s,o,a,u,l,c,f,d,h=1,p=10,m=e,g=m.d,y=m.constructor,v=y.rounding,b=y.precision;if(m.s<0||!g||!g[0]||!m.e&&g[0]==1&&g.length==1)return new y(g&&!g[0]?-1/0:m.s!=1?NaN:g?0:m);if(t==null?(Gn=!1,c=b):c=t,y.precision=c+=p,n=ou(g),r=n.charAt(0),Math.abs(s=m.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=ou(m.d),r=n.charAt(0),h++;s=m.e,r>1?(m=new y("0."+n),s++):m=new y(r+"."+n.slice(1))}else return l=R5(y,c+2,b).times(s+""),m=H1(new y(r+"."+n.slice(1)),c-p).plus(l),y.precision=b,t==null?yn(m,b,v,Gn=!0):m;for(f=m,u=o=m=os(m.minus(1),m.plus(1),c,1),d=yn(m.times(m),c,1),i=3;;){if(o=yn(o.times(d),c,1),l=u.plus(os(o,new y(i),c,1)),ou(l.d).slice(0,c)===ou(u.d).slice(0,c))if(u=u.times(2),s!==0&&(u=u.plus(R5(y,c+2,b).times(s+""))),u=os(u,new y(h),c,1),t==null)if(a3(u.d,c-p,v,a))y.precision=c+=p,l=o=m=os(f.minus(1),f.plus(1),c,1),d=yn(m.times(m),c,1),i=a=1;else return yn(u,y.precision=b,v,Gn=!0);else return y.precision=b,u;u=l,i+=2}}function B8e(e){return String(e.s*e.s/0)}function jK(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%Dn,n<0&&(r+=Dn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Dn;r<i;)e.d.push(+t.slice(r,r+=Dn));t=t.slice(r),r=Dn-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),Gn&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function SBt(e,t){var n,r,i,s,o,a,u,l,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),F8e.test(t))return jK(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(bBt.test(t))n=16,t=t.toLowerCase();else if(vBt.test(t))n=2;else if(xBt.test(t))n=8;else throw Error(Xv+t);for(s=t.search(/p/i),s>0?(u=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,r=e.constructor,o&&(t=t.replace(".",""),a=t.length,s=a-s,i=$8e(r,new r(n),s,s*2)),l=wF(t,n,sp),c=l.length-1,s=c;l[s]===0;--s)l.pop();return s<0?new r(e.s*0):(e.e=h9(l,c),e.d=l,Gn=!1,o&&(e=os(e,i,a*4)),u&&(e=e.times(Math.abs(u)<54?na(2,u):jC.pow(2,u))),Gn=!0,e)}function CBt(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:BC(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/p9(5,n)),t=BC(e,2,t,t);for(var i,s=new e(5),o=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(a))));return t}function BC(e,t,n,r,i){var s,o,a,u,l=e.precision,c=Math.ceil(l/Dn);for(Gn=!1,u=n.times(n),a=new e(r);;){if(o=os(a.times(u),new e(t++*t++),l,1),a=i?r.plus(o):r.minus(o),r=os(o.times(u),new e(t++*t++),l,1),o=a.plus(r),o.d[c]!==void 0){for(s=c;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=r,r=o,o=s}return Gn=!0,o.d.length=c+1,o}function p9(e,t){for(var n=e;--t;)n*=e;return n}function j8e(e,t){var n,r=t.s<0,i=Xh(e,e.precision,1),s=i.times(.5);if(t=t.abs(),t.lte(s))return Cg=r?4:1,t;if(n=t.divToInt(i),n.isZero())Cg=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(s))return Cg=pbe(n)?r?2:3:r?4:1,t;Cg=pbe(n)?r?1:4:r?3:2}return t.minus(i).abs()}function pie(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor,p=n!==void 0;if(p?(Gc(n,1,jb),r===void 0?r=h.rounding:Gc(r,0,8)):(n=h.precision,r=h.rounding),!e.isFinite())c=B8e(e);else{for(c=Zm(e),o=c.indexOf("."),p?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,o>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-o,d.d=wF(Zm(d),10,i),d.e=d.d.length),f=wF(c,10,i),s=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(o<0?s--:(e=new h(e),e.d=f,e.e=s,e=os(e,d,n,r,0,i),f=e.d,s=e.e,l=R8e),o=f[n],a=i/2,l=l||f[n+1]!==void 0,l=r<4?(o!==void 0||l)&&(r===0||r===(e.s<0?3:2)):o>a||o===a&&(r===4||l||r===6&&f[n-1]&1||r===(e.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,c="";o<u;o++)c+=MK.charAt(f[o]);if(p){if(u>1)if(t==16||t==8){for(o=t==16?4:3,--u;u%o;u++)c+="0";for(f=wF(c,i,t),u=f.length;!f[u-1];--u);for(o=1,c="1.";o<u;o++)c+=MK.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>u)for(s-=u;s--;)c+="0";else s<u&&(c=c.slice(0,s)+"."+c.slice(s))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function mbe(e,t){if(e.length>t)return e.length=t,!0}function TBt(e){return new this(e).abs()}function ABt(e){return new this(e).acos()}function DBt(e){return new this(e).acosh()}function IBt(e,t){return new this(e).plus(t)}function kBt(e){return new this(e).asin()}function RBt(e){return new this(e).asinh()}function NBt(e){return new this(e).atan()}function PBt(e){return new this(e).atanh()}function OBt(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=Xh(this,s,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?Xh(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=Xh(this,s,1).times(.5),n.s=e.s):t.s<0?(this.precision=s,this.rounding=1,n=this.atan(os(e,t,s,1)),t=Xh(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(os(e,t,s,1)),n}function FBt(e){return new this(e).cbrt()}function MBt(e){return yn(e=new this(e),e.e+1,2)}function $Bt(e,t,n){return new this(e).clamp(t,n)}function LBt(e){if(!e||typeof e!="object")throw Error(d9+"Object expected");var t,n,r,i=e.defaults===!0,s=["precision",1,jb,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,FK,"maxE",0,FK,"minE",-9e15,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=$K[n]),(r=e[n])!==void 0)if(nl(r)===r&&r>=s[t+1]&&r<=s[t+2])this[n]=r;else throw Error(Xv+n+": "+r);if(n="crypto",i&&(this[n]=$K[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(P8e);else this[n]=!1;else throw Error(Xv+n+": "+r);return this}function BBt(e){return new this(e).cos()}function jBt(e){return new this(e).cosh()}function U8e(e){var t,n,r;function i(s){var o,a,u,l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,gbe(s)){l.s=s.s,Gn?!s.d||s.e>i.maxE?(l.e=NaN,l.d=null):s.e<i.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;Gn?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[s]):(l.e=o,l.d=[s]);return}else if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return jK(l,s.toString())}else if(u!=="string")throw Error(Xv+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(a===43&&(s=s.slice(1)),l.s=1),F8e.test(s)?jK(l,s):SBt(l,s)}if(i.prototype=mt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=LBt,i.clone=U8e,i.isDecimal=gbe,i.abs=TBt,i.acos=ABt,i.acosh=DBt,i.add=IBt,i.asin=kBt,i.asinh=RBt,i.atan=NBt,i.atanh=PBt,i.atan2=OBt,i.cbrt=FBt,i.ceil=MBt,i.clamp=$Bt,i.cos=BBt,i.cosh=jBt,i.div=UBt,i.exp=zBt,i.floor=VBt,i.hypot=HBt,i.ln=qBt,i.log=WBt,i.log10=YBt,i.log2=GBt,i.max=KBt,i.min=XBt,i.mod=QBt,i.mul=JBt,i.pow=ZBt,i.random=e9t,i.round=t9t,i.sign=n9t,i.sin=r9t,i.sinh=i9t,i.sqrt=s9t,i.sub=o9t,i.sum=a9t,i.tan=u9t,i.tanh=l9t,i.trunc=c9t,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function UBt(e,t){return new this(e).div(t)}function zBt(e){return new this(e).exp()}function VBt(e){return yn(e=new this(e),e.e+1,3)}function HBt(){var e,t,n=new this(0);for(Gn=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Gn=!0,new this(1/0);n=t}return Gn=!0,n.sqrt()}function gbe(e){return e instanceof jC||e&&e.toStringTag===O8e||!1}function qBt(e){return new this(e).ln()}function WBt(e,t){return new this(e).log(t)}function GBt(e){return new this(e).log(2)}function YBt(e){return new this(e).log(10)}function KBt(){return L8e(this,arguments,"lt")}function XBt(){return L8e(this,arguments,"gt")}function QBt(e,t){return new this(e).mod(t)}function JBt(e,t){return new this(e).mul(t)}function ZBt(e,t){return new this(e).pow(t)}function e9t(e){var t,n,r,i,s=0,o=new this(1),a=[];if(e===void 0?e=this.precision:Gc(e,1,jb),r=Math.ceil(e/Dn),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)i=t[s],i>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);s<r;)i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,s):(a.push(i%1e7),s+=4);s=r/4}else throw Error(P8e);else for(;s<r;)a[s++]=Math.random()*1e7|0;for(r=a[--s],e%=Dn,r&&e&&(i=na(10,Dn-e),a[s]=(r/i|0)*i);a[s]===0;s--)a.pop();if(s<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=Dn)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<Dn&&(n-=Dn-r)}return o.e=n,o.d=a,o}function t9t(e){return yn(e=new this(e),e.e+1,this.rounding)}function n9t(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function r9t(e){return new this(e).sin()}function i9t(e){return new this(e).sinh()}function s9t(e){return new this(e).sqrt()}function o9t(e,t){return new this(e).sub(t)}function a9t(){var e=0,t=arguments,n=new this(t[e]);for(Gn=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Gn=!0,yn(n,this.precision,this.rounding)}function u9t(e){return new this(e).tan()}function l9t(e){return new this(e).tanh()}function c9t(e){return yn(e=new this(e),e.e+1,1)}mt[Symbol.for("nodejs.util.inspect.custom")]=mt.toString;mt[Symbol.toStringTag]="Decimal";var jC=mt.constructor=U8e($K);I5=new jC(I5);k5=new jC(k5);var f9t="BigNumber",d9t=["?on","config"],h9t=ni(f9t,d9t,e=>{var{on:t,config:n}=e,r=jC.clone({precision:n.precision,modulo:jC.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},t&&t("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0});const ku=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},md=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},p9t=function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},FH=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},r2=function(){throw SyntaxError("Invalid Param")};function MH(e,t){const n=Math.abs(e),r=Math.abs(t);return e===0?Math.log(r):t===0?Math.log(n):n<3e3&&r<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}const m9t={re:0,im:0},Vx=function(e,t){const n=m9t;if(e==null)n.re=n.im=0;else if(t!==void 0)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return Ze.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return Ze.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else e.length===2?(n.re=e[0],n.im=e[1]):r2();break;case"string":n.im=n.re=0;const r=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,s=0;r===null&&r2();for(let o=0;o<r.length;o++){const a=r[o];a===" "||a==="	"||a===`
`||(a==="+"?i++:a==="-"?s++:a==="i"||a==="I"?(i+s===0&&r2(),r[o+1]!==" "&&!isNaN(r[o+1])?(n.im+=parseFloat((s%2?"-":"")+r[o+1]),o++):n.im+=parseFloat((s%2?"-":"")+"1"),i=s=0):((i+s===0||isNaN(a))&&r2(),r[o+1]==="i"||r[o+1]==="I"?(n.im+=parseFloat((s%2?"-":"")+a),o++):n.re+=parseFloat((s%2?"-":"")+a),i=s=0))}i+s>0&&r2();break;case"number":n.im=0,n.re=e;break;default:r2()}return isNaN(n.re)||isNaN(n.im),n};function Ze(e,t){if(!(this instanceof Ze))return new Ze(e,t);const n=Vx(e,t);this.re=n.re,this.im=n.im}Ze.prototype={re:0,im:0,sign:function(){const e=FH(this.re,this.im);return new Ze(this.re/e,this.im/e)},add:function(e,t){const n=Vx(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?Ze.NAN:Ze.INFINITY:new Ze(this.re+n.re,this.im+n.im)},sub:function(e,t){const n=Vx(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?Ze.NAN:Ze.INFINITY:new Ze(this.re-n.re,this.im-n.im)},mul:function(e,t){const n=Vx(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,o=n.re===0&&n.im===0;return r&&o||i&&s?Ze.NAN:r||i?Ze.INFINITY:n.im===0&&this.im===0?new Ze(this.re*n.re,0):new Ze(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){const n=Vx(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,o=n.re===0&&n.im===0;if(s&&o||r&&i)return Ze.NAN;if(o||r)return Ze.INFINITY;if(s||i)return Ze.ZERO;if(n.im===0)return new Ze(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const a=n.re/n.im,u=n.re*a+n.im;return new Ze((this.re*a+this.im)/u,(this.im*a-this.re)/u)}else{const a=n.im/n.re,u=n.im*a+n.re;return new Ze((this.re+this.im*a)/u,(this.im-this.re*a)/u)}},pow:function(e,t){const n=Vx(e,t),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return Ze.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new Ze(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new Ze(Math.pow(this.im,n.re),0);case 1:return new Ze(0,Math.pow(this.im,n.re));case 2:return new Ze(-Math.pow(this.im,n.re),0);case 3:return new Ze(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return Ze.ZERO;const s=Math.atan2(this.im,this.re),o=MH(this.re,this.im);let a=Math.exp(n.re*o-n.im*s),u=n.im*o+n.re*s;return new Ze(a*Math.cos(u),a*Math.sin(u))},sqrt:function(){const e=this.re,t=this.im;if(t===0)return e>=0?new Ze(Math.sqrt(e),0):new Ze(0,Math.sqrt(-e));const n=FH(e,t);let r=Math.sqrt(.5*(n+Math.abs(e))),i=Math.abs(t)/(2*r);return e>=0?new Ze(r,t<0?-i:i):new Ze(i,t<0?-r:r)},exp:function(){const e=Math.exp(this.re);return this.im===0?new Ze(e,0):new Ze(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new Ze(Math.expm1(e)*Math.cos(t)+p9t(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return t===0&&e>0?new Ze(Math.log(e),0):new Ze(MH(e,t),Math.atan2(t,e))},abs:function(){return FH(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new Ze(Math.sin(e)*ku(t),Math.cos(e)*md(t))},cos:function(){const e=this.re,t=this.im;return new Ze(Math.cos(e)*ku(t),-Math.sin(e)*md(t))},tan:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)+ku(t);return new Ze(Math.sin(e)/n,md(t)/n)},cot:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)-ku(t);return new Ze(-Math.sin(e)/n,md(t)/n)},sec:function(){const e=this.re,t=this.im,n=.5*ku(2*t)+.5*Math.cos(2*e);return new Ze(Math.cos(e)*ku(t)/n,Math.sin(e)*md(t)/n)},csc:function(){const e=this.re,t=this.im,n=.5*ku(2*t)-.5*Math.cos(2*e);return new Ze(Math.sin(e)*ku(t)/n,-Math.cos(e)*md(t)/n)},asin:function(){const e=this.re,t=this.im,n=new Ze(t*t-e*e+1,-2*e*t).sqrt(),r=new Ze(n.re-t,n.im+e).log();return new Ze(r.im,-r.re)},acos:function(){const e=this.re,t=this.im,n=new Ze(t*t-e*e+1,-2*e*t).sqrt(),r=new Ze(n.re-t,n.im+e).log();return new Ze(Math.PI/2-r.im,r.re)},atan:function(){const e=this.re,t=this.im;if(e===0){if(t===1)return new Ze(0,1/0);if(t===-1)return new Ze(0,-1/0)}const n=e*e+(1-t)*(1-t),r=new Ze((1-t*t-e*e)/n,-2*e/n).log();return new Ze(-.5*r.im,.5*r.re)},acot:function(){const e=this.re,t=this.im;if(t===0)return new Ze(Math.atan2(1,e),0);const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).atan():new Ze(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Ze(0,1/0);const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).acos():new Ze(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Ze(Math.PI/2,1/0);const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).asin():new Ze(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new Ze(md(e)*Math.cos(t),ku(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new Ze(ku(e)*Math.cos(t),md(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,n=ku(e)+Math.cos(t);return new Ze(md(e)/n,Math.sin(t)/n)},coth:function(){const e=2*this.re,t=2*this.im,n=ku(e)-Math.cos(t);return new Ze(md(e)/n,-Math.sin(t)/n)},csch:function(){const e=this.re,t=this.im,n=Math.cos(2*t)-ku(2*e);return new Ze(-2*md(e)*Math.cos(t)/n,2*ku(e)*Math.sin(t)/n)},sech:function(){const e=this.re,t=this.im,n=Math.cos(2*t)+ku(2*e);return new Ze(2*ku(e)*Math.cos(t)/n,-2*md(e)*Math.sin(t)/n)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,n=e>1&&t===0,r=1-e,i=1+e,s=r*r+t*t,o=s!==0?new Ze((i*r-t*t)/s,(t*r+i*t)/s):new Ze(e!==-1?e/0:0,t!==0?t/0:0),a=o.re;return o.re=MH(o.re,o.im)/2,o.im=Math.atan2(o.im,a)/2,n&&(o.im=-o.im),o},acoth:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Ze(0,Math.PI/2);const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).atanh():new Ze(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(t===0)return new Ze(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).asinh():new Ze(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return Ze.INFINITY;const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).acosh():new Ze(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return Ze.INFINITY;if(this.isInfinite())return Ze.ZERO;const e=this.re,t=this.im,n=e*e+t*t;return new Ze(e/n,-t/n)},conjugate:function(){return new Ze(this.re,-this.im)},neg:function(){return new Ze(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new Ze(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new Ze(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new Ze(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const n=Vx(e,t);return Math.abs(n.re-this.re)<=Ze.EPSILON&&Math.abs(n.im-this.im)<=Ze.EPSILON},clone:function(){return new Ze(this.re,this.im)},toString:function(){let e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<Ze.EPSILON&&(e=0),Math.abs(t)<Ze.EPSILON&&(t=0),t===0?n+e:(e!==0?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),t!==1&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};Ze.ZERO=new Ze(0,0);Ze.ONE=new Ze(1,0);Ze.I=new Ze(0,1);Ze.PI=new Ze(Math.PI,0);Ze.E=new Ze(Math.E,0);Ze.INFINITY=new Ze(1/0,1/0);Ze.NAN=new Ze(NaN,NaN);Ze.EPSILON=1e-15;var g9t="Complex",y9t=[],v9t=ni(g9t,y9t,()=>(Object.defineProperty(Ze,"name",{value:"Complex"}),Ze.prototype.constructor=Ze,Ze.prototype.type="Complex",Ze.prototype.isComplex=!0,Ze.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ze.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ze.prototype.format=function(e){var t="",n=this.im,r=this.re,i=OK(this.re,e),s=OK(this.im,e),o=bs(e)?e:e?e.precision:null;if(o!==null){var a=Math.pow(10,-o);Math.abs(r/n)<a&&(r=0),Math.abs(n/r)<a&&(n=0)}return n===0?t=i:r===0?n===1?t="i":n===-1?t="-i":t=s+"i":n<0?n===-1?t=i+" - i":t=i+" - "+s.substring(1)+"i":n===1?t=i+" + i":t=i+" + "+s+"i",t},Ze.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return Ze(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(bs(n)){if(T8e(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),bs(r))return new Ze({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ze.prototype.valueOf=Ze.prototype.toString,Ze.fromJSON=function(e){return new Ze(e)},Ze.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Ze),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const hn=BigInt(0),ar=BigInt(1),u3=BigInt(2),UK=BigInt(5),mc=BigInt(10),b9t=2e3,$t={s:ar,n:hn,d:ar};function W0(e,t){try{e=BigInt(e)}catch{throw h1()}return e*t}function xh(e){return typeof e=="bigint"?e:Math.floor(e)}function Ns(e,t){if(t===hn)throw mie();const n=Object.create(xd.prototype);n.s=e<hn?-ar:ar,e=e<hn?-e:e;const r=Qx(e,t);return n.n=e/r,n.d=t/r,n}function i2(e){const t={};let n=e,r=u3,i=UK-ar;for(;i<=n;){for(;n%r===hn;)n/=r,t[r]=(t[r]||hn)+ar;i+=ar+u3*r++}return n!==e?n>1&&(t[n]=(t[n]||hn)+ar):t[e]=(t[e]||hn)+ar,t}const _a=function(e,t){let n=hn,r=ar,i=ar;if(e!=null)if(t!==void 0){if(typeof e=="bigint")n=e;else{if(isNaN(e))throw h1();if(e%1!==0)throw ybe();n=BigInt(e)}if(typeof t=="bigint")r=t;else{if(isNaN(t))throw h1();if(t%1!==0)throw ybe();r=BigInt(t)}i=n*r}else if(typeof e=="object"){if("d"in e&&"n"in e)n=BigInt(e.n),r=BigInt(e.d),"s"in e&&(n*=BigInt(e.s));else if(0 in e)n=BigInt(e[0]),1 in e&&(r=BigInt(e[1]));else if(typeof e=="bigint")n=e;else throw h1();i=n*r}else if(typeof e=="number"){if(isNaN(e))throw h1();if(e<0&&(i=-ar,e=-e),e%1===0)n=BigInt(e);else if(e>0){let s=1,o=0,a=1,u=1,l=1,c=1e7;for(e>=1&&(s=10**Math.floor(1+Math.log10(e)),e/=s);a<=c&&l<=c;){let f=(o+u)/(a+l);if(e===f){a+l<=c?(n=o+u,r=a+l):l>a?(n=u,r=l):(n=o,r=a);break}else e>f?(o+=u,a+=l):(u+=o,l+=a),a>c?(n=u,r=l):(n=o,r=a)}n=BigInt(n)*BigInt(s),r=BigInt(r)}}else if(typeof e=="string"){let s=0,o=hn,a=hn,u=hn,l=ar,c=ar,f=e.replace(/_/g,"").match(/\d+|./g);if(f===null)throw h1();if(f[s]==="-"?(i=-ar,s++):f[s]==="+"&&s++,f.length===s+1?a=W0(f[s++],i):f[s+1]==="."||f[s]==="."?(f[s]!=="."&&(o=W0(f[s++],i)),s++,(s+1===f.length||f[s+1]==="("&&f[s+3]===")"||f[s+1]==="'"&&f[s+3]==="'")&&(a=W0(f[s],i),l=mc**BigInt(f[s].length),s++),(f[s]==="("&&f[s+2]===")"||f[s]==="'"&&f[s+2]==="'")&&(u=W0(f[s+1],i),c=mc**BigInt(f[s+1].length)-ar,s+=3)):f[s+1]==="/"||f[s+1]===":"?(a=W0(f[s],i),l=W0(f[s+2],ar),s+=3):f[s+3]==="/"&&f[s+1]===" "&&(o=W0(f[s],i),a=W0(f[s+2],i),l=W0(f[s+4],ar),s+=5),f.length<=s)r=l*c,i=n=u+r*o+c*a;else throw h1()}else if(typeof e=="bigint")n=e,i=e,r=ar;else throw h1();if(r===hn)throw mie();$t.s=i<hn?-ar:ar,$t.n=n<hn?-n:n,$t.d=r<hn?-r:r};function x9t(e,t,n){let r=ar;for(;t>hn;e=e*e%n,t>>=ar)t&ar&&(r=r*e%n);return r}function w9t(e,t){for(;t%u3===hn;t/=u3);for(;t%UK===hn;t/=UK);if(t===ar)return hn;let n=mc%t,r=1;for(;n!==ar;r++)if(n=n*mc%t,r>b9t)return hn;return BigInt(r)}function _9t(e,t,n){let r=ar,i=x9t(mc,n,t);for(let s=0;s<300;s++){if(r===i)return BigInt(s);r=r*mc%t,i=i*mc%t}return 0}function Qx(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function xd(e,t){if(_a(e,t),this instanceof xd)e=Qx($t.d,$t.n),this.s=$t.s,this.n=$t.n/e,this.d=$t.d/e;else return Ns($t.s*$t.n,$t.d)}var mie=function(){return new Error("Division by Zero")},h1=function(){return new Error("Invalid argument")},ybe=function(){return new Error("Parameters must be integer")};xd.prototype={s:ar,n:hn,d:ar,abs:function(){return Ns(this.n,this.d)},neg:function(){return Ns(-this.s*this.n,this.d)},add:function(e,t){return _a(e,t),Ns(this.s*this.n*$t.d+$t.s*this.d*$t.n,this.d*$t.d)},sub:function(e,t){return _a(e,t),Ns(this.s*this.n*$t.d-$t.s*this.d*$t.n,this.d*$t.d)},mul:function(e,t){return _a(e,t),Ns(this.s*$t.s*this.n*$t.n,this.d*$t.d)},div:function(e,t){return _a(e,t),Ns(this.s*$t.s*this.n*$t.d,this.d*$t.n)},clone:function(){return Ns(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return Ns(this.s*this.n%this.d,ar);if(_a(e,t),hn===$t.n*this.d)throw mie();return Ns(this.s*($t.d*this.n)%($t.n*this.d),$t.d*this.d)},gcd:function(e,t){return _a(e,t),Ns(Qx($t.n,this.n)*Qx($t.d,this.d),$t.d*this.d)},lcm:function(e,t){return _a(e,t),$t.n===hn&&this.n===hn?Ns(hn,ar):Ns($t.n*this.n,Qx($t.n,this.n)*Qx($t.d,this.d))},inverse:function(){return Ns(this.s*this.d,this.n)},pow:function(e,t){if(_a(e,t),$t.d===ar)return $t.s<hn?Ns((this.s*this.d)**$t.n,this.n**$t.n):Ns((this.s*this.n)**$t.n,this.d**$t.n);if(this.s<hn)return null;let n=i2(this.n),r=i2(this.d),i=ar,s=ar;for(let o in n)if(o!=="1"){if(o==="0"){i=hn;break}if(n[o]*=$t.n,n[o]%$t.d===hn)n[o]/=$t.d;else return null;i*=BigInt(o)**n[o]}for(let o in r)if(o!=="1"){if(r[o]*=$t.n,r[o]%$t.d===hn)r[o]/=$t.d;else return null;s*=BigInt(o)**r[o]}return $t.s<hn?Ns(s,i):Ns(i,s)},log:function(e,t){if(_a(e,t),this.s<=hn||$t.s<=hn)return null;const n={},r=i2($t.n),i=i2($t.d),s=i2(this.n),o=i2(this.d);for(const l in i)r[l]=(r[l]||hn)-i[l];for(const l in o)s[l]=(s[l]||hn)-o[l];for(const l in r)l!=="1"&&(n[l]=!0);for(const l in s)l!=="1"&&(n[l]=!0);let a=null,u=null;for(const l in n){const c=r[l]||hn,f=s[l]||hn;if(c===hn){if(f!==hn)return null;continue}let d=f,h=c;const p=Qx(d,h);if(d/=p,h/=p,a===null&&u===null)a=d,u=h;else if(d*u!==a*h)return null}return a!==null&&u!==null?Ns(a,u):null},equals:function(e,t){return _a(e,t),this.s*this.n*$t.d===$t.s*$t.n*this.d},lt:function(e,t){return _a(e,t),this.s*this.n*$t.d<$t.s*$t.n*this.d},lte:function(e,t){return _a(e,t),this.s*this.n*$t.d<=$t.s*$t.n*this.d},gt:function(e,t){return _a(e,t),this.s*this.n*$t.d>$t.s*$t.n*this.d},gte:function(e,t){return _a(e,t),this.s*this.n*$t.d>=$t.s*$t.n*this.d},compare:function(e,t){_a(e,t);let n=this.s*this.n*$t.d-$t.s*$t.n*this.d;return(hn<n)-(n<hn)},ceil:function(e){return e=mc**BigInt(e||0),Ns(xh(this.s*e*this.n/this.d)+(e*this.n%this.d>hn&&this.s>=hn?ar:hn),e)},floor:function(e){return e=mc**BigInt(e||0),Ns(xh(this.s*e*this.n/this.d)-(e*this.n%this.d>hn&&this.s<hn?ar:hn),e)},round:function(e){return e=mc**BigInt(e||0),Ns(xh(this.s*e*this.n/this.d)+this.s*((this.s>=hn?ar:hn)+u3*(e*this.n%this.d)>this.d?ar:hn),e)},roundTo:function(e,t){_a(e,t);const n=this.n*$t.d,r=this.d*$t.n,i=n%r;let s=xh(n/r);return i+i>=r&&s++,Ns(this.s*s*$t.n,$t.d)},divisible:function(e,t){return _a(e,t),!(!($t.n*this.d)||this.n*$t.d%($t.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,n=this.d;e=e||15;let r=w9t(t,n),i=_9t(t,n,r),s=this.s<hn?"-":"";if(s+=xh(t/n),t%=n,t*=mc,t&&(s+="."),r){for(let o=i;o--;)s+=xh(t/n),t%=n,t*=mc;s+="(";for(let o=r;o--;)s+=xh(t/n),t%=n,t*=mc;s+=")"}else for(let o=e;t&&o--;)s+=xh(t/n),t%=n,t*=mc;return s},toFraction:function(e){let t=this.n,n=this.d,r=this.s<hn?"-":"";if(n===ar)r+=t;else{let i=xh(t/n);e&&i>hn&&(r+=i,r+=" ",t%=n),r+=t,r+="/",r+=n}return r},toLatex:function(e){let t=this.n,n=this.d,r=this.s<hn?"-":"";if(n===ar)r+=t;else{let i=xh(t/n);e&&i>hn&&(r+=i,t%=n),r+="\\frac{",r+=t,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let e=this.n,t=this.d,n=[];do{n.push(xh(e/t));let r=e%t;e=t,t=r}while(e!==ar);return n},simplify:function(e){const t=BigInt(1/(e||.001)|0),n=this.abs(),r=n.toContinued();for(let i=1;i<r.length;i++){let s=Ns(r[i-1],ar);for(let a=i-2;a>=0;a--)s=s.inverse().add(r[a]);let o=s.sub(n);if(o.n*t<o.d)return s.mul(this.s)}return this}};var E9t="Fraction",S9t=[],C9t=ni(E9t,S9t,()=>(Object.defineProperty(xd,"name",{value:"Fraction"}),xd.prototype.constructor=xd,xd.prototype.type="Fraction",xd.prototype.isFraction=!0,xd.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},xd.fromJSON=function(e){return new xd(e)},xd),{isClass:!0}),T9t="Matrix",A9t=[],D9t=ni(T9t,A9t,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,n){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,n,r){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,n){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,n){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,n){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function $H(e,t,n){var r=e.constructor,i=new r(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Gs(n))throw new Error("size must be an integer");if(e.greaterThan(i.pow(n-1).sub(1))||e.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(n))),s="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(s);case 8:return"".concat(e.toOctal()).concat(s);case 16:return"".concat(e.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(t," not supported "))}}function I9t(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=D8e(t);switch(n){case"fixed":return R9t(e,r);case"exponential":return vbe(e,r);case"engineering":return k9t(e,r);case"bin":return $H(e,2,i);case"oct":return $H(e,8,i);case"hex":return $H(e,16,i);case"auto":{var s=bbe(t==null?void 0:t.lowerExp,-3),o=bbe(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var a,u=e.toSignificantDigits(r),l=u.e;return l>=s&&l<o?a=u.toFixed():a=vbe(e,r),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function k9t(e,t){var n=e.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),s=i.toPrecision(t);if(s.includes("e")){var o=e.constructor;s=new o(s).toFixed()}return s+"e"+(n>=0?"+":"")+r.toString()}function vbe(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function R9t(e,t){return e.toFixed(t)}function bbe(e,t){return bs(e)?e:Wo(e)?e.toNumber():t}function Uo(e,t){var n=N9t(e,t);return t&&typeof t=="object"&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function N9t(e,t){if(typeof e=="number")return OK(e,t);if(Wo(e))return I9t(e,t);if(P9t(e))return!t||t.fraction!=="decimal"?"".concat(e.s*e.n,"/").concat(e.d):e.toString();if(Array.isArray(e))return z8e(e,t);if(og(e))return xbe(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var n=Object.keys(e).map(r=>xbe(r)+": "+Uo(e[r],t));return"{"+n.join(", ")+"}"}return String(e)}function xbe(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);n+=i in wbe?wbe[i]:i,r++}return'"'+n+'"'}var wbe={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function z8e(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=z8e(e[i],t);return n+="]",n}else return Uo(e,t)}function P9t(e){return e&&typeof e=="object"&&typeof e.s=="bigint"&&typeof e.n=="bigint"&&typeof e.d=="bigint"||!1}function js(e,t,n){if(!(this instanceof js))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}js.prototype=new RangeError;js.prototype.constructor=RangeError;js.prototype.name="DimensionError";js.prototype.isDimensionError=!0;function lA(e,t,n){if(!(this instanceof lA))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}lA.prototype=new RangeError;lA.prototype.constructor=RangeError;lA.prototype.name="IndexError";lA.prototype.isIndexError=!0;function Fl(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function V8e(e,t,n){var r,i=e.length;if(i!==t[n])throw new js(i,t[n]);if(n<t.length-1){var s=n+1;for(r=0;r<i;r++){var o=e[r];if(!Array.isArray(o))throw new js(t.length-1,t.length,"<");V8e(e[r],t,s)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new js(t.length+1,t.length,">")}function _be(e,t){var n=t.length===0;if(n){if(Array.isArray(e))throw new js(e.length,0)}else V8e(e,t,0)}function no(e,t){if(e!==void 0){if(!bs(e)||!Gs(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new lA(e,t)}}function zK(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!bs(i)||!Gs(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Uo(t)+")")}),(bs(e)||Wo(e))&&(e=[e]);var r=n!==void 0?n:0;return VK(e,t,0,r),e}function VK(e,t,n,r){var i,s,o=e.length,a=t[n],u=Math.min(o,a);if(e.length=a,n<t.length-1){var l=n+1;for(i=0;i<u;i++)s=e[i],Array.isArray(s)||(s=[s],e[i]=s),VK(s,t,l,r);for(i=u;i<a;i++)s=[],e[i]=s,VK(s,t,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=u;i<a;i++)e[i]=r}}function H8e(e,t){var n=F9t(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new js(0,r,"!=");t=gie(t,r);var i=q8e(t);if(r!==i)throw new js(i,r,"!=");try{return O9t(n,t)}catch(s){throw s instanceof js?new js(i,r,"!="):s}}function gie(e,t){var n=q8e(e),r=e.slice(),i=-1,s=e.indexOf(i),o=e.indexOf(i,s+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var a=s>=0,u=t%n===0;if(a)if(u)r[s]=-t/n;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);return r}function q8e(e){return e.reduce((t,n)=>t*n,1)}function O9t(e,t){for(var n=e,r,i=t.length-1;i>0;i--){var s=t[i];r=[];for(var o=n.length/s,a=0;a<o;a++)r.push(n.slice(a*s,(a+1)*s));n=r}return n}function W8e(e,t,n,r){var i=r||Fl(e);if(n)for(var s=0;s<n;s++)e=[e],i.unshift(1);for(e=G8e(e,t,0);i.length<t;)i.push(1);return e}function G8e(e,t,n){var r,i;if(Array.isArray(e)){var s=n+1;for(r=0,i=e.length;r<i;r++)e[r]=G8e(e[r],t,s)}else for(var o=n;o<t;o++)e=[e];return e}function F9t(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function n(r){Array.isArray(r)?r.forEach(n):t.push(r)}),t}function yie(e,t){for(var n,r=0,i=0;i<e.length;i++){var s=e[i],o=Array.isArray(s);if(i===0&&o&&(r=s.length),o&&s.length!==r)return;var a=o?yie(s,t):t(s);if(n===void 0)n=a;else if(n!==a)return"mixed"}return n}function Y8e(e,t,n,r){if(r<n){if(e.length!==t.length)throw new js(e.length,t.length);for(var i=[],s=0;s<e.length;s++)i[s]=Y8e(e[s],t[s],n,r+1);return i}else return e.concat(t)}function M9t(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(n,r){return Y8e(n,r,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function $9t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.map(d=>d.length),i=Math.max(...r),s=new Array(i).fill(null),o=0;o<t.length;o++)for(var a=t[o],u=r[o],l=0;l<u;l++){var c=i-u+l;a[l]>s[c]&&(s[c]=a[l])}for(var f=0;f<t.length;f++)K8e(t[f],s);return s}function K8e(e,t){for(var n=t.length,r=e.length,i=0;i<r;i++){var s=n-r+i;if(e[i]<t[s]&&e[i]>1||e[i]>t[s])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(r," with size ").concat(e[i]," to size ").concat(t[s]))}}function Ebe(e,t){var n=Fl(e);if(LC(n,t))return e;K8e(n,t);var r=$9t(n,t),i=r.length,s=[...Array(i-n.length).fill(1),...n],o=B9t(e);n.length<i&&(o=H8e(o,s),n=Fl(o));for(var a=0;a<i;a++)n[a]<r[a]&&(o=L9t(o,r[a],a),n=Fl(o));return o}function L9t(e,t,n){return M9t(...Array(t).fill(e),n)}function X8e(e,t){if(!Array.isArray(e))throw new Error("Array expected");var n=Fl(e);if(t.length!==n.length)throw new js(t.length,n.length);for(var r=0;r<t.length;r++)no(t[r],n[r]);return t.reduce((i,s)=>i[s],e)}function B9t(e){return uC([],e)}function N5(e,t,n){if(A5.isTypedFunction(e)){var r=(t.isMatrix?t.size():Fl(t)).map(()=>0),i=t.isMatrix?t.get(r):X8e(t,r),s=Object.keys(e.signatures).length===1,o=j9t(e,i,r,t),a=s?Object.values(e.signatures)[0]:e;return o>=1&&o<=3?function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return Sbe(a,l.slice(0,o),n,e.name)}:function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return Sbe(a,l,n,e.name)}}return e}function j9t(e,t,n,r){for(var i=[t,n,r],s=3;s>0;s--){var o=i.slice(0,s);if(A5.resolve(e,o)!==null)return s}}function Sbe(e,t,n,r){try{return e(...t)}catch(i){U9t(i,t,n,r)}}function U9t(e,t,n,r){var i;if(e instanceof TypeError&&((i=e.data)===null||i===void 0?void 0:i.category)==="wrongType"){var s=[];throw s.push("value: ".concat(mv(t[0]))),t.length>=2&&s.push("index: ".concat(mv(t[1]))),t.length>=3&&s.push("array: ".concat(mv(t[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(t[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(e.message))}var z9t="DenseMatrix",V9t=["Matrix"],H9t=ni(z9t,V9t,e=>{var{Matrix:t}=e;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!og(f))throw new Error("Invalid datatype: "+f);if(aa(c))c.type==="DenseMatrix"?(this._data=Eo(c._data),this._size=Eo(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&jo(c.data)&&jo(c.size))this._data=c.data,this._size=c.size,_be(this._data,this._size),this._datatype=f||c.datatype;else if(jo(c))this._data=l(c),this._size=Fl(this._data),_be(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+mv(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new t,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return yie(this._data,mv)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){return X8e(this._data,c)},n.prototype.set=function(c,f,d){if(!jo(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new js(c.length,this._size.length,"<");var h,p,m,g=c.map(function(v){return v+1});u(this,g,d);var y=this._data;for(h=0,p=c.length-1;h<p;h++)m=c[h],no(m,y.length),y=y[m];return m=c[c.length-1],no(m,y.length),y[m]=f,this};function r(c,f){if(!die(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new js(h.length,c._size.length);for(var p=f.min(),m=f.max(),g=0,y=c._size.length;g<y;g++)no(p[g],c._size[g]),no(m[g],c._size[g]);return new n(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var p=h===d-1,m=f.dimension(h);return p?m.map(function(g){return no(g,c.length),c[g]}).valueOf():m.map(function(g){no(g,c.length);var y=c[g];return i(y,f,d,h+1)}).valueOf()}function s(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),m=f.isScalar(),g;if(aa(d)?(g=d.size(),d=d.valueOf()):g=Fl(d),m){if(g.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!LC(g,p))try{g.length===0?d=Ebe([d],p):d=Ebe(d,p),g=Fl(d)}catch{}if(p.length<c._size.length)throw new js(p.length,c._size.length,"<");if(g.length<p.length){for(var y=0,v=0;p[y]===1&&g[y]===1;)y++;for(;p[y]===1;)v++,y++;d=W8e(d,p.length,v,g)}if(!LC(p,g))throw new js(p,g,">");var b=f.max().map(function(S){return S+1});u(c,b,h);var _=p.length,w=0;o(c._data,f,d,_,w)}return c}function o(c,f,d,h,p){var m=p===h-1,g=f.dimension(p);m?g.forEach(function(y,v){no(y),c[y]=d[v[0]]}):g.forEach(function(y,v){no(y),o(c[y],f,d[v[0]],h,p+1)})}n.prototype.resize=function(c,f,d){if(!C5(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),p=d?this.clone():this;return a(p,h,f)};function a(c,f,d){if(f.length===0){for(var h=c._data;jo(h);)h=h[0];return h}return c._size=f.slice(0),c._data=zK(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=H8e(d._data,c);var h=d._size.reduce((p,m)=>p*m);return d._size=gie(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),p=!1;h.length<f.length;)h.push(0),p=!0;for(var m=0,g=f.length;m<g;m++)f[m]>h[m]&&(h[m]=f[m],p=!0);p&&a(c,h,d)}n.prototype.clone=function(){var c=new n({data:Eo(this._data),size:Eo(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(c){var f=this,d=f.size();if(d.length===1){for(var h=0;h<d[0];h++)c(f._data,h,[h]);return}var p=Array(d.length).fill(0),m=Array(d.length-1),g=m.length-1;m[0]=f._data[0];for(var y=0;y<g;y++)m[y+1]=m[y][0];for(p[g]=-1;;){var v=void 0;for(v=g;v>=0;v--){if(p[v]++,p[v]===d[v]){p[v]=0;continue}m[v]=v===0?f._data[p[v]]:m[v-1][p[v]];for(var b=v;b<g;b++)m[b+1]=m[b][0];for(var _=0;_<d[m.length];_++)p[m.length]=_,c(m[g],_,p.slice(0));break}if(v===-1)break}},n.prototype.map=function(c){var f=this,d=new n(f),h=N5(c,f._data,"map");return d._forEach(function(p,m,g){p[m]=h(p[m],g,f)}),d},n.prototype.forEach=function(c){var f=this,d=N5(c,f._data,"map");f._forEach(function(h,p,m){d(h[p],m,f)})},n.prototype[Symbol.iterator]=function*(){var c=function*(d,h){if(jo(d))for(var p=0;p<d.length;p++)yield*c(d[p],h.concat(p));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,p=function(y){var v=h.map(b=>[b[y]]);f.push(new n(v,c._datatype))},m=0;m<d[1];m++)p(m);return f},n.prototype.toArray=function(){return Eo(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return Uo(this._data,c)},n.prototype.toString=function(){return Uo(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Wo(c)&&(c=c.toNumber()),!bs(c)||!Gs(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],p=this._size[1],m=Math.min(h-d,p-f),g=[],y=0;y<m;y++)g[y]=this._data[y+d][y+f];return new n({data:g,size:[m],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!jo(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(T){if(Wo(T)&&(T=T.toNumber()),!bs(T)||!Gs(T)||T<1)throw new Error("Size values must be positive integers");return T}),d){if(Wo(d)&&(d=d.toNumber()),!bs(d)||!Gs(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,m=d<0?-d:0,g=c[0],y=c[1],v=Math.min(g-m,y-p),b;if(jo(f)){if(f.length!==v)throw new Error("Invalid value array length");b=function(A){return f[A]}}else if(aa(f)){var _=f.size();if(_.length!==1||_[0]!==v)throw new Error("Invalid matrix length");b=function(A){return f.get([A])}}else b=function(){return f};h||(h=Wo(b(0))?b(0).mul(0):0);var w=[];if(c.length>0){w=zK(w,c,h);for(var S=0;S<v;S++)w[S+m][S+p]=b(S)}return new n({data:w,size:[g,y]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!bs(c)||!Gs(c)||!bs(f)||!Gs(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return no(c,this._size[0]),no(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return aa(c)?l(c.valueOf()):jo(c)?c.map(l):c}return n},{isClass:!0});function Ub(e,t,n){return e&&typeof e.map=="function"?e.map(function(r){return Ub(r,t)}):t(e)}var Q8e="number",m9="number, number";function J8e(e){return Math.abs(e)}J8e.signature=Q8e;function Z8e(e,t){return e+t}Z8e.signature=m9;function e5e(e,t){return e-t}e5e.signature=m9;function t5e(e,t){return e*t}t5e.signature=m9;function n5e(e){return-e}n5e.signature=Q8e;function r5e(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}r5e.signature=m9;function HK(e,t){if(t<e)return 1;if(t===e)return t;var n=t+e>>1;return HK(e,n)*HK(n+1,t)}function P5(e){var t;if(Gs(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:HK(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*P5(1-e));if(e>=171.35)return 1/0;if(e>85){var n=e*e,r=n*e,i=r*e,s=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*s)+5246819/(75246796800*s*e))}--e,t=OS[0];for(var o=1;o<OS.length;++o)t+=OS[o]/(e+o);var a=e+i5e+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*t}P5.signature="number";var i5e=4.7421875,OS=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],s5e=.9189385332046728,q9t=5,W9t=7,Cbe=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function O5(e){if(e<0)return NaN;if(e===0)return 1/0;if(!isFinite(e))return e;if(e<.5)return Math.log(Math.PI/Math.sin(Math.PI*e))-O5(1-e);e=e-1;for(var t=e+q9t+.5,n=Cbe[0],r=W9t-1;r>=1;r--)n+=Cbe[r]/(e+r);return s5e+(e+.5)*Math.log(t)-t+Math.log(n)}O5.signature="number";function G9t(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),r))}var Tbe="isZero",Y9t=["typed","equalScalar"],K9t=ni(Tbe,Y9t,e=>{var{typed:t,equalScalar:n}=e;return t(Tbe,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:t.referToSelf(r=>i=>t.find(r,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(r=>i=>Ub(i,r))})});function X9t(e,t,n,r){return D5(e.re,t.re,n,r)&&D5(e.im,t.im,n,r)}var Q9t=ni("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),F5="equalScalar",J9t=["typed","config"],Z9t=ni(F5,J9t,e=>{var{typed:t,config:n}=e,r=Q9t({typed:t});return t(F5,{"boolean, boolean":function(s,o){return s===o},"number, number":function(s,o){return D5(s,o,n.relTol,n.absTol)},"BigNumber, BigNumber":function(s,o){return s.eq(o)||G9t(s,o,n.relTol,n.absTol)},"bigint, bigint":function(s,o){return s===o},"Fraction, Fraction":function(s,o){return s.equals(o)},"Complex, Complex":function(s,o){return X9t(s,o,n.relTol,n.absTol)}},r)});ni(F5,["typed","config"],e=>{var{typed:t,config:n}=e;return t(F5,{"number, number":function(i,s){return D5(i,s,n.relTol,n.absTol)}})});var e7t="SparseMatrix",t7t=["typed","equalScalar","Matrix"],n7t=ni(e7t,t7t,e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(m,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!og(g))throw new Error("Invalid datatype: "+g);if(aa(m))s(this,m,g);else if(m&&jo(m.index)&&jo(m.ptr)&&jo(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=g||m.datatype;else if(jo(m))o(this,m,g);else{if(m)throw new TypeError("Unsupported type of data ("+mv(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function s(m,g,y){g.type==="SparseMatrix"?(m._values=g._values?Eo(g._values):void 0,m._index=Eo(g._index),m._ptr=Eo(g._ptr),m._size=Eo(g._size),m._datatype=y||g._datatype):o(m,g.valueOf(),y||g._datatype)}function o(m,g,y){m._values=[],m._index=[],m._ptr=[],m._datatype=y;var v=g.length,b=0,_=n,w=0;if(og(y)&&(_=t.find(n,[y,y])||n,w=t.convert(0,y)),v>0){var S=0;do{m._ptr.push(m._index.length);for(var T=0;T<v;T++){var A=g[T];if(jo(A)){if(S===0&&b<A.length&&(b=A.length),S<A.length){var k=A[S];_(k,w)||(m._values.push(k),m._index.push(T))}}else S===0&&b<1&&(b=1),_(A,w)||(m._values.push(A),m._index.push(T))}S++}while(S<b)}m._ptr.push(m._index.length),m._size=[v,b]}i.prototype=new r,i.prototype.createSparseMatrix=function(m,g){return new i(m,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return yie(this._values,mv)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,g){return new i(m,g)},i.prototype.density=function(){var m=this._size[0],g=this._size[1];return m!==0&&g!==0?this._index.length/(m*g):0},i.prototype.subset=function(m,g,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,m);case 2:case 3:return u(this,m,g,y);default:throw new SyntaxError("Wrong number of arguments")}};function a(m,g){if(!die(g))throw new TypeError("Invalid index");var y=g.isScalar();if(y)return m.get(g.min());var v=g.size();if(v.length!==m._size.length)throw new js(v.length,m._size.length);var b,_,w,S,T=g.min(),A=g.max();for(b=0,_=m._size.length;b<_;b++)no(T[b],m._size[b]),no(A[b],m._size[b]);var k=m._values,I=m._index,R=m._ptr,F=g.dimension(0),O=g.dimension(1),$=[],V=[];F.forEach(function(J,L){V[J]=L[0],$[J]=!0});var j=k?[]:void 0,G=[],Y=[];return O.forEach(function(J){for(Y.push(G.length),w=R[J],S=R[J+1];w<S;w++)b=I[w],$[b]===!0&&(G.push(V[b]),j&&j.push(k[w]))}),Y.push(G.length),new i({values:j,index:G,ptr:Y,size:v,datatype:m._datatype})}function u(m,g,y,v){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var b=g.size(),_=g.isScalar(),w;if(aa(y)?(w=y.size(),y=y.toArray()):w=Fl(y),_){if(w.length!==0)throw new TypeError("Scalar expected");m.set(g.min(),y,v)}else{if(b.length!==1&&b.length!==2)throw new js(b.length,m._size.length,"<");if(w.length<b.length){for(var S=0,T=0;b[S]===1&&w[S]===1;)S++;for(;b[S]===1;)T++,S++;y=W8e(y,b.length,T,w)}if(!LC(b,w))throw new js(b,w,">");if(b.length===1){var A=g.dimension(0);A.forEach(function(R,F){no(R),m.set([R,0],y[F[0]],v)})}else{var k=g.dimension(0),I=g.dimension(1);k.forEach(function(R,F){no(R),I.forEach(function(O,$){no(O),m.set([R,O],y[F[0]][$[0]],v)})})}}return m}i.prototype.get=function(m){if(!jo(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new js(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=m[0],y=m[1];no(g,this._size[0]),no(y,this._size[1]);var v=l(g,this._ptr[y],this._ptr[y+1],this._index);return v<this._ptr[y+1]&&this._index[v]===g?this._values[v]:0},i.prototype.set=function(m,g,y){if(!jo(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new js(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var v=m[0],b=m[1],_=this._size[0],w=this._size[1],S=n,T=0;og(this._datatype)&&(S=t.find(n,[this._datatype,this._datatype])||n,T=t.convert(0,this._datatype)),(v>_-1||b>w-1)&&(d(this,Math.max(v+1,_),Math.max(b+1,w),y),_=this._size[0],w=this._size[1]),no(v,_),no(b,w);var A=l(v,this._ptr[b],this._ptr[b+1],this._index);return A<this._ptr[b+1]&&this._index[A]===v?S(g,T)?c(A,b,this._values,this._index,this._ptr):this._values[A]=g:S(g,T)||f(A,v,b,g,this._values,this._index,this._ptr),this};function l(m,g,y,v){if(y-g===0)return y;for(var b=g;b<y;b++)if(v[b]===m)return b;return g}function c(m,g,y,v,b){y.splice(m,1),v.splice(m,1);for(var _=g+1;_<b.length;_++)b[_]--}function f(m,g,y,v,b,_,w){b.splice(m,0,v),_.splice(m,0,g);for(var S=y+1;S<w.length;S++)w[S]++}i.prototype.resize=function(m,g,y){if(!C5(m))throw new TypeError("Array or Matrix expected");var v=m.valueOf().map(_=>Array.isArray(_)&&_.length===1?_[0]:_);if(v.length!==2)throw new Error("Only two dimensions matrix are supported");v.forEach(function(_){if(!bs(_)||!Gs(_)||_<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Uo(v)+")")});var b=y?this.clone():this;return d(b,v[0],v[1],g)};function d(m,g,y,v){var b=v||0,_=n,w=0;og(m._datatype)&&(_=t.find(n,[m._datatype,m._datatype])||n,w=t.convert(0,m._datatype),b=t.convert(b,m._datatype));var S=!_(b,w),T=m._size[0],A=m._size[1],k,I,R;if(y>A){for(I=A;I<y;I++)if(m._ptr[I]=m._values.length,S)for(k=0;k<T;k++)m._values.push(b),m._index.push(k);m._ptr[y]=m._values.length}else y<A&&(m._ptr.splice(y+1,A-y),m._values.splice(m._ptr[y],m._values.length),m._index.splice(m._ptr[y],m._index.length));if(A=y,g>T){if(S){var F=0;for(I=0;I<A;I++){m._ptr[I]=m._ptr[I]+F,R=m._ptr[I+1]+F;var O=0;for(k=T;k<g;k++,O++)m._values.splice(R+O,0,b),m._index.splice(R+O,0,k),F++}m._ptr[A]=m._values.length}}else if(g<T){var $=0;for(I=0;I<A;I++){m._ptr[I]=m._ptr[I]-$;var V=m._ptr[I],j=m._ptr[I+1]-$;for(R=V;R<j;R++)k=m._index[R],k>g-1&&(m._values.splice(R,1),m._index.splice(R,1),$++)}m._ptr[I]=m._values.length}return m._size[0]=g,m._size[1]=y,m}i.prototype.reshape=function(m,g){if(!jo(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(J){if(!bs(J)||!Gs(J)||J<=-2||J===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Uo(m)+")")});var y=this._size[0]*this._size[1];m=gie(m,y);var v=m[0]*m[1];if(y!==v)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=g?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return b;for(var _=[],w=0;w<b._ptr.length;w++)for(var S=0;S<b._ptr[w+1]-b._ptr[w];S++)_.push(w);for(var T=b._values.slice(),A=b._index.slice(),k=0;k<b._index.length;k++){var I=A[k],R=_[k],F=I*b._size[1]+R;_[k]=F%m[1],A[k]=Math.floor(F/m[1])}b._values.length=0,b._index.length=0,b._ptr.length=m[1]+1,b._size=m.slice();for(var O=0;O<b._ptr.length;O++)b._ptr[O]=0;for(var $=0;$<T.length;$++){var V=A[$],j=_[$],G=T[$],Y=l(V,b._ptr[j],b._ptr[j+1],b._index);f(Y,V,j,G,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var m=new i({values:this._values?Eo(this._values):void 0,index:Eo(this._index),ptr:Eo(this._ptr),size:Eo(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,v=this._size[0],b=this._size[1],_=N5(m,y,"map"),w=function(T,A,k){return _(T,[A,k],y)};return h(this,0,v-1,0,b-1,w,g)};function h(m,g,y,v,b,_,w){var S=[],T=[],A=[],k=n,I=0;og(m._datatype)&&(k=t.find(n,[m._datatype,m._datatype])||n,I=t.convert(0,m._datatype));for(var R=function(B,q,Z){var re=_(B,q,Z);k(re,I)||(S.push(re),T.push(q))},F=v;F<=b;F++){A.push(S.length);var O=m._ptr[F],$=m._ptr[F+1];if(w)for(var V=O;V<$;V++){var j=m._index[V];j>=g&&j<=y&&R(m._values[V],j-g,F-v)}else{for(var G={},Y=O;Y<$;Y++){var J=m._index[Y];G[J]=m._values[Y]}for(var L=g;L<=y;L++){var U=L in G?G[L]:0;R(U,L-g,F-v)}}}return A.push(S.length),new i({values:S,index:T,ptr:A,size:[y-g+1,b-v+1]})}i.prototype.forEach=function(m,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,v=this._size[0],b=this._size[1],_=N5(m,y,"forEach"),w=0;w<b;w++){var S=this._ptr[w],T=this._ptr[w+1];if(g)for(var A=S;A<T;A++){var k=this._index[A];_(this._values[A],[k,w],y)}else{for(var I={},R=S;R<T;R++){var F=this._index[R];I[F]=this._values[R]}for(var O=0;O<v;O++){var $=O in I?I[O]:0;_($,[O,w],y)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],g=0;g<m;g++)for(var y=this._ptr[g],v=this._ptr[g+1],b=y;b<v;b++){var _=this._index[b];yield{value:this._values[b],index:[_,g]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(m,g,y,v,b){var _=v[0],w=v[1],S=[],T,A;for(T=0;T<_;T++)for(S[T]=[],A=0;A<w;A++)S[T][A]=0;for(A=0;A<w;A++)for(var k=y[A],I=y[A+1],R=k;R<I;R++)T=g[R],S[T][A]=m?b?Eo(m[R]):m[R]:1;return S}return i.prototype.format=function(m){for(var g=this._size[0],y=this._size[1],v=this.density(),b="Sparse Matrix ["+Uo(g,m)+" x "+Uo(y,m)+"] density: "+Uo(v,m)+`
`,_=0;_<y;_++)for(var w=this._ptr[_],S=this._ptr[_+1],T=w;T<S;T++){var A=this._index[T];b+=`
    (`+Uo(A,m)+", "+Uo(_,m)+") ==> "+(this._values?Uo(this._values[T],m):"X")}return b},i.prototype.toString=function(){return Uo(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(Wo(m)&&(m=m.toNumber()),!bs(m)||!Gs(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var g=m>0?m:0,y=m<0?-m:0,v=this._size[0],b=this._size[1],_=Math.min(v-y,b-g),w=[],S=[],T=[];T[0]=0;for(var A=g;A<b&&w.length<_;A++)for(var k=this._ptr[A],I=this._ptr[A+1],R=k;R<I;R++){var F=this._index[R];if(F===A-g+y){w.push(this._values[R]),S[w.length-1]=F-y;break}}return T.push(w.length),new i({values:w,index:S,ptr:T,size:[_,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,g,y,v,b){if(!jo(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(J){if(Wo(J)&&(J=J.toNumber()),!bs(J)||!Gs(J)||J<1)throw new Error("Size values must be positive integers");return J}),y){if(Wo(y)&&(y=y.toNumber()),!bs(y)||!Gs(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var _=n,w=0;og(b)&&(_=t.find(n,[b,b])||n,w=t.convert(0,b));var S=y>0?y:0,T=y<0?-y:0,A=m[0],k=m[1],I=Math.min(A-T,k-S),R;if(jo(g)){if(g.length!==I)throw new Error("Invalid value array length");R=function(L){return g[L]}}else if(aa(g)){var F=g.size();if(F.length!==1||F[0]!==I)throw new Error("Invalid matrix length");R=function(L){return g.get([L])}}else R=function(){return g};for(var O=[],$=[],V=[],j=0;j<k;j++){V.push(O.length);var G=j-S;if(G>=0&&G<I){var Y=R(G);_(Y,w)||($.push(G+T),O.push(Y))}}return V.push(O.length),new i({values:O,index:$,ptr:V,size:[A,k]})},i.prototype.swapRows=function(m,g){if(!bs(m)||!Gs(m)||!bs(g)||!Gs(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return no(m,this._size[0]),no(g,this._size[0]),i._swapRows(m,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,g,y,v,b){for(var _=v[m],w=v[m+1],S=_;S<w;S++)b(y[S],g[S])},i._swapRows=function(m,g,y,v,b,_){for(var w=0;w<y;w++){var S=_[w],T=_[w+1],A=l(m,S,T,b),k=l(g,S,T,b);if(A<T&&k<T&&b[A]===m&&b[k]===g){if(v){var I=v[A];v[A]=v[k],v[k]=I}continue}if(A<T&&b[A]===m&&(k>=T||b[k]!==g)){var R=v?v[A]:void 0;b.splice(k,0,g),v&&v.splice(k,0,R),b.splice(k<=A?A+1:A,1),v&&v.splice(k<=A?A+1:A,1);continue}if(k<T&&b[k]===g&&(A>=T||b[A]!==m)){var F=v?v[k]:void 0;b.splice(A,0,m),v&&v.splice(A,0,F),b.splice(A<=k?k+1:k,1),v&&v.splice(A<=k?k+1:k,1)}}},i},{isClass:!0}),r7t="number",i7t=["typed"];function s7t(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var n={"0b":2,"0o":8,"0x":16}[t[1]],r=t[2],i=t[3];return{input:e,radix:n,integerPart:r,fractionalPart:i}}else return null}function o7t(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++){var i=parseInt(e.fractionalPart[r],e.radix);n+=i/Math.pow(e.radix,r+1)}var s=t+n;if(isNaN(s))throw new SyntaxError('String "'+e.input+'" is not a valid number');return s}var a7t=ni(r7t,i7t,e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=s7t(i);if(s)return o7t(s);var o=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(o=Number(a[2]),i=a[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(a){if(u>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(o-1)&&(u=u-2**o)}return u},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":t.referToSelf(r=>i=>Ub(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),u7t="bignumber",l7t=["typed","BigNumber"],c7t=ni(u7t,l7t,e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var o=s[2],a=n(s[1]),u=new n(2).pow(Number(o));if(a.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(o)-1);return a.gte(l)?a.sub(u):a}return new n(i)},BigNumber:function(i){return i},bigint:function(i){return new n(i.toString())},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Fraction:function(i){return new n(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new n(0)},"Array | Matrix":t.referToSelf(r=>i=>Ub(i,r))})}),f7t="fraction",d7t=["typed","Fraction"],h7t=ni(f7t,d7t,e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,s){return new n(i,s)},"bigint, bigint":function(i,s){return new n(i,s)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},bigint:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Object:function(i){return new n(i)},"Array | Matrix":t.referToSelf(r=>i=>Ub(i,r))})}),Abe="matrix",p7t=["typed","Matrix","DenseMatrix","SparseMatrix"],m7t=ni(Abe,p7t,e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t(Abe,{"":function(){return s([])},string:function(a){return s([],a)},"string, string":function(a,u){return s([],a,u)},Array:function(a){return s(a)},Matrix:function(a){return s(a,a.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(o,a,u){if(a==="dense"||a==="default"||a===void 0)return new r(o,u);if(a==="sparse")return new i(o,u);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),Dbe="unaryMinus",g7t=["typed"],y7t=ni(Dbe,g7t,e=>{var{typed:t}=e;return t(Dbe,{number:n5e,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:t.referToSelf(n=>r=>{var i=r.clone();return i.value=t.find(n,i.valueType())(r.value),i}),"Array | Matrix":t.referToSelf(n=>r=>Ub(r,n))})}),Ibe="abs",v7t=["typed"],b7t=ni(Ibe,v7t,e=>{var{typed:t}=e;return t(Ibe,{number:J8e,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":t.referToSelf(n=>r=>Ub(r,n))})}),kbe="addScalar",x7t=["typed"],w7t=ni(kbe,x7t,e=>{var{typed:t}=e;return t(kbe,{"number, number":Z8e,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"bigint, bigint":function(r,i){return r+i},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),Rbe="subtractScalar",_7t=["typed"],E7t=ni(Rbe,_7t,e=>{var{typed:t}=e;return t(Rbe,{"number, number":e5e,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"bigint, bigint":function(r,i){return r-i},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),S7t="matAlgo11xS0s",C7t=["typed","equalScalar"],T7t=ni(S7t,C7t,e=>{var{typed:t,equalScalar:n}=e;return function(i,s,o,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=n,y=0,v=o;typeof d=="string"&&(m=d,g=t.find(n,[m,m]),y=t.convert(0,m),s=t.convert(s,m),v=t.find(o,[m,m]));for(var b=[],_=[],w=[],S=0;S<p;S++){w[S]=_.length;for(var T=c[S],A=c[S+1],k=T;k<A;k++){var I=l[k],R=a?v(s,u[k]):v(u[k],s);g(R,y)||(_.push(I),b.push(R))}}return w[p]=_.length,i.createSparseMatrix({values:b,index:_,ptr:w,size:[h,p],datatype:m})}}),A7t="matAlgo14xDs",D7t=["typed"],I7t=ni(A7t,D7t,e=>{var{typed:t}=e;return function(i,s,o,a){var u=i._data,l=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,s=t.convert(s,f),d=t.find(o,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,s,a):[];return i.createDenseMatrix({data:h,size:Eo(l),datatype:f})};function n(r,i,s,o,a,u,l){var c=[];if(i===s.length-1)for(var f=0;f<o;f++)c[f]=l?r(u,a[f]):r(a[f],u);else for(var d=0;d<o;d++)c[d]=n(r,i+1,s,s[i+1],a[d],u,l);return c}}),k7t="multiplyScalar",R7t=["typed"],N7t=ni(k7t,R7t,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":t5e,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"bigint, bigint":function(r,i){return r*i},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),Nbe="multiply",P7t=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],O7t=ni(Nbe,P7t,e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:s,dot:o}=e,a=T7t({typed:t,equalScalar:s}),u=I7t({typed:t});function l(w,S){switch(w.length){case 1:switch(S.length){case 1:if(w[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;case 2:switch(S.length){case 1:if(w[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+S[0]+")");break;case 2:if(w[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function c(w,S,T){if(T===0)throw new Error("Cannot multiply two empty vectors");return o(w,S)}function f(w,S){if(S.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(w,S)}function d(w,S){var T=w._data,A=w._size,k=w._datatype||w.getDataType(),I=S._data,R=S._size,F=S._datatype||S.getDataType(),O=A[0],$=R[1],V,j=r,G=i;k&&F&&k===F&&typeof k=="string"&&k!=="mixed"&&(V=k,j=t.find(r,[V,V]),G=t.find(i,[V,V]));for(var Y=[],J=0;J<$;J++){for(var L=G(T[0],I[0][J]),U=1;U<O;U++)L=j(L,G(T[U],I[U][J]));Y[J]=L}return w.createDenseMatrix({data:Y,size:[$],datatype:k===w._datatype&&F===S._datatype?V:void 0})}var h=t("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":v}),p=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":_});function m(w,S){var T=w._data,A=w._size,k=w._datatype||w.getDataType(),I=S._data,R=S._datatype||S.getDataType(),F=A[0],O=A[1],$,V=r,j=i;k&&R&&k===R&&typeof k=="string"&&k!=="mixed"&&($=k,V=t.find(r,[$,$]),j=t.find(i,[$,$]));for(var G=[],Y=0;Y<F;Y++){for(var J=T[Y],L=j(J[0],I[0]),U=1;U<O;U++)L=V(L,j(J[U],I[U]));G[Y]=L}return w.createDenseMatrix({data:G,size:[F],datatype:k===w._datatype&&R===S._datatype?$:void 0})}function g(w,S){var T=w._data,A=w._size,k=w._datatype||w.getDataType(),I=S._data,R=S._size,F=S._datatype||S.getDataType(),O=A[0],$=A[1],V=R[1],j,G=r,Y=i;k&&F&&k===F&&typeof k=="string"&&k!=="mixed"&&k!=="mixed"&&(j=k,G=t.find(r,[j,j]),Y=t.find(i,[j,j]));for(var J=[],L=0;L<O;L++){var U=T[L];J[L]=[];for(var W=0;W<V;W++){for(var B=Y(U[0],I[0][W]),q=1;q<$;q++)B=G(B,Y(U[q],I[q][W]));J[L][W]=B}}return w.createDenseMatrix({data:J,size:[O,V],datatype:k===w._datatype&&F===S._datatype?j:void 0})}function y(w,S){var T=w._data,A=w._size,k=w._datatype||w.getDataType(),I=S._values,R=S._index,F=S._ptr,O=S._size,$=S._datatype||S._data===void 0?S._datatype:S.getDataType();if(!I)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var V=A[0],j=O[1],G,Y=r,J=i,L=s,U=0;k&&$&&k===$&&typeof k=="string"&&k!=="mixed"&&(G=k,Y=t.find(r,[G,G]),J=t.find(i,[G,G]),L=t.find(s,[G,G]),U=t.convert(0,G));for(var W=[],B=[],q=[],Z=S.createSparseMatrix({values:W,index:B,ptr:q,size:[V,j],datatype:k===w._datatype&&$===S._datatype?G:void 0}),re=0;re<j;re++){q[re]=B.length;var xe=F[re],pe=F[re+1];if(pe>xe)for(var Te=0,ke=0;ke<V;ke++){for(var it=ke+1,Re=void 0,ut=xe;ut<pe;ut++){var Ke=R[ut];Te!==it?(Re=J(T[ke][Ke],I[ut]),Te=it):Re=Y(Re,J(T[ke][Ke],I[ut]))}Te===it&&!L(Re,U)&&(B.push(ke),W.push(Re))}}return q[j]=B.length,Z}function v(w,S){var T=w._values,A=w._index,k=w._ptr,I=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var R=S._data,F=S._datatype||S.getDataType(),O=w._size[0],$=S._size[0],V=[],j=[],G=[],Y,J=r,L=i,U=s,W=0;I&&F&&I===F&&typeof I=="string"&&I!=="mixed"&&(Y=I,J=t.find(r,[Y,Y]),L=t.find(i,[Y,Y]),U=t.find(s,[Y,Y]),W=t.convert(0,Y));var B=[],q=[];G[0]=0;for(var Z=0;Z<$;Z++){var re=R[Z];if(!U(re,W))for(var xe=k[Z],pe=k[Z+1],Te=xe;Te<pe;Te++){var ke=A[Te];q[ke]?B[ke]=J(B[ke],L(re,T[Te])):(q[ke]=!0,j.push(ke),B[ke]=L(re,T[Te]))}}for(var it=j.length,Re=0;Re<it;Re++){var ut=j[Re];V[Re]=B[ut]}return G[1]=j.length,w.createSparseMatrix({values:V,index:j,ptr:G,size:[O,1],datatype:I===w._datatype&&F===S._datatype?Y:void 0})}function b(w,S){var T=w._values,A=w._index,k=w._ptr,I=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var R=S._data,F=S._datatype||S.getDataType(),O=w._size[0],$=S._size[0],V=S._size[1],j,G=r,Y=i,J=s,L=0;I&&F&&I===F&&typeof I=="string"&&I!=="mixed"&&(j=I,G=t.find(r,[j,j]),Y=t.find(i,[j,j]),J=t.find(s,[j,j]),L=t.convert(0,j));for(var U=[],W=[],B=[],q=w.createSparseMatrix({values:U,index:W,ptr:B,size:[O,V],datatype:I===w._datatype&&F===S._datatype?j:void 0}),Z=[],re=[],xe=0;xe<V;xe++){B[xe]=W.length;for(var pe=xe+1,Te=0;Te<$;Te++){var ke=R[Te][xe];if(!J(ke,L))for(var it=k[Te],Re=k[Te+1],ut=it;ut<Re;ut++){var Ke=A[ut];re[Ke]!==pe?(re[Ke]=pe,W.push(Ke),Z[Ke]=Y(ke,T[ut])):Z[Ke]=G(Z[Ke],Y(ke,T[ut]))}}for(var Ct=B[xe],gt=W.length,Ie=Ct;Ie<gt;Ie++){var Ve=W[Ie];U[Ie]=Z[Ve]}}return B[V]=W.length,q}function _(w,S){var T=w._values,A=w._index,k=w._ptr,I=w._datatype||w._data===void 0?w._datatype:w.getDataType(),R=S._values,F=S._index,O=S._ptr,$=S._datatype||S._data===void 0?S._datatype:S.getDataType(),V=w._size[0],j=S._size[1],G=T&&R,Y,J=r,L=i;I&&$&&I===$&&typeof I=="string"&&I!=="mixed"&&(Y=I,J=t.find(r,[Y,Y]),L=t.find(i,[Y,Y]));for(var U=G?[]:void 0,W=[],B=[],q=w.createSparseMatrix({values:U,index:W,ptr:B,size:[V,j],datatype:I===w._datatype&&$===S._datatype?Y:void 0}),Z=G?[]:void 0,re=[],xe,pe,Te,ke,it,Re,ut,Ke,Ct=0;Ct<j;Ct++){B[Ct]=W.length;var gt=Ct+1;for(it=O[Ct],Re=O[Ct+1],ke=it;ke<Re;ke++)if(Ke=F[ke],G)for(pe=k[Ke],Te=k[Ke+1],xe=pe;xe<Te;xe++)ut=A[xe],re[ut]!==gt?(re[ut]=gt,W.push(ut),Z[ut]=L(R[ke],T[xe])):Z[ut]=J(Z[ut],L(R[ke],T[xe]));else for(pe=k[Ke],Te=k[Ke+1],xe=pe;xe<Te;xe++)ut=A[xe],re[ut]!==gt&&(re[ut]=gt,W.push(ut));if(G)for(var Ie=B[Ct],Ve=W.length,ft=Ie;ft<Ve;ft++){var _t=W[ft];U[ft]=Z[_t]}}return B[j]=W.length,q}return t(Nbe,i,{"Array, Array":t.referTo("Matrix, Matrix",w=>(S,T)=>{l(Fl(S),Fl(T));var A=w(n(S),n(T));return aa(A)?A.valueOf():A}),"Matrix, Matrix":function(S,T){var A=S.size(),k=T.size();return l(A,k),A.length===1?k.length===1?c(S,T,A[0]):f(S,T):k.length===1?h(S,T):p(S,T)},"Matrix, Array":t.referTo("Matrix,Matrix",w=>(S,T)=>w(S,n(T))),"Array, Matrix":t.referToSelf(w=>(S,T)=>w(n(S,T.storage()),T)),"SparseMatrix, any":function(S,T){return a(S,T,i,!1)},"DenseMatrix, any":function(S,T){return u(S,T,i,!1)},"any, SparseMatrix":function(S,T){return a(T,S,i,!0)},"any, DenseMatrix":function(S,T){return u(T,S,i,!0)},"Array, any":function(S,T){return u(n(S),T,i,!1).valueOf()},"any, Array":function(S,T){return u(n(T),S,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(w=>(S,T,A)=>{for(var k=w(S,T),I=0;I<A.length;I++)k=w(k,A[I]);return k})})}),Pbe="conj",F7t=["typed"],M7t=ni(Pbe,F7t,e=>{var{typed:t}=e;return t(Pbe,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":t.referToSelf(n=>r=>Ub(r,n))})}),Obe="identity",$7t=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],L7t=ni(Obe,$7t,e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:s,SparseMatrix:o}=e;return t(Obe,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return a(c)},"Array, string":function(c,f){return a(c,f)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return a(c.valueOf(),f)}});function a(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=Wo(l)||Wo(c)?i:null;if(Wo(l)&&(l=l.toNumber()),Wo(c)&&(c=c.toNumber()),!Gs(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!Gs(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,p=d?new d(0):0,m=[l,c];if(f){if(f==="sparse")return o.diagonal(m,h,0,p);if(f==="dense")return s.diagonal(m,h,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var g=zK([],m,p),y=l<c?l:c,v=0;v<y;v++)g[v][v]=h;return g}});function B7t(){throw new Error('No "bignumber" implementation available')}function j7t(){throw new Error('No "fraction" implementation available')}function U7t(){throw new Error('No "matrix" implementation available')}var Fbe="size",z7t=["typed","config","?matrix"],V7t=ni(Fbe,z7t,e=>{var{typed:t,config:n,matrix:r}=e;return t(Fbe,{Matrix:function(s){return s.create(s.size(),"number")},Array:Fl,string:function(s){return n.matrix==="Array"?[s.length]:r([s.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(s){return n.matrix==="Array"?[]:r?r([],"dense","number"):U7t()}})}),H7t="numeric",q7t=["number","?bignumber","?fraction"],W7t=ni(H7t,q7t,e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:o=>t(o),BigNumber:n?o=>n(o):B7t,bigint:o=>BigInt(o),Fraction:r?o=>r(o):j7t};return function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=mv(a);if(!(c in i))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in s))throw new TypeError("Cannot convert "+a+' to type "'+u+'"; valid output types are '+Object.keys(s).join(", "));return u===c?a:s[u](a)}}),Mbe="divideScalar",G7t=["typed","numeric"],Y7t=ni(Mbe,G7t,e=>{var{typed:t,numeric:n}=e;return t(Mbe,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"bigint, bigint":function(i,s){return i/s},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),$be="pow",K7t=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],X7t=ni($be,K7t,e=>{var{typed:t,config:n,identity:r,multiply:i,matrix:s,inv:o,number:a,fraction:u,Complex:l}=e;return t($be,{"number, number":c,"Complex, Complex":function(p,m){return p.pow(m)},"BigNumber, BigNumber":function(p,m){return m.isInteger()||p>=0||n.predictable?p.pow(m):new l(p.toNumber(),0).pow(m.toNumber(),0)},"bigint, bigint":(h,p)=>h**p,"Fraction, Fraction":function(p,m){var g=p.pow(m);if(g!=null)return g;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),m.valueOf())},"Array, number":f,"Array, BigNumber":function(p,m){return f(p,m.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(p,m){return d(p,m.toNumber())},"Unit, number | BigNumber":function(p,m){return p.pow(m)}});function c(h,p){if(n.predictable&&!Gs(p)&&h<0)try{var m=u(p),g=a(m);if((p===g||Math.abs((p-g)/p)<1e-14)&&m.d%2n===1n)return(m.n%2n===0n?1:-1)*Math.pow(-h,p)}catch{}return n.predictable&&(h<-1&&p===1/0||h>-1&&h<0&&p===-1/0)?NaN:Gs(p)||h>=0||n.predictable?r5e(h,p):h*h<1&&p===1/0||h*h>1&&p===-1/0?0:new l(h,0).pow(p,0)}function f(h,p){if(!Gs(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var m=Fl(h);if(m.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+m.length+" dimensions)");if(m[0]!==m[1])throw new Error("For A^b, A must be square (size is "+m[0]+"x"+m[1]+")");if(p<0)try{return f(o(h),-p)}catch(v){throw v.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):v}for(var g=r(m[0]).valueOf(),y=h;p>=1;)(p&1)===1&&(g=i(y,g)),p>>=1,y=i(y,y);return g}function d(h,p){return s(f(h.valueOf(),p))}}),Lbe="dot",Q7t=["typed","addScalar","multiplyScalar","conj","size"],J7t=ni(Lbe,Q7t,e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:s}=e;return t(Lbe,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":u});function o(c,f){var d=l(c),h=l(f),p,m;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)m=h[0];else if(h.length===2&&h[1]===1)m=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(p!==m)throw new RangeError("Vectors must have equal length ("+p+" != "+m+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function a(c,f){var d=o(c,f),h=aa(c)?c._data:c,p=aa(c)?c._datatype||c.getDataType():void 0,m=aa(f)?f._data:f,g=aa(f)?f._datatype||f.getDataType():void 0,y=l(c).length===2,v=l(f).length===2,b=n,_=r;if(p&&g&&p===g&&typeof p=="string"&&p!=="mixed"){var w=p;b=t.find(n,[w,w]),_=t.find(r,[w,w])}if(!y&&!v){for(var S=_(i(h[0]),m[0]),T=1;T<d;T++)S=b(S,_(i(h[T]),m[T]));return S}if(!y&&v){for(var A=_(i(h[0]),m[0][0]),k=1;k<d;k++)A=b(A,_(i(h[k]),m[k][0]));return A}if(y&&!v){for(var I=_(i(h[0][0]),m[0]),R=1;R<d;R++)I=b(I,_(i(h[R][0]),m[R]));return I}if(y&&v){for(var F=_(i(h[0][0]),m[0][0]),O=1;O<d;O++)F=b(F,_(i(h[O][0]),m[O][0]));return F}}function u(c,f){o(c,f);for(var d=c._index,h=c._values,p=f._index,m=f._values,g=0,y=n,v=r,b=0,_=0;b<d.length&&_<p.length;){var w=d[b],S=p[_];if(w<S){b++;continue}if(w>S){_++;continue}w===S&&(g=y(g,v(h[b],m[_])),b++,_++)}return g}function l(c){return aa(c)?c.size():s(c)}}),Bbe="det",Z7t=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],ejt=ni(Bbe,Z7t,e=>{var{typed:t,matrix:n,subtractScalar:r,multiply:i,divideScalar:s,isZero:o,unaryMinus:a}=e;return t(Bbe,{any:function(c){return Eo(c)},"Array | Matrix":function(c){var f;switch(aa(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Eo(c);case 1:if(f[0]===1)return Eo(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Uo(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+Uo(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Uo(f)+")")}}});function u(l,c,f){if(c===1)return Eo(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((T,A)=>A),p=0;p<c;p++){var m=h[p];if(o(l[m][p])){var g=void 0;for(g=p+1;g<c;g++)if(!o(l[h[g]][p])){m=h[g],h[g]=h[p],h[p]=m,d=!d;break}if(g===c)return l[m][p]}for(var y=l[m][p],v=p===0?1:l[h[p-1]][p-1],b=p+1;b<c;b++)for(var _=h[b],w=p+1;w<c;w++)l[_][w]=s(r(i(l[_][w],y),i(l[_][p],l[m][w])),v)}var S=l[h[c-1]][c-1];return d?a(S):S}}),jbe="inv",tjt=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],njt=ni(jbe,tjt,e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:s,unaryMinus:o,det:a,identity:u,abs:l}=e;return t(jbe,{"Array | Matrix":function(d){var h=aa(d)?d.size():Fl(d);switch(h.length){case 1:if(h[0]===1)return aa(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+Uo(h)+")");case 2:{var p=h[0],m=h[1];if(p===m)return aa(d)?n(c(d.valueOf(),p,m),d.storage()):c(d,p,m);throw new RangeError("Matrix must be square (size: "+Uo(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Uo(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var p,m,g,y,v;if(d===1){if(y=f[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,y)]]}else if(d===2){var b=a(f);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],b),r(o(f[0][1]),b)],[r(o(f[1][0]),b),r(f[0][0],b)]]}else{var _=f.concat();for(p=0;p<d;p++)_[p]=_[p].concat();for(var w=u(d).valueOf(),S=0;S<h;S++){var T=l(_[S][S]),A=S;for(p=S+1;p<d;)l(_[p][S])>T&&(T=l(_[p][S]),A=p),p++;if(T===0)throw Error("Cannot calculate inverse, determinant is zero");p=A,p!==S&&(v=_[S],_[S]=_[p],_[p]=v,v=w[S],w[S]=w[p],w[p]=v);var k=_[S],I=w[S];for(p=0;p<d;p++){var R=_[p],F=w[p];if(p!==S){if(R[S]!==0){for(g=r(o(R[S]),k[S]),m=S;m<h;m++)R[m]=i(R[m],s(g,k[m]));for(m=0;m<h;m++)F[m]=i(F[m],s(g,I[m]))}}else{for(g=k[S],m=S;m<h;m++)R[m]=r(R[m],g);for(m=0;m<h;m++)F[m]=r(F[m],g)}}}return w}}}),Ube="gamma",rjt=["typed","config","multiplyScalar","pow","BigNumber","Complex"],ijt=ni(Ube,rjt,e=>{var{typed:t,config:n,multiplyScalar:r,pow:i,BigNumber:s,Complex:o}=e;function a(l){if(l.im===0)return P5(l.re);if(l.re<.5){var c=new o(1-l.re,-l.im),f=new o(Math.PI*l.re,Math.PI*l.im);return new o(Math.PI).div(f.sin()).div(a(c))}l=new o(l.re-1,l.im);for(var d=new o(OS[0],0),h=1;h<OS.length;++h){var p=new o(OS[h],0);d=d.add(p.div(l.add(h)))}var m=new o(l.re+i5e+.5,l.im),g=Math.sqrt(2*Math.PI),y=m.pow(l.add(.5)),v=m.neg().exp();return d.mul(g).mul(y).mul(v)}return t(Ube,{number:P5,Complex:a,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new s(1/0):u(c.minus(1));if(!c.isFinite())return new s(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new s([1,1,2,6,24,120,720,5040][l]);var c=n.precision+(Math.log(l.toNumber())|0),f=s.clone({precision:c});if(l%2===1)return l.times(u(new s(l-1)));for(var d=l,h=new f(l),p=l.toNumber();d>2;)d-=2,p+=d,h=h.times(p);return new s(h.toPrecision(s.precision))}}),zbe="lgamma",sjt=["Complex","typed"],ojt=ni(zbe,sjt,e=>{var{Complex:t,typed:n}=e,r=7,i=7,s=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(zbe,{number:O5,Complex:o,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function o(l){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(l.isNaN())return new t(NaN,NaN);if(l.im===0)return new t(O5(l.re),0);if(l.re>=r||Math.abs(l.im)>=i)return a(l);if(l.re<=d){var h=pBt(c,l.im)*Math.floor(.5*l.re+.25),p=l.mul(Math.PI).sin().log(),m=o(new t(1-l.re,-l.im));return new t(f,h).sub(p).sub(m)}else return l.im>=0?u(l):u(l.conjugate()).conjugate()}function a(l){for(var c=l.sub(.5).mul(l.log()).sub(l).add(s5e),f=new t(1,0).div(l),d=f.div(l),h=s[0],p=s[1],m=2*d.re,g=d.re*d.re+d.im*d.im,y=2;y<8;y++){var v=p;p=-g*h+s[y],h=m*h+v}var b=f.mul(d.mul(h).add(p));return c.add(b)}function u(l){var c=0,f=0,d=l;for(l=l.add(1);l.re<=r;){d=d.mul(l);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,l=l.add(1)}return a(l).sub(d.log()).sub(new t(0,c*2*Math.PI*1))}}),g9=h9t({config:eE}),y9=v9t({}),o5e=C9t({}),vie=D9t({}),bie=H9t({Matrix:vie}),Js=gBt({BigNumber:g9,Complex:y9,DenseMatrix:bie,Fraction:o5e}),ajt=b7t({typed:Js}),xie=w7t({typed:Js}),ujt=M7t({typed:Js}),wie=Z9t({config:eE,typed:Js}),ljt=K9t({equalScalar:wie,typed:Js}),Dk=ojt({Complex:y9,typed:Js}),_ie=N7t({typed:Js}),a5e=a7t({typed:Js}),u5e=n7t({Matrix:vie,equalScalar:wie,typed:Js}),cjt=E7t({typed:Js}),fjt=c7t({BigNumber:g9,typed:Js}),l5e=y7t({typed:Js}),c5e=h7t({Fraction:o5e,typed:Js}),cA=m7t({DenseMatrix:bie,Matrix:vie,SparseMatrix:u5e,typed:Js}),djt=W7t({bignumber:fjt,fraction:c5e,number:a5e}),hjt=V7t({matrix:cA,config:eE,typed:Js}),f5e=Y7t({numeric:djt,typed:Js}),d5e=L7t({BigNumber:g9,DenseMatrix:bie,SparseMatrix:u5e,config:eE,matrix:cA,typed:Js}),pjt=J7t({addScalar:xie,conj:ujt,multiplyScalar:_ie,size:hjt,typed:Js}),Eie=O7t({addScalar:xie,dot:pjt,equalScalar:wie,matrix:cA,multiplyScalar:_ie,typed:Js}),mjt=ejt({divideScalar:f5e,isZero:ljt,matrix:cA,multiply:Eie,subtractScalar:cjt,typed:Js,unaryMinus:l5e}),gjt=njt({abs:ajt,addScalar:xie,det:mjt,divideScalar:f5e,identity:d5e,matrix:cA,multiply:Eie,typed:Js,unaryMinus:l5e}),yjt=X7t({Complex:y9,config:eE,fraction:c5e,identity:d5e,inv:gjt,matrix:cA,multiply:Eie,number:a5e,typed:Js}),Vbe=ijt({BigNumber:g9,Complex:y9,config:eE,multiplyScalar:_ie,pow:yjt,typed:Js});const vjt=Math.PI;function h5e(e,t){if(t<=0)throw new Error("Degrees of freedom must be positive");const n=Dk((t+1)/2),r=Dk(t/2),i=n-.5*Math.log(t*vjt)-r,s=e*e,a=-(t+1)/2*Math.log1p(s/t);return Math.exp(i+a)}function p5e(e,t){return Dk(e)+Dk(t)-Dk(e+t)}function bjt(e,t,n){if(e<=0)return-1/0;if(e>=1)return p5e(t,n);const r=1e-30;let i=1,s=t+n,o=t+1,a=t-1,u=1,l=1-s*e/o;Math.abs(l)<r&&(l=r),l=1/l;let c=l;for(i=1;i<=100;i+=1){let f=2*i,d=i*(n-i)*e/((a+f)*(t+f));l=1+d*l,Math.abs(l)<r&&(l=r),u=1+d/u,Math.abs(u)<r&&(u=r),l=1/l,c*=l*u,d=-(t+i)*(s+i)*e/((t+f)*(o+f)),l=1+d*l,Math.abs(l)<r&&(l=r),u=1+d/u,Math.abs(u)<r&&(u=r),l=1/l;const h=l*u;if(c*=h,Math.abs(h-1)<3e-7)break}return Math.log(c)+t*Math.log(e)+n*Math.log1p(-e)-Math.log(t)}function Hbe(e,t,n){if(e<=0)return 0;if(e>=1)return 1;const r=bjt(e,t,n),i=p5e(t,n);return Math.exp(r-i)}function m5e(e,t){if(e===0)return .5;const n=t/(t+e*e);return Math.abs(e)<1e-10?.5+e*Math.sqrt(t)*Vbe((t+1)/2)/(Math.sqrt(Math.PI*t)*Vbe(t/2)):e<0?.5*Hbe(n,t/2,.5):1-.5*Hbe(n,t/2,.5)}const xjt=Object.freeze(Object.defineProperty({__proto__:null,studentTCDF:m5e,studentTPDF:h5e},Symbol.toStringTag,{value:"Module"}));function wjt(){return{xi:Math.random()*4-2,omega:Math.random()*3.9+.1,nu:Math.floor(Math.random()*9)+1,alpha:Math.random()*10-5}}function _jt(e,t,n,r=1e-8,i=50){function s(u,l){const c=(u+l)/2;return(l-u)/6*(e(u)+4*e(c)+e(l))}function o(u,l,c,f,d,h){const p=(u+l)/2,m=(l-u)/12,g=(u+p)/2,y=(p+l)/2,v=e(g),b=e(y),_=m*(c+4*v+d),w=m*(d+4*b+f),S=s(u,l);return h>=i||Math.abs(_+w-S)<=r?_+w:o(u,p,c,d,v,h+1)+o(p,l,d,f,b,h+1)}const a=(t+n)/2;return o(t,n,e(t),e(n),e(a),0)}function Sie(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t,o=(e-n)/r,a=1/r*h5e(o,i),u=m5e(s*o*Math.sqrt((i+1)/(i+o*o)),i+1);return 2*a*u}function Ejt(e,t){return _jt(r=>Sie(r,t),-1e3,e)}function Cie(e,t=1001,n=[-5,5]){const[r,i]=n,s=Array.from({length:t},(u,l)=>r+l*(i-r)/(t-1)),o=s.map(u=>Sie(u,e)),a=s.map(u=>Ejt(u,e));return{xVals:s,pdfVals:o,cdfVals:a}}function Sjt(e,t){const n=Math.round((t-e.xVals[0])/(e.xVals[1]-e.xVals[0]));return n<0||n>=e.xVals.length?{pdf:0,cdf:n<0?0:1}:{pdf:e.pdfVals[n],cdf:e.cdfVals[n]}}const Cjt=Object.freeze(Object.defineProperty({__proto__:null,findDistributionValue:Sjt,generateDistributionData:Cie,generateRandomParams:wjt,skewTPDF:Sie},Symbol.toStringTag,{value:"Module"})),oc={marginBottom:40,marginLeft:50,marginTop:15,marginRight:15,height:450,width:600};function Tjt({parameters:e,setAnswer:t}){const{data:n,showPDF:r,taskid:i,training:s}=e,[o,a]=N.useState(null),[u,l]=N.useState(null),[c,f]=N.useState(!1),d=N.useRef(null),h=N.useRef({xScale:null,yScale:null}),p=N.useMemo(()=>Cie(n),[n]),{actions:m,trrack:g}=N.useMemo(()=>{const S=Iy.create(),T=S.register("click",(k,I)=>(k.clickX=I.clickX,k.clickY=I.clickY,k)),A=J_({registry:S,initialState:{clickX:0,clickY:0}});return{actions:{clickAction:T},trrack:A}},[]),y=N.useCallback(()=>{if(!p||!d.current){console.log("Cannot draw chart - missing:",{distributionData:!!p,svgRef:!!d.current});return}vr(d.current).selectAll("*").remove();const S=oc.width-oc.marginLeft-oc.marginRight,T=oc.height-oc.marginTop-oc.marginBottom,A=vr(d.current).attr("width",S+oc.marginLeft+oc.marginRight).attr("height",T+oc.marginTop+oc.marginBottom).append("g").attr("transform",`translate(${oc.marginLeft},${oc.marginTop})`),k=ja().domain([p.xVals[0],p.xVals[p.xVals.length-1]]).range([0,S]),I=ja().domain([0,1]).range([T,0]);h.current={xScale:k,yScale:I};const R=r?p.pdfVals:p.cdfVals,F=p.xVals.map(($,V)=>({x:$,y:R[V]})),O=MB().x($=>k($.x)).y($=>I($.y));A.append("path").datum(F).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",2).attr("d",O),A.append("g").attr("class","points-group"),A.append("g").attr("transform",`translate(0,${T})`).call(K3e(k)).append("text").attr("x",S/2).attr("y",35).attr("fill","black").attr("text-anchor","middle").style("font-size","15px").text("X Values"),A.append("g").call(X3e(I)).append("text").attr("transform","rotate(-90)").attr("y",-40).attr("x",-395/2).attr("fill","black").attr("text-anchor","middle").style("font-size","15px").text("Probability")},[p,r]),v=N.useCallback((S,T)=>{if(!p||!h.current.xScale||!h.current.yScale)return console.log("Missing required data:",{distributionData:!!p,xScale:!!h.current.xScale,yScale:!!h.current.yScale}),null;const{xScale:A,yScale:k}=h.current,I=r?p.pdfVals:p.cdfVals,R=A.invert(S);k.invert(T);const F=kb(G=>G).left(p.xVals,R),O=p.xVals[F-1],$=p.xVals[F];if(!O||!$)return console.log("Could not find bracketing x values"),null;const V=Math.abs(R-O)<Math.abs(R-$)?F-1:F,j={x:p.xVals[V],y:I[V]};return console.log("Found closest point:",j),j},[p,r]);N.useEffect(()=>{console.log("Initial chart draw effect triggered"),y()},[y]),N.useEffect(()=>{if(console.log("Point update effect triggered",o),!d.current||!h.current.xScale||!h.current.yScale){console.log("Missing refs for point update");return}const{xScale:S,yScale:T}=h.current;vr(d.current).select(".points-group").selectAll("circle").remove(),o&&(console.log("Adding new point:",o),vr(d.current).select(".points-group").append("circle").attr("cx",S(o.x)).attr("cy",T(o.y)).attr("r",4).attr("fill","red"))},[o]);const b=N.useCallback(S=>{if(console.log("Click event triggered"),!d.current||!p){console.log("Missing required refs");return}const A=d.current.getBoundingClientRect(),k=S.clientX-A.left-oc.marginLeft,I=S.clientY-A.top-oc.marginTop;console.log("Click coordinates:",{clickX:k,clickY:I});const R=v(k,I);if(console.log("Closest point found:",R),R){const{xScale:F,yScale:O}=h.current;if(!F||!O){console.log("Scales not available");return}const $=O(R.y),V=Math.abs(I-$);console.log("Distance from line:",V),V<=5?(g.apply("Clicked",m.clickAction({clickX:R.x,clickY:R.y})),a(R),t({status:!0,provenanceGraph:g.graph.backend,answers:{"location-x":R.x,"location-y":R.y}})):t({status:!1,answers:{}})}else t({status:!1,answers:{}})},[p,m,g,v,i,t]),_=N.useCallback(S=>{if(!d.current)return;const A=d.current.getBoundingClientRect(),k=S.clientX-A.left,I=S.clientY-A.top,R=p.xVals.some((F,O)=>Math.sqrt(Math.pow(F-k,2)+Math.pow(p.pdfVals[O]-I,2))<10);l({x:k,y:I}),f(R)},[p]),w=N.useCallback(()=>{f(!1)},[]);return E.jsx(Bf,{p:"md",children:E.jsxs("div",{className:"mt-4",children:[E.jsx("svg",{ref:d,onClick:b,className:"bg-white rounded-lg shadow-lg",onMouseMove:_,onMouseLeave:w}),E.jsx(bn,{onClick:()=>{a(null),t({status:!1,answers:{}})},mt:"md",children:"Clear Point"})]})})}const Ajt=Object.freeze(Object.defineProperty({__proto__:null,default:Tjt},Symbol.toStringTag,{value:"Module"})),ac={marginBottom:40,marginLeft:50,marginTop:15,marginRight:15,height:450,width:600};function Djt({parameters:e,setAnswer:t}){const{data:n,showPDF:r,taskid:i,training:s}=e,[o,a]=N.useState(null),[u,l]=N.useState(null),[c,f]=N.useState(!1),d=N.useRef(null),h=N.useRef({xScale:null,yScale:null}),p=N.useMemo(()=>Cie(n),[n]),{actions:m,trrack:g}=N.useMemo(()=>{const S=Iy.create(),T=S.register("click",(k,I)=>(k.clickX=I.clickX,k.clickY=I.clickY,k)),A=J_({registry:S,initialState:{clickX:0,clickY:0}});return{actions:{clickAction:T},trrack:A}},[]),y=N.useCallback(()=>{if(!p||!d.current){console.log("Cannot draw chart - missing:",{distributionData:!!p,svgRef:!!d.current});return}vr(d.current).selectAll("*").remove();const S=ac.width-ac.marginLeft-ac.marginRight,T=ac.height-ac.marginTop-ac.marginBottom,A=vr(d.current).attr("width",S+ac.marginLeft+ac.marginRight).attr("height",T+ac.marginTop+ac.marginBottom).append("g").attr("transform",`translate(${ac.marginLeft},${ac.marginTop})`),k=ja().domain([p.xVals[0],p.xVals[p.xVals.length-1]]).range([0,S]),I=ja().domain([0,1]).range([T,0]);h.current={xScale:k,yScale:I};const R=r?p.pdfVals:p.cdfVals,F=p.xVals.map(($,V)=>({x:$,y:R[V]})),O=MB().x($=>k($.x)).y($=>I($.y));A.append("path").datum(F).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",2).attr("d",O),A.append("g").attr("class","points-group"),A.append("g").attr("transform",`translate(0,${T})`).call(K3e(k)).append("text").attr("x",S/2).attr("y",35).attr("fill","black").attr("text-anchor","middle").style("font-size","15px").text("X Values"),A.append("g").call(X3e(I)).append("text").attr("transform","rotate(-90)").attr("y",-40).attr("x",-395/2).attr("fill","black").attr("text-anchor","middle").style("font-size","15px").text("Probability")},[p,r]),v=N.useCallback((S,T)=>{if(!p||!h.current.xScale||!h.current.yScale)return console.log("Missing required data:",{distributionData:!!p,xScale:!!h.current.xScale,yScale:!!h.current.yScale}),null;const{xScale:A,yScale:k}=h.current,I=r?p.pdfVals:p.cdfVals,R=A.invert(S);k.invert(T);const F=kb(G=>G).left(p.xVals,R),O=p.xVals[F-1],$=p.xVals[F];if(!O||!$)return console.log("Could not find bracketing x values"),null;const V=Math.abs(R-O)<Math.abs(R-$)?F-1:F,j={x:p.xVals[V],y:I[V]};return console.log("Found closest point:",j),j},[p,r]);N.useEffect(()=>{console.log("Initial chart draw effect triggered"),y()},[y]),N.useEffect(()=>{if(console.log("Point update effect triggered",o),!d.current||!h.current.xScale||!h.current.yScale){console.log("Missing refs for point update");return}const{xScale:S,yScale:T}=h.current;vr(d.current).select(".points-group").selectAll("circle").remove(),o&&(console.log("Adding new point:",o),vr(d.current).select(".points-group").append("circle").attr("cx",S(o.x)).attr("cy",T(o.y)).attr("r",4).attr("fill","red"))},[o]);const b=N.useCallback(S=>{if(console.log("Click event triggered"),!d.current||!p){console.log("Missing required refs");return}const A=d.current.getBoundingClientRect(),k=S.clientX-A.left-ac.marginLeft,I=S.clientY-A.top-ac.marginTop;console.log("Click coordinates:",{clickX:k,clickY:I});const R=v(k,I);if(console.log("Closest point found:",R),R){const{xScale:F,yScale:O}=h.current;if(!F||!O){console.log("Scales not available");return}const $=O(R.y),V=Math.abs(I-$);console.log("Distance from line:",V),V<=5?(g.apply("Clicked",m.clickAction({clickX:R.x,clickY:R.y})),a(R),t({status:!0,provenanceGraph:g.graph.backend,answers:{"location-x":R.x,"location-y":R.y}})):t({status:!1,answers:{}})}else t({status:!1,answers:{}})},[p,m,g,v,i,t]),_=N.useCallback(S=>{if(!d.current)return;const A=d.current.getBoundingClientRect(),k=S.clientX-A.left,I=S.clientY-A.top,R=p.xVals.some((F,O)=>Math.sqrt(Math.pow(F-k,2)+Math.pow(p.pdfVals[O]-I,2))<10);l({x:k,y:I}),f(R)},[p]),w=N.useCallback(()=>{f(!1)},[]);return E.jsx(Bf,{p:"md",children:E.jsxs("div",{className:"mt-4",children:[E.jsx("svg",{ref:d,onClick:b,className:"bg-white rounded-lg shadow-lg",onMouseMove:_,onMouseLeave:w}),E.jsx(bn,{onClick:()=>{a(null),t({status:!1,answers:{}})},mt:"md",children:"Clear Point"})]})})}const Ijt=Object.freeze(Object.defineProperty({__proto__:null,default:Djt},Symbol.toStringTag,{value:"Module"})),kjt=e=>e*Math.PI/180,Rjt=({parameters:e,setAnswer:t})=>{var S;const n=N.useRef(null),r=N.useRef(null),i=N.useRef(null),{taskid1:s,taskid2:o,blindspotAngle:a}=e,u=vi(T=>T.answers),l=Number((S=u.calibration_3.answer)==null?void 0:S.pixelsPerMM),[c,f]=N.useState([]),[d,h]=N.useState(!1),[p,m]=N.useState(null),[g,y]=N.useState(5),v=T=>{if(!T.length||!l||!r.current)return;const A=T.reduce((O,$)=>O+$,0)/T.length,I=r.current.getBoundingClientRect().left,F=Math.abs(A-I)/l/Math.tan(kjt(a));m(F),h(!1)},b=()=>{n.current&&(n.current.style.left="740px")},_=()=>{if(!n.current||!r.current||!l||c.length>=5)return;h(!0);const T=()=>{if(!n.current)return;const k=parseInt(n.current.style.left||"740")-2;k<=0?n.current.style.left="740px":n.current.style.left=`${k}px`,i.current=requestAnimationFrame(T)};i.current=requestAnimationFrame(T)},w=()=>{i.current&&cancelAnimationFrame(i.current),h(!1)};return N.useEffect(()=>{p!==null&&c.length===5&&t({status:!0,answers:{"dist-calibration-MM":p,"dist-calibration-CM":p/10,"ball-positions":JSON.stringify(c)}})},[p,c,t]),N.useEffect(()=>{const T=A=>{if(A.code==="Space"){if(A.preventDefault(),!d)_();else if(n.current){w();const I=n.current.getBoundingClientRect().left;f(R=>{const F=[...R,I];return F.length>=5&&v(F),F}),y(R=>R-1),b()}}};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[d]),N.useEffect(()=>(m(null),h(!1),f([]),y(5),b(),()=>{m(null),h(!1),f([]),y(5)}),[]),N.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]),l?E.jsx(Bf,{size:"md",children:E.jsxs(Ys,{gap:"md",children:[E.jsx(tt,{children:"Now we will quickly measure how far away you are sitting. "}),E.jsxs(Ys,{gap:"xs",children:[E.jsxs(zu,{children:[E.jsxs(zu.Item,{children:["Put your left hand on the ",E.jsx("b",{children:"space bar"}),"."]}),E.jsx(zu.Item,{children:"Cover your right eye with your right hand."}),E.jsx(zu.Item,{children:"Using your left eye, focus on the black square. Keep your focus on the black square."}),E.jsxs(zu.Item,{children:["The ",E.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"red ball"})," will disappear as it moves from right to left. Press the space bar as soon as the ball disappears."]})]}),E.jsx(tt,{ta:"center",children:c.length>=5?"All measurements completed!":"Press the space bar when you are ready to begin."})]}),E.jsxs("div",{style:{position:"relative",width:"900px",height:"100px",backgroundColor:"#ffffff"},children:[E.jsx("div",{ref:n,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(255, 0, 0)",borderRadius:"30px",left:"740px"}}),E.jsx("div",{ref:r,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(0, 0, 0)",left:"870px"}})]}),E.jsxs(tt,{ta:"center",children:["Remaining measurements: ",5-c.length]}),p&&E.jsxs(Ys,{gap:"xs",children:[E.jsx(tt,{fw:700,size:"lg",children:"Viewing Distance Results"}),E.jsxs(tt,{children:["Estimated Viewing Distance: ",(p/10).toFixed(1)," cm"]}),E.jsxs(tt,{children:["Number of measurements: ",c.length]})]})]})}):E.jsx("div",{children:"Please complete card calibration first."})},Njt=Object.freeze(Object.defineProperty({__proto__:null,default:Rjt},Symbol.toStringTag,{value:"Module"})),Pjt="/vis-decode/assets/costco_card-B3j7PHjO.png",Ojt=({parameters:e,setAnswer:t,itemWidthMM:n=85.6,itemHeightMM:r=53.98})=>{const[i,s]=N.useState(300),[o,a]=N.useState(null),[u,l]=N.useState(!1),[c,f]=N.useState({min:100,max:500}),{taskid:d}=e,h=N.useRef(null),p=r/n;N.useEffect(()=>{const b=()=>{const _=window.innerWidth;f({min:Math.round(_*.1),max:Math.round(_*.8)})};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const m=b=>Math.round(b*p),g=b=>b/n,y=b=>{s(b)},v=()=>{if(!h.current)return;const b=g(i);a(b),t({status:!0,answers:{[d]:b}}),l(!0)};return E.jsx(Bf,{size:"md",children:E.jsxs(Ys,{gap:"lg",children:[E.jsx(tt,{size:"md",children:" Drag the slider until the image is the same size as a credit card held up to the screen."}),E.jsx(tt,{size:"md",children:" You can use any card this is the same size as a credit card, like a membership card or driver's license."}),E.jsx(tt,{size:"md",children:" If you do not have access to a real card, you can use a ruler to measure the image width to 3.37 inches or 85.6mm. "}),E.jsx(tt,{size:"md",children:" Once you are finished, click 'Confirm Size' and then 'Next'. "}),E.jsx(bn,{onClick:v,size:"lg",variant:"transparent",children:"Confirm Size"}),E.jsx(fN,{min:c.min,max:c.max,value:i,label:null,onChange:y,styles:{root:{width:"100%"},track:{cursor:"pointer"},thumb:{cursor:"grab"},bar:{cursor:"pointer"}}}),E.jsx("div",{ref:h,style:{width:`${i}px`,height:`${m(i)}px`,margin:"20px auto",overflow:"hidden"},children:E.jsx("img",{src:Pjt,alt:"Credit Card",style:{width:"100%",height:"100%",objectFit:"contain"}})}),u&&E.jsxs("div",{style:{textAlign:"center",color:"green"},children:["Calibration Complete - Pixels per MM: ",o==null?void 0:o.toFixed(2)]})]})})},Fjt=Object.freeze(Object.defineProperty({__proto__:null,default:Ojt},Symbol.toStringTag,{value:"Module"})),Mjt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function $jt({domain:e=[0,1],range:t=[0,100]}){}const Ljt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:$jt},Symbol.toStringTag,{value:"Module"}));function Bjt({domain:e=[0,1],range:t=[0,100]}){}const jjt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:Bjt},Symbol.toStringTag,{value:"Module"}));class Ujt extends yi.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?E.jsx(tt,{children:this.state.error.toString()}):this.props.children}}const qbe=Object.assign({"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":qNt,"../public/example-brush-interactions/assets/Bar.tsx":YNt,"../public/example-brush-interactions/assets/BrushPlot.tsx":v$t,"../public/example-brush-interactions/assets/Paintbrush.tsx":g$t,"../public/example-brush-interactions/assets/Scatter.tsx":y$t,"../public/example-brush-interactions/assets/XAxisBar.tsx":WNt,"../public/example-brush-interactions/assets/YAxis.tsx":m$t,"../public/example-brush-interactions/assets/YAxisBar.tsx":GNt,"../public/example-brush-interactions/assets/types.ts":b$t,"../public/example-cleveland/assets/BarChart.tsx":C$t,"../public/example-cleveland/assets/BubbleChart.tsx":N$t,"../public/example-cleveland/assets/PieChart.tsx":L$t,"../public/example-cleveland/assets/StackedBarChart.tsx":V$t,"../public/example-cleveland/assets/chartcomponents/Bars.tsx":x$t,"../public/example-cleveland/assets/chartcomponents/Bubbles.tsx":T$t,"../public/example-cleveland/assets/chartcomponents/DotMarks.tsx":A$t,"../public/example-cleveland/assets/chartcomponents/NumericAxisH.tsx":B$t,"../public/example-cleveland/assets/chartcomponents/NumericAxisV.tsx":w$t,"../public/example-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":_$t,"../public/example-cleveland/assets/chartcomponents/Slices.tsx":P$t,"../public/example-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":O$t,"../public/example-cleveland/assets/chartcomponents/StackedBars.tsx":j$t,"../public/example-cleveland/assets/hooks/useChartDimensions.tsx":zNt,"../public/example-fairness-jnd/assets/FairnessJND.tsx":q$t,"../public/libraries/mic-check/assets/AudioTest.tsx":sLt,"../public/libraries/test/assets/test.tsx":aLt,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":lLt,"../public/tutorial/react-and-randomization/assets/Bar.tsx":dLt,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":gLt,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":pLt,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":mLt,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":cLt,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":hLt,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":fLt,"../public/tutorial/react-and-randomization/assets/some.tsx":yLt,"../public/tutorial/react-and-randomization/assets/types.ts":vLt,"../public/vis-decode/assets/Test.tsx":Ajt,"../public/vis-decode/assets/Train.tsx":Ijt,"../public/vis-decode/assets/ViewingDistanceCalibration.tsx":Njt,"../public/vis-decode/assets/VirtualChinrestCalibration.tsx":Fjt,"../public/vis-decode/assets/chartComponents/Line.tsx":Mjt,"../public/vis-decode/assets/chartComponents/NumericAxisH.tsx":Ljt,"../public/vis-decode/assets/chartComponents/NumericAxisV.tsx":jjt,"../public/vis-decode/assets/customT.ts":xjt,"../public/vis-decode/assets/distributionCalculations.ts":Cjt});function zjt({currentConfig:e,provState:t}){const n=th(),r=nh(),i=`../public/${e.path}`,s=i in qbe?qbe[i].default:null,o=ef(),{updateResponseBlockValidation:a,setIframeAnswers:u}=Bl(),l=N.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return E.jsx(N.Suspense,{fallback:E.jsx("div",{children:"Loading..."}),children:s?E.jsx(Ujt,{children:E.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):E.jsx(Nv,{path:e.path})})}function Vjt({currentConfig:e}){const[t,n]=N.useState(""),[r,i]=N.useState(!0);return N.useEffect(()=>{async function s(){const o=await Nte(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?E.jsx(el,{text:t}):E.jsx(Nv,{path:e.path})}function fA(e){return e.baseComponent!==void 0}function g5e(){const e=th(),{setAlertModal:t}=Bl(),n=ef();N.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Wbe=Object.prototype.hasOwnProperty;function Gbe(e,t,n){for(n of e.keys())if(Ik(n,t))return n}function Ik(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Ik(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Gbe(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Gbe(t,i),!i)||!Ik(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Wbe.call(e,n)&&++r&&!Wbe.call(t,n)||!(n in t)||!Ik(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Hjt(e){var t=N.useRef(e),n=N.useRef(0);return Ik(e,t.current)||(t.current=e,n.current+=1),N.useMemo(function(){return t.current},[n.current])}function qjt(e,t){return N.useEffect(e,Hjt(t))}const M5=(e,t=null)=>{const[n,r]=N.useState("idle"),[i,s]=N.useState(null),[o,a]=N.useState(null),u=N.useRef(),l=N.useRef(!1);N.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=N.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return qjt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function y5e(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const Wjt="_root_1spq0_1",Gjt="_description_1spq0_9",Yjt="_title_1spq0_10",Kjt="_closeButton_1spq0_14",Xjt={root:Wjt,description:Gjt,title:Yjt,closeButton:Kjt},l3=e=>{const{title:t,message:n,color:r}=e;U_.show({title:t,message:n,position:"top-center",classNames:Xjt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},Ybe=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],v5e=["participantId","trialId","trialOrder","responseId"];function Tie(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Qjt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(hp(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=fA(u)&&u.baseComponent&&n.baseComponents?Ite({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=y5e(s);return Object.entries(s.answer).map(([h,p])=>{var y,v;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(b=>b.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const b=(v=(y=l.correctAnswer)==null?void 0:y.find(_=>_.id===h))==null?void 0:v.answer;m.correctAnswer=typeof b=="object"?JSON.stringify(b):b}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function Jjt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...v5e,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await Qjt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function Zjt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=N.useState([...Ybe].filter(p=>p!=="meta")),a=Po(),{value:u,status:l,error:c}=M5(Jjt,[s,r,a.storageEngine,i]),f=N.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);Tie(p,n)},[n,u]),d=N.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),l3({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=N.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return E.jsxs(ho,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[E.jsx(See,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Ybe],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:E.jsx(dpt,{}),variant:"filled"}),E.jsx(Rf,{h:"md"}),E.jsxs(Fe,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?E.jsxs(_n,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[E.jsx(_n.Thead,{children:E.jsx(_n.Tr,{children:u.header.map(p=>E.jsx(_n.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:E.jsxs(Jt,{direction:"row",justify:"space-between",align:"center",children:[p,!v5e.includes(p)&&E.jsx(L_,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:E.jsx(Jee,{size:16})})]})},p))})}),E.jsx(_n.Tbody,{children:u.rows.slice(0,5).map((p,m)=>E.jsx(_n.Tr,{children:u.header.map(g=>E.jsx(_n.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):l==="error"&&c?E.jsx(Pg,{variant:"light",children:c.message}):null,E.jsx(jf,{visible:l==="pending"||l==="idle"})]}),E.jsx(Rf,{h:"sm"}),E.jsx(Jt,{justify:"center",fz:"sm",c:"dimmed",children:E.jsx(tt,{children:h})}),E.jsx(Rf,{h:"md"}),E.jsxs($i,{justify:"right",children:[E.jsx(bn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),E.jsx(bn,{leftSection:E.jsx(Tke,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&E.jsx(bn,{onClick:d,children:E.jsx(npt,{})})]})]})}function eUt(){const e=ny(),{storageEngine:t}=Po(),n=vi(b=>b.answers),r=HT(),[i,s]=N.useState(!1);N.useEffect(()=>{if(r){s(!0);return}const b=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(b))},1e3)},[]),g5e();const[o,a]=N.useState(),[u,l]=N.useState(""),c=e.studyMetadata.title.replace(" ","_");N.useEffect(()=>{async function b(){if(t){const _=await t.getCurrentParticipantId(),w=await t.getParticipantData();l(_),a(w)}}b()},[t]);const f=N.useCallback(async()=>{Tie(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=N.useState(Math.floor(h/1e3));N.useEffect(()=>{if(i){const b=setInterval(()=>{m(_=>_-1)},1e3);return p<=0?(d&&f(),clearInterval(b),()=>clearInterval(b)):()=>clearInterval(b)}return()=>{}},[d,i,p,f]);const g=G_(),[y,v]=N.useState(!1);return N.useEffect(()=>{(async()=>{if(t){const _=await t.getModes(g);v(_.dataCollectionEnabled)}})()},[t,g]),E.jsx(ma,{style:{height:"100%"},children:E.jsx(Jt,{direction:"column",children:i||!y?E.jsx(tt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?E.jsx(el,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):E.jsxs(E.Fragment,{children:[E.jsx(tt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),E.jsx(Rf,{h:"lg"}),E.jsx(ma,{children:E.jsx(Zc,{color:"blue"})})]})})})}function tUt(){return E.jsx(tt,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function nUt(){return E.jsx(tt,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const Kbe={};function qK(e,t){e===void 0&&(e=Kbe),t===void 0&&(t=Kbe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var rUt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iUt=Object.prototype.hasOwnProperty;function WK(e,t){return iUt.call(e,t)}function GK(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)WK(e,i)&&r.push(i);return r}function Tf(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function YK(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Hx(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function b5e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function KK(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(KK(e[t]))return!0}else if(typeof e=="object"){for(var r=GK(e),i=r.length,s=0;s<i;s++)if(KK(e[r[s]]))return!0}}return!1}function Xbe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var x5e=function(e){rUt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Xbe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Xbe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),io=x5e,sUt=Tf,tS={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=$5(n,this.path);r&&(r=Tf(r));var i=Pw(n,{op:"remove",path:this.from}).removed;return Pw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=$5(n,this.from);return Pw(n,{op:"add",path:this.path,value:Tf(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:c3(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},oUt={add:function(e,t,n){return YK(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:tS.move,copy:tS.copy,test:tS.test,_get:tS._get};function $5(e,t){if(t=="")return e;var n={op:"_get",path:t};return Pw(e,n),n.value}function Pw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):L5(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=$5(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=c3(e,t.value),o.test===!1)throw new io("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new io("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Tf(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=L5;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=b5e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!YK(h))throw new io("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);YK(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new io("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=oUt[t.op].call(t,l,h,e);if(o.test===!1)throw new io("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=tS[t.op].call(t,l,h,e);if(o.test===!1)throw new io("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new io("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function v9(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new io("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Tf(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Pw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function aUt(e,t,n){var r=Pw(e,t);if(r.test===!1)throw new io("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function L5(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new io("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(tS[e.op]){if(typeof e.path!="string")throw new io("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new io('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new io("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new io("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&KK(e.value))throw new io("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new io("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new io("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=w5e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new io("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new io("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function w5e(e,t,n){try{if(!Array.isArray(e))throw new io("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)v9(Tf(t),Tf(e),n||!0);else{n=n||L5;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof io)return i;throw i}}function c3(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!c3(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!c3(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const uUt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:io,_areEquals:c3,applyOperation:Pw,applyPatch:v9,applyReducer:aUt,deepClone:sUt,getValueByPointer:$5,validate:w5e,validator:L5},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Aie=new WeakMap,lUt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),cUt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function fUt(e){return Aie.get(e)}function dUt(e,t){return e.observers.get(t)}function hUt(e,t){e.observers.delete(t.callback)}function pUt(e,t){t.unobserve()}function mUt(e,t){var n=[],r,i=fUt(e);if(!i)i=new lUt(e),Aie.set(e,i);else{var s=dUt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Tf(e),t){r.callback=t,r.next=null;var o=function(){XK(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){XK(r),clearTimeout(r.next),hUt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new cUt(t,r)),r}function XK(e,t){t===void 0&&(t=!1);var n=Aie.get(e.object);Die(n.value,e.object,e.patches,"",t),e.patches.length&&v9(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Die(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=GK(t),o=GK(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(WK(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Die(c,f,n,r+"/"+Hx(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Hx(l),value:Tf(c)}),n.push({op:"replace",path:r+"/"+Hx(l),value:Tf(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Hx(l),value:Tf(c)}),n.push({op:"remove",path:r+"/"+Hx(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!WK(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Hx(l),value:Tf(t[l])})}}}function gUt(e,t,n){n===void 0&&(n=!1);var r=[];return Die(e,t,r,"",n),r}const yUt=Object.freeze(Object.defineProperty({__proto__:null,compare:gUt,generate:XK,observe:mUt,unobserve:pUt},Symbol.toStringTag,{value:"Module"}));Object.assign({},uUt,yUt,{JsonPatchError:x5e,deepClone:Tf,escapePathComponent:Hx,unescapePathComponent:b5e});var vUt=/("(?:[^\\"]|\\.)*")|[:,]/g,bUt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,_,w;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),_=JSON.stringify(a,s),_===void 0)return _;if(g=i-u.length-l,_.length<=g&&(v=_.replace(vUt,function(S,T){return T||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(_),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",w=o(a[h],y,p.length+(f===g-1?0:1)),w!==void 0&&d.push(p+w);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return _}(t,"",0)};const LH=c0(bUt);function nf(e,t,n){return e.fields=t||[],e.fname=n,e}function po(e){return e==null?null:e.fname}function Ku(e){return e==null?null:e.fields}function _5e(e){return e.length===1?xUt(e[0]):wUt(e)}const xUt=e=>function(t){return t[e]},wUt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function rt(e){throw Error(e)}function v0(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||rt("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&rt("Access path missing closing bracket: "+e),r&&rt("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Hd(e,t,n){const r=v0(e);return e=r.length===1?r[0]:e,nf((n&&n.get||_5e)(r),[e],t||e)}const HN=Hd("id"),rl=nf(e=>e,[],"identity"),O1=nf(()=>0,[],"zero"),dA=nf(()=>1,[],"one"),qd=nf(()=>!0,[],"true"),p1=nf(()=>!1,[],"false");function _Ut(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const E5e=0,Iie=1,kie=2,S5e=3,C5e=4;function Rie(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_Ut,r=e||E5e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Iie&&n(t||"error","ERROR",arguments),this},warn(){return r>=kie&&n(t||"warn","WARN",arguments),this},info(){return r>=S5e&&n(t||"log","INFO",arguments),this},debug(){return r>=C5e&&n(t||"log","DEBUG",arguments),this}}}var at=Array.isArray;function jt(e){return e===Object(e)}const Qbe=e=>e!=="__proto__";function hA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=EUt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;pA(r,s,i[s],o)}return r},{})}function pA(e,t,n,r){if(!Qbe(t))return;let i,s;if(jt(n)&&!at(n)){s=jt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?pA(s,i,n[i]):Qbe(i)&&(s[i]=n[i])}else e[t]=n}function EUt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Xr(e){return e[e.length-1]}function Wu(e){return e==null||e===""?null:+e}const T5e=e=>t=>e*Math.exp(t),A5e=e=>t=>Math.log(e*t),D5e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),I5e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,B5=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function b9(e,t,n,r){const i=n(e[0]),s=n(Xr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function k5e(e,t){return b9(e,t,Wu,rl)}function R5e(e,t){var n=Math.sign(e[0]);return b9(e,t,A5e(n),T5e(n))}function N5e(e,t,n){return b9(e,t,B5(n),B5(1/n))}function P5e(e,t,n){return b9(e,t,D5e(n),I5e(n))}function x9(e,t,n,r,i){const s=r(e[0]),o=r(Xr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function Nie(e,t,n){return x9(e,t,n,Wu,rl)}function Pie(e,t,n){const r=Math.sign(e[0]);return x9(e,t,n,A5e(r),T5e(r))}function j5(e,t,n,r){return x9(e,t,n,B5(r),B5(1/r))}function Oie(e,t,n,r){return x9(e,t,n,D5e(r),I5e(r))}function O5e(e){return 1+~~(new Date(e).getMonth()/3)}function F5e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Lt(e){return e!=null?at(e)?e:[e]:[]}function M5e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function cr(e){return typeof e=="function"}const SUt="descending";function Fie(e,t,n){n=n||{},t=Lt(t)||[];const r=[],i=[],s={},o=n.comparator||CUt;return Lt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===SUt?-1:1),i.push(a=cr(a)?a:Hd(a,null,n)),(Ku(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:nf(o(i,r),Object.keys(s))}const w9=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),CUt=(e,t)=>e.length===1?TUt(e[0],t[0]):AUt(e,t,e.length),TUt=(e,t)=>function(n,r){return w9(e(n),e(r))*t},AUt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=w9(s(r),s(i));return o*t[a]});function il(e){return cr(e)?e:()=>e}function Mie(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function lr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function e0(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function $5e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const DUt=Object.prototype.hasOwnProperty;function vn(e,t){return DUt.call(e,t)}const z4={};function mA(e){let t={},n;function r(s){return vn(t,s)&&t[s]!==z4}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===z4&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=z4),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==z4&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function L5e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Xr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function Ot(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),lr(r,n)}function nS(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function zb(e){return typeof e=="boolean"}function gv(e){return Object.prototype.toString.call(e)==="[object Date]"}function B5e(e){return e&&cr(e[Symbol.iterator])}function fi(e){return typeof e=="number"}function j5e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Bt(e){return typeof e=="string"}function $ie(e,t,n){e&&(e=t?Lt(e).map(a=>a.replace(/\\(.)/g,"$1")):Lt(e));const r=e&&e.length,i=n&&n.get||_5e,s=a=>i(t?[a]:v0(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return nf(o,e,"key")}function U5e(e,t){const n=e[0],r=Xr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const IUt=1e4;function z5e(e){e=+e||IUt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>vn(t,o)||vn(n,o),get:o=>vn(t,o)?t[o]:vn(n,o)?s(o,n[o]):void 0,set:(o,a)=>vn(t,o)?t[o]=a:s(o,a)}}function V5e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function NI(e,t){let n="";for(;--t>=0;)n+=e;return n}function H5e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?NI(i,o)+s:r==="center"?NI(i,~~(o/2))+s+NI(i,Math.ceil(o/2)):s+NI(i,o)}function qN(e){return e&&Xr(e)-e[0]||0}function Nt(e){return at(e)?"["+e.map(Nt)+"]":jt(e)||Bt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Lie(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const kUt=e=>fi(e)||gv(e)?e:Date.parse(e);function Bie(e,t){return t=t||kUt,e==null||e===""?null:t(e)}function jie(e){return e==null||e===""?null:e+""}function yp(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function q5e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function S1(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function RUt(e){return e}function NUt(e){if(e==null)return RUt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function PUt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function OUt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Jbe(e,n)})}:Jbe(e,t)}function Jbe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=W5e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function W5e(e,t){var n=NUt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&PUt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function FUt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function MUt(e){return W5e(e,$Ut.apply(this,arguments))}function $Ut(e,t,n){var r,i,s;if(arguments.length>1)r=LUt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:FUt(e,r)}}function LUt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const cu="year",Yc="quarter",Xu="month",ca="week",Kc="date",qu="day",t0="dayofyear",Gf="hours",Yf="minutes",Wd="seconds",vp="milliseconds",Uie=[cu,Yc,Xu,ca,Kc,qu,t0,Gf,Yf,Wd,vp],BH=Uie.reduce((e,t,n)=>(e[t]=1+n,e),{});function zie(e){const t=Lt(e).slice(),n={};return t.length||rt("Missing time unit."),t.forEach(i=>{vn(BH,i)?n[i]=1:rt(`Invalid time unit: ${i}.`)}),(n[ca]||n[qu]?1:0)+(n[Yc]||n[Xu]||n[Kc]?1:0)+(n[t0]?1:0)>1&&rt(`Incompatible time units: ${e}`),t.sort((i,s)=>BH[i]-BH[s]),t}const BUt={[cu]:"%Y ",[Yc]:"Q%q ",[Xu]:"%b ",[Kc]:"%d ",[ca]:"W%U ",[qu]:"%a ",[t0]:"%j ",[Gf]:"%H:00",[Yf]:"00:%M",[Wd]:":%S",[vp]:".%L",[`${cu}-${Xu}`]:"%Y-%m ",[`${cu}-${Xu}-${Kc}`]:"%Y-%m-%d ",[`${Gf}-${Yf}`]:"%H:%M"};function G5e(e,t){const n=lr({},BUt,t),r=zie(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Jx=new Date;function Vie(e){return Jx.setFullYear(e),Jx.setMonth(0),Jx.setDate(1),Jx.setHours(0,0,0,0),Jx}function Y5e(e){return X5e(new Date(e))}function K5e(e){return QK(new Date(e))}function X5e(e){return Lg.count(Vie(e.getFullYear())-1,e)}function QK(e){return YT.count(Vie(e.getFullYear())-1,e)}function JK(e){return Vie(e).getDay()}function jUt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function Q5e(e){return Z5e(new Date(e))}function J5e(e){return ZK(new Date(e))}function Z5e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return dv.count(t-1,e)}function ZK(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return KT.count(t-1,e)}function eX(e){return Jx.setTime(Date.UTC(e,0,1)),Jx.getUTCDay()}function UUt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function e$e(e,t,n,r,i){const s=t||1,o=Xr(e),a=(y,v,b)=>(b=b||y,zUt(n[b],r[b],y===o&&s,v)),u=new Date,l=yp(e),c=l[cu]?a(cu):il(2012),f=l[Xu]?a(Xu):l[Yc]?a(Yc):O1,d=l[ca]&&l[qu]?a(qu,1,ca+qu):l[ca]?a(ca,1):l[qu]?a(qu,1):l[Kc]?a(Kc,1):l[t0]?a(t0,1):dA,h=l[Gf]?a(Gf):O1,p=l[Yf]?a(Yf):O1,m=l[Wd]?a(Wd):O1,g=l[vp]?a(vp):O1;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function zUt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function UC(e,t,n){return t+e*7-(n+6)%7}const VUt={[cu]:e=>e.getFullYear(),[Yc]:e=>Math.floor(e.getMonth()/3),[Xu]:e=>e.getMonth(),[Kc]:e=>e.getDate(),[Gf]:e=>e.getHours(),[Yf]:e=>e.getMinutes(),[Wd]:e=>e.getSeconds(),[vp]:e=>e.getMilliseconds(),[t0]:e=>X5e(e),[ca]:e=>QK(e),[ca+qu]:(e,t)=>UC(QK(e),e.getDay(),JK(t)),[qu]:(e,t)=>UC(1,e.getDay(),JK(t))},HUt={[Yc]:e=>3*e,[ca]:(e,t)=>UC(e,0,JK(t))};function t$e(e,t){return e$e(e,t||1,VUt,HUt,jUt)}const qUt={[cu]:e=>e.getUTCFullYear(),[Yc]:e=>Math.floor(e.getUTCMonth()/3),[Xu]:e=>e.getUTCMonth(),[Kc]:e=>e.getUTCDate(),[Gf]:e=>e.getUTCHours(),[Yf]:e=>e.getUTCMinutes(),[Wd]:e=>e.getUTCSeconds(),[vp]:e=>e.getUTCMilliseconds(),[t0]:e=>Z5e(e),[ca]:e=>ZK(e),[qu]:(e,t)=>UC(1,e.getUTCDay(),eX(t)),[ca+qu]:(e,t)=>UC(ZK(e),e.getUTCDay(),eX(t))},WUt={[Yc]:e=>3*e,[ca]:(e,t)=>UC(e,0,eX(t))};function n$e(e,t){return e$e(e,t||1,qUt,WUt,UUt)}const GUt={[cu]:qm,[Yc]:zR.every(3),[Xu]:zR,[ca]:YT,[Kc]:Lg,[qu]:Lg,[t0]:Lg,[Gf]:IB,[Yf]:AB,[Wd]:Sg,[vp]:wC},YUt={[cu]:Wm,[Yc]:VR.every(3),[Xu]:VR,[ca]:KT,[Kc]:dv,[qu]:dv,[t0]:dv,[Gf]:kB,[Yf]:DB,[Wd]:Sg,[vp]:wC};function gA(e){return GUt[e]}function yA(e){return YUt[e]}function r$e(e,t,n){return e?e.offset(t,n):void 0}function i$e(e,t,n){return r$e(gA(e),t,n)}function s$e(e,t,n){return r$e(yA(e),t,n)}function o$e(e,t,n,r){return e?e.range(t,n,r):void 0}function a$e(e,t,n,r){return o$e(gA(e),t,n,r)}function u$e(e,t,n,r){return o$e(yA(e),t,n,r)}const PI=1e3,OI=PI*60,FI=OI*60,_9=FI*24,KUt=_9*7,Zbe=_9*30,tX=_9*365,l$e=[cu,Xu,Kc,Gf,Yf,Wd,vp],MI=l$e.slice(0,-1),$I=MI.slice(0,-1),LI=$I.slice(0,-1),XUt=LI.slice(0,-1),QUt=[cu,ca],exe=[cu,Xu],c$e=[cu],OD=[[MI,1,PI],[MI,5,5*PI],[MI,15,15*PI],[MI,30,30*PI],[$I,1,OI],[$I,5,5*OI],[$I,15,15*OI],[$I,30,30*OI],[LI,1,FI],[LI,3,3*FI],[LI,6,6*FI],[LI,12,12*FI],[XUt,1,_9],[QUt,1,KUt],[exe,1,Zbe],[exe,3,3*Zbe],[c$e,1,tX]];function f$e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(qN(t))/n;let i=kb(a=>a[2]).right(OD,r),s,o;return i===OD.length?(s=c$e,o=Ov(t[0]/tX,t[1]/tX,n)):i?(i=OD[r/OD[i-1][2]<OD[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=l$e,o=Math.max(Ov(t[0],t[1],n),1)),{units:s,step:o}}function BI(e){const t={};return n=>t[n]||(t[n]=e(n))}function JUt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=ZUt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function ZUt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function d$e(e){const t=BI(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Jw(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return JUt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Jw(o??",f");const a=Ov(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=ePe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=tPe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=ZNe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let nX;h$e();function h$e(){return nX=d$e({format:Nb,formatPrefix:Qte})}function p$e(e){return d$e(JNe(e))}function U5(e){return arguments.length?nX=p$e(e):nX}function txe(e,t,n){n=n||{},jt(n)||rt(`Invalid time multi-format specifier: ${n}`);const r=t(Wd),i=t(Yf),s=t(Gf),o=t(Kc),a=t(ca),u=t(Xu),l=t(Yc),c=t(cu),f=e(n[vp]||".%L"),d=e(n[Wd]||":%S"),h=e(n[Yf]||"%I:%M"),p=e(n[Gf]||"%I %p"),m=e(n[Kc]||n[qu]||"%a %d"),g=e(n[ca]||"%b %d"),y=e(n[Xu]||"%B"),v=e(n[Yc]||"%B"),b=e(n[cu]||"%Y");return _=>(r(_)<_?f:i(_)<_?d:s(_)<_?h:o(_)<_?p:u(_)<_?a(_)<_?m:g:c(_)<_?l(_)<_?y:v:b)(_)}function m$e(e){const t=BI(e.format),n=BI(e.utcFormat);return{timeFormat:r=>Bt(r)?t(r):txe(t,gA,r),utcFormat:r=>Bt(r)?n(r):txe(n,yA,r),timeParse:BI(e.parse),utcParse:BI(e.utcParse)}}let rX;g$e();function g$e(){return rX=m$e({format:cne,parse:pOe,utcFormat:DN,utcParse:mOe})}function y$e(e){return m$e(lOe(e))}function f3(e){return arguments.length?rX=y$e(e):rX}const iX=(e,t)=>lr({},e,t);function v$e(e,t){const n=e?p$e(e):U5(),r=t?y$e(t):f3();return iX(n,r)}function Hie(e,t){const n=arguments.length;return n&&n!==2&&rt("defaultLocale expects either zero or two arguments."),n?iX(U5(e),f3(t)):iX(U5(),f3())}function ezt(){return h$e(),g$e(),Hie()}const tzt=/^(data:|([A-Za-z]+:)?\/\/)/,nzt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,rzt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,nxe="file://";function izt(e,t){return n=>({options:n||{},sanitize:ozt,load:szt,fileAccess:!1,file:azt(t),http:lzt(e)})}async function szt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function ozt(e,t){t=lr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=nzt.test(e.replace(rzt,""));(e==null||typeof e!="string"||!a)&&rt("Sanitize failure, invalid URI: "+Nt(e));const u=tzt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(nxe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(nxe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function azt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):uzt}async function uzt(){rt("No file system access.")}function lzt(e){return e?async function(t,n){const r=lr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?cr(s[i])?s[i]():s.text():rt(s.status+""+s.statusText)}:czt}async function czt(){rt("No HTTP fetch method available.")}const fzt=e=>e!=null&&e===e,dzt=e=>e==="true"||e==="false"||e===!0||e===!1,hzt=e=>!Number.isNaN(Date.parse(e)),b$e=e=>!Number.isNaN(+e)&&!(e instanceof Date),pzt=e=>b$e(e)&&Number.isInteger(+e),sX={boolean:Lie,integer:Wu,number:Wu,date:Bie,string:jie,unknown:rl},V4=[dzt,pzt,b$e,hzt],mzt=["boolean","integer","number","date"];function x$e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=V4.length,i=V4.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&fzt(u)&&!V4[a](u)&&(i[a]=0,++o,o===V4.length))return"string";return mzt[i.reduce((s,o)=>s===0?o:s,0)-1]}function w$e(e,t){return t.reduce((n,r)=>(n[r]=x$e(e,r),n),{})}function rxe(e){const t=function(n,r){const i={delimiter:e};return qie(n,r?lr(r,i):i)};return t.responseType="text",t}function qie(e,t){return t.header&&(e=t.header.map(Nt).join(t.delimiter)+`
`+e),YNe(t.delimiter).parse(e+"")}qie.responseType="text";function gzt(e){return typeof Buffer=="function"&&cr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Wie(e,t){const n=t&&t.property?Hd(t.property):rl;return jt(e)&&!gzt(e)?yzt(n(e),t):n(JSON.parse(e))}Wie.responseType="json";function yzt(e,t){return!at(e)&&B5e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const vzt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function _$e(e,t){let n,r,i,s;return e=Wie(e,t),t&&t.feature?(n=OUt,i=t.feature):t&&t.mesh?(n=MUt,i=t.mesh,s=vzt[t.filter]):rt("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):rt("Invalid TopoJSON object: "+i),r&&r.features||[r]}_$e.responseType="json";const _F={dsv:qie,csv:rxe(","),tsv:rxe("	"),json:Wie,topojson:_$e};function Gie(e,t){return arguments.length>1?(_F[e]=t,this):vn(_F,e)?_F[e]:null}function E$e(e){const t=Gie(e);return t&&t.responseType||"text"}function S$e(e,t,n,r){t=t||{};const i=Gie(t.type||"json");return i||rt("Unknown data format type: "+t.type),e=i(e,t),t.parse&&bzt(e,t.parse,n,r),vn(e,"columns")&&delete e.columns,e}function bzt(e,t,n,r){if(!e.length)return;const i=f3();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=w$e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!sX[p])throw Error("Illegal format pattern: "+h+":"+p);return sX[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const E9=izt(typeof fetch<"u"&&fetch,null);function S9(e){const t=e||rl,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function EF(e,t){try{await t(e)}catch(n){e.error(n)}}const C$e=Symbol("vega_id");let xzt=1;function C9(e){return!!(e&&mn(e))}function mn(e){return e[C$e]}function T$e(e,t){return e[C$e]=t,e}function Ii(e){const t=e===Object(e)?e:{data:e};return mn(t)?t:T$e(t,xzt++)}function Yie(e){return T9(e,Ii({}))}function T9(e,t){for(const n in e)t[n]=e[n];return t}function A$e(e,t){return T$e(t,mn(e))}function tE(e,t){return e?t?(n,r)=>e(n,r)||mn(t(n))-mn(t(r)):(n,r)=>e(n,r)||mn(n)-mn(r):null}function D$e(e){return e&&e.constructor===nE}function nE(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:nE,insert(a){const u=Lt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=cr(a)?r:t,l=Lt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:il(l)};return cr(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return cr(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[mn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[mn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[mn(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=mn(m),l[g]?l[g]=1:a.add.push(Ii(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[mn(m)]<0&&a.rem.push(m);function y(v,b,_){_?v[b]=_(v):a.encode=b,o||(c[mn(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[mn(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[mn(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[mn(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const SF="_:mod:_";function A9(){Object.defineProperty(this,SF,{writable:!0,value:{}})}A9.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[SF];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=at(n)?1+n.length:-1),i},modified(e,t){const n=this[SF];if(arguments.length){if(at(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[SF]={},this}};let wzt=0;const _zt="pulse",Ezt=new A9,Szt=1,Czt=2;function as(e,t,n,r){this.id=++wzt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function ixe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}as.prototype={targets(){return this._targets||(this._targets=S9(HN))},set(e){return this.value!==e?(this.value=e,1):0},skip:ixe(Szt),modified:ixe(Czt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new A9,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof as?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===_zt)Lt(a).forEach(f=>{f instanceof as?f!==this&&(f.targets().add(this),s.push(f)):rt("Pulse parameters must be operator instances.")}),this.source=a;else if(at(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||Ezt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Tzt(e,t,n,r){let i=1,s;return e instanceof as?s=e:e&&e.prototype instanceof as?s=new e:cr(e)?s=new as(null,e):(i=0,s=new as(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function Azt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let Dzt=0;function D9(e,t,n){this.id=++Dzt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function m1(e,t,n){return new D9(e,t,n)}D9.prototype={_filter:qd,_apply:rl,targets(){return this._targets||(this._targets=S9(HN))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=m1(e);return this.targets().add(t),t},apply(e){const t=m1(null,e);return this.targets().add(t),t},merge(){const e=m1();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=m1();return this.targets().add(m1(null,null,Mie(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(m1(null,null,()=>n=!0)),t.targets().add(m1(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=qd,this._targets=null}};function Izt(e,t,n,r){const i=this,s=m1(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Lt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function kzt(e,t){const n=this.locale();return S$e(e,t,n.timeParse,n.utcParse)}function Rzt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Nzt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:E$e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Pzt(e,t,n){const r=this,i=r._pending||Ozt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(qd).insert(s.data||[])),i.done(),s}function Ozt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Fzt={skip:!0};function Mzt(e,t,n,r,i){return(e instanceof as?Lzt:$zt)(this,e,t,n,r,i),this}function $zt(e,t,n,r,i,s){const o=lr({},s,Fzt);let a,u;cr(n)||(n=il(n)),r===void 0?a=l=>e.touch(n(l)):cr(r)?(u=new as(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;D$e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function Lzt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new as(null,Bzt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Bzt(e,t){return t=cr(t)?t:il(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function jzt(e){e.rank=++this._rank}function Uzt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&rt("Cycle detected in dataflow graph.")}const z5={},nm=1,C1=2,tg=4,zzt=nm|C1,sxe=nm|tg,s2=nm|C1|tg,oxe=8,FD=16,axe=32,uxe=64;function yv(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function jH(e,t){const n=[];return S1(e,t,r=>n.push(r)),n}function lxe(e,t){const n={};return e.visit(t,r=>{n[mn(r)]=1}),r=>n[mn(r)]?null:r}function H4(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}yv.prototype={StopPropagation:z5,ADD:nm,REM:C1,MOD:tg,ADD_REM:zzt,ADD_MOD:sxe,ALL:s2,REFLOW:oxe,SOURCE:FD,NO_SOURCE:axe,NO_FIELDS:uxe,fork(e){return new yv(this.dataflow).init(this,e)},clone(){const e=this.fork(s2);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(s2|FD)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new yv(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&uxe)&&(n.fields=e.fields),t&nm?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&C1?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&tg?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&axe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||s2;return t&nm&&this.add.length||t&C1&&this.rem.length||t&tg&&this.mod.length},reflow(e){if(e)return this.fork(s2).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(tg,lxe(this,nm))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return at(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?at(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&nm&&(n.addF=H4(n.addF,t)),e&C1&&(n.remF=H4(n.remF,t)),e&tg&&(n.modF=H4(n.modF,t)),e&FD&&(n.srcF=H4(n.srcF,t)),n},materialize(e){e=e||s2;const t=this;return e&nm&&t.addF&&(t.add=jH(t.add,t.addF),t.addF=null),e&C1&&t.remF&&(t.rem=jH(t.rem,t.remF),t.remF=null),e&tg&&t.modF&&(t.mod=jH(t.mod,t.modF),t.modF=null),e&FD&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&FD)return S1(n.source,n.srcF,r),n;e&nm&&S1(n.add,n.addF,r),e&C1&&S1(n.rem,n.remF,r),e&tg&&S1(n.mod,n.modF,r);const i=n.source;if(e&oxe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?S1(i,lxe(n,sxe),r):S1(i,n.srcF,r))}return n}};function Kie(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Ot(Kie,yv,{fork(e){const t=new yv(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?at(e)?e.some(r=>n[r]):n[e]:0},filter(){rt("MultiPulse does not support filtering.")},materialize(){rt("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Vzt(e,t,n){const r=this,i=[];if(r._pulse)return I$e(r);if(r._pending&&await r._pending,t&&await EF(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new yv(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=S9(HN);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=z5),u!==z5&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await EF(r,c[f].callback)}return n&&await EF(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Hzt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function qzt(e,t,n){return this._pulse?I$e(this):(this.evaluate(e,t,n),this)}function Wzt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function I$e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Gzt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Yzt(e,t){const n=e.source,r=this._clock;return n&&at(n)?new Kie(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Kzt(this._pulse,n&&n.pulse)}function Kzt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==z5&&(e.source=t.source),e)}const Xie={skip:!1,force:!1};function Xzt(e,t){const n=t||Xie;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Qzt(e,t,n){const r=n||Xie;return(e.set(t)||r.force)&&this.touch(e,r),this}function Jzt(e,t,n){this.touch(e,n||Xie);const r=new yv(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Zzt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),k$e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,eVt(t,0,e)):r=n,r}}}function k$e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function eVt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,k$e(e,r,t,n)}function FS(){this.logger(Rie()),this.logLevel(Iie),this._clock=0,this._rank=0,this._locale=Hie();try{this._loader=E9()}catch{}this._touched=S9(HN),this._input={},this._pulse=null,this._heap=Zzt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function MD(e){return function(){return this._log[e].apply(this,arguments)}}FS.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:MD("error"),warn:MD("warn"),info:MD("info"),debug:MD("debug"),logLevel:MD("level"),cleanThreshold:1e4,add:Tzt,connect:Azt,rank:jzt,rerank:Uzt,pulse:Jzt,touch:Xzt,update:Qzt,changeset:nE,ingest:Rzt,parse:kzt,preload:Pzt,request:Nzt,events:Izt,on:Mzt,evaluate:Vzt,run:qzt,runAsync:Hzt,runAfter:Wzt,_enqueue:Gzt,_getPulse:Yzt};function Ye(e,t){as.call(this,e,null,t)}Ot(Ye,as,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const zC={};function R$e(e){const t=N$e(e);return t&&t.Definition||null}function N$e(e){return e=e&&e.toLowerCase(),vn(zC,e)?zC[e]:null}function*P$e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Qie(e,t,n){const r=Float64Array.from(P$e(e,n));return r.sort(Fg),t.map(i=>H3e(r,i))}function Jie(e,t){return Qie(e,[.25,.5,.75],t)}function Zie(e,t){const n=e.length,r=aEt(e,t),i=Jie(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function O$e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Gd=Math.random;function tVt(e){Gd=e}function F$e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(P$e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Gd()*s)];c[l]=a/s}return c.sort(Fg),[JG(c,n/2),JG(c,1-n/2)]}function M$e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?nVt(s,t+t/4):s}function nVt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function rVt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function iVt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Gd())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const $$e=Math.sqrt(2*Math.PI),sVt=Math.SQRT2;let $D=NaN;function I9(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if($D===$D)n=$D,$D=NaN;else{do n=Gd()*2-1,r=Gd()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,$D=r*s}return e+n*t}function ese(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*$$e)}function k9(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function R9(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*sVt*oVt(2*e-1)}function oVt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function tse(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>I9(n,r),pdf:s=>ese(s,n,r),cdf:s=>k9(s,n,r),icdf:s=>R9(s,n,r)};return i.mean(e).stdev(t)}function nse(e,t){const n=tse();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Zie(e)),i):t},sample(){return e[~~(Gd()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function rse(e,t){return e=e||0,t=t??1,Math.exp(e+I9()*t)}function ise(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*$$e*e)}function sse(e,t,n){return k9(Math.log(e),t,n)}function ose(e,t,n){return Math.exp(R9(e,t,n))}function L$e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>rse(n,r),pdf:s=>ise(s,n,r),cdf:s=>sse(s,n,r),icdf:s=>ose(s,n,r)};return i.mean(e).stdev(t)}function B$e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Gd();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function ase(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Gd()}function use(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function lse(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function cse(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function j$e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>ase(n,r),pdf:s=>use(s,n,r),cdf:s=>lse(s,n,r),icdf:s=>cse(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function fse(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function WN(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function N9(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function GN(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function vA(e,t,n,r,i){let s=0,o=0;return GN(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function dse(e,t,n){let r=0,i=0,s=0,o=0,a=0;GN(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=WN(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:vA(e,t,n,i,l)}}function U$e(e,t,n){let r=0,i=0,s=0,o=0,a=0;GN(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=WN(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:vA(e,t,n,i,l)}}function z$e(e,t,n){const[r,i,s,o]=N9(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;GN(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=WN(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:vA(e,t,n,o,y)}}function V$e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;GN(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=WN(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:vA(e,t,n,a,c)}}function hse(e,t,n){const[r,i,s,o]=N9(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,_=(f*y-d*l)/v,w=-b*u,S=T=>(T=T-s,b*T*T+_*T+w+o);return{coef:[w-_*s+b*s*s+o,_-2*b*s,b],predict:S,rSquared:vA(e,t,n,o,S)}}function H$e(e,t,n,r){if(r===0)return fse(e,t,n);if(r===1)return dse(e,t,n);if(r===2)return hse(e,t,n);const[i,s,o,a]=N9(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=uVt(c),v=b=>{b-=o;let _=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)_+=y[d]*Math.pow(b,d);return _};return{coef:aVt(f,y,-o,a),predict:v,rSquared:vA(e,t,n,a,v)}}function aVt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function uVt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const cxe=2,fxe=1e-12;function q$e(e,t,n,r){const[i,s,o,a]=N9(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=cxe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],_=y-i[v]>i[b]-y?v:b;let w=0,S=0,T=0,A=0,k=0;const I=1/Math.abs(i[_]-y||1);for(let O=v;O<=b;++O){const $=i[O],V=s[O],j=lVt(Math.abs(y-$)*I)*d[O],G=$*j;w+=j,S+=G,T+=V*j,A+=V*G,k+=$*G}const[R,F]=WN(S/w,T/w,A/w,k/w);c[g]=R+F*y,f[g]=Math.abs(s[g]-c[g]),cVt(i,g+1,p)}if(h===cxe)break;const m=q3e(f);if(Math.abs(m)<fxe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?fxe:(v=1-y*y)*v}return fVt(i,c,o,a)}function lVt(e){return(e=1-e*e*e)*e*e}function cVt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function fVt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const dVt=.5*Math.PI/180;function P9(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=hVt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&pVt(f,m,d,h,p)>dVt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function hVt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function pVt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function mVt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function oX(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:mVt(e)}function W$e(e,t,n){return n||e+(t?"_"+t:"")}const UH=()=>{},gVt={init:UH,add:UH,rem:UH,idx:0},d3={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},YN=Object.keys(d3).filter(e=>e!=="__count__");function yVt(e,t){return(n,r)=>lr({name:e,aggregate_param:r,out:n||e},gVt,t)}[...YN,"__count__"].forEach(e=>{d3[e]=yVt(e,d3[e])});function G$e(e,t,n){return d3[e](n,t)}function Y$e(e,t){return e.idx-t.idx}function vVt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=d3[i]())})};return e.forEach(n),Object.values(t).sort(Y$e)}function bVt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function xVt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function wVt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function _Vt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function K$e(e,t){const n=t||rl,r=vVt(e),i=e.slice().sort(Y$e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=bVt,s.prototype.add=xVt,s.prototype.rem=wVt,s.prototype.set=_Vt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function pse(e){this._key=e?Hd(e):mn,this.reset()}const vu=pse.prototype;vu.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};vu.add=function(e){this._add.push(e)};vu.rem=function(e){this._rem.push(e)};vu.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};vu.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",vn(n,s)||(n[s]=1,++i);return i};vu.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=$5e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};vu.argmin=function(e){return this.extent(e)[0]||{}};vu.argmax=function(e){return this.extent(e)[1]||{}};vu.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};vu.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};vu.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Jie(this.values(),e),this._get=e),this._q};vu.q1=function(e){return this.quartile(e)[0]};vu.q2=function(e){return this.quartile(e)[1]};vu.q3=function(e){return this.quartile(e)[2]};vu.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=F$e(this.values(),1e3,.05,e),this._get=e),this._ci};vu.ci0=function(e){return this.ci(e)[0]};vu.ci1=function(e){return this.ci(e)[1]};function Qv(e){Ye.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Qv.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:YN},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ot(Qv,Ye,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=Lt(Ku(v)),_=b.length;let w=0,S;for(;w<_;++w)r[S=b[w]]||(r[S]=1,t.push(S))}this._dims=Lt(e.groupby),this._dnames=this._dims.map(v=>{const b=po(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:oX(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&rt("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&rt("Null aggregate field specified."),m=po(f),g=W$e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(G$e(d,h,g))}return this._measures=this._measures.map(v=>K$e(v,v.field)),Object.create(null)},cellkey:oX(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new pse),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?A$e(t.tuple,s):Ii(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const EVt=1e-14;function mse(e){Ye.call(this,null,e)}mse.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ot(mse,Ye,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Ku(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=O$e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=Wu(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(EVt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=nf(u,Ku(t),e.name||"bin_"+po(t))}});function X$e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?V5e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function gse(e){Ye.call(this,[],e)}gse.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ot(gse,Ye,{transform(e,t){const n=t.fork(t.ALL),r=X$e(mn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(tE(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function Q$e(e){as.call(this,null,SVt,e)}Ot(Q$e,as);function SVt(e){return this.value&&!e.modified()?this.value:Fie(e.fields,e.orders)}function yse(e){Ye.call(this,null,e)}yse.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function CVt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ot(yse,Ye,{transform(e,t){const n=f=>d=>{for(var h=CVt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Ii({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function vse(e){Ye.call(this,null,e)}vse.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ot(vse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=TVt(a,i,s,e.filter||qd)):n.mod=a,n.source=this.value,n.modifies(r)}});function TVt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Ii(s)),s={},s[t]=l);return i}const dxe={kde:nse,mixture:B$e,normal:tse,lognormal:L$e,uniform:j$e},AVt="distributions",hxe="function",DVt="field";function J$e(e,t){const n=e[hxe];vn(dxe,n)||rt("Unknown distribution function: "+n);const r=dxe[n]();for(const i in e)i===DVt?r.data((e.from||t()).map(e[i])):i===AVt?r[i](e[i].map(s=>J$e(s,t))):typeof r[i]===hxe&&r[i](e[i]);return r}function bse(e){Ye.call(this,null,e)}const Z$e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],IVt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Z$e},{name:"weights",type:"number",array:!0}]};bse.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Z$e.concat(IVt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ot(bse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=J$e(e.distribution,kVt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&rt("Invalid density method: "+o),!e.extent&&!r.data&&rt("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||e0(r.data()),l=P9(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Ii(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function kVt(e){return()=>e.materialize(e.SOURCE).source}function eLe(e,t){return e?e.map((n,r)=>t[r]||po(n)):null}function xse(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const tLe="bin";function wse(e){Ye.call(this,null,e)}wse.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:tLe}]};const RVt=(e,t)=>qN(e0(e,t))/30;Ot(wse,Ye,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=xse(t.source,e.groupby,rl),i=e.smooth||!1,s=e.field,o=e.step||RVt(n,s),a=tE((p,m)=>s(p)-s(m)),u=e.as||tLe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of M$e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function nLe(e){as.call(this,null,NVt,e),this.modified(!0)}Ot(nLe,as);function NVt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:nf(n=>t(n,e),Ku(t),po(t))}function _se(e){Ye.call(this,[void 0,void 0],e)}_se.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ot(_se,Ye,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Wu(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=po(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Ese(e,t){as.call(this,e),this.parent=t,this.count=0}Ot(Ese,as,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function O9(e){Ye.call(this,{},e),this._keys=mA();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Ot(O9,Ye,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=vn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Ese(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=mn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(mn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=mn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(mn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=mn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function rLe(e){as.call(this,null,PVt,e)}Ot(rLe,as);function PVt(e){return this.value&&!e.modified()?this.value:at(e.name)?Lt(e.name).map(t=>Hd(t)):Hd(e.name,e.as)}function Sse(e){Ye.call(this,mA(),e)}Sse.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ot(Sse,Ye,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=mn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(mn(f),1)});function c(f){const d=mn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Cse(e){Ye.call(this,[],e)}Cse.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ot(Cse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=eLe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=Yie(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Tse(e){Ye.call(this,[],e)}Tse.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ot(Tse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(po),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=Yie(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Ase(e){Ye.call(this,null,e)}Ase.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ot(Ase,Ye,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function iLe(e){Ye.call(this,[],e)}Ot(iLe,Ye,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Ii(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const q4={value:"value",median:q3e,mean:hEt,min:QG,max:Mg},OVt=[];function Dse(e){Ye.call(this,[],e)}Dse.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function FVt(e){var t=e.method||q4.value,n;if(q4[t]==null)rt("Unrecognized imputation method: "+t);else return t===q4.value?(n=e.value!==void 0?e.value:0,()=>n):q4[t]}function MVt(e){const t=e.field;return n=>n?t(n):NaN}Ot(Dse,Ye,{transform(e,t){var n=t.fork(t.ALL),r=FVt(e),i=MVt(e),s=po(e.field),o=po(e.key),a=(e.groupby||[]).map(po),u=$Vt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,_,w;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],w={_impute:!0},y=0,_=p.length;y<_;++y)w[a[y]]=p[y];w[o]=m,w[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Ii(w))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function $Vt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):OVt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Ise(e){Qv.call(this,e)}Ise.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:YN},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ot(Ise,Qv,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{lr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function kse(e){Ye.call(this,null,e)}kse.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ot(kse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=xse(r,e.groupby,e.field),s=(e.groupby||[]).map(po),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&rt("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=e0(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=nse(h,o)[a],m=e.counts?h.length:1,g=c||e0(h);P9(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Ii(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function sLe(e){as.call(this,null,LVt,e)}Ot(sLe,as);function LVt(e){return this.value&&!e.modified()?this.value:$ie(e.fields,e.flat)}function oLe(e){Ye.call(this,[],e),this._pending=null}Ot(oLe,Ye,{transform(e,t){const n=t.dataflow;return this._pending?zH(this,t,this._pending):BVt(e)?t.StopPropagation:e.values?zH(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Lt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>zH(this,t,Lt(r.data)))}});function BVt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function zH(e,t,n){n.forEach(Ii);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Rse(e){Ye.call(this,{},e)}Rse.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ot(Rse,Ye,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&rt('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&rt('The "as" parameter has too few output field names.'),c=c||i.map(po),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||rt("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function aLe(e){as.call(this,null,jVt,e)}Ot(aLe,as);function jVt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function uLe(e){as.call(this,null,UVt,e)}Ot(uLe,as);function UVt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function lLe(e){Ye.call(this,null,e)}Ot(lLe,Ye,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Nse(e){Qv.call(this,e)}Nse.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:YN,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ot(Nse,Qv,{_transform:Qv.prototype.transform,transform(e,t){return this._transform(zVt(e,t),t)}});function zVt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Ku(n).concat(Ku(r)),o=HVt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>VVt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function VVt(e,t,n,r){return nf(i=>t(i)===e?n(i):NaN,r,e+"")}function HVt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(w9),t?i.slice(0,t):i}function cLe(e){O9.call(this,e)}Ot(cLe,O9,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(mn(s),n,t,s);return(e.modified("field")||r&&t.modified(Ku(r)))&&rt("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Ii(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Pse(e){Ye.call(this,null,e)}Pse.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ot(Pse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=eLe(e.fields,e.as||[]),s=r?(a,u)=>qVt(a,u,r,i):T9;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=mn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Ii({}));o[mn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[mn(a)]))}),n}});function qVt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function fLe(e){Ye.call(this,null,e)}Ot(fLe,Ye,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Ose(e){Ye.call(this,null,e)}Ose.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const WVt=1e-14;Ot(Ose,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=xse(i,e.groupby,e.field),o=(e.groupby||[]).map(po),a=[],u=e.step||.01,l=e.probs||Ac(u/2,1-WVt,u),c=l.length;return s.forEach(f=>{const d=Qie(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Ii(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function dLe(e){Ye.call(this,null,e)}Ot(dLe,Ye,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=mn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Yie(i);r[mn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[mn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Fse(e){Ye.call(this,[],e),this.count=0}Fse.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ot(Fse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[mn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Gd()),d<o.length&&d>=u&&(f=o[d],s[mn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=mn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[mn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[mn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[mn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[mn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[mn(c)])),this.count=a,this.value=n.source=o,n}});function Mse(e){Ye.call(this,null,e)}Mse.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ot(Mse,Ye,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ac(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Ii(s)}),n.add=t.add.concat(this.value),n}});function hLe(e){Ye.call(this,null,e),this.modified(!0)}Ot(hLe,Ye,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function $se(e){Ye.call(this,null,e)}const pLe=["unit0","unit1"];$se.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Uie,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:pLe}]};Ot($se,Ye,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?yA:gA)(s.unit).offset,a=e.as||pLe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Ku(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:f$e({extent:e.extent||e0(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=zie(r),o=this.value||{},a=(n?n$e:t$e)(s,i);return a.unit=Xr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function mLe(e){Ye.call(this,mA(),e)}Ot(mLe,Ye,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function gLe(e){Ye.call(this,null,e)}Ot(gLe,Ye,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(tE(e.sort)):t.source).map(e.field))}});function GVt(e,t,n,r){const i=h3[e](t,n);return{init:i.init||O1,update:function(s,o){o[r]=i.next(s)}}}const h3={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=h3.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||rt("ntile num must be greater than zero.");const n=h3.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||rt("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=YVt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function YVt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const KVt=Object.keys(h3);function yLe(e){const t=Lt(e.ops),n=Lt(e.fields),r=Lt(e.params),i=Lt(e.aggregate_params),s=Lt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Lt(Ku(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=po(g),_=W$e(p,b,s[m]);if(h(g),o.push(_),vn(h3,p))a.push(GVt(p,g,y,_));else{if(g==null&&p!=="count"&&rt("Null aggregate field specified."),p==="count"){c.push(_);return}d=!1;let w=l[b];w||(w=l[b]=[],w.field=g,f.push(w)),w.push(G$e(p,v,_))}}),(c.length||f.length)&&(this.cell=XVt(f,c,d)),this.inputs=Object.keys(u)}const vLe=yLe.prototype;vLe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};vLe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function XVt(e,t,n){e=e.map(u=>K$e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new pse;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Lse(e){Ye.call(this,{},e),this._mlen=0,this._mods=[]}Lse.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:KVt.concat(YN)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ot(Lse,Ye,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=tE(e.sort),i=oX(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new yLe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)QVt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=X$e(mn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function QVt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?kb(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||il(-1)};t.init();for(let f=0;f<u;++f)JVt(c,o,f,u),s&&ZVt(c,l),t.update(c,a[f])}function JVt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function ZVt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const eHt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Qv,bin:mse,collect:gse,compare:Q$e,countpattern:yse,cross:vse,density:bse,dotbin:wse,expression:nLe,extent:_se,facet:O9,field:rLe,filter:Sse,flatten:Cse,fold:Tse,formula:Ase,generate:iLe,impute:Dse,joinaggregate:Ise,kde:kse,key:sLe,load:oLe,lookup:Rse,multiextent:aLe,multivalues:uLe,params:lLe,pivot:Nse,prefacet:cLe,project:Pse,proxy:fLe,quantile:Ose,relay:dLe,sample:Fse,sequence:Mse,sieve:hLe,subflow:Ese,timeunit:$se,tupleindex:mLe,values:gLe,window:Lse},Symbol.toStringTag,{value:"Module"}));function vv(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const tHt=()=>typeof Image<"u"?Image:null;function Bse(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const nHt="identity",VC="linear",hy="log",KN="pow",XN="sqrt",F9="symlog",o_="time",a_="utc",Fm="sequential",bA="diverging",HC="quantile",M9="quantize",$9="threshold",jse="ordinal",aX="point",bLe="band",Use="bin-ordinal",ba="continuous",QN="discrete",JN="discretizing",sh="interpolating",zse="temporal";function rHt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function iHt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Vse(){const e=Ob().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Bse(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Ac(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,Pv(h,m)-1),v=m===g?y:Pv(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Vse().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function xLe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return xLe(t())},e}function sHt(){return xLe(Vse().paddingInner(1))}var oHt=Array.prototype.map;function aHt(e){return oHt.call(e,Wu)}const uHt=Array.prototype.slice;function wLe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Pv(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=aHt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=uHt.call(r),n):t.slice()},n.tickFormat=function(r,i){return ZPe(e[0],Xr(e),r??10,i)},n.copy=function(){return wLe().domain(n.domain()).range(n.range())},n}const V5=new Map,_Le=Symbol("vega_scale");function ELe(e){return e[_Le]=!0,e}function lHt(e){return e&&e[_Le]===!0}function cHt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?rHt(s):s.invertExtent?iHt(s):void 0),s.type=e,ELe(s)};return r.metadata=yp(Lt(n)),r}function xi(e,t,n){return arguments.length>1?(V5.set(e,cHt(e,t,n)),this):SLe(e)?V5.get(e):void 0}xi(nHt,eOe);xi(VC,ja,ba);xi(hy,nOe,[ba,hy]);xi(KN,une,ba);xi(XN,WIt,ba);xi(F9,rOe,ba);xi(o_,dne,[ba,zse]);xi(a_,aRt,[ba,zse]);xi(Fm,hne,[ba,sh]);xi(`${Fm}-${VC}`,hne,[ba,sh]);xi(`${Fm}-${hy}`,gOe,[ba,sh,hy]);xi(`${Fm}-${KN}`,pne,[ba,sh]);xi(`${Fm}-${XN}`,uRt,[ba,sh]);xi(`${Fm}-${F9}`,yOe,[ba,sh]);xi(`${bA}-${VC}`,vOe,[ba,sh]);xi(`${bA}-${hy}`,bOe,[ba,sh,hy]);xi(`${bA}-${KN}`,mne,[ba,sh]);xi(`${bA}-${XN}`,lRt,[ba,sh]);xi(`${bA}-${F9}`,xOe,[ba,sh]);xi(HC,iOe,[JN,HC]);xi(M9,sOe,JN);xi($9,oOe,JN);xi(Use,wLe,[QN,JN]);xi(jse,Ob,QN);xi(bLe,Vse,QN);xi(aX,sHt,QN);function SLe(e){return V5.has(e)}function rE(e,t){const n=V5.get(e);return n&&n.metadata[t]}function Hse(e){return rE(e,ba)}function qC(e){return rE(e,QN)}function uX(e){return rE(e,JN)}function CLe(e){return rE(e,hy)}function fHt(e){return rE(e,zse)}function TLe(e){return rE(e,sh)}function ALe(e){return rE(e,HC)}const dHt=["clamp","base","constant","exponent"];function DLe(e,t){const n=t[0],r=Xr(t)-n;return function(i){return e(n+i*r)}}function L9(e,t,n){return Ute(qse(t||"rgb",n),e)}function ILe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function kLe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?il(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=xi(s)().domain([t,n]).range([0,1]),dHt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function qse(e,t){const n=VSt[hHt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function hHt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const pHt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},mHt={accent:fRt,category10:cRt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:dRt,observable10:hRt,paired:pRt,pastel1:mRt,pastel2:gRt,set1:yRt,set2:vRt,set3:bRt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function RLe(e){if(at(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function NLe(e,t){for(const n in e)Wse(n,t(e[n]))}const pxe={};NLe(mHt,RLe);NLe(pHt,e=>L9(RLe(e)));function Wse(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(pxe[e]=t,this):pxe[e]}const CF="symbol",gHt="discrete",yHt="gradient",vHt=e=>at(e)?e.map(t=>String(t)):String(e),bHt=(e,t)=>e[1]-t[1],xHt=(e,t)=>t[1]-e[1];function Gse(e,t,n){let r;return fi(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(qN(e.domain())/n||1)+1))),jt(t)&&(r=t.step,t=t.interval),Bt(t)&&(t=e.type===o_?gA(t):e.type==a_?yA(t):rt("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function PLe(e,t,n){let r=e.range(),i=r[0],s=Xr(r),o=bHt;if(i>s&&(r=s,s=i,i=r,o=xHt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Xr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Yse(e,t){return e.bins?PLe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function OLe(e,t,n,r,i,s){const o=t.type;let a=vHt;if(o===o_||i===o_)a=e.timeFormat(r);else if(o===a_||i===a_)a=e.utcFormat(r);else if(CLe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=FLe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function FLe(e,t,n){const r=Yse(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const lX={[HC]:"quantiles",[M9]:"thresholds",[$9]:"domain"},MLe={[HC]:"quantiles",[M9]:"domain"};function $Le(e,t){return e.bins?EHt(e.bins):e.type===hy?FLe(e,t,!0):lX[e.type]?_Ht(e[lX[e.type]]()):Yse(e,t)}function wHt(e,t,n){const r=t[MLe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function _Ht(e){const t=[-1/0].concat(e);return t.max=1/0,t}function EHt(e){const t=e.slice(0,-1);return t.max=Xr(e),t}const SHt=e=>lX[e.type]||e.bins;function LLe(e,t,n,r,i,s,o){const a=MLe[t.type]&&s!==o_&&s!==a_?wHt(e,t,i):OLe(e,t,n,i,s,o);return r===CF&&SHt(t)?CHt(a):r===gHt?THt(a):AHt(a)}const CHt=e=>(t,n,r)=>{const i=mxe(r[n+1],mxe(r.max,1/0)),s=gxe(t,e),o=gxe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},mxe=(e,t)=>e??t,THt=e=>(t,n)=>n?e(t):null,AHt=e=>t=>e(t),gxe=(e,t)=>Number.isFinite(e)?t(e):null;function DHt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Xr(t),s=i-r;if(e.type===$9){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function IHt(e,t,n,r){const i=r||t.type;return Bt(n)&&fHt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===o_?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===a_?e.utcFormat("%A, %d %B %Y, %X UTC"):LLe(e,t,5,null,n,r,!0)}function BLe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=IHt(e,t,n.format,n.formatType);if(uX(t.type)){const s=$Le(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(qC(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Xr(s))}`}}let jLe=0;function kHt(){jLe=0}const H5="p_";function Kse(e){return e&&e.gradient}function ULe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?H5:"";return i||(i=e.id="gradient_"+jLe++,r==="radial"?(e.x1=qp(e.x1,.5),e.y1=qp(e.y1,.5),e.r1=qp(e.r1,0),e.x2=qp(e.x2,.5),e.y2=qp(e.y2,.5),e.r2=qp(e.r2,.5),s=H5):(e.x1=qp(e.x1,0),e.y1=qp(e.y1,0),e.x2=qp(e.x2,1),e.y2=qp(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function qp(e,t){return e??t}function zLe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const yxe={basis:{curve:PRt},"basis-closed":{curve:ORt},"basis-open":{curve:FRt},bundle:{curve:MRt,tension:"beta",value:.85},cardinal:{curve:$Rt,tension:"tension",value:0},"cardinal-open":{curve:BRt,tension:"tension",value:0},"cardinal-closed":{curve:LRt,tension:"tension",value:0},"catmull-rom":{curve:jRt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:URt,tension:"alpha",value:.5},"catmull-rom-open":{curve:zRt,tension:"alpha",value:.5},linear:{curve:gne},"linear-closed":{curve:VRt},monotone:{horizontal:qRt,vertical:HRt},natural:{curve:WRt},step:{curve:GRt},"step-after":{curve:KRt},"step-before":{curve:YRt}};function Xse(e,t,n){var r=vn(yxe,e)&&yxe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const RHt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},NHt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,PHt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,OHt=/^((\s+,?\s*)|(,\s*))/,FHt=/^[01]/;function WC(e){const t=[];return(e.match(NHt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=RHt[s],a=MHt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function MHt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?FHt:PHt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(OHt);u!==null&&(i+=u[0].length)}return r}const Jv=Math.PI/180,$Ht=1e-14,Zx=Math.PI/2,vm=Math.PI*2,o2=Math.sqrt(3)/2;var VH={},HH={},VLe=[].join;function LHt(e,t,n,r,i,s,o,a,u){const l=VLe.call(arguments);if(VH[l])return VH[l];const c=o*Jv,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,_=g*a+y*u,w=v*a+b*u,S=g*e+y*t,T=v*e+b*t;let k=1/((S-_)*(S-_)+(T-w)*(T-w))-.25;k<0&&(k=0);let I=Math.sqrt(k);s==i&&(I=-I);const R=.5*(_+S)-I*(T-w),F=.5*(w+T)+I*(S-_),O=Math.atan2(w-F,_-R);let V=Math.atan2(T-F,S-R)-O;V<0&&s===1?V+=vm:V>0&&s===0&&(V-=vm);const j=Math.ceil(Math.abs(V/(Zx+.001))),G=[];for(let Y=0;Y<j;++Y){const J=O+Y*V/j,L=O+(Y+1)*V/j;G[Y]=[R,F,J,L,n,r,f,d]}return VH[l]=G}function BHt(e){const t=VLe.call(e);if(HH[t])return HH[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),_=8/3*b*b/Math.sin(v),w=n+p-_*m,S=r+m+_*p,T=n+g,A=r+y,k=T+_*y,I=A-_*g;return HH[t]=[c*w+f*S,d*w+h*S,c*k+f*I,d*k+h*I,c*T+f*A,d*T+h*A]}const gd=["l",0,0,0,0,0,0,0];function jHt(e,t,n){const r=gd[0]=e[0];if(r==="a"||r==="A")gd[1]=t*e[1],gd[2]=n*e[2],gd[3]=e[3],gd[4]=e[4],gd[5]=e[5],gd[6]=t*e[6],gd[7]=n*e[7];else if(r==="h"||r==="H")gd[1]=t*e[1];else if(r==="v"||r==="V")gd[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)gd[i]=(i%2==1?t:n)*e[i];return gd}function p3(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=jHt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":vxe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":vxe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function vxe(e,t,n,r){const i=LHt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=BHt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const bxe=.5773502691896257,xxe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,vm)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=o2*n,i=r-n*bxe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=o2*n,i=r-n*bxe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=o2*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=o2*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=o2*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=o2*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function HLe(e){return vn(xxe,e)?xxe[e]:UHt(e)}var qH={};function UHt(e){if(!vn(qH,e)){const t=WC(e);qH[e]={draw:function(n,r){p3(n,t,0,0,Math.sqrt(r)/2)}}}return qH[e]}const s1=.448084975506;function zHt(e){return e.x}function VHt(e){return e.y}function HHt(e){return e.width}function qHt(e){return e.height}function G0(e){return typeof e=="function"?e:()=>+e}function W4(e,t,n){return Math.max(t,Math.min(e,n))}function qLe(){var e=zHt,t=VHt,n=HHt,r=qHt,i=G0(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=W4(+i.call(this,c),0,v),_=W4(+s.call(this,c),0,v),w=W4(+o.call(this,c),0,v),S=W4(+a.call(this,c),0,v);if(u||(u=h=xB()),b<=0&&_<=0&&w<=0&&S<=0)u.rect(p,m,g,y);else{var T=p+g,A=m+y;u.moveTo(p+b,m),u.lineTo(T-_,m),u.bezierCurveTo(T-s1*_,m,T,m+s1*_,T,m+_),u.lineTo(T,A-S),u.bezierCurveTo(T,A-s1*S,T-s1*S,A,T-S,A),u.lineTo(p+w,A),u.bezierCurveTo(p+s1*w,A,p,A-s1*w,p,A-w),u.lineTo(p,m+b),u.bezierCurveTo(p,m+s1*b,p+s1*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=G0(c),l):e},l.y=function(c){return arguments.length?(t=G0(c),l):t},l.width=function(c){return arguments.length?(n=G0(c),l):n},l.height=function(c){return arguments.length?(r=G0(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=G0(c),s=f!=null?G0(f):i,a=d!=null?G0(d):i,o=h!=null?G0(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function WLe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,_=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,_-Math.PI,_),i.lineTo(o+v,a+b),i.arc(o,a,u,_,_+Math.PI)}else i.arc(f,d,p,0,vm);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=xB()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function ZN(e,t){return e??t}const eP=e=>e.x||0,tP=e=>e.y||0,WHt=e=>e.width||0,GHt=e=>e.height||0,YHt=e=>(e.x||0)+(e.width||0),KHt=e=>(e.y||0)+(e.height||0),XHt=e=>e.startAngle||0,QHt=e=>e.endAngle||0,JHt=e=>e.padAngle||0,ZHt=e=>e.innerRadius||0,eqt=e=>e.outerRadius||0,tqt=e=>e.cornerRadius||0,nqt=e=>ZN(e.cornerRadiusTopLeft,e.cornerRadius)||0,rqt=e=>ZN(e.cornerRadiusTopRight,e.cornerRadius)||0,iqt=e=>ZN(e.cornerRadiusBottomRight,e.cornerRadius)||0,sqt=e=>ZN(e.cornerRadiusBottomLeft,e.cornerRadius)||0,oqt=e=>ZN(e.size,64),aqt=e=>e.size||1,B9=e=>e.defined!==!1,uqt=e=>HLe(e.shape||"circle"),lqt=BY().startAngle(XHt).endAngle(QHt).padAngle(JHt).innerRadius(ZHt).outerRadius(eqt).cornerRadius(tqt),cqt=SOe().x(eP).y1(tP).y0(KHt).defined(B9),fqt=SOe().y(tP).x1(eP).x0(YHt).defined(B9),dqt=MB().x(eP).y(tP).defined(B9),hqt=qLe().x(eP).y(tP).width(WHt).height(GHt).cornerRadius(nqt,rqt,iqt,sqt),pqt=NRt().type(uqt).size(oqt),mqt=WLe().x(eP).y(tP).defined(B9).size(aqt);function Qse(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function gqt(e,t){return lqt.context(e)(t)}function yqt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?fqt:cqt).curve(Xse(r,n.orient,n.tension)).context(e)(t)}function vqt(e,t){const n=t[0],r=n.interpolate||"linear";return dqt.curve(Xse(r,n.orient,n.tension)).context(e)(t)}function xA(e,t,n,r){return hqt.context(e)(t,n,r)}function bqt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function xqt(e,t){return pqt.context(e)(t)}function wqt(e,t){return mqt.context(e)(t)}var GLe=1;function YLe(){GLe=1}function Jse(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+GLe++),o=i.clipping[s]||(i.clipping[s]={id:s});return cr(r)?o.path=r(null):Qse(n)?o.path=xA(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Go(e){this.clear(),e&&this.union(e)}Go.prototype={clone(){return new Go(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function j9(e){this.mark=e,this.bounds=this.bounds||new Go}function U9(e){j9.call(this,e),this.items=this.items||[]}Ot(U9,j9);class KLe{constructor(t){this._pending=0,this._loader=t||E9()}pending(){return this._pending}sanitizeURL(t){const n=this;return wxe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(LD(n),r)).catch(()=>(LD(n),null))}loadImage(t){const n=this,r=tHt();return wxe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=vn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>LD(n),o.onerror=()=>LD(n),o.src=s,o}).catch(i=>(LD(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function wxe(e){e._pending+=1}function LD(e){e._pending-=1}function My(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?_qt(t,r):0))}return e}function _qt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Eqt=vm-1e-8;let z9,TF,AF,Ew,cX,DF,fX,dX;const q1=(e,t)=>z9.add(e,t),IF=(e,t)=>q1(TF=e,AF=t),_xe=e=>q1(e,z9.y1),Exe=e=>q1(z9.x1,e),ew=(e,t)=>cX*e+fX*t,tw=(e,t)=>DF*e+dX*t,WH=(e,t)=>q1(ew(e,t),tw(e,t)),GH=(e,t)=>IF(ew(e,t),tw(e,t));function nP(e,t){return z9=e,t?(Ew=t*Jv,cX=dX=Math.cos(Ew),DF=Math.sin(Ew),fX=-DF):(cX=dX=1,Ew=DF=fX=0),Sqt}const Sqt={beginPath(){},closePath(){},moveTo:GH,lineTo:GH,rect(e,t,n,r){Ew?(WH(e+n,t),WH(e+n,t+r),WH(e,t+r),GH(e,t)):(q1(e+n,t+r),IF(e,t))},quadraticCurveTo(e,t,n,r){const i=ew(e,t),s=tw(e,t),o=ew(n,r),a=tw(n,r);Sxe(TF,i,o,_xe),Sxe(AF,s,a,Exe),IF(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=ew(e,t),a=tw(e,t),u=ew(n,r),l=tw(n,r),c=ew(i,s),f=tw(i,s);Cxe(TF,o,u,c,_xe),Cxe(AF,a,l,f,Exe),IF(c,f)},arc(e,t,n,r,i,s){if(r+=Ew,i+=Ew,TF=n*Math.cos(i)+e,AF=n*Math.sin(i)+t,Math.abs(i-r)>Eqt)q1(e-n,t-n),q1(e+n,t+n);else{const o=l=>q1(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%vm,r<0&&(r+=vm),i=i%vm,i<0&&(i+=vm),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=vm,a=r-r%Zx,u=0;u<4&&a>i;++u,a-=Zx)o(a);else for(a=r-r%Zx+Zx,u=0;u<4&&a<i;++u,a=a+Zx)o(a)}}};function Sxe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Cxe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>$Ht?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Txe(u,e,t,n,r)),0<l&&l<1&&i(Txe(l,e,t,n,r))}function Txe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var bv=(bv=vv(1,1))?bv.getContext("2d"):null;const hX=new Go;function Zse(e){return function(t,n){if(!bv)return!0;e(bv,t),hX.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=hX;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(bv.isPointInPath(u,a))return!0;return!1}}function eoe(e,t){return t.contains(e.x||0,e.y||0)}function XLe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(hX.set(n,r,n+i,r+s))}function QLe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return rS(t,n,r,i,s)}function rS(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function GC(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Ch(e,t){return e??t}function Axe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Cqt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Ch(t.x1,.5)*r,n.y1+Ch(t.y1,.5)*i,Math.max(r,i)*Ch(t.r1,0),n.x1+Ch(t.x2,.5)*r,n.y1+Ch(t.y2,.5)*i,Math.max(r,i)*Ch(t.r2,.5));else{const o=Ch(t.x1,0),a=Ch(t.y1,0),u=Ch(t.x2,1),l=Ch(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=vv(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Axe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Axe(s,t.stops)}function JLe(e,t,n){return Kse(n)?Cqt(e,n,t.bounds):n}function q5(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=JLe(e,t,t.fill),!0):!1}var Tqt=[];function YC(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=JLe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Tqt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Aqt(e,t){return e.zindex-t.zindex||e.index-t.index}function toe(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Aqt)}function bp(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=toe(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function W5(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=toe(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function noe(e){return function(t,n,r){bp(n,i=>{(!r||r.intersects(i.bounds))&&ZLe(e,t,i,i)})}}function Dqt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&ZLe(e,t,n.items[0],n.items)}}function ZLe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(GC(t,n),n.fill&&q5(t,n,i)&&t.fill(),n.stroke&&YC(t,n,i)&&t.stroke()))}function V9(e){return e=e||qd,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,W5(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function rP(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function roe(e){return V9(rP(e))}function Ow(e,t){return"translate("+e+","+t+")"}function ioe(e){return"rotate("+e+")"}function Iqt(e,t){return"scale("+e+","+t+")"}function eBe(e){return Ow(e.x||0,e.y||0)}function kqt(e){return Ow(e.x||0,e.y||0)+(e.angle?" "+ioe(e.angle):"")}function Rqt(e){return Ow(e.x||0,e.y||0)+(e.angle?" "+ioe(e.angle):"")+(e.scaleX||e.scaleY?" "+Iqt(e.scaleX||1,e.scaleY||1):"")}function soe(e,t,n){function r(o,a){o("transform",kqt(a)),o("d",t(null,a))}function i(o,a){return t(nP(o,a.angle),a),My(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Jv),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:noe(s),pick:roe(s),isect:n||Zse(s)}}var Nqt=soe("arc",gqt);function Pqt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Oqt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function Fqt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function ooe(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(nP(u),c),My(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=rP(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Dqt(s),pick:a,isect:eoe,tip:n}}var Mqt=ooe("area",yqt,Pqt);function $qt(e,t){var n=t.clip;e.save(),cr(n)?(e.beginPath(),n(e),e.clip()):tBe(e,t.group)}function tBe(e,t){e.beginPath(),Qse(t)?xA(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function nBe(e){const t=Ch(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Lqt(e,t){e("transform",eBe(t))}function rBe(e,t){const n=nBe(t);e("d",xA(null,t,n,n))}function Bqt(e,t){e("class","background"),e("aria-hidden",!0),rBe(e,t)}function jqt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?rBe(e,t):e("d","")}function Uqt(e,t,n){const r=t.clip?Jse(n,t,t):null;e("clip-path",r)}function zqt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),My(e,t),e.translate(t.x||0,t.y||0)}function m3(e,t,n,r){const i=nBe(t);e.beginPath(),xA(e,t,(n||0)+i,(r||0)+i)}const Vqt=rP(m3),Hqt=rP(m3,!1),qqt=rP(m3,!0);function Wqt(e,t,n,r){bp(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(m3(e,i,s,o),GC(e,i),i.fill&&q5(e,i,u)&&e.fill(),i.stroke&&!a&&YC(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&tBe(e,i),n&&n.translate(-s,-o),bp(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(m3(e,i,s,o),GC(e,i),YC(e,i,u)&&e.stroke())})}function Gqt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return W5(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Qse(u)&&!qqt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&Hqt(e,u,o,a)?(e.restore(),u):(l=W5(u,v=>Yqt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&Vqt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function Yqt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Kqt={type:"group",tag:"g",nested:!1,attr:Lqt,bound:zqt,draw:Wqt,pick:Gqt,isect:XLe,content:Uqt,background:Bqt,foreground:jqt},g3={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function aoe(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function uoe(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function loe(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function H9(e,t){return e==="center"?t/2:e==="right"?t:0}function q9(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Xqt(e,t,n){const r=aoe(t,n),i=uoe(t,r),s=loe(t,r),o=(t.x||0)-H9(t.align,i),a=(t.y||0)-q9(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,g3["xmlns:xlink"],"xlink:href"),e("transform",Ow(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Qqt(e,t){const n=t.image,r=uoe(t,n),i=loe(t,n),s=(t.x||0)-H9(t.align,r),o=(t.y||0)-q9(t.baseline,i);return e.set(s,o,s+r,o+i)}function Jqt(e,t,n){bp(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=aoe(r,this);let s=uoe(r,i),o=loe(r,i);if(s===0||o===0)return;let a=(r.x||0)-H9(r.align,s),u=(r.y||0)-q9(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(GC(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var Zqt={type:"image",tag:"image",nested:!1,attr:Xqt,bound:Qqt,draw:Jqt,pick:V9(),isect:qd,get:aoe,xOffset:H9,yOffset:q9},eWt=ooe("line",vqt,Oqt);function tWt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Rqt(t)),e("d",t.path)}function kF(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Jv,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=WC(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),p3(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):p3(e,u,r,i,s,o)}function nWt(e,t){return kF(nP(e,t.angle),t)?e.set(0,0,0,0):My(e,t,!0)}var rWt={type:"path",tag:"path",nested:!1,attr:tWt,bound:nWt,draw:noe(kF),pick:roe(kF),isect:Zse(kF)};function iWt(e,t){e("d",xA(null,t))}function sWt(e,t){var n,r;return My(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Dxe(e,t){e.beginPath(),xA(e,t)}var oWt={type:"rect",tag:"path",nested:!1,attr:iWt,bound:sWt,draw:noe(Dxe),pick:roe(Dxe),isect:XLe};function aWt(e,t){e("transform",eBe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function uWt(e,t){var n,r;return My(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function iBe(e,t,n){var r,i,s,o;return t.stroke&&YC(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function lWt(e,t,n){bp(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&iBe(e,r,i)&&(GC(e,r),e.stroke())}})}function cWt(e,t,n,r){return e.isPointInStroke?iBe(e,t,1)&&e.isPointInStroke(n,r):!1}var fWt={type:"rule",tag:"line",nested:!1,attr:aWt,bound:uWt,draw:lWt,pick:V9(cWt),isect:QLe},dWt=soe("shape",bqt),hWt=soe("symbol",xqt,eoe);const Ixe=z5e();var Nf={height:b0,measureWidth:coe,estimateWidth:G5,width:G5,canvas:sBe};sBe(!0);function sBe(e){Nf.width=e&&bv?coe:G5}function G5(e,t){return oBe(eb(e,t),b0(e))}function oBe(e,t){return~~(.8*e.length*t)}function coe(e,t){return b0(e)<=0||!(t=eb(e,t))?0:aBe(t,W9(e))}function aBe(e,t){const n=`(${t}) ${e}`;let r=Ixe.get(n);return r===void 0&&(bv.font=t,r=bv.measureText(e).width,Ixe.set(n,r)),r}function b0(e){return e.fontSize!=null?+e.fontSize||0:11}function Zv(e){return e.lineHeight!=null?e.lineHeight:b0(e)+2}function pWt(e){return at(e)?e.length>1?e:e[0]:e}function iP(e){return pWt(e.lineBreak&&e.text&&!at(e.text)?e.text.split(e.lineBreak):e.text)}function foe(e){const t=iP(e);return(at(t)?t.length-1:0)*Zv(e)}function eb(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?gWt(e,n):n}function mWt(e){if(Nf.width===coe){const t=W9(e);return n=>aBe(n,t)}else if(Nf.width===G5){const t=b0(e);return n=>oBe(n,t)}else return t=>Nf.width(e,t)}function gWt(e,t){var n=+e.limit,r=mWt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function sP(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function W9(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+b0(e)+"px "+sP(e,t)}function doe(e){var t=e.baseline,n=b0(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Zv(e):t==="line-bottom"?.29*n-.5*Zv(e):0)}const yWt={left:"start",center:"middle",right:"end"},kk=new Go;function G9(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Zx,t+=r*Math.cos(i),n+=r*Math.sin(i)),kk.x1=t,kk.y1=n,kk}function vWt(e,t){var n=t.dx||0,r=(t.dy||0)+doe(t),i=G9(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",yWt[t.align]||"start"),a?(u=Ow(s,o)+" "+ioe(a),(n||r)&&(u+=" "+Ow(n,r))):u=Ow(s+n,o+r),e("transform",u)}function hoe(e,t,n){var r=Nf.height(t),i=t.align,s=G9(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+doe(t)-Math.round(.8*r),c=iP(t),f;if(at(c)?(r+=Zv(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Nf.width(t,h)),0)):f=Nf.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Jv,o,a);else if(n===2)return e.rotatedPoints(t.angle*Jv,o,a);return e}function bWt(e,t,n){bp(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=W9(r),e.textAlign=r.align||"left",s=G9(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Jv),o=a=0),o+=r.dx||0,a+=(r.dy||0)+doe(r),c=iP(r),GC(e,r),at(c))for(l=Zv(r),u=0;u<c.length;++u)f=eb(r,c[u]),r.fill&&q5(e,r,i)&&e.fillText(f,o,a),r.stroke&&YC(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=eb(r,c),r.fill&&q5(e,r,i)&&e.fillText(f,o,a),r.stroke&&YC(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function xWt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=G9(t),a=o.x1,u=o.y1,l=hoe(kk,t,1),c=-t.angle*Jv,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function wWt(e,t){const n=hoe(kk,e,2);return rS(t,n[0],n[1],n[2],n[3])||rS(t,n[0],n[1],n[4],n[5])||rS(t,n[4],n[5],n[6],n[7])||rS(t,n[2],n[3],n[6],n[7])}var _Wt={type:"text",tag:"text",nested:!1,attr:vWt,bound:hoe,draw:bWt,pick:V9(xWt),isect:wWt},EWt=ooe("trail",wqt,Fqt),Kf={arc:Nqt,area:Mqt,group:Kqt,image:Zqt,line:eWt,path:rWt,rect:oWt,rule:fWt,shape:dWt,symbol:hWt,text:_Wt,trail:EWt};function pX(e,t,n){var r=Kf[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Go),e,n)}var kxe={mark:null};function uBe(e,t,n){var r=Kf[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(kxe.mark=e,l=kxe),c=pX(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Go,o)for(a=0,u=s.length;a<u;++a)t.union(pX(s[a],i,n));return e.bounds=t}const SWt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function lBe(e,t){return JSON.stringify(e,SWt,t)}function cBe(e){const t=typeof e=="string"?JSON.parse(e):e;return fBe(t)}function fBe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&fBe(n[i]);return t&&uBe(e),e}class dBe{constructor(t){arguments.length?this.root=cBe(t):(this.root=Rxe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new U9(this.root)])}toJSON(t){return lBe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Rxe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Rxe(e,t){const n={bounds:new Go,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function W1(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function poe(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ua(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=W1(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Dd(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function hBe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Y9(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function CWt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Kf[i.marktype]).tip){for(o=Y9(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let moe=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||E9(),this._tooltip=n||TWt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=W1(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=CWt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function TWt(e,t,n,r){e.element().setAttribute("title",r||"")}class oP{constructor(t){this._el=null,this._bgcolor=null,this._loader=new KLe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const AWt="keydown",DWt="keypress",IWt="keyup",pBe="dragenter",RF="dragleave",mBe="dragover",mX="pointerdown",kWt="pointerup",Y5="pointermove",NF="pointerout",gBe="pointerover",gX="mousedown",RWt="mouseup",yBe="mousemove",K5="mouseout",vBe="mouseover",X5="click",NWt="dblclick",PWt="wheel",bBe="mousewheel",Q5="touchstart",J5="touchmove",Z5="touchend",OWt=[AWt,DWt,IWt,pBe,RF,mBe,mX,kWt,Y5,NF,gBe,gX,RWt,yBe,K5,vBe,X5,NWt,PWt,bBe,Q5,J5,Z5],yX=Y5,Rk=K5,vX=X5;class aP extends moe{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=OWt,this.pointermove=Pxe([Y5,yBe],[gBe,vBe],[NF,K5]),this.dragover=Pxe([mBe],[pBe],[RF]),this.pointerout=Oxe([NF,K5]),this.dragleave=Oxe([RF])}initialize(t,n,r){return this._canvas=t&&poe(t,"canvas"),[X5,gX,mX,Y5,NF,RF].forEach(i=>Nxe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(bBe,t)}pointerdown(t){this._down=this._active,this.fire(mX,t)}mousedown(t){this._down=this._active,this.fire(gX,t)}click(t){this._down===this._active&&(this.fire(X5,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Q5,t,!0)}touchmove(t){this.fire(J5,t,!0)}touchend(t){this.fire(Z5,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===vX&&i&&i.href?this.handleHref(n,i,i.href):(t===yX||t===Rk)&&this.handleTooltip(n,i,t!==Rk),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Nxe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=Y9(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Kf[t.marktype].pick.call(this,o,t,n,r,i,s)}}const FWt=e=>e===Q5||e===J5||e===Z5?[Q5,J5,Z5]:[e];function Nxe(e,t){FWt(t).forEach(n=>MWt(e,n))}function MWt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function jI(e,t,n){t.forEach(r=>e.fire(r,n))}function Pxe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?jI(this,e,r):((!i||!i.exit)&&jI(this,n,r),this._active=s,jI(this,t,r),jI(this,e,r))}}function Oxe(e){return function(t){jI(this,e,t),this._active=null}}function $Wt(){return typeof window<"u"&&window.devicePixelRatio||1}function LWt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?$Wt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class e$ extends oP{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Go,this._tempb=new Go}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:vv(1,1,this._options.type),t&&this._canvas&&(Dd(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)LWt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||rt("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=BWt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):jWt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Kf[n.marktype];n.clip&&$qt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const BWt=(e,t,n)=>new Go().set(0,0,t,n).translate(-e[0],-e[1]);function jWt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class xBe extends moe{constructor(t,n){super(t,n);const r=this;r._hrefHandler=YH(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=YH(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Rk)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(vX,this._hrefHandler),i.removeEventListener(yX,this._tooltipHandler),i.removeEventListener(Rk,this._tooltipHandler)),this._svg=i=t&&poe(t,"svg"),i&&(i.addEventListener(vX,this._hrefHandler),i.addEventListener(yX,this._tooltipHandler),i.addEventListener(Rk,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:YH(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const YH=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},wBe="aria-hidden",goe="aria-label",yoe="role",voe="aria-roledescription",_Be="graphics-object",boe="graphics-symbol",EBe=(e,t,n)=>({[yoe]:e,[voe]:t,[goe]:n||void 0}),UWt=yp(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Fxe={axis:{desc:"axis",caption:HWt},legend:{desc:"legend",caption:qWt},"title-text":{desc:"title",caption:e=>`Title text '${$xe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${$xe(e)}'`}},Mxe={ariaRole:yoe,ariaRoleDescription:voe,description:goe};function SBe(e,t){const n=t.aria===!1;if(e(wBe,n||void 0),n||t.description==null)for(const r in Mxe)e(Mxe[r],void 0);else{const r=t.mark.marktype;e(goe,t.description),e(yoe,t.ariaRole||(r==="group"?_Be:boe)),e(voe,t.ariaRoleDescription||`${r} mark`)}}function CBe(e){return e.aria===!1?{[wBe]:!0}:UWt[e.role]?null:Fxe[e.role]?VWt(e,Fxe[e.role]):zWt(e)}function zWt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return EBe(n?_Be:boe,`${t} mark container`,e.description)}function VWt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return EBe(t.role||boe,t.desc,n.description||r(n))}catch{return null}}function $xe(e){return Lt(e.text).join(" ")}function HWt(e){const t=e.datum,n=e.orient,r=t.title?TBe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${qC(a)?"discrete":a} scale with ${BLe(o,s,e)}`}function qWt(e){const t=e.datum,n=t.title?TBe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return GWt(r)+(n?` titled '${n}'`:"")+` for ${WWt(s)} with ${BLe(u,a,e)}`}function TBe(e){try{return Lt(Xr(e.items).items[0].text).join(" ")}catch{return null}}function WWt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Xr(e)}function GWt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const ABe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),YWt=e=>ABe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function xoe(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${YWt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=ABe(u),a),toString:()=>e};return a}const DBe=e=>IBe(xoe(),e)+"";function IBe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):IBe(e,r)}return e.close()}const t$={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},n$={blend:"mix-blend-mode"},kBe={fill:"none","stroke-miterlimit":10},BD=0,Lxe="http://www.w3.org/2000/xmlns/",sa=g3.xmlns;class woe extends oP{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=ua(t,0,"svg",sa),this._svg.setAttributeNS(Lxe,"xmlns",sa),this._svg.setAttributeNS(Lxe,"xmlns:xlink",g3["xmlns:xlink"]),this._svg.setAttribute("version",g3.version),this._svg.setAttribute("class","marks"),Dd(t,1),this._root=ua(this._svg,BD,"g",sa),G1(this._root,kBe),Dd(this._svg,BD+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(G1(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=ua(t,BD,"rect",sa),G1(r,{width:this._width,height:this._height,fill:n}));const i=DBe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Dd(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Kf[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Bxe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Bxe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Kf[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=jxe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Dd(c,0),n._svg;c.setAttribute("class",hBe(n));const f=CBe(n);for(const m in f)xl(c,m,f[m]);l||xl(c,"pointer-events",u),xl(c,"clip-path",n.clip?Jse(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=jxe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&QWt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):bp(n,p),Dd(c,h),c}_update(t,n,r){Tg=n,$u=n.__values__,SBe(Nk,r),t.attr(Nk,r,this);const i=ZWt[t.type];i&&i.call(this,t,n,r),Tg&&this.style(Tg,r)}style(t,n){if(n!=null){for(const r in t$){let i=r==="font"?sP(n):n[r];if(i===$u[r])continue;const s=t$[r];i==null?t.removeAttribute(s):(Kse(i)&&(i=ULe(i,this._defs.gradient,RBe())),t.setAttribute(s,i+"")),$u[r]=i}for(const r in n$)PF(t,n$[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=ua(t,BD+1,"defs",sa)),i=KWt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=ua(t,BD+1,"defs",sa)),i=XWt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Dd(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Bxe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function KWt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ua(e,n++,"pattern",sa);G1(o,{id:H5+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ua(o,0,"rect",sa),G1(o,{width:1,height:1,fill:`url(${RBe()}#${t.id})`}),e=ua(e,n++,"radialGradient",sa),G1(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ua(e,n++,"linearGradient",sa),G1(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ua(e,r,"stop",sa),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Dd(e,r),n}function XWt(e,t,n){let r;return e=ua(e,n,"clipPath",sa),e.setAttribute("id",t.id),t.path?(r=ua(e,0,"path",sa),r.setAttribute("d",t.path)):(r=ua(e,0,"rect",sa),G1(r,{x:0,y:0,width:t.width,height:t.height})),Dd(e,1),n+1}function QWt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;bp(n,o=>{i=e.mark(t,o,i,r),++s}),Dd(t,1+s)}function jxe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=W1(o,r,sa),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=W1(o,"path",sa);s.appendChild(a),a.__data__=e;const u=W1(o,"g",sa);s.appendChild(u),u.__data__=e;const l=W1(o,"path",sa);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||JWt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function JWt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Tg=null,$u=null;const ZWt={group(e,t,n){const r=Tg=t.childNodes[2];$u=r.__values__,e.foreground(Nk,n,this),$u=t.__values__,Tg=t.childNodes[1],e.content(Nk,n,this);const i=Tg=t.childNodes[0];e.background(Nk,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==$u.events&&(xl(r,"pointer-events",s),xl(i,"pointer-events",s),$u.events=s),n.strokeForeground&&n.stroke){const o=n.fill;xl(r,"display",null),this.style(i,n),xl(i,"stroke",null),o&&(n.fill=null),$u=r.__values__,this.style(r,n),o&&(n.fill=o),Tg=null}else xl(r,"display","none")},image(e,t,n){n.smooth===!1?(PF(t,"image-rendering","optimizeSpeed"),PF(t,"image-rendering","pixelated")):PF(t,"image-rendering",null)},text(e,t,n){const r=iP(n);let i,s,o,a;at(r)?(s=r.map(u=>eb(n,u)),i=s.join(`
`),i!==$u.text&&(Dd(t,0),o=t.ownerDocument,a=Zv(n),s.forEach((u,l)=>{const c=W1(o,"tspan",sa);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),$u.text=i)):(s=eb(n,r),s!==$u.text&&(t.textContent=s,$u.text=s)),xl(t,"font-family",sP(n)),xl(t,"font-size",b0(n)+"px"),xl(t,"font-style",n.fontStyle),xl(t,"font-variant",n.fontVariant),xl(t,"font-weight",n.fontWeight)}};function Nk(e,t,n){t!==$u[e]&&(n?eGt(Tg,e,t,n):xl(Tg,e,t),$u[e]=t)}function PF(e,t,n){n!==$u[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),$u[t]=n)}function G1(e,t){for(const n in t)xl(e,n,t[n])}function xl(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function eGt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function RBe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class NBe extends oP{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=xoe();n.open("svg",lr({},g3,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",kBe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Kf[n.marktype],i=r.tag,s=[SBe,r.attr];t.open("g",{class:hBe(n),"clip-path":n.clip?Jse(this,n,n.group):null},CBe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=iP(a);if(at(l)){const c={x:0,dy:Zv(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(eb(a,l[f])).close()}else t.text(eb(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),bp(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):bp(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&tGt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:H5+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function tGt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=sP(t),e["font-size"]=b0(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in t$){let a=t[o];const u=t$[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Kse(a)&&(a=ULe(a,i.gradient,"")),e[u]=a)}for(const o in n$){const a=t[o];a!=null&&(s=s||[],s.push(`${n$[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Oh={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function nGt(e){Oh.svgMarkTypes=e.svgMarkTypes??["text"],Oh.svgOnTop=e.svgOnTop??!0,Oh.debug=e.debug??!1}class bX extends oP{constructor(t){super(t),this._svgRenderer=new woe(t),this._canvasRenderer=new e$(t)}initialize(t,n,r,i,s){this._root_el=ua(t,0,"div");const o=ua(this._root_el,0,"div"),a=ua(this._root_el,1,"div");return this._root_el.style.position="relative",Oh.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Oh.svgOnTop?a:o,this._canvasEl=Oh.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Oh.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Oh.svgMarkTypes.includes(s));this._svgRenderer.render(t,Oh.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Oh.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class PBe extends aP{constructor(t,n){super(t,n)}initialize(t,n,r){const i=ua(ua(t,0,"div"),Oh.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const OBe="canvas",FBe="hybrid",MBe="png",$Be="svg",LBe="none",Y1={Canvas:OBe,PNG:MBe,SVG:$Be,Hybrid:FBe,None:LBe},u_={};u_[OBe]=u_[MBe]={renderer:e$,headless:e$,handler:aP};u_[$Be]={renderer:woe,headless:NBe,handler:xBe};u_[FBe]={renderer:bX,headless:bX,handler:PBe};u_[LBe]={};function K9(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(u_[e]=t,this):u_[e]}function BBe(e,t,n){const r=[],i=new Go().union(t),s=e.marktype;return s?jBe(e,i,n,r):s==="group"?UBe(e,i,n,r):rt("Intersect scene must be mark node or group item.")}function jBe(e,t,n,r){if(rGt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)UBe(i[a],t,n,r);else for(const u=Kf[s].isect;a<o;++a){const l=i[a];zBe(l,t,u)&&r.push(l)}}return r}function rGt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function UBe(e,t,n,r){n&&n(e.mark)&&zBe(e,t,Kf.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)jBe(i[u],t,n,r);t.translate(o,a)}return r}function zBe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const KH=new Go;function VBe(e){const t=e.clip;if(cr(t))t(nP(KH.clear()));else if(t)KH.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(KH)}const iGt=1e-9;function _oe(e,t,n){return e===t?!0:n==="path"?HBe(e,t):e instanceof Date&&t instanceof Date?+e==+t:fi(e)&&fi(t)?Math.abs(e-t)<=iGt:!e||!t||!jt(e)&&!jt(t)?e==t:sGt(e,t)}function HBe(e,t){return _oe(WC(e),WC(t))}function sGt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!_oe(e[i],t[i],i))return!1;return typeof e==typeof t}function oGt(){YLe(),kHt()}const KC="top",Hh="left",Qh="right",tb="bottom",aGt="top-left",uGt="top-right",lGt="bottom-left",cGt="bottom-right",Eoe="start",xX="middle",Sl="end",fGt="x",dGt="y",X9="group",Soe="axis",Coe="title",hGt="frame",pGt="scope",Toe="legend",qBe="row-header",WBe="row-footer",GBe="row-title",YBe="column-header",KBe="column-footer",XBe="column-title",mGt="padding",gGt="symbol",QBe="fit",JBe="fit-x",ZBe="fit-y",yGt="pad",Aoe="none",G4="all",wX="each",Doe="flush",K1="column",X1="row";function e9e(e){Ye.call(this,null,e)}Ot(e9e,Ye,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Kf[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=Y4(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===X9||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(Y4(l,o))),r.role){case Soe:case Toe:case Coe:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(Y4(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(Y4(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return VBe(r),t.modifies("bounds")}});function Y4(e,t,n){return t(e.bounds.clear(),e,n)}const Uxe=":vega_identifier:";function Ioe(e){Ye.call(this,0,e)}Ioe.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Ot(Ioe,Ye,{transform(e,t){const n=vGt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function vGt(e){return e._signals[Uxe]||(e._signals[Uxe]=e.add(0))}function t9e(e){Ye.call(this,null,e)}Ot(t9e,Ye,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,bGt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===X9?U9:j9;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function bGt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function n9e(e){Ye.call(this,null,e)}const zxe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!r9e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},r9e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Vxe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(r9e(i,s=e[n].bounds,t))return!0},xGt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},wGt=(e,t,n)=>{var r=e.range(),i=new Go;return t===KC||t===tb?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Hxe=e=>(e.forEach(t=>t.opacity=1),e),qxe=(e,t)=>e.reflow(t.modified()).modifies("opacity");Ot(n9e,Ye,{transform(e,t){const n=zxe[e.method]||zxe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Hxe(i),t=qxe(t,e)),t;if(i=i.filter(xGt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Hxe(i),t=qxe(t,e),s.length>=3&&Vxe(s,r)){do s=n(s,r);while(s.length>=3&&Vxe(s,r));s.length<3&&!Xr(i).opacity&&(s.length>1&&(Xr(s).opacity=0),Xr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=wGt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function i9e(e){Ye.call(this,null,e)}Ot(i9e,Ye,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Fu=new Go;function iS(e,t,n){return e[t]===n?0:(e[t]=n,1)}function _Gt(e){var t=e.items[0].orient;return t===Hh||t===Qh}function EGt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function SGt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=EGt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&foe(p),v=0,b=0,_,w;switch(Fu.clear().union(g),g.clear(),(_=u[0])>-1&&g.union(i.items[_].bounds),(_=u[1])>-1&&g.union(i.items[_].bounds),a){case KC:v=f||0,b=-c,w=Math.max(d,Math.min(h,-g.y1)),g.add(0,-w).add(l,0),p&&K4(e,p,w,m,y,0,-1,g);break;case Hh:v=-c,b=f||0,w=Math.max(d,Math.min(h,-g.x1)),g.add(-w,0).add(0,l),p&&K4(e,p,w,m,y,1,-1,g);break;case Qh:v=n+c,b=f||0,w=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(w,l),p&&K4(e,p,w,m,y,1,1,g);break;case tb:v=f||0,b=r+c,w=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,w),p&&K4(e,p,w,m,0,0,1,g);break;default:v=i.x,b=i.y}return My(g.translate(v,b),i),iS(i,"x",v+o)|iS(i,"y",b+o)&&(i.bounds=Fu,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function K4(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Wxe=(e,t)=>Math.floor(Math.min(e,t)),Gxe=(e,t)=>Math.ceil(Math.max(e,t));function CGt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===X9)switch(i.role){case Soe:case Toe:case Coe:break;case qBe:o.rowheaders.push(...s);break;case WBe:o.rowfooters.push(...s);break;case YBe:o.colheaders.push(...s);break;case KBe:o.colfooters.push(...s);break;case GBe:o.rowtitle=s[0];break;case XBe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function TGt(e){return new Go().set(0,0,e.width||0,e.height||0)}function AGt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Os(e,t,n){const r=jt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Yxe(e){return e<0?Math.ceil(-e):0}function s9e(e,t,n){var r=!n.nodirty,i=n.bounds===Doe?TGt:AGt,s=Fu.set(0,0,0,0),o=Os(n.align,K1),a=Os(n.align,X1),u=Os(n.padding,K1),l=Os(n.padding,X1),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),_=Array(d),w=Array(d),S,T,A,k,I,R,F,O,$,V,j;for(T=0;T<c;++T)p[T]=0;for(T=0;T<f;++T)y[T]=0;for(T=0;T<d;++T)R=t[T],I=w[T]=i(R),R.x=R.x||0,b[T]=0,R.y=R.y||0,_[T]=0,A=T%c,k=~~(T/c),m=Math.max(m,F=Math.ceil(I.x2)),v=Math.max(v,O=Math.ceil(I.y2)),p[A]=Math.max(p[A],F),y[k]=Math.max(y[k],O),h[T]=u+Yxe(I.x1),g[T]=l+Yxe(I.y1),r&&e.dirty(t[T]);for(T=0;T<d;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(o===wX)for(A=1;A<c;++A){for(j=0,T=A;T<d;T+=c)j<h[T]&&(j=h[T]);for(T=A;T<d;T+=c)h[T]=j+p[A-1]}else if(o===G4){for(j=0,T=0;T<d;++T)T%c&&j<h[T]&&(j=h[T]);for(T=0;T<d;++T)T%c&&(h[T]=j+m)}else for(o=!1,A=1;A<c;++A)for(T=A;T<d;T+=c)h[T]+=p[A-1];if(a===wX)for(k=1;k<f;++k){for(j=0,T=k*c,S=T+c;T<S;++T)j<g[T]&&(j=g[T]);for(T=k*c;T<S;++T)g[T]=j+y[k-1]}else if(a===G4){for(j=0,T=c;T<d;++T)j<g[T]&&(j=g[T]);for(T=c;T<d;++T)g[T]=j+v}else for(a=!1,k=1;k<f;++k)for(T=k*c,S=T+c;T<S;++T)g[T]+=y[k-1];for($=0,T=0;T<d;++T)$=h[T]+(T%c?$:0),b[T]+=$-t[T].x;for(A=0;A<c;++A)for(V=0,T=A;T<d;T+=c)V+=g[T],_[T]+=V-t[T].y;if(o&&Os(n.center,K1)&&f>1)for(T=0;T<d;++T)I=o===G4?m:p[T%c],$=I-w[T].x2-t[T].x-b[T],$>0&&(b[T]+=$/2);if(a&&Os(n.center,X1)&&c!==1)for(T=0;T<d;++T)I=a===G4?v:y[~~(T/c)],V=I-w[T].y2-t[T].y-_[T],V>0&&(_[T]+=V/2);for(T=0;T<d;++T)s.union(w[T].translate(b[T],_[T]));switch($=Os(n.anchor,fGt),V=Os(n.anchor,dGt),Os(n.anchor,K1)){case Sl:$-=s.width();break;case xX:$-=s.width()/2}switch(Os(n.anchor,X1)){case Sl:V-=s.height();break;case xX:V-=s.height()/2}for($=Math.round($),V=Math.round(V),s.clear(),T=0;T<d;++T)t[T].mark.bounds.clear();for(T=0;T<d;++T)R=t[T],R.x+=b[T]+=$,R.y+=_[T]+=V,s.union(R.mark.bounds.union(R.bounds.translate(b[T],_[T]))),r&&e.dirty(R);return s}function DGt(e,t,n){var r=CGt(t),i=r.marks,s=n.bounds===Doe?IGt:kGt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=s9e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Os(n.headerBand,X1,null),c=X4(e,r.rowheaders,i,a,u,-Os(o,"rowHeader"),Wxe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Os(n.headerBand,K1,null),f=X4(e,r.colheaders,i,a,a,-Os(o,"columnHeader"),Wxe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Os(n.footerBand,X1,null),d=X4(e,r.rowfooters,i,a,u,Os(o,"rowFooter"),Gxe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Os(n.footerBand,K1,null),h=X4(e,r.colfooters,i,a,a,Os(o,"columnFooter"),Gxe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Os(n.titleAnchor,X1),g=Os(o,"rowTitle"),g=p===Sl?d+g:c-g,m=Os(n.titleBand,X1,.5),Kxe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Os(n.titleAnchor,K1),g=Os(o,"columnTitle"),g=p===Sl?h+g:f-g,m=Os(n.titleBand,K1,.5),Kxe(e,r.coltitle,g,1,y,m))}function IGt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function kGt(e,t){return e.bounds[t]}function X4(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,_,w,S,T,A,k;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,_=t.length;v<_;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,_=t.length;v<_;++v,y+=f){for(S=t[v],w=S.mark.bounds,b=y;b>=0&&(T=n[b])==null;b-=d);a?(A=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),k=m):(A=m,k=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),w.union(S.bounds.translate(A-(S.x||0),k-(S.y||0))),S.x=A,S.y=k,e.dirty(S),g=o(g,w[l])}return g}function Kxe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function RGt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function NGt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function PGt(e,t,n,r,i,s,o){const a=RGt(n,t),u=NGt(e,a("offset",0)),l=a("anchor",Eoe),c=l===Sl?1:l===xX?.5:0,f={align:wX,bounds:a("bounds",Doe),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Hh:f.anchor={x:Math.floor(r.x1)-u,column:Sl,y:c*(o||r.height()+2*r.y1),row:l};break;case Qh:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case KC:f.anchor={y:Math.floor(i.y1)-u,row:Sl,x:c*(s||i.width()+2*i.x1),column:l};break;case tb:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case aGt:f.anchor={x:u,y:u};break;case uGt:f.anchor={x:s-u,y:u,column:Sl};break;case lGt:f.anchor={x:u,y:o-u,row:Sl};break;case cGt:f.anchor={x:s-u,y:o-u,column:Sl,row:Sl};break}return f}function OGt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),MGt(e,n,n.items[0].items[0]),s=FGt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===gGt&&$Gt(n.items[0].items[0].items[0].items),i!==Aoe&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,My(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function FGt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function MGt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&jD(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Hh:i+=Math.ceil(o.bounds.width())+u;break;case Qh:case tb:break;default:s+=o.bounds.height()+u}switch((i||s)&&jD(e,n,i,s),o.orient){case Hh:c+=a2(t,n,o,a,1,1);break;case Qh:l+=a2(t,n,o,Sl,0,0)+u,c+=a2(t,n,o,a,1,1);break;case tb:l+=a2(t,n,o,a,0,0),c+=a2(t,n,o,Sl,-1,0,1)+u;break;default:l+=a2(t,n,o,a,0,0)}(l||c)&&jD(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(jD(e,n,-l,0),jD(e,o,-l,0))}}function a2(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:foe(n);return Math.round(r===Eoe?f:r===Sl?d-h:.5*(c-h))}function jD(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function $Gt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function LGt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Hh||a===Qh?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==X9?a===Hh?(p=i.y2,h=i.y1):a===Qh?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Hh&&(p=r,h=0),b=u===Eoe?p:u===Sl?h:(p+h)/2,d&&d.text){switch(a){case KC:case tb:v=f.bounds.height()+c;break;case Hh:y=f.bounds.width()+c;break;case Qh:y=-f.bounds.width()-c;break}Fu.clear().union(d.bounds),Fu.translate(y-(d.x||0),v-(d.y||0)),iS(d,"x",y)|iS(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Fu),d.mark.bounds.clear().union(Fu),e.dirty(d)),Fu.clear().union(d.bounds)}else Fu.clear();switch(Fu.union(f.bounds),a){case KC:m=b,g=i.y1-Fu.height()-l;break;case Hh:m=i.x1-Fu.width()-l,g=b;break;case Qh:m=i.x2+Fu.width()+l,g=b;break;case tb:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return iS(s,"x",m)|iS(s,"y",g)&&(Fu.translate(m,g),e.dirty(s),s.bounds.clear().union(Fu),t.bounds.clear().union(Fu),e.dirty(s)),s.bounds}function o9e(e){Ye.call(this,null,e)}Ot(o9e,Ye,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&DGt(n,r,e.layout),jGt(n,r,e)}),BGt(e.mark.group)?t.reflow():t}});function BGt(e){return e&&e.mark.role!=="legend-entry"}function jGt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Go().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Soe:h=_Gt(f)?a:u,h.union(SGt(e,f,i,s));break;case Coe:c=f;break;case Toe:l.push(OGt(e,f));break;case hGt:case pGt:case qBe:case WBe:case GBe:case YBe:case KBe:case XBe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Qh,d!==Aoe&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];s9e(e,v,PGt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===QBe||n.autosize.type===JBe||n.autosize.type===ZBe))switch(y.orient){case Hh:case Qh:o.add(v.x1,0).add(v.x2,0);break;case KC:case tb:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(LGt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),UGt(e,t,o,n)}function UGt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===mGt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Aoe?(l=0,f=0,u=o,c=a):s===QBe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===JBe?(u=Math.max(0,o-l-d),a=c+f+h):s===ZBe?(o=u+l+d,c=Math.max(0,a-f-h)):s===yGt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const zGt=Object.freeze(Object.defineProperty({__proto__:null,bound:e9e,identifier:Ioe,mark:t9e,overlap:n9e,render:i9e,viewlayout:o9e},Symbol.toStringTag,{value:"Module"}));function a9e(e){Ye.call(this,null,e)}Ot(a9e,Ye,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Gse(s,o,e.minstep),u=e.format||OLe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?PLe(s,e.values,a):Yse(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Ii({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Ii({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function u9e(e){Ye.call(this,null,e)}function VGt(){return Ii({})}function HGt(e){const t=mA().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Ot(u9e,Ye,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||VGt,s=e.key||mn,o=this.value;return at(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&rt("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=HGt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function l9e(e){Ye.call(this,null,e)}Ot(l9e,Ye,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(at(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||p1,u=i.enter||p1,l=i.exit||p1,c=(s&&!o?i[s]:a)||p1;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==p1&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==p1&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==p1){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function c9e(e){Ye.call(this,[],e)}Ot(c9e,Ye,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||CF,o=e.scale,a=+e.limit,u=Gse(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===CF,c=e.format||LLe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||$Le(o,u),d,h,p,m,g;return i&&(r.rem=i),s===CF?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,cr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=il(m=p||8),i=i.map((y,v)=>Ii({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Ii({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===yHt?(d=o.domain(),h=kLe(o,d[0],Xr(d)),f.length<3&&!e.values&&d[0]!==Xr(d)&&(f=[d[0],Xr(d)]),i=f.map((y,v)=>Ii({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=DHt(o),i=f.map((y,v)=>Ii({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const qGt=e=>e.source.x,WGt=e=>e.source.y,GGt=e=>e.target.x,YGt=e=>e.target.y;function koe(e){Ye.call(this,{},e)}koe.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Ot(koe,Ye,{transform(e,t){var n=e.sourceX||qGt,r=e.sourceY||WGt,i=e.targetX||GGt,s=e.targetY||YGt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Xxe.get(u+"-"+a)||Xxe.get(u);return l||rt("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const f9e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,KGt=(e,t,n,r)=>f9e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),d9e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},XGt=(e,t,n,r)=>d9e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),h9e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},QGt=(e,t,n,r)=>h9e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),JGt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,ZGt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,eYt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},tYt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},nYt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},rYt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Xxe=mA({line:f9e,"line-radial":KGt,arc:d9e,"arc-radial":XGt,curve:h9e,"curve-radial":QGt,"orthogonal-horizontal":JGt,"orthogonal-vertical":ZGt,"orthogonal-radial":eYt,"diagonal-horizontal":tYt,"diagonal-vertical":nYt,"diagonal-radial":rYt});function Roe(e){Ye.call(this,null,e)}Roe.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Ot(Roe,Ye,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||dA,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/G3e(l),h=Ac(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const iYt=5;function sYt(e){const t=e.type;return!e.bins&&(t===VC||t===KN||t===XN)}function p9e(e){return Hse(e)&&e!==Fm}const oYt=yp(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function m9e(e){Ye.call(this,null,e),this.modified(!0)}Ot(m9e,Ye,{transform(e,t){var n=t.dataflow,r=this.value,i=aYt(e);(!r||i!==r.type)&&(this.value=r=xi(i)());for(i in e)if(!oYt[i]){if(i==="padding"&&p9e(r.type))continue;cr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return hYt(r,e,dYt(r,e,lYt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function aYt(e){var t=e.type,n="",r;return t===Fm?Fm+"-"+VC:(uYt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Fm+"-":r===3?bA+"-":""),(n+t||VC).toLowerCase())}function uYt(e){const t=e.type;return Hse(t)&&t!==o_&&t!==a_&&(e.scheme||e.range&&e.range.length&&e.range.every(Bt))}function lYt(e,t,n){const r=cYt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&sYt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return p9e(s)&&t.padding&&i[0]!==Xr(i)&&(i=fYt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(g9e(s,i,n)),s===jse&&e.unknown(t.domainImplicit?MY:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Gse(e,t.nice)||null),i.length}function cYt(e,t,n){return t?(e.domain(g9e(e.type,t,n)),t.length):-1}function fYt(e,t,n,r,i,s){var o=Math.abs(Xr(n)-n[0]),a=o/(o-2*r),u=e===hy?Pie(t,null,a):e===XN?j5(t,null,a,.5):e===KN?j5(t,null,a,i||1):e===F9?Oie(t,null,a,s||1):Nie(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function g9e(e,t,n){if(CLe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Nt(t))}return t}function dYt(e,t,n){let r=t.bins;if(r&&!at(r)){const i=e.domain(),s=i[0],o=Xr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||rt("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Ac(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Use&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function hYt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=pYt(r,t,n);else if(t.scheme&&(s=mYt(r,t,n),cr(s))){if(e.interpolator)return e.interpolator(s);rt(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&TLe(r))return e.interpolator(L9(_X(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(qse(t.interpolate,t.interpolateGamma)):cr(e.round)?e.round(i):cr(e.rangeRound)&&e.interpolate(i?_N:Dy),s&&e.range(_X(s,t.reverse))}function pYt(e,t,n){e!==bLe&&e!==aX&&rt("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===aX?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Bse(n,i,r)]}function mYt(e,t,n){var r=t.schemeExtent,i,s;return at(t.scheme)?s=L9(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Wse(i),s||rt(`Unrecognized scheme name: ${t.scheme}`)),n=e===$9?n+1:e===Use?n-1:e===HC||e===M9?+t.schemeCount||iYt:n,TLe(e)?Qxe(s,r,t.reverse):cr(s)?ILe(Qxe(s,r),n):e===jse?s:s.slice(0,n)}function Qxe(e,t,n){return cr(e)&&(t||n)?DLe(e,_X(t||[0,1],n)):e}function _X(e,t){return t?e.slice().reverse():e}function y9e(e){Ye.call(this,null,e)}Ot(y9e,Ye,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(tE(e.sort)),this.modified(n),t}});const Jxe="zero",v9e="center",b9e="normalize",x9e=["y0","y1"];function Noe(e){Ye.call(this,null,e)}Noe.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Jxe,values:[Jxe,v9e,b9e]},{name:"as",type:"string",array:!0,length:2,default:x9e}]};Ot(Noe,Ye,{transform(e,t){var n=e.as||x9e,r=n[0],i=n[1],s=tE(e.sort),o=e.field||dA,a=e.offset===v9e?gYt:e.offset===b9e?yYt:vYt,u,l,c,f;for(u=bYt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function gYt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function yYt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function vYt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function bYt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const xYt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:a9e,datajoin:u9e,encode:l9e,legendentries:c9e,linkpath:koe,pie:Roe,scale:m9e,sortitems:y9e,stack:Noe},Symbol.toStringTag,{value:"Module"}));var wYt=Math.abs,EX=Math.cos,r$=Math.sin,_Yt=1e-6,w9e=Math.PI,SX=w9e/2,Zxe=EYt(2);function ewe(e){return e>1?SX:e<-1?-SX:Math.asin(e)}function EYt(e){return e>0?Math.sqrt(e):0}function SYt(e,t){var n=e*r$(t),r=30,i;do t-=i=(t+r$(t)-n)/(1+EX(t));while(wYt(i)>_Yt&&--r>0);return t/2}function CYt(e,t,n){function r(i,s){return[e*i*EX(s=SYt(n,s)),t*r$(s)]}return r.invert=function(i,s){return s=ewe(s/t),[i/(e*EX(s)),ewe((2*s+r$(2*s))/n)]},r}var TYt=CYt(Zxe/SX,Zxe,w9e);function AYt(){return m0(TYt).scale(169.529)}const DYt=kPe(),CX=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function IYt(e,t){return function n(){const r=t();return r.type=e,r.path=kPe().projection(r),r.copy=r.copy||function(){const i=n();return CX.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},ELe(r)}}function Poe(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(i$[e]=IYt(e,t),this):i$[e]||null}function _9e(e){return e&&e.path||DYt}const i$={albers:NPe,albersusa:bDt,azimuthalequalarea:xDt,azimuthalequidistant:wDt,conicconformal:SDt,conicequalarea:R8,conicequidistant:ADt,equalEarth:IDt,equirectangular:CDt,gnomonic:kDt,identity:RDt,mercator:_Dt,mollweide:AYt,naturalEarth1:NDt,orthographic:PDt,stereographic:ODt,transversemercator:FDt};for(const e in i$)Poe(e,i$[e]);function kYt(){}const Y0=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function E9e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),RYt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(NYt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Y0[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,Y0[m|g<<1].forEach(b);for(Y0[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Y0[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Y0[m|g<<1|y<<2|v<<3].forEach(b);Y0[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,Y0[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Y0[y<<2|v<<3].forEach(b);Y0[y<<3].forEach(b);function b(_){var w=[_[0][0]+h,_[0][1]+p],S=[_[1][0]+h,_[1][1]+p],T=o(w),A=o(S),k,I;(k=d[T])?(I=f[A])?(delete d[k.end],delete f[I.start],k===I?(k.ring.push(S),c(k.ring)):f[k.start]=d[I.end]={start:k.start,end:I.end,ring:k.ring.concat(I.ring)}):(delete d[k.end],k.ring.push(S),d[k.end=A]=k):(k=f[A])?(I=d[T])?(delete f[k.start],delete d[I.end],k===I?(k.ring.push(S),c(k.ring)):f[I.start]=d[k.end]={start:I.start,end:k.end,ring:I.ring.concat(k.ring)}):(delete f[k.start],k.ring.unshift(w),f[k.start=T]=k):f[T]=d[A]={start:T,end:A,ring:[w,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||rt("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:kYt,r):n===a},r}function RYt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function NYt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=PYt(e,t[n]))return i;return 0}function PYt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(OYt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function OYt(e,t,n){var r;return FYt(e,t,n)&&MYt(e[r=+(e[0]===t[0])],n[r],t[r])}function FYt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function MYt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function S9e(e,t,n){return function(r){var i=e0(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?Ov(s,o,e):a/(e+1);return Ac(s+u,o,u)}}function Ooe(e){Ye.call(this,null,e)}Ooe.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Ot(Ooe,Ye,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||rl,s=E9e().smooth(e.smooth!==!1),o=e.thresholds||$Yt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,at(o)?o:o(c.values));LYt(f,c,l,e),f.forEach(d=>{u.push(T9(l,Ii(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function $Yt(e,t,n){const r=S9e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Mg(t(i).values)))}function LYt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(cr(i)&&(i=i(n,r)),cr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(fi(i)?i:i[0])||1,a=(fi(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(C9e(t,o,a,u,l))}function C9e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function twe(e,t,n){const r=e>=0?e:Zie(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function XH(e){return cr(e)?e:il(+e)}function T9e(){var e=u=>u[0],t=u=>u[1],n=dA,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=twe(r[0],u,e)>>o,f=twe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(_=>{const w=d+(+e(_)>>o),S=h+(+t(_)>>o);w>=0&&w<p&&S>=0&&S<m&&(g[w+S*p]+=+n(_))}),c>0&&f>0?(u2(p,m,g,y,c),l2(p,m,y,g,f),u2(p,m,g,y,c),l2(p,m,y,g,f),u2(p,m,g,y,c),l2(p,m,y,g,f)):c>0?(u2(p,m,g,y,c),u2(p,m,y,g,c),u2(p,m,g,y,c),v=y):f>0&&(l2(p,m,g,y,f),l2(p,m,y,g,f),l2(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/G3e(v);for(let _=0,w=p*m;_<w;++_)v[_]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=XH(u),a):e},a.y=function(u){return arguments.length?(t=XH(u),a):t},a.weight=function(u){return arguments.length?(n=XH(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||rt("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||rt("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Lt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&rt("invalid bandwidth"),r=u,a):r},a}function u2(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function l2(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Foe(e){Ye.call(this,null,e)}Foe.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const BYt=["x","y","weight","size","cellSize","bandwidth"];function A9e(e,t){return BYt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Ot(Foe,Ye,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=jYt(r,e.groupby),s=(e.groupby||[]).map(po),o=A9e(T9e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Ii(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function jYt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Moe(e){Ye.call(this,null,e)}Moe.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Ot(Moe,Ye,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=E9e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||S9e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=A9e(T9e(),e)(i,!0),u=C9e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=at(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Ii),n}});const TX="Feature",$oe="FeatureCollection",UYt="MultiPoint";function Loe(e){Ye.call(this,null,e)}Loe.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Ot(Loe,Ye,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&rl,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Ku(a))||s&&t.modified(Ku(s))||o&&t.modified(Ku(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:TX,geometry:{type:UYt,coordinates:r}})),this.value={type:$oe,features:n}}});function Boe(e){Ye.call(this,null,e)}Boe.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Ot(Boe,Ye,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||rl,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=_9e(e.projection),n.materialize().reflow()):o=i===rl||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=zYt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function zYt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function joe(e){Ye.call(this,null,e)}joe.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Ot(joe,Ye,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Uoe(e){Ye.call(this,null,e)}Uoe.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Ot(Uoe,Ye,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=VYt(_9e(e.projection),e.field||Hd("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function VYt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function zoe(e){Ye.call(this,[],e),this.generator=JAt()}zoe.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Ot(zoe,Ye,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)cr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(A$e(n[0],i)):t.add.push(Ii(i)),n[0]=i,t}});function Voe(e){Ye.call(this,null,e)}Voe.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Ot(Voe,Ye,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||rl,s=qYt(e.opacity,e),o=HYt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Mg(n.map(l=>Mg(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=lr({},l,u);r||(f.$max=Mg(c.values||[])),l[a]=WYt(c,f,o.dep?o:il(o(f)),s.dep?s:il(s(f)))}),t.reflow(!0).modifies(a)}});function HYt(e,t){let n;return cr(e)?(n=r=>Fv(e(r,t)),n.dep=D9e(e)):n=il(Fv(e||"#888")),n}function qYt(e,t){let n;return cr(e)?(n=r=>e(r,t),n.dep=D9e(e)):e?n=il(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function D9e(e){if(!cr(e))return!1;const t=yp(Ku(e));return t.$x||t.$y||t.$value||t.$max}function WYt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:O1,d=vv(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const _=n(t);m[y+0]=_.r,m[y+1]=_.g,m[y+2]=_.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function I9e(e){Ye.call(this,null,e),this.modified(!0)}Ot(I9e,Ye,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=YYt(e.type),CX.forEach(r=>{e[r]!=null&&nwe(n,r,e[r])})):CX.forEach(r=>{e.modified(r)&&nwe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&GYt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function GYt(e,t){const n=KYt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function YYt(e){const t=Poe((e||"mercator").toLowerCase());return t||rt("Unrecognized projection type: "+e),t()}function nwe(e,t,n){cr(e[t])&&e[t](n)}function KYt(e){return e=Lt(e),e.length===1?e[0]:{type:$oe,features:e.reduce((t,n)=>t.concat(XYt(n)),[])}}function XYt(e){return e.type===$oe?e.features:Lt(e).filter(t=>t!=null).map(t=>t.type===TX?t:{type:TX,geometry:t})}const QYt=Object.freeze(Object.defineProperty({__proto__:null,contour:Moe,geojson:Loe,geopath:Boe,geopoint:joe,geoshape:Uoe,graticule:zoe,heatmap:Voe,isocontour:Ooe,kde2d:Foe,projection:I9e},Symbol.toStringTag,{value:"Module"})),rwe={center:zTt,collide:aAt,nbody:vAt,link:lAt,x:bAt,y:xAt},UI="forces",AX=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],JYt=["static","iterations"],k9e=["x","y","vx","vy"];function Hoe(e){Ye.call(this,null,e)}Hoe.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:k9e}]};Ot(Hoe,Ye,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(AX),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&R9e(n,e,0,t)):(this.value=n=eKt(t.source,e),n.on("tick",ZYt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(JYt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==UI||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(k9e)}});function ZYt(e,t){return()=>e.touch(t).run()}function eKt(e,t){const n=yAt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),R9e(n,t,!0).on("end",()=>s=!0)}function R9e(e,t,n,r){var i=Lt(t.forces),s,o,a,u;for(s=0,o=AX.length;s<o;++s)a=AX[s],a!==UI&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=UI+s,a=n||t.modified(UI,s)?nKt(i[s]):r&&tKt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(UI+s,null);return e.numForces=i.length,e}function tKt(e,t){var n,r;for(n in e)if(cr(r=e[n])&&t.modified(Ku(r)))return 1;return 0}function nKt(e){var t,n;vn(rwe,e.force)||rt("Unrecognized force: "+e.force),t=rwe[e.force]();for(n in e)cr(t[n])&&rKt(t[n],e[n],e);return t}function rKt(e,t,n){e(cr(t)?r=>t(r,n):t)}const iKt=Object.freeze(Object.defineProperty({__proto__:null,force:Hoe},Symbol.toStringTag,{value:"Module"}));function DX(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function qoe(e){Ye.call(this,null,e)}qoe.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const sKt=e=>e.values;Ot(qoe,Ye,{transform(e,t){t.source||rt("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&C9(o.data)&&i.rem.push(o.data)}),this.value=s=SB({values:Lt(e.keys).reduce((o,a)=>(o.key(a),o),oKt()).entries(i.source)},sKt),n&&s.each(o=>{o.children&&(o=Ii(o.data),i.add.push(o),i.source.push(o))}),DX(s,mn,mn)),i.source.root=s,i}});function oKt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function $y(e){Ye.call(this,null,e)}const aKt=(e,t)=>e.parent===t.parent?1:2;Ot($y,Ye,{transform(e,t){(!t.source||!t.source.root)&&rt(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(tE(e.sort,o=>o.data)),uKt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?aKt:dA);try{this.value=n(i)}catch(o){rt(o)}return i.each(o=>lKt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function uKt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function lKt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const IX=["x","y","r","depth","children"];function Woe(e){$y.call(this,e)}Woe.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:IX.length,default:IX}]};Ot(Woe,$y,{layout:GPe,params:["radius","size","padding"],fields:IX});const kX=["x0","y0","x1","y1","depth","children"];function Goe(e){$y.call(this,e)}Goe.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:kX.length,default:kX}]};Ot(Goe,$y,{layout:xIt,params:["size","round","padding"],fields:kX});function Yoe(e){Ye.call(this,null,e)}Yoe.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Ot(Yoe,Ye,{transform(e,t){t.source||rt("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?DX(i1e().id(e.key).parentId(e.parentKey)(i.source),e.key,qd):DX(i1e()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const iwe={tidy:kIt,cluster:VDt},RX=["x","y","depth","children"];function Koe(e){$y.call(this,e)}Koe.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:RX.length,default:RX}]};Ot(Koe,$y,{layout(e){const t=e||"tidy";if(vn(iwe,t))return iwe[t]();rt("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:RX});function Xoe(e){Ye.call(this,[],e)}Xoe.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Ot(Xoe,Ye,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||rt("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[mn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[mn(a)]&&s[mn(u)]&&i.add.push(Ii({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[mn(o)]=1),n.forEach(o=>{(s[mn(o.source)]||s[mn(o.target)])&&i.mod.push(o)})),i}});const swe={binary:NIt,dice:TN,slice:CB,slicedice:PIt,squarify:QPe,resquarify:OIt},NX=["x0","y0","x1","y1","depth","children"];function Qoe(e){$y.call(this,e)}Qoe.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:NX.length,default:NX}]};Ot(Qoe,$y,{layout(){const e=RIt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{vn(swe,t)?e.tile(swe[t]):rt("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:NX});const cKt=Object.freeze(Object.defineProperty({__proto__:null,nest:qoe,pack:Woe,partition:Goe,stratify:Yoe,tree:Koe,treelinks:Xoe,treemap:Qoe},Symbol.toStringTag,{value:"Module"})),QH=4278190080;function fKt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function dKt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=vv(s,o).getContext("2d"),l=vv(s,o).getContext("2d"),c=a&&vv(s,o).getContext("2d");n.forEach(A=>OF(u,A,!1)),OF(l,t,!1),a&&OF(c,t,!0);const f=JH(u,s,o),d=JH(l,s,o),h=a&&JH(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,_,w,S,T;for(y=0;y<o;++y)for(g=0;g<s;++g)_=y*s+g,w=f[_]&QH,T=d[_]&QH,S=a&&h[_]&QH,(w||S||T)&&(v=e(g),b=e(y),!i&&(w||T)&&p.set(v,b),a&&(w||S)&&m.set(v,b));return[p,m]}function JH(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function OF(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>OF(e,s.items,n))}):Kf[r].draw(e,{items:n?t.map(hKt):t})}function hKt(e){const t=T9(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const K0=5,vl=31,y3=32,T1=new Uint32Array(y3+1),Lh=new Uint32Array(y3+1);Lh[0]=0;T1[0]=~Lh[0];for(let e=1;e<=y3;++e)Lh[e]=Lh[e-1]<<1|1,T1[e]=~Lh[e];function pKt(e,t){const n=new Uint32Array(~~((e*t+y3)/y3));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>K0]&1<<(a&vl)},set:(s,o)=>{const a=o*e+s;r(a>>>K0,1<<(a&vl))},clear:(s,o)=>{const a=o*e+s;i(a>>>K0,~(1<<(a&vl)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>K0,h=f>>>K0,d===h){if(n[d]&T1[c&vl]&Lh[(f&vl)+1])return!0}else{if(n[d]&T1[c&vl]||n[h]&Lh[(f&vl)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>K0,d=c>>>K0,f===d)r(f,T1[l&vl]&Lh[(c&vl)+1]);else for(r(f,T1[l&vl]),r(d,Lh[(c&vl)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>K0,d=c>>>K0,f===d)i(f,Lh[l&vl]|T1[(c&vl)+1]);else for(i(f,Lh[l&vl]),i(d,T1[(c&vl)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function mKt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>pKt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function gKt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Nf.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function s$(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Q1(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function yKt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!s$(p,m,d,h,i,s)&&!Q1(e,p,m,h,d,g,o,a)&&!Q1(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,Q1(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Nf.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,_,w,S,T,A,k,I,R,F,O,$,V,j,G,Y;for(let J=0;J<f;++J){for(v=c[J].x,_=c[J].y,b=c[J].x2===void 0?v:c[J].x2,w=c[J].y2===void 0?_:c[J].y2,v>b&&(Y=v,v=b,b=Y),_>w&&(Y=_,_=w,w=Y),I=e(v),F=e(b),R=~~((I+F)/2),O=e(_),V=e(w),$=~~((O+V)/2),A=R;A>=I;--A)for(k=$;k>=O;--k)G=u(A,k,p,h,d),G&&([l.x,l.y,p,m]=G);for(A=R;A<=F;++A)for(k=$;k<=V;++k)G=u(A,k,p,h,d),G&&([l.x,l.y,p,m]=G);!m&&!n&&(j=Math.abs(b-v+w-_),S=(v+b)/2,T=(_+w)/2,j>=y&&!s$(S,T,h,d,i,s)&&!Q1(e,S,T,d,h,d,o,null)&&(y=j,l.x=S,l.y=T,g=!0))}return m||g?(S=h/2,T=d/2,o.setRange(e(l.x-S),e(l.y-T),e(l.x+S),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const vKt=[-1,-1,1,1],bKt=[-1,1,-1,1];function xKt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Nf.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,_,w,S,T,A,k,I,R,F,O,$;for(let V=0;V<f;++V){for(b=c[V].x,w=c[V].y,_=c[V].x2===void 0?b:c[V].x2,S=c[V].y2===void 0?w:c[V].y2,p.push([e((b+_)/2),e((w+S)/2)]);p.length;)if([k,I]=p.pop(),!(o.get(k,I)||a.get(k,I)||u.get(k,I))){u.set(k,I);for(let j=0;j<4;++j)T=k+vKt[j],A=I+bKt[j],u.outOfBounds(T,A,T,A)||p.push([T,A]);if(T=e.invert(k),A=e.invert(I),R=m,F=s,!s$(T,A,h,d,i,s)&&!Q1(e,T,A,d,h,R,o,a)&&!Q1(e,T,A,d,h,d,o,null)){for(;F-R>=1;)O=(R+F)/2,Q1(e,T,A,d,h,O,o,a)?F=O:R=O;R>m&&(l.x=T,l.y=A,m=R,g=!0)}}!g&&!n&&($=Math.abs(_-b+S-w),T=(b+_)/2,A=(w+S)/2,$>=v&&!s$(T,A,h,d,i,s)&&!Q1(e,T,A,d,h,d,o,null)&&(v=$,l.x=T,l.y=A,y=!0))}return g||y?(T=h/2,A=d/2,o.setRange(e(l.x-T),e(l.y-A),e(l.x+T),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const wKt=["right","center","left"],_Kt=["bottom","middle","top"];function EKt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,_,w,S,T,A,k,I,R;for(let F=0;F<u;++F){if(h=(n[F]&3)-1,p=(n[F]>>>2&3)-1,m=h===0&&p===0||r[F]<0,g=h&&p?Math.SQRT1_2:1,y=r[F]<0?-1:1,v=c[1+h]+r[F]*h*g,T=c[4+p]+y*f*p/2+r[F]*p*g,_=T-f/2,w=T+f/2,A=e(v),I=e(_),R=e(w),!d)if(owe(A,A,I,R,o,a,v,v,_,w,c,m))d=Nf.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,b=S+d/2,A=e(v),k=e(b),owe(A,k,I,R,o,a,v,b,_,w,c,m))return l.x=h?h*y<0?b:v:S,l.y=p?p*y<0?w:_:T,l.align=wKt[h*y+1],l.baseline=_Kt[p*y+1],o.setRange(A,I,k,R),!0}return!1}}function owe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const ZH=0,eq=4,tq=8,nq=0,rq=1,iq=2,SKt={"top-left":ZH+nq,top:ZH+rq,"top-right":ZH+iq,left:eq+nq,middle:eq+rq,right:eq+iq,"bottom-left":tq+nq,bottom:tq+rq,"bottom-right":tq+iq},CKt={naive:gKt,"reduced-search":yKt,floodfill:xKt};function TKt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=AKt(r,f),h=DKt(i,f),p=IKt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=kKt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let _=-1,w=-1;const S=e.map(I=>{const R=v?Nf.width(I,I.text):void 0;return _=Math.max(_,R),w=Math.max(w,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:R}});l=l===null||l===1/0?Math.max(_,w)+Math.max(...r):l;const T=mKt(t[0],t[1],l);let A;if(!b){n&&S.sort((F,O)=>n(F.datum,O.datum));let I=!1;for(let F=0;F<h.length&&!I;++F)I=h[F]===5||d[F]<0;const R=(p&&o||g)&&e.map(F=>F.datum);A=s.length||R?dKt(T,R||[],s,I,g):fKt(T,o&&S)}const k=g?CKt[c](T,A,o,u):EKt(T,A,h,d);return S.forEach(I=>I.opacity=+k(I)),S}function AKt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function DKt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=SKt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function IKt(e){return e&&e.mark&&e.mark.marktype}function kKt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const PX=["x","y","opacity","align","baseline"],N9e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Joe(e){Ye.call(this,null,e)}Joe.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:N9e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:PX.length,default:PX}]};Ot(Joe,Ye,{transform(e,t){function n(s){const o=e[s];return cr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&rt("Size parameter should be specified as a [width, height] array.");const i=e.as||PX;return TKt(t.materialize(t.SOURCE).source||[],e.size,e.sort,Lt(e.offset==null?1:e.offset),Lt(e.anchor||N9e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const RKt=Object.freeze(Object.defineProperty({__proto__:null,label:Joe},Symbol.toStringTag,{value:"Module"}));function P9e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Zoe(e){Ye.call(this,null,e)}Zoe.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Ot(Zoe,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=P9e(r,e.groupby),s=(e.groupby||[]).map(po),o=s.length,a=e.as||[po(e.x),po(e.y)],u=[];i.forEach(l=>{q$e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Ii(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const OX={constant:fse,linear:dse,log:U$e,exp:z$e,pow:V$e,quad:hse,poly:H$e},NKt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function eae(e){Ye.call(this,null,e)}eae.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(OX)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Ot(eae,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=P9e(r,e.groupby),s=(e.groupby||[]).map(po),o=e.method||"linear",a=e.order==null?3:e.order,u=NKt(o,a),l=e.as||[po(e.x),po(e.y)],c=OX[o],f=[];let d=e.extent;vn(OX,o)||rt("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Ii({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||e0(h,e.x),y=v=>{const b={};for(let _=0;_<s.length;++_)b[s[_]]=h.dims[_];b[l[0]]=v[0],b[l[1]]=v[1],f.push(Ii(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):P9(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const PKt=Object.freeze(Object.defineProperty({__proto__:null,loess:Zoe,regression:eae},Symbol.toStringTag,{value:"Module"}));function tae(e){Ye.call(this,null,e)}tae.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const OKt=[-1e5,-1e5,1e5,1e5];Ot(tae,Ye,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:OKt;const s=this.value=Gte.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!MKt(u)?FKt(u):null}return t.reflow(e.modified()).modifies(n)}});function FKt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function MKt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const $Kt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:tae},Symbol.toStringTag,{value:"Module"}));var sq=Math.PI/180,zI=64,FF=2048;function LKt(){var e=[256,256],t,n,r,i,s,o,a,u=O9e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(vv()),m=HKt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],_=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,T)=>T.size-S.size);++v<y;){var w=_[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,BKt(p,w,_,v),w.hasText&&h(m,w,g)&&(b.push(w),g?UKt(g,w):g=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(zI<<5)/m,p.height=FF/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),_=u(e),w=c()<.5?1:-1,S=-w,T,A,k;(T=_(S+=w))&&(A=~~T[0],k=~~T[1],!(Math.min(Math.abs(A),Math.abs(k))>=b));)if(m.x=y+A,m.y=v+k,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!jKt(m,p,e[0]))&&(!g||zKt(m,g))){for(var I=m.sprite,R=m.width>>5,F=e[0]>>5,O=m.x-(R<<4),$=O&127,V=32-$,j=m.y1-m.y0,G=(m.y+m.y0)*F+(O>>5),Y,J=0;J<j;J++){Y=0;for(var L=0;L<=R;L++)p[G+L]|=Y<<V|(L<R?(Y=I[J*R+L])>>>$:0);G+=F}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=yx(p),f):n},f.fontStyle=function(p){return arguments.length?(i=yx(p),f):i},f.fontWeight=function(p){return arguments.length?(s=yx(p),f):s},f.rotate=function(p){return arguments.length?(o=yx(p),f):o},f.text=function(p){return arguments.length?(t=yx(p),f):t},f.spiral=function(p){return arguments.length?(u=qKt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=yx(p),f):r},f.padding=function(p){return arguments.length?(a=yx(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function BKt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(zI<<5)/s,FF/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*sq),g=Math.cos(t.rotate*sq),y=c*g,v=c*m,b=d*g,_=d*m;c=Math.max(Math.abs(y+_),Math.abs(y-_))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=zI<<5&&(o=0,a+=u,u=0),a+d>=FF)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*sq),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var w=i.getImageData(0,0,(zI<<5)/s,FF/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var T=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var k=f*p+(h>>5),I=w[(a+p)*(zI<<5)+(o+h)<<2]?1<<31-h%32:0;S[k]|=I,T|=I}T?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function jKt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function UKt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function zKt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function O9e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function VKt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function HKt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function yx(e){return typeof e=="function"?e:function(){return e}}var qKt={archimedean:O9e,rectangular:VKt};const F9e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],WKt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function nae(e){Ye.call(this,LKt(),e)}nae.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:F9e}]};Ot(nae,Ye,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&rt("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return cr(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||WKt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||F9e;let a=e.fontSize||14,u;if(cr(a)?u=e.fontSizeRange:a=il(a),u){const p=a,m=xi("sqrt")().domain(e0(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Gd).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const GKt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:nae},Symbol.toStringTag,{value:"Module"})),YKt=e=>new Uint8Array(e),KKt=e=>new Uint16Array(e),Pk=e=>new Uint32Array(e);function XKt(){let e=8,t=[],n=Pk(0),r=Q4(0,e),i=Q4(0,e);return{data:()=>t,seen:()=>n=QKt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=Q4(s,e,r),i=Q4(s,e))}}}function QKt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Q4(e,t,n){const r=(t<257?YKt:t<65537?KKt:Pk)(e);return n&&r.set(n),r}function awe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function uwe(){let e=Pk(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=Pk(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=JKt(h,d),c)p=t,m=e,t=Array(c+f),e=Pk(c+f),ZKt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[sEt(u,a[0],0,l),Pv(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function JKt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),uEt(e,t)}function ZKt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function rae(e){Ye.call(this,XKt(),e),this._indices=null,this._dims=null}rae.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Ot(rae,Ye,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=uwe()),s.push(awe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,_,w,S,T;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(_={},v=t.mod,w=0,S=v.length;w<S;++w)_[v[w]._index]=1;for(w=0;w<h;++w)T=r[w],(!o[w]||e.modified("fields",w)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(s[y]=g=uwe(),p[y]=m=g.insert(T,t.source,0)),o[w]=awe(g,w,i[w]).onAdd(m,u));for(w=0,S=a.data().length;w<S;++w)b[w]||(l[w]!==u[w]?f.push(w):_[w]&&u[w]!==c&&d.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function iae(e){Ye.call(this,null,e)}iae.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Ot(iae,Ye,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const eXt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:rae,resolvefilter:iae},Symbol.toStringTag,{value:"Module"})),tXt="RawCode",l_="Literal",nXt="Property",rXt="Identifier",iXt="ArrayExpression",sXt="BinaryExpression",M9e="CallExpression",oXt="ConditionalExpression",aXt="LogicalExpression",uXt="MemberExpression",lXt="ObjectExpression",cXt="UnaryExpression";function kp(e){this.type=e}kp.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=fXt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function fXt(e){switch(e.type){case iXt:return e.elements;case sXt:case aXt:return[e.left,e.right];case M9e:return[e.callee].concat(e.arguments);case oXt:return[e.test,e.consequent,e.alternate];case uXt:return[e.object,e.property];case lXt:return e.properties;case nXt:return[e.key,e.value];case cXt:return[e.argument];case rXt:case l_:case tXt:default:return[]}}var x0,en,et,Qu,Hi,Q9=1,uP=2,c_=3,Vb=4,J9=5,iE=6,gc=7,lP=8,dXt=9;x0={};x0[Q9]="Boolean";x0[uP]="<end>";x0[c_]="Identifier";x0[Vb]="Keyword";x0[J9]="Null";x0[iE]="Numeric";x0[gc]="Punctuator";x0[lP]="String";x0[dXt]="RegularExpression";var hXt="ArrayExpression",pXt="BinaryExpression",mXt="CallExpression",gXt="ConditionalExpression",$9e="Identifier",yXt="Literal",vXt="LogicalExpression",bXt="MemberExpression",xXt="ObjectExpression",wXt="Property",_Xt="UnaryExpression",Oa="Unexpected token %0",EXt="Unexpected number",SXt="Unexpected string",CXt="Unexpected identifier",TXt="Unexpected reserved word",AXt="Unexpected end of input",FX="Invalid regular expression",oq="Invalid regular expression: missing /",L9e="Octal literals are not allowed in strict mode.",DXt="Duplicate data property in object literal not allowed in strict mode",au="ILLEGAL",v3="Disabled.",IXt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),kXt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Z9(e,t){if(!e)throw new Error("ASSERT: "+t)}function ag(e){return e>=48&&e<=57}function sae(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Ok(e){return"01234567".indexOf(e)>=0}function RXt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function b3(e){return e===10||e===13||e===8232||e===8233}function cP(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&IXt.test(String.fromCharCode(e))}function o$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&kXt.test(String.fromCharCode(e))}const NXt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function B9e(){for(;et<Qu;){const e=en.charCodeAt(et);if(RXt(e)||b3(e))++et;else break}}function MX(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)et<Qu&&sae(en[et])?(r=en[et++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):gi({},Oa,au);return String.fromCharCode(i)}function PXt(){var e,t,n,r;for(e=en[et],t=0,e==="}"&&gi({},Oa,au);et<Qu&&(e=en[et++],!!sae(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&gi({},Oa,au),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function j9e(){var e,t;for(e=en.charCodeAt(et++),t=String.fromCharCode(e),e===92&&(en.charCodeAt(et)!==117&&gi({},Oa,au),++et,e=MX("u"),(!e||e==="\\"||!cP(e.charCodeAt(0)))&&gi({},Oa,au),t=e);et<Qu&&(e=en.charCodeAt(et),!!o$(e));)++et,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),en.charCodeAt(et)!==117&&gi({},Oa,au),++et,e=MX("u"),(!e||e==="\\"||!o$(e.charCodeAt(0)))&&gi({},Oa,au),t+=e);return t}function OXt(){var e,t;for(e=et++;et<Qu;){if(t=en.charCodeAt(et),t===92)return et=e,j9e();if(o$(t))++et;else break}return en.slice(e,et)}function FXt(){var e,t,n;return e=et,t=en.charCodeAt(et)===92?j9e():OXt(),t.length===1?n=c_:NXt.hasOwnProperty(t)?n=Vb:t==="null"?n=J9:t==="true"||t==="false"?n=Q9:n=c_,{type:n,value:t,start:e,end:et}}function aq(){var e=et,t=en.charCodeAt(et),n,r=en[et],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++et,{type:gc,value:String.fromCharCode(t),start:e,end:et};default:if(n=en.charCodeAt(et+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return et+=2,{type:gc,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:et};case 33:case 61:return et+=2,en.charCodeAt(et)===61&&++et,{type:gc,value:en.slice(e,et),start:e,end:et}}}if(o=en.substr(et,4),o===">>>=")return et+=4,{type:gc,value:o,start:e,end:et};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return et+=3,{type:gc,value:s,start:e,end:et};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return et+=2,{type:gc,value:i,start:e,end:et};if(i==="//"&&gi({},Oa,au),"<>=!+-*%&|^/".indexOf(r)>=0)return++et,{type:gc,value:r,start:e,end:et};gi({},Oa,au)}function MXt(e){let t="";for(;et<Qu&&sae(en[et]);)t+=en[et++];return t.length===0&&gi({},Oa,au),cP(en.charCodeAt(et))&&gi({},Oa,au),{type:iE,value:parseInt("0x"+t,16),start:e,end:et}}function $Xt(e){let t="0"+en[et++];for(;et<Qu&&Ok(en[et]);)t+=en[et++];return(cP(en.charCodeAt(et))||ag(en.charCodeAt(et)))&&gi({},Oa,au),{type:iE,value:parseInt(t,8),octal:!0,start:e,end:et}}function lwe(){var e,t,n;if(n=en[et],Z9(ag(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=et,e="",n!=="."){if(e=en[et++],n=en[et],e==="0"){if(n==="x"||n==="X")return++et,MXt(t);if(Ok(n))return $Xt(t);n&&ag(n.charCodeAt(0))&&gi({},Oa,au)}for(;ag(en.charCodeAt(et));)e+=en[et++];n=en[et]}if(n==="."){for(e+=en[et++];ag(en.charCodeAt(et));)e+=en[et++];n=en[et]}if(n==="e"||n==="E")if(e+=en[et++],n=en[et],(n==="+"||n==="-")&&(e+=en[et++]),ag(en.charCodeAt(et)))for(;ag(en.charCodeAt(et));)e+=en[et++];else gi({},Oa,au);return cP(en.charCodeAt(et))&&gi({},Oa,au),{type:iE,value:parseFloat(e),start:t,end:et}}function LXt(){var e="",t,n,r,i,s=!1;for(t=en[et],Z9(t==="'"||t==='"',"String literal must starts with a quote"),n=et,++et;et<Qu;)if(r=en[et++],r===t){t="";break}else if(r==="\\")if(r=en[et++],!r||!b3(r.charCodeAt(0)))switch(r){case"u":case"x":en[et]==="{"?(++et,e+=PXt()):e+=MX(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Ok(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),et<Qu&&Ok(en[et])&&(s=!0,i=i*8+"01234567".indexOf(en[et++]),"0123".indexOf(r)>=0&&et<Qu&&Ok(en[et])&&(i=i*8+"01234567".indexOf(en[et++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&en[et]===`
`&&++et;else{if(b3(r.charCodeAt(0)))break;e+=r}return t!==""&&gi({},Oa,au),{type:lP,value:e,octal:s,start:n,end:et}}function BXt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";gi({},FX)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{gi({},FX)}try{return new RegExp(e,t)}catch{return null}}function jXt(){var e,t,n,r,i;for(e=en[et],Z9(e==="/","Regular expression literal must start with a slash"),t=en[et++],n=!1,r=!1;et<Qu;)if(e=en[et++],t+=e,e==="\\")e=en[et++],b3(e.charCodeAt(0))&&gi({},oq),t+=e;else if(b3(e.charCodeAt(0)))gi({},oq);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||gi({},oq),i=t.substr(1,t.length-2),{value:i,literal:t}}function UXt(){var e,t,n;for(t="",n="";et<Qu&&(e=en[et],!!o$(e.charCodeAt(0)));)++et,e==="\\"&&et<Qu?gi({},Oa,au):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&gi({},FX,n),{value:n,literal:t}}function zXt(){var e,t,n,r;return Hi=null,B9e(),e=et,t=jXt(),n=UXt(),r=BXt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:et}}function VXt(e){return e.type===c_||e.type===Vb||e.type===Q9||e.type===J9}function U9e(){if(B9e(),et>=Qu)return{type:uP,start:et,end:et};const e=en.charCodeAt(et);return cP(e)?FXt():e===40||e===41||e===59?aq():e===39||e===34?LXt():e===46?ag(en.charCodeAt(et+1))?lwe():aq():ag(e)?lwe():aq()}function wc(){const e=Hi;return et=e.end,Hi=U9e(),et=e.end,e}function z9e(){const e=et;Hi=U9e(),et=e}function HXt(e){const t=new kp(hXt);return t.elements=e,t}function cwe(e,t,n){const r=new kp(e==="||"||e==="&&"?vXt:pXt);return r.operator=e,r.left=t,r.right=n,r}function qXt(e,t){const n=new kp(mXt);return n.callee=e,n.arguments=t,n}function WXt(e,t,n){const r=new kp(gXt);return r.test=e,r.consequent=t,r.alternate=n,r}function oae(e){const t=new kp($9e);return t.name=e,t}function VI(e){const t=new kp(yXt);return t.value=e.value,t.raw=en.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function fwe(e,t,n){const r=new kp(bXt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function GXt(e){const t=new kp(xXt);return t.properties=e,t}function dwe(e,t,n){const r=new kp(wXt);return r.key=t,r.value=n,r.kind=e,r}function YXt(e,t){const n=new kp(_Xt);return n.operator=e,n.argument=t,n.prefix=!0,n}function gi(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(Z9(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=et,n.description=i,n}function e7(e){e.type===uP&&gi(e,AXt),e.type===iE&&gi(e,EXt),e.type===lP&&gi(e,SXt),e.type===c_&&gi(e,CXt),e.type===Vb&&gi(e,TXt),gi(e,Oa,e.value)}function Ju(e){const t=wc();(t.type!==gc||t.value!==e)&&e7(t)}function ws(e){return Hi.type===gc&&Hi.value===e}function uq(e){return Hi.type===Vb&&Hi.value===e}function KXt(){const e=[];for(et=Hi.start,Ju("[");!ws("]");)ws(",")?(wc(),e.push(null)):(e.push(f_()),ws("]")||Ju(","));return wc(),HXt(e)}function hwe(){et=Hi.start;const e=wc();return e.type===lP||e.type===iE?(e.octal&&gi(e,L9e),VI(e)):oae(e.value)}function XXt(){var e,t,n,r;if(et=Hi.start,e=Hi,e.type===c_)return n=hwe(),Ju(":"),r=f_(),dwe("init",n,r);if(e.type===uP||e.type===gc)e7(e);else return t=hwe(),Ju(":"),r=f_(),dwe("init",t,r)}function QXt(){var e=[],t,n,r,i={},s=String;for(et=Hi.start,Ju("{");!ws("}");)t=XXt(),t.key.type===$9e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?gi({},DXt):i[r]=!0,e.push(t),ws("}")||Ju(",");return Ju("}"),GXt(e)}function JXt(){Ju("(");const e=aae();return Ju(")"),e}const ZXt={if:1};function eQt(){var e,t,n;if(ws("("))return JXt();if(ws("["))return KXt();if(ws("{"))return QXt();if(e=Hi.type,et=Hi.start,e===c_||ZXt[Hi.value])n=oae(wc().value);else if(e===lP||e===iE)Hi.octal&&gi(Hi,L9e),n=VI(wc());else{if(e===Vb)throw new Error(v3);e===Q9?(t=wc(),t.value=t.value==="true",n=VI(t)):e===J9?(t=wc(),t.value=null,n=VI(t)):ws("/")||ws("/=")?(n=VI(zXt()),z9e()):e7(wc())}return n}function tQt(){const e=[];if(Ju("("),!ws(")"))for(;et<Qu&&(e.push(f_()),!ws(")"));)Ju(",");return Ju(")"),e}function nQt(){et=Hi.start;const e=wc();return VXt(e)||e7(e),oae(e.value)}function rQt(){return Ju("."),nQt()}function iQt(){Ju("[");const e=aae();return Ju("]"),e}function sQt(){var e,t,n;for(e=eQt();;)if(ws("."))n=rQt(),e=fwe(".",e,n);else if(ws("("))t=tQt(),e=qXt(e,t);else if(ws("["))n=iQt(),e=fwe("[",e,n);else break;return e}function pwe(){const e=sQt();if(Hi.type===gc&&(ws("++")||ws("--")))throw new Error(v3);return e}function MF(){var e,t;if(Hi.type!==gc&&Hi.type!==Vb)t=pwe();else{if(ws("++")||ws("--"))throw new Error(v3);if(ws("+")||ws("-")||ws("~")||ws("!"))e=wc(),t=MF(),t=YXt(e.value,t);else{if(uq("delete")||uq("void")||uq("typeof"))throw new Error(v3);t=pwe()}}return t}function mwe(e){let t=0;if(e.type!==gc&&e.type!==Vb)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function oQt(){var e,t,n,r,i,s,o,a,u,l;if(e=Hi,u=MF(),r=Hi,i=mwe(r),i===0)return u;for(r.prec=i,wc(),t=[e,Hi],o=MF(),s=[u,r,o];(i=mwe(Hi))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=cwe(a,u,o),s.push(n);r=wc(),r.prec=i,s.push(r),t.push(Hi),n=MF(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=cwe(s[l-1].value,s[l-2],n),l-=2;return n}function f_(){var e,t,n;return e=oQt(),ws("?")&&(wc(),t=f_(),Ju(":"),n=f_(),e=WXt(e,t,n)),e}function aae(){const e=f_();if(ws(","))throw new Error(v3);return e}function uae(e){en=e,et=0,Qu=en.length,Hi=null,z9e();const t=aae();if(Hi.type!==uP)throw new Error("Unexpect token after expression.");return t}var V9e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function H9e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&rt("Missing arguments to clamp function."),o.length>3&&rt("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&rt("Missing arguments to if function."),o.length>3&&rt("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function aQt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function q9e(e){e=e||{};const t=e.allowed?yp(e.allowed):{},n=e.forbidden?yp(e.forbidden):{},r=e.constants||V9e,i=(e.functions||H9e)(f),s=e.globalvar,o=e.fieldvar,a=cr(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Bt(p))return p;const m=d[p.type];return m==null&&rt("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:vn(n,m)?rt("Illegal identifier: "+m):vn(r,m)?r[m]:vn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[aQt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&rt("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=vn(i,m)&&i[m];return y||rt("Unrecognized function: "+m),cr(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const gwe=Symbol("vega_selection_getter");function W9e(e){return(!e.getter||!e.getter[gwe])&&(e.getter=Hd(e.field),e.getter[gwe]=!0),e.getter}const lae="intersect",ywe="union",uQt="vlMulti",lQt="vlPoint",vwe="or",cQt="and",im="_vgsid_",x3=Hd(im),fQt="E",dQt="R",hQt="R-E",pQt="R-LE",mQt="R-RE",a$="index:unit";function bwe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=W9e(a)(e),gv(o)&&(o=Wu(o)),gv(r[s])&&(r[s]=Wu(r[s])),at(r[s])&&gv(r[s][0])&&(r[s]=r[s].map(Wu)),a.type===fQt){if(at(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===dQt){if(!nS(o,r[s]))return!1}else if(a.type===mQt){if(!nS(o,r[s],!0,!1))return!1}else if(a.type===hQt){if(!nS(o,r[s],!1,!1))return!1}else if(a.type===pQt&&!nS(o,r[s],!1,!0))return!1;return!0}function gQt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[a$]&&r[a$].value:void 0,o=n===lae,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=bwe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=bwe(t,l),o^h)return h;return a&&o}const G9e=kb(x3),yQt=G9e.left,vQt=G9e.right;function bQt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[a$]&&r[a$].value:void 0,o=n===lae,a=x3(t),u=yQt(i,a);if(u===i.length||x3(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(vQt(i,a)-u<s.size)return!1}return!0}function xQt(e,t){return e.map(n=>lr(t.fields?{values:t.fields.map(r=>W9e(r)(n.datum))}:{[im]:x3(n.datum)},t))}function wQt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,_=0,w,S;_<b;++_)if(l=s[_],d=l.unit,c=l.fields,f=l.values,c&&f){for(w=0,S=c.length;w<S;++w)h=c[w],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=lq[`${y}_union`],m[d]=v(g,Lt(f[w]));n&&(g=a[d]||(a[d]=[]),g.push(Lt(f).reduce((T,A,k)=>(T[c[k].field]=A,T),{})))}else h=im,p=x3(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[im]:p}));if(t=t||ywe,o[im]?o[im]=lq[`${im}_${t}`](...Object.values(o[im])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(A=>o[T][A]).reduce((A,k)=>A===void 0?k:lq[`${u[T]}_${t}`](A,k))}),s=Object.keys(a),n&&s.length){const T=r?lQt:uQt;o[T]=t===ywe?{[vwe]:s.reduce((A,k)=>(A.push(...a[k]),A),[])}:{[cQt]:s.map(A=>({[vwe]:a[A]}))}}return o}var lq={[`${im}_union`]:yEt,[`${im}_intersect`]:mEt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Wu(t[0]),r=Wu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Wu(t[0]),r=Wu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const _Qt=":",EQt="@";function cae(e,t,n,r){t[0].type!==l_&&rt("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Xr(t).value,o="unit",a=EQt+o,u=_Qt+i;s===lae&&!vn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),vn(r,u)||(r[u]=n.getData(i).tuplesRef())}function Y9e(e){const t=this.context.data[e];return t?t.values.value:[]}function SQt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function CQt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(qd).insert(t)),1}function TQt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const fP=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},AQt=fP("format"),K9e=fP("timeFormat"),DQt=fP("utcFormat"),IQt=fP("timeParse"),kQt=fP("utcParse"),J4=new Date(2e3,0,1);function t7(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(J4.setYear(2e3),J4.setMonth(e),J4.setDate(t),K9e.call(this,J4,n))}function RQt(e){return t7.call(this,e,1,"%B")}function NQt(e){return t7.call(this,e,1,"%b")}function PQt(e){return t7.call(this,0,2+e,"%A")}function OQt(e){return t7.call(this,0,2+e,"%a")}const FQt=":",MQt="@",$X="%",X9e="$";function fae(e,t,n,r){t[0].type!==l_&&rt("First argument to data functions must be a string literal.");const i=t[0].value,s=FQt+i;if(!vn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function $Qt(e,t,n,r){t[0].type!==l_&&rt("First argument to indata must be a string literal."),t[1].type!==l_&&rt("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=MQt+s;vn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ml(e,t,n,r){if(t[0].type===l_)xwe(n,r,t[0].value);else for(e in n.scales)xwe(n,r,e)}function xwe(e,t,n){const r=$X+n;if(!vn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function w0(e,t){if(cr(e))return e;if(Bt(e)){const n=t.scales[e];return n&&lHt(n.value)?n.value:void 0}}function LQt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ml,n._range=Ml,n._scale=Ml;const r=i=>"_["+(i.type===l_?Nt($X+i.value):Nt($X)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function dae(e,t){return function(n,r,i){if(n){const s=w0(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const BQt=dae("area",RAt),jQt=dae("bounds",FAt),UQt=dae("centroid",UAt);function zQt(e,t){const n=w0(e,(t||this).context);return n&&n.scale()}function VQt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function hae(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function HQt(){return hae(this.context.dataflow,"warn",arguments)}function qQt(){return hae(this.context.dataflow,"info",arguments)}function WQt(){return hae(this.context.dataflow,"debug",arguments)}function cq(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function LX(e){const t=Fv(e),n=cq(t.r),r=cq(t.g),i=cq(t.b);return .2126*n+.7152*r+.0722*i}function GQt(e,t){const n=LX(e),r=LX(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function YQt(){const e=[].slice.call(arguments);return e.unshift({}),lr(...e)}function Q9e(e,t){return e===t||e!==e&&t!==t?!0:at(e)?at(t)&&e.length===t.length?KQt(e,t):!1:jt(e)&&jt(t)?J9e(e,t):!1}function KQt(e,t){for(let n=0,r=e.length;n<r;++n)if(!Q9e(e[n],t[n]))return!1;return!0}function J9e(e,t){for(const n in e)if(!Q9e(e[n],t[n]))return!1;return!0}function wwe(e){return t=>J9e(e,t)}function XQt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?qd:at(n)||C9(n)?n:wwe(n),c.remove(f)),t&&c.insert(t),r&&(f=wwe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function QQt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function JQt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const _we={};function ZQt(e,t){const n=_we[t]||(_we[t]=Hd(t));return at(e)?e.map(n):n(e)}function pae(e){return at(e)||ArrayBuffer.isView(e)?e:null}function mae(e){return pae(e)||(Bt(e)?e:null)}function eJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return pae(e).join(...n)}function tJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return mae(e).indexOf(...n)}function nJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return mae(e).lastIndexOf(...n)}function rJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return mae(e).slice(...n)}function iJt(e,t,n){return cr(n)&&rt("Function argument passed to replace."),String(e).replace(t,n)}function sJt(e){return pae(e).slice().reverse()}function oJt(e,t,n){return Bse(e||0,t||0,n||0)}function aJt(e,t){const n=w0(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function uJt(e,t){const n=w0(e,(t||this).context);return n?n.copy():void 0}function lJt(e,t){const n=w0(e,(t||this).context);return n?n.domain():[]}function cJt(e,t,n){const r=w0(e,(n||this).context);return r?at(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function fJt(e,t){const n=w0(e,(t||this).context);return n&&n.range?n.range():[]}function dJt(e,t,n){const r=w0(e,(n||this).context);return r?r(t):void 0}function hJt(e,t,n,r,i){e=w0(e,(i||this).context);const s=zLe(t,n);let o=e.domain(),a=o[0],u=Xr(o),l=rl;return u-a?l=kLe(e,a,u):e=(e.interpolator?xi("sequential")().interpolator(e.interpolator()):xi("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Xr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function pJt(e,t,n){const r=w0(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function mJt(e){let t=null;return function(n){return n?p3(n,t=t||WC(e)):e}}const Z9e=e=>e.data;function e7e(e,t){const n=Y9e.call(t,e);return n.root&&n.root.lookup||{}}function gJt(e,t,n){const r=e7e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(Z9e):void 0}function yJt(e,t){const n=e7e(e,this)[t];return n?n.ancestors().map(Z9e):void 0}const t7e=()=>typeof window<"u"&&window||null;function vJt(){const e=t7e();return e?e.screen:{}}function bJt(){const e=t7e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function xJt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function n7e(e,t,n){if(!e)return[];const[r,i]=e,s=new Go().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return BBe(o,s,wJt(t))}function wJt(e){let t=null;if(e){const n=Lt(e.marktype),r=Lt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function _Jt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Lt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function EJt(e){return Lt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function SJt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Go().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),n7e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>CJt(u.x,u.y,t))}function CJt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const w3={random(){return Gd()},cumulativeNormal:k9,cumulativeLogNormal:sse,cumulativeUniform:lse,densityNormal:ese,densityLogNormal:ise,densityUniform:use,quantileNormal:R9,quantileLogNormal:ose,quantileUniform:cse,sampleNormal:I9,sampleLogNormal:rse,sampleUniform:ase,isArray:at,isBoolean:zb,isDate:gv,isDefined(e){return e!==void 0},isNumber:fi,isObject:jt,isRegExp:j5e,isString:Bt,isTuple:C9,isValid(e){return e!=null&&e===e},toBoolean:Lie,toDate(e){return Bie(e)},toNumber:Wu,toString:jie,indexof:tJt,join:eJt,lastindexof:nJt,replace:iJt,reverse:sJt,slice:rJt,flush:L5e,lerp:U5e,merge:YQt,pad:H5e,peek:Xr,pluck:ZQt,span:qN,inrange:nS,truncate:q5e,rgb:Fv,lab:s8,hcl:o8,hsl:r8,luminance:LX,contrast:GQt,sequence:Ac,format:AQt,utcFormat:DQt,utcParse:kQt,utcOffset:s$e,utcSequence:u$e,timeFormat:K9e,timeParse:IQt,timeOffset:i$e,timeSequence:a$e,timeUnitSpecifier:G5e,monthFormat:RQt,monthAbbrevFormat:NQt,dayFormat:PQt,dayAbbrevFormat:OQt,quarter:O5e,utcquarter:F5e,week:K5e,utcweek:J5e,dayofyear:Y5e,utcdayofyear:Q5e,warn:HQt,info:qQt,debug:WQt,extent(e){return e0(e)},inScope:VQt,intersect:n7e,clampRange:M5e,pinchDistance:QQt,pinchAngle:JQt,screen:vJt,containerSize:xJt,windowSize:bJt,bandspace:oJt,setdata:CQt,pathShape:mJt,panLinear:k5e,panLog:R5e,panPow:N5e,panSymlog:P5e,zoomLinear:Nie,zoomLog:Pie,zoomPow:j5,zoomSymlog:Oie,encode:TQt,modify:XQt,lassoAppend:_Jt,lassoPath:EJt,intersectLasso:SJt},TJt=["view","item","group","xy","x","y"],AJt="event.vega.",r7e="this.",gae={},i7e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Nt(X9e+e)}]`,functions:DJt,constants:V9e,visitors:gae},s7e=q9e(i7e);function DJt(e){const t=H9e(e);TJt.forEach(n=>t[n]=AJt+n);for(const n in w3)t[n]=r7e+n;return lr(t,LQt(e,w3,gae)),t}function Oo(e,t,n){return arguments.length===1?w3[e]:(w3[e]=t,n&&(gae[e]=n),s7e.functions[e]=r7e+e,this)}Oo("bandwidth",aJt,Ml);Oo("copy",uJt,Ml);Oo("domain",lJt,Ml);Oo("range",fJt,Ml);Oo("invert",cJt,Ml);Oo("scale",dJt,Ml);Oo("gradient",hJt,Ml);Oo("geoArea",BQt,Ml);Oo("geoBounds",jQt,Ml);Oo("geoCentroid",UQt,Ml);Oo("geoShape",pJt,Ml);Oo("geoScale",zQt,Ml);Oo("indata",SQt,$Qt);Oo("data",Y9e,fae);Oo("treePath",gJt,fae);Oo("treeAncestors",yJt,fae);Oo("vlSelectionTest",gQt,cae);Oo("vlSelectionIdTest",bQt,cae);Oo("vlSelectionResolve",wQt,cae);Oo("vlSelectionTuples",xQt);function n0(e,t){const n={};let r;try{e=Bt(e)?e:Nt(e)+"",r=uae(e)}catch{rt("Expression parse error: "+e)}r.visit(s=>{if(s.type!==M9e)return;const o=s.callee.name,a=i7e.visitors[o];a&&a(o,s.arguments,t,n)});const i=s7e(r);return i.globals.forEach(s=>{const o=X9e+s;!vn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:lr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function IJt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const kJt=yp(["rule"]),Ewe=yp(["group","image","rect"]);function RJt(e,t){let n="";return kJt[t]||(e.x2&&(e.x?(Ewe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Ewe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function yae(e){return(e+"").toLowerCase()}function NJt(e){return yae(e)==="operator"}function PJt(e){return yae(e)==="collect"}function UD(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function OJt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var FJt={operator:(e,t)=>UD(e,["_"],t.code),parameter:(e,t)=>UD(e,["datum","_"],t.code),event:(e,t)=>UD(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return UD(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Nt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=RJt(r,n),i+="return m;",UD(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Nt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),OJt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function MJt(e){const t=this;NJt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function $Jt(e){const t=this;if(e.params){const n=t.get(e.id);n||rt("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function LJt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=at(i)?i.map(s=>Swe(s,n,t)):Swe(i,n,t)}return t}function Swe(e,t,n){if(!e||!jt(e))return e;for(let r=0,i=Cwe.length,s;r<i;++r)if(s=Cwe[r],vn(e,s.key))return s.parse(e,t,n);return e}var Cwe=[{key:"$ref",parse:BJt},{key:"$key",parse:UJt},{key:"$expr",parse:jJt},{key:"$field",parse:zJt},{key:"$encode",parse:HJt},{key:"$compare",parse:VJt},{key:"$context",parse:qJt},{key:"$subflow",parse:WJt},{key:"$tupleid",parse:GJt}];function BJt(e,t){return t.get(e.$ref)||rt("Operator not defined: "+e.$ref)}function jJt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=nf(t.parameterExpression(e.$expr),e.$fields))}function UJt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=$ie(e.$key,e.$flat,t.expr.codegen))}function zJt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Hd(e.$field,e.$name,t.expr.codegen))}function VJt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Lt(e.$compare).map(i=>i&&i.$tupleid?mn:i);return t.fn[n]||(t.fn[n]=Fie(r,e.$order,t.expr.codegen))}function HJt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=nf(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function qJt(e,t){return t}function WJt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function GJt(){return mn}function YJt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&rt("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function KJt(e){var t=this,n=jt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||rt("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const XJt={skip:!0};function QJt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function JJt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],XJt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(qd).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function o7e(e,t,n,r){return new a7e(e,t,n,r)}function a7e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||FJt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Twe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}a7e.prototype=Twe.prototype={fork(){const e=new Twe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),PJt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[yae(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:IJt,parseOperator:MJt,parseOperatorParameters:$Jt,parseParameters:LJt,parseStream:YJt,parseUpdate:KJt,getState:QJt,setState:JJt};function ZJt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),u7e(t,e.description()))}function u7e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function eZt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const fq="default";function tZt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:fq,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Bt(i)?i:i.user:fq,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Bt(r)||(i=r.item,r=r.user),BX(e,r&&r!==fq?r:i||r),i},{cursor:t})}function BX(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function u$(e,t){var n=e._runtime.data;return vn(n,t)||rt("Unrecognized data set: "+t),n[t]}function nZt(e,t){return arguments.length<2?u$(this,e).values.value:n7.call(this,e,nE().remove(qd).insert(t))}function n7(e,t){D$e(t)||rt("Second argument to changes must be a changeset.");const n=u$(this,e);return n.modified=!0,this.pulse(n.input,t)}function rZt(e,t){return n7.call(this,e,nE().insert(t))}function iZt(e,t){return n7.call(this,e,nE().remove(t))}function l7e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function c7e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function r7(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function sZt(e){var t=r7(e),n=l7e(e),r=c7e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function oZt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=r7(e),o=t.changedTouches?t.changedTouches[0]:t,s=Y9(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=aZt(e,n,s),t}function aZt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Bt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:il(e),item:il(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Awe="view",uZt="timer",lZt="window",cZt={trap:!1};function fZt(e){const t=lr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{at(r[s])&&(r[s]=yp(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function f7e(e,t,n,r){e._eventListeners.push({type:n,sources:Lt(t),handler:r})}function dZt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function Z4(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||jt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function hZt(e,t,n){var r=this,i=new D9(n),s=function(l,c){r.runAsync(null,()=>{e===Awe&&dZt(r,t)&&l.preventDefault(),i.receive(oZt(r,l,c))})},o;if(e===uZt)Z4(r,"timer",t)&&r.timer(s,t);else if(e===Awe)Z4(r,"view",t)&&r.addEventListener(t,s,cZt);else if(e===lZt?Z4(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&Z4(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);f7e(r,o,t,s)}return i}function Dwe(e){return e.item}function Iwe(e){return e.item.mark.source}function kwe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function pZt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Dwe),Iwe,kwe(e)),this.on(this.events("view","pointerout",Dwe),Iwe,kwe(t)),this}function mZt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Pf(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const gZt="vega-bind",yZt="vega-bind-name",vZt="vega-bind-radio";function bZt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Mie(r.debounce,i.update))),(r.input==null&&r.element?xZt:_Zt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function xZt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),f7e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(wZt(i))}}function wZt(e){return typeof Event<"u"?new Event(e):{type:e}}function _Zt(e,t,n,r){const i=r.signal(n.signal),s=Pf("div",{class:gZt}),o=n.input==="radio"?s:s.appendChild(Pf("label"));o.appendChild(Pf("span",{class:yZt},n.name||n.signal)),t.appendChild(s);let a=EZt;switch(n.input){case"checkbox":a=SZt;break;case"select":a=CZt;break;case"radio":a=TZt;break;case"range":a=AZt;break}a(e,o,n,i)}function EZt(e,t,n,r){const i=Pf("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function SZt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Pf("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function CZt(e,t,n,r){const i=Pf("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};l$(o,r)&&(u.selected=!0),i.appendChild(Pf("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(l$(n.options[a],o)){i.selectedIndex=a;return}}}function TZt(e,t,n,r){const i=Pf("span",{class:vZt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};l$(o,r)&&(u.checked=!0);const l=Pf("input",u);l.addEventListener("change",()=>e.update(o));const c=Pf("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)l$(a[l].value,o)&&(a[l].checked=!0)}}function AZt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Ov(s,i,100),a=Pf("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Pf("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function l$(e,t){return e===t||e+""==t+""}function d7e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,l7e(e),c7e(e),r7(e),i,s).background(e.background())}function vae(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function DZt(e,t,n,r){const i=new r(e.loader(),vae(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,r7(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function IZt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=K9(r);e=n._el=e?dq(n,e,!0):null,ZJt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||aP,a=e?s.renderer:s.headless;return n._renderer=a?d7e(n,n._renderer,e,a):null,n._handler=DZt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=dq(n,t,!0):e.appendChild(Pf("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=dq(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{bZt(n,u.element||t,u)})),n}function dq(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const zD=e=>+e||0,kZt=e=>({top:e,bottom:e,left:e,right:e});function Rwe(e){return jt(e)?{top:zD(e.top),bottom:zD(e.bottom),left:zD(e.left),right:zD(e.right)}:kZt(zD(e))}async function bae(e,t,n,r){const i=K9(t),s=i&&i.headless;return s||rt("Unrecognized renderer type: "+t),await e.runAsync(),d7e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function RZt(e,t){e!==Y1.Canvas&&e!==Y1.SVG&&e!==Y1.PNG&&rt("Unrecognized image type: "+e);const n=await bae(this,e,t);return e===Y1.SVG?NZt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function NZt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function PZt(e,t){return(await bae(this,Y1.Canvas,e,t)).canvas()}async function OZt(e){return(await bae(this,Y1.SVG,e)).svg()}function FZt(e,t,n){return o7e(e,zC,w3,n).parse(t)}function MZt(e){var t=this._runtime.scales;return vn(t,e)||rt("Unrecognized scale or projection: "+e),t[e].value}var h7e="width",p7e="height",xae="padding",Nwe={skip:!0};function m7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===xae?r.left+r.right:0)}function g7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===xae?r.top+r.bottom:0)}function $Zt(e){var t=e._signals,n=t[h7e],r=t[p7e],i=t[xae];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=m7e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=g7e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function LZt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(h7e,n,Nwe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(p7e,r,Nwe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function BZt(e){return this._runtime.getState(e||{data:jZt,signals:UZt,recurse:!0})}function jZt(e,t){return t.modified&&at(t.input.value)&&!e.startsWith("_:vega:_")}function UZt(e,t){return!(e==="parent"||t instanceof zC.proxy)}function zZt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function VZt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(YSt(n,t))}function HZt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",qZt(r))}function qZt(e){return e==null?"":at(e)?y7e(e):jt(e)&&!gv(e)?WZt(e):e+""}function WZt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(at(n)?y7e(n):v7e(n))}).join(`
`)}function y7e(e){return"["+e.map(v7e).join(", ")+"]"}function v7e(e){return at(e)?"[]":jt(e)&&!gv(e)?"{}":e}function GZt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function b7e(e,t){const n=this;if(t=t||{},FS.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=lr({},e.locale,t.locale);n.locale(v$e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Y1.Canvas,n._scenegraph=new dBe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||HZt,n._redraw=!0,n._handler=new aP().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=fZt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=FZt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:lr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=m7e(n,n._width),n._viewHeight=g7e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,$Zt(n),eZt(n),tZt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function e6(e,t){return vn(e._signals,t)?e._signals[t]:rt("Unrecognized signal name: "+Nt(t))}function x7e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Pwe(e,t,n,r){let i=x7e(n,r);return i||(i=vae(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Owe(e,t,n){const r=x7e(t,n);return r&&t._targets.remove(r),e}Ot(b7e,FS,{async evaluate(e,t,n){if(await FS.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,sZt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&EF(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&u7e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=e6(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Rwe(e)):Rwe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(K9(e)||rt("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(FS.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(e6(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:LZt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=vae(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Pwe(this,e,e6(this,e),t)},removeSignalListener(e,t){return Owe(this,e6(this,e),t)},addDataListener(e,t){return Pwe(this,e,u$(this,e).values,t)},removeDataListener(e,t){return Owe(this,u$(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=BX(this,null);this._globalCursor=!!e,t&&BX(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:VZt,events:hZt,finalize:mZt,hover:pZt,data:nZt,change:n7,insert:rZt,remove:iZt,scale:MZt,initialize:IZt,toImageURL:RZt,toCanvas:PZt,toSVG:OZt,getState:BZt,setState:zZt,_watchPixelRatio:GZt});const YZt="view",c$="[",f$="]",w7e="{",_7e="}",KZt=":",E7e=",",XZt="@",QZt=">",JZt=/[[\]{}]/,ZZt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let S7e,C7e;function Hb(e,t,n){return S7e=t||YZt,C7e=n||ZZt,T7e(e.trim()).map(jX)}function een(e){return C7e[e]}function Fk(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function T7e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Fk(e,i,E7e,c$+w7e,f$+_7e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function jX(e){return e[0]==="["?ten(e):nen(e)}function ten(e){const t=e.length;let n=1,r;if(n=Fk(e,n,f$,c$,f$),n===t)throw"Empty between selector: "+e;if(r=T7e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==QZt)throw"Expected '>' after between selector: "+e;r=r.map(jX);const i=jX(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function nen(e){const t={source:S7e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===_7e){if(a=e.lastIndexOf(w7e),a>=0){try{r=ren(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===XZt&&(i=++a),u=Fk(e,a,KZt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=Fk(e,a,c$),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=Fk(e,a,f$),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==c$)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||JZt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):een(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function ren(e){const t=e.split(E7e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function ien(e){return jt(e)?e:{type:e||"pad"}}const VD=e=>+e||0,sen=e=>({top:e,bottom:e,left:e,right:e});function oen(e){return jt(e)?e.signal?e:{top:VD(e.top),bottom:VD(e.bottom),left:VD(e.left),right:VD(e.right)}:sen(VD(e))}const Fa=e=>jt(e)&&!at(e)?lr({},e):{value:e};function Fwe(e,t,n,r){return n!=null?(jt(n)&&!at(n)||at(n)&&n.length&&jt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function pu(e,t,n){for(const r in t)Fwe(e,r,t[r]);for(const r in n)Fwe(e,r,n[r],"update")}function wA(e,t,n){for(const r in t)n&&vn(n,r)||(e[r]=lr(e[r]||{},t[r]));return e}function I2(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const wae="mark",_ae="frame",Eae="scope",aen="axis",uen="axis-domain",len="axis-grid",cen="axis-label",fen="axis-tick",den="axis-title",hen="legend",pen="legend-band",men="legend-entry",gen="legend-gradient",A7e="legend-label",yen="legend-symbol",ven="legend-title",ben="title",xen="title-text",wen="title-subtitle";function _en(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!I2(u,e)&&hq(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===_ae?i.group:n===wae?lr({},i.mark,i[t]):null;for(u in c)l=I2(u,e)||(u==="fill"||u==="stroke")&&(I2("fill",e)||I2("stroke",e)),l||hq(s,u,c[u]);Lt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)I2(h,e)||hq(s,h,d[h])}),e=lr({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=lr(o,e.enter),a&&(e.update=lr(a,e.update)),e}function hq(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const D7e=e=>Bt(e)?Nt(e):e.signal?`(${e.signal})`:I7e(e);function i7(e){if(e.gradient!=null)return Sen(e);let t=e.signal?`(${e.signal})`:e.color?Een(e.color):e.field!=null?I7e(e.field):e.value!==void 0?Nt(e.value):void 0;return e.scale!=null&&(t=Cen(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${$F(e.exponent)})`),e.mult!=null&&(t+=`*${$F(e.mult)}`),e.offset!=null&&(t+=`+${$F(e.offset)}`),e.round&&(t=`round(${t})`),t}const t6=(e,t,n,r)=>`(${e}(${[t,n,r].map(i7).join(",")})+'')`;function Een(e){return e.c?t6("hcl",e.h,e.c,e.l):e.h||e.s?t6("hsl",e.h,e.s,e.l):e.l||e.a?t6("lab",e.l,e.a,e.b):e.r||e.g||e.b?t6("rgb",e.r,e.g,e.b):null}function Sen(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Nt(n));for(;t.length&&Xr(t)==null;)t.pop();return t.unshift(D7e(e.gradient)),`gradient(${t.join(",")})`}function $F(e){return jt(e)?"("+i7(e)+")":e}function I7e(e){return k7e(jt(e)?e:{datum:e})}function k7e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):rt("Invalid field reference: "+Nt(e));return e.signal||(r=Bt(r)?v0(r).map(Nt).join("]["):k7e(r)),t+"["+r+"]"}function Cen(e,t){const n=D7e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+$F(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Ten(e){let t="";return e.forEach(n=>{const r=i7(n);t+=n.test?`(${n.test})?${r}:`:r}),Xr(t)===":"&&(t+="null"),t}function R7e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=_en(e,t,n,r,i.config);for(const a in e)o[a]=Aen(e[a],t,s,i);return s}function Aen(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Ien(Den(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Den(e){return at(e)?Ten(e):i7(e)}function Ien(e,t,n,r){const i=n0(e,t);return i.$fields.forEach(s=>r[s]=1),lr(n,i.$params),i.$expr}const ken="outer",Ren=["value","update","init","react","bind"];function Mwe(e,t){rt(e+' for "outer" push: '+Nt(t))}function N7e(e,t){const n=e.name;if(e.push===ken)t.signals[n]||Mwe("No prior signal definition",n),Ren.forEach(r=>{e[r]!==void 0&&Mwe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function UX(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function s7(e,t,n,r){return new UX(e,t,n,r)}function d$(e,t){return s7("operator",e,t)}function pn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function _3(e,t){return t?{$field:e,$name:t}:{$field:e}}const zX=_3("key");function $we(e,t){return{$compare:e,$order:t}}function Nen(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Pen="ascending",Oen="descending";function Fen(e){return jt(e)?(e.order===Oen?"-":"+")+o7(e.op,e.field):""}function o7(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Sae="scope",VX="view";function da(e){return e&&e.signal}function Men(e){return e&&e.expr}function LF(e){if(da(e))return!0;if(jt(e)){for(const t in e)if(LF(e[t]))return!0}return!1}function Fh(e,t){return e??t}function Fw(e){return e&&e.signal||e}const Lwe="timer";function E3(e,t){return(e.merge?Len:e.stream?Ben:e.type?jen:rt("Invalid stream specification: "+Nt(e)))(e,t)}function $en(e){return e===Sae?VX:e||VX}function Len(e,t){const n=e.merge.map(i=>E3(i,t)),r=Cae({merge:n},e,t);return t.addStream(r).id}function Ben(e,t){const n=E3(e.stream,t),r=Cae({stream:n},e,t);return t.addStream(r).id}function jen(e,t){let n;e.type===Lwe?(n=t.event(Lwe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event($en(e.source),e.type);const r=Cae({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Cae(e,t,n){let r=t.between;return r&&(r.length!==2&&rt('Stream "between" parameter must have 2 entries: '+Nt(t)),e.between=[E3(r[0],n),E3(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Uen(t.marktype,t.markname,t.markrole)),t.source===Sae&&r.push("inScope(event.item)"),r.length&&(e.filter=n0("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Uen(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const zen={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Ven(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||rt("Signal update missing events specification."),Bt(s)&&(s=Hb(s,t.isSubscope()?Sae:VX)),s=Lt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[qen(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&rt("Signal encode and update are mutually exclusive."),o="encode(item(),"+Nt(r)+")"),i.update=Bt(o)?n0(o,t):o.expr!=null?n0(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:zen,$params:{$value:t.signalRef(o.signal)}}:rt("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(lr(Hen(u,t),i)))}function Hen(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):E3(e,t)}}function qen(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Wen(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?rt("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=n0(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Ven(i,t,n.id))}const ts=e=>(t,n,r)=>s7(e,n,t||void 0,r),P7e=ts("aggregate"),Gen=ts("axisticks"),O7e=ts("bound"),Rp=ts("collect"),Bwe=ts("compare"),Yen=ts("datajoin"),F7e=ts("encode"),Ken=ts("expression"),Xen=ts("facet"),Qen=ts("field"),Jen=ts("key"),Zen=ts("legendentries"),etn=ts("load"),ttn=ts("mark"),ntn=ts("multiextent"),rtn=ts("multivalues"),itn=ts("overlap"),stn=ts("params"),M7e=ts("prefacet"),otn=ts("projection"),atn=ts("proxy"),utn=ts("relay"),$7e=ts("render"),ltn=ts("scale"),sE=ts("sieve"),ctn=ts("sortitems"),L7e=ts("viewlayout"),ftn=ts("values");let dtn=0;const B7e={min:"min",max:"max",count:"sum"};function htn(e,t){const n=e.type||"linear";SLe(n)||rt("Unrecognized scale type: "+Nt(n)),t.addScale(e.name,{type:n,domain:void 0})}function ptn(e,t){const n=t.getScale(e.name).params;let r;n.domain=j7e(e.domain,e,t),e.range!=null&&(n.range=z7e(e,t,n)),e.interpolate!=null&&Stn(e.interpolate,n),e.nice!=null&&(n.nice=Etn(e.nice,t)),e.bins!=null&&(n.bins=_tn(e.bins,t));for(r in e)vn(n,r)||r==="name"||(n[r]=Od(e[r],t))}function Od(e,t){return jt(e)?e.signal?t.signalRef(e.signal):rt("Unsupported object: "+Nt(e)):e}function BF(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Od(n,t))}function a7(e){rt("Can not find data set: "+Nt(e))}function j7e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&rt("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(at(e)?mtn:e.fields?ytn:gtn)(e,t,n)}function mtn(e,t,n){return e.map(r=>Od(r,n))}function gtn(e,t,n){const r=n.getData(e.data);return r||a7(e.data),qC(t.type)?r.valuesRef(n,e.field,U7e(e.sort,!1)):ALe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function ytn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Bt(o)?{data:r,field:o}:at(o)||o.signal?vtn(o,n):o,s.push(o),s),[]);return(qC(t.type)?btn:ALe(t.type)?xtn:wtn)(e,n,i)}function vtn(e,t){const n="_:vega:_"+dtn++,r=Rp({});if(at(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Nt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,sE({})]),{data:n,field:"data"}}function btn(e,t,n){const r=U7e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||a7(l.data),c.countsRef(t,l.field,r)}),a={groupby:zX,pulse:o};r&&(i=r.op||"count",s=r.field?o7(i,r.field):"count",a.ops=[B7e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(P7e(a));const u=t.add(Rp({pulse:pn(i)}));return s=t.add(ftn({field:zX,sort:t.sortRef(r),pulse:pn(u)})),pn(s)}function U7e(e,t){return e&&(!e.field&&!e.op?jt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?rt("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!B7e[e.op]&&rt("Multiple domain scales can not be sorted using "+e.op)),e}function xtn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||a7(i.data),s.domainRef(t,i.field)});return pn(t.add(rtn({values:r})))}function wtn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||a7(i.data),s.extentRef(t,i.field)});return pn(t.add(ntn({extents:r})))}function _tn(e,t){return e.signal||at(e)?BF(e,t):t.objectProperty(e)}function Etn(e,t){return e.signal?t.signalRef(e.signal):jt(e)?{interval:Od(e.interval),step:Od(e.step)}:Od(e)}function Stn(e,t){t.interpolate=Od(e.type||e),e.gamma!=null&&(t.interpolateGamma=Od(e.gamma))}function z7e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Bt(i)){if(r&&vn(r,i))return e=lr({},e,{range:r[i]}),z7e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=qC(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:rt("Unrecognized scale range value: "+Nt(i))}else if(i.scheme){n.scheme=at(i.scheme)?BF(i.scheme,t):Od(i.scheme,t),i.extent&&(n.schemeExtent=BF(i.extent,t)),i.count&&(n.schemeCount=Od(i.count,t));return}else if(i.step){n.rangeStep=Od(i.step,t);return}else{if(qC(e.type)&&!at(i))return j7e(i,e,t);at(i)||rt("Unsupported range type: "+Nt(i))}return i.map(s=>(at(s)?BF:Od)(s,t))}function Ctn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=HX(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=HX(n[i],i,t));t.addProjection(e.name,r)}function HX(e,t,n){return at(e)?e.map(r=>HX(r,t,n)):jt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:rt("Unsupported parameter object: "+Nt(e)):e}const Np="top",_A="left",EA="right",nb="bottom",V7e="center",Ttn="vertical",Atn="start",Dtn="middle",Itn="end",qX="index",Tae="label",ktn="offset",XC="perc",Rtn="perc2",$d="value",dP="guide-label",Aae="guide-title",Ntn="group-title",Ptn="group-subtitle",jwe="symbol",jF="gradient",WX="discrete",GX="size",Otn="shape",Ftn="fill",Mtn="stroke",$tn="strokeWidth",Ltn="strokeDash",Btn="opacity",Dae=[GX,Otn,Ftn,Mtn,$tn,Ltn,Btn],hP={name:1,style:1,interactive:1},ti={value:0},Ld={value:1},u7="group",H7e="rect",Iae="rule",jtn="symbol",oE="text";function S3(e){return e.type=u7,e.interactive=e.interactive||!1,e}function rf(e,t){const n=(r,i)=>Fh(e[r],Fh(t[r],i));return n.isVertical=r=>Ttn===Fh(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Fh(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Fh(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Fh(e.columns,Fh(t.columns,+n.isVertical(!0))),n}function q7e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Utn(e,t,n){const r=t.config.style[n];return r&&r[e]}function l7(e,t,n){return`item.anchor === '${Atn}' ? ${e} : item.anchor === '${Itn}' ? ${t} : ${n}`}const kae=l7(Nt(_A),Nt(EA),Nt(V7e));function ztn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},jt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function W7e(e,t){return t?e?jt(e)?Object.assign({},e,{offset:W7e(e.offset,t)}):{value:e,offset:t}:t:e}function Xf(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=wA(e.encode,t,hP)):e.interactive=!1,e}function Vtn(e,t,n,r){const i=rf(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:ti,x:ti,y:ti,width:Fa(f),height:Fa(d)},update:lr({},u,{opacity:Ld,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:ti}};return pu(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Xf({type:H7e,role:gen,encode:h},r)}function Htn(e,t,n,r,i){const s=rf(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:ti,fill:{scale:t,field:$d}};p[l]={signal:h+"datum."+XC,mult:u},p[c]=ti,p[f]={signal:h+"datum."+Rtn,mult:u},p[d]=Fa(a);const m={enter:p,update:lr({},p,{opacity:Ld}),exit:{opacity:ti}};return pu(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Xf({type:H7e,role:pen,key:$d,from:i,encode:m},r)}const qtn=`datum.${XC}<=0?"${_A}":datum.${XC}>=1?"${EA}":"${V7e}"`,Wtn=`datum.${XC}<=0?"${nb}":datum.${XC}>=1?"${Np}":"${Dtn}"`;function Uwe(e,t,n,r){const i=rf(e,t),s=i.isVertical(),o=Fa(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:ti},update:c={opacity:Ld,text:{field:Tae}},exit:{opacity:ti}};return pu(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Fh(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:Wtn},f="y",d="x",h="1-"):(l.align=c.align={signal:qtn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+XC,mult:a},l[d]=c[d]=o,o.offset=Fh(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+qX}:void 0,Xf({type:oE,role:A7e,style:dP,key:$d,from:r,encode:p,overlap:u},n)}function Gtn(e,t,n,r,i){const s=rf(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${ktn} : datum.${GX}`,h=l?Fa(l):{field:GX},p=`datum.${qX}`,m=`max(1, ${i})`;let g,y,v,b,_;h.mult=.5,g={enter:y={opacity:ti,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Ld,x:y.x,y:y.y},exit:{opacity:ti}};let w=null,S=null;e.fill||(w=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),pu(g,{fill:s("symbolFillColor",w),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Dae.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:$d})});const T=Xf({type:jtn,role:yen,key:$d,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=Fa(c);A.offset=s("labelOffset"),g={enter:y={opacity:ti,x:{signal:d,offset:A},y:h},update:v={opacity:Ld,text:{field:Tae},x:y.x,y:y.y},exit:{opacity:ti}},pu(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const k=Xf({type:oE,role:A7e,style:dP,key:$d,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:ti,height:l?Fa(l):ti,opacity:ti},exit:{opacity:ti},update:v={opacity:Ld,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,_={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,_={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:qX}},S3({role:Eae,from:r,encode:wA(g,o,hP),marks:[T,k],name:u,interactive:a,sort:_})}function Ytn(e,t){const n=rf(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Rae='item.orient === "left"',Nae='item.orient === "right"',c7=`(${Rae} || ${Nae})`,Ktn=`datum.vgrad && ${c7}`,Xtn=l7('"top"','"bottom"','"middle"'),Qtn=l7('"right"','"left"','"center"'),Jtn=`datum.vgrad && ${Nae} ? (${Qtn}) : (${c7} && !(datum.vgrad && ${Rae})) ? "left" : ${kae}`,Ztn=`item._anchor || (${c7} ? "middle" : "start")`,enn=`${Ktn} ? (${Rae} ? -90 : 90) : 0`,tnn=`${c7} ? (datum.vgrad ? (${Nae} ? "bottom" : "top") : ${Xtn}) : "top"`;function nnn(e,t,n,r){const i=rf(e,t),s={enter:{opacity:ti},update:{opacity:Ld,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ti}};return pu(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Ztn},angle:{signal:enn},align:{signal:Jtn},baseline:{signal:tnn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Xf({type:oE,role:ven,style:Aae,from:r,encode:s},n)}function rnn(e,t){let n;return jt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+zwe(e.path)+")":e.sphere&&(n="geoShape("+zwe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function zwe(e){return jt(e)&&e.signal?e.signal:Nt(e)}function G7e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===u7?Eae:t||wae}function inn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||G7e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function snn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Pae(e,t){const n=R$e(e.type);n||rt("Unrecognized transform type: "+Nt(e.type));const r=s7(n.type.toLowerCase(),null,Y7e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Y7e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=onn(o,t,n)}return r}function onn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return ann(e,t,n);if(i===void 0){e.required&&rt("Missing required "+Nt(t.type)+" parameter: "+Nt(e.name));return}else{if(r==="param")return unn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!da(i)?i.map(s=>Vwe(e,s,n)):Vwe(e,i,n)}function Vwe(e,t,n){const r=e.type;if(da(t))return qwe(r)?rt("Expression references can not be signals."):pq(r)?n.fieldRef(t):Wwe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||pq(r);return i&&lnn(t)?n.exprRef(t.expr,t.as):i&&cnn(t)?_3(t.field,t.as):qwe(r)?n0(t,n):fnn(r)?pn(n.getData(t).values):pq(r)?_3(t):Wwe(r)?n.compareRef(t):t}}function ann(e,t,n){return Bt(t.from)||rt('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function unn(e,t,n){const r=t[e.name];return e.array?(at(r)||rt("Expected an array of sub-parameters. Instead: "+Nt(r)),r.map(i=>Hwe(e,i,n))):Hwe(e,r,n)}function Hwe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||rt("Unsupported parameter: "+Nt(t));const s=lr(Y7e(i,t,n),i.key);return pn(n.add(stn(s)))}const lnn=e=>e&&e.expr,cnn=e=>e&&e.field,fnn=e=>e==="data",qwe=e=>e==="expr",pq=e=>e==="field",Wwe=e=>e==="compare";function dnn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||rt("Only group marks can be faceted."),r.field!=null?o=a=UF(r,n):(e.data?a=pn(n.getData(e.data).aggregate):(s=Pae(lr({type:"aggregate",groupby:Lt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=UF(r,n),o=a=pn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=pn(n.add(Rp(null,[{}]))),o||(o=UF(e,n)),{key:i,pulse:o,parent:a}}function UF(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:pn(t.getData(e.data).output)}function d_(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}d_.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=pn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new d_(e,s,i,r,o)};function K7e(e){return Bt(e)?e:null}function Gwe(e,t,n){const r=o7(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function HD(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Fen(s);let l=K7e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:zX,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:pn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(s7(r,void 0,d)),o&&(t.index[i]=f),c=pn(f),l!=null&&(a[l]=c)}return c}d_.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=K7e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Gwe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:pn(r.output)},n&&n.field&&Gwe(e,u,n),a=e.add(P7e(u)),o=e.add(Rp({pulse:pn(a)})),o={agg:a,ref:pn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return pn(this.values)},extentRef(e,t){return HD(e,this,"extent","extent",t,!1)},domainRef(e,t){return HD(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return HD(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return HD(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return HD(e,this,"indata","tupleindex",t,!0,!0)}};function hnn(e,t,n){const r=e.from.facet,i=r.name,s=UF(r,t);let o;r.name||rt("Facet must have a name: "+Nt(r)),r.data||rt("Facet must reference a data set: "+Nt(r)),r.field?o=t.add(M7e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Xen({key:t.keyRef(r.groupby),group:pn(t.proxy(n.parent)),pulse:s})):rt("Facet must specify groupby or field: "+Nt(r));const a=t.fork(),u=a.add(Rp()),l=a.add(sE({pulse:pn(u)}));a.addData(i,new d_(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function pnn(e,t,n){const r=t.add(M7e({pulse:n.pulse})),i=t.fork();i.add(sE()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function X7e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(d$()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=n0(l,t);u.update=c.$expr,u.params=c.$params}function f7(e,t){const n=G7e(e),r=e.type===u7,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Eae||n===_ae,a,u,l,c,f,d,h;const p=n===wae||o||i,m=dnn(e.from,r,t);u=t.add(Yen({key:m.key||(e.key?_3(e.key):void 0),pulse:m.pulse,clean:!r}));const g=pn(u);u=l=t.add(Rp({pulse:g})),u=t.add(ttn({markdef:inn(e),interactive:snn(e.interactive,t),clip:rnn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:pn(u)}));const y=pn(u);u=c=t.add(F7e(R7e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const T=Pae(S,t),A=T.metadata;(A.generates||A.changes)&&rt("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),T.params.pulse=pn(u),t.add(u=T)}),e.sort&&(u=t.add(ctn({sort:t.compareRef(e.sort),pulse:pn(u)})));const v=pn(u);(i||o)&&(o=t.add(L7e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=pn(o));const b=t.add(O7e({mark:y,pulse:d||v}));h=pn(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?hnn(e,t,m):p?pnn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=mnn(s,h,t));const _=t.add($7e({pulse:h})),w=t.add(sE({pulse:pn(_)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new d_(t,l,_,w)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&rt("Marks only support modify triggers."),X7e(S,t,f)}))}function mnn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:da(s)?n.signalRef(s.signal):s,method:da(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=da(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return pn(n.add(itn(o)))}function gnn(e,t){const n=t.config.legend,r=e.encode||{},i=rf(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Dae.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||rt("Missing valid scale for legend.");const p=ynn(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=pn(t.add(Rp(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=pn(t.add(Zen(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===jF?(h=[Vtn(e,c,n,r.gradient),Uwe(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Fw(i.gradientLength())})/100))`)):p===WX?h=[Htn(e,c,n,r.gradient,v),Uwe(e,n,r.labels,v)]:(f=Ytn(e,n),h=[Gtn(e,n,r,v,Fw(f.columns))],d.size=xnn(e,t,h[0].marks)),h=[S3({role:men,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(nnn(e,n,r.title,g)),f7(S3({role:hen,from:g,encode:wA(bnn(i,e,n),s,hP),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function ynn(e,t){let n=e.type||jwe;return!e.type&&vnn(e)===1&&(e.fill||e.stroke)&&(n=Hse(t)?jF:uX(t)?WX:jwe),n!==jF?n:uX(t)?WX:jF}function vnn(e){return Dae.reduce((t,n)=>t+(e[n]?1:0),0)}function bnn(e,t,n){const r={enter:{},update:{}};return pu(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function xnn(e,t,n){const r=Fw(Ywe("size",e,n)),i=Fw(Ywe("strokeWidth",e,n)),s=Fw(wnn(n[1].encode,t,dP));return n0(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Ywe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:q7e(e,n[0].encode)}function wnn(e,t,n){return q7e("fontSize",e)||Utn("fontSize",t,n)}const _nn=`item.orient==="${_A}"?-90:item.orient==="${EA}"?90:0`;function Enn(e,t){e=Bt(e)?{text:e}:e;const n=rf(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=pn(t.add(Rp(null,[l])));return u.push(Tnn(e,n,Snn(e),c)),e.subtitle&&u.push(Ann(e,n,r.subtitle,c)),f7(S3({role:ben,from:c,encode:Cnn(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Snn(e){const t=e.encode;return t&&t.title||lr({name:e.name,interactive:e.interactive,style:e.style},t)}function Cnn(e,t){const n={enter:{},update:{}};return pu(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:kae},angle:{signal:_nn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),wA(n,t,hP)}function Tnn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return pu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Xf({type:oE,role:xen,style:Ntn,from:r,encode:o},n)}function Ann(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return pu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Xf({type:oE,role:wen,style:Ptn,from:r,encode:o},n)}function Dnn(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Pae(r,t))}),e.on&&e.on.forEach(r=>{X7e(r,t,e.name)}),t.addDataPipeline(e.name,Inn(e,t,n))}function Inn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?da(e.values)||LF(e.format)?(r.push(Kwe(t,e)),r.push(i=vx())):r.push(i=vx({$ingest:e.values,$format:e.format})):e.url?LF(e.url)||LF(e.format)?(r.push(Kwe(t,e)),r.push(i=vx())):r.push(i=vx({$request:e.url,$format:e.format})):e.source&&(i=a=Lt(e.source).map(d=>pn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=vx()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=utn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,vx())),i||r.push(vx()),r.push(sE({})),r}function vx(e){const t=Rp({},e);return t.metadata={source:!0},t}function Kwe(e,t){return etn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Q7e=e=>e===nb||e===Np,d7=(e,t,n)=>da(e)?Pnn(e.signal,t,n):e===_A||e===Np?t:n,Ma=(e,t,n)=>da(e)?Rnn(e.signal,t,n):Q7e(e)?t:n,op=(e,t,n)=>da(e)?Nnn(e.signal,t,n):Q7e(e)?n:t,J7e=(e,t,n)=>da(e)?Onn(e.signal,t,n):e===Np?{value:t}:{value:n},knn=(e,t,n)=>da(e)?Fnn(e.signal,t,n):e===EA?{value:t}:{value:n},Rnn=(e,t,n)=>Z7e(`${e} === '${Np}' || ${e} === '${nb}'`,t,n),Nnn=(e,t,n)=>Z7e(`${e} !== '${Np}' && ${e} !== '${nb}'`,t,n),Pnn=(e,t,n)=>Oae(`${e} === '${_A}' || ${e} === '${Np}'`,t,n),Onn=(e,t,n)=>Oae(`${e} === '${Np}'`,t,n),Fnn=(e,t,n)=>Oae(`${e} === '${EA}'`,t,n),Z7e=(e,t,n)=>(t=t!=null?Fa(t):t,n=n!=null?Fa(n):n,Xwe(t)&&Xwe(n)?(t=t?t.signal||Nt(t.value):null,n=n?n.signal||Nt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[lr({test:e},t)].concat(n||[])),Xwe=e=>e==null||Object.keys(e).length===1,Oae=(e,t,n)=>({signal:`${e} ? (${sS(t)}) : (${sS(n)})`}),Mnn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${_A}' ? (${sS(r)}) : `:"")+(n!=null?`${e} === '${nb}' ? (${sS(n)}) : `:"")+(i!=null?`${e} === '${EA}' ? (${sS(i)}) : `:"")+(t!=null?`${e} === '${Np}' ? (${sS(t)}) : `:"")+"(null)"}),sS=e=>da(e)?e.signal:e==null?null:Nt(e),$nn=(e,t)=>t===0?0:da(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},MS=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function c2(e,t,n,r){let i;if(t&&vn(t,e))return t[e];if(vn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Aae][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[dP][i]}return null}function Qwe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Lnn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(da(o)){const f=Qwe([n.axisX,n.axisY]),d=Qwe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Ma(o,c2(l,n.axisX,i,r),c2(l,n.axisY,i,r));u={};for(l of d)u[l]=Mnn(o.signal,c2(l,n.axisTop,i,r),c2(l,n.axisBottom,i,r),c2(l,n.axisLeft,i,r),c2(l,n.axisRight,i,r))}else a=o===Np||o===nb?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?lr({},i,a,u,s):i}function Bnn(e,t,n,r){const i=rf(e,t),s=e.orient;let o,a;const u={enter:o={opacity:ti},update:a={opacity:Ld},exit:{opacity:ti}};pu(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Jwe(e,0),c=Jwe(e,1);return o.x=a.x=Ma(s,l,ti),o.x2=a.x2=Ma(s,c),o.y=a.y=op(s,l,ti),o.y2=a.y2=op(s,c),Xf({type:Iae,role:uen,from:r,encode:u},n)}function Jwe(e,t){return{scale:e.scale,range:t}}function jnn(e,t,n,r,i){const s=rf(e,t),o=e.orient,a=e.gridScale,u=d7(o,1,-1),l=Unn(e.offset,u);let c,f,d;const h={enter:c={opacity:ti},update:d={opacity:Ld},exit:f={opacity:ti}};pu(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:$d,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Ma(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:lr(m,{mult:u,offset:l});return c.x=d.x=Ma(o,p,g),c.y=d.y=op(o,p,g),c.x2=d.x2=op(o,y),c.y2=d.y2=Ma(o,y),f.x=Ma(o,p),f.y=op(o,p),Xf({type:Iae,role:len,key:$d,from:r,encode:h},n)}function Unn(e,t){if(t!==1)if(!jt(e))e=da(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=lr({},e);for(;n.mult!=null;)if(jt(n.mult))n=n.mult=lr({},n.mult);else return n.mult=da(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function znn(e,t,n,r,i,s){const o=rf(e,t),a=e.orient,u=d7(a,-1,1);let l,c,f;const d={enter:l={opacity:ti},update:f={opacity:Ld},exit:c={opacity:ti}};pu(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Fa(i);h.mult=u;const p={scale:e.scale,field:$d,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Ma(a,ti,p),f.y2=l.y2=Ma(a,h),c.x=Ma(a,p),f.x=l.x=op(a,ti,p),f.x2=l.x2=op(a,h),c.y=op(a,p),Xf({type:Iae,role:fen,key:$d,from:r,encode:d},n)}function mq(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Vnn(e,t,n,r,i,s){const o=rf(e,t),a=e.orient,u=e.scale,l=d7(a,-1,1),c=Fw(o("labelFlush")),f=Fw(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Fa(i);g.mult=l,g.offset=Fa(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:$d,band:.5,offset:W7e(s.offset,o("labelOffset"))},v=Ma(a,p?mq(u,c,'"left"','"right"','"center"'):{value:"center"},knn(a,"left","right")),b=Ma(a,J7e(a,"bottom","top"),p?mq(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),_=mq(u,c,`-(${f})`,f,0);p=p&&f;const w={opacity:ti,x:Ma(a,y,g),y:op(a,y,g)},S={enter:w,update:m={opacity:Ld,text:{field:Tae},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:ti,x:w.x,y:w.y}};pu(S,{dx:!d&&p?Ma(a,_):null,dy:!h&&p?op(a,_):null}),pu(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const T=o("labelBound");let A=o("labelOverlap");return A=A||T?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:T?{scale:u,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=MS(m.align,v)),m.baseline!==b&&(m.baseline=MS(m.baseline,b)),Xf({type:oE,role:cen,style:dP,key:$d,from:r,encode:S,overlap:A},n)}function Hnn(e,t,n,r){const i=rf(e,t),s=e.orient,o=d7(s,-1,1);let a,u;const l={enter:a={opacity:ti,anchor:Fa(i("titleAnchor",null)),align:{signal:kae}},update:u=lr({},a,{opacity:Ld,text:Fa(e.title)}),exit:{opacity:ti}},c={signal:`lerp(range("${e.scale}"), ${l7(0,1,.5)})`};return u.x=Ma(s,c),u.y=op(s,c),a.angle=Ma(s,ti,$nn(o,90)),a.baseline=Ma(s,J7e(s,nb,Np),{value:nb}),u.angle=a.angle,u.baseline=a.baseline,pu(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),qnn(i,s,l,n),l.update.align=MS(l.update.align,a.align),l.update.angle=MS(l.update.angle,a.angle),l.update.baseline=MS(l.update.baseline,a.baseline),Xf({type:oE,role:den,style:Aae,from:r,encode:l},n)}function qnn(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=MS(Fa(a),n.update[u]),!1):!I2(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Fa(o):Ma(t,Fa(o),Fa(s))}function Wnn(e,t){const n=Lnn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=rf(e,n),l=ztn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=pn(t.add(Rp({},[c]))),d=pn(t.add(Gen({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(jnn(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(znn(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Vnn(e,n,r.labels,d,p,l))),c.domain&&h.push(Bnn(e,n,r.domain,f)),c.title&&h.push(Hnn(e,n,r.title,f)),f7(S3({role:aen,from:f,encode:wA(Gnn(u,e),i,hP),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function Gnn(e,t){const n={enter:{},update:{}};return pu(n,{orient:e("orient"),offset:e("offset")||0,position:Fh(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function eje(e,t,n){const r=Lt(e.signals),i=Lt(e.scales);return n||r.forEach(s=>N7e(s,t)),Lt(e.projections).forEach(s=>Ctn(s,t)),i.forEach(s=>htn(s,t)),Lt(e.data).forEach(s=>Dnn(s,t)),i.forEach(s=>ptn(s,t)),(n||r).forEach(s=>Wen(s,t)),Lt(e.axes).forEach(s=>Wnn(s,t)),Lt(e.marks).forEach(s=>f7(s,t)),Lt(e.legends).forEach(s=>gnn(s,t)),e.title&&Enn(e.title,t),t.parseLambdas(),t}const Ynn=e=>wA({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Knn(e,t){const n=t.config,r=pn(t.root=t.add(d$())),i=Xnn(e,n);i.forEach(l=>N7e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Rp()),o=t.add(F7e(R7e(Ynn(e.encode),u7,_ae,e.style,t,{pulse:pn(s)}))),a=t.add(L7e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:pn(o)}));t.operators.pop(),t.pushState(pn(o),pn(a),null),eje(e,t,i),t.operators.push(a);let u=t.add(O7e({mark:r,pulse:pn(a)}));return u=t.add($7e({pulse:pn(u)})),u=t.add(sE({pulse:pn(u)})),t.addData("root",new d_(t,s,s,u)),t}function qD(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Xnn(e,t){const n=o=>Fh(e[o],t[o]),r=[qD("background",n("background")),qD("autosize",ien(n("autosize"))),qD("padding",oen(n("padding"))),qD("width",n("width")||0),qD("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Lt(e.signals).forEach(o=>{vn(i,o.name)?o=lr(i[o.name],o):r.push(o),s[o.name]=o}),Lt(t.signals).forEach(o=>{!vn(s,o.name)&&!vn(i,o.name)&&r.push(o)}),r}function tje(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Zwe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}tje.prototype=Zwe.prototype={parse(e){return eje(e,this)},fork(){return new Zwe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof UX?pn(e):e;return this.add(atn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(pn(this.add(sE({pulse:e})))),this._parent.push(t),this._lookup.push(n?pn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Xr(this._parent)},encode(){return Xr(this._encode)},lookup(){return Xr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Bt(e))return _3(e,t);e.signal||rt("Unsupported field reference: "+Nt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=pn(this.add(Qen(i)))}return r},compareRef(e){let t=!1;const n=s=>da(s)?(t=!0,this.signalRef(s.signal)):Men(s)?(t=!0,this.exprRef(s.expr)):s,r=Lt(e.field).map(n),i=Lt(e.order).map(n);return t?pn(this.add(Bwe({fields:r,orders:i}))):$we(r,i)},keyRef(e,t){let n=!1;const r=s=>da(s)?(n=!0,pn(i[s.signal])):s,i=this.signals;return e=Lt(e).map(r),n?pn(this.add(Jen({fields:e,flat:t}))):Nen(e,t)},sortRef(e){if(!e)return e;const t=o7(e.op,e.field),n=e.order||Pen;return n.signal?pn(this.add(Bwe({fields:t,orders:this.signalRef(n.signal)}))):$we(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return vn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&rt("Duplicate signal name: "+Nt(e));const n=t instanceof UX?t:this.add(d$(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||rt("Unrecognized signal name: "+Nt(e)),this.signals[e]},signalRef(e){return this.signals[e]?pn(this.signals[e]):(vn(this.lambdas,e)||(this.lambdas[e]=this.add(d$(null))),pn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=n0(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!jt(e)?e:this.signalRef(e.signal||Fae(e))},exprRef(e,t){const n={expr:n0(e,this)};return t&&(n.expr.$name=t),pn(this.add(Ken(n)))},addBinding(e,t){this.bindings||rt("Nested signals do not support binding: "+Nt(e)),this.bindings.push(lr({signal:e},t))},addScaleProj(e,t){vn(this.scales,e)&&rt("Duplicate scale or projection name: "+Nt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,ltn(t))},addProjection(e,t){this.addScaleProj(e,otn(t))},getScale(e){return this.scales[e]||rt("Unrecognized scale name: "+Nt(e)),this.scales[e]},scaleRef(e){return pn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return vn(this.data,e)&&rt("Duplicate data set name: "+Nt(e)),this.data[e]=t},getData(e){return this.data[e]||rt("Undefined data set name: "+Nt(e)),this.data[e]},addDataPipeline(e,t){return vn(this.data,e)&&rt("Duplicate data set name: "+Nt(e)),this.addData(e,d_.fromEntries(this,t))}};function Fae(e){return(at(e)?Qnn:Jnn)(e)}function Qnn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(jt(i)?i.signal||Fae(i):Nt(i))}return n+"]"}function Jnn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Nt(r)+":"+(jt(i)?i.signal||Fae(i):Nt(i));return t+"}"}function Znn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function ern(e,t,n){return jt(e)||rt("Input Vega specification must be an object."),t=hA(Znn(),t,e.config),Knn(e,new tje(t,n)).toRuntime()}var trn="5.29.0";lr(zC,eHt,zGt,xYt,QYt,iKt,RKt,cKt,PKt,$Kt,GKt,eXt);const nrn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Go,CanvasHandler:aP,CanvasRenderer:e$,DATE:Kc,DAY:qu,DAYOFYEAR:t0,Dataflow:FS,Debug:C5e,Error:Iie,EventStream:D9,Gradient:zLe,GroupItem:U9,HOURS:Gf,Handler:moe,HybridHandler:PBe,HybridRenderer:bX,Info:S5e,Item:j9,MILLISECONDS:vp,MINUTES:Yf,MONTH:Xu,Marks:Kf,MultiPulse:Kie,None:E5e,Operator:as,Parameters:A9,Pulse:yv,QUARTER:Yc,RenderType:Y1,Renderer:oP,ResourceLoader:KLe,SECONDS:Wd,SVGHandler:xBe,SVGRenderer:woe,SVGStringRenderer:NBe,Scenegraph:dBe,TIME_UNITS:Uie,Transform:Ye,View:b7e,WEEK:ca,Warn:kie,YEAR:cu,accessor:nf,accessorFields:Ku,accessorName:po,array:Lt,ascending:w9,bandwidthNRD:Zie,bin:O$e,bootstrapCI:F$e,boundClip:VBe,boundContext:nP,boundItem:pX,boundMark:uBe,boundStroke:My,changeset:nE,clampRange:M5e,codegenExpression:q9e,compare:Fie,constant:il,cumulativeLogNormal:sse,cumulativeNormal:k9,cumulativeUniform:lse,dayofyear:Y5e,debounce:Mie,defaultLocale:Hie,definition:R$e,densityLogNormal:ise,densityNormal:ese,densityUniform:use,domChild:ua,domClear:Dd,domCreate:W1,domFind:poe,dotbin:M$e,error:rt,expressionFunction:Oo,extend:lr,extent:e0,extentIndex:$5e,falsy:p1,fastmap:mA,field:Hd,flush:L5e,font:W9,fontFamily:sP,fontSize:b0,format:_F,formatLocale:U5,formats:Gie,hasOwnProperty:vn,id:HN,identity:rl,inferType:x$e,inferTypes:w$e,ingest:Ii,inherits:Ot,inrange:nS,interpolate:qse,interpolateColors:L9,interpolateRange:DLe,intersect:BBe,intersectBoxLine:rS,intersectPath:Zse,intersectPoint:eoe,intersectRule:QLe,isArray:at,isBoolean:zb,isDate:gv,isFunction:cr,isIterable:B5e,isNumber:fi,isObject:jt,isRegExp:j5e,isString:Bt,isTuple:C9,key:$ie,lerp:U5e,lineHeight:Zv,loader:E9,locale:v$e,logger:Rie,lruCache:z5e,markup:xoe,merge:V5e,mergeConfig:hA,multiLineOffset:foe,one:dA,pad:H5e,panLinear:k5e,panLog:R5e,panPow:N5e,panSymlog:P5e,parse:ern,parseExpression:uae,parseSelector:Hb,path:xB,pathCurves:Xse,pathEqual:HBe,pathParse:WC,pathRectangle:qLe,pathRender:p3,pathSymbols:HLe,pathTrail:WLe,peek:Xr,point:Y9,projection:Poe,quantileLogNormal:ose,quantileNormal:R9,quantileUniform:cse,quantiles:Qie,quantizeInterpolator:ILe,quarter:O5e,quartiles:Jie,get random(){return Gd},randomInteger:iVt,randomKDE:nse,randomLCG:rVt,randomLogNormal:L$e,randomMixture:B$e,randomNormal:tse,randomUniform:j$e,read:S$e,regressionConstant:fse,regressionExp:z$e,regressionLinear:dse,regressionLoess:q$e,regressionLog:U$e,regressionPoly:H$e,regressionPow:V$e,regressionQuad:hse,renderModule:K9,repeat:NI,resetDefaultLocale:ezt,resetSVGClipId:YLe,resetSVGDefIds:oGt,responseType:E$e,runtimeContext:o7e,sampleCurve:P9,sampleLogNormal:rse,sampleNormal:I9,sampleUniform:ase,scale:xi,sceneEqual:_oe,sceneFromJSON:cBe,scenePickVisit:W5,sceneToJSON:lBe,sceneVisit:bp,sceneZOrder:toe,scheme:Wse,serializeXML:DBe,setHybridRendererOptions:nGt,setRandom:tVt,span:qN,splitAccessPath:v0,stringValue:Nt,textMetrics:Nf,timeBin:f$e,timeFloor:t$e,timeFormatLocale:f3,timeInterval:gA,timeOffset:i$e,timeSequence:a$e,timeUnitSpecifier:G5e,timeUnits:zie,toBoolean:Lie,toDate:Bie,toNumber:Wu,toSet:yp,toString:jie,transform:N$e,transforms:zC,truncate:q5e,truthy:qd,tupleid:mn,typeParsers:sX,utcFloor:n$e,utcInterval:yA,utcOffset:s$e,utcSequence:u$e,utcdayofyear:Q5e,utcquarter:F5e,utcweek:J5e,version:trn,visitArray:S1,week:K5e,writeConfig:pA,zero:O1,zoomLinear:Nie,zoomLog:Pie,zoomPow:j5,zoomSymlog:Oie},Symbol.toStringTag,{value:"Module"}));function rrn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var irn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},srn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},orn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const arn=Array.prototype.slice,bx=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,arn.call(t,1))},urn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var lrn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:urn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return bx("join",arguments)},indexof:function(){return bx("indexOf",arguments)},lastindexof:function(){return bx("lastIndexOf",arguments)},slice:function(){return bx("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return bx("substring",arguments,String)},split:function(){return bx("split",arguments,String)},replace:function(){return bx("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const crn=["view","item","group","xy","x","y"],YX=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&YX.add(setImmediate);const frn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:irn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),YX.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||lrn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>srn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>orn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,YX.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function WD(e,t,n,r,i,s){const o=a=>frn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,crn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var drn={operator(e,t){const n=t.ast,r=e.functions;return i=>WD(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>WD(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>WD(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return WD(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=WD(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&rrn(o,r,s),l}}};const hrn="vega-lite",prn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',mrn="5.18.1",grn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],yrn="https://vega.github.io/vega-lite/",vrn="Vega-Lite is a concise high-level language for interactive visualization.",brn=["vega","chart","visualization"],xrn="build/vega-lite.js",wrn="build/vega-lite.min.js",_rn="build/vega-lite.min.js",Ern="build/src/index",Srn="build/src/index.d.ts",Crn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Trn=["bin","build","src","vega-lite*","tsconfig.json"],Arn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Drn={type:"git",url:"https://github.com/vega/vega-lite.git"},Irn="BSD-3-Clause",krn={url:"https://github.com/vega/vega-lite/issues"},Rrn={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Nrn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Prn={vega:"^5.24.0"},Orn={node:">=18"},Frn="yarn@1.22.19",Mrn={name:hrn,author:prn,version:mrn,collaborators:grn,homepage:yrn,description:vrn,keywords:brn,main:xrn,unpkg:wrn,jsdelivr:_rn,module:Ern,types:Srn,bin:Crn,files:Trn,scripts:Arn,repository:Drn,license:Irn,bugs:krn,devDependencies:Rrn,dependencies:Nrn,peerDependencies:Prn,engines:Orn,packageManager:Frn};function Mae(e){return!!e.or}function $ae(e){return!!e.and}function Lae(e){return!!e.not}function zF(e,t){if(Lae(e))zF(e.not,t);else if($ae(e))for(const n of e.and)zF(n,t);else if(Mae(e))for(const n of e.or)zF(n,t);else t(e)}function $S(e,t){return Lae(e)?{not:$S(e.not,t)}:$ae(e)?{and:e.and.map(n=>$S(n,t))}:Mae(e)?{or:e.or.map(n=>$S(n,t))}:t(e)}const zn=structuredClone;function nje(e){throw new Error(e)}function QC(e,t){const n={};for(const r of t)vn(e,r)&&(n[r]=e[r]);return n}function Lc(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Ji(e)).join(",")})`};function Mr(e){if(fi(e))return e;const t=Bt(e)?e:Ji(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function KX(e){return e===!1||e===null}function $r(e,t){return e.includes(t)}function h_(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Bae(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function rje(e,...t){for(const n of t)$rn(e,n??{});return e}function $rn(e,t){for(const n of xt(t))pA(e,n,t[n],!0)}function _m(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Lrn(e,t){const n=xt(e),r=xt(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function ije(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function jae(e,t){for(const n of e)if(t.has(n))return!0;return!1}function XX(e){const t=new Set;for(const n of e){const i=v0(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Uae(e,t){return e===void 0||t===void 0?!0:jae(XX(e),XX(t))}function Qi(e){return xt(e).length===0}const xt=Object.keys,fu=Object.values,rb=Object.entries;function C3(e){return e===!0||e===!1}function Us(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Mk(e,t){return Lae(e)?`!(${Mk(e.not,t)})`:$ae(e)?`(${e.and.map(n=>Mk(n,t)).join(") && (")})`:Mae(e)?`(${e.or.map(n=>Mk(n,t)).join(") || (")})`:t(e)}function h$(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&h$(e[n],t)&&delete e[n],Qi(e)}function pP(e){return e.charAt(0).toUpperCase()+e.substr(1)}function zae(e,t="datum"){const n=v0(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Nt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function sje(e,t="datum"){return`${t}[${Nt(v0(e).join("."))}]`}function Brn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Yd(e){return`${v0(e).map(Brn).join("\\.")}`}function p_(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function SA(e){return`${v0(e).join(".")}`}function JC(e){return e?v0(e).length:0}function Io(...e){for(const t of e)if(t!==void 0)return t}let oje=42;function aje(e){const t=++oje;return e?String(e)+t:t}function jrn(){oje=42}function uje(e){return lje(e)?e:`__${e}`}function lje(e){return e.startsWith("__")}function T3(e){if(e!==void 0)return(e%360+360)%360}function h7(e){return fi(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const e_e=Object.getPrototypeOf(structuredClone({}));function Af(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Af(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Af(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==e_e.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==e_e.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Af(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ji(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const Bg="row",jg="column",p7="facet",zs="x",Ha="y",Pp="x2",_0="y2",qb="xOffset",CA="yOffset",Op="radius",Ly="radius2",oh="theta",By="theta2",Fp="latitude",Mp="longitude",$p="latitude2",Kd="longitude2",Xc="color",E0="fill",S0="stroke",Qc="shape",jy="size",aE="angle",Uy="opacity",Wb="fillOpacity",Gb="strokeOpacity",Yb="strokeWidth",Kb="strokeDash",mP="text",ZC="order",gP="detail",m7="key",m_="tooltip",g7="href",y7="url",v7="description",Urn={x:1,y:1,x2:1,y2:1},cje={theta:1,theta2:1,radius:1,radius2:1};function fje(e){return e in cje}const Vae={longitude:1,longitude2:1,latitude:1,latitude2:1};function dje(e){switch(e){case Fp:return"y";case $p:return"y2";case Mp:return"x";case Kd:return"x2"}}function hje(e){return e in Vae}const zrn=xt(Vae),Hae={...Urn,...cje,...Vae,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function LS(e){return e===Xc||e===E0||e===S0}const pje={row:1,column:1,facet:1},Fd=xt(pje),qae={...Hae,...pje},Vrn=xt(qae),{order:VTn,detail:HTn,tooltip:qTn,...Hrn}=qae,{row:WTn,column:GTn,facet:YTn,...qrn}=Hrn;function Wrn(e){return!!qrn[e]}function mje(e){return!!qae[e]}const Grn=[Pp,_0,$p,Kd,By,Ly];function gje(e){return uE(e)!==e}function uE(e){switch(e){case Pp:return zs;case _0:return Ha;case $p:return Fp;case Kd:return Mp;case By:return oh;case Ly:return Op}return e}function ib(e){if(fje(e))switch(e){case oh:return"startAngle";case By:return"endAngle";case Op:return"outerRadius";case Ly:return"innerRadius"}return e}function C0(e){switch(e){case zs:return Pp;case Ha:return _0;case Fp:return $p;case Mp:return Kd;case oh:return By;case Op:return Ly}}function Jc(e){switch(e){case zs:case Pp:return"width";case Ha:case _0:return"height"}}function yje(e){switch(e){case zs:return"xOffset";case Ha:return"yOffset";case Pp:return"x2Offset";case _0:return"y2Offset";case oh:return"thetaOffset";case Op:return"radiusOffset";case By:return"theta2Offset";case Ly:return"radius2Offset"}}function Wae(e){switch(e){case zs:return"xOffset";case Ha:return"yOffset"}}function Yrn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Krn=xt(Hae),{x:KTn,y:XTn,x2:QTn,y2:JTn,xOffset:ZTn,yOffset:eAn,latitude:tAn,longitude:nAn,latitude2:rAn,longitude2:iAn,theta:sAn,theta2:oAn,radius:aAn,radius2:uAn,...Gae}=Hae,Xrn=xt(Gae),Yae={x:1,y:1},T0=xt(Yae);function ko(e){return e in Yae}const Kae={theta:1,radius:1},Qrn=xt(Kae);function b7(e){return e==="width"?zs:Ha}const vje={xOffset:1,yOffset:1};function yP(e){return e in vje}const{text:lAn,tooltip:cAn,href:fAn,url:dAn,description:hAn,detail:pAn,key:mAn,order:gAn,...bje}=Gae,Jrn=xt(bje);function Zrn(e){return!!Gae[e]}function ein(e){switch(e){case Xc:case E0:case S0:case jy:case Qc:case Uy:case Yb:case Kb:return!0;case Wb:case Gb:case aE:return!1}}const xje={...Yae,...Kae,...vje,...bje},x7=xt(xje);function zy(e){return!!xje[e]}function tin(e,t){return rin(e)[t]}const wje={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:yAn,...nin}=wje;function rin(e){switch(e){case Xc:case E0:case S0:case v7:case gP:case m7:case m_:case g7:case ZC:case Uy:case Wb:case Gb:case Yb:case p7:case Bg:case jg:return wje;case zs:case Ha:case qb:case CA:case Fp:case Mp:return nin;case Pp:case _0:case $p:case Kd:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case jy:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Kb:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Qc:return{point:"always",geoshape:"always"};case mP:return{text:"always"};case aE:return{point:"always",square:"always",text:"always"};case y7:return{image:"always"};case oh:return{text:"always",arc:"always"};case Op:return{text:"always",arc:"always"};case By:case Ly:return{arc:"always"}}}function gq(e){switch(e){case zs:case Ha:case oh:case Op:case qb:case CA:case jy:case aE:case Yb:case Uy:case Wb:case Gb:case Pp:case _0:case By:case Ly:return;case p7:case Bg:case jg:case Qc:case Kb:case mP:case m_:case g7:case y7:case v7:return"discrete";case Xc:case E0:case S0:return"flexible";case Fp:case Mp:case $p:case Kd:case gP:case m7:case ZC:return}}const iin={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},sin={count:1,min:1,max:1};function py(e){return!!e&&!!e.argmin}function Xb(e){return!!e&&!!e.argmax}function Xae(e){return Bt(e)&&!!iin[e]}const oin=new Set(["count","valid","missing","distinct"]);function _je(e){return Bt(e)&&oin.has(e)}function ain(e){return Bt(e)&&$r(["min","max"],e)}const uin=new Set(["count","sum","distinct","valid","missing"]),lin=new Set(["mean","average","median","q1","q3","min","max"]);function Eje(e){return zb(e)&&(e=N7(e,void 0)),"bin"+xt(e).map(t=>w7(e[t])?Us(`_${t}_${rb(e[t])}`):Us(`_${t}_${e[t]}`)).join("")}function ms(e){return e===!0||lE(e)&&!e.binned}function tu(e){return e==="binned"||lE(e)&&e.binned===!0}function lE(e){return jt(e)}function w7(e){return e==null?void 0:e.param}function t_e(e){switch(e){case Bg:case jg:case jy:case Xc:case E0:case S0:case Yb:case Uy:case Wb:case Gb:case Qc:return 6;case Kb:return 4;default:return 10}}function vP(e){return!!(e!=null&&e.expr)}function xc(e){const t=xt(e||{}),n={};for(const r of t)n[r]=xf(e[r]);return n}function Sje(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=QC(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function A1(e){return Bt(e)||at(e)&&Bt(e[0])}function rn(e){return!!(e!=null&&e.signal)}function Qb(e){return!!e.step}function cin(e){return at(e)?!1:"fields"in e&&!("data"in e)}function fin(e){return at(e)?!1:"fields"in e&&"data"in e}function Ag(e){return at(e)?!1:"field"in e&&"data"in e}const din={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},hin=xt(din),pin={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},QX=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Cje(e){const t=at(e.condition)?e.condition.map(n_e):n_e(e.condition);return{...xf(e),condition:t}}function xf(e){if(vP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function n_e(e){if(vP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function _s(e){if(vP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return rn(e)?e:e!==void 0?{value:e}:void 0}function min(e){return rn(e)?e.signal:Nt(e)}function r_e(e){return rn(e)?e.signal:Nt(e.value)}function Jh(e){return rn(e)?e.signal:e==null?null:Nt(e)}function gin(e,t,n){for(const r of n){const i=my(r,t.markDef,t.config);i!==void 0&&(e[r]=_s(i))}return e}function Tje(e){return[].concat(e.type,e.style??[])}function Di(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:my(e,t,n,r)}function my(e,t,n,{vgChannel:r}={}){return Io(r?p$(e,t,n.style):void 0,p$(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function p$(e,t,n){return Aje(e,Tje(t),n)}function Aje(e,t,n){t=Lt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function Dje(e,t){return Lt(e).reduce((n,r)=>(n.field.push(Pt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function Ije(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Af(i,r))return;n.push(r)}),n}function kje(e,t){return Af(e,t)||!t?e:e?[...Lt(e),...Lt(t)].join(", "):t}function Rje(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((A1(n)||rn(n))&&(A1(r)||rn(r)))return{explicit:e.explicit,value:kje(n,r)};if(A1(n)||rn(n))return{explicit:e.explicit,value:n};if(A1(r)||rn(r))return{explicit:e.explicit,value:r};if(!A1(n)&&!rn(n)&&!A1(r)&&!rn(r))return{explicit:e.explicit,value:Ije(n,r)};throw new Error("It should never reach here")}function Qae(e){return`Invalid specification ${Ji(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const yin='Autosize "fit" only works for single views and layered views.';function i_e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function s_e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function o_e(e){return e?`Dropping "fit-${e}" because spec has discrete ${Jc(e)}.`:'Dropping "fit" because spec has discrete size.'}function Jae(e){return`Unknown field for ${e}. Cannot calculate view size.`}function a_e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function vin(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function bin(e){return`The "nearest" transform is not supported for ${e} marks.`}function Nje(e){return`Selection not supported for ${e} yet.`}function xin(e){return`Cannot find a selection named "${e}".`}const win="Scale bindings are currently only supported for scales with unbinned, continuous domains.",_in="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Ein="Legend bindings are only supported for selections over an individual field or encoding channel.";function Sin(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Cin(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Tin="The same selection must be used to override scale domains in a layered view.",Ain='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Din(e){return`Unknown repeated value "${e}".`}function u_e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Iin="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function kin(e){return`Unrecognized parse "${e}".`}function l_e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Rin="Attempt to add the same child twice.";function Nin(e){return`Ignoring an invalid transform: ${Ji(e)}.`}const Pin='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function c_e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Oin(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ji(t)} is overridden by a child projection ${Ji(n)}.`}const Fin="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Min(e){return`${e}Offset dropped because ${e} is continuous`}function $in(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ji(n)}}.`}function Pje(e){return`Invalid field type "${e}".`}function Lin(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Bin(e){return`Invalid aggregation operator "${e}".`}function Oje(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function jin(e){return`Position range does not support relative band size for ${e}.`}function JX(e,t){return`Dropping ${Ji(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Uin="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function _7(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function zin(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Vin(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Hin(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function qin(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function yq(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Win(e){return`The ${e} for range marks cannot be an expression`}function Gin(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Yin(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Kin(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Xin(e){return`Cannot use the relative band size with ${e} scale.`}function Qin(e){return`Using unaggregated domain with raw field has no effect (${Ji(e)}).`}function Jin(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Zin(e){return`Unaggregated domain is currently unsupported for log scale (${Ji(e)}).`}function esn(e){return`Cannot apply size to non-oriented mark "${e}".`}function tsn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function nsn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function Fje(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Mje(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function rsn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ji(n)} and ${Ji(r)}). Using ${Ji(n)}.`}function isn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ji(n)} and ${Ji(r)}). Using the union of the two domains.`}function ssn(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function osn(e){return`Dropping sort property ${Ji(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const f_e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",asn="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",usn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",lsn="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function csn(e){return`Cannot stack "${e}" if there is already "${e}2".`}function fsn(e){return`Stack is applied to a non-linear scale (${e}).`}function dsn(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function m$(e,t){return`Invalid ${e}: ${Ji(t)}.`}function hsn(e){return`Dropping day from datetime ${Ji(e)} as day cannot be combined with other units.`}function psn(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function msn(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function gsn(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function d_e(e){return`1D error band does not support ${e}.`}function $je(e){return`Channel ${e} is required for "binned" bin.`}function ysn(e){return`Channel ${e} should not be used with "binned" bin.`}function vsn(e){return`Domain for ${e} is required for threshold scale.`}const Lje=Rie(kie);let eT=Lje;function bsn(e){return eT=e,eT}function xsn(){return eT=Lje,eT}function Tt(...e){eT.warn(...e)}function wsn(...e){eT.debug(...e)}function cE(e){if(e&&jt(e)){for(const t of eue)if(t in e)return!0}return!1}const Bje=["january","february","march","april","may","june","july","august","september","october","november","december"],_sn=Bje.map(e=>e.substr(0,3)),jje=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Esn=jje.map(e=>e.substr(0,3));function Ssn(e){if(h7(e)&&(e=+e),fi(e))return e>4&&Tt(m$("quarter",e)),e-1;throw new Error(m$("quarter",e))}function Csn(e){if(h7(e)&&(e=+e),fi(e))return e-1;{const t=e.toLowerCase(),n=Bje.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=_sn.indexOf(r);if(i!==-1)return i;throw new Error(m$("month",e))}}function Tsn(e){if(h7(e)&&(e=+e),fi(e))return e%7;{const t=e.toLowerCase(),n=jje.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Esn.indexOf(r);if(i!==-1)return i;throw new Error(m$("day",e))}}function Zae(e,t){const n=[];if(t&&e.day!==void 0&&xt(e).length>1&&(Tt(hsn(e)),e=zn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Csn(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Ssn(e.quarter):e.quarter;n.push(fi(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Tsn(e.day):e.day;n.push(fi(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function g_(e){const n=Zae(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Asn(e){const n=Zae(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Dsn(e){const t=Zae(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const Uje={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},eue=xt(Uje);function Isn(e){return!!Uje[e]}function fE(e){return jt(e)?e.binned:zje(e)}function zje(e){return e&&e.startsWith("binned")}function tue(e){return e.startsWith("utc")}function ksn(e){return e.substring(3)}const Rsn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function E7(e){return eue.filter(t=>Hje(e,t))}function Vje(e){const t=E7(e);return t[t.length-1]}function Hje(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Nsn(e,t,{end:n}={end:!1}){const r=zae(t),i=tue(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of eue)Hje(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),Asn(a)}function qje(e){if(!e)return;const t=E7(e);return`timeUnitSpecifier(${Ji(t)}, ${Ji(Rsn)})`}function Psn(e,t,n){if(!e)return;const r=qje(e);return`${n||tue(e)?"utc":"time"}Format(${t}, ${r})`}function La(e){if(!e)return;let t;return Bt(e)?zje(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:jt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),tue(t.unit)&&(t.utc=!0,t.unit=ksn(t.unit)),t}function Osn(e){const{utc:t,...n}=La(e);return n.unit?(t?"utc":"")+xt(n).map(r=>Us(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+xt(n).map(r=>Us(`_${r}_${n[r]}`)).join("")}function Wje(e,t=n=>n){const n=La(e),r=Vje(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=Gje(r,n.step),a={...i,[o]:+i[o]+s};return`${t(g_(a))} - ${t(g_(i))}`}}const Fsn={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Msn(e){return!!Fsn[e]}function Gje(e,t=1){if(Msn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function $sn(e){return e==null?void 0:e.param}function nue(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function rue(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function iue(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function sue(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function oue(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function aue(e){if(e!=null&&e.field){if(at(e.range)&&e.range.length===2)return!0;if(rn(e.range))return!0}return!1}function uue(e){return!!(e!=null&&e.field)&&(at(e.oneOf)||at(e.in))}function Lsn(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function Yje(e){return uue(e)||nue(e)||aue(e)||rue(e)||sue(e)||iue(e)||oue(e)}function Gp(e,t){return P7(e,{timeUnit:t,wrapTime:!0})}function Bsn(e,t){return e.map(n=>Gp(n,t))}function Kje(e,t=!0){const{field:n}=e,r=La(e.timeUnit),{unit:i,binned:s}=r||{},o=Pt(e,{expr:"datum"}),a=i?`time(${s?o:Nsn(i,n)})`:o;if(nue(e))return`${a}===${Gp(e.equal,i)}`;if(rue(e)){const u=e.lt;return`${a}<${Gp(u,i)}`}else if(sue(e)){const u=e.gt;return`${a}>${Gp(u,i)}`}else if(iue(e)){const u=e.lte;return`${a}<=${Gp(u,i)}`}else if(oue(e)){const u=e.gte;return`${a}>=${Gp(u,i)}`}else{if(uue(e))return`indexof([${Bsn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(Lsn(e))return lue(a,e.valid);if(aue(e)){const{range:u}=e,l=rn(u)?{signal:`${u.signal}[0]`}:u[0],c=rn(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Gp(l,i)+", "+Gp(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Gp(l,i)}`),c!==null&&f.push(`${a} <= ${Gp(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ji(e)}`)}function lue(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function jsn(e){return Yje(e)&&e.timeUnit?{...e,timeUnit:La(e.timeUnit)}:e}const bP={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Usn(e){return e==="quantitative"||e==="temporal"}function Xje(e){return e==="ordinal"||e==="nominal"}const y_=bP.quantitative,cue=bP.ordinal,tT=bP.temporal,fue=bP.nominal,TA=bP.geojson;function zsn(e){if(e)switch(e=e.toLowerCase(),e){case"q":case y_:return"quantitative";case"t":case tT:return"temporal";case"o":case cue:return"ordinal";case"n":case fue:return"nominal";case TA:return"geojson"}}const Bc={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},ZX={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Vsn(e,t){const n=ZX[e],r=ZX[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Hsn={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function h_e(e){return Hsn[e]}const Qje=new Set(["linear","log","pow","sqrt","symlog"]),Jje=new Set([...Qje,"time","utc"]);function Zje(e){return Qje.has(e)}const eUe=new Set(["quantile","quantize","threshold"]),qsn=new Set([...Jje,...eUe,"sequential","identity"]),Wsn=new Set(["ordinal","bin-ordinal","point","band"]);function Ua(e){return Wsn.has(e)}function Qf(e){return qsn.has(e)}function Zh(e){return Jje.has(e)}function nT(e){return eUe.has(e)}const Gsn={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Ysn(e){return!Bt(e)&&!!e.name}function tUe(e){return e==null?void 0:e.param}function Ksn(e){return e==null?void 0:e.unionWith}function Xsn(e){return jt(e)&&"field"in e}const Qsn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:vAn,domain:bAn,range:xAn,rangeMax:wAn,rangeMin:_An,scheme:EAn,...Jsn}=Qsn,Zsn=xt(Jsn);function eQ(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Zh(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Zh(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Zh(e);case"nice":return Zh(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Qf(e)&&!$r(["log","time","utc","threshold","quantile"],e)}}function nUe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return LS(e)?void 0:Kin(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function eon(e,t){return $r([cue,fue],t)?e===void 0||Ua(e):t===tT?$r([Bc.TIME,Bc.UTC,void 0],e):t===y_?Zje(e)||nT(e)||e===void 0:!0}function ton(e,t,n=!1){if(!zy(e))return!1;switch(e){case zs:case Ha:case qb:case CA:case oh:case Op:return Zh(t)||t==="band"?!0:t==="point"?!n:!1;case jy:case Yb:case Uy:case Wb:case Gb:case aE:return Zh(t)||nT(t)||$r(["band","point","ordinal"],t);case Xc:case E0:case S0:return t!=="band";case Kb:case Qc:return t==="ordinal"||nT(t)}}function due(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=pue(e);return At(n)&&!_je(n.aggregate)&&i&&Zh(i.get("type"))?non({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function non({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Di("invalid",n,i)===null?[ron(e,t),r]:r}function ron(e,t){const n=hue(e,!0),i=uE(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function hue(e,t=!0){return lue(Bt(e)?e:Pt(e,{expr:"datum"}),!t)}function ion(e){const{datum:t}=e;return cE(t)?g_(t):`${Ji(t)}`}function Mw(e,t,n,r){const i={};if(t&&(i.scale=t),A0(e)){const{datum:s}=e;cE(s)?i.signal=g_(s):rn(s)?i.signal=s.signal:vP(s)?i.signal=s.expr:i.value=s}else i.field=Pt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function g$({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!rn(o)&&0<o&&o<1?"datum":void 0,u=Pt(t,{expr:a,suffix:i}),l=n!==void 0?Pt(n,{expr:a}):Pt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=rn(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function son({scaleName:e,fieldDef:t}){const n=Pt(t,{expr:"datum"}),r=Pt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function pue({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Qn(t)){const f=o==null?void 0:o.get("type");if(ql(t)){c??(c=sb({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ms(d)||c&&h&&p===tT)return a!=null&&a.impute?Mw(t,s,{binSuffix:"mid"},{offset:u}):c&&!Ua(f)?g$({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Mw(t,s,EP(t,e)?{binSuffix:"range"}:{},{offset:u});if(tu(d)){if(At(n))return g$({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Tt($je(e===zs?Pp:_0))}}return Mw(t,s,Ua(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(xp(t)){const f=t.value,d=u?{offset:u}:{};return{...$k(e,f),...d}}}return cr(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function $k(e,t){return $r(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:$r(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:_s(t)}function v_(e){return e&&e!=="number"&&e!=="time"}function rUe(e,t,n){return`${e}(${t}${n?`, ${Ji(n)}`:""})`}const oon="  ";function mue({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(v_(n))return ep({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=iUe(e,r,i),a=rT(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return ep({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return ep({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&At(e)&&e.timeUnit===void 0)return ep({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(sT(e)){const c=uon({field:o,timeUnit:At(e)?(u=La(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:hE(e)&&((l=e.scale)==null?void 0:l.type)===Bc.UTC});return c?{signal:c}:void 0}if(t=tQ({type:a,specifiedFormat:t,config:s,normalizeStack:i}),At(e)&&ms(e.bin)){const c=Pt(e,{expr:r,binSuffix:"end"});return{signal:xP(o,c,t,n,s)}}else return t||rT(e)==="quantitative"?{signal:`${aUe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function iUe(e,t,n){return At(e)?n?`${Pt(e,{expr:t,suffix:"end"})}-${Pt(e,{expr:t,suffix:"start"})}`:Pt(e,{expr:t}):ion(e)}function ep({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=iUe(e,r,i)),o!=="datum.value"&&At(e)&&ms(e.bin)){const a=Pt(e,{expr:r,binSuffix:"end"});return{signal:xP(o,a,t,n,s)}}return{signal:rUe(n,o,t)}}function sUe(e,t,n,r,i,s){var o;if(!(Bt(r)&&v_(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&rT(e)==="quantitative"&&(i.normalizedNumberFormatType&&iT(e)&&e.stack==="normalize"||i.numberFormatType))){if(iT(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return tQ({type:"quantitative",config:i,normalizeStack:!0});if(sT(e)){const a=At(e)?(o=La(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:aon({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return tQ({type:t,specifiedFormat:n,config:i})}}function oUe(e,t,n){var r;if(e&&(rn(e)||e==="number"||e==="time"))return e;if(sT(t)&&n!=="time"&&n!=="utc")return At(t)&&((r=La(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function tQ({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Bt(t))return t;if(e===y_)return r?n.normalizedNumberFormat:n.numberFormat}function aon({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:qje(t)}:r?void 0:n.timeFormat)}function aUe(e,t){return`format(${e}, "${t||""}")`}function p_e(e,t,n,r){return v_(n)?rUe(n,e,t):aUe(e,(Bt(t)?t:void 0)??r.numberFormat)}function xP(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return xP(e,t,i.numberFormat,i.numberFormatType,i);const s=p_e(e,n,r,i),o=p_e(t,n,r,i);return`${lue(e,!1)} ? "null" : ${s} + "${oon}" + ${o}`}function uon({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Bt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):Psn(t,e,s)}const Ql={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},uUe=Ql.arc,S7=Ql.area,C7=Ql.bar,lon=Ql.image,T7=Ql.line,A7=Ql.point,con=Ql.rect,y$=Ql.rule,lUe=Ql.text,gue=Ql.tick,fon=Ql.trail,yue=Ql.circle,vue=Ql.square,cUe=Ql.geoshape;function dE(e){return["line","area","trail"].includes(e)}function A3(e){return["rect","bar","image","arc"].includes(e)}const don=new Set(xt(Ql));function r0(e){return e.type}const hon=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],pon=["fill","fillOpacity"],mon=[...hon,...pon],gon={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},m_e=xt(gon),yon={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},von={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},bon={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},fUe=xt(bon);function b_(e){return e&&e.band!=null}const xon={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},dUe=5,won={binSpacing:1,continuousBandSize:dUe,minBandSize:.25,timeUnitBandPosition:.5},_on={binSpacing:0,continuousBandSize:dUe,minBandSize:.25,timeUnitBandPosition:.5},Eon={thickness:1};function Son(e){return r0(e)?e.type:e}const D7="min",Con={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function g_e(e){return e in Con}function hUe(e){return!!(e!=null&&e.encoding)}function Mm(e){return e&&(e.op==="count"||!!e.field)}function pUe(e){return e&&at(e)}function wP(e){return"row"in e||"column"in e}function bue(e){return!!e&&"header"in e}function I7(e){return"facet"in e}function Ton(e){return e.param}function Aon(e){return e&&!Bt(e)&&"repeat"in e}function y_e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function xue(e){return"sort"in e}function sb({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Qn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(At(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return my("timeUnitBandPosition",n,r);if(ms(s))return .5}}function mUe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Jc(e),u=Di(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(At(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:my("timeUnitBandSize",r,i)};if(ms(h)&&!Ua(s))return{band:1}}if(A3(r.type))return s?Ua(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function gUe(e,t,n,r){return ms(e.bin)||e.timeUnit&&ql(e)&&e.type==="temporal"?sb({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function yUe(e){return e&&!!e.sort&&!e.field}function k7(e){return e&&"condition"in e}function R7(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&At(t)}function _P(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&Qn(t)}function Don(e){const t=e==null?void 0:e.condition;return!!t&&(at(t)||xp(t))}function At(e){return e&&(!!e.field||e.aggregate==="count")}function rT(e){return e==null?void 0:e.type}function A0(e){return e&&"datum"in e}function J1(e){return ql(e)&&!b$(e)||v$(e)}function v_e(e){return ql(e)&&e.type==="quantitative"&&!e.bin||v$(e)}function v$(e){return A0(e)&&fi(e.datum)}function Qn(e){return At(e)||A0(e)}function ql(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function xp(e){return e&&"value"in e&&"value"in e}function hE(e){return e&&("scale"in e||"sort"in e)}function iT(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function vUe(e){return e&&"legend"in e}function bUe(e){return e&&("format"in e||"formatType"in e)}function Ion(e){return Lc(e,["legend","axis","header","scale"])}function kon(e){return"op"in e}function Pt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Non(e))n=uje("count");else{let o;if(!t.nofn)if(kon(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ms(a)?(o=Eje(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Xb(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):py(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!fE(l)&&(o=Osn(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?SA(n):t.expr?sje(n,t.expr)+s:Yd(n)+s}function b$(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return At(e)&&!!e.bin;case"temporal":return!1}throw new Error(Pje(e.type))}function Ron(e){var t;return hE(e)&&nT((t=e.scale)==null?void 0:t.type)}function Non(e){return e.aggregate==="count"}function Pon(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ms(r))return`${n} (binned)`;if(i&&!fE(i)){const a=(o=La(i))==null?void 0:o.unit;if(a)return`${n} (${E7(a).join("-")})`}else if(s)return Xb(s)?`${n} for max ${s.argmax}`:py(s)?`${n} for min ${s.argmin}`:`${pP(s)} of ${n}`;return n}function Oon(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Xb(t))return`${i} for argmax(${t.argmax})`;if(py(t))return`${i} for argmin(${t.argmin})`;const s=r&&!fE(r)?La(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ms(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const xUe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Oon(e);default:return Pon(e,t)}};let wUe=xUe;function _Ue(e){wUe=e}function Fon(){_Ue(xUe)}function BS(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=wue(e))==null?void 0:a.title;if(!At(e))return i??e.title;const s=e,o=r?_ue(s,t):void 0;return n?Io(i,s.title,o):i??s.title??o}function wue(e){if(iT(e)&&e.axis)return e.axis;if(vUe(e)&&e.legend)return e.legend;if(bue(e)&&e.header)return e.header}function _ue(e,t){return wUe(e,t)}function x$(e){if(bUe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=wue(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Mon(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(xue(e)&&at(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Xb(n)&&!py(n))return"quantitative";if(hE(e)&&((s=e.scale)!=null&&s.type))switch(ZX[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function i0(e){if(At(e))return e;if(R7(e))return e.condition}function fa(e){if(Qn(e))return e;if(_P(e))return e.condition}function EUe(e,t,n,r={}){if(Bt(e)||fi(e)||zb(e)){const i=Bt(e)?"string":fi(e)?"number":"boolean";return Tt($in(t,i,e)),{value:e}}return Qn(e)?w$(e,t,n,r):_P(e)?{...e,condition:w$(e.condition,t,n,r)}:e}function w$(e,t,n,r){if(bUe(e)){const{format:i,formatType:s,...o}=e;if(v_(s)&&!n.customFormatTypes)return Tt(c_e(t)),w$(o,t,n,r)}else{const i=iT(e)?"axis":vUe(e)?"legend":bue(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(v_(o)&&!n.customFormatTypes)return Tt(c_e(t)),w$({...e,[i]:a},t,n,r)}}return At(e)?Eue(e,t,r):$on(e)}function $on(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=fi(n)?"quantitative":Bt(n)?"nominal":cE(n)?"temporal":void 0,{...e,type:t}}function Eue(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Xae(r)&&!Xb(r)&&!py(r)&&(Tt(Bin(r)),delete a.aggregate),i&&(a.timeUnit=La(i)),o&&(a.field=`${o}`),ms(s)&&(a.bin=N7(s,t)),tu(s)&&!ko(t)&&Tt(ysn(t)),ql(a)){const{type:u}=a,l=zsn(u);u!==l&&(a.type=l),u!=="quantitative"&&_je(r)&&(Tt(Lin(u,r)),a.type="quantitative")}else if(!gje(t)){const u=Mon(a,t);a.type=u}if(ql(a)){const{compatible:u,warning:l}=Lon(a,t)||{};u===!1&&Tt(l)}if(xue(a)&&Bt(a.sort)){const{sort:u}=a;if(g_e(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&g_e(l))return{...a,sort:{encoding:l,order:"descending"}}}if(bue(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function N7(e,t){return zb(e)?{maxbins:t_e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:t_e(t)}:e}const f2={compatible:!0};function Lon(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Bg:case jg:case p7:return b$(e)?f2:{compatible:!1,warning:Vin(t)};case zs:case Ha:case qb:case CA:case Xc:case E0:case S0:case mP:case gP:case m7:case m_:case g7:case y7:case aE:case oh:case Op:case v7:return f2;case Mp:case Kd:case Fp:case $p:return n!==y_?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:f2;case Uy:case Wb:case Gb:case Yb:case jy:case By:case Ly:case Pp:case _0:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:f2;case Qc:case Kb:return!b$(e)&&!Ron(e)?{compatible:!1,warning:Hin(t)}:f2;case ZC:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:f2}}function sT(e){const{formatType:t}=x$(e);return t==="time"||!t&&Bon(e)}function Bon(e){return e&&(e.type==="temporal"||At(e)&&!!e.timeUnit)}function P7(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=La(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return vP(e)?a=e.expr:rn(e)?a=e.signal:cE(e)?(o=!0,a=g_(e)):(Bt(e)||fi(e))&&o&&(a=`datetime(${Ji(e)})`,Isn(s)&&(fi(e)&&e<1e4||Bt(e)&&isNaN(Date.parse(e)))&&(a=g_({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Ji(e)}function SUe(e,t){const{type:n}=e;return t.map(r=>{const i=At(e)&&!fE(e.timeUnit)?e.timeUnit:void 0,s=P7(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function EP(e,t){return ms(e.bin)?zy(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const b_e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function SP(e){return e==null?void 0:e.condition}const CUe=["domain","grid","labels","ticks","title"],jon={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},TUe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Uon={...TUe,style:1,labelExpr:1,encoding:1};function x_e(e){return!!Uon[e]}const zon={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},AUe=xt(zon);function Vy(e){return"mark"in e}class O7{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Vy(t)?Son(t.mark)===this.name:!1}}function $w(e,t){const n=e&&e[t];return n?at(n)?h_(n,r=>!!r.field):At(n)||R7(n):!1}function DUe(e,t){const n=e&&e[t];return n?at(n)?h_(n,r=>!!r.field):At(n)||A0(n)||_P(n):!1}function IUe(e,t){if(ko(t)){const n=e[t];if((At(n)||A0(n))&&(Xje(n.type)||At(n)&&n.timeUnit)){const r=Wae(t);return DUe(e,r)}}return!1}function Sue(e){return h_(Vrn,t=>{if($w(e,t)){const n=e[t];if(at(n))return h_(n,r=>!!r.aggregate);{const r=i0(n);return r&&!!r.aggregate}}return!1})}function kUe(e,t){const n=[],r=[],i=[],s=[],o={};return Cue(e,(a,u)=>{if(At(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=wue(a),m=p==null?void 0:p.title;let g=Pt(a,{forAs:!0});const y={...m?[]:{title:BS(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Xb(c)?(v="argmax",g=Pt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):py(c)?(v="argmin",g=Pt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),ql(a)&&ms(f)){if(r.push({bin:f,field:l,as:g}),n.push(Pt(a,{binSuffix:"end"})),EP(a,u)&&n.push(Pt(a,{binSuffix:"range"})),ko(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",gje(u)||(y.type=y_)}else if(d&&!fE(d)){i.push({timeUnit:d,field:l,as:g});const v=ql(a)&&a.type!==tT&&"time";v&&(u===mP||u===m_?y.formatType=v:Zrn(u)?y.legend={formatType:v,...y.legend}:ko(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function Von(e,t,n){const r=tin(t,n);if(r){if(r==="binned"){const i=e[t===Pp?zs:Ha];return!!(At(i)&&At(e[t])&&tu(i.bin))}}else return!1;return!0}function Hon(e,t,n,r){const i={};for(const s of xt(e))mje(s)||Tt(zin(s));for(let s of Krn){if(!e[s])continue;const o=e[s];if(yP(s)){const a=Yrn(s),u=i[a];if(At(u)&&Usn(u.type)&&At(o)&&!u.timeUnit){Tt(Min(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Tt(Fin),s=oh),!Von(e,s,t)){Tt(_7(s,t));continue}if(s===jy&&t==="line"){const a=i0(e[s]);if(a!=null&&a.aggregate){Tt(Uin);continue}}if(s===Xc&&(n?"fill"in e:"stroke"in e)){Tt(Oje("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===gP||s===ZC&&!at(o)&&!xp(o)||s===m_&&at(o)){if(o){if(s===ZC){const a=e[s];if(yUe(a)){i[s]=a;continue}}i[s]=Lt(o).reduce((a,u)=>(At(u)?a.push(Eue(u,s)):Tt(JX(u,s)),a),[])}}else{if(s===m_&&o===null)i[s]=null;else if(!At(o)&&!A0(o)&&!xp(o)&&!k7(o)&&!rn(o)){Tt(JX(o,s));continue}i[s]=EUe(o,s,r)}}return i}function F7(e,t){const n={};for(const r of xt(e)){const i=EUe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function qon(e){const t=[];for(const n of xt(e))if($w(e,n)){const r=e[n],i=Lt(r);for(const s of i)At(s)?t.push(s):R7(s)&&t.push(s.condition)}return t}function Cue(e,t,n){if(e)for(const r of xt(e)){const i=e[r];if(at(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Won(e,t,n,r){return e?xt(e).reduce((i,s)=>{const o=e[s];return at(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function RUe(e,t){return xt(t).reduce((n,r)=>{switch(r){case zs:case Ha:case g7:case v7:case y7:case Pp:case _0:case qb:case CA:case oh:case By:case Op:case Ly:case Fp:case Mp:case $p:case Kd:case mP:case Qc:case aE:case m_:return n;case ZC:if(e==="line"||e==="trail")return n;case gP:case m7:{const i=t[r];if(at(i)||At(i))for(const s of Lt(i))s.aggregate||n.push(Pt(s,{}));return n}case jy:if(e==="trail")return n;case Xc:case E0:case S0:case Uy:case Wb:case Gb:case Kb:case Yb:{const i=i0(t[r]);return i&&!i.aggregate&&n.push(Pt(i,{})),n}}},[])}function Gon(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(at(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return at(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function nQ(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Tue(t)}`:"";return{field:o+t.field,type:t.type,title:rn(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=qon(n).map(Ion);return{tooltip:[...i,..._m(s,Mr)]}}function Tue(e){const{title:t,field:n}=e;return Io(t,n)}function Aue(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Tue(n);return NUe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Bt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function NUe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...r0(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...zb(e[t])?{}:e[t]}}]:[]}function PUe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:n6(s,n),continuousAxisChannelDef2:n6(o,n),continuousAxisChannelDefError:n6(a,n),continuousAxisChannelDefError2:n6(u,n),continuousAxis:i}}function n6(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Tt(gsn(n,t)),r}else return e}function OUe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(r0(n)&&n.orient)return n.orient;if(J1(i)){if(J1(s)){const o=At(i)&&i.aggregate,a=At(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return sT(s)&&!sT(i)?"horizontal":"vertical"}return"horizontal"}else{if(J1(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const _$="boxplot",Yon=["box","median","outliers","rule","ticks"],Kon=new O7(_$,MUe);function FUe(e){return fi(e)?"tukey":e}function MUe(e,{config:t}){e={...e,encoding:F7(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=r0(n)?n:{type:n};i&&Tt(Nje("boxplot"));const u=a.extent??t.boxplot.extent,l=Di("size",a,t),c=a.invalid,f=FUe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:_,boxOrient:w,customTooltipWithoutAggregatedField:S}=Xon(e,u,t),T=SA(m.field),{color:A,size:k,...I}=b,R=Ve=>Aue(a,g,m,Ve,t.boxplot),F=R(I),O=R(b),$=(jt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",V=R({...I,...k?{size:k}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:$}}}}),j=nQ([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),G={type:"tick",color:"black",opacity:1,orient:_,invalid:c,aria:!1},Y=f==="min-max"?j:nQ([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),J=[...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...F({partName:"ticks",mark:G,positionPrefix:"lower_whisker",extraEncoding:Y}),...F({partName:"ticks",mark:G,positionPrefix:"upper_whisker",extraEncoding:Y})],L=[...f!=="tukey"?J:[],...O({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:j}),...V({partName:"median",mark:{type:"tick",invalid:c,...jt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:_,aria:!1},positionPrefix:"mid_box",extraEncoding:j})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:L};const U=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,B=`(${W} - ${U})`,q=`${U} - ${u} * ${B}`,Z=`${W} + ${u} * ${B}`,re=`datum["${m.field}"]`,xe={joinaggregate:$Ue(m.field),groupby:y},pe={transform:[{filter:`(${q} <= ${re}) && (${re} <= ${Z})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:J},{tooltip:Te,...ke}=I,{scale:it,axis:Re}=m,ut=Tue(m),Ke=Lc(Re,["title"]),Ct=NUe(a,"outliers",t.boxplot,{transform:[{filter:`(${re} < ${q}) || (${re} > ${Z})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ut!==void 0?{title:ut}:{},...it!==void 0?{scale:it}:{},...Qi(Ke)?{}:{axis:Ke}},...ke,...A?{color:A}:{},...S?{tooltip:S}:{}}})[0];let gt;const Ie=[...d,...h,xe];return Ct?gt={transform:Ie,layer:[Ct,pe]}:(gt=pe,gt.transform.unshift(...Ie)),{...o,layer:[gt,{transform:p,layer:L}]}}function $Ue(e){const t=SA(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Xon(e,t,n){const r=OUe(e,_$),{continuousAxisChannelDef:i,continuousAxis:s}=PUe(e,r,_$),o=i.field,a=SA(o),u=FUe(t),l=[...$Ue(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Gon(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=kUe(p,n),_=r==="vertical"?"horizontal":"vertical",w=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:_,boxOrient:w,customTooltipWithoutAggregatedField:h}}const Due="errorbar",Qon=["ticks","rule"],Jon=new O7(Due,LUe);function LUe(e,{config:t}){e={...e,encoding:F7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=BUe(e,Due,t);delete s.size;const c=Aue(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Zon(e,t){const{encoding:n}=e;if(ean(n))return{orient:OUe(e,t),inputType:"raw"};const r=tan(n),i=nan(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Qn(a)&&Qn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Qn(a)){if(J1(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Qn(u)){if(J1(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Qn(u)&&!Qn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qn(c)&&!Qn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Qn(a)&&Qn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qn(a)){if(J1(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Qn(l)){if(J1(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function ean(e){return(Qn(e.x)||Qn(e.y))&&!Qn(e.x2)&&!Qn(e.y2)&&!Qn(e.xError)&&!Qn(e.xError2)&&!Qn(e.yError)&&!Qn(e.yError2)}function tan(e){return Qn(e.x2)||Qn(e.y2)}function nan(e){return Qn(e.xError)||Qn(e.xError2)||Qn(e.yError)||Qn(e.yError2)}function BUe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=r0(r)?r:{type:r};s&&Tt(Nje(t));const{orient:l,inputType:c}=Zon(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=PUe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=ran(u,f,d,h,p,c,t,n),{[m]:_,[m==="x"?"x2":"y2"]:w,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:T,...A}=i,{bins:k,timeUnits:I,aggregate:R,groupby:F,encoding:O}=kUe(A,n),$=[...R,...g],V=c!=="raw"?[]:F,j=nQ(v,f,O,b);return{transform:[...a.transform??[],...k,...I,...$.length===0?[]:[{aggregate:$,groupby:V}],...y],groupby:V,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:O,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:j}}function ran(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Tt(msn(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:pP(h)},{fieldPrefix:"upper_",titlePrefix:w_e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:w_e(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:BS({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:BS({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:BS({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Tt(psn(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:p_(p_(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function w_e(e,t,n){return`${pP(e)} ${n} ${t}`}const Iue="errorband",ian=["band","borders"],san=new O7(Iue,jUe);function jUe(e,{config:t}){e={...e,encoding:F7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=BUe(e,Iue,t),l=o,c=Aue(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Tt(d_e("interpolate")):l.tension&&Tt(d_e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const UUe={};function kue(e,t,n){const r=new O7(e,t);UUe[e]={normalizer:r,parts:n}}function oan(){return xt(UUe)}kue(_$,MUe,Yon);kue(Due,LUe,Qon);kue(Iue,jUe,ian);const aan=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],zUe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},VUe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},uan=xt(zUe),lan=xt(VUe),can={header:1,headerRow:1,headerColumn:1,headerFacet:1},HUe=xt(can),qUe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],fan={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},dan={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},wp="_vgsid_",han={point:{on:"click",fields:[wp],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Rue(e){return e==="legend"||!!(e!=null&&e.legend)}function vq(e){return Rue(e)&&jt(e)}function Nue(e){return!!(e!=null&&e.select)}function WUe(e){const t=[];for(const n of e||[]){if(Nue(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function pan(e){return M7(e)||Oue(e)||Pue(e)}function Pue(e){return"concat"in e}function M7(e){return"vconcat"in e}function Oue(e){return"hconcat"in e}function GUe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function s0(e){return jt(e)&&e.step!==void 0}function __e(e){return e.view||e.width||e.height}const E_e=20,man={align:1,bounds:1,center:1,columns:1,spacing:1},gan=xt(man);function yan(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(I7(e)&&!wP(e.facet)||Pue(e))&&(i.columns=o),M7(e)&&(i.columns=1);for(const a of gan)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=fi(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function rQ(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function E$(e,t){const n=S$(e,t);return s0(n)?n.step:YUe}function S$(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Io(n,{step:e.step})}const YUe=20,van={continuousWidth:200,continuousHeight:200,step:YUe},ban={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:van,mark:von,arc:{},area:{},bar:won,circle:{},geoshape:{},image:{},line:{},point:{},rect:_on,rule:{color:"black"},square:{},text:{color:"black"},tick:Eon,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Gsn,projection:{},legend:fan,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:han,style:{},title:{},facet:{spacing:E_e},concat:{spacing:E_e},normalizedNumberFormat:".0%"},X0=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],S_e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},C_e={blue:X0[0],orange:X0[1],red:X0[2],teal:X0[3],green:X0[4],yellow:X0[5],purple:X0[6],pink:X0[7],brown:X0[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function xan(e={}){return{signals:[{name:"color",value:jt(e)?{...C_e,...e}:C_e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function wan(e){return{signals:[{name:"fontSize",value:jt(e)?{...S_e,...e}:S_e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function _an(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function KUe(e){const t=xt(e||{}),n={};for(const r of t){const i=e[r];n[r]=SP(i)?Cje(i):xf(i)}return n}function Ean(e){const t=xt(e),n={};for(const r of t)n[r]=KUe(e[r]);return n}const San=[...fUe,...AUe,...HUe,"background","padding","legend","lineBreak","scale","style","title","view"];function XUe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=hA({},zn(ban),n?_an(n):{},t?xan(t):{},r?wan(r):{},s||{});i&&pA(o,"selection",i,!0);const a=Lc(o,San);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=xf(o[u]));for(const u of fUe)o[u]&&(a[u]=xc(o[u]));for(const u of AUe)o[u]&&(a[u]=KUe(o[u]));for(const u of HUe)o[u]&&(a[u]=xc(o[u]));return o.legend&&(a.legend=xc(o.legend)),o.scale&&(a.scale=xc(o.scale)),o.style&&(a.style=Ean(o.style)),o.title&&(a.title=xc(o.title)),o.view&&(a.view=xc(o.view)),a}const Can=new Set(["view",...don]),Tan=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Aan={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...yon};function Dan(e){e=zn(e);for(const t of Tan)delete e[t];if(e.axis)for(const t in e.axis)SP(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of aan)delete e.legend[t];if(e.mark){for(const t of m_e)delete e.mark[t];e.mark.tooltip&&jt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(WUe(e.params)),delete e.params);for(const t of Can){for(const r of m_e)delete e[t][r];const n=Aan[t];if(n)for(const r of n)delete e[t][r];kan(e,t)}for(const t of oan())delete e[t];Ian(e);for(const t in e)jt(e[t])&&Qi(e[t])&&delete e[t];return Qi(e)?void 0:e}function Ian(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Sje(e.title);Qi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Qi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Qi(r)?delete e.title:e.title=r}function kan(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Qi(s)||(e.style[n??t]=s),delete e[t]}function $7(e){return"layer"in e}function Ran(e){return"repeat"in e}function Nan(e){return!at(e.repeat)&&e.repeat.layer}class Fue{map(t,n){return I7(t)?this.mapFacet(t,n):Ran(t)?this.mapRepeat(t,n):Oue(t)?this.mapHConcat(t,n):M7(t)?this.mapVConcat(t,n):Pue(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if($7(t))return this.mapLayer(t,n);if(Vy(t))return this.mapUnit(t,n);throw new Error(Qae(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Pan={zero:1,center:1,normalize:1};function Oan(e){return e in Pan}const Fan=new Set([uUe,C7,S7,y$,A7,yue,vue,T7,lUe,gue]),Man=new Set([C7,S7,uUe]);function d2(e){return At(e)&&rT(e)==="quantitative"&&!e.bin}function T_e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(At(o)&&At(a))if(d2(o)&&d2(a)){if(o.stack)return t;if(a.stack)return i;const u=At(o)&&!!o.aggregate,l=At(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(d2(o))return t;if(d2(a))return i}else{if(d2(o))return s&&n==="vertical"?void 0:t;if(d2(a))return s&&n==="horizontal"?void 0:i}}function $an(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function QUe(e,t){var m,g;const n=r0(e)?e:{type:e},r=n.type;if(!Fan.has(r))return null;const i=T_e(t,"x",n)||T_e(t,"theta",n);if(!i)return null;const s=t[i],o=At(s)?Pt(s,{}):void 0,a=$an(i),u=[],l=new Set;if(t[a]){const y=t[a],v=At(y)?Pt(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=At(f)?Pt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=Xrn.reduce((y,v)=>{if(v!=="tooltip"&&$w(t,v)){const b=t[v];for(const _ of Lt(b)){const w=i0(_);if(w.aggregate)continue;const S=Pt(w,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:w})}}return y},[]);let p;return s.stack!==void 0?zb(s.stack)?p=s.stack?"zero":null:p=s.stack:Man.has(r)&&(p="zero"),!p||!Oan(p)||Sue(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Bc.LINEAR&&s!=null&&s.stack&&Tt(fsn(s.scale.type)),Qn(t[C0(i)])?(s.stack!==void 0&&Tt(csn(i)),null):(At(s)&&s.aggregate&&!uin.has(s.aggregate)&&Tt(dsn(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:dE(r),stackBy:h,offset:p}))}function JUe(e,t,n){const r=xc(e),i=Di("orient",r,n);if(r.orient=Uan(r.type,t,i),i!==void 0&&i!==r.orient&&Tt(Yin(r.orient,i)),r.type==="bar"&&r.orient){const u=Di("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:xon[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Di("opacity",r,n),o=Di("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Ban(r.type,t)),Di("cursor",r,n)===void 0&&(r.cursor=Lan(r,t,n)),r}function Lan(e,t,n){return t.href||e.href||Di("href",e,n)?"pointer":e.cursor}function Ban(e,t){if($r([A7,gue,yue,vue],e)&&!Sue(t))return .7}function jan(e,t,{graticule:n}){if(n)return!1;const r=my("filled",e,t),i=e.type;return Io(r,i!==A7&&i!==T7&&i!==y$)}function Uan(e,t,n){switch(e){case A7:case yue:case vue:case lUe:case con:case lon:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case C7:if(At(r)&&(tu(r.bin)||At(i)&&i.aggregate&&!r.aggregate))return"vertical";if(At(i)&&(tu(i.bin)||At(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(At(r)&&r.type===y_&&!ms(r.bin)||v$(r))&&At(i)&&tu(i.bin)?"horizontal":"vertical";if(!o)return(At(i)&&i.type===y_&&!ms(i.bin)||v$(i))&&At(r)&&tu(r.bin)?"vertical":"horizontal"}case y$:if(s&&!(At(r)&&tu(r.bin))&&o&&!(At(i)&&tu(i.bin)))return;case S7:if(o)return At(i)&&tu(i.bin)?"horizontal":"vertical";if(s)return At(r)&&tu(r.bin)?"vertical":"horizontal";if(e===y$){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case T7:case gue:{const a=v_e(r),u=v_e(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ql(r)&&r.type===tT,c=ql(i)&&i.type===tT;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function zan(e){const{point:t,line:n,...r}=e;return xt(r).length>1?r:r.type}function Van(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Lc(e[t],["point","line"])});return e}function bq(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?jt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?jt(t.point)?t.point:{}:void 0}function A_e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Han{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Vy(t)){const{mark:r,encoding:i}=t,s=r0(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!bq(s,n[s.type],i);case"area":return!!bq(s,n[s.type],i)||!!A_e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=F7(l,i),d=r0(a)?a:{type:a},h=bq(d,i[d.type],f),p=d.type==="area"&&A_e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:zan({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Lc(f,["shape"])}],g=QUe(JUe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Lc(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...QC(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...QC(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Van(i)})}}function qan(e,t){return t?wP(e)?eze(e,t):ZUe(e,t):e}function xq(e,t){return t?eze(e,t):e}function iQ(e,t,n){const r=t[e];if(Aon(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Tt(Din(r.repeat));return}return t}function ZUe(e,t){if(e=iQ("field",e,t),e!==void 0){if(e===null)return null;if(xue(e)&&Mm(e.sort)){const n=iQ("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function D_e(e,t){if(At(e))return ZUe(e,t);{const n=iQ("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function I_e(e,t){if(Qn(e)){const n=D_e(e,t);if(n)return n;if(k7(e))return{condition:e.condition}}else{if(_P(e)){const n=D_e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function eze(e,t){const n={};for(const r in e)if(vn(e,r)){const i=e[r];if(at(i))n[r]=i.map(s=>I_e(s,t)).filter(s=>s);else{const s=I_e(i,t);s!==void 0&&(n[r]=s)}}return n}class Wan{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Vy(t)){const{encoding:n,mark:r}=t;if(r==="line"||r0(r)&&r.type==="line")for(const i of Grn){const s=uE(i),o=n[s];if(n[i]&&(At(o)&&!tu(o.bin)||A0(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Tt(Gin(!!i.x2,!!i.y2)),r({...t,mark:jt(s)?{...s,type:"rule"}:"rule"},n)}}class Gan extends Fue{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Kon,Jon,san,new Han,new Wan]}map(t,n){if(Vy(t)){const r=$w(t.encoding,Bg),i=$w(t.encoding,jg),s=$w(t.encoding,p7);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=xq(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Nan(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Us(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!at(r)&&t.columns&&(t=Lc(t,["columns"]),Tt(u_e("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!at(r)&&r.row||[u?u.row:null],f=!at(r)&&r.column||[u?u.column:null],d=at(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(at(r)?`${Us(p)}`:(r.row?`row_${Us(m)}`:"")+(r.column?`column_${Us(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Lc(b,["data"]))}const h=at(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return wP(r)&&t.columns&&(t=Lc(t,["columns"]),Tt(u_e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=R_e({parentProjection:o,projection:i}),l=k_e({parentEncoding:s,encoding:xq(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=xq(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Tt(qin([...r?[Bg]:[],...i?[jg]:[]]));const o={},a={};for(const u of[Bg,jg]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:qan(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:k_e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:R_e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function k_e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...xt(e),...xt(t)]);for(const s of i){const o=t[s],a=e[s];if(Qn(o)){const u={...a,...o};r[s]=u}else _P(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||xp(a)||rn(a)||Qn(a)||at(a))&&(r[s]=a)}}else r=t;return!r||Qi(r)?void 0:r}function R_e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Tt(Oin({parentProjection:t,projection:n})),n??t}function Mue(e){return"filter"in e}function Yan(e){return(e==null?void 0:e.stop)!==void 0}function tze(e){return"lookup"in e}function Kan(e){return"data"in e}function Xan(e){return"param"in e}function Qan(e){return"pivot"in e}function Jan(e){return"density"in e}function Zan(e){return"quantile"in e}function eun(e){return"regression"in e}function tun(e){return"loess"in e}function nun(e){return"sample"in e}function run(e){return"window"in e}function iun(e){return"joinaggregate"in e}function sun(e){return"flatten"in e}function oun(e){return"calculate"in e}function nze(e){return"bin"in e}function aun(e){return"impute"in e}function uun(e){return"timeUnit"in e}function lun(e){return"aggregate"in e}function cun(e){return"stack"in e}function fun(e){return"fold"in e}function dun(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function hun(e){return e.map(t=>Mue(t)?{filter:$S(t.filter,jsn)}:t)}class pun extends Fue{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=N_e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=N_e(t,n),t.encoding){const r={};for(const[i,s]of rb(t.encoding))r[i]=rze(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:rb(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of fu(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function N_e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Mue(s))return{filter:sQ(s,t)};if(nze(s)&&lE(s.bin))return{...s,bin:ize(s.bin)};if(tze(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function rze(e,t){var r,i;const n=zn(e);if(At(n)&&lE(n.bin)&&(n.bin=ize(n.bin)),hE(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(k7(n))if(at(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:sQ(s,t)}});else{const{selection:s,param:o,test:a,...u}=rze(n.condition,t);n.condition=o?n.condition:{...u,test:sQ(n.condition,t)}}return n}function ize(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function sQ(e,t){const n=r=>$S(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):$S(e.test||e.filter,r=>r.selection?n(r.selection):r)}class oQ extends Fue{map(t,n){const r=n.selections??[];if(t.params&&!Vy(t)){const i=[];for(const s of t.params)Nue(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Bt(a)&&(a===t.name||i.includes(a))||at(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=oQ.prototype[e];oQ.prototype[e]=function(n,r){return t.call(this,n,mun(n,r))}}function mun(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function sze(e,t){t===void 0&&(t=XUe(e.config));const n=bun(e,t),{width:r,height:i}=e,s=xun(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const gun=new Gan,yun=new pun,vun=new oQ;function bun(e,t={}){const n={config:t};return vun.map(gun.map(yun.map(e,n),n),n)}function P_e(e){return Bt(e)?{type:e}:e??{}}function xun(e,t,n){let{width:r,height:i}=t;const s=Vy(e)||$7(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Tt(i_e("width")),r=void 0),i=="container"&&(Tt(i_e("height")),i=void 0));const a={type:"pad",...o,...n?P_e(n.autosize):{},...P_e(e.autosize)};if(a.type==="fit"&&!s&&(Tt(yin),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Tt(s_e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Tt(s_e("height")),!Af(a,{type:"pad"}))return a}function wun(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function _un(e){return e?`fit-${b7(e)}`:"fit"}const Eun=["background","padding"];function O_e(e,t){const n={};for(const r of Eun)e&&e[r]!==void 0&&(n[r]=xf(e[r]));return t&&(n.params=e.params),n}class Hy{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Hy(zn(this.explicit),zn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Io(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of xt(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function rm(e){return{explicit:!0,value:e}}function df(e){return{explicit:!1,value:e}}function oze(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:L7(t,n,r,i)}}function L7(e,t,n,r){return e.explicit&&t.explicit&&Tt(rsn(n,r,e.value,t.value)),e}function ob(e,t,n,r,i=L7){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Af(e.value,t.value)?e:i(e,t,n,r)}class Sun extends Hy{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function oT(e){return"url"in e}function D3(e){return"values"in e}function aze(e){return"name"in e&&!oT(e)&&!D3(e)&&!xv(e)}function xv(e){return e&&(uze(e)||lze(e)||$ue(e))}function uze(e){return"sequence"in e}function lze(e){return"sphere"in e}function $ue(e){return"graticule"in e}var Ms;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Ms||(Ms={}));function cze(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Yd(i.field),i}function x_(e,t=!0,n=rl){if(at(e)){const r=e.map(i=>x_(i,t,n));return t?`[${r.join(", ")}]`:r}else if(cE(e))return n(t?g_(e):Dsn(e));return t?n(Ji(e)):e}function Cun(e,t){for(const n of fu(e.component.selection??{})){const r=n.name;let i=`${r}${ub}, ${n.resolve==="global"?"true":`{unit: ${Lw(e)}}`}`;for(const s of z7)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+rln,on:[{events:{signal:n.name+ub},update:`modify(${Nt(n.name+w_)}, ${i})`}]})}return Lue(t)}function Tun(e,t){if(e.component.selection&&xt(e.component.selection).length){const n=Nt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Hb("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Lue(t)}function Aun(e,t){let n=!1;for(const r of fu(e.component.selection??{})){const i=r.name,s=Nt(i+w_);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Dze}(${s}, ${Nt(a)}${u}`})}n=!0;for(const a of z7)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Lue(t)}function Dun(e,t){const n=[...t],r=Lw(e,{escape:!1});for(const i of fu(e.component.selection??{})){const s={name:i.name+w_};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:wp}}]),i.init){const a=i.project.items.map(cze);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[wp]:x_(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:x_(u,!1)}))}n.filter(a=>a.name===i.name+w_).length||n.push(s)}return n}function fze(e,t){for(const n of fu(e.component.selection??{}))for(const r of z7)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Iun(e,t){for(const n of e.children)co(n)&&(t=fze(n,t));return t}function kun(e,t,n,r){const i=Pze(e,t.param,t);return{signal:Qf(n.get("type"))&&at(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Lue(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Wi{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Tt(Rin);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class jc extends Wi{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${aje()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function wq(e){return e.as!==void 0}function F_e(e){return`${e}_end`}class $m extends Wi{clone(){return new $m(null,zn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(fE(u)){if(co(n)){const{mark:c,markDef:f,config:d}=n,h=sb({fieldDef:s,markDef:f,config:d});(A3(c)||h)&&(l={timeUnit:La(u),field:a})}}else l={as:Pt(s,{forAs:!0}),field:a,timeUnit:u};if(co(n)){const{mark:c,markDef:f,config:d}=n,h=sb({fieldDef:s,markDef:f,config:d});A3(c)&&ko(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Mr(l)]=l)}return i},{});return Qi(r)?null:new $m(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=La(r),o={...i,timeUnit:s};return new $m(t,{[Mr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of rb(this.timeUnits)){const s=wq(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(fu(this.timeUnits).map(t=>wq(t)?t.as:F_e(t.field)))}dependentFields(){return new Set(fu(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Mr(this.timeUnits)}`}assemble(){const t=[];for(const n of fu(this.timeUnits)){const{rectBandPosition:r}=n,i=La(n.timeUnit);if(wq(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Yd(s),type:"timeunit",...a?{units:E7(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...M_e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=dze({timeUnit:i,field:o}),u=F_e(o);t.push({type:"formula",expr:a,as:u}),t.push(...M_e([o,u],r,i))}}return t}}const B7="offsetted_rect_start",j7="offsetted_rect_end";function dze({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=Vje(r),{part:o,step:a}=Gje(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function M_e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:$_e([dze({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${B7}`},{type:"formula",expr:$_e([i,s],n+.5),as:`${e}_${j7}`}]}return[]}function $_e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const CP="_tuple_fields";class Run{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Nun={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Run),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Us(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Us(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Lt(n.value):null;let{fields:d,encodings:h}=jt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(jt(p))for(const m of xt(p))Wrn(m)?(h||(h=[])).push(m):l==="interval"?(Tt(Ain),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Tt(vin(p,m.aggregate));continue}else if(!g){Tt(a_e(p));continue}if(m.timeUnit&&!fE(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Mr(y)]=y}if(!s[g]){const y=l==="interval"&&zy(p)&&Qf(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===wp,hje(p)?(v.geoChannel=p,v.channel=dje(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Tt(a_e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===wp}f&&(t.init=f.map(p=>i.items.map(m=>jt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Qi(o)||(i.timeUnit=new $m(null,o))},signals:(e,t,n)=>{const r=t.name+CP;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(cze)})}},Ug={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!zy(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Tt(_in),!s||!Qf(o)){Tt(win);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||L_e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(Dze)>=0)i.update=`{${r.map(o=>`${Nt(Yd(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Nt(Yd(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!L_e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function aQ(e,t){return`domain(${Nt(e.scaleName(t))})`}function L_e(e){return e.parent&&RA(e.parent)&&!e.parent.parent}const jS="_brush",hze="_scale_trigger",GD="geo_interval_init_tick",pze="_init",Pun="_center",Oun={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...jt(n.select)?n.select:{}};i.fields=[wp],i.encodings||(i.encodings=n.value?xt(n.value):[Mp,Fp]),n.select={type:"interval",...i}}if(t.translate&&!Ug.defined(t)){const i=`!event.item || event.item.mark.name !== ${Nt(t.name+jS)}`;for(const s of t.events){if(!s.between){Tt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Lt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+ub,s=fu(t.project.hasChannel).filter(a=>a.channel===zs||a.channel===Ha),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Fun(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Nt(e.projectionName()),u=e.projectionName()+Pun,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=w=>e.getSizeSignalRef(w).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+pze,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Nt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Lw(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,_=s.map(w=>w.signals.visual);return n.concat({name:i,on:[{events:[..._.length?[{signal:_.join(" || ")}]:[],...o?[{signal:GD}]:[]],update:b}]})}else{if(!Ug.defined(t)){const l=r+hze,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Nt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Qf(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Lw(e)}, fields: ${r+CP}, values`;return n.concat({name:i,...o?{init:`{${u}: ${x_(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(co(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===GD).length||n.unshift({name:GD,value:null,on:[{events:"timer{1}",update:`${GD} === null ? {} : ${GD}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Nt(t.name+w_)})`;if(Ug.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of xt(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${Lw(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=xt(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+jS}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+jS,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Fun(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Nt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===zs?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Ug.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:x_(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+hze},update:Qf(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:x_(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===zs?0:1,h=t.name+pze,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Mun={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+CP,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=fu(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+jS):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Lw(e)}, `;if(t.project.hasSelectionId)l+=`${wp}: ${o}[${Nt(wp)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Nt(e.vgField(d.channel,{}))}], ${o}[${Nt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Nt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+ub,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function AA(e,t,n,r){const i=k7(t)&&t.condition,s=r(t);if(i){const a=Lt(i).map(u=>{const l=r(u);if(Ton(u)){const{param:c,empty:f}=u;return{test:Nze(e,{param:c,empty:f}),...l}}else return{test:A$(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Bue(e,t="text"){const n=e.encoding[t];return AA(e,n,t,r=>U7(r,e.config))}function U7(e,t,n="datum"){if(e){if(xp(e))return _s(e.value);if(Qn(e)){const{format:r,formatType:i}=x$(e);return mue({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function mze(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(at(o))return{tooltip:B_e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return AA(e,o,"tooltip",u=>{const l=U7(u,i,a);if(l)return l;if(u===null)return;let c=Di("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Bt(c))return{value:c};if(jt(c))return rn(c)?c:c.content==="encoding"?B_e(n,s,i,t):{signal:a}})}}function gze(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=uE(f),h=ql(c)?c:{...c,type:e[d].type},p=h.title||_ue(h,i),m=Lt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ko(f)){const y=f==="x"?"x2":"y2",v=i0(e[y]);if(tu(h.bin)&&v){const b=Pt(h,{expr:o}),_=Pt(v,{expr:o}),{format:w,formatType:S}=x$(h);g=xP(b,_,w,S,i),s[y]=!0}}if((ko(f)||f===oh||f===Op)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=x$(h);g=mue({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=U7(h,i,o).signal),a.push({channel:f,key:m,value:g})}Cue(e,(c,f)=>{At(c)?u(c,f):R7(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function B_e(e,t,n,{reactiveGeom:r}={}){const i=gze(e,t,n,{reactiveGeom:r}),s=rb(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function $un(e){const{markDef:t,config:n}=e,r=Di("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Lun(e),...Bun(e)}}function Lun(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Di("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in pin?{}:{ariaRoleDescription:{value:t}}}function Bun(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return AA(e,s,"description",u=>U7(u,e.config));const o=Di("description",n,r);if(o!=null)return{description:_s(o)};if(r.aria===!1)return{};const a=gze(t,i,r);if(!Qi(a))return{description:{signal:rb(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Ra(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Di(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=_s(u)));const l=i[e];return AA(t,l,o??e,c=>pue({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function yze(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Di("filled",n,i),a=$r(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Di(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Di(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:_s(u)}:{},...l?{stroke:_s(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Tt(Oje("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Ra("color",e,{vgChannel:c,defaultValue:o?u:l}),...Ra("fill",e,{defaultValue:r.fill?u:void 0}),...Ra("stroke",e,{defaultValue:r.stroke?l:void 0})}}function jun(e){const{encoding:t,mark:n}=e,r=t.order;return!dE(n)&&xp(r)?AA(e,r,"zindex",i=>_s(i.value)):{}}function aT({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:pue({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:_s(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Gu(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[C0(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=aT({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=jue({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ko(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Uun({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Uun(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Qn(n)&&i&&t===i.fieldChannel){if(At(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return g$({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Mw(n,r,{suffix:"end"},{offset:s})}return due(e)}function jue({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=uE(n),u=ib(n),l=Di(n,s,o,{vgChannel:u});if(l!==void 0)return $k(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!$r([Bc.LOG,Bc.TIME,Bc.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Jc(n)],mult:.5}}}}const zun={left:"x",center:"xc",right:"x2"},Vun={top:"y",middle:"yc",bottom:"y2"};function vze(e,t,n,r="middle"){if(e==="radius"||e==="theta")return ib(e);const i=e==="x"?"align":"baseline",s=Di(i,t,n);let o;return rn(s)?(Tt(Win(i)),o=void 0):o=s,e==="x"?zun[o||(r==="top"?"left":"center")]:Vun[o||r]}function C$(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?bze(e,t,{defaultPos:n,defaultPos2:r}):Gu(e,t,{defaultPos:n})}function bze(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=C0(e),a=Jc(e),u=Hun(t,r,o),l=u[a]?vze(e,i,s):ib(e);return{...Gu(e,t,{defaultPos:n,vgChannel:l}),...u}}function Hun(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=uE(n),l=Jc(n),c=ib(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?aT({channel:n,markDef:s,encoding:r,model:e}):aT({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Jc(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=qun({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:r6(n,s)||r6(n,{[n]:p$(n,s,a.style),[l]:p$(l,s,a.style)})||r6(n,a[i])||r6(n,a.mark)||{[c]:jue({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function qun({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Qn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Mw(t,s,{suffix:"start"},{offset:u}):due({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function r6(e,t){const n=Jc(e),r=ib(e);if(t[r]!==void 0)return{[r]:$k(e,t[r])};if(t[e]!==void 0)return{[r]:$k(e,t[e])};if(t[n]){const i=t[n];if(b_(i))Tt(jin(n));else return{[n]:$k(e,i)}}}function ab(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=C0(t),a=Jc(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Di("size",i,n,{vgChannel:a}),p=yje(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return At(u)&&(ms(u.bin)||tu(u.bin)||u.timeUnit&&!l)&&!(h&&!b_(h))&&!r[p]&&!Ua(f)?Yun({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Qn(u)&&Ua(f)||m)&&!l?Gun(u,t,e):bze(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Wun(e,t,n,r,i,s,o){if(b_(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=my("minBandSize",{type:o},r);return{signal:c?`max(${Jh(c)}, ${l})`:l}}else i.band!==1&&(Tt(Xin(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(rn(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Qb(u)&&fi(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=Io(u,o==="bar"?l:c);if(rn(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(fi(f))return{signal:`${1-f} * ${e}`}}return{value:E$(r.view,e)-2}}function Gun(e,t,n){var k,I;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Jc(t),f=C0(t),d=yje(t),h=n.scaleName(d),p=n.getScaleComponent(Wae(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Ra("size",n,{vgChannel:c,defaultRef:_s(r.size)}):Tt(esn(r.type)));const y=!!g,v=mUe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(k=l||p)==null?void 0:k.get("type"),useVlSizeChannel:m});g=g||{[c]:Wun(c,h||u,p||l,s,v,!!e,r.type)};const b=((I=l||p)==null?void 0:I.get("type"))==="band"&&b_(v)&&!y?"top":"middle",_=vze(t,r,s,b),w=_==="xc"||_==="yc",{offset:S,offsetType:T}=aT({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),A=due({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:jue({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:w?T==="encoding"?0:.5:rn(v)?{signal:`(1-${v})/2`}:b_(v)?(1-v.band)/2:0});if(c)return{[_]:A,...g};{const R=ib(f),F=g[c],O=S?{...F,offset:S}:F;return{[_]:A,[R]:at(A)?[A[0],{...A[1],offset:O}]:{...A,offset:O}}}}function j_e(e,t,n,r,i,s,o){if(fje(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(rn(n)||rn(i)||rn(r)||s){const l=Jh(n),c=Jh(i),f=Jh(r),d=Jh(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Yun({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=mUe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(I=r.component.axes[n])==null?void 0:I[0],h=(d==null?void 0:d.get("translate"))??.5,p=ko(n)?Di("binSpacing",s,i)??0:0,m=C0(n),g=ib(n),y=ib(m),v=my("minBandSize",s,i),{offset:b}=aT({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:_}=aT({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),w=son({fieldDef:e,scaleName:u}),S=j_e(n,p,c,h,b,v,w),T=j_e(m,p,c,h,_??b,v,w),A=rn(f)?{signal:`(1-${f.signal})/2`}:b_(f)?(1-f.band)/2:.5,k=sb({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ms(e.bin)||e.timeUnit){const R=e.timeUnit&&k!==.5;return{[y]:U_e({fieldDef:e,scaleName:u,bandPosition:A,offset:T,useRectOffsetField:R}),[g]:U_e({fieldDef:e,scaleName:u,bandPosition:rn(A)?{signal:`1-${A.signal}`}:1-A,offset:S,useRectOffsetField:R})}}else if(tu(e.bin)){const R=Mw(e,u,{},{offset:T});if(At(t))return{[y]:R,[g]:Mw(t,u,{},{offset:S})};if(lE(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${Pt(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Tt($je(m))}function U_e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return g$({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:B7,endSuffix:j7}:{}})}const Kun=new Set(["aria","width","height"]);function ah(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?yze(e):{};return{...Xun(e.markDef,t),...z_e(e,"fill",n),...z_e(e,"stroke",r),...Ra("opacity",e),...Ra("fillOpacity",e),...Ra("strokeOpacity",e),...Ra("strokeWidth",e),...Ra("strokeDash",e),...jun(e),...mze(e),...Bue(e,"href"),...$un(e)}}function z_e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Di("invalid",s,r)==="hide"&&n&&!dE(i)){const a=Qun(e,{invalid:!0,channels:x7});if(a)return{[t]:[{test:a,value:null},...Lt(n)]}}return n?{[t]:n}:{}}function Xun(e,t){return hin.reduce((n,r)=>(!Kun.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=_s(e[r])),n),{})}function Qun(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Qf(u)&&(s[l]=!0)}return s},{}),i=xt(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>hue(o,t)).join(` ${s} `)}}function Uue(e){const{config:t,markDef:n}=e;if(Di("invalid",n,t)){const i=Jun(e,{channels:T0});if(i)return{defined:{signal:i}}}return{}}function Jun(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Qf(l)&&(s[c]=!0)}return s},{}),i=xt(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>hue(o,t)).join(` ${s} `)}}function V_e(e,t){if(t!==void 0)return{[e]:_s(t)}}const _q="voronoi",xze={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(_q)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(dE(s))return Tt(bin(s)),n;const o={name:e.getName(_q),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...mze(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(_q)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},wze={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Rue(e.bind),parse:(e,t,n)=>Ize(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=xze.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Us(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:x_(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Nt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+ub)[0],o=r+CP,a=i.items.map(l=>Us(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},T$="_toggle",_ze={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+T$,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ub,r=t.name+T$;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Lw(e)}}, `)+`${r} ? ${n} : null`}},Zun={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Bt(t.clear)?Hb(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(wze.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Us(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+ub);r(i,"null"),_ze.defined(t)&&(i=n.findIndex(s=>s.name===t.name+T$),r(i,"false"))}return n}},Eze={defined:e=>{const t=e.resolve==="global"&&e.bind&&Rue(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==wp;return t&&!n&&Tt(Ein),t&&n},parse:(e,t,n)=>{const r=zn(n);if(r.select=Bt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Ize(t,r),jt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Lt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=vq(t.bind)?t.bind.legend:"click",s=Bt(i)?Hb(i,"view"):Lt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=vq(t.bind)&&t.bind.legend,s=o=>a=>{const u=zn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Us(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+ub),o=r+CP,a=i.items.filter(d=>d.hasLegend).map(d=>Us(`${r}_${Us(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+T$),f=vq(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function eln(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of fu(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&Eze.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const Sze="_translate_anchor",Cze="_translate_delta",tln={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Ug.defined(t),s=r+Sze,{x:o,y:a}=t.project.hasChannel;let u=Hb(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+jS,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?aQ(e,zs):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?aQ(e,Ha):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+Cze,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&H_e(e,t,o,"width",n),a!==void 0&&H_e(e,t,a,"height",n),n}};function H_e(e,t,n,r,i){const s=t.name,o=s+Sze,a=s+Cze,u=n.channel,l=Ug.defined(t),c=i.filter(w=>w.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===zs?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?_:`clampRange(${_}, 0, ${f})`})}const Tze="_zoom_anchor",Aze="_zoom_delta",nln={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Ug.defined(t),s=r+Aze,{x:o,y:a}=t.project.hasChannel,u=Nt(e.scaleName(zs)),l=Nt(e.scaleName(Ha));let c=Hb(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+jS,f))),n.push({name:r+Tze,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&q_e(e,t,o,"width",n),a!==void 0&&q_e(e,t,a,"height",n),n}};function q_e(e,t,n,r,i){const s=t.name,o=n.channel,a=Ug.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?aQ(e,o):u.name,h=s+Aze,p=`${s}${Tze}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const w_="_store",ub="_tuple",rln="_modify",Dze="vlSelectionResolve",z7=[Mun,Oun,Nun,_ze,wze,Ug,Eze,Zun,tln,nln,xze];function iln(e){let t=e.parent;for(;t&&!Of(t);)t=t.parent;return t}function Lw(e,{escape:t}={escape:!0}){let n=t?Nt(e.name):e.name;const r=iln(e);if(r){const{facet:i}=r;for(const s of Fd)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Nt(r.vgField(s))}])`)}return n}function zue(e){return fu(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Ize(e,t){(Bt(t.select)||!t.select.on)&&delete e.events,(Bt(t.select)||!t.select.clear)&&delete e.clear,(Bt(t.select)||!t.select.toggle)&&delete e.toggle}function uQ(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...uQ(e.object)),t.push(...uQ(e.property))),t)}function kze(e){return e.object.type==="MemberExpression"?kze(e.object):e.object.name==="datum"}function Rze(e){const t=uae(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&kze(r)&&n.add(uQ(r).slice(1).join("."))}),n}class DA extends Wi{clone(){return new DA(null,this.model,zn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=A$(this.model,this.filter,this),this._dependentFields=Rze(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function sln(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Us(i.name),o=i.select,a=Bt(o)?o:o.type,u=jt(o)?zn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=zn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:Bt(u.on)?Hb(u.on,"scope"):Lt(zn(u.on))},f=zn(i);for(const d of z7)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function Nze(e,t,n,r="datum"){const i=Bt(t)?t:t.param,s=Us(i),o=Nt(s+w_);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Nt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function Pze(e,t,n){const r=Us(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Tt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Nt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Tt((a.length?"Multiple ":"No ")+`matching ${Nt(i)} encoding found for selection ${Nt(n.param)}. Using "field": ${Nt(s)}.`)):s=a[0].field}return`${o.name}[${Nt(Yd(s))}]`}function oln(e,t){for(const[n,r]of rb(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new jc(new DA(t,e,{param:n}),i,Ms.Lookup,e.component.data.outputNodeRefCounts)}}function A$(e,t,n){return Mk(t,r=>Bt(r)?r:$sn(r)?Nze(e,r,n):Kje(r))}function aln(e,t){if(e)return at(e)&&!A1(e)?e.map(n=>_ue(n,t)).join(", "):e}function Eq(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function HI(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=jon[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(SP(m)){const{condition:g,...y}=m,v=Lt(g),b=b_e[h];if(b){const{vgProp:_,part:w}=b,S=[...v.map(T=>{const{test:A,...k}=T;return{test:A$(null,A),...k}}),y];Eq(c,w,_,S),delete c[h]}else if(b===null){const _={signal:v.map(w=>{const{test:S,...T}=w;return`${A$(null,S)} ? ${r_e(T)} : `}).join("")+r_e(y)};c[h]=_}}else if(rn(m)){const g=b_e[h];if(g){const{vgProp:y,part:v}=g;Eq(c,v,y,m),delete c[h]}}$r(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Qi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Io(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&rn(c.encode.labels.update.text)&&(p=p_(a,"datum.label",c.encode.labels.update.text.signal)),Eq(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of CUe)e.hasAxisPart(p)||delete c.encode[p];Qi(c.encode)&&delete c.encode}const h=aln(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Io(l,0)}}}}function Oze(e){const{axes:t}=e.component,n=[];for(const r of T0)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function uln(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>HI(i,"grid",t)),...r.map(i=>HI(i,"grid",t)),...n.map(i=>HI(i,"main",t)),...r.map(i=>HI(i,"main",t))].filter(i=>i)}function W_e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...xt(o),...xt(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Jh(o[c])} : ${Jh(a[c])}`};return l}return t[i]})])}function lln(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Zje(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=rn(n)?"axisOrient":`axis${pP(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:W_e(a,r,e,n),vgAxisConfig:W_e(u,r,e,n),axisConfigStyle:cln([...u,...a],r)}}function cln(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Lt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function lQ(e,t,n,r={}){var s;const i=Aje(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const G_e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??fln(n,e),gridScale:({model:e,channel:t})=>dln(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Mze(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Fze(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??pln(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??mln(t.type,n,At(t)&&!!t.timeUnit,At(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??yln({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:vln,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=$ze(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return Ije(i?[y_e(i)]:[],At(o)?[y_e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>bln(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??xln(n,t)};function fln(e,t){return!Ua(e)&&At(t)&&!ms(t==null?void 0:t.bin)&&!tu(t==null?void 0:t.bin)}function dln(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function hln(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return rn(s)?s:T3(s);{const{configValue:o}=lQ("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?T3(o):n===zs&&$r([fue,cue],e.type)&&!(At(e)&&e.timeUnit)?270:void 0}}function cQ(e){return`(((${e.signal} % 360) + 360) % 360)`}function Fze(e,t,n,r){if(e!==void 0)if(n==="x"){if(rn(e)){const i=cQ(e),s=rn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(rn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(rn(e)){const i=cQ(e),s=rn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(rn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Mze(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(rn(e)){const o=cQ(e),a=rn(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(rn(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function pln(e,t){if(t==="x"&&$r(["quantitative","temporal"],e))return!0}function mln(e,t,n,r){if(n&&!jt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function gln(e){return e==="x"?"bottom":"left"}function yln({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Ua(t)&&t!=="log"){if(At(e)){if(ms(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&$r(["month","hours","day","quarter"],(i=La(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function vln({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(At(t)){const{timeUnit:n}=t;if(n){const r=Wje(n);if(r)return{signal:r}}}}function $ze(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return kje(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function bln(e,t){const n=e.values;if(at(n))return SUe(t,n);if(rn(n))return n}function xln(e,t){return e==="rect"&&b$(t)?1:0}class uT extends Wi{clone(){return new uT(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Rze(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(hE(r)&&pUe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${Kje({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new uT(t,{calculate:u,as:lT(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Mr(this.transform)}`}}function lT(e,t,n){return Pt(e,{prefix:t,suffix:"sort_index",...n})}function V7(e,t){return $r(["top","bottom"],t)?"column":$r(["left","right"],t)||e==="row"?"row":"column"}function cT(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Io((t||{})[e],i[e],n.header[e])}function H7(e,t,n,r){const i={};for(const s of e){const o=cT(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Vue=["row","column"],Hue=["header","footer"];function wln(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=H7(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=V7(t,a),l=T3(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Bze(l,u),...Lze(u,l,s),...jze(r,i,t,uan,zUe)}}}function Lze(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Mze(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Bze(e,t){const n=Fze(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function _ln(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Hue)if(n[i])for(const s of n[i]){const o=Sln(e,t,i,n,s);o!=null&&r.push(o)}return r}function Eln(e,t){const{sort:n}=e;return Mm(n)?{field:Pt(n,{expr:"datum"}),order:n.order??"ascending"}:at(n)?{field:lT(e,t,{expr:"datum"}),order:"ascending"}:{field:Pt(e,{expr:"datum"}),order:n??"ascending"}}function fQ(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=H7(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=mue({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=V7(t,a);return{text:{signal:u?p_(p_(u,"datum.label",l),"datum.value",Pt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Bze(s,c),...Lze(c,s,o),...jze(n,e,t,lan,VUe)}}function Sln(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=H7(["labelOrient"],o.header,a,t);(t==="row"&&!$r(["top","bottom"],f)||t==="column"&&!$r(["left","right"],f))&&(s=fQ(o,t,a))}const u=Of(e)&&!wP(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Eln(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Cln={column:{start:0,end:1},row:{start:1,end:0}};function Tln(e,t){return Cln[t][e]}function Aln(e,t){const n={};for(const r of Fd){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=H7(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=V7(r,o),u=Tln(s,a);u!==void 0&&(n[a]=u)}}return Qi(n)?void 0:n}function jze(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=cT(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function que(e){return[...i6(e,"width"),...i6(e,"height"),...i6(e,"childWidth"),...i6(e,"childHeight")]}function i6(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Ua(o)&&Qb(a)){const u=e.scaleName(n);return Of(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Y_e(u,a)]:[Y_e(u,a),{name:i,update:Uze(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=rQ(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Y_e(e,t){const n=`${e}_step`;return rn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Uze(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Io(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Jh(o)}, ${Jh(s)}) * ${e}_step`}function zze(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Vze(e,t){return xt(e).reduce((n,r)=>{const i=e[r];return{...n,...AA(t,i,r,s=>_s(s.value))}},{})}function Hze(e,t){if(Of(t))return e==="theta"?"independent":"shared";if(RA(t))return"shared";if(Jue(t))return ko(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Wue(e,t){const n=e.scale[t],r=ko(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Tt(ssn(t)),"independent"):e[r][t]||"shared"}const Dln={...dan,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},qze=xt(Dln);class Iln extends Hy{}const K_e={symbols:kln,gradient:Rln,labels:Nln,entries:Pln};function kln(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...gin({},n,mon),...yze(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?Wze(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Xc)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=_s(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=_s(m??1));else if(at(f.fill)){const g=dQ(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=_s(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Xc)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(at(f.stroke)){const g=Io(dQ(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Uy){const g=At(t)&&Yze(n,i,t);g?f.opacity=[{test:g,..._s(m??1)},_s(u.legend.unselectedOpacity)]:m&&(f.opacity=_s(m))}return f={...f,...e},Qi(f)?void 0:f}function Rln(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Wze(o.opacity)||s.opacity:void 0;return l&&(a.opacity=_s(l)),a={...a,...e},Qi(a)?void 0:a}function Nln(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=At(t)?Yze(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;v_(c)?f=ep({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=ep({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&At(t)&&t.timeUnit===void 0&&(f=ep({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Qi(d)?void 0:d}function Pln(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function Wze(e){return Gze(e,(t,n)=>Math.max(t,n.value))}function dQ(e){return Gze(e,(t,n)=>Io(t,n.value))}function Gze(e,t){if(Don(e))return Lt(e.condition).reduce(t,e.value);if(xp(e))return e.value}function Yze(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Nt(n.field);return r.map(s=>`(!length(data(${Nt(Us(s)+w_)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const X_e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return sUe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return oUe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??jln(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Uln(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Fln(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>BS(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(LS(n)&&Zh(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Oln(t,e)};function Oln(e,t){const n=e.values;if(at(n))return SUe(t,n);if(rn(n))return n}function Fln(e,t,n,r){if(t!=="shape"){const i=dQ(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Mln(e){const{legend:t}=e;return Io(t.type,$ln(e))}function $ln({channel:e,timeUnit:t,scaleType:n}){if(LS(e)){if($r(["quarter","month","day"],t))return"symbol";if(Zh(n))return"gradient"}return"symbol"}function Lln({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Bln(n,t)}function Bln(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function jln({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Zh(i))return n==="horizontal"?r==="top"||r==="bottom"?Q_e(t,"width",o,s):o:Q_e(t,"height",u,a)}function Q_e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Uln(e){if($r(["quantile","threshold","log","symlog"],e))return"greedy"}function Kze(e){const t=co(e)?zln(e):Wln(e);return e.component.legends=t,t}function zln(e){const{encoding:t}=e,n={};for(const r of[Xc,...qUe]){const i=fa(t[r]);!i||!e.getScaleComponent(r)||r===Qc&&At(i)&&i.type===TA||(n[r]=qln(e,r))}return n}function Vln(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Hln(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function qln(e,t){var _;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Iln({},Vln(e,t));eln(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=fa(i[t]),f=At(c)?(_=La(c.timeUnit))==null?void 0:_.unit:void 0,d=n.orient||s.legend.orient||"right",h=Mln({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Lln({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const w of qze){if(h==="gradient"&&w.startsWith("symbol")||h==="symbol"&&w.startsWith("gradient"))continue;const S=w in X_e?X_e[w](m):n[w];if(S!==void 0){const T=Hln(S,w,n,e.fieldDef(t));(T||s.legend[w]===void 0)&&a.set(w,S,T)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const w of["labels","legend","title","symbols","gradient","entries"]){const S=Vze(g[w]??{},e),T=w in K_e?K_e[w](S,b):S;T!==void 0&&!Qi(T)&&(v[w]={...y!=null&&y.length&&At(c)?{name:`${Us(c.field)}_legend_${w}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:T})}return Qi(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Wln(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Kze(r);for(const i of xt(r.component.legends))n.legend[i]=Wue(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Xze(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of xt(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Xze(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of qze){const c=ob(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Gln(f,d);case"title":return Rje(f,d);case"type":return i=!0,df("symbol")}return L7(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&h$(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&h$(e.explicit,["encode","gradient"])),e}function Gln(e,t){return t.value==="circle"?t:e}function Yln(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function Qze(e){const t=e.component.legends,n={};for(const i of xt(t)){const s=e.getScaleComponent(i),o=Ji(s.get("domains"));if(n[o])for(const a of n[o])Xze(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return fu(n).flat().map(i=>Kln(i,e.config)).filter(i=>i!==void 0)}function Kln(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of qUe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&rn(s.encode.labels.update.text)&&(l=p_(r,"datum.label",s.encode.labels.update.text.signal)),Yln(s,"labels","text",{signal:l})}return s}}function Xln(e){return RA(e)||Jue(e)?Qln(e):Jze(e)}function Qln(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Jze(e))}function Jze(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=rn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return $r(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Jln=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Zze extends Hy{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function eVe(e){e.component.projection=co(e)?Zln(e):ncn(e)}function Zln(e){if(e.hasProjection){const t=xc(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?ecn(e):void 0,s=new Zze(e.projectionName(!0),{...xc(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function ecn(e){const t=[],{encoding:n}=e;for(const r of[[Mp,Fp],[Kd,$p]])(fa(n[r[0]])||fa(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Qc)&&e.typedFieldDef(Qc).type===TA&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ms.Main)),t}function tcn(e,t){const n=Bae(Jln,i=>!!(!vn(e.explicit,i)&&!vn(t.explicit,i)||vn(e.explicit,i)&&vn(t.explicit,i)&&Af(e.get(i),t.get(i))));if(Af(e.size,t.size)){if(n)return e;if(Af(e.explicit,{}))return t;if(Af(t.explicit,{}))return e}return null}function ncn(e){if(e.children.length===0)return;let t;for(const r of e.children)eVe(r);const n=Bae(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=tcn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Zze(r,t.specifiedProjection,t.size,zn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function rcn(e,t,n,r){if(EP(t,n)){const i=co(e)?e.axis(n)??e.legend(n)??{}:{},s=Pt(t,{expr:"datum"}),o=Pt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Pt(t,{binSuffix:"range",forAs:!0}),formula:xP(s,o,i.format,i.formatType,r)}}return{}}function tVe(e,t){return`${Eje(e)}_${t}`}function icn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Gue(e,t,n){const r=N7(n,void 0)??{},i=tVe(r,t);return e.getName(`${i}_bins`)}function scn(e){return"as"in e}function J_e(e,t,n){let r,i;scn(e)?r=Bt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Pt(e,{forAs:!0}),Pt(e,{binSuffix:"end",forAs:!0})];const s={...N7(t,void 0)},o=tVe(s,e.field),{signal:a,extentSignal:u}=icn(n,o);if(w7(s.extent)){const c=s.extent;i=Pze(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Lm extends Wi{clone(){return new Lm(null,zn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ql(s)&&ms(s.bin)){const{key:a,binComponent:u}=J_e(s,s.bin,n);i[a]={...u,...i[a],...rcn(n,s,o,n.config)}}return i},{});return Qi(r)?null:new Lm(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=J_e(n,n.bin,r);return new Lm(t,{[i]:s})}merge(t,n){for(const r of xt(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=_m([...this.bins[r].as,...t.bins[r].as],Mr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(fu(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(fu(this.bins).map(t=>t.field))}hash(){return`Bin ${Mr(this.bins)}`}assemble(){return fu(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Yd(t.field),as:r,signal:t.signal,...w7(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Yd(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Pt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function ocn(e,t,n,r){var s;const i=co(r)?r.encoding[C0(t)]:void 0;if(ql(n)&&co(r)&&gUe(n,i,r.markDef,r.config)){e.add(Pt(n,{})),e.add(Pt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=sb({fieldDef:n,markDef:a,config:u});A3(o)&&l!==.5&&ko(t)&&(e.add(Pt(n,{suffix:B7})),e.add(Pt(n,{suffix:j7}))),n.bin&&EP(n,t)&&e.add(Pt(n,{binSuffix:"range"}))}else if(hje(t)){const o=dje(t);e.add(r.getName(o))}else e.add(Pt(n));return hE(n)&&Xsn((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function acn(e,t){for(const n of xt(t)){const r=t[n];for(const i of xt(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class ap extends Wi{clone(){return new ap(null,new Set(this.dimensions),zn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Pt(o,{forAs:!0})]);else{if(py(u)||Xb(u)){const c=py(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Pt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Pt(o,{forAs:!0})]);zy(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Pt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Pt({field:l,aggregate:"max"},{forAs:!0})]))}else ocn(s,a,o,n)}),s.size+xt(i).length===0)?null:new ap(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Pt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Pt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+xt(i).length===0?null:new ap(t,r,i)}merge(t){return ije(this.dimensions,t.dimensions)?(acn(this.measures,t.measures),!0):(wsn("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...xt(this.measures)])}producedFields(){const t=new Set;for(const n of xt(this.measures))for(const r of xt(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Mr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of xt(this.measures))for(const o of xt(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Yd(s));return{type:"aggregate",groupby:[...this.dimensions].map(Yd),ops:t,fields:n,as:r}}}class IA extends Wi{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Fd){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Pt(o),...ms(a)?[Pt(o,{binSuffix:"end"})]:[]],...Mm(u)?{sortField:u}:at(u)?{sortIndexField:lT(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Fd)this[n]&&(t+=` ${n.charAt(0)}:${Mr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Fd)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Fd)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of T0){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Ua(i)&&Qb(s)){const o=q7(this.childModel,n),a=Que(o);a?t[n]=a:Tt(Jae(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=D7,field:f}=u;s.push(f),o.push(c),a.push(Pt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Vue){for(const c of Hue){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[jg,Bg])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Z_e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ucn(e,t){const n=zae(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Z_e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Z_e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Tt(kin(t)),null}function lcn(e){const t={};return zF(e.filter,n=>{if(Yje(n)){let r=null;nue(n)?r=xf(n.equal):iue(n)?r=xf(n.lte):rue(n)?r=xf(n.lt):sue(n)?r=xf(n.gt):oue(n)?r=xf(n.gte):aue(n)?r=n.range[0]:uue(n)&&(r=(n.oneOf??n.in)[0]),r&&(cE(r)?t[n.field]="date":fi(r)?t[n.field]="number":Bt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function ccn(e){const t={};function n(r){sT(r)?t[r.field]="date":r.type==="quantitative"&&ain(r.aggregate)?t[r.field]="number":JC(r.field)>1?r.field in t||(t[r.field]="flatten"):hE(r)&&Mm(r.sort)&&JC(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((co(e)||Of(e))&&e.forEachFieldDef((r,i)=>{if(ql(r))n(r);else{const s=uE(i),o=e.fieldDef(s);n({...r,type:o.type})}}),co(e)){const{mark:r,markDef:i,encoding:s}=e;if(dE(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];At(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function fcn(e){const t={};if(co(e)&&e.component.selection)for(const n of xt(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&JC(i.field)>1&&(t[i.field]="flatten")}return t}class Yu extends Wi{clone(){return new Yu(null,zn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Mr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!xv(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of xt(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Tt(l_e(a,r[a],u.value)))}for(const a of xt(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Tt(l_e(a,n[a],u)))}const s=new Hy(n,r);i.copyAll(s);const o={};for(const a of xt(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return xt(o).length===0||i.parseNothing?null:new Yu(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of xt(this._parse)){const r=this._parse[n];JC(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(xt(this._parse))}dependentFields(){return new Set(xt(this._parse))}assembleTransforms(t=!1){return xt(this._parse).filter(n=>t?JC(n)>1:!0).map(n=>{const r=ucn(n,this._parse[n]);return r?{type:"formula",expr:r,as:SA(n)}:null}).filter(n=>n!==null)}}class lb extends Wi{clone(){return new lb(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([wp])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:wp}}}class TP extends Wi{clone(){return new TP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Mr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class AP extends Wi{clone(){return new AP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Mr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class __ extends Wi{constructor(t){super(null),t??(t={name:"source"});let n;if(xv(t)||(n=t.format?{...Lc(t.format,["parse"])}:{}),D3(t))this._data={values:t.values};else if(oT(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];$r(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else lze(t)?this._data={values:[{type:"Sphere"}]}:(aze(t)||xv(t))&&(this._data={});this._generator=xv(t),t.name&&(this._name=t.name),n&&!Qi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var eEe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},dcn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},qI;function Yue(e){return e instanceof __||e instanceof TP||e instanceof AP}class Kue{constructor(){qI.set(this,void 0),eEe(this,qI,!1,"f")}setModified(){eEe(this,qI,!0,"f")}get modifiedFlag(){return dcn(this,qI,"f")}}qI=new WeakMap;class pE extends Kue{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Xue extends Kue{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class hcn extends Xue{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of xt(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class pcn extends Xue{constructor(t){super(),this.requiresSelectionId=t&&zue(t)}run(t){t instanceof lb&&(this.requiresSelectionId&&(Yue(t.parent)||t.parent instanceof ap||t.parent instanceof Yu)||(this.setModified(),t.remove()))}}class mcn extends Kue{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof $m&&(r=t.producedFields(),jae(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class gcn extends Xue{constructor(){super()}run(t){t instanceof jc&&!t.isRequired()&&(this.setModified(),t.remove())}}class ycn extends pE{run(t){if(!Yue(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Yu)if(t instanceof Yu)this.setModified(),t.merge(n);else{if(Uae(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class vcn extends pE{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Yu);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of xt(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Qi(i)){this.setModified();const o=new Yu(t,i);for(const a of n){if(a instanceof Yu)for(const u of xt(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Yu&&xt(a.parse).length===0&&a.remove()}}}}}class bcn extends pE{run(t){t instanceof jc||t.numChildren()>0||t instanceof IA||t instanceof __||(this.setModified(),t.remove())}}class xcn extends pE{run(t){const n=t.children.filter(i=>i instanceof $m),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class wcn extends pE{run(t){const n=t.children.filter(i=>i instanceof ap),r={};for(const i of n){const s=Mr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of xt(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class _cn extends pE{constructor(t){super(),this.model=t}run(t){const n=!(Yue(t)||t instanceof DA||t instanceof Yu||t instanceof lb),r=[],i=[];for(const s of t.children)s instanceof Lm&&(n&&!Uae(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Lm?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Ecn extends pE{run(t){const n=[...t.children];if(!h_(n,o=>o instanceof jc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof jc){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof jc)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class mE extends Wi{clone(){return new mE(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=_m(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Pt(t)}hash(){return`JoinAggregateTransform ${Mr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Scn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Pt(r);return i&&t.push(i),t},[])}function Ccn(e){return at(e)&&e.every(t=>Bt(t))&&e.length>1}class zg extends Wi{clone(){return new zg(null,zn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Io(f.order,"ascending"));const l={field:a,order:u};let c;return Ccn(s)?c=s:Bt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new zg(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return i0(p)}).filter(h=>!!h),c=Scn(n),f=n.encoding.order;let d;if(at(f)||At(f))d=Dje(f);else{const h=yUe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new zg(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Mr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Pt(i,{binSuffix:"mid"})]:[Pt(i,{}),Pt(i,{binSuffix:"end"})]:[Pt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Pt(c,{expr:"datum"}),p=Pt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Pt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Pt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class kA extends Wi{clone(){return new kA(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=_m(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Pt(t)}hash(){return`WindowTransform ${Mr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Xae(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Tcn(e){function t(n){if(!(n instanceof IA)){const r=n.clone();if(r instanceof jc){const i=pQ+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof ap||r instanceof zg||r instanceof kA||r instanceof mE)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function hQ(e){if(e instanceof IA)if(e.numChildren()===1&&!(e.children[0]instanceof jc)){const t=e.children[0];(t instanceof ap||t instanceof zg||t instanceof kA||t instanceof mE)&&t.addDimensions(e.fields),t.swapWithParent(),hQ(e)}else{const t=e.model.component.data.main;nVe(t);const n=Tcn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(hQ)}function nVe(e){if(e instanceof jc&&e.type===Ms.Main&&e.numChildren()===1){const t=e.children[0];t instanceof IA||(t.swapWithParent(),nVe(e))}}const pQ="scale_",s6=5;function mQ(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!mQ(t.children))return!1}return!0}function wh(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function tEe(e,t,n){let r=e.sources,i=!1;return i=wh(new gcn,r)||i,i=wh(new pcn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=wh(new bcn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=wh(new ycn,r)||i,i=wh(new _cn(t),r)||i,i=wh(new mcn,r)||i,i=wh(new vcn,r)||i,i=wh(new wcn,r)||i,i=wh(new xcn,r)||i,i=wh(new hcn,r)||i,i=wh(new Ecn,r)||i),e.sources=r,i}function Acn(e,t){mQ(e.sources);let n=0,r=0;for(let i=0;i<s6&&tEe(e,t,!0);i++)n++;e.sources.map(hQ);for(let i=0;i<s6&&tEe(e,t,!1);i++)r++;mQ(e.sources),Math.max(n,r)===s6&&Tt(`Maximum optimization runs(${s6}) reached.`)}class Ia{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ia(()=>t(n))}}function rVe(e){co(e)?Dcn(e):Icn(e)}function Dcn(e){const t=e.component.scales;for(const n of xt(t)){const r=Rcn(e,n);if(t[n].setWithExplicit("domains",r),Pcn(e,n),e.component.data.isFaceted){let s=e;for(;!Of(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Ag(a)&&(a.data=pQ+a.data.replace(pQ,""))}}}function Icn(e){for(const n of e.children)rVe(n);const t=e.component.scales;for(const n of xt(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=ob(r,o.getWithExplicit("domains"),"domains","scale",gQ);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Tt(Tin),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function kcn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=nEe(t,n);if(!i){Tt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=nEe(t,n);if(i)return"unaggregated"}return e}function Rcn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=kcn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&fa(r.x2)?fa(r.x)?ob(g1(n,i,e,"x"),g1(n,i,e,"x2"),"domain","scale",gQ):g1(n,i,e,"x2"):t==="y"&&fa(r.y2)?fa(r.y)?ob(g1(n,i,e,"y"),g1(n,i,e,"y2"),"domain","scale",gQ):g1(n,i,e,"y2"):g1(n,i,e,t)}function Ncn(e,t,n){return e.map(r=>({signal:`{data: ${P7(r,{timeUnit:n,type:t})}}`}))}function Sq(e,t,n){var i;const r=(i=La(n))==null?void 0:i.unit;return t==="temporal"||r?Ncn(e,t,r):[e]}function g1(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=fa(i[r]),{type:c}=l,f=l.timeUnit;if(Ksn(t)){const p=g1(e,void 0,n,r),m=Sq(t.unionWith,c,f);return rm([...m,...p.value])}else{if(rn(t))return rm([t]);if(t&&t!=="unaggregated"&&!tUe(t))return rm(Sq(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return df([[0,1]]);const p=n.requestDataName(Ms.Main);return df([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=zy(r)&&At(l)?Ocn(n,r,e):void 0;if(A0(l)){const p=Sq([l.datum],c,f);return df(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Ms.Main),{field:m}=l;return df([{data:p,field:Pt({field:m,aggregate:"min"})},{data:p,field:Pt({field:m,aggregate:"max"})}])}else if(ms(h.bin)){if(Ua(e))return df(e==="bin-ordinal"?[]:[{data:C3(d)?n.requestDataName(Ms.Main):n.requestDataName(Ms.Raw),field:n.vgField(r,EP(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!jt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ms(p)){const m=Gue(n,h.field,p);return df([new Ia(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return df([{data:n.requestDataName(Ms.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&$r(["time","utc"],e)){const p=i[C0(r)];if(gUe(h,p,s,a)){const m=n.requestDataName(Ms.Main),g=sb({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=A3(o)&&g!==.5&&ko(r);return df([{data:m,field:n.vgField(r,y?{suffix:B7}:{})},{data:m,field:n.vgField(r,{suffix:y?j7:"end"})}])}}return df(d?[{data:C3(d)?n.requestDataName(Ms.Main):n.requestDataName(Ms.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Ms.Main),field:n.vgField(r)}])}function Cq(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":D7),...r?{field:Yd(r)}:{},...i?{order:i}:{}}}function Pcn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=tUe(r)&&r,o=lE(i)&&w7(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Ocn(e,t,n){if(!Ua(n))return;const r=e.fieldDef(t),i=r.sort;if(pUe(i))return{op:"min",field:lT(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Mm(i)){const a=s&&!o.has(i.field);return Cq(i,a)}else if(hUe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(py(c)||Xb(c))return Cq({field:Pt(l),order:u},d);if(Xae(c)||!c)return Cq({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if($r(["ascending",void 0],i))return!0}}function nEe(e,t){const{aggregate:n,type:r}=e;return n?Bt(n)&&!lin.has(n)?{valid:!1,reason:Jin(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Zin(e)}:{valid:!0}:{valid:!1,reason:Qin(e)}}function gQ(e,t,n,r){return e.explicit&&t.explicit&&Tt(isn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Fcn(e){const t=_m(e.map(o=>{if(Ag(o)){const{sort:a,...u}=o;return u}return o}),Mr),n=_m(e.map(o=>{if(Ag(o)){const a=o.sort;return a!==void 0&&!C3(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Mr);if(t.length===0)return;if(t.length===1){const o=e[0];if(Ag(o)&&n.length>0){let a=n[0];if(n.length>1){Tt(f_e);const u=n.filter(l=>jt(l)&&"op"in l&&l.op!=="min");n.every(l=>jt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(jt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=_m(n.map(o=>C3(o)||!("op"in o)||Bt(o.op)&&o.op in sin?o:(Tt(osn(o)),!0)),Mr);let i;r.length===1?i=r[0]:r.length>1&&(Tt(f_e),i=!0);const s=_m(e.map(o=>Ag(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Que(e){if(Ag(e)&&Bt(e.field))return e.field;if(cin(e)){let t;for(const n of e.fields)if(Ag(n)&&Bt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Tt(asn),t}return Tt(usn),t}else if(fin(e)){Tt(lsn);const t=e.fields[0];return Bt(t)?t:void 0}}function q7(e,t){const r=e.component.scales[t].get("domains").map(i=>(Ag(i)&&(i.data=e.lookupDataSource(i.data)),i));return Fcn(r)}function iVe(e){return RA(e)||Jue(e)?e.children.reduce((t,n)=>t.concat(iVe(n)),rEe(e)):rEe(e)}function rEe(e){return xt(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Mcn(i.range,s,n,e),h=q7(e,n),p=a?kun(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Mcn(e,t,n,r){if(ko(n)){if(Qb(e))return{step:{signal:`${t}_step`}}}else if(jt(e)&&Ag(e))return{...e,data:r.lookupDataSource(e.data)};return e}class sVe extends Hy{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:h_(this.get("domains"),t=>at(t)&&t.length===2&&fi(t[0])&&t[0]<=0&&fi(t[1])&&t[1]>=0)}}const $cn=["range","scheme"];function Lcn(e){const t=e.component.scales;for(const n of x7){const r=t[n];if(!r)continue;const i=Bcn(n,e);r.setWithExplicit("range",i)}}function iEe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Jc(t),o=e.getName(s);if(jt(r)&&r.binned&&r.step!==void 0)return new Ia(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ms(r)){const a=Gue(e,i,r);return new Ia(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Bcn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of $cn)if(n[f]!==void 0){const d=eQ(s,f),h=nUe(e,f);if(!d)Tt(Fje(s,f,e));else if(h)Tt(h);else switch(f){case"range":{const p=n.range;if(at(p)){if(ko(e))return rm(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Ia.fromName(y,g)}return m}))}else if(jt(p))return rm({data:t.requestDataName(Ms.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return rm(p)}case"scheme":return rm(jcn(n[f]))}}const o=e===zs||e==="xOffset"?"width":"height",a=r[o];if(s0(a)){if(ko(e))if(Ua(s)){const f=aVe(a,t,e);if(f)return rm({step:f})}else Tt(Mje(o));else if(yP(e)){const f=e===qb?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=uVe(a,s);if(p)return rm(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Ucn(e,t);return(u!==void 0||l!==void 0)&&eQ(s,"rangeMin")&&at(c)&&c.length===2?rm([u??c[0],l??c[1]]):df(c)}function jcn(e){return Ysn(e)?{scheme:e.name,...Lc(e,["name"])}:{scheme:e}}function oVe(e,t,n,{center:r}={}){const i=Jc(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Ha&&Qf(n)?r?[Ia.fromName(a=>`${o(a)}/2`,s),Ia.fromName(a=>`-${o(a)}/2`,s)]:[Ia.fromName(o,s),0]:r?[Ia.fromName(a=>`-${o(a)}/2`,s),Ia.fromName(a=>`${o(a)}/2`,s)]:[0,Ia.fromName(o,s)]}function Ucn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=fa(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case zs:case Ha:{if($r(["point","band"],u)){const f=lVe(e,n,r.view);if(s0(f))return{step:aVe(f,t,e)}}return oVe(e,t,u)}case qb:case CA:return zcn(e,t,u);case jy:{const f=t.component.scales[e].get("zero"),d=cVe(i,f,r),h=qcn(i,n,t,r);return nT(u)?Hcn(d,h,Vcn(u,r,l,e)):[d,h]}case oh:return[0,Math.PI*2];case aE:return[0,360];case Op:return[0,new Ia(()=>{const f=t.getSignalName(Of(t.parent)?"child_width":"width"),d=t.getSignalName(Of(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Yb:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Kb:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Qc:return"symbol";case Xc:case E0:case S0:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Uy:case Wb:case Gb:return[r.scale.minOpacity,r.scale.maxOpacity]}}function aVe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Wae(n),o=r[s];if(GUe({step:e,offsetIsDiscrete:Qn(o)&&Xje(o.type)})==="offset"&&DUe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${min(f)})`}}else return e.step}function uVe(e,t){if(GUe({step:e,offsetIsDiscrete:Ua(t)})==="offset")return{step:e.step}}function zcn(e,t,n){const r=e===qb?"x":"y",i=t.getScaleComponent(r);if(!i)return oVe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=lVe(r,t.size,t.config.view);if(s0(l)){const c=uVe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(At(l)&&l.timeUnit){const c=Wje(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=sb({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=rn(f)?`${f.signal}/2`+h:`${f/2+d}`,m=rn(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return nje(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function lVe(e,t,n){const r=e===zs?"width":"height",i=t[r];return i||S$(n,r)}function Vcn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&at(n)?n.length+1:(Tt(vsn(r)),3)}}function Hcn(e,t,n){const r=()=>{const i=Jh(t),s=Jh(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return rn(t)?new Ia(r):{signal:r()}}function cVe(e,t,n){if(t)return rn(t)?{signal:`${t.signal} ? 0 : ${cVe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(_7("size",e))}const sEe=.95;function qcn(e,t,n,r){const i={x:iEe(n,"x"),y:iEe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=oEe(t,i,r.view);return fi(s)?s-1:new Ia(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=oEe(t,i,r.view);return fi(s)?Math.pow(sEe*s,2):new Ia(()=>`pow(${sEe} * ${s.signal}, 2)`)}}throw new Error(_7("size",e))}function oEe(e,t,n){const r=s0(e.width)?e.width.step:E$(n,"width"),i=s0(e.height)?e.height.step:E$(n,"height");return t.x||t.y?new Ia(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function fVe(e,t){co(e)?Wcn(e,t):hVe(e,t)}function Wcn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of xt(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=fa(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=eQ(h,t),y=nUe(a,t);if(d!==void 0&&(g?y&&Tt(y):Tt(Fje(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":cE(u[t])||b==="temporal"||v?l.set(t,{signal:P7(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in aEe?aEe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:IUe(i,a),hasSecondaryRangeChannel:!!i[C0(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const aEe={bins:({model:e,fieldOrDatumDef:t})=>At(t)?Gcn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Ycn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Kcn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Xcn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Qcn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Jcn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=At(e)?e.sort:void 0;return Zcn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>efn(e,t,n,r,i,s.scale,o)};function dVe(e){co(e)?Lcn(e):hVe(e,"range")}function hVe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?dVe(r):fVe(r,t);for(const r of xt(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=ob(i,a,t,"scale",oze((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Gcn(e,t){const n=t.bin;if(ms(n)){const r=Gue(e,t.field,n);return new Ia(()=>e.getSignalName(r))}else if(tu(n)&&lE(n)&&n.step!==void 0)return{step:n.step}}function Ycn(e,t){if($r([Xc,E0,S0],e)&&t!=="nominal")return"hcl"}function Kcn(e,t,n,r,i,s){var o;if(!((o=i0(s))!=null&&o.bin||at(n)||i!=null||r!=null||$r([Bc.TIME,Bc.UTC],e)))return ko(t)?!0:void 0}function Xcn(e,t,n,r,i,s){if(ko(e)){if(Zh(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(At(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Bc.POINT)return n.pointPadding}}function Qcn(e,t,n,r,i,s=!1){if(e===void 0){if(ko(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:Io(o,n==="bar"?a:u)}else if(yP(t)&&r===Bc.BAND)return i.offsetBandPaddingInner}}function Jcn(e,t,n,r,i,s=!1){if(e===void 0){if(ko(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Bc.BAND)return Io(o,rn(r)?{signal:`${r.signal}/2`}:r/2)}else if(yP(t)){if(n===Bc.POINT)return .5;if(n===Bc.BAND)return i.offsetBandPaddingOuter}}}function Zcn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Qf(e)&&t==="descending"?rn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Qf(e)&&t==="descending")return!0}function efn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Qf(i)){if(at(n)){const u=n[0],l=n[n.length-1];if(fi(u)&&u<=0&&fi(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!nT(i))return!0;if(!(At(t)&&t.bin)&&$r([...T0,...Qrn],e)){const{orient:u,type:l}=r;return $r(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:$r(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function tfn(e,t,n,r,i=!1){const s=nfn(t,n,r,i),{type:o}=e;return zy(t)?o!==void 0?ton(t,o)?At(n)&&!eon(o,n.type)?(Tt(nsn(o,s)),s):o:(Tt(tsn(t,o,s)),s):s:null}function nfn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(LS(e)||gq(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Tt(yq(e,"ordinal")),"ordinal";if(ko(e)||yP(e)){if($r(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Kae)return"band";const s=n[Jc(e)];return b_(s)||iT(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return LS(e)?"time":gq(e)==="discrete"?(Tt(yq(e,"temporal")),"ordinal"):At(t)&&t.timeUnit&&La(t.timeUnit).utc?"utc":"time";case"quantitative":return LS(e)?At(t)&&ms(t.bin)?"bin-ordinal":"linear":gq(e)==="discrete"?(Tt(yq(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(Pje(t.type))}function rfn(e,{ignoreRange:t}={}){pVe(e),rVe(e);for(const n of Zsn)fVe(e,n);t||dVe(e)}function pVe(e){co(e)?e.component.scales=ifn(e):e.component.scales=ofn(e)}function ifn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of x7){const o=fa(t[s]);if(o&&n===cUe&&s===Qc&&o.type===TA)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=IUe(t,s),l=tfn(a,s,o,r,u);i[s]=new sVe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const sfn=oze((e,t)=>h_e(e)-h_e(t));function ofn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){pVe(s);for(const o of xt(s.component.scales))if((t=i.scale)[o]??(t[o]=Hze(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?Vsn(a.value,u.value)?r[o]=ob(a,u,"type","scale",sfn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of xt(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new sVe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class Tq{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function co(e){return(e==null?void 0:e.type)==="unit"}function Of(e){return(e==null?void 0:e.type)==="facet"}function Jue(e){return(e==null?void 0:e.type)==="concat"}function RA(e){return(e==null?void 0:e.type)==="layer"}class Zue{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=xc(a),this.name=t.name??i,this.title=A1(t.title)?{text:t.title}:t.title?xc(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Tq,this.projectionNameMap=r?r.projectionNameMap:new Tq,this.signalNameMap=r?r.signalNameMap:new Tq,this.data=t.data,this.description=t.description,this.transforms=hun(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:yan(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:I7(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Hy,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?zn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){rfn(this)}parseProjection(){eVe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Kze(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of xt(r)){const o=r[s];o!==void 0&&(i[s]=_s(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=_s(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Qi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Aln(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Fd)t[r].title&&n.push(wln(this,r));for(const r of Vue)n=n.concat(_ln(this,r));return n}assembleAxes(){return uln(this.component.axes,this.config)}assembleLegends(){return Qze(this)}assembleProjections(){return Xln(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...Sje(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return $r(["unit","layer"],this.type)?$r(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Qi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Of(this.parent)?iVe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Us((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ms[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Of(this.parent)){const n=zze(t),r=b7(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Ua(s)&&Qb(o)){const a=i.get("name"),u=q7(this,r),l=Que(u);if(l){const c=Pt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:Uze(a,i,c)}}else return Tt(Jae(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(mje(t)&&zy(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(xin(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class mVe extends Zue{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Pt(r,n)}reduceFieldDef(t,n){return Won(this.getMapping(),(r,i,s)=>{const o=i0(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Cue(this.getMapping(),(r,i)=>{const s=i0(r);s&&t(s,i)},n)}}class W7 extends Wi{clone(){return new W7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Mr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class G7 extends Wi{clone(){return new G7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Mr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class I3 extends Wi{clone(){return new I3(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Di("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=zy(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Qf(d)&&l.aggregate!=="count"&&!dE(i)&&(u[l.field]=l)}return u},{});return xt(a).length?new I3(t,a):null}dependentFields(){return new Set(xt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Mr(this.filter)}`}assemble(){const t=xt(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Pt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class Y7 extends Wi{clone(){return new Y7(this.parent,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Mr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class K7 extends Wi{clone(){return new K7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Mr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class US extends Wi{clone(){return new US(null,zn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Mp,Fp],[Kd,$p]]){const s=i.map(o=>{const a=fa(n.encoding[o]);return At(a)?a.field:A0(a)?{expr:`${a.datum}`}:xp(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new US(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Qc)){const i=n.typedFieldDef(Qc);i.type===TA&&(t=new US(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Bt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Mr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class k3 extends Wi{clone(){return new k3(null,this.projection,zn(this.fields),zn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Mp,Fp],[Kd,$p]]){const i=r.map(o=>{const a=fa(n.encoding[o]);return At(a)?a.field:A0(a)?{expr:`${a.datum}`}:xp(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Kd?"2":"";(i[0]||i[1])&&(t=new k3(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Bt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Mr(this.fields)} ${Mr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Bw extends Wi{clone(){return new Bw(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Bw(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(At(i)&&At(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=RUe(n.mark,r);return new Bw(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Mr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Yan(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class X7 extends Wi{clone(){return new X7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Mr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class R3 extends Wi{clone(){return new R3(null,zn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Kan(o)){let u=vVe(o.data,s);u||(u=new __(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new jc(u,l,Ms.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Xan(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Us(u),u)}catch{throw new Error(Sin(u))}if(a=l.materialized,!a)throw new Error(Cin(u))}return new R3(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Lt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Mr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Lt(this.transform.as)}:{}};else{let n=this.transform.as;Bt(n)||(Tt(Pin),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Q7 extends Wi{clone(){return new Q7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Mr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class J7 extends Wi{clone(){return new J7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Mr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class Z7 extends Wi{clone(){return new Z7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=_m((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Mr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class ej extends Wi{clone(){return new ej(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Mr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function gVe(e){let t=0;function n(r,i){if(r instanceof __&&!r.isGenerator&&!oT(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Yu&&(r.parent instanceof __&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof IA){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof TP||r instanceof AP||r instanceof I3||r instanceof DA||r instanceof uT||r instanceof k3||r instanceof ap||r instanceof R3||r instanceof kA||r instanceof mE||r instanceof K7||r instanceof Y7||r instanceof W7||r instanceof X7||r instanceof Q7||r instanceof J7||r instanceof lb||r instanceof ej||r instanceof Z7||r instanceof G7)&&i.transform.push(r.assemble()),(r instanceof Lm||r instanceof $m||r instanceof Bw||r instanceof zg||r instanceof US)&&i.transform.push(...r.assemble()),r instanceof jc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof jc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof jc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function afn(e){const t=[],n=gVe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function ufn(e,t){const n=[],r=gVe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function lfn(e){return e==="top"||e==="left"||rn(e)?"header":"footer"}function cfn(e){for(const t of Fd)ffn(e,t);uEe(e,"x"),uEe(e,"y")}function ffn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=cT("title",null,r,t);let l=BS(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=at(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=cT("labelOrient",a.header,r,t),f=a.header!==null?Io((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=$r(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[yVe(e,t,f)]}}}function yVe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function uEe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Wue(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=lfn(a.get("orient"));o[u]??(o[u]=[yVe(e,s,!1)]);const l=HI(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function dfn(e){ele(e),D$(e,"width"),D$(e,"height")}function hfn(e){ele(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";D$(e,t),D$(e,n)}function ele(e){for(const t of e.children)t.parseLayoutSize()}function D$(e,t){const n=zze(t),r=b7(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??Hze(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=ob(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function pfn(e){const{size:t,component:n}=e;for(const r of T0){const i=Jc(r);if(t[i]){const s=t[i];n.layoutSize.set(i,s0(s)?"step":s,!0)}else{const s=mfn(e,i);n.layoutSize.set(i,s,!1)}}}function mfn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Ua(s)){const a=S$(r.view,t);return Qb(o)||s0(a)?"step":a}else return rQ(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return rQ(r.view,t);{const s=S$(r.view,t);return s0(s)?s.step:s}}}function yQ(e,t,n){return Pt(t,{suffix:`by_${Pt(e)}`,...n})}class Lk extends mVe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=sle(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!wP(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=xt(t),r={};for(const i of n){if(![Bg,jg].includes(i)){Tt(_7(i,"facet"));break}const s=t[i];if(s.field===void 0){Tt(JX(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Eue(t,n);return r.header?r.header=xc(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=tj(this),this.child.parseData()}parseLayoutSize(){ele(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),cfn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Fd)for(const r of Hue){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=cT("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=V7(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Lk))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Lk?{...this.channelHasField("column")?{encode:{update:{columns:{field:Pt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Lk){if(this.child.channelHasField("column")){const i=Pt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of T0){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Ua(o)&&Qb(a)){const u=q7(this.child,i),l=Que(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Tt(Jae(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Fd){const f=this.facet[c];if(f){u.push(Pt(f));const{bin:d,sort:h}=f;if(ms(d)&&u.push(Pt(f,{binSuffix:"end"})),Mm(h)){const{field:p,op:m=D7}=h,g=yQ(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(at(h)){const p=lT(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Mm(r.sort)?[yQ(r,r.sort,{expr:"datum"})]:at(r.sort)?[lT(r,t,{expr:"datum"})]:[Pt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Mm(i)?i.order:!at(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return fQ(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Vue)if(t[s]){const o=cT("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return fQ(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=afn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Fd.map(u=>this.facetSortFields(u)).flat(),order:Fd.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Tun(this,[]))}]}getMapping(){return this.facet}}function gfn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Mm(s.sort)){const{field:o,op:a=D7}=s.sort;e=i=new mE(e,{joinaggregate:[{op:a,field:o,as:yQ(s,s.sort,{forAs:!0})}],groupby:[Pt(s)]})}return i}return null}function vVe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(D3(e)&&D3(a)){if(Af(e.values,a.values))return o}else if(oT(e)&&oT(a)){if(e.url===a.url)return o}else if(aze(e)&&e.name===o.dataName)return o}}return null}function yfn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new __({values:[]});return t.push(r),r}const n=vVe(e.data,t);if(n)return xv(e.data)||(n.data.format=rje({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new __(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function vfn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(oun(i))o=e=new uT(e,i),s="derived";else if(Mue(i)){const a=lcn(i);o=e=Yu.makeWithAncestors(e,{},a,n)??e,e=new DA(e,t,i.filter)}else if(nze(i))o=e=Lm.makeFromTransform(e,i,t),s="number";else if(uun(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Yu(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=$m.makeFromTransform(e,i);else if(lun(i))o=e=ap.makeFromTransform(e,i),s="number",zue(t)&&(e=new lb(e));else if(tze(i))o=e=R3.make(e,t,i,r++),s="derived";else if(run(i))o=e=new kA(e,i),s="number";else if(iun(i))o=e=new mE(e,i),s="number";else if(cun(i))o=e=zg.makeFromTransform(e,i),s="derived";else if(fun(i))o=e=new K7(e,i),s="derived";else if(dun(i))o=e=new G7(e,i),s="derived";else if(sun(i))o=e=new Y7(e,i),s="derived";else if(Qan(i))o=e=new Z7(e,i),s="derived";else if(nun(i))e=new ej(e,i);else if(aun(i))o=e=Bw.makeFromTransform(e,i),s="derived";else if(Jan(i))o=e=new W7(e,i),s="derived";else if(Zan(i))o=e=new Q7(e,i),s="derived";else if(eun(i))o=e=new J7(e,i),s="derived";else if(tun(i))o=e=new X7(e,i),s="derived";else{Tt(Nin(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function tj(e){var h;let t=yfn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(xv(i)||oT(i)||D3(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Sun;xv(i)?(uze(i)?t=new AP(t,i.sequence):$ue(i)&&(t=new TP(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=Yu.makeExplicit(t,e,o)??t,t=new lb(t);const a=e.parent&&RA(e.parent);(co(e)||Of(e))&&a&&(t=Lm.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=vfn(t,e,o));const u=fcn(e),l=ccn(e);t=Yu.makeWithAncestors(t,{},{...u,...l},o)??t,co(e)&&(t=US.parseAll(t,e),t=k3.parseAll(t,e)),(co(e)||Of(e))&&(a||(t=Lm.makeFromEncoding(t,e)??t),t=$m.makeFromEncoding(t,e)??t,t=uT.parseAllForSortIndex(t,e));const c=t=lEe(Ms.Raw,e,t);if(co(e)){const p=ap.makeFromEncoding(t,e);p&&(t=p,zue(e)&&(t=new lb(t))),t=Bw.makeFromEncoding(t,e)??t,t=zg.makeFromEncoding(t,e)??t}co(e)&&(t=I3.make(t,e)??t);const f=t=lEe(Ms.Main,e,t);co(e)&&oln(e,f);let d=null;if(Of(e)){const p=e.getName("facet");t=gfn(t,e.facet)??t,d=new IA(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function lEe(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new jc(n,s,e,i);return r[s]=o,o}class bfn extends Zue{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Tt(Iin),this.children=this.getChildren(t).map((l,c)=>sle(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=tj(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of xt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return M7(t)?t.vconcat:Oue(t)?t.hconcat:t.concat}parseLayoutSize(){hfn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=que(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function xfn(e){return e===!1||e===null}const wfn={disable:1,gridScale:1,scale:1,...TUe,labelExpr:1,encode:1},bVe=xt(wfn);class tle extends Hy{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new tle(zn(this.explicit),zn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!xfn(this.get(t))}hasOrientSignalRef(){return rn(this.explicit.orient)}}function _fn(e,t,n){const{encoding:r,config:i}=e,s=fa(r[t])??fa(r[C0(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(v_(u))return{text:ep({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(rT(s)==="quantitative"){if(iT(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:ep({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:ep({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(rT(s)==="temporal"&&i.timeFormatType&&At(s)&&!s.timeUnit)return{text:ep({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Efn(e){return T0.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[kfn(n,e)]),t),{})}const Sfn={bottom:"top",top:"bottom",left:"right",right:"left"};function Cfn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of xt(i.component.axes))n.axis[s]=Wue(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Tfn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of T0){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!rn(a)){if(r[a]>0&&!u){const l=Sfn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Tfn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Afn(i,s)}}}else return t.map(n=>n.clone());return e}function Afn(e,t){for(const n of bVe){const r=ob(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return Rje(i,s);case"gridScale":return{explicit:i.explicit,value:Io(i.value,s.value)}}return L7(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Dfn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(rn(n.labelAngle)?n.labelAngle:T3(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===$ze(r,i))return!0}return e===n[t]}const Ifn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function kfn(e,t){var y,v;let n=t.axis(e);const r=new tle,i=fa(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||gln(e),u=t.getScaleComponent(e).get("type"),l=lln(e,u,a,t.config),c=n!==void 0?!n:lQ("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=hln(i,n,e,o.style,l),d=oUe(n.formatType,i,u),h=sUe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of bVe){const _=b in G_e?G_e[b](p):x_e(b)?n[b]:void 0,w=_!==void 0,S=Dfn(_,b,n,t,e);if(w&&S)r.set(b,_,S);else{const{configValue:T=void 0,configFrom:A=void 0}=x_e(b)&&b!=="values"?lQ(b,o.style,n.style,l):{},k=T!==void 0;w&&!k?r.set(b,_,S):(A!=="vgAxisConfig"||Ifn.has(b)&&k||SP(T)||rn(T))&&r.set(b,T,!1)}}const m=n.encoding??{},g=CUe.reduce((b,_)=>{if(!r.hasAxisPart(_))return b;const w=Vze(m[_]??{},t),S=_==="labels"?_fn(t,e,w):w;return S!==void 0&&!Qi(S)&&(b[_]={update:S}),b},{});return Qi(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Rfn({encoding:e,size:t}){for(const n of T0){const r=Jc(n);s0(t[r])&&J1(e[n])&&(delete t[r],Tt(Mje(r)))}return t}const Nfn={vgMark:"arc",encodeEntry:e=>({...ah(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Gu("x",e,{defaultPos:"mid"}),...Gu("y",e,{defaultPos:"mid"}),...ab(e,"radius"),...ab(e,"theta")})},Pfn={vgMark:"area",encodeEntry:e=>({...ah(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...C$("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...C$("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Uue(e)})},Ofn={vgMark:"rect",encodeEntry:e=>({...ah(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ab(e,"x"),...ab(e,"y")})},Ffn={vgMark:"shape",encodeEntry:e=>({...ah(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&At(n)&&n.type===TA?{field:Pt(n,{expr:"datum"})}:{}}]}},Mfn={vgMark:"image",encodeEntry:e=>({...ah(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...ab(e,"x"),...ab(e,"y"),...Bue(e,"url")})},$fn={vgMark:"line",encodeEntry:e=>({...ah(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Gu("x",e,{defaultPos:"mid"}),...Gu("y",e,{defaultPos:"mid"}),...Ra("size",e,{vgChannel:"strokeWidth"}),...Uue(e)})},Lfn={vgMark:"trail",encodeEntry:e=>({...ah(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Gu("x",e,{defaultPos:"mid"}),...Gu("y",e,{defaultPos:"mid"}),...Ra("size",e),...Uue(e)})};function nle(e,t){const{config:n}=e;return{...ah(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Gu("x",e,{defaultPos:"mid"}),...Gu("y",e,{defaultPos:"mid"}),...Ra("size",e),...Ra("angle",e),...Bfn(e,n,t)}}function Bfn(e,t,n){return n?{shape:{value:n}}:Ra("shape",e)}const jfn={vgMark:"symbol",encodeEntry:e=>nle(e)},Ufn={vgMark:"symbol",encodeEntry:e=>nle(e,"circle")},zfn={vgMark:"symbol",encodeEntry:e=>nle(e,"square")},Vfn={vgMark:"rect",encodeEntry:e=>({...ah(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ab(e,"x"),...ab(e,"y")})},Hfn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...ah(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...C$("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...C$("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ra("size",e,{vgChannel:"strokeWidth"})}}},qfn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...ah(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Gu("x",e,{defaultPos:"mid"}),...Gu("y",e,{defaultPos:"mid"}),...Bue(e),...Ra("size",e,{vgChannel:"fontSize"}),...Ra("angle",e),...V_e("align",Wfn(e.markDef,n,t)),...V_e("baseline",Gfn(e.markDef,n,t)),...Gu("radius",e,{defaultPos:null}),...Gu("theta",e,{defaultPos:null})}}};function Wfn(e,t,n){if(Di("align",e,n)===void 0)return"center"}function Gfn(e,t,n){if(Di("baseline",e,n)===void 0)return"middle"}const Yfn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...ah(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Gu("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Gu("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Ra("size",e,{defaultValue:Kfn(e),vgChannel:i}),[s]:_s(Di("thickness",n,t))}}};function Kfn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Di("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Qb(a)&&fi(a.step)?a.step*3/4:E$(t.view,i)*3/4}}const o6={arc:Nfn,area:Pfn,bar:Ofn,circle:Ufn,geoshape:Ffn,image:Mfn,line:$fn,point:jfn,rect:Vfn,rule:Hfn,square:zfn,text:qfn,tick:Yfn,trail:Lfn};function Xfn(e){if($r([T7,S7,fon],e.mark)){const t=RUe(e.mark,e.encoding);if(t.length>0)return Qfn(e,t)}else if(e.mark===C7){const t=QX.some(n=>Di(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Jfn(e)}return rle(e)}const cEe="faceted_path_";function Qfn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:cEe+e.requestDataName(Ms.Main),data:e.requestDataName(Ms.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:rle(e,{fromPrefix:cEe})}]}const fEe="stack_group_";function Jfn(e){var l;const[t]=rle(e,{fromPrefix:fEe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...QC(t.encode.update,["y","yc","y2","height",...QX]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Lc(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...QC(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Lc(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of QX){const f=my(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=_s(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Pt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Pt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=my(f,e.markDef,e.config);return d!==void 0?{...c,[f]:_s(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ms.Main),name:fEe+e.requestDataName(Ms.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Zfn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!at(o)&&xp(o)&&KX(o.value)||!o&&KX(Di("order",i,s)))){if((at(o)||At(o))&&!n)return Dje(o,{expr:"datum"});if(dE(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(At(l)){const c=l.sort;if(at(c))return{field:Pt(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Mm(c))return{field:Pt({aggregate:Sue(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(hUe(c)){const f=e.fieldDef(c.encoding);return{field:Pt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Pt(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function rle(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Io(r.clip,edn(e),tdn(e)),a=Tje(r),u=i.key,l=Zfn(e),c=ndn(e),f=Di("aria",r,s),d=o6[n].postEncodingTransform?o6[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:o6[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ms.Main)},encode:{update:o6[n].encodeEntry(e)},...d?{transform:d}:{}}]}function edn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function tdn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function ndn(e){if(!e.component.selection)return null;const t=xt(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=xt(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class xVe extends mVe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,__e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=r0(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=jan(o,s,{graticule:t.data&&$ue(t.data)}));const u=this.encoding=Hon(t.encoding||{},a,o.filled,s);this.markDef=JUe(o,u,s),this.size=Rfn({encoding:u,size:__e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=QUe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Nue(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===cUe,r=t&&zrn.some(i=>Qn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return x7.reduce((r,i)=>{const s=fa(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=xc(t);return at(n)&&(i.domain=n.map(xf)),at(r)&&(i.range=r.map(xf)),i}initAxes(t){return T0.reduce((n,r)=>{const i=t[r];if(Qn(i)||r===zs&&Qn(t.x2)||r===Ha&&Qn(t.y2)){const s=Qn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=xt(t),r={};for(const i of n){const s=t[i];r[i]=SP(s)?Cje(s):xf(s)}return r}initLegends(t){return Jrn.reduce((n,r)=>{const i=fa(t[r]);if(i&&ein(r)){const s=i.legend;n[r]=s&&xc(s)}return n},{})}parseData(){this.component.data=tj(this)}parseLayoutSize(){pfn(this)}parseSelections(){this.component.selection=sln(this,this.selection)}parseMarkGroup(){this.component.mark=Xfn(this)}parseAxesAndHeaders(){this.component.axes=Efn(this)}assembleSelectionTopLevelSignals(t){return Aun(this,t)}assembleSignals(){return[...Oze(this),...Cun(this,[])]}assembleSelectionData(t){return Dun(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return que(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!RA(this.parent))&&(t=fze(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return $w(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return i0(n)}typedFieldDef(t){const n=this.fieldDef(t);return ql(n)?n:null}}class ile extends Zue{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if($7(a))return new ile(a,this,this.getName(`layer_${u}`),o,s);if(Vy(a))return new xVe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Qae(a))})}parseData(){this.component.data=tj(this);for(const t of this.children)t.parseData()}parseLayoutSize(){dfn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of xt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Cfn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Oze(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),que(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Lt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Iun(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Qze(this))}}function sle(e,t,n,r,i){if(I7(e))return new Lk(e,t,n,i);if($7(e))return new ile(e,t,n,r,i);if(Vy(e))return new xVe(e,t,n,r,i);if(pan(e))return new bfn(e,t,n,i);throw new Error(Qae(e))}function rdn(e,t={}){t.logger&&bsn(t.logger),t.fieldTitle&&_Ue(t.fieldTitle);try{const n=XUe(hA(t.config,e.config)),r=sze(e,n),i=sle(r,null,"",void 0,n);return i.parse(),Acn(i.component.data,i),{spec:sdn(i,idn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&xsn(),t.fieldTitle&&Fon()}}function idn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Bt(t)&&(t={type:t}),i&&s&&wun(t.type)){if(i==="step"&&s==="step")Tt(o_e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Tt(o_e(b7(o)));const a=o==="width"?"height":"width";t.type=_un(a)}}return{...xt(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...O_e(n,!1),...O_e(e,!0)}}function sdn(e,t,n={},r){const i=e.config?Dan(e.config):void 0,s=[].concat(e.assembleSelectionData([]),ufn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...WUe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const odn=Mrn.version,adn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:JC,accessPathWithDatum:zae,compile:rdn,contains:$r,deepEqual:Af,deleteNestedProperty:h$,duplicate:zn,entries:rb,every:Bae,fieldIntersection:Uae,flatAccessWithDatum:sje,getFirstDefined:Io,hasIntersection:jae,hash:Mr,internalField:uje,isBoolean:C3,isEmpty:Qi,isEqual:Lrn,isInternalField:lje,isNullOrFalse:KX,isNumeric:h7,keys:xt,logicalExpr:Mk,mergeDeep:rje,never:nje,normalize:sze,normalizeAngle:T3,omit:Lc,pick:QC,prefixGenerator:XX,removePathFromField:SA,replaceAll:p_,replacePathInField:Yd,resetIdCounter:jrn,setEqual:ije,some:h_,stringify:Ji,titleCase:pP,unique:_m,uniqueId:aje,vals:fu,varName:Us,version:odn},Symbol.toStringTag,{value:"Module"}));function wVe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var udn="vega-themes",ldn="2.15.0",cdn="Themes for stylized Vega and Vega-Lite visualizations.",fdn=["vega","vega-lite","themes","style"],ddn="BSD-3-Clause",hdn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},pdn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],mdn="build/vega-themes.js",ole="build/vega-themes.module.js",gdn="build/vega-themes.min.js",ydn="build/vega-themes.min.js",vdn="build/vega-themes.module.d.ts",bdn={type:"git",url:"https://github.com/vega/vega-themes.git"},xdn=["src","build"],wdn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},_dn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Edn={vega:"*","vega-lite":"*"},Sdn={},Cdn={name:udn,version:ldn,description:cdn,keywords:fdn,license:ddn,author:hdn,contributors:pdn,main:mdn,module:ole,unpkg:gdn,jsdelivr:ydn,types:vdn,repository:bdn,files:xdn,scripts:wdn,devDependencies:_dn,peerDependencies:Edn,dependencies:Sdn};const h2="#fff",dEe="#888",Tdn={background:"#333",view:{stroke:dEe},title:{color:h2,subtitleColor:h2},style:{"guide-label":{fill:h2},"guide-title":{fill:h2}},axis:{domainColor:h2,gridColor:dEe,tickColor:h2}},xx="#4572a7",Adn={background:"#fff",arc:{fill:xx},area:{fill:xx},line:{stroke:xx,strokeWidth:2},path:{stroke:xx},rect:{fill:xx},shape:{stroke:xx},symbol:{fill:xx,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},wx="#30a2da",Aq="#cbcbcb",Ddn="#999",Idn="#333",hEe="#f0f0f0",pEe="#333",kdn={arc:{fill:wx},area:{fill:wx},axis:{domainColor:Aq,grid:!0,gridColor:Aq,gridWidth:1,labelColor:Ddn,labelFontSize:10,titleColor:Idn,tickColor:Aq,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:hEe,group:{fill:hEe},legend:{labelColor:pEe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:pEe,titleFontSize:14,titlePadding:10},line:{stroke:wx,strokeWidth:2},path:{stroke:wx,strokeWidth:.5},rect:{fill:wx},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:wx},bar:{binSpacing:2,fill:wx,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},_x="#000",Rdn={group:{fill:"#e5e5e5"},arc:{fill:_x},area:{fill:_x},line:{stroke:_x},path:{stroke:_x},rect:{fill:_x},shape:{stroke:_x},symbol:{fill:_x,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Ndn=22,Pdn="normal",mEe="Benton Gothic, sans-serif",gEe=11.5,Odn="normal",Ex="#82c6df",Dq="Benton Gothic Bold, sans-serif",yEe="normal",vEe=13,YD={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Fdn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Dq,fontSize:Ndn,fontWeight:Pdn},arc:{fill:Ex},area:{fill:Ex},line:{stroke:Ex,strokeWidth:2},path:{stroke:Ex},rect:{fill:Ex},shape:{stroke:Ex},symbol:{fill:Ex,size:30},axis:{labelFont:mEe,labelFontSize:gEe,labelFontWeight:Odn,titleFont:Dq,titleFontSize:vEe,titleFontWeight:yEe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:mEe,labelFontSize:gEe,symbolType:"square",titleFont:Dq,titleFontSize:vEe,titleFontWeight:yEe},range:{category:YD["category-6"],diverging:YD["fireandice-6"],heatmap:YD["fire-7"],ordinal:YD["fire-7"],ramp:YD["fire-7"]}},Sx="#ab5787",a6="#979797",Mdn={background:"#f9f9f9",arc:{fill:Sx},area:{fill:Sx},line:{stroke:Sx},path:{stroke:Sx},rect:{fill:Sx},shape:{stroke:Sx},symbol:{fill:Sx,size:30},axis:{domainColor:a6,domainWidth:.5,gridWidth:.2,labelColor:a6,tickColor:a6,tickWidth:.2,titleColor:a6},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Cx="#3e5c69",$dn={background:"#fff",arc:{fill:Cx},area:{fill:Cx},line:{stroke:Cx},path:{stroke:Cx},rect:{fill:Cx},shape:{stroke:Cx},symbol:{fill:Cx},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},yd="#1696d2",bEe="#000000",Ldn="#FFFFFF",u6="Lato",Iq="Lato",Bdn="Lato",jdn="#DEDDDD",Udn=18,KD={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},zdn={background:Ldn,title:{anchor:"start",fontSize:Udn,font:u6},axisX:{domain:!0,domainColor:bEe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Iq,labelAngle:0,tickColor:bEe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:u6},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:jdn,gridWidth:1,labelFontSize:12,labelFont:Iq,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:u6,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Iq,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:u6,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:KD["six-groups-cat-1"],diverging:KD["diverging-colors"],heatmap:KD["diverging-colors"],ordinal:KD["six-groups-seq"],ramp:KD["shades-blue"]},area:{fill:yd},rect:{fill:yd},line:{color:yd,stroke:yd,strokeWidth:5},trail:{color:yd,stroke:yd,strokeWidth:0,size:1},path:{stroke:yd,strokeWidth:.5},point:{filled:!0},text:{font:Bdn,color:yd,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:yd,stroke:null}},arc:{fill:yd},shape:{stroke:yd},symbol:{fill:yd,size:30}},Tx="#3366CC",xEe="#ccc",l6="Arial, sans-serif",Vdn={arc:{fill:Tx},area:{fill:Tx},path:{stroke:Tx},rect:{fill:Tx},shape:{stroke:Tx},symbol:{stroke:Tx},circle:{fill:Tx},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:l6,fontSize:12},"guide-title":{font:l6,fontSize:12},"group-title":{font:l6,fontSize:12}},title:{font:l6,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:xEe,tickColor:xEe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ale=e=>e*(1/3+1),wEe=ale(9),_Ee=ale(10),EEe=ale(12),XD="Segoe UI",SEe="wf_standard-font, helvetica, arial, sans-serif",CEe="#252423",QD="#605E5C",TEe="transparent",Hdn="#C8C6C4",Th="#118DFF",qdn="#12239E",Wdn="#E66C37",Gdn="#6B007B",Ydn="#E044A7",Kdn="#744EC2",Xdn="#D9B300",Qdn="#D64550",_Ve=Th,EVe="#DEEFFF",AEe=[EVe,_Ve],Jdn=[EVe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",_Ve],Zdn={view:{stroke:TEe},background:TEe,font:XD,header:{titleFont:SEe,titleFontSize:EEe,titleColor:CEe,labelFont:XD,labelFontSize:_Ee,labelColor:QD},axis:{ticks:!1,grid:!1,domain:!1,labelColor:QD,labelFontSize:wEe,titleFont:SEe,titleColor:CEe,titleFontSize:EEe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Hdn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Th},line:{stroke:Th,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:XD,fontSize:wEe,fill:QD},arc:{fill:Th},area:{fill:Th,line:!0,opacity:.6},path:{stroke:Th},rect:{fill:Th},point:{fill:Th,filled:!0,size:75},shape:{stroke:Th},symbol:{fill:Th,strokeWidth:1.5,size:50},legend:{titleFont:XD,titleFontWeight:"bold",titleColor:QD,labelFont:XD,labelFontSize:_Ee,labelColor:QD,symbolType:"circle",symbolSize:75},range:{category:[Th,qdn,Wdn,Gdn,Ydn,Kdn,Xdn,Qdn],diverging:AEe,heatmap:AEe,ordinal:Jdn}},kq='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',ehn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',Rq=400,c6={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},thn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],nhn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function nj({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=c6.gridBg[e],i=c6.textPrimary[e],s=c6.textSecondary[e],o=n==="dark"?thn:nhn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:kq,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:ehn,labelFontWeight:Rq,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:c6.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:kq,fill:s,fontWeight:Rq},"guide-title":{font:kq,fill:s,fontWeight:Rq}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const rhn=nj({theme:"white",background:"#ffffff"}),ihn=nj({theme:"g10",background:"#f4f4f4"}),shn=nj({theme:"g90",background:"#262626"}),ohn=nj({theme:"g100",background:"#161616"}),ahn=Cdn.version,uhn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:ihn,carbong100:ohn,carbong90:shn,carbonwhite:rhn,dark:Tdn,excel:Adn,fivethirtyeight:kdn,ggplot2:Rdn,googlecharts:Vdn,latimes:Fdn,powerbi:Zdn,quartz:Mdn,urbaninstitute:zdn,version:ahn,vox:$dn},Symbol.toStringTag,{value:"Module"}));function lhn(e,t,n,r){if(at(e))return`[${e.map(i=>t(Bt(i)?i:DEe(i,n))).join(", ")}]`;if(jt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(jt(c)&&(c=DEe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function chn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function DEe(e,t){return JSON.stringify(e,chn(t))}var fhn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const SVe="vg-tooltip-element",dhn={offsetX:10,offsetY:10,id:SVe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:hhn,maxDepth:2,formatTooltip:lhn,baseURL:""};function hhn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function phn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return fhn.toString().replace(SVe,e)}function mhn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class ghn{constructor(t){this.options={...dhn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=phn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=mhn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var Nq={};function yhn(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pq,IEe;function vhn(){return IEe||(IEe=1,Pq=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Pq}var bhn=wi;wi.Node=E_;wi.create=wi;function wi(e){var t=this;if(t instanceof wi||(t=new wi),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}wi.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};wi.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};wi.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};wi.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)whn(this,arguments[e]);return this.length};wi.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)_hn(this,arguments[e]);return this.length};wi.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};wi.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};wi.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};wi.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};wi.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};wi.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};wi.prototype.map=function(e,t){t=t||this;for(var n=new wi,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};wi.prototype.mapReverse=function(e,t){t=t||this;for(var n=new wi,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};wi.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};wi.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};wi.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};wi.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};wi.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};wi.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};wi.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=xhn(this,i,n[r]);return s};wi.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function xhn(e,t,n){var r=t===e.head?new E_(n,null,t,e):new E_(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function whn(e,t){e.tail=new E_(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function _hn(e,t){e.head=new E_(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function E_(e,t,n,r){if(!(this instanceof E_))return new E_(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{vhn()(wi)}catch{}const Ehn=bhn,nw=Symbol("max"),ug=Symbol("length"),p2=Symbol("lengthCalculator"),Bk=Symbol("allowStale"),Sw=Symbol("maxAge"),ng=Symbol("dispose"),kEe=Symbol("noDisposeOnSet"),Sa=Symbol("lruList"),Ih=Symbol("cache"),CVe=Symbol("updateAgeOnGet"),Oq=()=>1;class Shn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[nw]=t.max||1/0;const n=t.length||Oq;if(this[p2]=typeof n!="function"?Oq:n,this[Bk]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Sw]=t.maxAge||0,this[ng]=t.dispose,this[kEe]=t.noDisposeOnSet||!1,this[CVe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[nw]=t||1/0,JD(this)}get max(){return this[nw]}set allowStale(t){this[Bk]=!!t}get allowStale(){return this[Bk]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Sw]=t,JD(this)}get maxAge(){return this[Sw]}set lengthCalculator(t){typeof t!="function"&&(t=Oq),t!==this[p2]&&(this[p2]=t,this[ug]=0,this[Sa].forEach(n=>{n.length=this[p2](n.value,n.key),this[ug]+=n.length})),JD(this)}get lengthCalculator(){return this[p2]}get length(){return this[ug]}get itemCount(){return this[Sa].length}rforEach(t,n){n=n||this;for(let r=this[Sa].tail;r!==null;){const i=r.prev;REe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Sa].head;r!==null;){const i=r.next;REe(this,t,r,n),r=i}}keys(){return this[Sa].toArray().map(t=>t.key)}values(){return this[Sa].toArray().map(t=>t.value)}reset(){this[ng]&&this[Sa]&&this[Sa].length&&this[Sa].forEach(t=>this[ng](t.key,t.value)),this[Ih]=new Map,this[Sa]=new Ehn,this[ug]=0}dump(){return this[Sa].map(t=>I$(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Sa]}set(t,n,r){if(r=r||this[Sw],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[p2](n,t);if(this[Ih].has(t)){if(s>this[nw])return zS(this,this[Ih].get(t)),!1;const u=this[Ih].get(t).value;return this[ng]&&(this[kEe]||this[ng](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[ug]+=s-u.length,u.length=s,this.get(t),JD(this),!0}const o=new Chn(t,n,s,i,r);return o.length>this[nw]?(this[ng]&&this[ng](t,n),!1):(this[ug]+=o.length,this[Sa].unshift(o),this[Ih].set(t,this[Sa].head),JD(this),!0)}has(t){if(!this[Ih].has(t))return!1;const n=this[Ih].get(t).value;return!I$(this,n)}get(t){return Fq(this,t,!0)}peek(t){return Fq(this,t,!1)}pop(){const t=this[Sa].tail;return t?(zS(this,t),t.value):null}del(t){zS(this,this[Ih].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Ih].forEach((t,n)=>Fq(this,n,!1))}}const Fq=(e,t,n)=>{const r=e[Ih].get(t);if(r){const i=r.value;if(I$(e,i)){if(zS(e,r),!e[Bk])return}else n&&(e[CVe]&&(r.value.now=Date.now()),e[Sa].unshiftNode(r));return i.value}},I$=(e,t)=>{if(!t||!t.maxAge&&!e[Sw])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Sw]&&n>e[Sw]},JD=e=>{if(e[ug]>e[nw])for(let t=e[Sa].tail;e[ug]>e[nw]&&t!==null;){const n=t.prev;zS(e,t),t=n}},zS=(e,t)=>{if(t){const n=t.value;e[ng]&&e[ng](n.key,n.value),e[ug]-=n.length,e[Ih].delete(n.key),e[Sa].removeNode(t)}};class Chn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const REe=(e,t,n,r)=>{let i=n.value;I$(e,i)&&(zS(e,n),e[Bk]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Thn=Shn;const Ahn=Object.freeze({loose:!0}),Dhn=Object.freeze({}),Ihn=e=>e?typeof e!="object"?Ahn:e:Dhn;var ule=Ihn,vQ={exports:{}};const khn="2.0.0",TVe=256,Rhn=Number.MAX_SAFE_INTEGER||9007199254740991,Nhn=16,Phn=TVe-6,Ohn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var lle={MAX_LENGTH:TVe,MAX_SAFE_COMPONENT_LENGTH:Nhn,MAX_SAFE_BUILD_LENGTH:Phn,MAX_SAFE_INTEGER:Rhn,RELEASE_TYPES:Ohn,SEMVER_SPEC_VERSION:khn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Fhn=typeof process=="object"&&Nq&&Nq.NODE_DEBUG&&/\bsemver\b/i.test(Nq.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var rj=Fhn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=lle,s=rj;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(vQ,vQ.exports);var cle=vQ.exports;const NEe=/^[0-9]+$/,AVe=(e,t)=>{const n=NEe.test(e),r=NEe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Mhn=(e,t)=>AVe(t,e);var $hn={compareIdentifiers:AVe,rcompareIdentifiers:Mhn};const f6=rj,{MAX_LENGTH:PEe,MAX_SAFE_INTEGER:d6}=lle,{safeRe:OEe,t:FEe}=cle,Lhn=ule,{compareIdentifiers:m2}=$hn;let Bhn=class Yp{constructor(t,n){if(n=Lhn(n),t instanceof Yp){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>PEe)throw new TypeError(`version is longer than ${PEe} characters`);f6("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?OEe[FEe.LOOSE]:OEe[FEe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>d6||this.major<0)throw new TypeError("Invalid major version");if(this.minor>d6||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>d6||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<d6)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(f6("SemVer.compare",this.version,this.options,t),!(t instanceof Yp)){if(typeof t=="string"&&t===this.version)return 0;t=new Yp(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Yp||(t=new Yp(t,this.options)),m2(this.major,t.major)||m2(this.minor,t.minor)||m2(this.patch,t.patch)}comparePre(t){if(t instanceof Yp||(t=new Yp(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(f6("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return m2(r,i)}while(++n)}compareBuild(t){t instanceof Yp||(t=new Yp(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(f6("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return m2(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),m2(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var fle=Bhn;const MEe=fle,jhn=(e,t,n)=>new MEe(e,n).compare(new MEe(t,n));var NA=jhn;const Uhn=NA,zhn=(e,t,n)=>Uhn(e,t,n)===0;var Vhn=zhn;const Hhn=NA,qhn=(e,t,n)=>Hhn(e,t,n)!==0;var Whn=qhn;const Ghn=NA,Yhn=(e,t,n)=>Ghn(e,t,n)>0;var Khn=Yhn;const Xhn=NA,Qhn=(e,t,n)=>Xhn(e,t,n)>=0;var Jhn=Qhn;const Zhn=NA,epn=(e,t,n)=>Zhn(e,t,n)<0;var tpn=epn;const npn=NA,rpn=(e,t,n)=>npn(e,t,n)<=0;var ipn=rpn;const spn=Vhn,opn=Whn,apn=Khn,upn=Jhn,lpn=tpn,cpn=ipn,fpn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return spn(e,n,r);case"!=":return opn(e,n,r);case">":return apn(e,n,r);case">=":return upn(e,n,r);case"<":return lpn(e,n,r);case"<=":return cpn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var dpn=fpn,Mq,$Ee;function hpn(){if($Ee)return Mq;$Ee=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Mq=t;const n=ule,{safeRe:r,t:i}=cle,s=dpn,o=rj,a=fle,u=DVe();return Mq}var $q,LEe;function DVe(){if(LEe)return $q;LEe=1;class e{constructor($,V){if(V=r(V),$ instanceof e)return $.loose===!!V.loose&&$.includePrerelease===!!V.includePrerelease?$:new e($.raw,V);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=V,this.loose=!!V.loose,this.includePrerelease=!!V.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(j=>this.parseRange(j.trim())).filter(j=>j.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const j=this.set[0];if(this.set=this.set.filter(G=>!p(G[0])),this.set.length===0)this.set=[j];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const j=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,G=n.get(j);if(G)return G;const Y=this.options.loose,J=Y?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(J,R(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let L=$.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>I(q,this.options));Y&&(L=L.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",L);const U=new Map,W=L.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];U.set(q.value,q)}U.size>1&&U.has("")&&U.delete("");const B=[...U.values()];return n.set(j,B),B}intersects($,V){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(j=>g(j,V)&&$.set.some(G=>g(G,V)&&j.every(Y=>G.every(J=>Y.intersects(J,V)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let V=0;V<this.set.length;V++)if(F(this.set[V],$,this.options))return!0;return!1}}$q=e;const t=Thn,n=new t({max:1e3}),r=ule,i=hpn(),s=rj,o=fle,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=cle,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=lle,p=O=>O.value==="<0.0.0-0",m=O=>O.value==="",g=(O,$)=>{let V=!0;const j=O.slice();let G=j.pop();for(;V&&j.length;)V=j.every(Y=>G.intersects(Y,$)),G=j.pop();return V},y=(O,$)=>(s("comp",O,$),O=w(O,$),s("caret",O),O=b(O,$),s("tildes",O),O=T(O,$),s("xrange",O),O=k(O,$),s("stars",O),O),v=O=>!O||O.toLowerCase()==="x"||O==="*",b=(O,$)=>O.trim().split(/\s+/).map(V=>_(V,$)).join(" "),_=(O,$)=>{const V=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return O.replace(V,(j,G,Y,J,L)=>{s("tilde",O,j,G,Y,J,L);let U;return v(G)?U="":v(Y)?U=`>=${G}.0.0 <${+G+1}.0.0-0`:v(J)?U=`>=${G}.${Y}.0 <${G}.${+Y+1}.0-0`:L?(s("replaceTilde pr",L),U=`>=${G}.${Y}.${J}-${L} <${G}.${+Y+1}.0-0`):U=`>=${G}.${Y}.${J} <${G}.${+Y+1}.0-0`,s("tilde return",U),U})},w=(O,$)=>O.trim().split(/\s+/).map(V=>S(V,$)).join(" "),S=(O,$)=>{s("caret",O,$);const V=$.loose?a[u.CARETLOOSE]:a[u.CARET],j=$.includePrerelease?"-0":"";return O.replace(V,(G,Y,J,L,U)=>{s("caret",O,G,Y,J,L,U);let W;return v(Y)?W="":v(J)?W=`>=${Y}.0.0${j} <${+Y+1}.0.0-0`:v(L)?Y==="0"?W=`>=${Y}.${J}.0${j} <${Y}.${+J+1}.0-0`:W=`>=${Y}.${J}.0${j} <${+Y+1}.0.0-0`:U?(s("replaceCaret pr",U),Y==="0"?J==="0"?W=`>=${Y}.${J}.${L}-${U} <${Y}.${J}.${+L+1}-0`:W=`>=${Y}.${J}.${L}-${U} <${Y}.${+J+1}.0-0`:W=`>=${Y}.${J}.${L}-${U} <${+Y+1}.0.0-0`):(s("no pr"),Y==="0"?J==="0"?W=`>=${Y}.${J}.${L}${j} <${Y}.${J}.${+L+1}-0`:W=`>=${Y}.${J}.${L}${j} <${Y}.${+J+1}.0-0`:W=`>=${Y}.${J}.${L} <${+Y+1}.0.0-0`),s("caret return",W),W})},T=(O,$)=>(s("replaceXRanges",O,$),O.split(/\s+/).map(V=>A(V,$)).join(" ")),A=(O,$)=>{O=O.trim();const V=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return O.replace(V,(j,G,Y,J,L,U)=>{s("xRange",O,j,G,Y,J,L,U);const W=v(Y),B=W||v(J),q=B||v(L),Z=q;return G==="="&&Z&&(G=""),U=$.includePrerelease?"-0":"",W?G===">"||G==="<"?j="<0.0.0-0":j="*":G&&Z?(B&&(J=0),L=0,G===">"?(G=">=",B?(Y=+Y+1,J=0,L=0):(J=+J+1,L=0)):G==="<="&&(G="<",B?Y=+Y+1:J=+J+1),G==="<"&&(U="-0"),j=`${G+Y}.${J}.${L}${U}`):B?j=`>=${Y}.0.0${U} <${+Y+1}.0.0-0`:q&&(j=`>=${Y}.${J}.0${U} <${Y}.${+J+1}.0-0`),s("xRange return",j),j})},k=(O,$)=>(s("replaceStars",O,$),O.trim().replace(a[u.STAR],"")),I=(O,$)=>(s("replaceGTE0",O,$),O.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=O=>($,V,j,G,Y,J,L,U,W,B,q,Z,re)=>(v(j)?V="":v(G)?V=`>=${j}.0.0${O?"-0":""}`:v(Y)?V=`>=${j}.${G}.0${O?"-0":""}`:J?V=`>=${V}`:V=`>=${V}${O?"-0":""}`,v(W)?U="":v(B)?U=`<${+W+1}.0.0-0`:v(q)?U=`<${W}.${+B+1}.0-0`:Z?U=`<=${W}.${B}.${q}-${Z}`:O?U=`<${W}.${B}.${+q+1}-0`:U=`<=${U}`,`${V} ${U}`.trim()),F=(O,$,V)=>{for(let j=0;j<O.length;j++)if(!O[j].test($))return!1;if($.prerelease.length&&!V.includePrerelease){for(let j=0;j<O.length;j++)if(s(O[j].semver),O[j].semver!==i.ANY&&O[j].semver.prerelease.length>0){const G=O[j].semver;if(G.major===$.major&&G.minor===$.minor&&G.patch===$.patch)return!0}return!1}return!0};return $q}const ppn=DVe(),mpn=(e,t,n)=>{try{t=new ppn(t,n)}catch{return!1}return t.test(e)};var gpn=mpn,IVe=yhn(gpn);function ypn(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var vpn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function kVe(e,...t){for(const n of t)bpn(e,n);return e}function bpn(e,t){for(const n of Object.keys(t))pA(e,n,t[n],!0)}const Rh=nrn;let N3=adn;const h6=typeof window<"u"?window:void 0;var aCe;N3===void 0&&((aCe=h6==null?void 0:h6.vl)!=null&&aCe.compile)&&(N3=h6.vl);const xpn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},wpn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},WI={vega:"Vega","vega-lite":"Vega-Lite"},k$={vega:Rh.version,"vega-lite":N3?N3.version:"not available"},_pn={vega:e=>e,"vega-lite":(e,t)=>N3.compile(e,{config:t}).spec},Epn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Spn="chart-wrapper";function Cpn(e){return typeof e=="function"}function BEe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${WI[r]} JSON Source`}function Tpn(e,t){if(e.$schema){const n=wVe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${WI[n.library]}, but mode argument sets ${WI[t]??t}.`);const r=n.library;return IVe(k$[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${WI[r]} ${n.version}, but the current version of ${WI[r]} is v${k$[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function RVe(e){return!!(e&&"load"in e)}function jEe(e){return RVe(e)?e:Rh.loader(e)}function Apn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Bt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Dpn(e,t,n={}){let r,i;Bt(t)?(i=jEe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Apn(r),o=s.loader;(!i||o)&&(i=jEe(n.loader??o));const a=await UEe(s,i),u=await UEe(n,i),l={...kVe(u,a),config:hA(u.config??{},a.config??{})};return await kpn(e,r,l,i)}async function UEe(e,t){const n=Bt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Bt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Ipn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function kpn(e,t,n={},r){const i=n.theme?hA(uhn[n.theme],n.config??{}):n.config,s=zb(n.actions)?n.actions:kVe({},xpn,n.actions??{}),o={...wpn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Rh.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const w="vega-embed-style",{root:S,rootContainer:T}=Ipn(c);if(!S.getElementById(w)){const A=document.createElement("style");A.id=w,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?vpn.toString():n.defaultStyle,T.appendChild(A)}}const f=Tpn(t,n.mode);let d=_pn[f](t,i);if(f==="vega-lite"&&d.$schema){const w=wVe(d.$schema);IVe(k$.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${k$.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const w=document.createElement("div");w.classList.add(Spn),c.appendChild(w),h=w}const p=n.patch;if(p&&(d=p instanceof Function?p(d):v9(d,p,!0,!1).newDocument),n.formatLocale&&Rh.formatLocale(n.formatLocale),n.timeFormatLocale&&Rh.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const S=n.expressionFunctions[w];"fn"in S?Rh.expressionFunction(w,S.fn,S.visitor):S instanceof Function&&Rh.expressionFunction(w,S)}const{ast:m}=n,g=Rh.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Rh.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Rh.expressionInterpreter??n.expr??drn}:{}});if(y.addSignalListener("autosize",(w,S)=>{const{type:T}=S;T=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):T=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):T=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:w,tooltip:S}=n,T=w&&!RVe(w)?w==null?void 0:w.baseURL:void 0,A=Cpn(S)?S:new ghn({baseURL:T,...S===!0?{}:S}).call;y.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:w,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(w,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let w=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,c.append(T),w=T;const A=document.createElement("summary");A.innerHTML=Epn,T.append(A),b=k=>{T.contains(k.target)||T.removeAttribute("open")},document.addEventListener("click",b)}const S=document.createElement("div");if(w.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const T of["svg","png"])if(s===!0||s.export===!0||s.export[T]){const A=o[`${T.toUpperCase()}_ACTION`],k=document.createElement("a"),I=jt(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;k.text=A,k.href="#",k.target="_blank",k.download=`${l}.${T}`,k.addEventListener("mousedown",async function(R){R.preventDefault();const F=await y.toImageURL(T,I);this.href=F}),S.append(k)}}if(s===!0||s.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(A){BEe(LH(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),S.append(T)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(A){BEe(LH(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),S.append(T)}if(s===!0||s.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(k){ypn(window,T,{config:i,mode:f,renderer:a,spec:LH(t)}),k.preventDefault()}),S.append(A)}}function _(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:_,embedOptions:n}}function Rpn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Npn(e,t,n){n&&(Rpn(n)?n(e.data(t)):e.change(t,Rh.changeset().remove(()=>!0).insert(n)))}function Ppn(e,t){Object.keys(t).forEach(n=>{Npn(e,n,t[n])})}function NVe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const PVe=()=>{};function Lq(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Opn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=NVe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!rF(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function zEe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Bq(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function GI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class OVe extends yi.PureComponent{constructor(){super(...arguments),GI(this,"containerRef",yi.createRef()),GI(this,"resultPromise",void 0),GI(this,"handleError",t=>{const{onError:n=PVe}=this.props;n(t,this.containerRef.current),console.warn(t)}),GI(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=NVe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Opn(Bq(this.props),Bq(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!qK(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&zEe(a,s),i&&Lq(a,i)),a.run()})}else qK(i,s)||this.modifyView(o=>{s&&zEe(o,s),i&&Lq(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=Bq(this.props);this.resultPromise=Dpn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;Lq(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return yi.createElement("div",{ref:this.containerRef,className:t,style:n})}}GI(OVe,"propTypes",{className:mme.string,onError:mme.func});function bQ(){return bQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bQ.apply(this,arguments)}function xQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Fpn={};class dle extends yi.PureComponent{constructor(){super(...arguments),xQ(this,"vegaEmbed",yi.createRef()),xQ(this,"handleNewView",t=>{this.update();const{onNewView:n=PVe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){qK(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Ppn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return yi.createElement(OVe,bQ({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}xQ(dle,"defaultProps",{data:Fpn});function wQ(){return wQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wQ.apply(this,arguments)}function VEe(e){return yi.createElement(dle,wQ({},e,{mode:"vega-lite"}))}function Mpn({currentConfig:e,provState:t}){const n=th(),r=nh(),i=ef(),[s,o]=N.useState(null),[a,u]=N.useState(!0),{updateResponseBlockValidation:l,setIframeAnswers:c}=Bl(),[f,d]=N.useState(),{actions:h,trrack:p}=N.useMemo(()=>{const b=Iy.create(),_=b.register("signal",(S,T)=>(S.event=T,S)),w=J_({registry:b,initialState:{event:{}}});return{actions:{signalAction:_},trrack:w}},[]),m=N.useCallback(({status:b,provenanceGraph:_,answers:w})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:b,values:w,provenanceGraph:_})),i(c(w))},[r,n,i,c,l]),g=N.useCallback((b,_)=>{p.apply(b,h.signalAction({key:b,value:_}))},[h,p]),y=N.useCallback((b,_)=>{const{responseId:w,response:S}=_;m({status:!0,provenanceGraph:p.graph.backend,answers:{[w]:S}})},[m,p.graph.backend]),v=N.useMemo(()=>{var _;const b=(_=s==null?void 0:s.config)==null?void 0:_.signals;return b?b.reduce((w,S)=>(S.name==="revisitAnswer"?w[S.name]=y:w[S.name]=g,w),{}):{}},[y,g,s]);return N.useEffect(()=>{async function b(){u(!0);let _;"path"in e?_=await Z_t(e.path):_=e.config,_!==void 0&&o(_),u(!1)}e&&b()},[e]),N.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?E.jsx("div",{children:"Loading..."}):"path"in e&&!s?E.jsx(Nv,{path:e.path}):s?E.jsx(dle,{spec:structuredClone(s),signalListeners:v,onNewView:b=>d(b)}):E.jsx("div",{children:"Failed to load vega config"})}function $pn(){const e=ny(),t=th(),n=nh()||"Notfound",r=e.components[n],{storageEngine:i}=Po(),s=N.useRef(null),[o,a]=N.useState(null),{setIsRecording:u}=Bl(),l=vi(k=>k.analysisProvState),c=HT(),f=kte(),d=vi(k=>k.sequence),[h]=Tb(),p=vi(k=>k.participantId),m=N.useMemo(()=>h.get("participantId"),[h]);g5e();const g=ef(),{setAlertModal:y}=Bl();N.useEffect(()=>{(i==null?void 0:i.getEngine())!=="localStorage"&&g(y({show:!0,message:"There was an issue connecting to the localStorage database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[y,i,g]),N.useEffect(()=>{!e||!e.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(k=>{var I;k.stop(),(I=s.current)==null||I.stream.removeTrack(k)}),s.current.stream.getAudioTracks().forEach(k=>{var I;k.stop(),(I=s.current)==null||I.stream.removeTrack(k)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(k=>{const I=new MediaRecorder(k);s.current=I,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[v,b]=N.useState([]),_=N.useRef([]);N.useEffect(()=>{async function k(){var F;const R=((F=Ste(d,t))==null?void 0:F.map(O=>O.currentBlock.id).filter(O=>O!==void 0))||[];b(R)}async function I(){const R=_.current;JSON.stringify(R)!==JSON.stringify(v)&&v.length>0&&i&&await i.addParticipantTags(v),_.current=v}k().then(I)},[t,i,d]);const w=N.useMemo(()=>{var k;return n!=="end"&&fA(r)&&e.baseComponents?Ite({},(k=e.baseComponents)==null?void 0:k[r.baseComponent],r):r},[r,e]);if(n==="end")return E.jsx(eUt,{});if(n==="__trainingFailed")return E.jsx(tUt,{});if(n==="__timedOut")return E.jsx(nUt,{});if(n==="Notfound")return E.jsx(Nv,{email:e.uiConfig.contactEmail});if(m&&p!==m)return E.jsx(ma,{style:{height:"80vh"},children:E.jsx(Zc,{})});const S=w.instruction||"",{instructionLocation:T}=w,A=e.uiConfig.sidebar&&(T==="sidebar"||T===void 0);return E.jsxs(E.Fragment,{children:[T==="aboveStimulus"&&E.jsx(el,{text:S}),E.jsx(QM,{status:f,config:w,location:"aboveStimulus"},`${t}-above-response-block`),E.jsxs(N.Suspense,{fallback:E.jsx("div",{children:"Loading..."}),children:[w.type==="markdown"&&E.jsx(Vjt,{currentConfig:w}),w.type==="website"&&E.jsx(J_t,{currentConfig:w}),w.type==="image"&&E.jsx(tEt,{currentConfig:w}),w.type==="react-component"&&E.jsx(zjt,{currentConfig:w,provState:l}),w.type==="vega"&&E.jsx(Mpn,{currentConfig:w,provState:l})]},`${t}-stimulus`),(T==="belowStimulus"||T===void 0&&!A)&&E.jsx(el,{text:S}),E.jsx(QM,{status:f,config:w,location:"belowStimulus"},`${t}-below-response-block`)]})}function FVe(e){const[t]=Tb();return E.jsx(Yee,{...e,to:{pathname:e.to,search:t.toString()}})}function MVe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=MVe(o,t,n,r),r.includes(o.orderPath))break}return i}function $Ve(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=$Ve(s,r)}}),n}function Lpn(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function Bpn({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=G_(),c=Sp(),f=th(),[d,{close:h,open:p}]=oZ(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?MVe(n,e,r,a.orderPath):-1,{trialId:y}=Vm(),[v]=Tb(),b=N.useMemo(()=>v.get("participantId"),[v]),_=y===e,w=s?f===g:f===`reviewer-${e}`,S=u?_:w,T=N.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),k=u?T:()=>c(s?b?`/${l}/${jh(g)}?participantId=${b}`:`/${l}/${jh(g)}`:`/${l}/reviewer-${e}`),I=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,R=e.includes("$")&&I&&e.includes(I)?e.split(I).at(-1):e;return E.jsxs(Fc,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[E.jsx(Fc.Target,{children:E.jsx(Fe,{onMouseEnter:p,onMouseLeave:h,children:E.jsx(UL,{active:S,style:{lineHeight:"32px",height:"32px"},label:E.jsxs(Fe,{children:[i&&E.jsx(tpt,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==R&&E.jsx(gpt,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),E.jsx(tt,{size:"sm",span:S,fw:S?"700":void 0,display:"inline",children:R})]}),onClick:k,disabled:t})})}),m&&(m.description||m.meta)&&E.jsx(Fc.Dropdown,{onMouseLeave:h,children:E.jsxs(Fe,{children:[m.description&&E.jsxs(Fe,{children:[E.jsx(tt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),E.jsx(tt,{fw:400,component:"span",children:m.description})]}),m.meta&&E.jsxs(Fe,{children:[E.jsx(tt,{fw:"900",component:"span",children:"Task Meta: "}),E.jsx(tt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function R$({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=Og(e.components);return n&&r&&(o=Lpn(Og(e.components),Og(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),E.jsx(E.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return E.jsx(Bpn,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?hp(c).length-$Ve(u,c):0,d=hp(u);return E.jsx(UL,{label:E.jsxs(Fe,{style:{opacity:f>0?1:.5},children:[E.jsx(tt,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?E.jsx(Zht,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&E.jsxs(lv,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&E.jsx(lv,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:E.jsx(Fe,{style:{borderLeft:"1px solid #e9ecef"},children:E.jsx(R$,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function LVe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function HEe({text:e}){return E.jsx(xs,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:E.jsx(Xee,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function jpn(){const e=vi(h=>h.sequence),t=vi(h=>h.metadata),{toggleStudyBrowser:n}=Bl(),r=ny(),i=ef(),s=G_(),o=yke(`/${s}`),{storageEngine:a}=Po(),u=HT(),l=N.useMemo(()=>{let h=Og(r.sequence);return h=Cte(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=N.useState("participant"),d=N.useMemo(()=>c==="allTrials"||u,[c,u]);return E.jsxs(Yi.Aside,{p:"0",children:[E.jsx(Yi.Section,{p:"md",children:E.jsxs(Jt,{direction:"row",justify:"space-between",children:[E.jsx(tt,{size:"md",fw:700,pt:3,children:"Study Browser"}),E.jsx(xs,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:E.jsx(bn,{variant:"light",leftSection:E.jsx(Qee,{size:14}),onClick:()=>LVe(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),E.jsx(wb,{onClick:()=>i(n()),mt:1})]})}),E.jsx(Yi.Section,{grow:!0,component:Xg,p:"md",children:E.jsxs(qr,{value:c,onChange:f,children:[E.jsx(Fe,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:E.jsxs(qr.List,{grow:!0,children:[E.jsxs(qr.Tab,{value:"participant",children:["Participant View",E.jsx(HEe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),E.jsxs(qr.Tab,{value:"allTrials",disabled:u,children:["All Trials View",E.jsx(HEe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),E.jsx(qr.Panel,{value:"participant",children:E.jsx(R$,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),E.jsx(qr.Panel,{value:"allTrials",children:E.jsx(R$,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function Upn({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=vi(A=>A.config),r=vi(A=>A.metadata),i=Tte(),s=ef(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=Bl(),{storageEngine:l}=Po(),c=nh(),f=th(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=N.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,y=n==null?void 0:n.uiConfig.withProgressBar,v=G_(),b=yke(`/${v}`),_=N.useRef(null),[w,S]=N.useState(!1),T=vi(A=>A.isRecording);return N.useEffect(()=>{const A=_.current;A&&S(A.scrollWidth>A.offsetWidth)},[n]),E.jsx(Yi.Header,{p:"md",children:E.jsxs(Ef,{mt:-7,align:"center",children:[E.jsx(Ef.Col,{span:4,children:E.jsxs(Jt,{align:"center",children:[E.jsx(Sb,{w:40,src:`${Ll}${g}`,alt:"Study Logo"}),E.jsx(Rf,{w:"md"}),E.jsx(lo,{ref:_,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:w?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),E.jsx(Ef.Col,{span:4,children:y&&E.jsx(OT,{radius:"md",size:"lg",value:h})}),E.jsx(Ef.Col,{span:4,children:E.jsxs($i,{wrap:"nowrap",justify:"right",children:[T?E.jsxs($i,{ml:"xl",gap:20,wrap:"nowrap",children:[E.jsx(tt,{color:"red",children:"Recording audio"}),E.jsx(b8e,{})]}):null,!t&&E.jsx(xs,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:E.jsx(lv,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&E.jsx(bn,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),E.jsxs(El,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[E.jsx(El.Target,{children:E.jsx(L_,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:E.jsx(upt,{})})}),E.jsxs(El.Dropdown,{children:[e&&E.jsx(El.Item,{leftSection:E.jsx(wpt,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),E.jsx(El.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:E.jsx(ppt,{size:14}),children:"Contact"}),e&&E.jsx(El.Item,{leftSection:E.jsx(Qee,{size:14}),onClick:()=>LVe(l,n,r,b),children:"Next Participant"}),e&&E.jsx(El.Item,{leftSection:E.jsx(_ke,{size:14}),component:"a",href:`${Ll}analysis/stats/${v}`,children:"Analyze & Manage"})]})]})]})})]})})}function BVe(e,t){var n;return fA(e)&&t.baseComponents?Ite({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function zpn(){var u;const e=(u=ny())==null?void 0:u.uiConfig.sidebar,t=ny(),n=nh(),r=t.components[n],i=N.useMemo(()=>r?BVe(r,t):null,[r,t]),s=kte(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?E.jsxs(Yi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&E.jsx(Yi.Section,{bg:"gray.3",p:"md",children:E.jsxs(tt,{c:"gray.9",children:[E.jsx(tt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),E.jsx(el,{text:o})]})}),E.jsx(Yi.Section,{p:"md",children:E.jsx(QM,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):E.jsx(Yi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:E.jsx(QM,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function Vpn(){const e=vi(u=>u.showHelpText),t=vi(u=>u.config),n=ef(),{toggleShowHelpText:r}=Bl(),[i,s]=N.useState(""),[o,a]=N.useState(!0);return N.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await Nte(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),E.jsx(ho,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?E.jsx(el,{text:i}):E.jsx(Nv,{path:t.uiConfig.helpTextPath})})}function Hpn(){const e=vi(o=>o.alertModal),{setAlertModal:t}=Bl(),n=ef(),[r,i]=N.useState(e.show),s=N.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return N.useEffect(()=>i(e.show),[e.show]),E.jsx(ho,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:E.jsxs(Pg,{color:"red",radius:"xs",title:"Alert",icon:E.jsx(Jht,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[E.jsx(tt,{my:"md",children:e.message}),E.jsx($i,{w:"100%",justify:"end",children:E.jsx(bn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const qEe=15,WEe=3;function qpn({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return E.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return E.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:E.jsx("rect",{fill:a===r?"#e15759":"#484848",x:e(u.createdOn)-WEe/2,y:n/2-qEe/2,width:WEe,height:qEe})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?E.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const GEe={left:5,top:0,right:5,bottom:0};function Wpn({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=N.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=N.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=N.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return E.jsx(qpn,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return E.jsxs("svg",{style:{width:n,height:r},children:[E.jsx("line",{stroke:"black",strokeWidth:1,x1:GEe.left,x2:n+GEe.left,y1:r/2,y2:r/2}),c]})}function Gpn(e){const t=N.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return N.useLayoutEffect(()=>{t.current=e}),N.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Ypn({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=N.useRef(0),u=N.useRef(Date.now()),[l,c]=N.useState(0);N.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=Gpn(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});N.useEffect(()=>{let h=null;return i&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[f,i]);const d=N.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return E.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:E.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function _Q(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const jq={left:0,top:0,right:0,bottom:0};function Kpn(e,t){return t?t.getParticipantData(e):null}function Xpn({setTimeString:e}){const[t]=Tb(),n=N.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=Po(),i=vi(U=>U.analysisIsPlaying),s=vi(U=>U.analysisHasAudio),o=vi(U=>U.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l}=Bl(),c=ef(),f=nh(),d=th();N.useEffect(()=>{c(a(null))},[d,a,c]);const[h,{width:p}]=kf(),[m,g]=N.useState(0),[y,v]=N.useState(null),[b,_]=N.useState(0),{value:w,status:S}=M5(Kpn,[n,r]),[T,A]=Grt(0,100),k=N.useRef(null),[I,R]=N.useState(!0),F=N.useRef(null),O=N.useMemo(()=>`${f}_${d}`,[f,d]);N.useEffect(()=>{var U;if(O&&w&&((U=w.answers[O])!=null&&U.provenanceGraph)){const W=Iy.create(),B=J_({registry:W,initialState:{}});w.answers[O].provenanceGraph&&(B.importObject(Og(w.answers[O].provenanceGraph)),c(l(!0)),F.current=B)}else c(l(!1))},[w,O,c,l]);const $=N.useCallback(U=>{var W;U&&(O&&w&&F.current&&(c(a(F.current.getState((W=w.answers[O].provenanceGraph)==null?void 0:W.nodes[U]))),F.current.to(U)),v(U))},[w,a,c,O]);N.useEffect(()=>{var B;if(!O||!w||!F.current||!((B=w.answers[O])!=null&&B.provenanceGraph))return;const U=w.answers[O].provenanceGraph;if(!U)return;if(!y||!U.nodes[y]){$(U.root);return}let W=U.nodes[y];for(;;)if(T<W.createdOn){if(oNt(W))break;{const q=W.parent;W=U.nodes[q]}}else if(W.children.length>0){const q=W.children[0];if(T>U.nodes[q].createdOn)W=U.nodes[q];else break}else break;W.id!==y&&$(W.id)},[$,y,w,n,T,O]);const V=N.useMemo(()=>(w==null?void 0:w.answers[O].startTime)||0,[w,O]);N.useEffect(()=>{b===0?e(""):T!==0&&e(`${_Q(T-V)} / ${_Q(b*1e3)}`)},[O,w,T,e,V,b]);const j=HT(),G=N.useRef(null),Y=N.useCallback(async U=>{if(G.current=U,U&&w&&j&&O&&r)try{const W=await r.getAudio(O,n);await U.load(W),R(!1),c(u(!0)),_(U.getDuration()),g(U.getWidth()),U.seekTo(0),U.on("redrawcomplete",()=>g(U.getWidth()))}catch(W){c(u(!1));const B=w.answers[O].endTime-w.answers[O].startTime;throw _(B>-1?B/1e3:0),c(u(!1)),new Error(W)}else c(u(!1)),_(0)},[w,j,O,r,n,c,u]),J=N.useCallback((U,W)=>{A(U),G.current&&W&&setTimeout(()=>{var B;(B=G.current)==null||B.seekTo(W)})},[A,G]);N.useEffect(()=>{G.current&&(i?G.current.play():G.current.pause())},[G,i]);const L=N.useMemo(()=>{var B,q;if(!w||!((B=w.answers[O])!=null&&B.startTime)||!((q=w.answers[O])!=null&&q.endTime))return null;const U=b>0?w.answers[O].startTime+b*1e3:w.answers[O].endTime;return ja([jq.left,p+jq.left+jq.right]).domain([w.answers[O].startTime,U]).clamp(!0)},[w,O,p,b]);return N.useEffect(()=>{Y(G.current)},[J,Y,w,n,G]),E.jsx($i,{wrap:"nowrap",gap:10,mx:10,children:E.jsxs(Ys,{ref:h,style:{width:"100%"},gap:0,children:[E.jsx(ma,{}),w!==null&&O?E.jsxs(Fe,{ref:k,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[E.jsx(g8e,{onMount:Y,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:E.jsx(y8e,{id:"waveform",height:50})}),I?E.jsx(Zc,{}):null]}):null,S==="success"&&w&&L&&O&&w.answers[O].provenanceGraph?E.jsx(Wpn,{xScale:L,trialName:O,setPlayTime:J,currentNode:y,setCurrentNode:$,participantData:w,width:m||p,height:25}):null,L&&w&&(s||o)?E.jsx(Ypn,{duration:b*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:w.answers[O].startTime,width:p,xScale:L,updateTimer:J}):null]})})}function Qpn(e,t){return t?t.getParticipantData(e):null}function Jpn(e){return e?e.getAllParticipantsData():null}function Zpn(){const[e]=Tb(),t=N.useMemo(()=>e.get("participantId")||void 0,[e]),n=nh(),r=th(),i=Sp(),{setAnalysisIsPlaying:s}=Bl(),o=ef(),a=vi(y=>y.analysisIsPlaying),{storageEngine:u}=Po(),{value:l,status:c}=M5(Qpn,[t,u]),{value:f}=M5(Jpn,[u]),[d,h]=N.useMemo(()=>{if(f&&l&&t&&n){const y=f.filter(w=>w.participantConfigHash===l.participantConfigHash),v=y.findIndex(w=>w.participantId===t),b=v<y.length-1?y[v+1]:y[0],_=v>0?y[v-1]:y[y.length-1];return[[b.participantId,hp(b.sequence).indexOf(n)],[_.participantId,hp(_.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=N.useMemo(()=>{const y={};return f==null||f.forEach(v=>{y[v.participantConfigHash]||(y[v.participantConfigHash]=new Set),y[v.participantConfigHash].add(v.participantId)}),Object.keys(y).sort((v,b)=>v===(l==null?void 0:l.participantConfigHash)?-1:b===(l==null?void 0:l.participantConfigHash)?1:0).map(v=>({group:`Config version: ${v}`,items:[...y[v]].map(b=>({value:b,label:b,disabled:v!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,g]=N.useState("");return E.jsx(Yi.Footer,{zIndex:101,withBorder:!1,children:E.jsxs(Fe,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[E.jsx(jf,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),E.jsx(Xpn,{setTimeString:g}),E.jsx(ma,{children:E.jsxs($i,{gap:"xs",style:{height:"50px"},children:[E.jsx(tt,{size:"sm",ff:"monospace",children:m}),E.jsx(L_,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?E.jsx(Apt,{}):E.jsx(Dpt,{})}),E.jsx(tt,{mx:"0",children:"Participant:"}),E.jsx(FT,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:y=>{i(`./${jh(0)}?participantId=${y}`,{relative:"path"})},data:p}),E.jsx(bn,{onClick:()=>i(`./${jh(+r-1)}?participantId=${t}`,{relative:"path"}),children:E.jsx(Ame,{})}),E.jsx(bn,{onClick:()=>i(`./${jh(+r+1)}?participantId=${t}`,{relative:"path"}),children:E.jsx(Dme,{})}),E.jsxs(bn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${jh(h[1])}?participantId=${h[0]}`),children:[E.jsx(Ame,{}),E.jsx(kme,{})]}),E.jsxs(bn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${jh(d[1])}?participantId=${d[0]}`),children:[E.jsx(kme,{}),E.jsx(Dme,{})]})]})})]})})}function emn(){const e=N.useRef([]),t=ny(),n=t.uiConfig.windowEventDebounceTime??100,r=vi(d=>d.showStudyBrowser),i=vi(d=>d.analysisHasAudio),s=vi(d=>d.analysisHasProvenance),o=vi(d=>d.modes);N.useEffect(()=>{const d=Dh(w=>{e.current.push([Date.now(),"focus",w.target instanceof HTMLElement?w.target.tagName:""])},n,{maxWait:n}),h=Dh(w=>{e.current.push([Date.now(),"input",w.data??""])},n,{maxWait:n}),p=Dh(w=>{e.current.push([Date.now(),"keypress",w.key])},n,{maxWait:n}),m=Dh(w=>{e.current.push([Date.now(),"mousedown",[w.clientX,w.clientY]])},n,{maxWait:n}),g=Dh(w=>{e.current.push([Date.now(),"mouseup",[w.clientX,w.clientY]])},n,{maxWait:n}),y=Dh(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Dh(w=>{e.current.push([Date.now(),"mousemove",[w.clientX,w.clientY]])},n,{maxWait:n}),b=Dh(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),_=Dh(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",_),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",_)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=N.useMemo(()=>o,[o]),c=N.useMemo(()=>u&&r,[u,r]),f=HT();return E.jsx(k3e.Provider,{value:e,children:E.jsxs(Yi,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[E.jsx(zpn,{}),E.jsx(jpn,{}),E.jsx(Upn,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),E.jsx(Vpn,{}),E.jsx(Hpn,{}),E.jsx(Yi.Main,{children:E.jsx($ht,{})}),f&&E.jsx(Zpn,{})]})})}function tmn(e,t=!1){return typeof e=="number"?YEe(e,t):YEe(e.length,t).map(r=>r.map(i=>e[i]))}function YEe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function jVe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=jVe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function nmn(e,t){const n=Og(e);return jVe(n,t,"root")}function UVe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&UVe(s,t,i,o)})}function rmn(e){const t=[];return UVe(e,t,"",0),t}function KEe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return tmn(i.sort(()=>.5-Math.random()),!0)}function XEe(e){const n=rmn(e.sequence).map(s=>({[s]:KEe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=nmn(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=KEe(e,o))})}),i}var imn=A3e;function smn(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function omn(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function amn(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function umn(e){return e.__COMMENTS__}function lmn(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var ij={EOL:imn.EOL||`
`,tryParseNumber:smn,createComment:omn,removeComment:amn,getComment:umn,forceComment:lmn},cmn="3.2.1";function fmn(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return QEe}else if(e.length===0)return QEe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return hmn(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),dmn.bind(null,n)}function dmn(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function QEe(){}function hmn(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function zVe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}zVe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function VVe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}VVe.description="parse hexadecimal numbers prefixed with 0x";function HVe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}HVe.description="support ISO dates";var hle={loadDsf:fmn,std:{math:zVe,hex:VVe,date:HVe}},pmn=function(e,t){var n=ij,r=hle,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var V,j=0,G=1;for(V=s-1;V>0&&i[V]!==`
`;V--,j++);for(;V>0;V--)i[V]===`
`&&G++;throw new Error($+" at line "+G+","+j+" >>>"+i.substr(s-j,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var V="",j=o;h();){if(o===j)return h(),$&&j==="'"&&o==="'"&&V.length===0?(h(),g()):V;if(o==="\\")if(h(),o==="u"){for(var G=0,Y=0;Y<4;Y++){h();var J=o.charCodeAt(0),L;o>="0"&&o<="9"?L=J-48:o>="a"&&o<="f"?L=J-97+10:o>="A"&&o<="F"?L=J-65+10:d("Bad \\u char "+o),G=G*16+L}V+=String.fromCharCode(G)}else if(typeof a[o]=="string")V+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):V+=o}d("Bad string")}function g(){for(var $="",V=0,j=0;;){var G=p(-j-5);if(!G||G===`
`)break;j++}function Y(){for(var J=j;o&&o<=" "&&o!==`
`&&J-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),Y());;){if(!o)d("Bad multiline string");else if(o==="'"){if(V++,h(),V===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;V>0;)$+="'",V--;o===`
`?($+=`
`,h(),Y()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",V=s,j=-1;;){if(o===":")return $?j>=0&&j!==$.length&&(s=V+j,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?j<0&&(j=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var V=o==="\r"||o===`
`||o==="";if(V||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var j=$[0];switch(j){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(j==="-"||j>="0"&&j<="9"){var G=n.tryParseNumber($);if(G!==void 0)return G}}if(V){$=$.trim();var Y=l($);return Y!==void 0?Y:$}}$+=o}}function _($,V){var j;for($--,j=s-2;j>$&&i[j]<=" "&&i[j]!==`
`;j--);i[j]===`
`&&j--,i[j]==="\r"&&j--;var G=i.substr($,j-$+1);for(j=0;j<G.length;j++)if(G[j]>" "){var Y=G.indexOf(`
`);if(Y>=0){var J=[G.substr(0,Y),G.substr(Y+1)];return V&&J[0].trim().length===0&&J.shift(),J}else return[G]}return[]}function w($){function V(G,Y){var J,L,U,W;switch(typeof G){case"string":G.indexOf(Y)>=0&&(W=G);break;case"object":if(Object.prototype.toString.apply(G)==="[object Array]")for(J=0,U=G.length;J<U;J++)W=V(G[J],Y)||W;else for(L in G)Object.prototype.hasOwnProperty.call(G,L)&&(W=V(G[L],Y)||W)}return W}function j(G){var Y=V($,G);return Y?"found '"+G+`' in a string value, your mistake could be with:
  > `+Y+`
  (unquoted strings contain everything up to the next line!)`:""}return j("}")||j("]")}function S(){var $=[],V,j,G;try{if(u&&(V=n.createComment($,{a:[]})),h(),j=s,v(),V&&(G=_(j,!0).join(`
`)),o==="]")return h(),V&&(V.e=[G]),$;for(;o;){if($.push(A()),j=s,v(),o===","&&(h(),j=s,v()),V){var Y=_(j);V.a.push([G||"",Y[0]||""]),G=Y[1]}if(o==="]")return h(),V&&(V.a[V.a.length-1][1]+=G||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(J){throw J.hint=J.hint||w($),J}}function T($){var V="",j={},G,Y,J;try{if(u&&(G=n.createComment(j,{c:{},o:[]})),$?Y=1:(h(),Y=s),v(),G&&(J=_(Y,!0).join(`
`)),o==="}"&&!$)return G&&(G.e=[J]),h(),j;for(;o;){if(V=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),j[V]=A(),Y=s,v(),o===","&&(h(),Y=s,v()),G){var L=_(Y);G.c[V]=[J||"",L[0]||""],J=L[1],G.o.push(V)}if(o==="}"&&!$)return h(),G&&(G.c[V][1]+=J||""),j;v()}if($)return j;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||w(j),U}}function A(){switch(v(),o){case"{":return T();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function k($,V){var j=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var G=V.join(`
`),Y=_(j).join(`
`);if(Y||G){var J=n.createComment($,n.getComment($));J.r=[G,Y]}}return $}function I(){v();var $=u?_(1):null;switch(o){case"{":return k(T(),$);case"[":return k(S(),$);default:return k(A(),$)}}function R(){v();var $=u?_(1):null;switch(o){case"{":return k(T(),$);case"[":return k(S(),$)}try{return k(T(!0),$)}catch(V){c();try{return k(A(),$)}catch{throw V}}}if(typeof e!="string")throw new Error("source is not a string");var F=null,O=!0;return t&&typeof t=="object"&&(u=t.keepWsc,F=t.dsf,O=t.legacyRoot!==!1),l=r.loadDsf(F,"parse"),i=e,c(),O?R():I()},mmn=function(e,t){var n=ij,r=hle,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var _,w="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+w+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+w+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+w+"]","g"),k=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,F="",O=0;function $(W,B){return O+=W[0].length+W[1].length-W[2]-W[3],W[0]+B+W[1]}function V(W){return W.replace(S,function(B){var q=I[B];return typeof q=="string"?$(g.esc,q):$(g.uni,("0000"+B.charCodeAt(0).toString(16)).slice(-4))})}function j(W,B,q,Z){return W?(T.lastIndex=0,k.lastIndex=0,c||q||T.test(W)||n.tryParseNumber(W,!0)!==void 0||k.test(W)?(S.lastIndex=0,A.lastIndex=0,S.test(W)?!A.test(W)&&!Z&&d?G(W,B):$(g.qstr,V(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function G(W,B){var q,Z=W.replace(/\r/g,"").split(`
`);if(B+=o,Z.length===1)return $(g.mstr,Z[0]);var re=s+B+g.mstr[0];for(q=0;q<Z.length;q++)re+=s,Z[q]&&(re+=B+Z[q]);return re+s+B+g.mstr[1]}function Y(W){return W?l||R.test(W)?(S.lastIndex=0,$(g.qkey,S.test(W)?V(W):W)):$(g.key,W):'""'}function J(W,B,q,Z){function re(Wt){return Wt&&Wt[Wt[0]==="\r"?1:0]===`
`}function xe(Wt){return Wt&&!re(Wt)}function pe(Wt,an,Sn){if(!Wt)return"";Wt=n.forceComment(Wt);var Mn,ki=Wt.length;for(Mn=0;Mn<ki&&Wt[Mn]<=" ";Mn++);return Sn&&Mn>0&&(Wt=Wt.substr(Mn)),Mn<ki?an+$(g.rem,Wt):Wt}var Te=_(W);if(Te!==void 0)return $(g.dsf,Te);switch(typeof W){case"string":return j(W,F,B,Z);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ke;a&&(ke=n.getComment(W));var it=Object.prototype.toString.apply(W)==="[object Array]",Re=F;F+=o;var ut=s+Re,Ke=s+F,Ct=q||u?"":ut,gt=[],Ie,Ve=f?[]:null,ft=c,_t=d,Mt=h?"":g.com[0],st=0,X,de,we,ae,he,Ee,$e,Be,lt;if(it){for(X=0,de=W.length;X<de;X++){if(Ie=X<de-1,ke?(Ee=ke.a[X]||[],$e=xe(Ee[1]),gt.push(pe(Ee[0],`
`)+Ke),Ve&&(Ee[0]||Ee[1]||$e)&&(Ve=null)):gt.push(Ke),O=0,ae=W[X],gt.push(J(ae,ke?$e:!1,!0)+(Ie?h:"")),Ve){switch(typeof ae){case"string":O=0,c=!0,d=0,Ve.push(J(ae,!1,!0)+(Ie?g.com[0]:"")),c=ft,d=_t;break;case"object":if(ae){Ve=null;break}default:Ve.push(gt[gt.length-1]+(Ie?Mt:""));break}Ie&&(O+=g.com[0].length-g.com[2]),st+=O}ke&&Ee[1]&&gt.push(pe(Ee[1],$e?" ":`
`,$e))}de===0?ke&&ke.e&&gt.push(pe(ke.e[0],`
`)+ut):gt.push(ut),gt.length===0?Be=$(g.arr,""):(Be=Ct+$(g.arr,gt.join("")),Ve&&(lt=Ve.join(" "),lt.length-st<=f&&(Be=$(g.arr,lt))))}else{var Je=ke?ke.o.slice():[],Xt=[];for(we in W)Object.prototype.hasOwnProperty.call(W,we)&&Je.indexOf(we)<0&&Xt.push(we);m&&Xt.sort();var fn=Je.concat(Xt);for(X=0,de=fn.length;X<de;X++)if(Ie=X<de-1,we=fn[X],ke?(Ee=ke.c[we]||[],$e=xe(Ee[1]),gt.push(pe(Ee[0],`
`)+Ke),Ve&&(Ee[0]||Ee[1]||$e)&&(Ve=null)):gt.push(Ke),O=0,ae=W[we],he=J(ae,ke&&$e),gt.push(Y(we)+g.col[0]+(re(he)?"":" ")+he+(Ie?h:"")),ke&&Ee[1]&&gt.push(pe(Ee[1],$e?" ":`
`,$e)),Ve){switch(typeof ae){case"string":O=0,c=!0,d=0,he=J(ae,!1),c=ft,d=_t,Ve.push(Y(we)+g.col[0]+" "+he+(Ie?g.com[0]:""));break;case"object":if(ae){Ve=null;break}default:Ve.push(gt[gt.length-1]+(Ie?Mt:""));break}O+=g.col[0].length-g.col[2],Ie&&(O+=g.com[0].length-g.com[2]),st+=O}de===0?ke&&ke.e&&gt.push(pe(ke.e[0],`
`)+ut):gt.push(ut),gt.length===0?Be=$(g.obj,""):(Be=Ct+$(g.obj,gt.join("")),Ve&&(lt=Ve.join(" "),lt.length-st<=f&&(Be=$(g.obj,lt))))}return F=Re,Be}}_=r.loadDsf(p,"stringify");var L="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&(L=U[0]+`
`),L+=J(e,null,!0,!0),U&&(L+=U[1]||""),L},VS=ij;function jk(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function EQ(e,t){if(!(e===null||typeof e!="object")){var n=VS.getComment(e);n&&VS.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)JEe(o.a,r,n.a[r],EQ(e[r]))&&(s=!0);!s&&n.e&&(o.e=jk(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];JEe(o.s,l,n.c[l],EQ(e[l]))&&(s=!0)}!s&&n.e&&(o.e=jk(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=jk(n.r[0],n.r[1])),s?o:void 0}}function gmn(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function ymn(e,t){var n=[];if(SQ(e,t,n,[]),n.length>0){var r=N$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+gmn(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),N$(t,r,1)}}function JEe(e,t,n,r){var i=jk(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function Uk(e,t){var n=jk(t.b,t.a);return n.path=e,n}function zk(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(Uk(s,o)),zk(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(Uk(u,l)),zk(l.x,t,u))});e.e&&t.push(Uk(n,e.e))}}function SQ(e,t,n,r){if(e){if(t===null||typeof t!="object"){zk(e,n,r);return}var i,s=VS.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],SQ(u.x,t[i],n,l)):(n.push(Uk(l,u)),zk(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],SQ(d.x,t[c],n,f))):d&&(n.push(Uk(f,d)),zk(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function N$(e,t,n){var r=VS.createComment(e,VS.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=VS.forceComment(t)),r.r[n]||""}var vmn={extract:function(e){return EQ(e,!0)},merge:ymn,header:function(e,t){return N$(e,t,0)},footer:function(e,t){return N$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var ZEe=ij,bmn=cmn,e2e=pmn,t2e=mmn,xmn=vmn,wmn=hle,sj={parse:e2e,stringify:t2e,endOfLine:function(){return ZEe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(ZEe.EOL=e)},version:bmn,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,e2e(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,t2e(e,t)}},comments:xmn,dsf:wmn.std},CQ={exports:{}},qVe={},up={},fT={},DP={},Ar={},P3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,_)=>`${b}${_}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,_)=>(_ instanceof n&&(b[_.str]=(b[_.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let _=0;for(;_<v.length;)a(b,v[_]),b.push(y[++_]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let _=0;for(;_<v.length;)b.push(s),a(b,v[_]),b.push(s,h(y[++_]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(P3);var TQ={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=P3;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(TQ);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=P3,n=TQ;var r=P3;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=TQ;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,Z){return this}}class o extends s{constructor(q,Z,re){super(),this.varKind=q,this.name=Z,this.rhs=re}render({es5:q,_n:Z}){const re=q?n.varKinds.var:this.varKind,xe=this.rhs===void 0?"":` = ${this.rhs}`;return`${re} ${this.name}${xe};`+Z}optimizeNames(q,Z){if(q[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,q,Z)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,Z,re){super(),this.lhs=q,this.rhs=Z,this.sideEffects=re}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,Z){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,q,Z),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return O(q,this.rhs)}}class u extends a{constructor(q,Z,re,xe){super(q,re,xe),this.op=Z}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,Z){return this.code=$(this.code,q,Z),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((Z,re)=>Z+re.render(q),"")}optimizeNodes(){const{nodes:q}=this;let Z=q.length;for(;Z--;){const re=q[Z].optimizeNodes();Array.isArray(re)?q.splice(Z,1,...re):re?q[Z]=re:q.splice(Z,1)}return q.length>0?this:void 0}optimizeNames(q,Z){const{nodes:re}=this;let xe=re.length;for(;xe--;){const pe=re[xe];pe.optimizeNames(q,Z)||(V(q,pe.names),re.splice(xe,1))}return re.length>0?this:void 0}get names(){return this.nodes.reduce((q,Z)=>F(q,Z.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,Z){super(Z),this.condition=q}render(q){let Z=`if(${this.condition})`+super.render(q);return this.else&&(Z+="else "+this.else.render(q)),Z}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let Z=this.else;if(Z){const re=Z.optimizeNodes();Z=this.else=Array.isArray(re)?new g(re):re}if(Z)return q===!1?Z instanceof y?Z:Z.nodes:this.nodes.length?this:new y(j(q),Z instanceof y?[Z]:Z.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,Z){var re;if(this.else=(re=this.else)===null||re===void 0?void 0:re.optimizeNames(q,Z),!!(super.optimizeNames(q,Z)||this.else))return this.condition=$(this.condition,q,Z),this}get names(){const q=super.names;return O(q,this.condition),this.else&&F(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,Z){if(super.optimizeNames(q,Z))return this.iteration=$(this.iteration,q,Z),this}get names(){return F(super.names,this.iteration.names)}}class _ extends v{constructor(q,Z,re,xe){super(),this.varKind=q,this.name=Z,this.from=re,this.to=xe}render(q){const Z=q.es5?n.varKinds.var:this.varKind,{name:re,from:xe,to:pe}=this;return`for(${Z} ${re}=${xe}; ${re}<${pe}; ${re}++)`+super.render(q)}get names(){const q=O(super.names,this.from);return O(q,this.to)}}class w extends v{constructor(q,Z,re,xe){super(),this.loop=q,this.varKind=Z,this.name=re,this.iterable=xe}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,Z){if(super.optimizeNames(q,Z))return this.iterable=$(this.iterable,q,Z),this}get names(){return F(super.names,this.iterable.names)}}class S extends p{constructor(q,Z,re){super(),this.name=q,this.args=Z,this.async=re}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}S.kind="func";class T extends h{render(q){return"return "+super.render(q)}}T.kind="return";class A extends p{render(q){let Z="try"+super.render(q);return this.catch&&(Z+=this.catch.render(q)),this.finally&&(Z+=this.finally.render(q)),Z}optimizeNodes(){var q,Z;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(Z=this.finally)===null||Z===void 0||Z.optimizeNodes(),this}optimizeNames(q,Z){var re,xe;return super.optimizeNames(q,Z),(re=this.catch)===null||re===void 0||re.optimizeNames(q,Z),(xe=this.finally)===null||xe===void 0||xe.optimizeNames(q,Z),this}get names(){const q=super.names;return this.catch&&F(q,this.catch.names),this.finally&&F(q,this.finally.names),q}}class k extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}k.kind="catch";class I extends p{render(q){return"finally"+super.render(q)}}I.kind="finally";class R{constructor(q,Z={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Z,_n:Z.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,Z){const re=this._extScope.value(q,Z);return(this._values[re.prefix]||(this._values[re.prefix]=new Set)).add(re),re}getScopeValue(q,Z){return this._extScope.getValue(q,Z)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,Z,re,xe){const pe=this._scope.toName(Z);return re!==void 0&&xe&&(this._constants[pe.str]=re),this._leafNode(new o(q,pe,re)),pe}const(q,Z,re){return this._def(n.varKinds.const,q,Z,re)}let(q,Z,re){return this._def(n.varKinds.let,q,Z,re)}var(q,Z,re){return this._def(n.varKinds.var,q,Z,re)}assign(q,Z,re){return this._leafNode(new a(q,Z,re))}add(q,Z){return this._leafNode(new u(q,e.operators.ADD,Z))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const Z=["{"];for(const[re,xe]of q)Z.length>1&&Z.push(","),Z.push(re),(re!==xe||this.opts.es5)&&(Z.push(":"),(0,t.addCodeArg)(Z,xe));return Z.push("}"),new t._Code(Z)}if(q,Z,re){if(this._blockNode(new y(q)),Z&&re)this.code(Z).else().code(re).endIf();else if(Z)this.code(Z).endIf();else if(re)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,Z){return this._blockNode(q),Z&&this.code(Z).endFor(),this}for(q,Z){return this._for(new b(q),Z)}forRange(q,Z,re,xe,pe=this.opts.es5?n.varKinds.var:n.varKinds.let){const Te=this._scope.toName(q);return this._for(new _(pe,Te,Z,re),()=>xe(Te))}forOf(q,Z,re,xe=n.varKinds.const){const pe=this._scope.toName(q);if(this.opts.es5){const Te=Z instanceof t.Name?Z:this.var("_arr",Z);return this.forRange("_i",0,(0,t._)`${Te}.length`,ke=>{this.var(pe,(0,t._)`${Te}[${ke}]`),re(pe)})}return this._for(new w("of",xe,pe,Z),()=>re(pe))}forIn(q,Z,re,xe=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${Z})`,re);const pe=this._scope.toName(q);return this._for(new w("in",xe,pe,Z),()=>re(pe))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const Z=new T;if(this._blockNode(Z),this.code(q),Z.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(q,Z,re){if(!Z&&!re)throw new Error('CodeGen: "try" without "catch" and "finally"');const xe=new A;if(this._blockNode(xe),this.code(q),Z){const pe=this.name("e");this._currNode=xe.catch=new k(pe),Z(pe)}return re&&(this._currNode=xe.finally=new I,this.code(re)),this._endBlockNode(k,I)}throw(q){return this._leafNode(new f(q))}block(q,Z){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(Z),this}endBlock(q){const Z=this._blockStarts.pop();if(Z===void 0)throw new Error("CodeGen: not in self-balancing block");const re=this._nodes.length-Z;if(re<0||q!==void 0&&re!==q)throw new Error(`CodeGen: wrong number of nodes: ${re} vs ${q} expected`);return this._nodes.length=Z,this}func(q,Z=t.nil,re,xe){return this._blockNode(new S(q,Z,re)),xe&&this.code(xe).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,Z){const re=this._currNode;if(re instanceof q||Z&&re instanceof Z)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Z?`${q.kind}/${Z.kind}`:q.kind}"`)}_elseNode(q){const Z=this._currNode;if(!(Z instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=Z.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const Z=this._nodes;Z[Z.length-1]=q}}e.CodeGen=R;function F(B,q){for(const Z in q)B[Z]=(B[Z]||0)+(q[Z]||0);return B}function O(B,q){return q instanceof t._CodeOrName?F(B,q.names):B}function $(B,q,Z){if(B instanceof t.Name)return re(B);if(!xe(B))return B;return new t._Code(B._items.reduce((pe,Te)=>(Te instanceof t.Name&&(Te=re(Te)),Te instanceof t._Code?pe.push(...Te._items):pe.push(Te),pe),[]));function re(pe){const Te=Z[pe.str];return Te===void 0||q[pe.str]!==1?pe:(delete q[pe.str],Te)}function xe(pe){return pe instanceof t._Code&&pe._items.some(Te=>Te instanceof t.Name&&q[Te.str]===1&&Z[Te.str]!==void 0)}}function V(B,q){for(const Z in q)B[Z]=(B[Z]||0)-(q[Z]||0)}function j(B){return typeof B=="boolean"||typeof B=="number"||B===null?!B:(0,t._)`!${W(B)}`}e.not=j;const G=U(e.operators.AND);function Y(...B){return B.reduce(G)}e.and=Y;const J=U(e.operators.OR);function L(...B){return B.reduce(J)}e.or=L;function U(B){return(q,Z)=>q===t.nil?Z:Z===t.nil?q:(0,t._)`${W(q)} ${B} ${W(Z)}`}function W(B){return B instanceof t.Name?B:(0,t._)`(${B})`}})(Ar);var qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.checkStrictMode=qt.getErrorPath=qt.Type=qt.useFunc=qt.setEvaluated=qt.evaluatedPropsToName=qt.mergeEvaluated=qt.eachItem=qt.unescapeJsonPointer=qt.escapeJsonPointer=qt.escapeFragment=qt.unescapeFragment=qt.schemaRefOrVal=qt.schemaHasRulesButRef=qt.schemaHasRules=qt.checkUnknownRules=qt.alwaysValidSchema=qt.toHash=void 0;const ss=Ar,_mn=P3;function Emn(e){const t={};for(const n of e)t[n]=!0;return t}qt.toHash=Emn;function Smn(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(WVe(e,t),!GVe(t,e.self.RULES.all))}qt.alwaysValidSchema=Smn;function WVe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||XVe(e,`unknown keyword: "${s}"`)}qt.checkUnknownRules=WVe;function GVe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}qt.schemaHasRules=GVe;function Cmn(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}qt.schemaHasRulesButRef=Cmn;function Tmn({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,ss._)`${n}`}return(0,ss._)`${e}${t}${(0,ss.getProperty)(r)}`}qt.schemaRefOrVal=Tmn;function Amn(e){return YVe(decodeURIComponent(e))}qt.unescapeFragment=Amn;function Dmn(e){return encodeURIComponent(ple(e))}qt.escapeFragment=Dmn;function ple(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}qt.escapeJsonPointer=ple;function YVe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}qt.unescapeJsonPointer=YVe;function Imn(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}qt.eachItem=Imn;function n2e({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof ss.Name?(s instanceof ss.Name?e(i,s,o):t(i,s,o),o):s instanceof ss.Name?(t(i,o,s),s):n(s,o);return a===ss.Name&&!(u instanceof ss.Name)?r(i,u):u}}qt.mergeEvaluated={props:n2e({mergeNames:(e,t,n)=>e.if((0,ss._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,ss._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,ss._)`${n} || {}`).code((0,ss._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,ss._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,ss._)`${n} || {}`),mle(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:KVe}),items:n2e({mergeNames:(e,t,n)=>e.if((0,ss._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,ss._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,ss._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,ss._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function KVe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,ss._)`{}`);return t!==void 0&&mle(e,n,t),n}qt.evaluatedPropsToName=KVe;function mle(e,t,n){Object.keys(n).forEach(r=>e.assign((0,ss._)`${t}${(0,ss.getProperty)(r)}`,!0))}qt.setEvaluated=mle;const r2e={};function kmn(e,t){return e.scopeValue("func",{ref:t,code:r2e[t.code]||(r2e[t.code]=new _mn._Code(t.code))})}qt.useFunc=kmn;var AQ;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(AQ||(qt.Type=AQ={}));function Rmn(e,t,n){if(e instanceof ss.Name){const r=t===AQ.Num;return n?r?(0,ss._)`"[" + ${e} + "]"`:(0,ss._)`"['" + ${e} + "']"`:r?(0,ss._)`"/" + ${e}`:(0,ss._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,ss.getProperty)(e).toString():"/"+ple(e)}qt.getErrorPath=Rmn;function XVe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}qt.checkStrictMode=XVe;var D0={};Object.defineProperty(D0,"__esModule",{value:!0});const Ru=Ar,Nmn={data:new Ru.Name("data"),valCxt:new Ru.Name("valCxt"),instancePath:new Ru.Name("instancePath"),parentData:new Ru.Name("parentData"),parentDataProperty:new Ru.Name("parentDataProperty"),rootData:new Ru.Name("rootData"),dynamicAnchors:new Ru.Name("dynamicAnchors"),vErrors:new Ru.Name("vErrors"),errors:new Ru.Name("errors"),this:new Ru.Name("this"),self:new Ru.Name("self"),scope:new Ru.Name("scope"),json:new Ru.Name("json"),jsonPos:new Ru.Name("jsonPos"),jsonLen:new Ru.Name("jsonLen"),jsonPart:new Ru.Name("jsonPart")};D0.default=Nmn;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Ar,n=qt,r=D0;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:_}=g,{gen:w,compositeRule:S,allErrors:T}=_,A=f(g,y,v);b??(S||T)?u(w,A):l(_,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:_,compositeRule:w,allErrors:S}=b,T=f(g,y,v);u(_,T),w||S||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:_,it:w}){if(_===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",_,r.default.errors,T=>{g.const(S,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,w.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${w.errSchemaPath}/${y}`),w.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:_}=g;_.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:_}=g,w=[h(_,v),p(g,v)];return m(g,y,w),b.object(...w)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let _=b?y:(0,t.str)`${y}/${g}`;return v&&(_=(0,t.str)`${_}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,_]}function m(g,{params:y,message:v},b){const{keyword:_,data:w,schemaValue:S,it:T}=g,{opts:A,propertyName:k,topSchemaRef:I,schemaPath:R}=T;b.push([c.keyword,_],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${I}${R}`],[r.default.data,w]),k&&b.push([c.propertyName,k])}})(DP);Object.defineProperty(fT,"__esModule",{value:!0});fT.boolOrEmptySchema=fT.topBoolOrEmptySchema=void 0;const Pmn=DP,Omn=Ar,Fmn=D0,Mmn={message:"boolean schema is false"};function $mn(e){const{gen:t,schema:n,validateName:r}=e;n===!1?QVe(e,!1):typeof n=="object"&&n.$async===!0?t.return(Fmn.default.data):(t.assign((0,Omn._)`${r}.errors`,null),t.return(!0))}fT.topBoolOrEmptySchema=$mn;function Lmn(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),QVe(e)):n.var(t,!0)}fT.boolOrEmptySchema=Lmn;function QVe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Pmn.reportError)(i,Mmn,void 0,t)}var ra={},S_={};Object.defineProperty(S_,"__esModule",{value:!0});S_.getRules=S_.isJSONType=void 0;const Bmn=["string","number","integer","boolean","null","object","array"],jmn=new Set(Bmn);function Umn(e){return typeof e=="string"&&jmn.has(e)}S_.isJSONType=Umn;function zmn(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}S_.getRules=zmn;var Vg={};Object.defineProperty(Vg,"__esModule",{value:!0});Vg.shouldUseRule=Vg.shouldUseGroup=Vg.schemaHasRulesForType=void 0;function Vmn({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&JVe(e,r)}Vg.schemaHasRulesForType=Vmn;function JVe(e,t){return t.rules.some(n=>ZVe(e,n))}Vg.shouldUseGroup=JVe;function ZVe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Vg.shouldUseRule=ZVe;Object.defineProperty(ra,"__esModule",{value:!0});ra.reportTypeError=ra.checkDataTypes=ra.checkDataType=ra.coerceAndCheckDataType=ra.getJSONTypes=ra.getSchemaTypes=ra.DataType=void 0;const Hmn=S_,qmn=Vg,Wmn=DP,dr=Ar,eHe=qt;var HS;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(HS||(ra.DataType=HS={}));function Gmn(e){const t=tHe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ra.getSchemaTypes=Gmn;function tHe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Hmn.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ra.getJSONTypes=tHe;function Ymn(e,t){const{gen:n,data:r,opts:i}=e,s=Kmn(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,qmn.schemaHasRulesForType)(e,t[0]));if(o){const a=gle(t,r,i.strictNumbers,HS.Wrong);n.if(a,()=>{s.length?Xmn(e,t,s):yle(e)})}return o}ra.coerceAndCheckDataType=Ymn;const nHe=new Set(["string","number","integer","boolean","null"]);function Kmn(e,t){return t?e.filter(n=>nHe.has(n)||t==="array"&&n==="array"):[]}function Xmn(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,dr._)`typeof ${i}`),a=r.let("coerced",(0,dr._)`undefined`);s.coerceTypes==="array"&&r.if((0,dr._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,dr._)`${i}[0]`).assign(o,(0,dr._)`typeof ${i}`).if(gle(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,dr._)`${a} !== undefined`);for(const l of n)(nHe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),yle(e),r.endIf(),r.if((0,dr._)`${a} !== undefined`,()=>{r.assign(i,a),Qmn(e,a)});function u(l){switch(l){case"string":r.elseIf((0,dr._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,dr._)`"" + ${i}`).elseIf((0,dr._)`${i} === null`).assign(a,(0,dr._)`""`);return;case"number":r.elseIf((0,dr._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,dr._)`+${i}`);return;case"integer":r.elseIf((0,dr._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,dr._)`+${i}`);return;case"boolean":r.elseIf((0,dr._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,dr._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,dr._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,dr._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,dr._)`[${i}]`)}}}function Qmn({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,dr._)`${t} !== undefined`,()=>e.assign((0,dr._)`${t}[${n}]`,r))}function DQ(e,t,n,r=HS.Correct){const i=r===HS.Correct?dr.operators.EQ:dr.operators.NEQ;let s;switch(e){case"null":return(0,dr._)`${t} ${i} null`;case"array":s=(0,dr._)`Array.isArray(${t})`;break;case"object":s=(0,dr._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,dr._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,dr._)`typeof ${t} ${i} ${e}`}return r===HS.Correct?s:(0,dr.not)(s);function o(a=dr.nil){return(0,dr.and)((0,dr._)`typeof ${t} == "number"`,a,n?(0,dr._)`isFinite(${t})`:dr.nil)}}ra.checkDataType=DQ;function gle(e,t,n,r){if(e.length===1)return DQ(e[0],t,n,r);let i;const s=(0,eHe.toHash)(e);if(s.array&&s.object){const o=(0,dr._)`typeof ${t} != "object"`;i=s.null?o:(0,dr._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=dr.nil;s.number&&delete s.integer;for(const o in s)i=(0,dr.and)(i,DQ(o,t,n,r));return i}ra.checkDataTypes=gle;const Jmn={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,dr._)`{type: ${e}}`:(0,dr._)`{type: ${t}}`};function yle(e){const t=Zmn(e);(0,Wmn.reportError)(t,Jmn)}ra.reportTypeError=yle;function Zmn(e){const{gen:t,data:n,schema:r}=e,i=(0,eHe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var oj={};Object.defineProperty(oj,"__esModule",{value:!0});oj.assignDefaults=void 0;const g2=Ar,e0n=qt;function t0n(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)i2e(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>i2e(e,s,i.default))}oj.assignDefaults=t0n;function i2e(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,g2._)`${s}${(0,g2.getProperty)(t)}`;if(i){(0,e0n.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,g2._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,g2._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,g2._)`${a} = ${(0,g2.stringify)(n)}`)}var Em={},Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.validateUnion=Cr.validateArray=Cr.usePattern=Cr.callValidateCode=Cr.schemaProperties=Cr.allSchemaProperties=Cr.noPropertyInData=Cr.propertyInData=Cr.isOwnProperty=Cr.hasPropFunc=Cr.reportMissingProp=Cr.checkMissingProp=Cr.checkReportMissingProp=void 0;const Es=Ar,vle=qt,o1=D0,n0n=qt;function r0n(e,t){const{gen:n,data:r,it:i}=e;n.if(xle(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Es._)`${t}`},!0),e.error()})}Cr.checkReportMissingProp=r0n;function i0n({gen:e,data:t,it:{opts:n}},r,i){return(0,Es.or)(...r.map(s=>(0,Es.and)(xle(e,t,s,n.ownProperties),(0,Es._)`${i} = ${s}`)))}Cr.checkMissingProp=i0n;function s0n(e,t){e.setParams({missingProperty:t},!0),e.error()}Cr.reportMissingProp=s0n;function rHe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Es._)`Object.prototype.hasOwnProperty`})}Cr.hasPropFunc=rHe;function ble(e,t,n){return(0,Es._)`${rHe(e)}.call(${t}, ${n})`}Cr.isOwnProperty=ble;function o0n(e,t,n,r){const i=(0,Es._)`${t}${(0,Es.getProperty)(n)} !== undefined`;return r?(0,Es._)`${i} && ${ble(e,t,n)}`:i}Cr.propertyInData=o0n;function xle(e,t,n,r){const i=(0,Es._)`${t}${(0,Es.getProperty)(n)} === undefined`;return r?(0,Es.or)(i,(0,Es.not)(ble(e,t,n))):i}Cr.noPropertyInData=xle;function iHe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Cr.allSchemaProperties=iHe;function a0n(e,t){return iHe(t).filter(n=>!(0,vle.alwaysValidSchema)(e,t[n]))}Cr.schemaProperties=a0n;function u0n({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,Es._)`${e}, ${t}, ${r}${i}`:t,f=[[o1.default.instancePath,(0,Es.strConcat)(o1.default.instancePath,s)],[o1.default.parentData,o.parentData],[o1.default.parentDataProperty,o.parentDataProperty],[o1.default.rootData,o1.default.rootData]];o.opts.dynamicRef&&f.push([o1.default.dynamicAnchors,o1.default.dynamicAnchors]);const d=(0,Es._)`${c}, ${n.object(...f)}`;return u!==Es.nil?(0,Es._)`${a}.call(${u}, ${d})`:(0,Es._)`${a}(${d})`}Cr.callValidateCode=u0n;const l0n=(0,Es._)`new RegExp`;function c0n({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Es._)`${i.code==="new RegExp"?l0n:(0,n0n.useFunc)(e,i)}(${n}, ${r})`})}Cr.usePattern=c0n;function f0n(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,Es._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:vle.Type.Num},s),t.if((0,Es.not)(s),a)})}}Cr.validateArray=f0n;function d0n(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,vle.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,Es._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Es.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Cr.validateUnion=d0n;Object.defineProperty(Em,"__esModule",{value:!0});Em.validateKeywordUsage=Em.validSchemaType=Em.funcKeywordCode=Em.macroKeywordCode=void 0;const _l=Ar,rw=D0,h0n=Cr,p0n=DP;function m0n(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=sHe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:_l.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Em.macroKeywordCode=m0n;function g0n(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;v0n(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=sHe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&s2e(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&s2e(e),g(()=>y0n(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,_l._)`await `),v=>r.assign(f,!1).if((0,_l._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,_l._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,_l._)`${c}.errors`;return r.assign(y,null),m(_l.nil),y}function m(y=t.async?(0,_l._)`await `:_l.nil){const v=u.opts.passContext?rw.default.this:rw.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,_l._)`${y}${(0,h0n.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,_l.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Em.funcKeywordCode=g0n;function s2e(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,_l._)`${r.parentData}[${r.parentDataProperty}]`))}function y0n(e,t){const{gen:n}=e;n.if((0,_l._)`Array.isArray(${t})`,()=>{n.assign(rw.default.vErrors,(0,_l._)`${rw.default.vErrors} === null ? ${t} : ${rw.default.vErrors}.concat(${t})`).assign(rw.default.errors,(0,_l._)`${rw.default.vErrors}.length`),(0,p0n.extendErrors)(e)},()=>e.error())}function v0n({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function sHe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,_l.stringify)(n)})}function b0n(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Em.validSchemaType=b0n;function x0n({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Em.validateKeywordUsage=x0n;var wv={};Object.defineProperty(wv,"__esModule",{value:!0});wv.extendSubschemaMode=wv.extendSubschemaData=wv.getSubschema=void 0;const bm=Ar,oHe=qt;function w0n(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,bm._)`${e.schemaPath}${(0,bm.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,bm._)`${e.schemaPath}${(0,bm.getProperty)(t)}${(0,bm.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,oHe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}wv.getSubschema=w0n;function _0n(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,bm._)`${t.data}${(0,bm.getProperty)(n)}`,!0);u(d),e.errorPath=(0,bm.str)`${l}${(0,oHe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,bm._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof bm.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}wv.extendSubschemaData=_0n;function E0n(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}wv.extendSubschemaMode=E0n;var ru={},aHe={exports:{}},Z1=aHe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};VF(t,r,i,e,"",e)};Z1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Z1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Z1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Z1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function VF(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Z1.arrayKeywords)for(var d=0;d<f.length;d++)VF(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Z1.propsKeywords){if(f&&typeof f=="object")for(var h in f)VF(e,t,n,f[h],i+"/"+c+"/"+S0n(h),s,i,c,r,h)}else(c in Z1.keywords||e.allKeys&&!(c in Z1.skipKeywords))&&VF(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function S0n(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var C0n=aHe.exports;Object.defineProperty(ru,"__esModule",{value:!0});ru.getSchemaRefs=ru.resolveUrl=ru.normalizeId=ru._getFullPath=ru.getFullPath=ru.inlineRef=void 0;const T0n=qt,A0n=Rte,D0n=C0n,I0n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function k0n(e,t=!0){return typeof e=="boolean"?!0:t===!0?!IQ(e):t?uHe(e)<=t:!1}ru.inlineRef=k0n;const R0n=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function IQ(e){for(const t in e){if(R0n.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(IQ)||typeof n=="object"&&IQ(n))return!0}return!1}function uHe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!I0n.has(n)&&(typeof e[n]=="object"&&(0,T0n.eachItem)(e[n],r=>t+=uHe(r)),t===1/0))return 1/0}return t}function lHe(e,t="",n){n!==!1&&(t=qS(t));const r=e.parse(t);return cHe(e,r)}ru.getFullPath=lHe;function cHe(e,t){return e.serialize(t).split("#")[0]+"#"}ru._getFullPath=cHe;const N0n=/#\/?$/;function qS(e){return e?e.replace(N0n,""):""}ru.normalizeId=qS;function P0n(e,t,n){return n=qS(n),e.resolve(t,n)}ru.resolveUrl=P0n;const O0n=/^[a-z_][-a-z0-9._]*$/i;function F0n(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=qS(e[n]||t),s={"":i},o=lHe(r,i,!1),a={},u=new Set;return D0n(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const _=this.opts.uriResolver.resolve;if(b=qS(g?_(g,b):b),u.has(b))throw c(b);u.add(b);let w=this.refs[b];return typeof w=="string"&&(w=this.refs[w]),typeof w=="object"?l(f,w.schema,b):b!==qS(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!O0n.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!A0n(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}ru.getSchemaRefs=F0n;Object.defineProperty(up,"__esModule",{value:!0});up.getData=up.KeywordCxt=up.validateFunctionCode=void 0;const fHe=fT,o2e=ra,wle=Vg,P$=ra,M0n=oj,Vk=Em,Uq=wv,ln=Ar,Hn=D0,$0n=ru,Hg=qt,ZD=DP;function L0n(e){if(pHe(e)&&(mHe(e),hHe(e))){U0n(e);return}dHe(e,()=>(0,fHe.topBoolOrEmptySchema)(e))}up.validateFunctionCode=L0n;function dHe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,ln._)`${Hn.default.data}, ${Hn.default.valCxt}`,r.$async,()=>{e.code((0,ln._)`"use strict"; ${a2e(n,i)}`),j0n(e,i),e.code(s)}):e.func(t,(0,ln._)`${Hn.default.data}, ${B0n(i)}`,r.$async,()=>e.code(a2e(n,i)).code(s))}function B0n(e){return(0,ln._)`{${Hn.default.instancePath}="", ${Hn.default.parentData}, ${Hn.default.parentDataProperty}, ${Hn.default.rootData}=${Hn.default.data}${e.dynamicRef?(0,ln._)`, ${Hn.default.dynamicAnchors}={}`:ln.nil}}={}`}function j0n(e,t){e.if(Hn.default.valCxt,()=>{e.var(Hn.default.instancePath,(0,ln._)`${Hn.default.valCxt}.${Hn.default.instancePath}`),e.var(Hn.default.parentData,(0,ln._)`${Hn.default.valCxt}.${Hn.default.parentData}`),e.var(Hn.default.parentDataProperty,(0,ln._)`${Hn.default.valCxt}.${Hn.default.parentDataProperty}`),e.var(Hn.default.rootData,(0,ln._)`${Hn.default.valCxt}.${Hn.default.rootData}`),t.dynamicRef&&e.var(Hn.default.dynamicAnchors,(0,ln._)`${Hn.default.valCxt}.${Hn.default.dynamicAnchors}`)},()=>{e.var(Hn.default.instancePath,(0,ln._)`""`),e.var(Hn.default.parentData,(0,ln._)`undefined`),e.var(Hn.default.parentDataProperty,(0,ln._)`undefined`),e.var(Hn.default.rootData,Hn.default.data),t.dynamicRef&&e.var(Hn.default.dynamicAnchors,(0,ln._)`{}`)})}function U0n(e){const{schema:t,opts:n,gen:r}=e;dHe(e,()=>{n.$comment&&t.$comment&&yHe(e),W0n(e),r.let(Hn.default.vErrors,null),r.let(Hn.default.errors,0),n.unevaluated&&z0n(e),gHe(e),K0n(e)})}function z0n(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,ln._)`${n}.evaluated`),t.if((0,ln._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,ln._)`${e.evaluated}.props`,(0,ln._)`undefined`)),t.if((0,ln._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,ln._)`${e.evaluated}.items`,(0,ln._)`undefined`))}function a2e(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,ln._)`/*# sourceURL=${n} */`:ln.nil}function V0n(e,t){if(pHe(e)&&(mHe(e),hHe(e))){H0n(e,t);return}(0,fHe.boolOrEmptySchema)(e,t)}function hHe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function pHe(e){return typeof e.schema!="boolean"}function H0n(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&yHe(e),G0n(e),Y0n(e);const s=r.const("_errs",Hn.default.errors);gHe(e,s),r.var(t,(0,ln._)`${s} === ${Hn.default.errors}`)}function mHe(e){(0,Hg.checkUnknownRules)(e),q0n(e)}function gHe(e,t){if(e.opts.jtd)return u2e(e,[],!1,t);const n=(0,o2e.getSchemaTypes)(e.schema),r=(0,o2e.coerceAndCheckDataType)(e,n);u2e(e,n,!r,t)}function q0n(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Hg.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function W0n(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Hg.checkStrictMode)(e,"default is ignored in the schema root")}function G0n(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,$0n.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Y0n(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function yHe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,ln._)`${Hn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,ln.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,ln._)`${Hn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function K0n(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,ln._)`${Hn.default.errors} === 0`,()=>t.return(Hn.default.data),()=>t.throw((0,ln._)`new ${i}(${Hn.default.vErrors})`)):(t.assign((0,ln._)`${r}.errors`,Hn.default.vErrors),s.unevaluated&&X0n(e),t.return((0,ln._)`${Hn.default.errors} === 0`))}function X0n({gen:e,evaluated:t,props:n,items:r}){n instanceof ln.Name&&e.assign((0,ln._)`${t}.props`,n),r instanceof ln.Name&&e.assign((0,ln._)`${t}.items`,r)}function u2e(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Hg.schemaHasRulesButRef)(s,c))){i.block(()=>xHe(e,"$ref",c.all.$ref.definition));return}u.jtd||Q0n(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,wle.shouldUseGroup)(s,d)&&(d.type?(i.if((0,P$.checkDataType)(d.type,o,u.strictNumbers)),l2e(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,P$.reportTypeError)(e)),i.endIf()):l2e(e,d),a||i.if((0,ln._)`${Hn.default.errors} === ${r||0}`))}}function l2e(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,M0n.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,wle.shouldUseRule)(r,s)&&xHe(e,s.keyword,s.definition,t.type)})}function Q0n(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(J0n(e,t),e.opts.allowUnionTypes||Z0n(e,t),egn(e,e.dataTypes))}function J0n(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{vHe(e.dataTypes,n)||_le(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),ngn(e,t)}}function Z0n(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&_le(e,"use allowUnionTypes to allow union type keyword")}function egn(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,wle.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>tgn(t,o))&&_le(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function tgn(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function vHe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function ngn(e,t){const n=[];for(const r of e.dataTypes)vHe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function _le(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Hg.checkStrictMode)(e,t,e.opts.strictTypes)}class bHe{constructor(t,n,r){if((0,Vk.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Hg.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",wHe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Vk.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Hn.default.errors))}result(t,n,r){this.failResult((0,ln.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,ln.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,ln._)`${n} !== undefined && (${(0,ln.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?ZD.reportExtraError:ZD.reportError)(this,this.def.error,n)}$dataError(){(0,ZD.reportError)(this,this.def.$dataError||ZD.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,ZD.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=ln.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=ln.nil,n=ln.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,ln.or)((0,ln._)`${i} === undefined`,n)),t!==ln.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==ln.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,ln.or)(o(),a());function o(){if(r.length){if(!(n instanceof ln.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,ln._)`${(0,P$.checkDataTypes)(u,n,s.opts.strictNumbers,P$.DataType.Wrong)}`}return ln.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,ln._)`!${u}(${n})`}return ln.nil}}subschema(t,n){const r=(0,Uq.getSubschema)(this.it,t);(0,Uq.extendSubschemaData)(r,this.it,t),(0,Uq.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return V0n(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Hg.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Hg.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,ln.Name)),!0}}up.KeywordCxt=bHe;function xHe(e,t,n,r){const i=new bHe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Vk.funcKeywordCode)(i,n):"macro"in n?(0,Vk.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Vk.funcKeywordCode)(i,n)}const rgn=/^\/(?:[^~]|~0|~1)*$/,ign=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function wHe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return Hn.default.rootData;if(e[0]==="/"){if(!rgn.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=Hn.default.rootData}else{const l=ign.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,ln._)`${s}${(0,ln.getProperty)((0,Hg.unescapeJsonPointer)(l))}`,o=(0,ln._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}up.getData=wHe;var IP={};Object.defineProperty(IP,"__esModule",{value:!0});class sgn extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}IP.default=sgn;var PA={};Object.defineProperty(PA,"__esModule",{value:!0});const zq=ru;class ogn extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,zq.resolveUrl)(t,n,r),this.missingSchema=(0,zq.normalizeId)((0,zq.getFullPath)(t,this.missingRef))}}PA.default=ogn;var _c={};Object.defineProperty(_c,"__esModule",{value:!0});_c.resolveSchema=_c.getCompilingSchema=_c.resolveRef=_c.compileSchema=_c.SchemaEnv=void 0;const _h=Ar,agn=IP,Ax=D0,qh=ru,c2e=qt,ugn=up;class aj{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,qh.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}_c.SchemaEnv=aj;function Ele(e){const t=_He.call(this,e);if(t)return t;const n=(0,qh.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new _h.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:agn.default,code:(0,_h._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Ax.default.data,parentData:Ax.default.parentData,parentDataProperty:Ax.default.parentDataProperty,dataNames:[Ax.default.data],dataPathArr:[_h.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,_h.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:_h.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,_h._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,ugn.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Ax.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Ax.default.self}`,`${Ax.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof _h.Name?void 0:p,items:m instanceof _h.Name?void 0:m,dynamicProps:p instanceof _h.Name,dynamicItems:m instanceof _h.Name},h.source&&(h.source.evaluated=(0,_h.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}_c.compileSchema=Ele;function lgn(e,t,n){var r;n=(0,qh.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=dgn.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new aj({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=cgn.call(this,s)}_c.resolveRef=lgn;function cgn(e){return(0,qh.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Ele.call(this,e)}function _He(e){for(const t of this._compilations)if(fgn(t,e))return t}_c.getCompilingSchema=_He;function fgn(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function dgn(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||uj.call(this,e,t)}function uj(e,t){const n=this.opts.uriResolver.parse(t),r=(0,qh._getFullPath)(this.opts.uriResolver,n);let i=(0,qh.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Vq.call(this,n,e);const s=(0,qh.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=uj.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Vq.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||Ele.call(this,o),s===(0,qh.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,qh.resolveUrl)(this.opts.uriResolver,i,l)),new aj({schema:a,schemaId:u,root:e,baseId:i})}return Vq.call(this,n,o)}}_c.resolveSchema=uj;const hgn=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Vq(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,c2e.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!hgn.has(a)&&l&&(t=(0,qh.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,c2e.schemaHasRulesButRef)(n,this.RULES)){const a=(0,qh.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=uj.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new aj({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const pgn="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",mgn="Meta-schema for $data reference (JSON AnySchema extension proposal)",ggn="object",ygn=["$data"],vgn={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},bgn=!1,xgn={$id:pgn,description:mgn,type:ggn,required:ygn,properties:vgn,additionalProperties:bgn};var Sle={},kQ={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(on,function(n){function r(){for(var ve=arguments.length,ce=Array(ve),_e=0;_e<ve;_e++)ce[_e]=arguments[_e];if(ce.length>1){ce[0]=ce[0].slice(0,-1);for(var Ue=ce.length-1,je=1;je<Ue;++je)ce[je]=ce[je].slice(1,-1);return ce[Ue]=ce[Ue].slice(1),ce.join("")}else return ce[0]}function i(ve){return"(?:"+ve+")"}function s(ve){return ve===void 0?"undefined":ve===null?"null":Object.prototype.toString.call(ve).split(" ").pop().split("]").shift().toLowerCase()}function o(ve){return ve.toUpperCase()}function a(ve){return ve!=null?ve instanceof Array?ve:typeof ve.length!="number"||ve.split||ve.setInterval||ve.call?[ve]:Array.prototype.slice.call(ve):[]}function u(ve,ce){var _e=ve;if(ce)for(var Ue in ce)_e[Ue]=ce[Ue];return _e}function l(ve){var ce="[A-Za-z]",_e="[0-9]",Ue=r(_e,"[A-Fa-f]"),je=i(i("%[EFef]"+Ue+"%"+Ue+Ue+"%"+Ue+Ue)+"|"+i("%[89A-Fa-f]"+Ue+"%"+Ue+Ue)+"|"+i("%"+Ue+Ue)),Dt="[\\:\\/\\?\\#\\[\\]\\@]",Ht="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",xn=r(Dt,Ht),rr=ve?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",mr=ve?"[\\uE000-\\uF8FF]":"[]",jn=r(ce,_e,"[\\-\\.\\_\\~]",rr);i(ce+r(ce,_e,"[\\+\\-\\.]")+"*"),i(i(je+"|"+r(jn,Ht,"[\\:]"))+"*");var Dr=i(i("25[0-5]")+"|"+i("2[0-4]"+_e)+"|"+i("1"+_e+_e)+"|"+i("0?[1-9]"+_e)+"|0?0?"+_e),ii=i(Dr+"\\."+Dr+"\\."+Dr+"\\."+Dr),dn=i(Ue+"{1,4}"),Ir=i(i(dn+"\\:"+dn)+"|"+ii),Jr=i(i(dn+"\\:")+"{6}"+Ir),ir=i("\\:\\:"+i(dn+"\\:")+"{5}"+Ir),un=i(i(dn)+"?\\:\\:"+i(dn+"\\:")+"{4}"+Ir),jr=i(i(i(dn+"\\:")+"{0,1}"+dn)+"?\\:\\:"+i(dn+"\\:")+"{3}"+Ir),Pi=i(i(i(dn+"\\:")+"{0,2}"+dn)+"?\\:\\:"+i(dn+"\\:")+"{2}"+Ir),Ds=i(i(i(dn+"\\:")+"{0,3}"+dn)+"?\\:\\:"+dn+"\\:"+Ir),_i=i(i(i(dn+"\\:")+"{0,4}"+dn)+"?\\:\\:"+Ir),ns=i(i(i(dn+"\\:")+"{0,5}"+dn)+"?\\:\\:"+dn),Yo=i(i(i(dn+"\\:")+"{0,6}"+dn)+"?\\:\\:"),Wa=i([Jr,ir,un,jr,Pi,Ds,_i,ns,Yo].join("|")),Mo=i(i(jn+"|"+je)+"+");i("[vV]"+Ue+"+\\."+r(jn,Ht,"[\\:]")+"+"),i(i(je+"|"+r(jn,Ht))+"*");var Jl=i(je+"|"+r(jn,Ht,"[\\:\\@]"));return i(i(je+"|"+r(jn,Ht,"[\\@]"))+"+"),i(i(Jl+"|"+r("[\\/\\?]",mr))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ce,_e,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",jn,Ht),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",jn,Ht),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",jn,Ht),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",jn,Ht),"g"),NOT_QUERY:new RegExp(r("[^\\%]",jn,Ht,"[\\:\\@\\/\\?]",mr),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",jn,Ht,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",jn,Ht),"g"),UNRESERVED:new RegExp(jn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",jn,xn),"g"),PCT_ENCODED:new RegExp(je,"g"),IPV4ADDRESS:new RegExp("^("+ii+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Wa+")"+i(i("\\%25|\\%(?!"+Ue+"{2})")+"("+Mo+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ve(ce,_e){var Ue=[],je=!0,Dt=!1,Ht=void 0;try{for(var xn=ce[Symbol.iterator](),rr;!(je=(rr=xn.next()).done)&&(Ue.push(rr.value),!(_e&&Ue.length===_e));je=!0);}catch(mr){Dt=!0,Ht=mr}finally{try{!je&&xn.return&&xn.return()}finally{if(Dt)throw Ht}}return Ue}return function(ce,_e){if(Array.isArray(ce))return ce;if(Symbol.iterator in Object(ce))return ve(ce,_e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ve){if(Array.isArray(ve)){for(var ce=0,_e=Array(ve.length);ce<ve.length;ce++)_e[ce]=ve[ce];return _e}else return Array.from(ve)},p=2147483647,m=36,g=1,y=26,v=38,b=700,_=72,w=128,S="-",T=/^xn--/,A=/[^\0-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,F=Math.floor,O=String.fromCharCode;function $(ve){throw new RangeError(I[ve])}function V(ve,ce){for(var _e=[],Ue=ve.length;Ue--;)_e[Ue]=ce(ve[Ue]);return _e}function j(ve,ce){var _e=ve.split("@"),Ue="";_e.length>1&&(Ue=_e[0]+"@",ve=_e[1]),ve=ve.replace(k,".");var je=ve.split("."),Dt=V(je,ce).join(".");return Ue+Dt}function G(ve){for(var ce=[],_e=0,Ue=ve.length;_e<Ue;){var je=ve.charCodeAt(_e++);if(je>=55296&&je<=56319&&_e<Ue){var Dt=ve.charCodeAt(_e++);(Dt&64512)==56320?ce.push(((je&1023)<<10)+(Dt&1023)+65536):(ce.push(je),_e--)}else ce.push(je)}return ce}var Y=function(ce){return String.fromCodePoint.apply(String,h(ce))},J=function(ce){return ce-48<10?ce-22:ce-65<26?ce-65:ce-97<26?ce-97:m},L=function(ce,_e){return ce+22+75*(ce<26)-((_e!=0)<<5)},U=function(ce,_e,Ue){var je=0;for(ce=Ue?F(ce/b):ce>>1,ce+=F(ce/_e);ce>R*y>>1;je+=m)ce=F(ce/R);return F(je+(R+1)*ce/(ce+v))},W=function(ce){var _e=[],Ue=ce.length,je=0,Dt=w,Ht=_,xn=ce.lastIndexOf(S);xn<0&&(xn=0);for(var rr=0;rr<xn;++rr)ce.charCodeAt(rr)>=128&&$("not-basic"),_e.push(ce.charCodeAt(rr));for(var mr=xn>0?xn+1:0;mr<Ue;){for(var jn=je,Dr=1,ii=m;;ii+=m){mr>=Ue&&$("invalid-input");var dn=J(ce.charCodeAt(mr++));(dn>=m||dn>F((p-je)/Dr))&&$("overflow"),je+=dn*Dr;var Ir=ii<=Ht?g:ii>=Ht+y?y:ii-Ht;if(dn<Ir)break;var Jr=m-Ir;Dr>F(p/Jr)&&$("overflow"),Dr*=Jr}var ir=_e.length+1;Ht=U(je-jn,ir,jn==0),F(je/ir)>p-Dt&&$("overflow"),Dt+=F(je/ir),je%=ir,_e.splice(je++,0,Dt)}return String.fromCodePoint.apply(String,_e)},B=function(ce){var _e=[];ce=G(ce);var Ue=ce.length,je=w,Dt=0,Ht=_,xn=!0,rr=!1,mr=void 0;try{for(var jn=ce[Symbol.iterator](),Dr;!(xn=(Dr=jn.next()).done);xn=!0){var ii=Dr.value;ii<128&&_e.push(O(ii))}}catch(Xe){rr=!0,mr=Xe}finally{try{!xn&&jn.return&&jn.return()}finally{if(rr)throw mr}}var dn=_e.length,Ir=dn;for(dn&&_e.push(S);Ir<Ue;){var Jr=p,ir=!0,un=!1,jr=void 0;try{for(var Pi=ce[Symbol.iterator](),Ds;!(ir=(Ds=Pi.next()).done);ir=!0){var _i=Ds.value;_i>=je&&_i<Jr&&(Jr=_i)}}catch(Xe){un=!0,jr=Xe}finally{try{!ir&&Pi.return&&Pi.return()}finally{if(un)throw jr}}var ns=Ir+1;Jr-je>F((p-Dt)/ns)&&$("overflow"),Dt+=(Jr-je)*ns,je=Jr;var Yo=!0,Wa=!1,Mo=void 0;try{for(var Jl=ce[Symbol.iterator](),td;!(Yo=(td=Jl.next()).done);Yo=!0){var te=td.value;if(te<je&&++Dt>p&&$("overflow"),te==je){for(var be=Dt,ue=m;;ue+=m){var De=ue<=Ht?g:ue>=Ht+y?y:ue-Ht;if(be<De)break;var Pe=be-De,Ae=m-De;_e.push(O(L(De+Pe%Ae,0))),be=F(Pe/Ae)}_e.push(O(L(be,0))),Ht=U(Dt,ns,Ir==dn),Dt=0,++Ir}}}catch(Xe){Wa=!0,Mo=Xe}finally{try{!Yo&&Jl.return&&Jl.return()}finally{if(Wa)throw Mo}}++Dt,++je}return _e.join("")},q=function(ce){return j(ce,function(_e){return T.test(_e)?W(_e.slice(4).toLowerCase()):_e})},Z=function(ce){return j(ce,function(_e){return A.test(_e)?"xn--"+B(_e):_e})},re={version:"2.1.0",ucs2:{decode:G,encode:Y},decode:W,encode:B,toASCII:Z,toUnicode:q},xe={};function pe(ve){var ce=ve.charCodeAt(0),_e=void 0;return ce<16?_e="%0"+ce.toString(16).toUpperCase():ce<128?_e="%"+ce.toString(16).toUpperCase():ce<2048?_e="%"+(ce>>6|192).toString(16).toUpperCase()+"%"+(ce&63|128).toString(16).toUpperCase():_e="%"+(ce>>12|224).toString(16).toUpperCase()+"%"+(ce>>6&63|128).toString(16).toUpperCase()+"%"+(ce&63|128).toString(16).toUpperCase(),_e}function Te(ve){for(var ce="",_e=0,Ue=ve.length;_e<Ue;){var je=parseInt(ve.substr(_e+1,2),16);if(je<128)ce+=String.fromCharCode(je),_e+=3;else if(je>=194&&je<224){if(Ue-_e>=6){var Dt=parseInt(ve.substr(_e+4,2),16);ce+=String.fromCharCode((je&31)<<6|Dt&63)}else ce+=ve.substr(_e,6);_e+=6}else if(je>=224){if(Ue-_e>=9){var Ht=parseInt(ve.substr(_e+4,2),16),xn=parseInt(ve.substr(_e+7,2),16);ce+=String.fromCharCode((je&15)<<12|(Ht&63)<<6|xn&63)}else ce+=ve.substr(_e,9);_e+=9}else ce+=ve.substr(_e,3),_e+=3}return ce}function ke(ve,ce){function _e(Ue){var je=Te(Ue);return je.match(ce.UNRESERVED)?je:Ue}return ve.scheme&&(ve.scheme=String(ve.scheme).replace(ce.PCT_ENCODED,_e).toLowerCase().replace(ce.NOT_SCHEME,"")),ve.userinfo!==void 0&&(ve.userinfo=String(ve.userinfo).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_USERINFO,pe).replace(ce.PCT_ENCODED,o)),ve.host!==void 0&&(ve.host=String(ve.host).replace(ce.PCT_ENCODED,_e).toLowerCase().replace(ce.NOT_HOST,pe).replace(ce.PCT_ENCODED,o)),ve.path!==void 0&&(ve.path=String(ve.path).replace(ce.PCT_ENCODED,_e).replace(ve.scheme?ce.NOT_PATH:ce.NOT_PATH_NOSCHEME,pe).replace(ce.PCT_ENCODED,o)),ve.query!==void 0&&(ve.query=String(ve.query).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_QUERY,pe).replace(ce.PCT_ENCODED,o)),ve.fragment!==void 0&&(ve.fragment=String(ve.fragment).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_FRAGMENT,pe).replace(ce.PCT_ENCODED,o)),ve}function it(ve){return ve.replace(/^0*(.*)/,"$1")||"0"}function Re(ve,ce){var _e=ve.match(ce.IPV4ADDRESS)||[],Ue=d(_e,2),je=Ue[1];return je?je.split(".").map(it).join("."):ve}function ut(ve,ce){var _e=ve.match(ce.IPV6ADDRESS)||[],Ue=d(_e,3),je=Ue[1],Dt=Ue[2];if(je){for(var Ht=je.toLowerCase().split("::").reverse(),xn=d(Ht,2),rr=xn[0],mr=xn[1],jn=mr?mr.split(":").map(it):[],Dr=rr.split(":").map(it),ii=ce.IPV4ADDRESS.test(Dr[Dr.length-1]),dn=ii?7:8,Ir=Dr.length-dn,Jr=Array(dn),ir=0;ir<dn;++ir)Jr[ir]=jn[ir]||Dr[Ir+ir]||"";ii&&(Jr[dn-1]=Re(Jr[dn-1],ce));var un=Jr.reduce(function(ns,Yo,Wa){if(!Yo||Yo==="0"){var Mo=ns[ns.length-1];Mo&&Mo.index+Mo.length===Wa?Mo.length++:ns.push({index:Wa,length:1})}return ns},[]),jr=un.sort(function(ns,Yo){return Yo.length-ns.length})[0],Pi=void 0;if(jr&&jr.length>1){var Ds=Jr.slice(0,jr.index),_i=Jr.slice(jr.index+jr.length);Pi=Ds.join(":")+"::"+_i.join(":")}else Pi=Jr.join(":");return Dt&&(Pi+="%"+Dt),Pi}else return ve}var Ke=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ct="".match(/(){0}/)[1]===void 0;function gt(ve){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e={},Ue=ce.iri!==!1?f:c;ce.reference==="suffix"&&(ve=(ce.scheme?ce.scheme+":":"")+"//"+ve);var je=ve.match(Ke);if(je){Ct?(_e.scheme=je[1],_e.userinfo=je[3],_e.host=je[4],_e.port=parseInt(je[5],10),_e.path=je[6]||"",_e.query=je[7],_e.fragment=je[8],isNaN(_e.port)&&(_e.port=je[5])):(_e.scheme=je[1]||void 0,_e.userinfo=ve.indexOf("@")!==-1?je[3]:void 0,_e.host=ve.indexOf("//")!==-1?je[4]:void 0,_e.port=parseInt(je[5],10),_e.path=je[6]||"",_e.query=ve.indexOf("?")!==-1?je[7]:void 0,_e.fragment=ve.indexOf("#")!==-1?je[8]:void 0,isNaN(_e.port)&&(_e.port=ve.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?je[4]:void 0)),_e.host&&(_e.host=ut(Re(_e.host,Ue),Ue)),_e.scheme===void 0&&_e.userinfo===void 0&&_e.host===void 0&&_e.port===void 0&&!_e.path&&_e.query===void 0?_e.reference="same-document":_e.scheme===void 0?_e.reference="relative":_e.fragment===void 0?_e.reference="absolute":_e.reference="uri",ce.reference&&ce.reference!=="suffix"&&ce.reference!==_e.reference&&(_e.error=_e.error||"URI is not a "+ce.reference+" reference.");var Dt=xe[(ce.scheme||_e.scheme||"").toLowerCase()];if(!ce.unicodeSupport&&(!Dt||!Dt.unicodeSupport)){if(_e.host&&(ce.domainHost||Dt&&Dt.domainHost))try{_e.host=re.toASCII(_e.host.replace(Ue.PCT_ENCODED,Te).toLowerCase())}catch(Ht){_e.error=_e.error||"Host's domain name can not be converted to ASCII via punycode: "+Ht}ke(_e,c)}else ke(_e,Ue);Dt&&Dt.parse&&Dt.parse(_e,ce)}else _e.error=_e.error||"URI can not be parsed.";return _e}function Ie(ve,ce){var _e=ce.iri!==!1?f:c,Ue=[];return ve.userinfo!==void 0&&(Ue.push(ve.userinfo),Ue.push("@")),ve.host!==void 0&&Ue.push(ut(Re(String(ve.host),_e),_e).replace(_e.IPV6ADDRESS,function(je,Dt,Ht){return"["+Dt+(Ht?"%25"+Ht:"")+"]"})),(typeof ve.port=="number"||typeof ve.port=="string")&&(Ue.push(":"),Ue.push(String(ve.port))),Ue.length?Ue.join(""):void 0}var Ve=/^\.\.?\//,ft=/^\/\.(\/|$)/,_t=/^\/\.\.(\/|$)/,Mt=/^\/?(?:.|\n)*?(?=\/|$)/;function st(ve){for(var ce=[];ve.length;)if(ve.match(Ve))ve=ve.replace(Ve,"");else if(ve.match(ft))ve=ve.replace(ft,"/");else if(ve.match(_t))ve=ve.replace(_t,"/"),ce.pop();else if(ve==="."||ve==="..")ve="";else{var _e=ve.match(Mt);if(_e){var Ue=_e[0];ve=ve.slice(Ue.length),ce.push(Ue)}else throw new Error("Unexpected dot segment condition")}return ce.join("")}function X(ve){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=ce.iri?f:c,Ue=[],je=xe[(ce.scheme||ve.scheme||"").toLowerCase()];if(je&&je.serialize&&je.serialize(ve,ce),ve.host&&!_e.IPV6ADDRESS.test(ve.host)){if(ce.domainHost||je&&je.domainHost)try{ve.host=ce.iri?re.toUnicode(ve.host):re.toASCII(ve.host.replace(_e.PCT_ENCODED,Te).toLowerCase())}catch(xn){ve.error=ve.error||"Host's domain name can not be converted to "+(ce.iri?"Unicode":"ASCII")+" via punycode: "+xn}}ke(ve,_e),ce.reference!=="suffix"&&ve.scheme&&(Ue.push(ve.scheme),Ue.push(":"));var Dt=Ie(ve,ce);if(Dt!==void 0&&(ce.reference!=="suffix"&&Ue.push("//"),Ue.push(Dt),ve.path&&ve.path.charAt(0)!=="/"&&Ue.push("/")),ve.path!==void 0){var Ht=ve.path;!ce.absolutePath&&(!je||!je.absolutePath)&&(Ht=st(Ht)),Dt===void 0&&(Ht=Ht.replace(/^\/\//,"/%2F")),Ue.push(Ht)}return ve.query!==void 0&&(Ue.push("?"),Ue.push(ve.query)),ve.fragment!==void 0&&(Ue.push("#"),Ue.push(ve.fragment)),Ue.join("")}function de(ve,ce){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ue=arguments[3],je={};return Ue||(ve=gt(X(ve,_e),_e),ce=gt(X(ce,_e),_e)),_e=_e||{},!_e.tolerant&&ce.scheme?(je.scheme=ce.scheme,je.userinfo=ce.userinfo,je.host=ce.host,je.port=ce.port,je.path=st(ce.path||""),je.query=ce.query):(ce.userinfo!==void 0||ce.host!==void 0||ce.port!==void 0?(je.userinfo=ce.userinfo,je.host=ce.host,je.port=ce.port,je.path=st(ce.path||""),je.query=ce.query):(ce.path?(ce.path.charAt(0)==="/"?je.path=st(ce.path):((ve.userinfo!==void 0||ve.host!==void 0||ve.port!==void 0)&&!ve.path?je.path="/"+ce.path:ve.path?je.path=ve.path.slice(0,ve.path.lastIndexOf("/")+1)+ce.path:je.path=ce.path,je.path=st(je.path)),je.query=ce.query):(je.path=ve.path,ce.query!==void 0?je.query=ce.query:je.query=ve.query),je.userinfo=ve.userinfo,je.host=ve.host,je.port=ve.port),je.scheme=ve.scheme),je.fragment=ce.fragment,je}function we(ve,ce,_e){var Ue=u({scheme:"null"},_e);return X(de(gt(ve,Ue),gt(ce,Ue),Ue,!0),Ue)}function ae(ve,ce){return typeof ve=="string"?ve=X(gt(ve,ce),ce):s(ve)==="object"&&(ve=gt(X(ve,ce),ce)),ve}function he(ve,ce,_e){return typeof ve=="string"?ve=X(gt(ve,_e),_e):s(ve)==="object"&&(ve=X(ve,_e)),typeof ce=="string"?ce=X(gt(ce,_e),_e):s(ce)==="object"&&(ce=X(ce,_e)),ve===ce}function Ee(ve,ce){return ve&&ve.toString().replace(!ce||!ce.iri?c.ESCAPE:f.ESCAPE,pe)}function $e(ve,ce){return ve&&ve.toString().replace(!ce||!ce.iri?c.PCT_ENCODED:f.PCT_ENCODED,Te)}var Be={scheme:"http",domainHost:!0,parse:function(ce,_e){return ce.host||(ce.error=ce.error||"HTTP URIs must have a host."),ce},serialize:function(ce,_e){var Ue=String(ce.scheme).toLowerCase()==="https";return(ce.port===(Ue?443:80)||ce.port==="")&&(ce.port=void 0),ce.path||(ce.path="/"),ce}},lt={scheme:"https",domainHost:Be.domainHost,parse:Be.parse,serialize:Be.serialize};function Je(ve){return typeof ve.secure=="boolean"?ve.secure:String(ve.scheme).toLowerCase()==="wss"}var Xt={scheme:"ws",domainHost:!0,parse:function(ce,_e){var Ue=ce;return Ue.secure=Je(Ue),Ue.resourceName=(Ue.path||"/")+(Ue.query?"?"+Ue.query:""),Ue.path=void 0,Ue.query=void 0,Ue},serialize:function(ce,_e){if((ce.port===(Je(ce)?443:80)||ce.port==="")&&(ce.port=void 0),typeof ce.secure=="boolean"&&(ce.scheme=ce.secure?"wss":"ws",ce.secure=void 0),ce.resourceName){var Ue=ce.resourceName.split("?"),je=d(Ue,2),Dt=je[0],Ht=je[1];ce.path=Dt&&Dt!=="/"?Dt:void 0,ce.query=Ht,ce.resourceName=void 0}return ce.fragment=void 0,ce}},fn={scheme:"wss",domainHost:Xt.domainHost,parse:Xt.parse,serialize:Xt.serialize},Wt={},an="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Sn="[0-9A-Fa-f]",Mn=i(i("%[EFef]"+Sn+"%"+Sn+Sn+"%"+Sn+Sn)+"|"+i("%[89A-Fa-f]"+Sn+"%"+Sn+Sn)+"|"+i("%"+Sn+Sn)),ki="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",di="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Li=r(di,'[\\"\\\\]'),As="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Br=new RegExp(an,"g"),ls=new RegExp(Mn,"g"),ll=new RegExp(r("[^]",ki,"[\\.]",'[\\"]',Li),"g"),Fo=new RegExp(r("[^]",an,As),"g"),qa=Fo;function Nr(ve){var ce=Te(ve);return ce.match(Br)?ce:ve}var Ri={scheme:"mailto",parse:function(ce,_e){var Ue=ce,je=Ue.to=Ue.path?Ue.path.split(","):[];if(Ue.path=void 0,Ue.query){for(var Dt=!1,Ht={},xn=Ue.query.split("&"),rr=0,mr=xn.length;rr<mr;++rr){var jn=xn[rr].split("=");switch(jn[0]){case"to":for(var Dr=jn[1].split(","),ii=0,dn=Dr.length;ii<dn;++ii)je.push(Dr[ii]);break;case"subject":Ue.subject=$e(jn[1],_e);break;case"body":Ue.body=$e(jn[1],_e);break;default:Dt=!0,Ht[$e(jn[0],_e)]=$e(jn[1],_e);break}}Dt&&(Ue.headers=Ht)}Ue.query=void 0;for(var Ir=0,Jr=je.length;Ir<Jr;++Ir){var ir=je[Ir].split("@");if(ir[0]=$e(ir[0]),_e.unicodeSupport)ir[1]=$e(ir[1],_e).toLowerCase();else try{ir[1]=re.toASCII($e(ir[1],_e).toLowerCase())}catch(un){Ue.error=Ue.error||"Email address's domain name can not be converted to ASCII via punycode: "+un}je[Ir]=ir.join("@")}return Ue},serialize:function(ce,_e){var Ue=ce,je=a(ce.to);if(je){for(var Dt=0,Ht=je.length;Dt<Ht;++Dt){var xn=String(je[Dt]),rr=xn.lastIndexOf("@"),mr=xn.slice(0,rr).replace(ls,Nr).replace(ls,o).replace(ll,pe),jn=xn.slice(rr+1);try{jn=_e.iri?re.toUnicode(jn):re.toASCII($e(jn,_e).toLowerCase())}catch(Ir){Ue.error=Ue.error||"Email address's domain name can not be converted to "+(_e.iri?"Unicode":"ASCII")+" via punycode: "+Ir}je[Dt]=mr+"@"+jn}Ue.path=je.join(",")}var Dr=ce.headers=ce.headers||{};ce.subject&&(Dr.subject=ce.subject),ce.body&&(Dr.body=ce.body);var ii=[];for(var dn in Dr)Dr[dn]!==Wt[dn]&&ii.push(dn.replace(ls,Nr).replace(ls,o).replace(Fo,pe)+"="+Dr[dn].replace(ls,Nr).replace(ls,o).replace(qa,pe));return ii.length&&(Ue.query=ii.join("&")),Ue}},hi=/^([^\:]+)\:(.*)/,Vs={scheme:"urn",parse:function(ce,_e){var Ue=ce.path&&ce.path.match(hi),je=ce;if(Ue){var Dt=_e.scheme||je.scheme||"urn",Ht=Ue[1].toLowerCase(),xn=Ue[2],rr=Dt+":"+(_e.nid||Ht),mr=xe[rr];je.nid=Ht,je.nss=xn,je.path=void 0,mr&&(je=mr.parse(je,_e))}else je.error=je.error||"URN can not be parsed.";return je},serialize:function(ce,_e){var Ue=_e.scheme||ce.scheme||"urn",je=ce.nid,Dt=Ue+":"+(_e.nid||je),Ht=xe[Dt];Ht&&(ce=Ht.serialize(ce,_e));var xn=ce,rr=ce.nss;return xn.path=(je||_e.nid)+":"+rr,xn}},ri=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ni={scheme:"urn:uuid",parse:function(ce,_e){var Ue=ce;return Ue.uuid=Ue.nss,Ue.nss=void 0,!_e.tolerant&&(!Ue.uuid||!Ue.uuid.match(ri))&&(Ue.error=Ue.error||"UUID is not valid."),Ue},serialize:function(ce,_e){var Ue=ce;return Ue.nss=(ce.uuid||"").toLowerCase(),Ue}};xe[Be.scheme]=Be,xe[lt.scheme]=lt,xe[Xt.scheme]=Xt,xe[fn.scheme]=fn,xe[Ri.scheme]=Ri,xe[Vs.scheme]=Vs,xe[Ni.scheme]=Ni,n.SCHEMES=xe,n.pctEncChar=pe,n.pctDecChars=Te,n.parse=gt,n.removeDotSegments=st,n.serialize=X,n.resolveComponents=de,n.resolve=we,n.normalize=ae,n.equal=he,n.escapeComponent=Ee,n.unescapeComponent=$e,Object.defineProperty(n,"__esModule",{value:!0})})})(kQ,kQ.exports);var wgn=kQ.exports;Object.defineProperty(Sle,"__esModule",{value:!0});const EHe=wgn;EHe.code='require("ajv/dist/runtime/uri").default';Sle.default=EHe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=up;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Ar;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=IP,i=PA,s=S_,o=_c,a=Ar,u=ru,l=ra,c=qt,f=xgn,d=Sle,h=(L,U)=>new RegExp(L,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(L){var U,W,B,q,Z,re,xe,pe,Te,ke,it,Re,ut,Ke,Ct,gt,Ie,Ve,ft,_t,Mt,st,X,de,we;const ae=L.strict,he=(U=L.code)===null||U===void 0?void 0:U.optimize,Ee=he===!0||he===void 0?1:he||0,$e=(B=(W=L.code)===null||W===void 0?void 0:W.regExp)!==null&&B!==void 0?B:h,Be=(q=L.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(re=(Z=L.strictSchema)!==null&&Z!==void 0?Z:ae)!==null&&re!==void 0?re:!0,strictNumbers:(pe=(xe=L.strictNumbers)!==null&&xe!==void 0?xe:ae)!==null&&pe!==void 0?pe:!0,strictTypes:(ke=(Te=L.strictTypes)!==null&&Te!==void 0?Te:ae)!==null&&ke!==void 0?ke:"log",strictTuples:(Re=(it=L.strictTuples)!==null&&it!==void 0?it:ae)!==null&&Re!==void 0?Re:"log",strictRequired:(Ke=(ut=L.strictRequired)!==null&&ut!==void 0?ut:ae)!==null&&Ke!==void 0?Ke:!1,code:L.code?{...L.code,optimize:Ee,regExp:$e}:{optimize:Ee,regExp:$e},loopRequired:(Ct=L.loopRequired)!==null&&Ct!==void 0?Ct:v,loopEnum:(gt=L.loopEnum)!==null&&gt!==void 0?gt:v,meta:(Ie=L.meta)!==null&&Ie!==void 0?Ie:!0,messages:(Ve=L.messages)!==null&&Ve!==void 0?Ve:!0,inlineRefs:(ft=L.inlineRefs)!==null&&ft!==void 0?ft:!0,schemaId:(_t=L.schemaId)!==null&&_t!==void 0?_t:"$id",addUsedSchema:(Mt=L.addUsedSchema)!==null&&Mt!==void 0?Mt:!0,validateSchema:(st=L.validateSchema)!==null&&st!==void 0?st:!0,validateFormats:(X=L.validateFormats)!==null&&X!==void 0?X:!0,unicodeRegExp:(de=L.unicodeRegExp)!==null&&de!==void 0?de:!0,int32range:(we=L.int32range)!==null&&we!==void 0?we:!0,uriResolver:Be}}class _{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,...b(U)};const{es5:W,lines:B}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:B}),this.logger=F(U.logger);const q=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),w.call(this,g,U,"NOT SUPPORTED"),w.call(this,y,U,"DEPRECATED","warn"),this._metaOpts=I.call(this),U.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&k.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),T.call(this),U.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:W,schemaId:B}=this.opts;let q=f;B==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&U&&this.addMetaSchema(q,q[B],!1)}defaultMeta(){const{meta:U,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[W]||U:void 0}validate(U,W){let B;if(typeof U=="string"){if(B=this.getSchema(U),!B)throw new Error(`no schema with key or ref "${U}"`)}else B=this.compile(U);const q=B(W);return"$async"in B||(this.errors=B.errors),q}compile(U,W){const B=this._addSchema(U,W);return B.validate||this._compileSchemaEnv(B)}compileAsync(U,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:B}=this.opts;return q.call(this,U,W);async function q(ke,it){await Z.call(this,ke.$schema);const Re=this._addSchema(ke,it);return Re.validate||re.call(this,Re)}async function Z(ke){ke&&!this.getSchema(ke)&&await q.call(this,{$ref:ke},!0)}async function re(ke){try{return this._compileSchemaEnv(ke)}catch(it){if(!(it instanceof i.default))throw it;return xe.call(this,it),await pe.call(this,it.missingSchema),re.call(this,ke)}}function xe({missingSchema:ke,missingRef:it}){if(this.refs[ke])throw new Error(`AnySchema ${ke} is loaded but ${it} cannot be resolved`)}async function pe(ke){const it=await Te.call(this,ke);this.refs[ke]||await Z.call(this,it.$schema),this.refs[ke]||this.addSchema(it,ke,W)}async function Te(ke){const it=this._loading[ke];if(it)return it;try{return await(this._loading[ke]=B(ke))}finally{delete this._loading[ke]}}}addSchema(U,W,B,q=this.opts.validateSchema){if(Array.isArray(U)){for(const re of U)this.addSchema(re,void 0,B,q);return this}let Z;if(typeof U=="object"){const{schemaId:re}=this.opts;if(Z=U[re],Z!==void 0&&typeof Z!="string")throw new Error(`schema ${re} must be string`)}return W=(0,u.normalizeId)(W||Z),this._checkUnique(W),this.schemas[W]=this._addSchema(U,B,W,q,!0),this}addMetaSchema(U,W,B=this.opts.validateSchema){return this.addSchema(U,W,!0,B),this}validateSchema(U,W){if(typeof U=="boolean")return!0;let B;if(B=U.$schema,B!==void 0&&typeof B!="string")throw new Error("$schema must be a string");if(B=B||this.opts.defaultMeta||this.defaultMeta(),!B)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(B,U);if(!q&&W){const Z="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Z);else throw new Error(Z)}return q}getSchema(U){let W;for(;typeof(W=S.call(this,U))=="string";)U=W;if(W===void 0){const{schemaId:B}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:B});if(W=o.resolveSchema.call(this,q,U),!W)return;this.refs[U]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,U);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const W=U;this._cache.delete(W);let B=U[this.opts.schemaId];return B&&(B=(0,u.normalizeId)(B),delete this.schemas[B],delete this.refs[B]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const W of U)this.addKeyword(W);return this}addKeyword(U,W){let B;if(typeof U=="string")B=U,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=B);else if(typeof U=="object"&&W===void 0){if(W=U,B=W.keyword,Array.isArray(B)&&!B.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,B,W),!W)return(0,c.eachItem)(B,Z=>V.call(this,Z)),this;G.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(B,q.type.length===0?Z=>V.call(this,Z,q):Z=>q.type.forEach(re=>V.call(this,Z,q,re))),this}getKeyword(U){const W=this.RULES.all[U];return typeof W=="object"?W.definition:!!W}removeKeyword(U){const{RULES:W}=this;delete W.keywords[U],delete W.all[U];for(const B of W.rules){const q=B.rules.findIndex(Z=>Z.keyword===U);q>=0&&B.rules.splice(q,1)}return this}addFormat(U,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[U]=W,this}errorsText(U=this.errors,{separator:W=", ",dataVar:B="data"}={}){return!U||U.length===0?"No errors":U.map(q=>`${B}${q.instancePath} ${q.message}`).reduce((q,Z)=>q+W+Z)}$dataMetaSchema(U,W){const B=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const q of W){const Z=q.split("/").slice(1);let re=U;for(const xe of Z)re=re[xe];for(const xe in B){const pe=B[xe];if(typeof pe!="object")continue;const{$data:Te}=pe.definition,ke=re[xe];Te&&ke&&(re[xe]=J(ke))}}return U}_removeAllSchemas(U,W){for(const B in U){const q=U[B];(!W||W.test(B))&&(typeof q=="string"?delete U[B]:q&&!q.meta&&(this._cache.delete(q.schema),delete U[B]))}}_addSchema(U,W,B,q=this.opts.validateSchema,Z=this.opts.addUsedSchema){let re;const{schemaId:xe}=this.opts;if(typeof U=="object")re=U[xe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let pe=this._cache.get(U);if(pe!==void 0)return pe;B=(0,u.normalizeId)(re||B);const Te=u.getSchemaRefs.call(this,U,B);return pe=new o.SchemaEnv({schema:U,schemaId:xe,meta:W,baseId:B,localRefs:Te}),this._cache.set(pe.schema,pe),Z&&!B.startsWith("#")&&(B&&this._checkUnique(B),this.refs[B]=pe),q&&this.validateSchema(U,!0),pe}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=W}}}_.ValidationError=r.default,_.MissingRefError=i.default,e.default=_;function w(L,U,W,B="error"){for(const q in L){const Z=q;Z in U&&this.logger[B](`${W}: option ${q}. ${L[Z]}`)}}function S(L){return L=(0,u.normalizeId)(L),this.schemas[L]||this.refs[L]}function T(){const L=this.opts.schemas;if(L)if(Array.isArray(L))this.addSchema(L);else for(const U in L)this.addSchema(L[U],U)}function A(){for(const L in this.opts.formats){const U=this.opts.formats[L];U&&this.addFormat(L,U)}}function k(L){if(Array.isArray(L)){this.addVocabulary(L);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in L){const W=L[U];W.keyword||(W.keyword=U),this.addKeyword(W)}}function I(){const L={...this.opts};for(const U of p)delete L[U];return L}const R={log(){},warn(){},error(){}};function F(L){if(L===!1)return R;if(L===void 0)return console;if(L.log&&L.warn&&L.error)return L;throw new Error("logger must implement log, warn and error methods")}const O=/^[a-z_$][a-z0-9_$:-]*$/i;function $(L,U){const{RULES:W}=this;if((0,c.eachItem)(L,B=>{if(W.keywords[B])throw new Error(`Keyword ${B} is already defined`);if(!O.test(B))throw new Error(`Keyword ${B} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function V(L,U,W){var B;const q=U==null?void 0:U.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Z}=this;let re=q?Z.post:Z.rules.find(({type:pe})=>pe===W);if(re||(re={type:W,rules:[]},Z.rules.push(re)),Z.keywords[L]=!0,!U)return;const xe={keyword:L,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?j.call(this,re,xe,U.before):re.rules.push(xe),Z.all[L]=xe,(B=U.implements)===null||B===void 0||B.forEach(pe=>this.addKeyword(pe))}function j(L,U,W){const B=L.rules.findIndex(q=>q.keyword===W);B>=0?L.rules.splice(B,0,U):(L.rules.push(U),this.logger.warn(`rule ${W} is not defined`))}function G(L){let{metaSchema:U}=L;U!==void 0&&(L.$data&&this.opts.$data&&(U=J(U)),L.validateSchema=this.compile(U,!0))}const Y={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function J(L){return{anyOf:[L,Y]}}})(qVe);var Cle={},Tle={},Ale={};Object.defineProperty(Ale,"__esModule",{value:!0});const _gn={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Ale.default=_gn;var C_={};Object.defineProperty(C_,"__esModule",{value:!0});C_.callRef=C_.getValidate=void 0;const Egn=PA,f2e=Cr,fc=Ar,y2=D0,d2e=_c,p6=qt,Sgn={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=d2e.resolveRef.call(u,l,i,n);if(c===void 0)throw new Egn.default(r.opts.uriResolver,i,n);if(c instanceof d2e.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return HF(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return HF(e,(0,fc._)`${p}.validate`,l,l.$async)}function d(p){const m=SHe(e,p);HF(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,fc.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:fc.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function SHe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,fc._)`${n.scopeValue("wrapper",{ref:t})}.validate`}C_.getValidate=SHe;function HF(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?y2.default.this:fc.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,fc._)`await ${(0,f2e.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,fc._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,f2e.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,fc._)`${p}.errors`;i.assign(y2.default.vErrors,(0,fc._)`${y2.default.vErrors} === null ? ${m} : ${y2.default.vErrors}.concat(${m})`),i.assign(y2.default.errors,(0,fc._)`${y2.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=p6.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,fc._)`${p}.evaluated.props`);s.props=p6.mergeEvaluated.props(i,y,s.props,fc.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=p6.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,fc._)`${p}.evaluated.items`);s.items=p6.mergeEvaluated.items(i,y,s.items,fc.Name)}}}C_.callRef=HF;C_.default=Sgn;Object.defineProperty(Tle,"__esModule",{value:!0});const Cgn=Ale,Tgn=C_,Agn=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Cgn.default,Tgn.default];Tle.default=Agn;var Dle={},Ile={};Object.defineProperty(Ile,"__esModule",{value:!0});const O$=Ar,a1=O$.operators,F$={maximum:{okStr:"<=",ok:a1.LTE,fail:a1.GT},minimum:{okStr:">=",ok:a1.GTE,fail:a1.LT},exclusiveMaximum:{okStr:"<",ok:a1.LT,fail:a1.GTE},exclusiveMinimum:{okStr:">",ok:a1.GT,fail:a1.LTE}},Dgn={message:({keyword:e,schemaCode:t})=>(0,O$.str)`must be ${F$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,O$._)`{comparison: ${F$[e].okStr}, limit: ${t}}`},Ign={keyword:Object.keys(F$),type:"number",schemaType:"number",$data:!0,error:Dgn,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,O$._)`${n} ${F$[t].fail} ${r} || isNaN(${n})`)}};Ile.default=Ign;var kle={};Object.defineProperty(kle,"__esModule",{value:!0});const Hk=Ar,kgn={message:({schemaCode:e})=>(0,Hk.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Hk._)`{multipleOf: ${e}}`},Rgn={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:kgn,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,Hk._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Hk._)`${o} !== parseInt(${o})`;e.fail$data((0,Hk._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};kle.default=Rgn;var Rle={},Nle={};Object.defineProperty(Nle,"__esModule",{value:!0});function CHe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}Nle.default=CHe;CHe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Rle,"__esModule",{value:!0});const iw=Ar,Ngn=qt,Pgn=Nle,Ogn={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,iw.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,iw._)`{limit: ${e}}`},Fgn={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Ogn,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?iw.operators.GT:iw.operators.LT,o=i.opts.unicode===!1?(0,iw._)`${n}.length`:(0,iw._)`${(0,Ngn.useFunc)(e.gen,Pgn.default)}(${n})`;e.fail$data((0,iw._)`${o} ${s} ${r}`)}};Rle.default=Fgn;var Ple={};Object.defineProperty(Ple,"__esModule",{value:!0});const Mgn=Cr,M$=Ar,$gn={message:({schemaCode:e})=>(0,M$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,M$._)`{pattern: ${e}}`},Lgn={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:$gn,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,M$._)`(new RegExp(${i}, ${o}))`:(0,Mgn.usePattern)(e,r);e.fail$data((0,M$._)`!${a}.test(${t})`)}};Ple.default=Lgn;var Ole={};Object.defineProperty(Ole,"__esModule",{value:!0});const qk=Ar,Bgn={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,qk.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,qk._)`{limit: ${e}}`},jgn={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Bgn,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?qk.operators.GT:qk.operators.LT;e.fail$data((0,qk._)`Object.keys(${n}).length ${i} ${r}`)}};Ole.default=jgn;var Fle={};Object.defineProperty(Fle,"__esModule",{value:!0});const eI=Cr,Wk=Ar,Ugn=qt,zgn={message:({params:{missingProperty:e}})=>(0,Wk.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Wk._)`{missingProperty: ${e}}`},Vgn={keyword:"required",type:"object",schemaType:"array",$data:!0,error:zgn,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,Ugn.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(Wk.nil,f);else for(const h of n)(0,eI.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,eI.checkMissingProp)(e,n,h)),(0,eI.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,eI.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,eI.propertyInData)(t,i,h,a.ownProperties)),t.if((0,Wk.not)(p),()=>{e.error(),t.break()})},Wk.nil)}}};Fle.default=Vgn;var Mle={};Object.defineProperty(Mle,"__esModule",{value:!0});const Gk=Ar,Hgn={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Gk.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Gk._)`{limit: ${e}}`},qgn={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Hgn,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?Gk.operators.GT:Gk.operators.LT;e.fail$data((0,Gk._)`${n}.length ${i} ${r}`)}};Mle.default=qgn;var $le={},kP={};Object.defineProperty(kP,"__esModule",{value:!0});const THe=Rte;THe.code='require("ajv/dist/runtime/equal").default';kP.default=THe;Object.defineProperty($le,"__esModule",{value:!0});const Hq=ra,Qa=Ar,Wgn=qt,Ggn=kP,Ygn={message:({params:{i:e,j:t}})=>(0,Qa.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Qa._)`{i: ${e}, j: ${t}}`},Kgn={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Ygn,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,Hq.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Qa._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Qa._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Qa._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,Hq.checkDataTypes)(l,g,a.opts.strictNumbers,Hq.DataType.Wrong),v=t.const("indices",(0,Qa._)`{}`);t.for((0,Qa._)`;${p}--;`,()=>{t.let(g,(0,Qa._)`${n}[${p}]`),t.if(y,(0,Qa._)`continue`),l.length>1&&t.if((0,Qa._)`typeof ${g} == "string"`,(0,Qa._)`${g} += "_"`),t.if((0,Qa._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,Qa._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Qa._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,Wgn.useFunc)(t,Ggn.default),y=t.name("outer");t.label(y).for((0,Qa._)`;${p}--;`,()=>t.for((0,Qa._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Qa._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};$le.default=Kgn;var Lle={};Object.defineProperty(Lle,"__esModule",{value:!0});const RQ=Ar,Xgn=qt,Qgn=kP,Jgn={message:"must be equal to constant",params:({schemaCode:e})=>(0,RQ._)`{allowedValue: ${e}}`},Zgn={keyword:"const",$data:!0,error:Jgn,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,RQ._)`!${(0,Xgn.useFunc)(t,Qgn.default)}(${n}, ${i})`):e.fail((0,RQ._)`${s} !== ${n}`)}};Lle.default=Zgn;var Ble={};Object.defineProperty(Ble,"__esModule",{value:!0});const YI=Ar,eyn=qt,tyn=kP,nyn={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,YI._)`{allowedValues: ${e}}`},ryn={keyword:"enum",schemaType:"array",$data:!0,error:nyn,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,eyn.useFunc)(t,tyn.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,YI.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,YI._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,YI._)`${l()}(${n}, ${h}[${p}])`:(0,YI._)`${n} === ${m}`}}};Ble.default=ryn;Object.defineProperty(Dle,"__esModule",{value:!0});const iyn=Ile,syn=kle,oyn=Rle,ayn=Ple,uyn=Ole,lyn=Fle,cyn=Mle,fyn=$le,dyn=Lle,hyn=Ble,pyn=[iyn.default,syn.default,oyn.default,ayn.default,uyn.default,lyn.default,cyn.default,fyn.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},dyn.default,hyn.default];Dle.default=pyn;var jle={},OA={};Object.defineProperty(OA,"__esModule",{value:!0});OA.validateAdditionalItems=void 0;const sw=Ar,NQ=qt,myn={message:({params:{len:e}})=>(0,sw.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,sw._)`{limit: ${e}}`},gyn={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:myn,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,NQ.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}AHe(e,r)}};function AHe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,sw._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,sw._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,NQ.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,sw._)`${a} <= ${t.length}`);n.if((0,sw.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:NQ.Type.Num},l),o.allErrors||n.if((0,sw.not)(l),()=>n.break())})}}OA.validateAdditionalItems=AHe;OA.default=gyn;var Ule={},FA={};Object.defineProperty(FA,"__esModule",{value:!0});FA.validateTuple=void 0;const h2e=Ar,qF=qt,yyn=Cr,vyn={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return DHe(e,"additionalItems",t);n.items=!0,!(0,qF.alwaysValidSchema)(n,t)&&e.ok((0,yyn.validateArray)(e))}};function DHe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=qF.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,h2e._)`${s}.length`);n.forEach((f,d)=>{(0,qF.alwaysValidSchema)(a,f)||(r.if((0,h2e._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,qF.checkStrictMode)(a,g,d.strictTuples)}}}FA.validateTuple=DHe;FA.default=vyn;Object.defineProperty(Ule,"__esModule",{value:!0});const byn=FA,xyn={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,byn.validateTuple)(e,"items")};Ule.default=xyn;var zle={};Object.defineProperty(zle,"__esModule",{value:!0});const p2e=Ar,wyn=qt,_yn=Cr,Eyn=OA,Syn={message:({params:{len:e}})=>(0,p2e.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,p2e._)`{limit: ${e}}`},Cyn={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Syn,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,wyn.alwaysValidSchema)(r,t)&&(i?(0,Eyn.validateAdditionalItems)(e,i):e.ok((0,_yn.validateArray)(e)))}};zle.default=Cyn;var Vle={};Object.defineProperty(Vle,"__esModule",{value:!0});const _d=Ar,m6=qt,Tyn={message:({params:{min:e,max:t}})=>t===void 0?(0,_d.str)`must contain at least ${e} valid item(s)`:(0,_d.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,_d._)`{minContains: ${e}}`:(0,_d._)`{minContains: ${e}, maxContains: ${t}}`},Ayn={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Tyn,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,_d._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,m6.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,m6.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,m6.alwaysValidSchema)(s,n)){let m=(0,_d._)`${c} >= ${o}`;a!==void 0&&(m=(0,_d._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,_d._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:m6.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,_d._)`${m}++`),a===void 0?t.if((0,_d._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,_d._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,_d._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};Vle.default=Ayn;var IHe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Ar,n=qt,r=Cr;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(IHe);var Hle={};Object.defineProperty(Hle,"__esModule",{value:!0});const kHe=Ar,Dyn=qt,Iyn={message:"property name must be valid",params:({params:e})=>(0,kHe._)`{propertyName: ${e.propertyName}}`},kyn={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Iyn,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Dyn.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,kHe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Hle.default=kyn;var lj={};Object.defineProperty(lj,"__esModule",{value:!0});const g6=Cr,Ah=Ar,Ryn=D0,y6=qt,Nyn={message:"must NOT have additional properties",params:({params:e})=>(0,Ah._)`{additionalProperty: ${e.additionalProperty}}`},Pyn={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Nyn,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,y6.alwaysValidSchema)(o,n))return;const l=(0,g6.allSchemaProperties)(r.properties),c=(0,g6.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Ah._)`${s} === ${Ryn.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,y6.schemaRefOrVal)(o,r.properties,"properties");y=(0,g6.isOwnProperty)(t,v,g)}else l.length?y=(0,Ah.or)(...l.map(v=>(0,Ah._)`${g} === ${v}`)):y=Ah.nil;return c.length&&(y=(0,Ah.or)(y,...c.map(v=>(0,Ah._)`${(0,g6.usePattern)(e,v)}.test(${g})`))),(0,Ah.not)(y)}function h(g){t.code((0,Ah._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,y6.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Ah.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Ah.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:y6.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};lj.default=Pyn;var qle={};Object.defineProperty(qle,"__esModule",{value:!0});const Oyn=up,m2e=Cr,qq=qt,g2e=lj,Fyn={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&g2e.default.code(new Oyn.KeywordCxt(s,g2e.default,"additionalProperties"));const o=(0,m2e.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=qq.mergeEvaluated.props(t,(0,qq.toHash)(o),s.props));const a=o.filter(f=>!(0,qq.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,m2e.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};qle.default=Fyn;var Wle={};Object.defineProperty(Wle,"__esModule",{value:!0});const y2e=Cr,v6=Ar,v2e=qt,b2e=qt,Myn={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,y2e.allSchemaProperties)(n),u=a.filter(m=>(0,v2e.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof v6.Name)&&(s.props=(0,b2e.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,v2e.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,v6._)`${(0,y2e.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:b2e.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,v6._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,v6.not)(c),()=>t.break())})})}}};Wle.default=Myn;var Gle={};Object.defineProperty(Gle,"__esModule",{value:!0});const $yn=qt,Lyn={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,$yn.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Gle.default=Lyn;var Yle={};Object.defineProperty(Yle,"__esModule",{value:!0});const Byn=Cr,jyn={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Byn.validateUnion,error:{message:"must match a schema in anyOf"}};Yle.default=jyn;var Kle={};Object.defineProperty(Kle,"__esModule",{value:!0});const WF=Ar,Uyn=qt,zyn={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,WF._)`{passingSchemas: ${e.passing}}`},Vyn={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:zyn,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,Uyn.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,WF._)`${u} && ${o}`).assign(o,!1).assign(a,(0,WF._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,WF.Name)})})}}};Kle.default=Vyn;var Xle={};Object.defineProperty(Xle,"__esModule",{value:!0});const Hyn=qt,qyn={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,Hyn.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};Xle.default=qyn;var Qle={};Object.defineProperty(Qle,"__esModule",{value:!0});const $$=Ar,RHe=qt,Wyn={message:({params:e})=>(0,$$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,$$._)`{failingKeyword: ${e.ifClause}}`},Gyn={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Wyn,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,RHe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=x2e(r,"then"),s=x2e(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,$$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,$$._)`${c}`):e.setParams({ifClause:c})}}}};function x2e(e,t){const n=e.schema[t];return n!==void 0&&!(0,RHe.alwaysValidSchema)(e,n)}Qle.default=Gyn;var Jle={};Object.defineProperty(Jle,"__esModule",{value:!0});const Yyn=qt,Kyn={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,Yyn.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Jle.default=Kyn;Object.defineProperty(jle,"__esModule",{value:!0});const Xyn=OA,Qyn=Ule,Jyn=FA,Zyn=zle,e1n=Vle,t1n=IHe,n1n=Hle,r1n=lj,i1n=qle,s1n=Wle,o1n=Gle,a1n=Yle,u1n=Kle,l1n=Xle,c1n=Qle,f1n=Jle;function d1n(e=!1){const t=[o1n.default,a1n.default,u1n.default,l1n.default,c1n.default,f1n.default,n1n.default,r1n.default,t1n.default,i1n.default,s1n.default];return e?t.push(Qyn.default,Zyn.default):t.push(Xyn.default,Jyn.default),t.push(e1n.default),t}jle.default=d1n;var Zle={},ece={};Object.defineProperty(ece,"__esModule",{value:!0});const wo=Ar,h1n={message:({schemaCode:e})=>(0,wo.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,wo._)`{format: ${e}}`},p1n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:h1n,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,wo._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,wo._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,wo._)`${m}.type || "string"`).assign(y,(0,wo._)`${m}.validate`),()=>n.assign(g,(0,wo._)`"string"`).assign(y,m)),e.fail$data((0,wo.or)(v(),b()));function v(){return u.strictSchema===!1?wo.nil:(0,wo._)`${o} && !${y}`}function b(){const _=c.$async?(0,wo._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,wo._)`${y}(${r})`,w=(0,wo._)`(typeof ${y} == "function" ? ${_} : ${y}.test(${r}))`;return(0,wo._)`${y} && ${y} !== true && ${g} === ${t} && !${w}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(_());function v(){if(u.strictSchema===!1){f.logger.warn(w());return}throw new Error(w());function w(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(w){const S=w instanceof RegExp?(0,wo.regexpCode)(w):u.code.formats?(0,wo._)`${u.code.formats}${(0,wo.getProperty)(s)}`:void 0,T=n.scopeValue("formats",{key:s,ref:w,code:S});return typeof w=="object"&&!(w instanceof RegExp)?[w.type||"string",w.validate,(0,wo._)`${T}.validate`]:["string",w,T]}function _(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,wo._)`await ${y}(${r})`}return typeof g=="function"?(0,wo._)`${y}(${r})`:(0,wo._)`${y}.test(${r})`}}}};ece.default=p1n;Object.defineProperty(Zle,"__esModule",{value:!0});const m1n=ece,g1n=[m1n.default];Zle.default=g1n;var dT={};Object.defineProperty(dT,"__esModule",{value:!0});dT.contentVocabulary=dT.metadataVocabulary=void 0;dT.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];dT.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Cle,"__esModule",{value:!0});const y1n=Tle,v1n=Dle,b1n=jle,x1n=Zle,w2e=dT,w1n=[y1n.default,v1n.default,(0,b1n.default)(),x1n.default,w2e.metadataVocabulary,w2e.contentVocabulary];Cle.default=w1n;var tce={},cj={};Object.defineProperty(cj,"__esModule",{value:!0});cj.DiscrError=void 0;var _2e;(function(e){e.Tag="tag",e.Mapping="mapping"})(_2e||(cj.DiscrError=_2e={}));Object.defineProperty(tce,"__esModule",{value:!0});const k2=Ar,PQ=cj,E2e=_c,_1n=PA,E1n=qt,S1n={message:({params:{discrError:e,tagName:t}})=>e===PQ.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,k2._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},C1n={keyword:"discriminator",type:"object",schemaType:"object",error:S1n,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,k2._)`${n}${(0,k2.getProperty)(a)}`);t.if((0,k2._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:PQ.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,k2._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:PQ.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,k2.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let _=0;_<o.length;_++){let w=o[_];if(w!=null&&w.$ref&&!(0,E1n.schemaHasRulesButRef)(w,s.self.RULES)){const T=w.$ref;if(w=E2e.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,T),w instanceof E2e.SchemaEnv&&(w=w.schema),w===void 0)throw new _1n.default(s.opts.uriResolver,s.baseId,T)}const S=(h=w==null?void 0:w.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(w)),v(S,_)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:_}){return Array.isArray(_)&&_.includes(a)}function v(_,w){if(_.const)b(_.const,w);else if(_.enum)for(const S of _.enum)b(S,w);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(_,w){if(typeof _!="string"||_ in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[_]=w}}}};tce.default=C1n;const T1n="http://json-schema.org/draft-07/schema#",A1n="http://json-schema.org/draft-07/schema#",D1n="Core schema meta-schema",I1n={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},k1n=["object","boolean"],R1n={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},N1n={$schema:T1n,$id:A1n,title:D1n,definitions:I1n,type:k1n,properties:R1n,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=qVe,r=Cle,i=tce,s=N1n,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=up;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Ar;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=IP;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=PA;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(CQ,CQ.exports);var P1n=CQ.exports;const nce=c0(P1n),O1n="#/definitions/StudyConfig",F1n="http://json-schema.org/draft-07/schema#",M1n={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},importedLibraries:{description:"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.",items:{type:"string"},type:"array"},recordStudyAudio:{description:"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.",type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},timeoutReject:{description:"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.",type:"boolean"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},$1n={$ref:O1n,$schema:F1n,definitions:M1n},L1n="#/definitions/GlobalConfig",B1n="http://json-schema.org/draft-07/schema#",j1n={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},U1n={$ref:L1n,$schema:B1n,definitions:j1n};var L$={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */L$.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,y=2,v=4,b=8,_=16,w=32,S=64,T=128,A=256,k=512,I=30,R="...",F=800,O=16,$=1,V=2,j=3,G=1/0,Y=9007199254740991,J=17976931348623157e292,L=NaN,U=4294967295,W=U-1,B=U>>>1,q=[["ary",T],["bind",g],["bindKey",y],["curry",b],["curryRight",_],["flip",k],["partial",w],["partialRight",S],["rearg",A]],Z="[object Arguments]",re="[object Array]",xe="[object AsyncFunction]",pe="[object Boolean]",Te="[object Date]",ke="[object DOMException]",it="[object Error]",Re="[object Function]",ut="[object GeneratorFunction]",Ke="[object Map]",Ct="[object Number]",gt="[object Null]",Ie="[object Object]",Ve="[object Promise]",ft="[object Proxy]",_t="[object RegExp]",Mt="[object Set]",st="[object String]",X="[object Symbol]",de="[object Undefined]",we="[object WeakMap]",ae="[object WeakSet]",he="[object ArrayBuffer]",Ee="[object DataView]",$e="[object Float32Array]",Be="[object Float64Array]",lt="[object Int8Array]",Je="[object Int16Array]",Xt="[object Int32Array]",fn="[object Uint8Array]",Wt="[object Uint8ClampedArray]",an="[object Uint16Array]",Sn="[object Uint32Array]",Mn=/\b__p \+= '';/g,ki=/\b(__p \+=) '' \+/g,di=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Li=/&(?:amp|lt|gt|quot|#39);/g,As=/[&<>"']/g,Br=RegExp(Li.source),ls=RegExp(As.source),ll=/<%-([\s\S]+?)%>/g,Fo=/<%([\s\S]+?)%>/g,qa=/<%=([\s\S]+?)%>/g,Nr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ri=/^\w*$/,hi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vs=/[\\^$.*+?()[\]{}|]/g,ri=RegExp(Vs.source),Ni=/^\s+/,ve=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_e=/\{\n\/\* \[wrapped with (.+)\] \*/,Ue=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dt=/[()=,{}\[\]\/\s]/,Ht=/\\(\\)?/g,xn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rr=/\w*$/,mr=/^[-+]0x[0-9a-f]+$/i,jn=/^0b[01]+$/i,Dr=/^\[object .+?Constructor\]$/,ii=/^0o[0-7]+$/i,dn=/^(?:0|[1-9]\d*)$/,Ir=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jr=/($^)/,ir=/['\n\r\u2028\u2029\\]/g,un="\\ud800-\\udfff",jr="\\u0300-\\u036f",Pi="\\ufe20-\\ufe2f",Ds="\\u20d0-\\u20ff",_i=jr+Pi+Ds,ns="\\u2700-\\u27bf",Yo="a-z\\xdf-\\xf6\\xf8-\\xff",Wa="\\xac\\xb1\\xd7\\xf7",Mo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Jl="\\u2000-\\u206f",td=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="A-Z\\xc0-\\xd6\\xd8-\\xde",be="\\ufe0e\\ufe0f",ue=Wa+Mo+Jl+td,De="[']",Pe="["+un+"]",Ae="["+ue+"]",Xe="["+_i+"]",pt="\\d+",yt="["+ns+"]",vt="["+Yo+"]",It="[^"+un+ue+pt+ns+Yo+te+"]",zt="\\ud83c[\\udffb-\\udfff]",Xn="(?:"+Xe+"|"+zt+")",nn="[^"+un+"]",gr="(?:\\ud83c[\\udde6-\\uddff]){2}",si="[\\ud800-\\udbff][\\udc00-\\udfff]",Pr="["+te+"]",Ko="\\u200d",sf="(?:"+vt+"|"+It+")",uh="(?:"+Pr+"|"+It+")",qy="(?:"+De+"(?:d|ll|m|re|s|t|ve))?",Lp="(?:"+De+"(?:D|LL|M|RE|S|T|VE))?",Zb=Xn+"?",cl="["+be+"]?",bu="(?:"+Ko+"(?:"+[nn,gr,si].join("|")+")"+cl+Zb+")*",lh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ex=cl+Zb+bu,ch="(?:"+[yt,gr,si].join("|")+")"+ex,tx="(?:"+[nn+Xe+"?",Xe,gr,si,Pe].join("|")+")",wE=RegExp(De,"g"),fh=RegExp(Xe,"g"),xa=RegExp(zt+"(?="+zt+")|"+tx+ex,"g"),VA=RegExp([Pr+"?"+vt+"+"+qy+"(?="+[Ae,Pr,"$"].join("|")+")",uh+"+"+Lp+"(?="+[Ae,Pr+sf,"$"].join("|")+")",Pr+"?"+sf+"+"+qy,Pr+"+"+Lp,Wy,lh,pt,ch].join("|"),"g"),_E=RegExp("["+Ko+un+_i+be+"]"),k0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,R0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],EE=-1,oi={};oi[$e]=oi[Be]=oi[lt]=oi[Je]=oi[Xt]=oi[fn]=oi[Wt]=oi[an]=oi[Sn]=!0,oi[Z]=oi[re]=oi[he]=oi[pe]=oi[Ee]=oi[Te]=oi[it]=oi[Re]=oi[Ke]=oi[Ct]=oi[Ie]=oi[_t]=oi[Mt]=oi[st]=oi[we]=!1;var Ur={};Ur[Z]=Ur[re]=Ur[he]=Ur[Ee]=Ur[pe]=Ur[Te]=Ur[$e]=Ur[Be]=Ur[lt]=Ur[Je]=Ur[Xt]=Ur[Ke]=Ur[Ct]=Ur[Ie]=Ur[_t]=Ur[Mt]=Ur[st]=Ur[X]=Ur[fn]=Ur[Wt]=Ur[an]=Ur[Sn]=!0,Ur[it]=Ur[Re]=Ur[we]=!1;var SE={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},fe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Se={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},He={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qt=parseFloat,wr=parseInt,ai=typeof on=="object"&&on&&on.Object===Object&&on,Bi=typeof self=="object"&&self&&self.Object===Object&&self,wn=ai||Bi||Function("return this")(),Ei=t&&!t.nodeType&&t,ji=Ei&&!0&&e&&!e.nodeType&&e,Xo=ji&&ji.exports===Ei,dh=Xo&&ai.process,Zs=function(){try{var Ne=ji&&ji.require&&ji.require("util").types;return Ne||dh&&dh.binding&&dh.binding("util")}catch{}}(),N0=Zs&&Zs.isArrayBuffer,P0=Zs&&Zs.isDate,nx=Zs&&Zs.isMap,HA=Zs&&Zs.isRegExp,rx=Zs&&Zs.isSet,YP=Zs&&Zs.isTypedArray;function xu(Ne,nt,qe){switch(qe.length){case 0:return Ne.call(nt);case 1:return Ne.call(nt,qe[0]);case 2:return Ne.call(nt,qe[0],qe[1]);case 3:return Ne.call(nt,qe[0],qe[1],qe[2])}return Ne.apply(nt,qe)}function ix(Ne,nt,qe,Yt){for(var Zn=-1,Ci=Ne==null?0:Ne.length;++Zn<Ci;){var Jo=Ne[Zn];nt(Yt,Jo,qe(Jo),Ne)}return Yt}function fl(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length;++qe<Yt&&nt(Ne[qe],qe,Ne)!==!1;);return Ne}function KP(Ne,nt){for(var qe=Ne==null?0:Ne.length;qe--&&nt(Ne[qe],qe,Ne)!==!1;);return Ne}function CE(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length;++qe<Yt;)if(!nt(Ne[qe],qe,Ne))return!1;return!0}function nd(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length,Zn=0,Ci=[];++qe<Yt;){var Jo=Ne[qe];nt(Jo,qe,Ne)&&(Ci[Zn++]=Jo)}return Ci}function sx(Ne,nt){var qe=Ne==null?0:Ne.length;return!!qe&&O0(Ne,nt,0)>-1}function Gy(Ne,nt,qe){for(var Yt=-1,Zn=Ne==null?0:Ne.length;++Yt<Zn;)if(qe(nt,Ne[Yt]))return!0;return!1}function rs(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length,Zn=Array(Yt);++qe<Yt;)Zn[qe]=nt(Ne[qe],qe,Ne);return Zn}function hh(Ne,nt){for(var qe=-1,Yt=nt.length,Zn=Ne.length;++qe<Yt;)Ne[Zn+qe]=nt[qe];return Ne}function ph(Ne,nt,qe,Yt){var Zn=-1,Ci=Ne==null?0:Ne.length;for(Yt&&Ci&&(qe=Ne[++Zn]);++Zn<Ci;)qe=nt(qe,Ne[Zn],Zn,Ne);return qe}function XP(Ne,nt,qe,Yt){var Zn=Ne==null?0:Ne.length;for(Yt&&Zn&&(qe=Ne[--Zn]);Zn--;)qe=nt(qe,Ne[Zn],Zn,Ne);return qe}function TE(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length;++qe<Yt;)if(nt(Ne[qe],qe,Ne))return!0;return!1}var QP=K("length");function JP(Ne){return Ne.split("")}function AE(Ne){return Ne.match(je)||[]}function wu(Ne,nt,qe){var Yt;return qe(Ne,function(Zn,Ci,Jo){if(nt(Zn,Ci,Jo))return Yt=Ci,!1}),Yt}function ox(Ne,nt,qe,Yt){for(var Zn=Ne.length,Ci=qe+(Yt?1:-1);Yt?Ci--:++Ci<Zn;)if(nt(Ne[Ci],Ci,Ne))return Ci;return-1}function O0(Ne,nt,qe){return nt===nt?BGe(Ne,nt,qe):ox(Ne,D,qe)}function Yy(Ne,nt,qe,Yt){for(var Zn=qe-1,Ci=Ne.length;++Zn<Ci;)if(Yt(Ne[Zn],nt))return Zn;return-1}function D(Ne){return Ne!==Ne}function z(Ne,nt){var qe=Ne==null?0:Ne.length;return qe?Ft(Ne,nt)/qe:L}function K(Ne){return function(nt){return nt==null?n:nt[Ne]}}function ie(Ne){return function(nt){return Ne==null?n:Ne[nt]}}function Me(Ne,nt,qe,Yt,Zn){return Zn(Ne,function(Ci,Jo,is){qe=Yt?(Yt=!1,Ci):nt(qe,Ci,Jo,is)}),qe}function Ge(Ne,nt){var qe=Ne.length;for(Ne.sort(nt);qe--;)Ne[qe]=Ne[qe].value;return Ne}function Ft(Ne,nt){for(var qe,Yt=-1,Zn=Ne.length;++Yt<Zn;){var Ci=nt(Ne[Yt]);Ci!==n&&(qe=qe===n?Ci:qe+Ci)}return qe}function Si(Ne,nt){for(var qe=-1,Yt=Array(Ne);++qe<Ne;)Yt[qe]=nt(qe);return Yt}function Qo(Ne,nt){return rs(nt,function(qe){return[qe,Ne[qe]]})}function zr(Ne){return Ne&&Ne.slice(0,ffe(Ne)+1).replace(Ni,"")}function Oi(Ne){return function(nt){return Ne(nt)}}function $o(Ne,nt){return rs(nt,function(qe){return Ne[qe]})}function rd(Ne,nt){return Ne.has(nt)}function Zl(Ne,nt){for(var qe=-1,Yt=Ne.length;++qe<Yt&&O0(nt,Ne[qe],0)>-1;);return qe}function ax(Ne,nt){for(var qe=Ne.length;qe--&&O0(nt,Ne[qe],0)>-1;);return qe}function qA(Ne,nt){for(var qe=Ne.length,Yt=0;qe--;)Ne[qe]===nt&&++Yt;return Yt}var NGe=ie(SE),PGe=ie(fe);function OGe(Ne){return"\\"+He[Ne]}function FGe(Ne,nt){return Ne==null?n:Ne[nt]}function DE(Ne){return _E.test(Ne)}function MGe(Ne){return k0.test(Ne)}function $Ge(Ne){for(var nt,qe=[];!(nt=Ne.next()).done;)qe.push(nt.value);return qe}function Oj(Ne){var nt=-1,qe=Array(Ne.size);return Ne.forEach(function(Yt,Zn){qe[++nt]=[Zn,Yt]}),qe}function cfe(Ne,nt){return function(qe){return Ne(nt(qe))}}function Ky(Ne,nt){for(var qe=-1,Yt=Ne.length,Zn=0,Ci=[];++qe<Yt;){var Jo=Ne[qe];(Jo===nt||Jo===c)&&(Ne[qe]=c,Ci[Zn++]=qe)}return Ci}function ZP(Ne){var nt=-1,qe=Array(Ne.size);return Ne.forEach(function(Yt){qe[++nt]=Yt}),qe}function LGe(Ne){var nt=-1,qe=Array(Ne.size);return Ne.forEach(function(Yt){qe[++nt]=[Yt,Yt]}),qe}function BGe(Ne,nt,qe){for(var Yt=qe-1,Zn=Ne.length;++Yt<Zn;)if(Ne[Yt]===nt)return Yt;return-1}function jGe(Ne,nt,qe){for(var Yt=qe+1;Yt--;)if(Ne[Yt]===nt)return Yt;return Yt}function IE(Ne){return DE(Ne)?zGe(Ne):QP(Ne)}function mh(Ne){return DE(Ne)?VGe(Ne):JP(Ne)}function ffe(Ne){for(var nt=Ne.length;nt--&&ve.test(Ne.charAt(nt)););return nt}var UGe=ie(Se);function zGe(Ne){for(var nt=xa.lastIndex=0;xa.test(Ne);)++nt;return nt}function VGe(Ne){return Ne.match(xa)||[]}function HGe(Ne){return Ne.match(VA)||[]}var qGe=function Ne(nt){nt=nt==null?wn:kE.defaults(wn.Object(),nt,kE.pick(wn,R0));var qe=nt.Array,Yt=nt.Date,Zn=nt.Error,Ci=nt.Function,Jo=nt.Math,is=nt.Object,Fj=nt.RegExp,WGe=nt.String,id=nt.TypeError,eO=qe.prototype,GGe=Ci.prototype,RE=is.prototype,tO=nt["__core-js_shared__"],nO=GGe.toString,Ui=RE.hasOwnProperty,YGe=0,dfe=function(){var x=/[^.]+$/.exec(tO&&tO.keys&&tO.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),rO=RE.toString,KGe=nO.call(is),XGe=wn._,QGe=Fj("^"+nO.call(Ui).replace(Vs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),iO=Xo?nt.Buffer:n,Xy=nt.Symbol,sO=nt.Uint8Array,hfe=iO?iO.allocUnsafe:n,oO=cfe(is.getPrototypeOf,is),pfe=is.create,mfe=RE.propertyIsEnumerable,aO=eO.splice,gfe=Xy?Xy.isConcatSpreadable:n,WA=Xy?Xy.iterator:n,ux=Xy?Xy.toStringTag:n,uO=function(){try{var x=hx(is,"defineProperty");return x({},"",{}),x}catch{}}(),JGe=nt.clearTimeout!==wn.clearTimeout&&nt.clearTimeout,ZGe=Yt&&Yt.now!==wn.Date.now&&Yt.now,eYe=nt.setTimeout!==wn.setTimeout&&nt.setTimeout,lO=Jo.ceil,cO=Jo.floor,Mj=is.getOwnPropertySymbols,tYe=iO?iO.isBuffer:n,yfe=nt.isFinite,nYe=eO.join,rYe=cfe(is.keys,is),Zo=Jo.max,_u=Jo.min,iYe=Yt.now,sYe=nt.parseInt,vfe=Jo.random,oYe=eO.reverse,$j=hx(nt,"DataView"),GA=hx(nt,"Map"),Lj=hx(nt,"Promise"),NE=hx(nt,"Set"),YA=hx(nt,"WeakMap"),KA=hx(is,"create"),fO=YA&&new YA,PE={},aYe=px($j),uYe=px(GA),lYe=px(Lj),cYe=px(NE),fYe=px(YA),dO=Xy?Xy.prototype:n,XA=dO?dO.valueOf:n,bfe=dO?dO.toString:n;function ee(x){if(eo(x)&&!nr(x)&&!(x instanceof Or)){if(x instanceof sd)return x;if(Ui.call(x,"__wrapped__"))return xde(x)}return new sd(x)}var OE=function(){function x(){}return function(C){if(!Hs(C))return{};if(pfe)return pfe(C);x.prototype=C;var P=new x;return x.prototype=n,P}}();function hO(){}function sd(x,C){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=n}ee.templateSettings={escape:ll,evaluate:Fo,interpolate:qa,variable:"",imports:{_:ee}},ee.prototype=hO.prototype,ee.prototype.constructor=ee,sd.prototype=OE(hO.prototype),sd.prototype.constructor=sd;function Or(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function dYe(){var x=new Or(this.__wrapped__);return x.__actions__=ec(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=ec(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=ec(this.__views__),x}function hYe(){if(this.__filtered__){var x=new Or(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function pYe(){var x=this.__wrapped__.value(),C=this.__dir__,P=nr(x),H=C<0,Q=P?x.length:0,se=TKe(0,Q,this.__views__),me=se.start,Ce=se.end,Oe=Ce-me,ct=H?Ce:me-1,dt=this.__iteratees__,bt=dt.length,Ut=0,sn=_u(Oe,this.__takeCount__);if(!P||!H&&Q==Oe&&sn==Oe)return Vfe(x,this.__actions__);var In=[];e:for(;Oe--&&Ut<sn;){ct+=C;for(var yr=-1,kn=x[ct];++yr<bt;){var kr=dt[yr],Vr=kr.iteratee,uf=kr.type,pl=Vr(kn);if(uf==V)kn=pl;else if(!pl){if(uf==$)continue e;break e}}In[Ut++]=kn}return In}Or.prototype=OE(hO.prototype),Or.prototype.constructor=Or;function lx(x){var C=-1,P=x==null?0:x.length;for(this.clear();++C<P;){var H=x[C];this.set(H[0],H[1])}}function mYe(){this.__data__=KA?KA(null):{},this.size=0}function gYe(x){var C=this.has(x)&&delete this.__data__[x];return this.size-=C?1:0,C}function yYe(x){var C=this.__data__;if(KA){var P=C[x];return P===u?n:P}return Ui.call(C,x)?C[x]:n}function vYe(x){var C=this.__data__;return KA?C[x]!==n:Ui.call(C,x)}function bYe(x,C){var P=this.__data__;return this.size+=this.has(x)?0:1,P[x]=KA&&C===n?u:C,this}lx.prototype.clear=mYe,lx.prototype.delete=gYe,lx.prototype.get=yYe,lx.prototype.has=vYe,lx.prototype.set=bYe;function F0(x){var C=-1,P=x==null?0:x.length;for(this.clear();++C<P;){var H=x[C];this.set(H[0],H[1])}}function xYe(){this.__data__=[],this.size=0}function wYe(x){var C=this.__data__,P=pO(C,x);if(P<0)return!1;var H=C.length-1;return P==H?C.pop():aO.call(C,P,1),--this.size,!0}function _Ye(x){var C=this.__data__,P=pO(C,x);return P<0?n:C[P][1]}function EYe(x){return pO(this.__data__,x)>-1}function SYe(x,C){var P=this.__data__,H=pO(P,x);return H<0?(++this.size,P.push([x,C])):P[H][1]=C,this}F0.prototype.clear=xYe,F0.prototype.delete=wYe,F0.prototype.get=_Ye,F0.prototype.has=EYe,F0.prototype.set=SYe;function M0(x){var C=-1,P=x==null?0:x.length;for(this.clear();++C<P;){var H=x[C];this.set(H[0],H[1])}}function CYe(){this.size=0,this.__data__={hash:new lx,map:new(GA||F0),string:new lx}}function TYe(x){var C=TO(this,x).delete(x);return this.size-=C?1:0,C}function AYe(x){return TO(this,x).get(x)}function DYe(x){return TO(this,x).has(x)}function IYe(x,C){var P=TO(this,x),H=P.size;return P.set(x,C),this.size+=P.size==H?0:1,this}M0.prototype.clear=CYe,M0.prototype.delete=TYe,M0.prototype.get=AYe,M0.prototype.has=DYe,M0.prototype.set=IYe;function cx(x){var C=-1,P=x==null?0:x.length;for(this.__data__=new M0;++C<P;)this.add(x[C])}function kYe(x){return this.__data__.set(x,u),this}function RYe(x){return this.__data__.has(x)}cx.prototype.add=cx.prototype.push=kYe,cx.prototype.has=RYe;function gh(x){var C=this.__data__=new F0(x);this.size=C.size}function NYe(){this.__data__=new F0,this.size=0}function PYe(x){var C=this.__data__,P=C.delete(x);return this.size=C.size,P}function OYe(x){return this.__data__.get(x)}function FYe(x){return this.__data__.has(x)}function MYe(x,C){var P=this.__data__;if(P instanceof F0){var H=P.__data__;if(!GA||H.length<i-1)return H.push([x,C]),this.size=++P.size,this;P=this.__data__=new M0(H)}return P.set(x,C),this.size=P.size,this}gh.prototype.clear=NYe,gh.prototype.delete=PYe,gh.prototype.get=OYe,gh.prototype.has=FYe,gh.prototype.set=MYe;function xfe(x,C){var P=nr(x),H=!P&&mx(x),Q=!P&&!H&&t1(x),se=!P&&!H&&!Q&&LE(x),me=P||H||Q||se,Ce=me?Si(x.length,WGe):[],Oe=Ce.length;for(var ct in x)(C||Ui.call(x,ct))&&!(me&&(ct=="length"||Q&&(ct=="offset"||ct=="parent")||se&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||j0(ct,Oe)))&&Ce.push(ct);return Ce}function wfe(x){var C=x.length;return C?x[Kj(0,C-1)]:n}function $Ye(x,C){return AO(ec(x),fx(C,0,x.length))}function LYe(x){return AO(ec(x))}function Bj(x,C,P){(P!==n&&!yh(x[C],P)||P===n&&!(C in x))&&$0(x,C,P)}function QA(x,C,P){var H=x[C];(!(Ui.call(x,C)&&yh(H,P))||P===n&&!(C in x))&&$0(x,C,P)}function pO(x,C){for(var P=x.length;P--;)if(yh(x[P][0],C))return P;return-1}function BYe(x,C,P,H){return Qy(x,function(Q,se,me){C(H,Q,P(Q),me)}),H}function _fe(x,C){return x&&jp(C,wa(C),x)}function jYe(x,C){return x&&jp(C,nc(C),x)}function $0(x,C,P){C=="__proto__"&&uO?uO(x,C,{configurable:!0,enumerable:!0,value:P,writable:!0}):x[C]=P}function jj(x,C){for(var P=-1,H=C.length,Q=qe(H),se=x==null;++P<H;)Q[P]=se?n:xU(x,C[P]);return Q}function fx(x,C,P){return x===x&&(P!==n&&(x=x<=P?x:P),C!==n&&(x=x>=C?x:C)),x}function od(x,C,P,H,Q,se){var me,Ce=C&f,Oe=C&d,ct=C&h;if(P&&(me=Q?P(x,H,Q,se):P(x)),me!==n)return me;if(!Hs(x))return x;var dt=nr(x);if(dt){if(me=DKe(x),!Ce)return ec(x,me)}else{var bt=Eu(x),Ut=bt==Re||bt==ut;if(t1(x))return Wfe(x,Ce);if(bt==Ie||bt==Z||Ut&&!Q){if(me=Oe||Ut?{}:fde(x),!Ce)return Oe?yKe(x,jYe(me,x)):gKe(x,_fe(me,x))}else{if(!Ur[bt])return Q?x:{};me=IKe(x,bt,Ce)}}se||(se=new gh);var sn=se.get(x);if(sn)return sn;se.set(x,me),jde(x)?x.forEach(function(kn){me.add(od(kn,C,P,kn,x,se))}):Lde(x)&&x.forEach(function(kn,kr){me.set(kr,od(kn,C,P,kr,x,se))});var In=ct?Oe?oU:sU:Oe?nc:wa,yr=dt?n:In(x);return fl(yr||x,function(kn,kr){yr&&(kr=kn,kn=x[kr]),QA(me,kr,od(kn,C,P,kr,x,se))}),me}function UYe(x){var C=wa(x);return function(P){return Efe(P,x,C)}}function Efe(x,C,P){var H=P.length;if(x==null)return!H;for(x=is(x);H--;){var Q=P[H],se=C[Q],me=x[Q];if(me===n&&!(Q in x)||!se(me))return!1}return!0}function Sfe(x,C,P){if(typeof x!="function")throw new id(o);return iD(function(){x.apply(n,P)},C)}function JA(x,C,P,H){var Q=-1,se=sx,me=!0,Ce=x.length,Oe=[],ct=C.length;if(!Ce)return Oe;P&&(C=rs(C,Oi(P))),H?(se=Gy,me=!1):C.length>=i&&(se=rd,me=!1,C=new cx(C));e:for(;++Q<Ce;){var dt=x[Q],bt=P==null?dt:P(dt);if(dt=H||dt!==0?dt:0,me&&bt===bt){for(var Ut=ct;Ut--;)if(C[Ut]===bt)continue e;Oe.push(dt)}else se(C,bt,H)||Oe.push(dt)}return Oe}var Qy=Qfe(Bp),Cfe=Qfe(zj,!0);function zYe(x,C){var P=!0;return Qy(x,function(H,Q,se){return P=!!C(H,Q,se),P}),P}function mO(x,C,P){for(var H=-1,Q=x.length;++H<Q;){var se=x[H],me=C(se);if(me!=null&&(Ce===n?me===me&&!af(me):P(me,Ce)))var Ce=me,Oe=se}return Oe}function VYe(x,C,P,H){var Q=x.length;for(P=fr(P),P<0&&(P=-P>Q?0:Q+P),H=H===n||H>Q?Q:fr(H),H<0&&(H+=Q),H=P>H?0:zde(H);P<H;)x[P++]=C;return x}function Tfe(x,C){var P=[];return Qy(x,function(H,Q,se){C(H,Q,se)&&P.push(H)}),P}function Ga(x,C,P,H,Q){var se=-1,me=x.length;for(P||(P=RKe),Q||(Q=[]);++se<me;){var Ce=x[se];C>0&&P(Ce)?C>1?Ga(Ce,C-1,P,H,Q):hh(Q,Ce):H||(Q[Q.length]=Ce)}return Q}var Uj=Jfe(),Afe=Jfe(!0);function Bp(x,C){return x&&Uj(x,C,wa)}function zj(x,C){return x&&Afe(x,C,wa)}function gO(x,C){return nd(C,function(P){return U0(x[P])})}function dx(x,C){C=Zy(C,x);for(var P=0,H=C.length;x!=null&&P<H;)x=x[Up(C[P++])];return P&&P==H?x:n}function Dfe(x,C,P){var H=C(x);return nr(x)?H:hh(H,P(x))}function dl(x){return x==null?x===n?de:gt:ux&&ux in is(x)?CKe(x):LKe(x)}function Vj(x,C){return x>C}function HYe(x,C){return x!=null&&Ui.call(x,C)}function qYe(x,C){return x!=null&&C in is(x)}function WYe(x,C,P){return x>=_u(C,P)&&x<Zo(C,P)}function Hj(x,C,P){for(var H=P?Gy:sx,Q=x[0].length,se=x.length,me=se,Ce=qe(se),Oe=1/0,ct=[];me--;){var dt=x[me];me&&C&&(dt=rs(dt,Oi(C))),Oe=_u(dt.length,Oe),Ce[me]=!P&&(C||Q>=120&&dt.length>=120)?new cx(me&&dt):n}dt=x[0];var bt=-1,Ut=Ce[0];e:for(;++bt<Q&&ct.length<Oe;){var sn=dt[bt],In=C?C(sn):sn;if(sn=P||sn!==0?sn:0,!(Ut?rd(Ut,In):H(ct,In,P))){for(me=se;--me;){var yr=Ce[me];if(!(yr?rd(yr,In):H(x[me],In,P)))continue e}Ut&&Ut.push(In),ct.push(sn)}}return ct}function GYe(x,C,P,H){return Bp(x,function(Q,se,me){C(H,P(Q),se,me)}),H}function ZA(x,C,P){C=Zy(C,x),x=mde(x,C);var H=x==null?x:x[Up(ud(C))];return H==null?n:xu(H,x,P)}function Ife(x){return eo(x)&&dl(x)==Z}function YYe(x){return eo(x)&&dl(x)==he}function KYe(x){return eo(x)&&dl(x)==Te}function eD(x,C,P,H,Q){return x===C?!0:x==null||C==null||!eo(x)&&!eo(C)?x!==x&&C!==C:XYe(x,C,P,H,eD,Q)}function XYe(x,C,P,H,Q,se){var me=nr(x),Ce=nr(C),Oe=me?re:Eu(x),ct=Ce?re:Eu(C);Oe=Oe==Z?Ie:Oe,ct=ct==Z?Ie:ct;var dt=Oe==Ie,bt=ct==Ie,Ut=Oe==ct;if(Ut&&t1(x)){if(!t1(C))return!1;me=!0,dt=!1}if(Ut&&!dt)return se||(se=new gh),me||LE(x)?ude(x,C,P,H,Q,se):EKe(x,C,Oe,P,H,Q,se);if(!(P&p)){var sn=dt&&Ui.call(x,"__wrapped__"),In=bt&&Ui.call(C,"__wrapped__");if(sn||In){var yr=sn?x.value():x,kn=In?C.value():C;return se||(se=new gh),Q(yr,kn,P,H,se)}}return Ut?(se||(se=new gh),SKe(x,C,P,H,Q,se)):!1}function QYe(x){return eo(x)&&Eu(x)==Ke}function qj(x,C,P,H){var Q=P.length,se=Q,me=!H;if(x==null)return!se;for(x=is(x);Q--;){var Ce=P[Q];if(me&&Ce[2]?Ce[1]!==x[Ce[0]]:!(Ce[0]in x))return!1}for(;++Q<se;){Ce=P[Q];var Oe=Ce[0],ct=x[Oe],dt=Ce[1];if(me&&Ce[2]){if(ct===n&&!(Oe in x))return!1}else{var bt=new gh;if(H)var Ut=H(ct,dt,Oe,x,C,bt);if(!(Ut===n?eD(dt,ct,p|m,H,bt):Ut))return!1}}return!0}function kfe(x){if(!Hs(x)||PKe(x))return!1;var C=U0(x)?QGe:Dr;return C.test(px(x))}function JYe(x){return eo(x)&&dl(x)==_t}function ZYe(x){return eo(x)&&Eu(x)==Mt}function eKe(x){return eo(x)&&PO(x.length)&&!!oi[dl(x)]}function Rfe(x){return typeof x=="function"?x:x==null?rc:typeof x=="object"?nr(x)?Ofe(x[0],x[1]):Pfe(x):Zde(x)}function Wj(x){if(!rD(x))return rYe(x);var C=[];for(var P in is(x))Ui.call(x,P)&&P!="constructor"&&C.push(P);return C}function tKe(x){if(!Hs(x))return $Ke(x);var C=rD(x),P=[];for(var H in x)H=="constructor"&&(C||!Ui.call(x,H))||P.push(H);return P}function Gj(x,C){return x<C}function Nfe(x,C){var P=-1,H=tc(x)?qe(x.length):[];return Qy(x,function(Q,se,me){H[++P]=C(Q,se,me)}),H}function Pfe(x){var C=uU(x);return C.length==1&&C[0][2]?hde(C[0][0],C[0][1]):function(P){return P===x||qj(P,x,C)}}function Ofe(x,C){return cU(x)&&dde(C)?hde(Up(x),C):function(P){var H=xU(P,x);return H===n&&H===C?wU(P,x):eD(C,H,p|m)}}function yO(x,C,P,H,Q){x!==C&&Uj(C,function(se,me){if(Q||(Q=new gh),Hs(se))nKe(x,C,me,P,yO,H,Q);else{var Ce=H?H(dU(x,me),se,me+"",x,C,Q):n;Ce===n&&(Ce=se),Bj(x,me,Ce)}},nc)}function nKe(x,C,P,H,Q,se,me){var Ce=dU(x,P),Oe=dU(C,P),ct=me.get(Oe);if(ct){Bj(x,P,ct);return}var dt=se?se(Ce,Oe,P+"",x,C,me):n,bt=dt===n;if(bt){var Ut=nr(Oe),sn=!Ut&&t1(Oe),In=!Ut&&!sn&&LE(Oe);dt=Oe,Ut||sn||In?nr(Ce)?dt=Ce:vo(Ce)?dt=ec(Ce):sn?(bt=!1,dt=Wfe(Oe,!0)):In?(bt=!1,dt=Gfe(Oe,!0)):dt=[]:sD(Oe)||mx(Oe)?(dt=Ce,mx(Ce)?dt=Vde(Ce):(!Hs(Ce)||U0(Ce))&&(dt=fde(Oe))):bt=!1}bt&&(me.set(Oe,dt),Q(dt,Oe,H,se,me),me.delete(Oe)),Bj(x,P,dt)}function Ffe(x,C){var P=x.length;if(P)return C+=C<0?P:0,j0(C,P)?x[C]:n}function Mfe(x,C,P){C.length?C=rs(C,function(se){return nr(se)?function(me){return dx(me,se.length===1?se[0]:se)}:se}):C=[rc];var H=-1;C=rs(C,Oi(An()));var Q=Nfe(x,function(se,me,Ce){var Oe=rs(C,function(ct){return ct(se)});return{criteria:Oe,index:++H,value:se}});return Ge(Q,function(se,me){return mKe(se,me,P)})}function rKe(x,C){return $fe(x,C,function(P,H){return wU(x,H)})}function $fe(x,C,P){for(var H=-1,Q=C.length,se={};++H<Q;){var me=C[H],Ce=dx(x,me);P(Ce,me)&&tD(se,Zy(me,x),Ce)}return se}function iKe(x){return function(C){return dx(C,x)}}function Yj(x,C,P,H){var Q=H?Yy:O0,se=-1,me=C.length,Ce=x;for(x===C&&(C=ec(C)),P&&(Ce=rs(x,Oi(P)));++se<me;)for(var Oe=0,ct=C[se],dt=P?P(ct):ct;(Oe=Q(Ce,dt,Oe,H))>-1;)Ce!==x&&aO.call(Ce,Oe,1),aO.call(x,Oe,1);return x}function Lfe(x,C){for(var P=x?C.length:0,H=P-1;P--;){var Q=C[P];if(P==H||Q!==se){var se=Q;j0(Q)?aO.call(x,Q,1):Jj(x,Q)}}return x}function Kj(x,C){return x+cO(vfe()*(C-x+1))}function sKe(x,C,P,H){for(var Q=-1,se=Zo(lO((C-x)/(P||1)),0),me=qe(se);se--;)me[H?se:++Q]=x,x+=P;return me}function Xj(x,C){var P="";if(!x||C<1||C>Y)return P;do C%2&&(P+=x),C=cO(C/2),C&&(x+=x);while(C);return P}function _r(x,C){return hU(pde(x,C,rc),x+"")}function oKe(x){return wfe(BE(x))}function aKe(x,C){var P=BE(x);return AO(P,fx(C,0,P.length))}function tD(x,C,P,H){if(!Hs(x))return x;C=Zy(C,x);for(var Q=-1,se=C.length,me=se-1,Ce=x;Ce!=null&&++Q<se;){var Oe=Up(C[Q]),ct=P;if(Oe==="__proto__"||Oe==="constructor"||Oe==="prototype")return x;if(Q!=me){var dt=Ce[Oe];ct=H?H(dt,Oe,Ce):n,ct===n&&(ct=Hs(dt)?dt:j0(C[Q+1])?[]:{})}QA(Ce,Oe,ct),Ce=Ce[Oe]}return x}var Bfe=fO?function(x,C){return fO.set(x,C),x}:rc,uKe=uO?function(x,C){return uO(x,"toString",{configurable:!0,enumerable:!1,value:EU(C),writable:!0})}:rc;function lKe(x){return AO(BE(x))}function ad(x,C,P){var H=-1,Q=x.length;C<0&&(C=-C>Q?0:Q+C),P=P>Q?Q:P,P<0&&(P+=Q),Q=C>P?0:P-C>>>0,C>>>=0;for(var se=qe(Q);++H<Q;)se[H]=x[H+C];return se}function cKe(x,C){var P;return Qy(x,function(H,Q,se){return P=C(H,Q,se),!P}),!!P}function vO(x,C,P){var H=0,Q=x==null?H:x.length;if(typeof C=="number"&&C===C&&Q<=B){for(;H<Q;){var se=H+Q>>>1,me=x[se];me!==null&&!af(me)&&(P?me<=C:me<C)?H=se+1:Q=se}return Q}return Qj(x,C,rc,P)}function Qj(x,C,P,H){var Q=0,se=x==null?0:x.length;if(se===0)return 0;C=P(C);for(var me=C!==C,Ce=C===null,Oe=af(C),ct=C===n;Q<se;){var dt=cO((Q+se)/2),bt=P(x[dt]),Ut=bt!==n,sn=bt===null,In=bt===bt,yr=af(bt);if(me)var kn=H||In;else ct?kn=In&&(H||Ut):Ce?kn=In&&Ut&&(H||!sn):Oe?kn=In&&Ut&&!sn&&(H||!yr):sn||yr?kn=!1:kn=H?bt<=C:bt<C;kn?Q=dt+1:se=dt}return _u(se,W)}function jfe(x,C){for(var P=-1,H=x.length,Q=0,se=[];++P<H;){var me=x[P],Ce=C?C(me):me;if(!P||!yh(Ce,Oe)){var Oe=Ce;se[Q++]=me===0?0:me}}return se}function Ufe(x){return typeof x=="number"?x:af(x)?L:+x}function of(x){if(typeof x=="string")return x;if(nr(x))return rs(x,of)+"";if(af(x))return bfe?bfe.call(x):"";var C=x+"";return C=="0"&&1/x==-1/0?"-0":C}function Jy(x,C,P){var H=-1,Q=sx,se=x.length,me=!0,Ce=[],Oe=Ce;if(P)me=!1,Q=Gy;else if(se>=i){var ct=C?null:wKe(x);if(ct)return ZP(ct);me=!1,Q=rd,Oe=new cx}else Oe=C?[]:Ce;e:for(;++H<se;){var dt=x[H],bt=C?C(dt):dt;if(dt=P||dt!==0?dt:0,me&&bt===bt){for(var Ut=Oe.length;Ut--;)if(Oe[Ut]===bt)continue e;C&&Oe.push(bt),Ce.push(dt)}else Q(Oe,bt,P)||(Oe!==Ce&&Oe.push(bt),Ce.push(dt))}return Ce}function Jj(x,C){return C=Zy(C,x),x=mde(x,C),x==null||delete x[Up(ud(C))]}function zfe(x,C,P,H){return tD(x,C,P(dx(x,C)),H)}function bO(x,C,P,H){for(var Q=x.length,se=H?Q:-1;(H?se--:++se<Q)&&C(x[se],se,x););return P?ad(x,H?0:se,H?se+1:Q):ad(x,H?se+1:0,H?Q:se)}function Vfe(x,C){var P=x;return P instanceof Or&&(P=P.value()),ph(C,function(H,Q){return Q.func.apply(Q.thisArg,hh([H],Q.args))},P)}function Zj(x,C,P){var H=x.length;if(H<2)return H?Jy(x[0]):[];for(var Q=-1,se=qe(H);++Q<H;)for(var me=x[Q],Ce=-1;++Ce<H;)Ce!=Q&&(se[Q]=JA(se[Q]||me,x[Ce],C,P));return Jy(Ga(se,1),C,P)}function Hfe(x,C,P){for(var H=-1,Q=x.length,se=C.length,me={};++H<Q;){var Ce=H<se?C[H]:n;P(me,x[H],Ce)}return me}function eU(x){return vo(x)?x:[]}function tU(x){return typeof x=="function"?x:rc}function Zy(x,C){return nr(x)?x:cU(x,C)?[x]:bde(Fi(x))}var fKe=_r;function e1(x,C,P){var H=x.length;return P=P===n?H:P,!C&&P>=H?x:ad(x,C,P)}var qfe=JGe||function(x){return wn.clearTimeout(x)};function Wfe(x,C){if(C)return x.slice();var P=x.length,H=hfe?hfe(P):new x.constructor(P);return x.copy(H),H}function nU(x){var C=new x.constructor(x.byteLength);return new sO(C).set(new sO(x)),C}function dKe(x,C){var P=C?nU(x.buffer):x.buffer;return new x.constructor(P,x.byteOffset,x.byteLength)}function hKe(x){var C=new x.constructor(x.source,rr.exec(x));return C.lastIndex=x.lastIndex,C}function pKe(x){return XA?is(XA.call(x)):{}}function Gfe(x,C){var P=C?nU(x.buffer):x.buffer;return new x.constructor(P,x.byteOffset,x.length)}function Yfe(x,C){if(x!==C){var P=x!==n,H=x===null,Q=x===x,se=af(x),me=C!==n,Ce=C===null,Oe=C===C,ct=af(C);if(!Ce&&!ct&&!se&&x>C||se&&me&&Oe&&!Ce&&!ct||H&&me&&Oe||!P&&Oe||!Q)return 1;if(!H&&!se&&!ct&&x<C||ct&&P&&Q&&!H&&!se||Ce&&P&&Q||!me&&Q||!Oe)return-1}return 0}function mKe(x,C,P){for(var H=-1,Q=x.criteria,se=C.criteria,me=Q.length,Ce=P.length;++H<me;){var Oe=Yfe(Q[H],se[H]);if(Oe){if(H>=Ce)return Oe;var ct=P[H];return Oe*(ct=="desc"?-1:1)}}return x.index-C.index}function Kfe(x,C,P,H){for(var Q=-1,se=x.length,me=P.length,Ce=-1,Oe=C.length,ct=Zo(se-me,0),dt=qe(Oe+ct),bt=!H;++Ce<Oe;)dt[Ce]=C[Ce];for(;++Q<me;)(bt||Q<se)&&(dt[P[Q]]=x[Q]);for(;ct--;)dt[Ce++]=x[Q++];return dt}function Xfe(x,C,P,H){for(var Q=-1,se=x.length,me=-1,Ce=P.length,Oe=-1,ct=C.length,dt=Zo(se-Ce,0),bt=qe(dt+ct),Ut=!H;++Q<dt;)bt[Q]=x[Q];for(var sn=Q;++Oe<ct;)bt[sn+Oe]=C[Oe];for(;++me<Ce;)(Ut||Q<se)&&(bt[sn+P[me]]=x[Q++]);return bt}function ec(x,C){var P=-1,H=x.length;for(C||(C=qe(H));++P<H;)C[P]=x[P];return C}function jp(x,C,P,H){var Q=!P;P||(P={});for(var se=-1,me=C.length;++se<me;){var Ce=C[se],Oe=H?H(P[Ce],x[Ce],Ce,P,x):n;Oe===n&&(Oe=x[Ce]),Q?$0(P,Ce,Oe):QA(P,Ce,Oe)}return P}function gKe(x,C){return jp(x,lU(x),C)}function yKe(x,C){return jp(x,lde(x),C)}function xO(x,C){return function(P,H){var Q=nr(P)?ix:BYe,se=C?C():{};return Q(P,x,An(H,2),se)}}function FE(x){return _r(function(C,P){var H=-1,Q=P.length,se=Q>1?P[Q-1]:n,me=Q>2?P[2]:n;for(se=x.length>3&&typeof se=="function"?(Q--,se):n,me&&hl(P[0],P[1],me)&&(se=Q<3?n:se,Q=1),C=is(C);++H<Q;){var Ce=P[H];Ce&&x(C,Ce,H,se)}return C})}function Qfe(x,C){return function(P,H){if(P==null)return P;if(!tc(P))return x(P,H);for(var Q=P.length,se=C?Q:-1,me=is(P);(C?se--:++se<Q)&&H(me[se],se,me)!==!1;);return P}}function Jfe(x){return function(C,P,H){for(var Q=-1,se=is(C),me=H(C),Ce=me.length;Ce--;){var Oe=me[x?Ce:++Q];if(P(se[Oe],Oe,se)===!1)break}return C}}function vKe(x,C,P){var H=C&g,Q=nD(x);function se(){var me=this&&this!==wn&&this instanceof se?Q:x;return me.apply(H?P:this,arguments)}return se}function Zfe(x){return function(C){C=Fi(C);var P=DE(C)?mh(C):n,H=P?P[0]:C.charAt(0),Q=P?e1(P,1).join(""):C.slice(1);return H[x]()+Q}}function ME(x){return function(C){return ph(Qde(Xde(C).replace(wE,"")),x,"")}}function nD(x){return function(){var C=arguments;switch(C.length){case 0:return new x;case 1:return new x(C[0]);case 2:return new x(C[0],C[1]);case 3:return new x(C[0],C[1],C[2]);case 4:return new x(C[0],C[1],C[2],C[3]);case 5:return new x(C[0],C[1],C[2],C[3],C[4]);case 6:return new x(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new x(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var P=OE(x.prototype),H=x.apply(P,C);return Hs(H)?H:P}}function bKe(x,C,P){var H=nD(x);function Q(){for(var se=arguments.length,me=qe(se),Ce=se,Oe=$E(Q);Ce--;)me[Ce]=arguments[Ce];var ct=se<3&&me[0]!==Oe&&me[se-1]!==Oe?[]:Ky(me,Oe);if(se-=ct.length,se<P)return ide(x,C,wO,Q.placeholder,n,me,ct,n,n,P-se);var dt=this&&this!==wn&&this instanceof Q?H:x;return xu(dt,this,me)}return Q}function ede(x){return function(C,P,H){var Q=is(C);if(!tc(C)){var se=An(P,3);C=wa(C),P=function(Ce){return se(Q[Ce],Ce,Q)}}var me=x(C,P,H);return me>-1?Q[se?C[me]:me]:n}}function tde(x){return B0(function(C){var P=C.length,H=P,Q=sd.prototype.thru;for(x&&C.reverse();H--;){var se=C[H];if(typeof se!="function")throw new id(o);if(Q&&!me&&CO(se)=="wrapper")var me=new sd([],!0)}for(H=me?H:P;++H<P;){se=C[H];var Ce=CO(se),Oe=Ce=="wrapper"?aU(se):n;Oe&&fU(Oe[0])&&Oe[1]==(T|b|w|A)&&!Oe[4].length&&Oe[9]==1?me=me[CO(Oe[0])].apply(me,Oe[3]):me=se.length==1&&fU(se)?me[Ce]():me.thru(se)}return function(){var ct=arguments,dt=ct[0];if(me&&ct.length==1&&nr(dt))return me.plant(dt).value();for(var bt=0,Ut=P?C[bt].apply(this,ct):dt;++bt<P;)Ut=C[bt].call(this,Ut);return Ut}})}function wO(x,C,P,H,Q,se,me,Ce,Oe,ct){var dt=C&T,bt=C&g,Ut=C&y,sn=C&(b|_),In=C&k,yr=Ut?n:nD(x);function kn(){for(var kr=arguments.length,Vr=qe(kr),uf=kr;uf--;)Vr[uf]=arguments[uf];if(sn)var pl=$E(kn),lf=qA(Vr,pl);if(H&&(Vr=Kfe(Vr,H,Q,sn)),se&&(Vr=Xfe(Vr,se,me,sn)),kr-=lf,sn&&kr<ct){var bo=Ky(Vr,pl);return ide(x,C,wO,kn.placeholder,P,Vr,bo,Ce,Oe,ct-kr)}var vh=bt?P:this,V0=Ut?vh[x]:x;return kr=Vr.length,Ce?Vr=BKe(Vr,Ce):In&&kr>1&&Vr.reverse(),dt&&Oe<kr&&(Vr.length=Oe),this&&this!==wn&&this instanceof kn&&(V0=yr||nD(V0)),V0.apply(vh,Vr)}return kn}function nde(x,C){return function(P,H){return GYe(P,x,C(H),{})}}function _O(x,C){return function(P,H){var Q;if(P===n&&H===n)return C;if(P!==n&&(Q=P),H!==n){if(Q===n)return H;typeof P=="string"||typeof H=="string"?(P=of(P),H=of(H)):(P=Ufe(P),H=Ufe(H)),Q=x(P,H)}return Q}}function rU(x){return B0(function(C){return C=rs(C,Oi(An())),_r(function(P){var H=this;return x(C,function(Q){return xu(Q,H,P)})})})}function EO(x,C){C=C===n?" ":of(C);var P=C.length;if(P<2)return P?Xj(C,x):C;var H=Xj(C,lO(x/IE(C)));return DE(C)?e1(mh(H),0,x).join(""):H.slice(0,x)}function xKe(x,C,P,H){var Q=C&g,se=nD(x);function me(){for(var Ce=-1,Oe=arguments.length,ct=-1,dt=H.length,bt=qe(dt+Oe),Ut=this&&this!==wn&&this instanceof me?se:x;++ct<dt;)bt[ct]=H[ct];for(;Oe--;)bt[ct++]=arguments[++Ce];return xu(Ut,Q?P:this,bt)}return me}function rde(x){return function(C,P,H){return H&&typeof H!="number"&&hl(C,P,H)&&(P=H=n),C=z0(C),P===n?(P=C,C=0):P=z0(P),H=H===n?C<P?1:-1:z0(H),sKe(C,P,H,x)}}function SO(x){return function(C,P){return typeof C=="string"&&typeof P=="string"||(C=ld(C),P=ld(P)),x(C,P)}}function ide(x,C,P,H,Q,se,me,Ce,Oe,ct){var dt=C&b,bt=dt?me:n,Ut=dt?n:me,sn=dt?se:n,In=dt?n:se;C|=dt?w:S,C&=~(dt?S:w),C&v||(C&=-4);var yr=[x,C,Q,sn,bt,In,Ut,Ce,Oe,ct],kn=P.apply(n,yr);return fU(x)&&gde(kn,yr),kn.placeholder=H,yde(kn,x,C)}function iU(x){var C=Jo[x];return function(P,H){if(P=ld(P),H=H==null?0:_u(fr(H),292),H&&yfe(P)){var Q=(Fi(P)+"e").split("e"),se=C(Q[0]+"e"+(+Q[1]+H));return Q=(Fi(se)+"e").split("e"),+(Q[0]+"e"+(+Q[1]-H))}return C(P)}}var wKe=NE&&1/ZP(new NE([,-0]))[1]==G?function(x){return new NE(x)}:TU;function sde(x){return function(C){var P=Eu(C);return P==Ke?Oj(C):P==Mt?LGe(C):Qo(C,x(C))}}function L0(x,C,P,H,Q,se,me,Ce){var Oe=C&y;if(!Oe&&typeof x!="function")throw new id(o);var ct=H?H.length:0;if(ct||(C&=-97,H=Q=n),me=me===n?me:Zo(fr(me),0),Ce=Ce===n?Ce:fr(Ce),ct-=Q?Q.length:0,C&S){var dt=H,bt=Q;H=Q=n}var Ut=Oe?n:aU(x),sn=[x,C,P,H,Q,dt,bt,se,me,Ce];if(Ut&&MKe(sn,Ut),x=sn[0],C=sn[1],P=sn[2],H=sn[3],Q=sn[4],Ce=sn[9]=sn[9]===n?Oe?0:x.length:Zo(sn[9]-ct,0),!Ce&&C&(b|_)&&(C&=-25),!C||C==g)var In=vKe(x,C,P);else C==b||C==_?In=bKe(x,C,Ce):(C==w||C==(g|w))&&!Q.length?In=xKe(x,C,P,H):In=wO.apply(n,sn);var yr=Ut?Bfe:gde;return yde(yr(In,sn),x,C)}function ode(x,C,P,H){return x===n||yh(x,RE[P])&&!Ui.call(H,P)?C:x}function ade(x,C,P,H,Q,se){return Hs(x)&&Hs(C)&&(se.set(C,x),yO(x,C,n,ade,se),se.delete(C)),x}function _Ke(x){return sD(x)?n:x}function ude(x,C,P,H,Q,se){var me=P&p,Ce=x.length,Oe=C.length;if(Ce!=Oe&&!(me&&Oe>Ce))return!1;var ct=se.get(x),dt=se.get(C);if(ct&&dt)return ct==C&&dt==x;var bt=-1,Ut=!0,sn=P&m?new cx:n;for(se.set(x,C),se.set(C,x);++bt<Ce;){var In=x[bt],yr=C[bt];if(H)var kn=me?H(yr,In,bt,C,x,se):H(In,yr,bt,x,C,se);if(kn!==n){if(kn)continue;Ut=!1;break}if(sn){if(!TE(C,function(kr,Vr){if(!rd(sn,Vr)&&(In===kr||Q(In,kr,P,H,se)))return sn.push(Vr)})){Ut=!1;break}}else if(!(In===yr||Q(In,yr,P,H,se))){Ut=!1;break}}return se.delete(x),se.delete(C),Ut}function EKe(x,C,P,H,Q,se,me){switch(P){case Ee:if(x.byteLength!=C.byteLength||x.byteOffset!=C.byteOffset)return!1;x=x.buffer,C=C.buffer;case he:return!(x.byteLength!=C.byteLength||!se(new sO(x),new sO(C)));case pe:case Te:case Ct:return yh(+x,+C);case it:return x.name==C.name&&x.message==C.message;case _t:case st:return x==C+"";case Ke:var Ce=Oj;case Mt:var Oe=H&p;if(Ce||(Ce=ZP),x.size!=C.size&&!Oe)return!1;var ct=me.get(x);if(ct)return ct==C;H|=m,me.set(x,C);var dt=ude(Ce(x),Ce(C),H,Q,se,me);return me.delete(x),dt;case X:if(XA)return XA.call(x)==XA.call(C)}return!1}function SKe(x,C,P,H,Q,se){var me=P&p,Ce=sU(x),Oe=Ce.length,ct=sU(C),dt=ct.length;if(Oe!=dt&&!me)return!1;for(var bt=Oe;bt--;){var Ut=Ce[bt];if(!(me?Ut in C:Ui.call(C,Ut)))return!1}var sn=se.get(x),In=se.get(C);if(sn&&In)return sn==C&&In==x;var yr=!0;se.set(x,C),se.set(C,x);for(var kn=me;++bt<Oe;){Ut=Ce[bt];var kr=x[Ut],Vr=C[Ut];if(H)var uf=me?H(Vr,kr,Ut,C,x,se):H(kr,Vr,Ut,x,C,se);if(!(uf===n?kr===Vr||Q(kr,Vr,P,H,se):uf)){yr=!1;break}kn||(kn=Ut=="constructor")}if(yr&&!kn){var pl=x.constructor,lf=C.constructor;pl!=lf&&"constructor"in x&&"constructor"in C&&!(typeof pl=="function"&&pl instanceof pl&&typeof lf=="function"&&lf instanceof lf)&&(yr=!1)}return se.delete(x),se.delete(C),yr}function B0(x){return hU(pde(x,n,Ede),x+"")}function sU(x){return Dfe(x,wa,lU)}function oU(x){return Dfe(x,nc,lde)}var aU=fO?function(x){return fO.get(x)}:TU;function CO(x){for(var C=x.name+"",P=PE[C],H=Ui.call(PE,C)?P.length:0;H--;){var Q=P[H],se=Q.func;if(se==null||se==x)return Q.name}return C}function $E(x){var C=Ui.call(ee,"placeholder")?ee:x;return C.placeholder}function An(){var x=ee.iteratee||SU;return x=x===SU?Rfe:x,arguments.length?x(arguments[0],arguments[1]):x}function TO(x,C){var P=x.__data__;return NKe(C)?P[typeof C=="string"?"string":"hash"]:P.map}function uU(x){for(var C=wa(x),P=C.length;P--;){var H=C[P],Q=x[H];C[P]=[H,Q,dde(Q)]}return C}function hx(x,C){var P=FGe(x,C);return kfe(P)?P:n}function CKe(x){var C=Ui.call(x,ux),P=x[ux];try{x[ux]=n;var H=!0}catch{}var Q=rO.call(x);return H&&(C?x[ux]=P:delete x[ux]),Q}var lU=Mj?function(x){return x==null?[]:(x=is(x),nd(Mj(x),function(C){return mfe.call(x,C)}))}:AU,lde=Mj?function(x){for(var C=[];x;)hh(C,lU(x)),x=oO(x);return C}:AU,Eu=dl;($j&&Eu(new $j(new ArrayBuffer(1)))!=Ee||GA&&Eu(new GA)!=Ke||Lj&&Eu(Lj.resolve())!=Ve||NE&&Eu(new NE)!=Mt||YA&&Eu(new YA)!=we)&&(Eu=function(x){var C=dl(x),P=C==Ie?x.constructor:n,H=P?px(P):"";if(H)switch(H){case aYe:return Ee;case uYe:return Ke;case lYe:return Ve;case cYe:return Mt;case fYe:return we}return C});function TKe(x,C,P){for(var H=-1,Q=P.length;++H<Q;){var se=P[H],me=se.size;switch(se.type){case"drop":x+=me;break;case"dropRight":C-=me;break;case"take":C=_u(C,x+me);break;case"takeRight":x=Zo(x,C-me);break}}return{start:x,end:C}}function AKe(x){var C=x.match(_e);return C?C[1].split(Ue):[]}function cde(x,C,P){C=Zy(C,x);for(var H=-1,Q=C.length,se=!1;++H<Q;){var me=Up(C[H]);if(!(se=x!=null&&P(x,me)))break;x=x[me]}return se||++H!=Q?se:(Q=x==null?0:x.length,!!Q&&PO(Q)&&j0(me,Q)&&(nr(x)||mx(x)))}function DKe(x){var C=x.length,P=new x.constructor(C);return C&&typeof x[0]=="string"&&Ui.call(x,"index")&&(P.index=x.index,P.input=x.input),P}function fde(x){return typeof x.constructor=="function"&&!rD(x)?OE(oO(x)):{}}function IKe(x,C,P){var H=x.constructor;switch(C){case he:return nU(x);case pe:case Te:return new H(+x);case Ee:return dKe(x,P);case $e:case Be:case lt:case Je:case Xt:case fn:case Wt:case an:case Sn:return Gfe(x,P);case Ke:return new H;case Ct:case st:return new H(x);case _t:return hKe(x);case Mt:return new H;case X:return pKe(x)}}function kKe(x,C){var P=C.length;if(!P)return x;var H=P-1;return C[H]=(P>1?"& ":"")+C[H],C=C.join(P>2?", ":" "),x.replace(ce,`{
/* [wrapped with `+C+`] */
`)}function RKe(x){return nr(x)||mx(x)||!!(gfe&&x&&x[gfe])}function j0(x,C){var P=typeof x;return C=C??Y,!!C&&(P=="number"||P!="symbol"&&dn.test(x))&&x>-1&&x%1==0&&x<C}function hl(x,C,P){if(!Hs(P))return!1;var H=typeof C;return(H=="number"?tc(P)&&j0(C,P.length):H=="string"&&C in P)?yh(P[C],x):!1}function cU(x,C){if(nr(x))return!1;var P=typeof x;return P=="number"||P=="symbol"||P=="boolean"||x==null||af(x)?!0:Ri.test(x)||!Nr.test(x)||C!=null&&x in is(C)}function NKe(x){var C=typeof x;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?x!=="__proto__":x===null}function fU(x){var C=CO(x),P=ee[C];if(typeof P!="function"||!(C in Or.prototype))return!1;if(x===P)return!0;var H=aU(P);return!!H&&x===H[0]}function PKe(x){return!!dfe&&dfe in x}var OKe=tO?U0:DU;function rD(x){var C=x&&x.constructor,P=typeof C=="function"&&C.prototype||RE;return x===P}function dde(x){return x===x&&!Hs(x)}function hde(x,C){return function(P){return P==null?!1:P[x]===C&&(C!==n||x in is(P))}}function FKe(x){var C=RO(x,function(H){return P.size===l&&P.clear(),H}),P=C.cache;return C}function MKe(x,C){var P=x[1],H=C[1],Q=P|H,se=Q<(g|y|T),me=H==T&&P==b||H==T&&P==A&&x[7].length<=C[8]||H==(T|A)&&C[7].length<=C[8]&&P==b;if(!(se||me))return x;H&g&&(x[2]=C[2],Q|=P&g?0:v);var Ce=C[3];if(Ce){var Oe=x[3];x[3]=Oe?Kfe(Oe,Ce,C[4]):Ce,x[4]=Oe?Ky(x[3],c):C[4]}return Ce=C[5],Ce&&(Oe=x[5],x[5]=Oe?Xfe(Oe,Ce,C[6]):Ce,x[6]=Oe?Ky(x[5],c):C[6]),Ce=C[7],Ce&&(x[7]=Ce),H&T&&(x[8]=x[8]==null?C[8]:_u(x[8],C[8])),x[9]==null&&(x[9]=C[9]),x[0]=C[0],x[1]=Q,x}function $Ke(x){var C=[];if(x!=null)for(var P in is(x))C.push(P);return C}function LKe(x){return rO.call(x)}function pde(x,C,P){return C=Zo(C===n?x.length-1:C,0),function(){for(var H=arguments,Q=-1,se=Zo(H.length-C,0),me=qe(se);++Q<se;)me[Q]=H[C+Q];Q=-1;for(var Ce=qe(C+1);++Q<C;)Ce[Q]=H[Q];return Ce[C]=P(me),xu(x,this,Ce)}}function mde(x,C){return C.length<2?x:dx(x,ad(C,0,-1))}function BKe(x,C){for(var P=x.length,H=_u(C.length,P),Q=ec(x);H--;){var se=C[H];x[H]=j0(se,P)?Q[se]:n}return x}function dU(x,C){if(!(C==="constructor"&&typeof x[C]=="function")&&C!="__proto__")return x[C]}var gde=vde(Bfe),iD=eYe||function(x,C){return wn.setTimeout(x,C)},hU=vde(uKe);function yde(x,C,P){var H=C+"";return hU(x,kKe(H,jKe(AKe(H),P)))}function vde(x){var C=0,P=0;return function(){var H=iYe(),Q=O-(H-P);if(P=H,Q>0){if(++C>=F)return arguments[0]}else C=0;return x.apply(n,arguments)}}function AO(x,C){var P=-1,H=x.length,Q=H-1;for(C=C===n?H:C;++P<C;){var se=Kj(P,Q),me=x[se];x[se]=x[P],x[P]=me}return x.length=C,x}var bde=FKe(function(x){var C=[];return x.charCodeAt(0)===46&&C.push(""),x.replace(hi,function(P,H,Q,se){C.push(Q?se.replace(Ht,"$1"):H||P)}),C});function Up(x){if(typeof x=="string"||af(x))return x;var C=x+"";return C=="0"&&1/x==-1/0?"-0":C}function px(x){if(x!=null){try{return nO.call(x)}catch{}try{return x+""}catch{}}return""}function jKe(x,C){return fl(q,function(P){var H="_."+P[0];C&P[1]&&!sx(x,H)&&x.push(H)}),x.sort()}function xde(x){if(x instanceof Or)return x.clone();var C=new sd(x.__wrapped__,x.__chain__);return C.__actions__=ec(x.__actions__),C.__index__=x.__index__,C.__values__=x.__values__,C}function UKe(x,C,P){(P?hl(x,C,P):C===n)?C=1:C=Zo(fr(C),0);var H=x==null?0:x.length;if(!H||C<1)return[];for(var Q=0,se=0,me=qe(lO(H/C));Q<H;)me[se++]=ad(x,Q,Q+=C);return me}function zKe(x){for(var C=-1,P=x==null?0:x.length,H=0,Q=[];++C<P;){var se=x[C];se&&(Q[H++]=se)}return Q}function VKe(){var x=arguments.length;if(!x)return[];for(var C=qe(x-1),P=arguments[0],H=x;H--;)C[H-1]=arguments[H];return hh(nr(P)?ec(P):[P],Ga(C,1))}var HKe=_r(function(x,C){return vo(x)?JA(x,Ga(C,1,vo,!0)):[]}),qKe=_r(function(x,C){var P=ud(C);return vo(P)&&(P=n),vo(x)?JA(x,Ga(C,1,vo,!0),An(P,2)):[]}),WKe=_r(function(x,C){var P=ud(C);return vo(P)&&(P=n),vo(x)?JA(x,Ga(C,1,vo,!0),n,P):[]});function GKe(x,C,P){var H=x==null?0:x.length;return H?(C=P||C===n?1:fr(C),ad(x,C<0?0:C,H)):[]}function YKe(x,C,P){var H=x==null?0:x.length;return H?(C=P||C===n?1:fr(C),C=H-C,ad(x,0,C<0?0:C)):[]}function KKe(x,C){return x&&x.length?bO(x,An(C,3),!0,!0):[]}function XKe(x,C){return x&&x.length?bO(x,An(C,3),!0):[]}function QKe(x,C,P,H){var Q=x==null?0:x.length;return Q?(P&&typeof P!="number"&&hl(x,C,P)&&(P=0,H=Q),VYe(x,C,P,H)):[]}function wde(x,C,P){var H=x==null?0:x.length;if(!H)return-1;var Q=P==null?0:fr(P);return Q<0&&(Q=Zo(H+Q,0)),ox(x,An(C,3),Q)}function _de(x,C,P){var H=x==null?0:x.length;if(!H)return-1;var Q=H-1;return P!==n&&(Q=fr(P),Q=P<0?Zo(H+Q,0):_u(Q,H-1)),ox(x,An(C,3),Q,!0)}function Ede(x){var C=x==null?0:x.length;return C?Ga(x,1):[]}function JKe(x){var C=x==null?0:x.length;return C?Ga(x,G):[]}function ZKe(x,C){var P=x==null?0:x.length;return P?(C=C===n?1:fr(C),Ga(x,C)):[]}function eXe(x){for(var C=-1,P=x==null?0:x.length,H={};++C<P;){var Q=x[C];H[Q[0]]=Q[1]}return H}function Sde(x){return x&&x.length?x[0]:n}function tXe(x,C,P){var H=x==null?0:x.length;if(!H)return-1;var Q=P==null?0:fr(P);return Q<0&&(Q=Zo(H+Q,0)),O0(x,C,Q)}function nXe(x){var C=x==null?0:x.length;return C?ad(x,0,-1):[]}var rXe=_r(function(x){var C=rs(x,eU);return C.length&&C[0]===x[0]?Hj(C):[]}),iXe=_r(function(x){var C=ud(x),P=rs(x,eU);return C===ud(P)?C=n:P.pop(),P.length&&P[0]===x[0]?Hj(P,An(C,2)):[]}),sXe=_r(function(x){var C=ud(x),P=rs(x,eU);return C=typeof C=="function"?C:n,C&&P.pop(),P.length&&P[0]===x[0]?Hj(P,n,C):[]});function oXe(x,C){return x==null?"":nYe.call(x,C)}function ud(x){var C=x==null?0:x.length;return C?x[C-1]:n}function aXe(x,C,P){var H=x==null?0:x.length;if(!H)return-1;var Q=H;return P!==n&&(Q=fr(P),Q=Q<0?Zo(H+Q,0):_u(Q,H-1)),C===C?jGe(x,C,Q):ox(x,D,Q,!0)}function uXe(x,C){return x&&x.length?Ffe(x,fr(C)):n}var lXe=_r(Cde);function Cde(x,C){return x&&x.length&&C&&C.length?Yj(x,C):x}function cXe(x,C,P){return x&&x.length&&C&&C.length?Yj(x,C,An(P,2)):x}function fXe(x,C,P){return x&&x.length&&C&&C.length?Yj(x,C,n,P):x}var dXe=B0(function(x,C){var P=x==null?0:x.length,H=jj(x,C);return Lfe(x,rs(C,function(Q){return j0(Q,P)?+Q:Q}).sort(Yfe)),H});function hXe(x,C){var P=[];if(!(x&&x.length))return P;var H=-1,Q=[],se=x.length;for(C=An(C,3);++H<se;){var me=x[H];C(me,H,x)&&(P.push(me),Q.push(H))}return Lfe(x,Q),P}function pU(x){return x==null?x:oYe.call(x)}function pXe(x,C,P){var H=x==null?0:x.length;return H?(P&&typeof P!="number"&&hl(x,C,P)?(C=0,P=H):(C=C==null?0:fr(C),P=P===n?H:fr(P)),ad(x,C,P)):[]}function mXe(x,C){return vO(x,C)}function gXe(x,C,P){return Qj(x,C,An(P,2))}function yXe(x,C){var P=x==null?0:x.length;if(P){var H=vO(x,C);if(H<P&&yh(x[H],C))return H}return-1}function vXe(x,C){return vO(x,C,!0)}function bXe(x,C,P){return Qj(x,C,An(P,2),!0)}function xXe(x,C){var P=x==null?0:x.length;if(P){var H=vO(x,C,!0)-1;if(yh(x[H],C))return H}return-1}function wXe(x){return x&&x.length?jfe(x):[]}function _Xe(x,C){return x&&x.length?jfe(x,An(C,2)):[]}function EXe(x){var C=x==null?0:x.length;return C?ad(x,1,C):[]}function SXe(x,C,P){return x&&x.length?(C=P||C===n?1:fr(C),ad(x,0,C<0?0:C)):[]}function CXe(x,C,P){var H=x==null?0:x.length;return H?(C=P||C===n?1:fr(C),C=H-C,ad(x,C<0?0:C,H)):[]}function TXe(x,C){return x&&x.length?bO(x,An(C,3),!1,!0):[]}function AXe(x,C){return x&&x.length?bO(x,An(C,3)):[]}var DXe=_r(function(x){return Jy(Ga(x,1,vo,!0))}),IXe=_r(function(x){var C=ud(x);return vo(C)&&(C=n),Jy(Ga(x,1,vo,!0),An(C,2))}),kXe=_r(function(x){var C=ud(x);return C=typeof C=="function"?C:n,Jy(Ga(x,1,vo,!0),n,C)});function RXe(x){return x&&x.length?Jy(x):[]}function NXe(x,C){return x&&x.length?Jy(x,An(C,2)):[]}function PXe(x,C){return C=typeof C=="function"?C:n,x&&x.length?Jy(x,n,C):[]}function mU(x){if(!(x&&x.length))return[];var C=0;return x=nd(x,function(P){if(vo(P))return C=Zo(P.length,C),!0}),Si(C,function(P){return rs(x,K(P))})}function Tde(x,C){if(!(x&&x.length))return[];var P=mU(x);return C==null?P:rs(P,function(H){return xu(C,n,H)})}var OXe=_r(function(x,C){return vo(x)?JA(x,C):[]}),FXe=_r(function(x){return Zj(nd(x,vo))}),MXe=_r(function(x){var C=ud(x);return vo(C)&&(C=n),Zj(nd(x,vo),An(C,2))}),$Xe=_r(function(x){var C=ud(x);return C=typeof C=="function"?C:n,Zj(nd(x,vo),n,C)}),LXe=_r(mU);function BXe(x,C){return Hfe(x||[],C||[],QA)}function jXe(x,C){return Hfe(x||[],C||[],tD)}var UXe=_r(function(x){var C=x.length,P=C>1?x[C-1]:n;return P=typeof P=="function"?(x.pop(),P):n,Tde(x,P)});function Ade(x){var C=ee(x);return C.__chain__=!0,C}function zXe(x,C){return C(x),x}function DO(x,C){return C(x)}var VXe=B0(function(x){var C=x.length,P=C?x[0]:0,H=this.__wrapped__,Q=function(se){return jj(se,x)};return C>1||this.__actions__.length||!(H instanceof Or)||!j0(P)?this.thru(Q):(H=H.slice(P,+P+(C?1:0)),H.__actions__.push({func:DO,args:[Q],thisArg:n}),new sd(H,this.__chain__).thru(function(se){return C&&!se.length&&se.push(n),se}))});function HXe(){return Ade(this)}function qXe(){return new sd(this.value(),this.__chain__)}function WXe(){this.__values__===n&&(this.__values__=Ude(this.value()));var x=this.__index__>=this.__values__.length,C=x?n:this.__values__[this.__index__++];return{done:x,value:C}}function GXe(){return this}function YXe(x){for(var C,P=this;P instanceof hO;){var H=xde(P);H.__index__=0,H.__values__=n,C?Q.__wrapped__=H:C=H;var Q=H;P=P.__wrapped__}return Q.__wrapped__=x,C}function KXe(){var x=this.__wrapped__;if(x instanceof Or){var C=x;return this.__actions__.length&&(C=new Or(this)),C=C.reverse(),C.__actions__.push({func:DO,args:[pU],thisArg:n}),new sd(C,this.__chain__)}return this.thru(pU)}function XXe(){return Vfe(this.__wrapped__,this.__actions__)}var QXe=xO(function(x,C,P){Ui.call(x,P)?++x[P]:$0(x,P,1)});function JXe(x,C,P){var H=nr(x)?CE:zYe;return P&&hl(x,C,P)&&(C=n),H(x,An(C,3))}function ZXe(x,C){var P=nr(x)?nd:Tfe;return P(x,An(C,3))}var eQe=ede(wde),tQe=ede(_de);function nQe(x,C){return Ga(IO(x,C),1)}function rQe(x,C){return Ga(IO(x,C),G)}function iQe(x,C,P){return P=P===n?1:fr(P),Ga(IO(x,C),P)}function Dde(x,C){var P=nr(x)?fl:Qy;return P(x,An(C,3))}function Ide(x,C){var P=nr(x)?KP:Cfe;return P(x,An(C,3))}var sQe=xO(function(x,C,P){Ui.call(x,P)?x[P].push(C):$0(x,P,[C])});function oQe(x,C,P,H){x=tc(x)?x:BE(x),P=P&&!H?fr(P):0;var Q=x.length;return P<0&&(P=Zo(Q+P,0)),OO(x)?P<=Q&&x.indexOf(C,P)>-1:!!Q&&O0(x,C,P)>-1}var aQe=_r(function(x,C,P){var H=-1,Q=typeof C=="function",se=tc(x)?qe(x.length):[];return Qy(x,function(me){se[++H]=Q?xu(C,me,P):ZA(me,C,P)}),se}),uQe=xO(function(x,C,P){$0(x,P,C)});function IO(x,C){var P=nr(x)?rs:Nfe;return P(x,An(C,3))}function lQe(x,C,P,H){return x==null?[]:(nr(C)||(C=C==null?[]:[C]),P=H?n:P,nr(P)||(P=P==null?[]:[P]),Mfe(x,C,P))}var cQe=xO(function(x,C,P){x[P?0:1].push(C)},function(){return[[],[]]});function fQe(x,C,P){var H=nr(x)?ph:Me,Q=arguments.length<3;return H(x,An(C,4),P,Q,Qy)}function dQe(x,C,P){var H=nr(x)?XP:Me,Q=arguments.length<3;return H(x,An(C,4),P,Q,Cfe)}function hQe(x,C){var P=nr(x)?nd:Tfe;return P(x,NO(An(C,3)))}function pQe(x){var C=nr(x)?wfe:oKe;return C(x)}function mQe(x,C,P){(P?hl(x,C,P):C===n)?C=1:C=fr(C);var H=nr(x)?$Ye:aKe;return H(x,C)}function gQe(x){var C=nr(x)?LYe:lKe;return C(x)}function yQe(x){if(x==null)return 0;if(tc(x))return OO(x)?IE(x):x.length;var C=Eu(x);return C==Ke||C==Mt?x.size:Wj(x).length}function vQe(x,C,P){var H=nr(x)?TE:cKe;return P&&hl(x,C,P)&&(C=n),H(x,An(C,3))}var bQe=_r(function(x,C){if(x==null)return[];var P=C.length;return P>1&&hl(x,C[0],C[1])?C=[]:P>2&&hl(C[0],C[1],C[2])&&(C=[C[0]]),Mfe(x,Ga(C,1),[])}),kO=ZGe||function(){return wn.Date.now()};function xQe(x,C){if(typeof C!="function")throw new id(o);return x=fr(x),function(){if(--x<1)return C.apply(this,arguments)}}function kde(x,C,P){return C=P?n:C,C=x&&C==null?x.length:C,L0(x,T,n,n,n,n,C)}function Rde(x,C){var P;if(typeof C!="function")throw new id(o);return x=fr(x),function(){return--x>0&&(P=C.apply(this,arguments)),x<=1&&(C=n),P}}var gU=_r(function(x,C,P){var H=g;if(P.length){var Q=Ky(P,$E(gU));H|=w}return L0(x,H,C,P,Q)}),Nde=_r(function(x,C,P){var H=g|y;if(P.length){var Q=Ky(P,$E(Nde));H|=w}return L0(C,H,x,P,Q)});function Pde(x,C,P){C=P?n:C;var H=L0(x,b,n,n,n,n,n,C);return H.placeholder=Pde.placeholder,H}function Ode(x,C,P){C=P?n:C;var H=L0(x,_,n,n,n,n,n,C);return H.placeholder=Ode.placeholder,H}function Fde(x,C,P){var H,Q,se,me,Ce,Oe,ct=0,dt=!1,bt=!1,Ut=!0;if(typeof x!="function")throw new id(o);C=ld(C)||0,Hs(P)&&(dt=!!P.leading,bt="maxWait"in P,se=bt?Zo(ld(P.maxWait)||0,C):se,Ut="trailing"in P?!!P.trailing:Ut);function sn(bo){var vh=H,V0=Q;return H=Q=n,ct=bo,me=x.apply(V0,vh),me}function In(bo){return ct=bo,Ce=iD(kr,C),dt?sn(bo):me}function yr(bo){var vh=bo-Oe,V0=bo-ct,ehe=C-vh;return bt?_u(ehe,se-V0):ehe}function kn(bo){var vh=bo-Oe,V0=bo-ct;return Oe===n||vh>=C||vh<0||bt&&V0>=se}function kr(){var bo=kO();if(kn(bo))return Vr(bo);Ce=iD(kr,yr(bo))}function Vr(bo){return Ce=n,Ut&&H?sn(bo):(H=Q=n,me)}function uf(){Ce!==n&&qfe(Ce),ct=0,H=Oe=Q=Ce=n}function pl(){return Ce===n?me:Vr(kO())}function lf(){var bo=kO(),vh=kn(bo);if(H=arguments,Q=this,Oe=bo,vh){if(Ce===n)return In(Oe);if(bt)return qfe(Ce),Ce=iD(kr,C),sn(Oe)}return Ce===n&&(Ce=iD(kr,C)),me}return lf.cancel=uf,lf.flush=pl,lf}var wQe=_r(function(x,C){return Sfe(x,1,C)}),_Qe=_r(function(x,C,P){return Sfe(x,ld(C)||0,P)});function EQe(x){return L0(x,k)}function RO(x,C){if(typeof x!="function"||C!=null&&typeof C!="function")throw new id(o);var P=function(){var H=arguments,Q=C?C.apply(this,H):H[0],se=P.cache;if(se.has(Q))return se.get(Q);var me=x.apply(this,H);return P.cache=se.set(Q,me)||se,me};return P.cache=new(RO.Cache||M0),P}RO.Cache=M0;function NO(x){if(typeof x!="function")throw new id(o);return function(){var C=arguments;switch(C.length){case 0:return!x.call(this);case 1:return!x.call(this,C[0]);case 2:return!x.call(this,C[0],C[1]);case 3:return!x.call(this,C[0],C[1],C[2])}return!x.apply(this,C)}}function SQe(x){return Rde(2,x)}var CQe=fKe(function(x,C){C=C.length==1&&nr(C[0])?rs(C[0],Oi(An())):rs(Ga(C,1),Oi(An()));var P=C.length;return _r(function(H){for(var Q=-1,se=_u(H.length,P);++Q<se;)H[Q]=C[Q].call(this,H[Q]);return xu(x,this,H)})}),yU=_r(function(x,C){var P=Ky(C,$E(yU));return L0(x,w,n,C,P)}),Mde=_r(function(x,C){var P=Ky(C,$E(Mde));return L0(x,S,n,C,P)}),TQe=B0(function(x,C){return L0(x,A,n,n,n,C)});function AQe(x,C){if(typeof x!="function")throw new id(o);return C=C===n?C:fr(C),_r(x,C)}function DQe(x,C){if(typeof x!="function")throw new id(o);return C=C==null?0:Zo(fr(C),0),_r(function(P){var H=P[C],Q=e1(P,0,C);return H&&hh(Q,H),xu(x,this,Q)})}function IQe(x,C,P){var H=!0,Q=!0;if(typeof x!="function")throw new id(o);return Hs(P)&&(H="leading"in P?!!P.leading:H,Q="trailing"in P?!!P.trailing:Q),Fde(x,C,{leading:H,maxWait:C,trailing:Q})}function kQe(x){return kde(x,1)}function RQe(x,C){return yU(tU(C),x)}function NQe(){if(!arguments.length)return[];var x=arguments[0];return nr(x)?x:[x]}function PQe(x){return od(x,h)}function OQe(x,C){return C=typeof C=="function"?C:n,od(x,h,C)}function FQe(x){return od(x,f|h)}function MQe(x,C){return C=typeof C=="function"?C:n,od(x,f|h,C)}function $Qe(x,C){return C==null||Efe(x,C,wa(C))}function yh(x,C){return x===C||x!==x&&C!==C}var LQe=SO(Vj),BQe=SO(function(x,C){return x>=C}),mx=Ife(function(){return arguments}())?Ife:function(x){return eo(x)&&Ui.call(x,"callee")&&!mfe.call(x,"callee")},nr=qe.isArray,jQe=N0?Oi(N0):YYe;function tc(x){return x!=null&&PO(x.length)&&!U0(x)}function vo(x){return eo(x)&&tc(x)}function UQe(x){return x===!0||x===!1||eo(x)&&dl(x)==pe}var t1=tYe||DU,zQe=P0?Oi(P0):KYe;function VQe(x){return eo(x)&&x.nodeType===1&&!sD(x)}function HQe(x){if(x==null)return!0;if(tc(x)&&(nr(x)||typeof x=="string"||typeof x.splice=="function"||t1(x)||LE(x)||mx(x)))return!x.length;var C=Eu(x);if(C==Ke||C==Mt)return!x.size;if(rD(x))return!Wj(x).length;for(var P in x)if(Ui.call(x,P))return!1;return!0}function qQe(x,C){return eD(x,C)}function WQe(x,C,P){P=typeof P=="function"?P:n;var H=P?P(x,C):n;return H===n?eD(x,C,n,P):!!H}function vU(x){if(!eo(x))return!1;var C=dl(x);return C==it||C==ke||typeof x.message=="string"&&typeof x.name=="string"&&!sD(x)}function GQe(x){return typeof x=="number"&&yfe(x)}function U0(x){if(!Hs(x))return!1;var C=dl(x);return C==Re||C==ut||C==xe||C==ft}function $de(x){return typeof x=="number"&&x==fr(x)}function PO(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=Y}function Hs(x){var C=typeof x;return x!=null&&(C=="object"||C=="function")}function eo(x){return x!=null&&typeof x=="object"}var Lde=nx?Oi(nx):QYe;function YQe(x,C){return x===C||qj(x,C,uU(C))}function KQe(x,C,P){return P=typeof P=="function"?P:n,qj(x,C,uU(C),P)}function XQe(x){return Bde(x)&&x!=+x}function QQe(x){if(OKe(x))throw new Zn(s);return kfe(x)}function JQe(x){return x===null}function ZQe(x){return x==null}function Bde(x){return typeof x=="number"||eo(x)&&dl(x)==Ct}function sD(x){if(!eo(x)||dl(x)!=Ie)return!1;var C=oO(x);if(C===null)return!0;var P=Ui.call(C,"constructor")&&C.constructor;return typeof P=="function"&&P instanceof P&&nO.call(P)==KGe}var bU=HA?Oi(HA):JYe;function eJe(x){return $de(x)&&x>=-9007199254740991&&x<=Y}var jde=rx?Oi(rx):ZYe;function OO(x){return typeof x=="string"||!nr(x)&&eo(x)&&dl(x)==st}function af(x){return typeof x=="symbol"||eo(x)&&dl(x)==X}var LE=YP?Oi(YP):eKe;function tJe(x){return x===n}function nJe(x){return eo(x)&&Eu(x)==we}function rJe(x){return eo(x)&&dl(x)==ae}var iJe=SO(Gj),sJe=SO(function(x,C){return x<=C});function Ude(x){if(!x)return[];if(tc(x))return OO(x)?mh(x):ec(x);if(WA&&x[WA])return $Ge(x[WA]());var C=Eu(x),P=C==Ke?Oj:C==Mt?ZP:BE;return P(x)}function z0(x){if(!x)return x===0?x:0;if(x=ld(x),x===G||x===-1/0){var C=x<0?-1:1;return C*J}return x===x?x:0}function fr(x){var C=z0(x),P=C%1;return C===C?P?C-P:C:0}function zde(x){return x?fx(fr(x),0,U):0}function ld(x){if(typeof x=="number")return x;if(af(x))return L;if(Hs(x)){var C=typeof x.valueOf=="function"?x.valueOf():x;x=Hs(C)?C+"":C}if(typeof x!="string")return x===0?x:+x;x=zr(x);var P=jn.test(x);return P||ii.test(x)?wr(x.slice(2),P?2:8):mr.test(x)?L:+x}function Vde(x){return jp(x,nc(x))}function oJe(x){return x?fx(fr(x),-9007199254740991,Y):x===0?x:0}function Fi(x){return x==null?"":of(x)}var aJe=FE(function(x,C){if(rD(C)||tc(C)){jp(C,wa(C),x);return}for(var P in C)Ui.call(C,P)&&QA(x,P,C[P])}),Hde=FE(function(x,C){jp(C,nc(C),x)}),FO=FE(function(x,C,P,H){jp(C,nc(C),x,H)}),uJe=FE(function(x,C,P,H){jp(C,wa(C),x,H)}),lJe=B0(jj);function cJe(x,C){var P=OE(x);return C==null?P:_fe(P,C)}var fJe=_r(function(x,C){x=is(x);var P=-1,H=C.length,Q=H>2?C[2]:n;for(Q&&hl(C[0],C[1],Q)&&(H=1);++P<H;)for(var se=C[P],me=nc(se),Ce=-1,Oe=me.length;++Ce<Oe;){var ct=me[Ce],dt=x[ct];(dt===n||yh(dt,RE[ct])&&!Ui.call(x,ct))&&(x[ct]=se[ct])}return x}),dJe=_r(function(x){return x.push(n,ade),xu(qde,n,x)});function hJe(x,C){return wu(x,An(C,3),Bp)}function pJe(x,C){return wu(x,An(C,3),zj)}function mJe(x,C){return x==null?x:Uj(x,An(C,3),nc)}function gJe(x,C){return x==null?x:Afe(x,An(C,3),nc)}function yJe(x,C){return x&&Bp(x,An(C,3))}function vJe(x,C){return x&&zj(x,An(C,3))}function bJe(x){return x==null?[]:gO(x,wa(x))}function xJe(x){return x==null?[]:gO(x,nc(x))}function xU(x,C,P){var H=x==null?n:dx(x,C);return H===n?P:H}function wJe(x,C){return x!=null&&cde(x,C,HYe)}function wU(x,C){return x!=null&&cde(x,C,qYe)}var _Je=nde(function(x,C,P){C!=null&&typeof C.toString!="function"&&(C=rO.call(C)),x[C]=P},EU(rc)),EJe=nde(function(x,C,P){C!=null&&typeof C.toString!="function"&&(C=rO.call(C)),Ui.call(x,C)?x[C].push(P):x[C]=[P]},An),SJe=_r(ZA);function wa(x){return tc(x)?xfe(x):Wj(x)}function nc(x){return tc(x)?xfe(x,!0):tKe(x)}function CJe(x,C){var P={};return C=An(C,3),Bp(x,function(H,Q,se){$0(P,C(H,Q,se),H)}),P}function TJe(x,C){var P={};return C=An(C,3),Bp(x,function(H,Q,se){$0(P,Q,C(H,Q,se))}),P}var AJe=FE(function(x,C,P){yO(x,C,P)}),qde=FE(function(x,C,P,H){yO(x,C,P,H)}),DJe=B0(function(x,C){var P={};if(x==null)return P;var H=!1;C=rs(C,function(se){return se=Zy(se,x),H||(H=se.length>1),se}),jp(x,oU(x),P),H&&(P=od(P,f|d|h,_Ke));for(var Q=C.length;Q--;)Jj(P,C[Q]);return P});function IJe(x,C){return Wde(x,NO(An(C)))}var kJe=B0(function(x,C){return x==null?{}:rKe(x,C)});function Wde(x,C){if(x==null)return{};var P=rs(oU(x),function(H){return[H]});return C=An(C),$fe(x,P,function(H,Q){return C(H,Q[0])})}function RJe(x,C,P){C=Zy(C,x);var H=-1,Q=C.length;for(Q||(Q=1,x=n);++H<Q;){var se=x==null?n:x[Up(C[H])];se===n&&(H=Q,se=P),x=U0(se)?se.call(x):se}return x}function NJe(x,C,P){return x==null?x:tD(x,C,P)}function PJe(x,C,P,H){return H=typeof H=="function"?H:n,x==null?x:tD(x,C,P,H)}var Gde=sde(wa),Yde=sde(nc);function OJe(x,C,P){var H=nr(x),Q=H||t1(x)||LE(x);if(C=An(C,4),P==null){var se=x&&x.constructor;Q?P=H?new se:[]:Hs(x)?P=U0(se)?OE(oO(x)):{}:P={}}return(Q?fl:Bp)(x,function(me,Ce,Oe){return C(P,me,Ce,Oe)}),P}function FJe(x,C){return x==null?!0:Jj(x,C)}function MJe(x,C,P){return x==null?x:zfe(x,C,tU(P))}function $Je(x,C,P,H){return H=typeof H=="function"?H:n,x==null?x:zfe(x,C,tU(P),H)}function BE(x){return x==null?[]:$o(x,wa(x))}function LJe(x){return x==null?[]:$o(x,nc(x))}function BJe(x,C,P){return P===n&&(P=C,C=n),P!==n&&(P=ld(P),P=P===P?P:0),C!==n&&(C=ld(C),C=C===C?C:0),fx(ld(x),C,P)}function jJe(x,C,P){return C=z0(C),P===n?(P=C,C=0):P=z0(P),x=ld(x),WYe(x,C,P)}function UJe(x,C,P){if(P&&typeof P!="boolean"&&hl(x,C,P)&&(C=P=n),P===n&&(typeof C=="boolean"?(P=C,C=n):typeof x=="boolean"&&(P=x,x=n)),x===n&&C===n?(x=0,C=1):(x=z0(x),C===n?(C=x,x=0):C=z0(C)),x>C){var H=x;x=C,C=H}if(P||x%1||C%1){var Q=vfe();return _u(x+Q*(C-x+Qt("1e-"+((Q+"").length-1))),C)}return Kj(x,C)}var zJe=ME(function(x,C,P){return C=C.toLowerCase(),x+(P?Kde(C):C)});function Kde(x){return _U(Fi(x).toLowerCase())}function Xde(x){return x=Fi(x),x&&x.replace(Ir,NGe).replace(fh,"")}function VJe(x,C,P){x=Fi(x),C=of(C);var H=x.length;P=P===n?H:fx(fr(P),0,H);var Q=P;return P-=C.length,P>=0&&x.slice(P,Q)==C}function HJe(x){return x=Fi(x),x&&ls.test(x)?x.replace(As,PGe):x}function qJe(x){return x=Fi(x),x&&ri.test(x)?x.replace(Vs,"\\$&"):x}var WJe=ME(function(x,C,P){return x+(P?"-":"")+C.toLowerCase()}),GJe=ME(function(x,C,P){return x+(P?" ":"")+C.toLowerCase()}),YJe=Zfe("toLowerCase");function KJe(x,C,P){x=Fi(x),C=fr(C);var H=C?IE(x):0;if(!C||H>=C)return x;var Q=(C-H)/2;return EO(cO(Q),P)+x+EO(lO(Q),P)}function XJe(x,C,P){x=Fi(x),C=fr(C);var H=C?IE(x):0;return C&&H<C?x+EO(C-H,P):x}function QJe(x,C,P){x=Fi(x),C=fr(C);var H=C?IE(x):0;return C&&H<C?EO(C-H,P)+x:x}function JJe(x,C,P){return P||C==null?C=0:C&&(C=+C),sYe(Fi(x).replace(Ni,""),C||0)}function ZJe(x,C,P){return(P?hl(x,C,P):C===n)?C=1:C=fr(C),Xj(Fi(x),C)}function eZe(){var x=arguments,C=Fi(x[0]);return x.length<3?C:C.replace(x[1],x[2])}var tZe=ME(function(x,C,P){return x+(P?"_":"")+C.toLowerCase()});function nZe(x,C,P){return P&&typeof P!="number"&&hl(x,C,P)&&(C=P=n),P=P===n?U:P>>>0,P?(x=Fi(x),x&&(typeof C=="string"||C!=null&&!bU(C))&&(C=of(C),!C&&DE(x))?e1(mh(x),0,P):x.split(C,P)):[]}var rZe=ME(function(x,C,P){return x+(P?" ":"")+_U(C)});function iZe(x,C,P){return x=Fi(x),P=P==null?0:fx(fr(P),0,x.length),C=of(C),x.slice(P,P+C.length)==C}function sZe(x,C,P){var H=ee.templateSettings;P&&hl(x,C,P)&&(C=n),x=Fi(x),C=FO({},C,H,ode);var Q=FO({},C.imports,H.imports,ode),se=wa(Q),me=$o(Q,se),Ce,Oe,ct=0,dt=C.interpolate||Jr,bt="__p += '",Ut=Fj((C.escape||Jr).source+"|"+dt.source+"|"+(dt===qa?xn:Jr).source+"|"+(C.evaluate||Jr).source+"|$","g"),sn="//# sourceURL="+(Ui.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++EE+"]")+`
`;x.replace(Ut,function(kn,kr,Vr,uf,pl,lf){return Vr||(Vr=uf),bt+=x.slice(ct,lf).replace(ir,OGe),kr&&(Ce=!0,bt+=`' +
__e(`+kr+`) +
'`),pl&&(Oe=!0,bt+=`';
`+pl+`;
__p += '`),Vr&&(bt+=`' +
((__t = (`+Vr+`)) == null ? '' : __t) +
'`),ct=lf+kn.length,kn}),bt+=`';
`;var In=Ui.call(C,"variable")&&C.variable;if(!In)bt=`with (obj) {
`+bt+`
}
`;else if(Dt.test(In))throw new Zn(a);bt=(Oe?bt.replace(Mn,""):bt).replace(ki,"$1").replace(di,"$1;"),bt="function("+(In||"obj")+`) {
`+(In?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ce?", __e = _.escape":"")+(Oe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+bt+`return __p
}`;var yr=Jde(function(){return Ci(se,sn+"return "+bt).apply(n,me)});if(yr.source=bt,vU(yr))throw yr;return yr}function oZe(x){return Fi(x).toLowerCase()}function aZe(x){return Fi(x).toUpperCase()}function uZe(x,C,P){if(x=Fi(x),x&&(P||C===n))return zr(x);if(!x||!(C=of(C)))return x;var H=mh(x),Q=mh(C),se=Zl(H,Q),me=ax(H,Q)+1;return e1(H,se,me).join("")}function lZe(x,C,P){if(x=Fi(x),x&&(P||C===n))return x.slice(0,ffe(x)+1);if(!x||!(C=of(C)))return x;var H=mh(x),Q=ax(H,mh(C))+1;return e1(H,0,Q).join("")}function cZe(x,C,P){if(x=Fi(x),x&&(P||C===n))return x.replace(Ni,"");if(!x||!(C=of(C)))return x;var H=mh(x),Q=Zl(H,mh(C));return e1(H,Q).join("")}function fZe(x,C){var P=I,H=R;if(Hs(C)){var Q="separator"in C?C.separator:Q;P="length"in C?fr(C.length):P,H="omission"in C?of(C.omission):H}x=Fi(x);var se=x.length;if(DE(x)){var me=mh(x);se=me.length}if(P>=se)return x;var Ce=P-IE(H);if(Ce<1)return H;var Oe=me?e1(me,0,Ce).join(""):x.slice(0,Ce);if(Q===n)return Oe+H;if(me&&(Ce+=Oe.length-Ce),bU(Q)){if(x.slice(Ce).search(Q)){var ct,dt=Oe;for(Q.global||(Q=Fj(Q.source,Fi(rr.exec(Q))+"g")),Q.lastIndex=0;ct=Q.exec(dt);)var bt=ct.index;Oe=Oe.slice(0,bt===n?Ce:bt)}}else if(x.indexOf(of(Q),Ce)!=Ce){var Ut=Oe.lastIndexOf(Q);Ut>-1&&(Oe=Oe.slice(0,Ut))}return Oe+H}function dZe(x){return x=Fi(x),x&&Br.test(x)?x.replace(Li,UGe):x}var hZe=ME(function(x,C,P){return x+(P?" ":"")+C.toUpperCase()}),_U=Zfe("toUpperCase");function Qde(x,C,P){return x=Fi(x),C=P?n:C,C===n?MGe(x)?HGe(x):AE(x):x.match(C)||[]}var Jde=_r(function(x,C){try{return xu(x,n,C)}catch(P){return vU(P)?P:new Zn(P)}}),pZe=B0(function(x,C){return fl(C,function(P){P=Up(P),$0(x,P,gU(x[P],x))}),x});function mZe(x){var C=x==null?0:x.length,P=An();return x=C?rs(x,function(H){if(typeof H[1]!="function")throw new id(o);return[P(H[0]),H[1]]}):[],_r(function(H){for(var Q=-1;++Q<C;){var se=x[Q];if(xu(se[0],this,H))return xu(se[1],this,H)}})}function gZe(x){return UYe(od(x,f))}function EU(x){return function(){return x}}function yZe(x,C){return x==null||x!==x?C:x}var vZe=tde(),bZe=tde(!0);function rc(x){return x}function SU(x){return Rfe(typeof x=="function"?x:od(x,f))}function xZe(x){return Pfe(od(x,f))}function wZe(x,C){return Ofe(x,od(C,f))}var _Ze=_r(function(x,C){return function(P){return ZA(P,x,C)}}),EZe=_r(function(x,C){return function(P){return ZA(x,P,C)}});function CU(x,C,P){var H=wa(C),Q=gO(C,H);P==null&&!(Hs(C)&&(Q.length||!H.length))&&(P=C,C=x,x=this,Q=gO(C,wa(C)));var se=!(Hs(P)&&"chain"in P)||!!P.chain,me=U0(x);return fl(Q,function(Ce){var Oe=C[Ce];x[Ce]=Oe,me&&(x.prototype[Ce]=function(){var ct=this.__chain__;if(se||ct){var dt=x(this.__wrapped__),bt=dt.__actions__=ec(this.__actions__);return bt.push({func:Oe,args:arguments,thisArg:x}),dt.__chain__=ct,dt}return Oe.apply(x,hh([this.value()],arguments))})}),x}function SZe(){return wn._===this&&(wn._=XGe),this}function TU(){}function CZe(x){return x=fr(x),_r(function(C){return Ffe(C,x)})}var TZe=rU(rs),AZe=rU(CE),DZe=rU(TE);function Zde(x){return cU(x)?K(Up(x)):iKe(x)}function IZe(x){return function(C){return x==null?n:dx(x,C)}}var kZe=rde(),RZe=rde(!0);function AU(){return[]}function DU(){return!1}function NZe(){return{}}function PZe(){return""}function OZe(){return!0}function FZe(x,C){if(x=fr(x),x<1||x>Y)return[];var P=U,H=_u(x,U);C=An(C),x-=U;for(var Q=Si(H,C);++P<x;)C(P);return Q}function MZe(x){return nr(x)?rs(x,Up):af(x)?[x]:ec(bde(Fi(x)))}function $Ze(x){var C=++YGe;return Fi(x)+C}var LZe=_O(function(x,C){return x+C},0),BZe=iU("ceil"),jZe=_O(function(x,C){return x/C},1),UZe=iU("floor");function zZe(x){return x&&x.length?mO(x,rc,Vj):n}function VZe(x,C){return x&&x.length?mO(x,An(C,2),Vj):n}function HZe(x){return z(x,rc)}function qZe(x,C){return z(x,An(C,2))}function WZe(x){return x&&x.length?mO(x,rc,Gj):n}function GZe(x,C){return x&&x.length?mO(x,An(C,2),Gj):n}var YZe=_O(function(x,C){return x*C},1),KZe=iU("round"),XZe=_O(function(x,C){return x-C},0);function QZe(x){return x&&x.length?Ft(x,rc):0}function JZe(x,C){return x&&x.length?Ft(x,An(C,2)):0}return ee.after=xQe,ee.ary=kde,ee.assign=aJe,ee.assignIn=Hde,ee.assignInWith=FO,ee.assignWith=uJe,ee.at=lJe,ee.before=Rde,ee.bind=gU,ee.bindAll=pZe,ee.bindKey=Nde,ee.castArray=NQe,ee.chain=Ade,ee.chunk=UKe,ee.compact=zKe,ee.concat=VKe,ee.cond=mZe,ee.conforms=gZe,ee.constant=EU,ee.countBy=QXe,ee.create=cJe,ee.curry=Pde,ee.curryRight=Ode,ee.debounce=Fde,ee.defaults=fJe,ee.defaultsDeep=dJe,ee.defer=wQe,ee.delay=_Qe,ee.difference=HKe,ee.differenceBy=qKe,ee.differenceWith=WKe,ee.drop=GKe,ee.dropRight=YKe,ee.dropRightWhile=KKe,ee.dropWhile=XKe,ee.fill=QKe,ee.filter=ZXe,ee.flatMap=nQe,ee.flatMapDeep=rQe,ee.flatMapDepth=iQe,ee.flatten=Ede,ee.flattenDeep=JKe,ee.flattenDepth=ZKe,ee.flip=EQe,ee.flow=vZe,ee.flowRight=bZe,ee.fromPairs=eXe,ee.functions=bJe,ee.functionsIn=xJe,ee.groupBy=sQe,ee.initial=nXe,ee.intersection=rXe,ee.intersectionBy=iXe,ee.intersectionWith=sXe,ee.invert=_Je,ee.invertBy=EJe,ee.invokeMap=aQe,ee.iteratee=SU,ee.keyBy=uQe,ee.keys=wa,ee.keysIn=nc,ee.map=IO,ee.mapKeys=CJe,ee.mapValues=TJe,ee.matches=xZe,ee.matchesProperty=wZe,ee.memoize=RO,ee.merge=AJe,ee.mergeWith=qde,ee.method=_Ze,ee.methodOf=EZe,ee.mixin=CU,ee.negate=NO,ee.nthArg=CZe,ee.omit=DJe,ee.omitBy=IJe,ee.once=SQe,ee.orderBy=lQe,ee.over=TZe,ee.overArgs=CQe,ee.overEvery=AZe,ee.overSome=DZe,ee.partial=yU,ee.partialRight=Mde,ee.partition=cQe,ee.pick=kJe,ee.pickBy=Wde,ee.property=Zde,ee.propertyOf=IZe,ee.pull=lXe,ee.pullAll=Cde,ee.pullAllBy=cXe,ee.pullAllWith=fXe,ee.pullAt=dXe,ee.range=kZe,ee.rangeRight=RZe,ee.rearg=TQe,ee.reject=hQe,ee.remove=hXe,ee.rest=AQe,ee.reverse=pU,ee.sampleSize=mQe,ee.set=NJe,ee.setWith=PJe,ee.shuffle=gQe,ee.slice=pXe,ee.sortBy=bQe,ee.sortedUniq=wXe,ee.sortedUniqBy=_Xe,ee.split=nZe,ee.spread=DQe,ee.tail=EXe,ee.take=SXe,ee.takeRight=CXe,ee.takeRightWhile=TXe,ee.takeWhile=AXe,ee.tap=zXe,ee.throttle=IQe,ee.thru=DO,ee.toArray=Ude,ee.toPairs=Gde,ee.toPairsIn=Yde,ee.toPath=MZe,ee.toPlainObject=Vde,ee.transform=OJe,ee.unary=kQe,ee.union=DXe,ee.unionBy=IXe,ee.unionWith=kXe,ee.uniq=RXe,ee.uniqBy=NXe,ee.uniqWith=PXe,ee.unset=FJe,ee.unzip=mU,ee.unzipWith=Tde,ee.update=MJe,ee.updateWith=$Je,ee.values=BE,ee.valuesIn=LJe,ee.without=OXe,ee.words=Qde,ee.wrap=RQe,ee.xor=FXe,ee.xorBy=MXe,ee.xorWith=$Xe,ee.zip=LXe,ee.zipObject=BXe,ee.zipObjectDeep=jXe,ee.zipWith=UXe,ee.entries=Gde,ee.entriesIn=Yde,ee.extend=Hde,ee.extendWith=FO,CU(ee,ee),ee.add=LZe,ee.attempt=Jde,ee.camelCase=zJe,ee.capitalize=Kde,ee.ceil=BZe,ee.clamp=BJe,ee.clone=PQe,ee.cloneDeep=FQe,ee.cloneDeepWith=MQe,ee.cloneWith=OQe,ee.conformsTo=$Qe,ee.deburr=Xde,ee.defaultTo=yZe,ee.divide=jZe,ee.endsWith=VJe,ee.eq=yh,ee.escape=HJe,ee.escapeRegExp=qJe,ee.every=JXe,ee.find=eQe,ee.findIndex=wde,ee.findKey=hJe,ee.findLast=tQe,ee.findLastIndex=_de,ee.findLastKey=pJe,ee.floor=UZe,ee.forEach=Dde,ee.forEachRight=Ide,ee.forIn=mJe,ee.forInRight=gJe,ee.forOwn=yJe,ee.forOwnRight=vJe,ee.get=xU,ee.gt=LQe,ee.gte=BQe,ee.has=wJe,ee.hasIn=wU,ee.head=Sde,ee.identity=rc,ee.includes=oQe,ee.indexOf=tXe,ee.inRange=jJe,ee.invoke=SJe,ee.isArguments=mx,ee.isArray=nr,ee.isArrayBuffer=jQe,ee.isArrayLike=tc,ee.isArrayLikeObject=vo,ee.isBoolean=UQe,ee.isBuffer=t1,ee.isDate=zQe,ee.isElement=VQe,ee.isEmpty=HQe,ee.isEqual=qQe,ee.isEqualWith=WQe,ee.isError=vU,ee.isFinite=GQe,ee.isFunction=U0,ee.isInteger=$de,ee.isLength=PO,ee.isMap=Lde,ee.isMatch=YQe,ee.isMatchWith=KQe,ee.isNaN=XQe,ee.isNative=QQe,ee.isNil=ZQe,ee.isNull=JQe,ee.isNumber=Bde,ee.isObject=Hs,ee.isObjectLike=eo,ee.isPlainObject=sD,ee.isRegExp=bU,ee.isSafeInteger=eJe,ee.isSet=jde,ee.isString=OO,ee.isSymbol=af,ee.isTypedArray=LE,ee.isUndefined=tJe,ee.isWeakMap=nJe,ee.isWeakSet=rJe,ee.join=oXe,ee.kebabCase=WJe,ee.last=ud,ee.lastIndexOf=aXe,ee.lowerCase=GJe,ee.lowerFirst=YJe,ee.lt=iJe,ee.lte=sJe,ee.max=zZe,ee.maxBy=VZe,ee.mean=HZe,ee.meanBy=qZe,ee.min=WZe,ee.minBy=GZe,ee.stubArray=AU,ee.stubFalse=DU,ee.stubObject=NZe,ee.stubString=PZe,ee.stubTrue=OZe,ee.multiply=YZe,ee.nth=uXe,ee.noConflict=SZe,ee.noop=TU,ee.now=kO,ee.pad=KJe,ee.padEnd=XJe,ee.padStart=QJe,ee.parseInt=JJe,ee.random=UJe,ee.reduce=fQe,ee.reduceRight=dQe,ee.repeat=ZJe,ee.replace=eZe,ee.result=RJe,ee.round=KZe,ee.runInContext=Ne,ee.sample=pQe,ee.size=yQe,ee.snakeCase=tZe,ee.some=vQe,ee.sortedIndex=mXe,ee.sortedIndexBy=gXe,ee.sortedIndexOf=yXe,ee.sortedLastIndex=vXe,ee.sortedLastIndexBy=bXe,ee.sortedLastIndexOf=xXe,ee.startCase=rZe,ee.startsWith=iZe,ee.subtract=XZe,ee.sum=QZe,ee.sumBy=JZe,ee.template=sZe,ee.times=FZe,ee.toFinite=z0,ee.toInteger=fr,ee.toLength=zde,ee.toLower=oZe,ee.toNumber=ld,ee.toSafeInteger=oJe,ee.toString=Fi,ee.toUpper=aZe,ee.trim=uZe,ee.trimEnd=lZe,ee.trimStart=cZe,ee.truncate=fZe,ee.unescape=dZe,ee.uniqueId=$Ze,ee.upperCase=hZe,ee.upperFirst=_U,ee.each=Dde,ee.eachRight=Ide,ee.first=Sde,CU(ee,function(){var x={};return Bp(ee,function(C,P){Ui.call(ee.prototype,P)||(x[P]=C)}),x}(),{chain:!1}),ee.VERSION=r,fl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){ee[x].placeholder=ee}),fl(["drop","take"],function(x,C){Or.prototype[x]=function(P){P=P===n?1:Zo(fr(P),0);var H=this.__filtered__&&!C?new Or(this):this.clone();return H.__filtered__?H.__takeCount__=_u(P,H.__takeCount__):H.__views__.push({size:_u(P,U),type:x+(H.__dir__<0?"Right":"")}),H},Or.prototype[x+"Right"]=function(P){return this.reverse()[x](P).reverse()}}),fl(["filter","map","takeWhile"],function(x,C){var P=C+1,H=P==$||P==j;Or.prototype[x]=function(Q){var se=this.clone();return se.__iteratees__.push({iteratee:An(Q,3),type:P}),se.__filtered__=se.__filtered__||H,se}}),fl(["head","last"],function(x,C){var P="take"+(C?"Right":"");Or.prototype[x]=function(){return this[P](1).value()[0]}}),fl(["initial","tail"],function(x,C){var P="drop"+(C?"":"Right");Or.prototype[x]=function(){return this.__filtered__?new Or(this):this[P](1)}}),Or.prototype.compact=function(){return this.filter(rc)},Or.prototype.find=function(x){return this.filter(x).head()},Or.prototype.findLast=function(x){return this.reverse().find(x)},Or.prototype.invokeMap=_r(function(x,C){return typeof x=="function"?new Or(this):this.map(function(P){return ZA(P,x,C)})}),Or.prototype.reject=function(x){return this.filter(NO(An(x)))},Or.prototype.slice=function(x,C){x=fr(x);var P=this;return P.__filtered__&&(x>0||C<0)?new Or(P):(x<0?P=P.takeRight(-x):x&&(P=P.drop(x)),C!==n&&(C=fr(C),P=C<0?P.dropRight(-C):P.take(C-x)),P)},Or.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},Or.prototype.toArray=function(){return this.take(U)},Bp(Or.prototype,function(x,C){var P=/^(?:filter|find|map|reject)|While$/.test(C),H=/^(?:head|last)$/.test(C),Q=ee[H?"take"+(C=="last"?"Right":""):C],se=H||/^find/.test(C);Q&&(ee.prototype[C]=function(){var me=this.__wrapped__,Ce=H?[1]:arguments,Oe=me instanceof Or,ct=Ce[0],dt=Oe||nr(me),bt=function(kr){var Vr=Q.apply(ee,hh([kr],Ce));return H&&Ut?Vr[0]:Vr};dt&&P&&typeof ct=="function"&&ct.length!=1&&(Oe=dt=!1);var Ut=this.__chain__,sn=!!this.__actions__.length,In=se&&!Ut,yr=Oe&&!sn;if(!se&&dt){me=yr?me:new Or(this);var kn=x.apply(me,Ce);return kn.__actions__.push({func:DO,args:[bt],thisArg:n}),new sd(kn,Ut)}return In&&yr?x.apply(this,Ce):(kn=this.thru(bt),In?H?kn.value()[0]:kn.value():kn)})}),fl(["pop","push","shift","sort","splice","unshift"],function(x){var C=eO[x],P=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",H=/^(?:pop|shift)$/.test(x);ee.prototype[x]=function(){var Q=arguments;if(H&&!this.__chain__){var se=this.value();return C.apply(nr(se)?se:[],Q)}return this[P](function(me){return C.apply(nr(me)?me:[],Q)})}}),Bp(Or.prototype,function(x,C){var P=ee[C];if(P){var H=P.name+"";Ui.call(PE,H)||(PE[H]=[]),PE[H].push({name:C,func:P})}}),PE[wO(n,y).name]=[{name:"wrapper",func:n}],Or.prototype.clone=dYe,Or.prototype.reverse=hYe,Or.prototype.value=pYe,ee.prototype.at=VXe,ee.prototype.chain=HXe,ee.prototype.commit=qXe,ee.prototype.next=WXe,ee.prototype.plant=YXe,ee.prototype.reverse=KXe,ee.prototype.toJSON=ee.prototype.valueOf=ee.prototype.value=XXe,ee.prototype.first=ee.prototype.head,WA&&(ee.prototype[WA]=GXe),ee},kE=qGe();ji?((ji.exports=kE)._=kE,Ei._=kE):wn._=kE}).call(on)})(L$,L$.exports);var z1n=L$.exports;const V1n="#/definitions/LibraryConfig",H1n="http://json-schema.org/draft-07/schema#",q1n={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LibraryConfig:{additionalProperties:!1,description:'LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\n\nBelow is the general template that should be followed when constructing a Library configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/LibraryConfigSchema.json",  "baseComponents": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  "components": {    // Components here are defined exactly as is in the StudyConfig  },  "sequences": {   // Sequences here are defined as "key": "value" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},description:{description:"A description of the library.",type:"string"},name:{description:"The name of the library.",type:"string"},reference:{description:"The reference to the paper where the content of the library is based on.",type:"string"},sequences:{additionalProperties:{$ref:"#/definitions/ComponentBlock"},description:"The order of the components in the study. This might include some randomness.",type:"object"}},required:["$schema","components","sequences"],type:"object"},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},W1n={$ref:V1n,$schema:H1n,definitions:q1n},NHe=new nce;NHe.addSchema(W1n);const G1n=NHe.getSchema("#/definitions/LibraryConfig");function PHe(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?PHe(n,t):`$${t}.components.${n}`)}}function OHe(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return OHe(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=PHe(l,a),l}return r})}}function Y1n(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;fA(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function K1n(e,t){let n=!1,r;try{r=sj.parse(e),n=G1n(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function X1n(e){const t=await(await fetch(`${Ll}libraries/${e}/config.json`)).text();return K1n(t,e)}async function Q1n(e,t,n){const r=e.map(async s=>{const o=await X1n(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(fA(a)){const u=z1n.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const FHe=new nce;FHe.addSchema(U1n);const S2e=FHe.getSchema("#/definitions/GlobalConfig"),MHe=new nce;MHe.addSchema($1n);const C2e=MHe.getSchema("#/definitions/StudyConfig");function J1n(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function Z1n(e){const t=sj.parse(e),n=S2e(t),r=J1n(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...S2e.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function $He(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):$He(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function evn(e,t){const n=[],r=[];Y1n(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;fA(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=w3e(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return $He(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function rce(e){let t=!1,n;try{n=sj.parse(e),t=C2e(n)}catch{t=!1}let r=C2e.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await Q1n(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=OHe(n.sequence,o,r);const{errors:a,warnings:u}=evn(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function tvn(e){const t=await(await fetch(`${Ll}${e}`)).text();return await rce(t)}async function ice(e,t){const n=t.configsList.find(r=>Dke(r)===e);if(n){const r=t.configs[n];return await tvn(`${r.path}`)}return null}async function nvn(e){const t={},n=e.configsList.map(async i=>ice(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function rvn({globalConfig:e}){const t=G_(),[n,r]=N.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";N.useEffect(()=>{if(t!=="__revisit-widget")return ice(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&rce(m.data.payload).then(async g=>{r(g);const y=await XEe(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:y},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=N.useState([]),[a,u]=N.useState(null),{storageEngine:l}=Po(),[c]=Tb(),f=N.useMemo(()=>c.get("participantId"),[c]);N.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await XEe(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(c.entries()),v=await fetch("https://api.ipify.org?format=json").catch(A=>""),b=v instanceof Response?await v.json():{ip:""},_={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},w=await l.initializeParticipantSession(t,y,n,_,f||g),S=await l.getModes(t),T=await Bwt(t,n,w.sequence,_,w.answers,S,w.participantId);u(T),o([{element:E.jsx(emn,{}),children:[{path:"/",element:E.jsx(FVe,{to:jh(0),replace:!0})},{path:"/:index",element:n.errors.length>0?E.jsxs(E.Fragment,{children:[E.jsx(lo,{order:2,mb:8,children:"Error loading config"}),E.jsx(nF,{issues:n.errors,type:"error"})]}):E.jsx($pn,{})}]}])}p()},[l,n,t,c,f]);const d=bke(s);let h=null;return i?s.length===0?h=E.jsx(jf,{visible:!0}):h=d&&a?E.jsx(C3e.Provider,{value:a,children:E.jsx(Fxt,{store:a.store,children:d})}):E.jsx(Nv,{}):h=E.jsx(Nv,{}),h}function GF({studyIds:e}){const t=Sp(),{studyId:n}=Vm(),r=Cb(),i=e.map(o=>({value:o,label:o})),s=r.pathname.includes("analysis");return E.jsx(Yi.Header,{p:"md",children:E.jsxs(Ef,{mt:-7,align:"center",children:[E.jsx(Ef.Col,{span:6,children:E.jsxs(Jt,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[E.jsx(Sb,{w:40,src:`${Ll}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),E.jsx(Rf,{w:"md"}),E.jsx(lo,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),E.jsx(Ef.Col,{span:6,children:E.jsxs(Jt,{justify:"flex-end",direction:"row",children:[s&&E.jsx(FT,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),E.jsx(Cke,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function LHe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=oZ(!1),[a,u]=N.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;Tie(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return E.jsxs(E.Fragment,{children:[E.jsxs($i,{style:{gap:n},children:[E.jsx(xs,{label:"Download all participants data as JSON",children:E.jsx(bn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:E.jsx(apt,{})})}),E.jsx(xs,{label:"Download all participants data as a tidy CSV",children:E.jsx(bn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:E.jsx(Tke,{})})})]}),i&&a.length>0&&E.jsx(Zjt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}var T2e={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BHe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},ivn=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},sce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(BHe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):ivn(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new svn;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class svn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ovn=function(e){const t=BHe(e);return sce.encodeByteArray(t,!0)},B$=function(e){return ovn(e).replace(/\./g,"")},jHe=function(e){try{return sce.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UHe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const avn=()=>UHe().__FIREBASE_DEFAULTS__,uvn=()=>{if(typeof process>"u"||typeof T2e>"u")return;const e=T2e.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},lvn=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&jHe(e[1]);return t&&JSON.parse(t)},fj=()=>{try{return avn()||uvn()||lvn()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},zHe=e=>{var t,n;return(n=(t=fj())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},cvn=e=>{const t=zHe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},VHe=()=>{var e;return(e=fj())===null||e===void 0?void 0:e.config},HHe=e=>{var t;return(t=fj())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fvn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[B$(JSON.stringify(n)),B$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dvn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mu())}function hvn(){var e;const t=(e=fj())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pvn(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function mvn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gvn(){const e=mu();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function yvn(){return!hvn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oce(){try{return typeof indexedDB=="object"}catch{return!1}}function vvn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bvn="FirebaseError";class I0 extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=bvn,Object.setPrototypeOf(this,I0.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,MA.prototype.create)}}class MA{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?xvn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new I0(i,a,r)}}function xvn(e,t){return e.replace(wvn,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const wvn=/\{\$([^}]+)}/g;function _vn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F3(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(A2e(s)&&A2e(o)){if(!F3(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function A2e(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Evn(e,t){const n=new Svn(e,t);return n.subscribe.bind(n)}class Svn{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Cvn(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Wq),i.error===void 0&&(i.error=Wq),i.complete===void 0&&(i.complete=Wq);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cvn(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Wq(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tvn=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Avn=1e3,Dvn=2,Ivn=4*60*60*1e3,kvn=.5;function Rvn(e,t=Avn,n=Dvn){const r=t*Math.pow(n,e),i=Math.round(kvn*r*(Math.random()-.5)*2);return Math.min(Ivn,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(e){return e&&e._delegate?e._delegate:e}class o0{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nvn{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new O3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Ovn(t))try{this.getOrInitializeService({instanceIdentifier:qx})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=qx){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=qx){return this.instances.has(t)}getOptions(t=qx){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pvn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=qx){return this.component?this.component.multipleInstances?t:qx:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pvn(e){return e===qx?void 0:e}function Ovn(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fvn{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Nvn(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Wr||(Wr={}));const Mvn={debug:Wr.DEBUG,verbose:Wr.VERBOSE,info:Wr.INFO,warn:Wr.WARN,error:Wr.ERROR,silent:Wr.SILENT},$vn=Wr.INFO,Lvn={[Wr.DEBUG]:"log",[Wr.VERBOSE]:"log",[Wr.INFO]:"info",[Wr.WARN]:"warn",[Wr.ERROR]:"error"},Bvn=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Lvn[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dj{constructor(t){this.name=t,this._logLevel=$vn,this._logHandler=Bvn,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Wr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Mvn[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Wr.DEBUG,...t),this._logHandler(this,Wr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Wr.VERBOSE,...t),this._logHandler(this,Wr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Wr.INFO,...t),this._logHandler(this,Wr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Wr.WARN,...t),this._logHandler(this,Wr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Wr.ERROR,...t),this._logHandler(this,Wr.ERROR,...t)}}const jvn=(e,t)=>t.some(n=>e instanceof n);let D2e,I2e;function Uvn(){return D2e||(D2e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zvn(){return I2e||(I2e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qHe=new WeakMap,OQ=new WeakMap,WHe=new WeakMap,Gq=new WeakMap,ace=new WeakMap;function Vvn(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(_v(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&qHe.set(n,e)}).catch(()=>{}),ace.set(t,e),t}function Hvn(e){if(OQ.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});OQ.set(e,t)}let FQ={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return OQ.get(e);if(t==="objectStoreNames")return e.objectStoreNames||WHe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _v(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function qvn(e){FQ=e(FQ)}function Wvn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Yq(this),t,...n);return WHe.set(r,t.sort?t.sort():[t]),_v(r)}:zvn().includes(e)?function(...t){return e.apply(Yq(this),t),_v(qHe.get(this))}:function(...t){return _v(e.apply(Yq(this),t))}}function Gvn(e){return typeof e=="function"?Wvn(e):(e instanceof IDBTransaction&&Hvn(e),jvn(e,Uvn())?new Proxy(e,FQ):e)}function _v(e){if(e instanceof IDBRequest)return Vvn(e);if(Gq.has(e))return Gq.get(e);const t=Gvn(e);return t!==e&&(Gq.set(e,t),ace.set(t,e)),t}const Yq=e=>ace.get(e);function Yvn(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=_v(o);return r&&o.addEventListener("upgradeneeded",u=>{r(_v(o.result),u.oldVersion,u.newVersion,_v(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Kvn=["get","getKey","getAll","getAllKeys","count"],Xvn=["put","add","delete","clear"],Kq=new Map;function k2e(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Kq.get(t))return Kq.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Xvn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Kvn.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Kq.set(t,s),s}qvn(e=>({...e,get:(t,n,r)=>k2e(t,n)||e.get(t,n,r),has:(t,n)=>!!k2e(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qvn{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Jvn(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Jvn(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const MQ="@firebase/app",R2e="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new dj("@firebase/app"),Zvn="@firebase/app-compat",ebn="@firebase/analytics-compat",tbn="@firebase/analytics",nbn="@firebase/app-check-compat",rbn="@firebase/app-check",ibn="@firebase/auth",sbn="@firebase/auth-compat",obn="@firebase/database",abn="@firebase/database-compat",ubn="@firebase/functions",lbn="@firebase/functions-compat",cbn="@firebase/installations",fbn="@firebase/installations-compat",dbn="@firebase/messaging",hbn="@firebase/messaging-compat",pbn="@firebase/performance",mbn="@firebase/performance-compat",gbn="@firebase/remote-config",ybn="@firebase/remote-config-compat",vbn="@firebase/storage",bbn="@firebase/storage-compat",xbn="@firebase/firestore",wbn="@firebase/vertexai-preview",_bn="@firebase/firestore-compat",Ebn="firebase",Sbn="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Q="[DEFAULT]",Cbn={[MQ]:"fire-core",[Zvn]:"fire-core-compat",[tbn]:"fire-analytics",[ebn]:"fire-analytics-compat",[rbn]:"fire-app-check",[nbn]:"fire-app-check-compat",[ibn]:"fire-auth",[sbn]:"fire-auth-compat",[obn]:"fire-rtdb",[abn]:"fire-rtdb-compat",[ubn]:"fire-fn",[lbn]:"fire-fn-compat",[cbn]:"fire-iid",[fbn]:"fire-iid-compat",[dbn]:"fire-fcm",[hbn]:"fire-fcm-compat",[pbn]:"fire-perf",[mbn]:"fire-perf-compat",[gbn]:"fire-rc",[ybn]:"fire-rc-compat",[vbn]:"fire-gcs",[bbn]:"fire-gcs-compat",[xbn]:"fire-fst",[_bn]:"fire-fst-compat",[wbn]:"fire-vertex","fire-js":"fire-js",[Ebn]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$=new Map,Tbn=new Map,LQ=new Map;function N2e(e,t){try{e.container.addComponent(t)}catch(n){T_.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function gy(e){const t=e.name;if(LQ.has(t))return T_.debug(`There were multiple attempts to register component ${t}.`),!1;LQ.set(t,e);for(const n of j$.values())N2e(n,e);for(const n of Tbn.values())N2e(n,e);return!0}function $A(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Sm(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Abn={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ev=new MA("app","Firebase",Abn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dbn{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new o0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ev.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=Sbn;function GHe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:$Q,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Ev.create("bad-app-name",{appName:String(i)});if(n||(n=VHe()),!n)throw Ev.create("no-options");const s=j$.get(i);if(s){if(F3(n,s.options)&&F3(r,s.config))return s;throw Ev.create("duplicate-app",{appName:i})}const o=new Fvn(i);for(const u of LQ.values())o.addComponent(u);const a=new Dbn(n,r,o);return j$.set(i,a),a}function uce(e=$Q){const t=j$.get(e);if(!t&&e===$Q&&VHe())return GHe();if(!t)throw Ev.create("no-app",{appName:e});return t}function lp(e,t,n){var r;let i=(r=Cbn[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),T_.warn(a.join(" "));return}gy(new o0(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ibn="firebase-heartbeat-database",kbn=1,M3="firebase-heartbeat-store";let Xq=null;function YHe(){return Xq||(Xq=Yvn(Ibn,kbn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(M3)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ev.create("idb-open",{originalErrorMessage:e.message})})),Xq}async function Rbn(e){try{const n=(await YHe()).transaction(M3),r=await n.objectStore(M3).get(KHe(e));return await n.done,r}catch(t){if(t instanceof I0)T_.warn(t.message);else{const n=Ev.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});T_.warn(n.message)}}}async function P2e(e,t){try{const r=(await YHe()).transaction(M3,"readwrite");await r.objectStore(M3).put(t,KHe(e)),await r.done}catch(n){if(n instanceof I0)T_.warn(n.message);else{const r=Ev.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});T_.warn(r.message)}}}function KHe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nbn=1024,Pbn=30*24*60*60*1e3;class Obn{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Mbn(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=O2e();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Pbn}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=O2e(),{heartbeatsToSend:r,unsentEntries:i}=Fbn(this._heartbeatsCache.heartbeats),s=B$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function O2e(){return new Date().toISOString().substring(0,10)}function Fbn(e,t=Nbn){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),F2e(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),F2e(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Mbn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oce()?vvn().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Rbn(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return P2e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return P2e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function F2e(e){return B$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $bn(e){gy(new o0("platform-logger",t=>new Qvn(t),"PRIVATE")),gy(new o0("heartbeat",t=>new Obn(t),"PRIVATE")),lp(MQ,R2e,e),lp(MQ,R2e,"esm2017"),lp("fire-js","")}$bn("");function XHe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lbn=XHe,QHe=new MA("auth","Firebase",XHe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$=new dj("@firebase/auth");function Bbn(e,...t){U$.logLevel<=Wr.WARN&&U$.warn(`Auth (${gE}): ${e}`,...t)}function YF(e,...t){U$.logLevel<=Wr.ERROR&&U$.error(`Auth (${gE}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(e,...t){throw cce(e,...t)}function cp(e,...t){return cce(e,...t)}function lce(e,t,n){const r=Object.assign(Object.assign({},Lbn()),{[t]:n});return new MA("auth","Firebase",r).create(t,{appName:e.name})}function Sv(e){return lce(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jbn(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&a0(e,"argument-error"),lce(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cce(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return QHe.create(e,...t)}function qn(e,t,...n){if(!e)throw cce(t,...n)}function Dg(e){const t="INTERNAL ASSERTION FAILED: "+e;throw YF(t),new Error(t)}function yy(e,t){e||Dg(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BQ(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Ubn(){return M2e()==="http:"||M2e()==="https:"}function M2e(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zbn(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ubn()||pvn()||"connection"in navigator)?navigator.onLine:!0}function Vbn(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(t,n){this.shortDelay=t,this.longDelay=n,yy(n>t,"Short delay should be less than long delay!"),this.isMobile=dvn()||mvn()}get(){return zbn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fce(e,t){yy(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JHe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hbn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qbn=new NP(3e4,6e4);function hj(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function LA(e,t,n,r,i={}){return ZHe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=RP(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),JHe.fetch()(tqe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function ZHe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hbn),t);try{const i=new Wbn(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw b6(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw b6(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw b6(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw b6(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw lce(e,c,l);a0(e,c)}}catch(i){if(i instanceof I0)throw i;a0(e,"network-request-failed",{message:String(i)})}}async function eqe(e,t,n,r,i={}){const s=await LA(e,t,n,r,i);return"mfaPendingCredential"in s&&a0(e,"multi-factor-auth-required",{_serverResponse:s}),s}function tqe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?fce(e.config,i):`${e.config.apiScheme}://${i}`}class Wbn{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cp(this.auth,"network-request-failed")),qbn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function b6(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=cp(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gbn(e,t){return LA(e,"POST","/v1/accounts:delete",t)}async function nqe(e,t){return LA(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Ybn(e,t=!1){const n=gs(e),r=await n.getIdToken(t),i=dce(r);qn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Yk(Qq(i.auth_time)),issuedAtTime:Yk(Qq(i.iat)),expirationTime:Yk(Qq(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Qq(e){return Number(e)*1e3}function dce(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return YF("JWT malformed, contained fewer than 3 sections"),null;try{const i=jHe(n);return i?JSON.parse(i):(YF("Failed to decode base64 JWT payload"),null)}catch(i){return YF("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $2e(e){const t=dce(e);return qn(t,"internal-error"),qn(typeof t.exp<"u","internal-error"),qn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof I0&&Kbn(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Kbn({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xbn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yk(this.lastLoginAt),this.creationTime=Yk(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await $3(e,nqe(n,{idToken:r}));qn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?rqe(s.providerUserInfo):[],a=Jbn(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jQ(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function Qbn(e){const t=gs(e);await z$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Jbn(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function rqe(e){return e.map(t=>{var{providerId:n}=t,r=tN(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zbn(e,t){const n=await ZHe(e,{},async()=>{const r=RP({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=tqe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",JHe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function exn(e,t){return LA(e,"POST","/v2/accounts:revokeToken",hj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){qn(t.idToken,"internal-error"),qn(typeof t.idToken<"u","internal-error"),qn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):$2e(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){qn(t.length!==0,"internal-error");const n=$2e(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(qn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Zbn(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new WS;return r&&(qn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(qn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(qn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new WS,this.toJSON())}_performRefresh(){return Dg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(e,t){qn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Ig{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=tN(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xbn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jQ(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await $3(this,this.stsTokenManager.getToken(this.auth,t));return qn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Ybn(this,t)}reload(){return Qbn(this)}_assign(t){this!==t&&(qn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Ig(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){qn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await z$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sm(this.auth.app))return Promise.reject(Sv(this.auth));const t=await this.getIdToken();return await $3(this,Gbn(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:_,isAnonymous:w,providerData:S,stsTokenManager:T}=n;qn(b&&T,t,"internal-error");const A=WS.fromJSON(this.name,T);qn(typeof b=="string",t,"internal-error"),u1(f,t.name),u1(d,t.name),qn(typeof _=="boolean",t,"internal-error"),qn(typeof w=="boolean",t,"internal-error"),u1(h,t.name),u1(p,t.name),u1(m,t.name),u1(g,t.name),u1(y,t.name),u1(v,t.name);const k=new Ig({uid:b,auth:t,email:d,emailVerified:_,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(k.providerData=S.map(I=>Object.assign({},I))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(t,n,r=!1){const i=new WS;i.updateFromServerResponse(n);const s=new Ig({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await z$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];qn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?rqe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new WS;a.updateFromIdToken(r);const u=new Ig({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new jQ(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2e=new Map;function kg(e){yy(e instanceof Function,"Expected a class definition");let t=L2e.get(e);return t?(yy(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,L2e.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iqe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}iqe.type="NONE";const B2e=iqe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(e,t,n){return`firebase:${e}:${t}:${n}`}class GS{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=KF(this.userKey,i.apiKey,s),this.fullPersistenceKey=KF("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Ig._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new GS(kg(B2e),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||kg(B2e);const o=KF(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Ig._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new GS(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new GS(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2e(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(aqe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(sqe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(lqe(t))return"Blackberry";if(cqe(t))return"Webos";if(hce(t))return"Safari";if((t.includes("chrome/")||oqe(t))&&!t.includes("edge/"))return"Chrome";if(uqe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sqe(e=mu()){return/firefox\//i.test(e)}function hce(e=mu()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function oqe(e=mu()){return/crios\//i.test(e)}function aqe(e=mu()){return/iemobile/i.test(e)}function uqe(e=mu()){return/android/i.test(e)}function lqe(e=mu()){return/blackberry/i.test(e)}function cqe(e=mu()){return/webos/i.test(e)}function pj(e=mu()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function txn(e=mu()){var t;return pj(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function nxn(){return gvn()&&document.documentMode===10}function fqe(e=mu()){return pj(e)||uqe(e)||cqe(e)||lqe(e)||/windows phone/i.test(e)||aqe(e)}function rxn(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dqe(e,t=[]){let n;switch(e){case"Browser":n=j2e(mu());break;case"Worker":n=`${j2e(mu())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${gE}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ixn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sxn(e,t={}){return LA(e,"GET","/v2/passwordPolicy",hj(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oxn=6;class axn{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:oxn,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uxn{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U2e(this),this.idTokenSubscription=new U2e(this),this.beforeStateQueue=new ixn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QHe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=kg(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await GS.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await nqe(this,{idToken:t}),r=await Ig._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Sm(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await z$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Vbn()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Sm(this.app))return Promise.reject(Sv(this));const n=t?gs(t):null;return n&&qn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&qn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Sm(this.app)?Promise.reject(Sv(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Sm(this.app)?Promise.reject(Sv(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kg(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await sxn(this),n=new axn(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new MA("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await exn(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&kg(t)||this._popupRedirectResolver;qn(n,this,"argument-error"),this.redirectPersistenceManager=await GS.create(this,[kg(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(qn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return qn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=dqe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Bbn(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function PP(e){return gs(e)}class U2e{constructor(t){this.auth=t,this.observer=null,this.addObserver=Evn(n=>this.observer=n)}get next(){return qn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pce={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lxn(e){pce=e}function cxn(e){return pce.loadJS(e)}function fxn(){return pce.gapiScript}function dxn(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hxn(e,t){const n=$A(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(F3(s,t??{}))return i;a0(i,"already-initialized")}return n.initialize({options:t})}function pxn(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(kg);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function mxn(e,t,n){const r=PP(e);qn(r._canInitEmulator,r,"emulator-config-failed"),qn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=hqe(t),{host:o,port:a}=gxn(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),yxn()}function hqe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function gxn(e){const t=hqe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:z2e(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:z2e(o)}}}function z2e(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function yxn(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pqe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Dg("not implemented")}_getIdTokenResponse(t){return Dg("not implemented")}_linkToIdToken(t,n){return Dg("not implemented")}_getReauthenticationResolver(t){return Dg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(e,t){return eqe(e,"POST","/v1/accounts:signInWithIdp",hj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vxn="http://localhost";class A_ extends pqe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new A_(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):a0("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=tN(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new A_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return YS(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,YS(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,YS(t,n)}buildRequest(){const t={requestUri:vxn,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=RP(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mce{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP extends mce{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1 extends OP{constructor(){super("facebook.com")}static credential(t){return A_._fromParams({providerId:F1.PROVIDER_ID,signInMethod:F1.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return F1.credentialFromTaggedObject(t)}static credentialFromError(t){return F1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return F1.credential(t.oauthAccessToken)}catch{return null}}}F1.FACEBOOK_SIGN_IN_METHOD="facebook.com";F1.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends OP{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return A_._fromParams({providerId:mg.PROVIDER_ID,signInMethod:mg.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return mg.credentialFromTaggedObject(t)}static credentialFromError(t){return mg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return mg.credential(n,r)}catch{return null}}}mg.GOOGLE_SIGN_IN_METHOD="google.com";mg.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1 extends OP{constructor(){super("github.com")}static credential(t){return A_._fromParams({providerId:M1.PROVIDER_ID,signInMethod:M1.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return M1.credentialFromTaggedObject(t)}static credentialFromError(t){return M1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return M1.credential(t.oauthAccessToken)}catch{return null}}}M1.GITHUB_SIGN_IN_METHOD="github.com";M1.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1 extends OP{constructor(){super("twitter.com")}static credential(t,n){return A_._fromParams({providerId:$1.PROVIDER_ID,signInMethod:$1.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return $1.credentialFromTaggedObject(t)}static credentialFromError(t){return $1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return $1.credential(n,r)}catch{return null}}}$1.TWITTER_SIGN_IN_METHOD="twitter.com";$1.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bxn(e,t){return eqe(e,"POST","/v1/accounts:signUp",hj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Ig._fromIdTokenResponse(t,r,i),o=V2e(r);return new cb({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=V2e(r);return new cb({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function V2e(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xxn(e){var t;if(Sm(e.app))return Promise.reject(Sv(e));const n=PP(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new cb({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await bxn(n,{returnSecureToken:!0}),i=await cb._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V$ extends I0{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,V$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new V$(t,n,r,i)}}function mqe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?V$._fromErrorAndOperation(e,s,t,r):s})}async function wxn(e,t,n=!1){const r=await $3(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return cb._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _xn(e,t,n=!1){const{auth:r}=e;if(Sm(r.app))return Promise.reject(Sv(r));const i="reauthenticate";try{const s=await $3(e,mqe(r,i,t,e),n);qn(s.idToken,r,"internal-error");const o=dce(s.idToken);qn(o,r,"internal-error");const{sub:a}=o;return qn(e.uid===a,r,"user-mismatch"),cb._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&a0(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Exn(e,t,n=!1){if(Sm(e.app))return Promise.reject(Sv(e));const r="signIn",i=await mqe(e,r,t),s=await cb._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Sxn(e,t,n,r){return gs(e).onIdTokenChanged(t,n,r)}function Cxn(e,t,n){return gs(e).beforeAuthStateChanged(t,n)}function Txn(e,t,n,r){return gs(e).onAuthStateChanged(t,n,r)}function Axn(e){return gs(e).signOut()}const H$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gqe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(H$,"1"),this.storage.removeItem(H$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dxn(){const e=mu();return hce(e)||pj(e)}const Ixn=1e3,kxn=10;class yqe extends gqe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Dxn()&&rxn(),this.fallbackToPolling=fqe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);nxn()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,kxn):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Ixn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}yqe.type="LOCAL";const Rxn=yqe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vqe extends gqe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}vqe.type="SESSION";const bqe=vqe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nxn(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new mj(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await Nxn(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mj.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gce(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pxn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=gce("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(){return window}function Oxn(e){Bm().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xqe(){return typeof Bm().WorkerGlobalScope<"u"&&typeof Bm().importScripts=="function"}async function Fxn(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mxn(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function $xn(){return xqe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wqe="firebaseLocalStorageDb",Lxn=1,q$="firebaseLocalStorage",_qe="fbase_key";class FP{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gj(e,t){return e.transaction([q$],t?"readwrite":"readonly").objectStore(q$)}function Bxn(){const e=indexedDB.deleteDatabase(wqe);return new FP(e).toPromise()}function UQ(){const e=indexedDB.open(wqe,Lxn);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(q$,{keyPath:_qe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(q$)?t(r):(r.close(),await Bxn(),t(await UQ()))})})}async function H2e(e,t,n){const r=gj(e,!0).put({[_qe]:t,value:n});return new FP(r).toPromise()}async function jxn(e,t){const n=gj(e,!1).get(t),r=await new FP(n).toPromise();return r===void 0?null:r.value}function q2e(e,t){const n=gj(e,!0).delete(t);return new FP(n).toPromise()}const Uxn=800,zxn=3;class Eqe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await UQ(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>zxn)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xqe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mj._getInstance($xn()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Fxn(),!this.activeServiceWorker)return;this.sender=new Pxn(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Mxn()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await UQ();return await H2e(t,H$,"1"),await q2e(t,H$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>H2e(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>jxn(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>q2e(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=gj(i,!1).getAll();return new FP(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Uxn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Eqe.type="LOCAL";const Vxn=Eqe;new NP(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sqe(e,t){return t?kg(t):(qn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yce extends pqe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return YS(t,this._buildIdpRequest())}_linkToIdToken(t,n){return YS(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return YS(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Hxn(e){return Exn(e.auth,new yce(e),e.bypassAuthState)}function qxn(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),_xn(n,new yce(e),e.bypassAuthState)}async function Wxn(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),wxn(n,new yce(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cqe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Hxn;case"linkViaPopup":case"linkViaRedirect":return Wxn;case"reauthViaPopup":case"reauthViaRedirect":return qxn;default:a0(this.auth,"internal-error")}}resolve(t){yy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){yy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gxn=new NP(2e3,1e4);async function Yxn(e,t,n){if(Sm(e.app))return Promise.reject(cp(e,"operation-not-supported-in-this-environment"));const r=PP(e);jbn(e,t,mce);const i=Sqe(r,n);return new Cw(r,"signInViaPopup",t,i).executeNotNull()}class Cw extends Cqe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Cw.currentPopupAction&&Cw.currentPopupAction.cancel(),Cw.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return qn(t,this.auth,"internal-error"),t}async onExecution(){yy(this.filter.length===1,"Popup operations only handle one event");const t=gce();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cp(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(cp(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cw.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cp(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Gxn.get())};t()}}Cw.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kxn="pendingRedirect",XF=new Map;class Xxn extends Cqe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=XF.get(this.auth._key());if(!t){try{const r=await Qxn(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}XF.set(this.auth._key(),t)}return this.bypassAuthState||XF.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Qxn(e,t){const n=ewn(t),r=Zxn(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Jxn(e,t){XF.set(e._key(),t)}function Zxn(e){return kg(e._redirectPersistence)}function ewn(e){return KF(Kxn,e.config.apiKey,e.name)}async function twn(e,t,n=!1){if(Sm(e.app))return Promise.reject(Sv(e));const r=PP(e),i=Sqe(r,t),o=await new Xxn(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nwn=10*60*1e3;class rwn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!iwn(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!Tqe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cp(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=nwn&&this.cachedEventUids.clear(),this.cachedEventUids.has(W2e(t))}saveEventToCache(t){this.cachedEventUids.add(W2e(t)),this.lastProcessedEventTime=Date.now()}}function W2e(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Tqe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function iwn(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tqe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function swn(e,t={}){return LA(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const own=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,awn=/^https?/;async function uwn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await swn(e);for(const n of t)try{if(lwn(n))return}catch{}a0(e,"unauthorized-domain")}function lwn(e){const t=BQ(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!awn.test(n))return!1;if(own.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cwn=new NP(3e4,6e4);function G2e(){const e=Bm().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function fwn(e){return new Promise((t,n)=>{var r,i,s;function o(){G2e(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{G2e(),n(cp(e,"network-request-failed"))},timeout:cwn.get()})}if(!((i=(r=Bm().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Bm().gapi)===null||s===void 0)&&s.load)o();else{const a=dxn("iframefcb");return Bm()[a]=()=>{gapi.load?o():n(cp(e,"network-request-failed"))},cxn(`${fxn()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw QF=null,t})}let QF=null;function dwn(e){return QF=QF||fwn(e),QF}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hwn=new NP(5e3,15e3),pwn="__/auth/iframe",mwn="emulator/auth/iframe",gwn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ywn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vwn(e){const t=e.config;qn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?fce(t,mwn):`https://${e.config.authDomain}/${pwn}`,r={apiKey:t.apiKey,appName:e.name,v:gE},i=ywn.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${RP(r).slice(1)}`}async function bwn(e){const t=await dwn(e),n=Bm().gapi;return qn(n,e,"internal-error"),t.open({where:document.body,url:vwn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gwn,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=cp(e,"network-request-failed"),a=Bm().setTimeout(()=>{s(o)},hwn.get());function u(){Bm().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xwn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wwn=500,_wn=600,Ewn="_blank",Swn="http://localhost";class Y2e{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Cwn(e,t,n,r=wwn,i=_wn){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},xwn),{width:r.toString(),height:i.toString(),top:s,left:o}),l=mu().toLowerCase();n&&(a=oqe(l)?Ewn:n),sqe(l)&&(t=t||Swn,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(txn(l)&&a!=="_self")return Twn(t||"",a),new Y2e(null);const f=window.open(t||"",a,c);qn(f,e,"popup-blocked");try{f.focus()}catch{}return new Y2e(f)}function Twn(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Awn="__/auth/handler",Dwn="emulator/auth/handler",Iwn=encodeURIComponent("fac");async function K2e(e,t,n,r,i,s){qn(e.config.authDomain,e,"auth-domain-config-required"),qn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:gE,eventId:i};if(t instanceof mce){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",_vn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof OP){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Iwn}=${encodeURIComponent(u)}`:"";return`${kwn(e)}?${RP(a).slice(1)}${l}`}function kwn({config:e}){return e.emulator?fce(e,Dwn):`https://${e.authDomain}/${Awn}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq="webStorageSupport";class Rwn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bqe,this._completeRedirectFn=twn,this._overrideRedirectResult=Jxn}async _openPopup(t,n,r,i){var s;yy((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await K2e(t,n,r,BQ(),i);return Cwn(t,o,gce())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await K2e(t,n,r,BQ(),i);return Oxn(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(yy(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await bwn(t),r=new rwn(t);return n.register("authEvent",i=>(qn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Jq,{type:Jq},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Jq];o!==void 0&&n(!!o),a0(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uwn(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return fqe()||hce()||pj()}}const Aqe=Rwn;var X2e="@firebase/auth",Q2e="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nwn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){qn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pwn(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Own(e){gy(new o0("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;qn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dqe(e)},l=new uxn(r,i,s,u);return pxn(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),gy(new o0("auth-internal",t=>{const n=PP(t.getProvider("auth").getImmediate());return(r=>new Nwn(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lp(X2e,Q2e,Pwn(e)),lp(X2e,Q2e,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fwn=5*60,Mwn=HHe("authIdTokenMaxAge")||Fwn;let J2e=null;const $wn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Mwn)return;const i=n==null?void 0:n.token;J2e!==i&&(J2e=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function W$(e=uce()){const t=$A(e,"auth");if(t.isInitialized())return t.getImmediate();const n=hxn(e,{popupRedirectResolver:Aqe,persistence:[Vxn,Rxn,bqe]}),r=HHe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=$wn(s.toString());Cxn(n,o,()=>o(n.currentUser)),Sxn(n,a=>o(a))}}const i=zHe("auth");return i&&mxn(n,`http://${i}`),n}function Lwn(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}lxn({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=cp("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Lwn().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Own("Browser");var Bwn="firebase",jwn="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lp(Bwn,jwn,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dqe="firebasestorage.googleapis.com",Iqe="storageBucket",Uwn=2*60*1e3,zwn=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends I0{constructor(t,n,r=0){super(Zq(t),`Firebase Storage: ${n} (${Zq(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yo.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Zq(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var go;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(go||(go={}));function Zq(e){return"storage/"+e}function vce(){const e="An unknown error occurred, please check the error payload for server response.";return new yo(go.UNKNOWN,e)}function Vwn(e){return new yo(go.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Hwn(e){return new yo(go.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qwn(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yo(go.UNAUTHENTICATED,e)}function Wwn(){return new yo(go.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Gwn(e){return new yo(go.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Ywn(){return new yo(go.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Kwn(){return new yo(go.CANCELED,"User canceled the upload/download.")}function Xwn(e){return new yo(go.INVALID_URL,"Invalid URL '"+e+"'.")}function Qwn(e){return new yo(go.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Jwn(){return new yo(go.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Iqe+"' property when initializing the app?")}function Zwn(){return new yo(go.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function e_n(){return new yo(go.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function t_n(e){return new yo(go.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zQ(e){return new yo(go.INVALID_ARGUMENT,e)}function kqe(){return new yo(go.APP_DELETED,"The Firebase app was deleted.")}function n_n(e){return new yo(go.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kk(e,t){return new yo(go.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function tI(e){throw new yo(go.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Rl.makeFromUrl(t,n)}catch{return new Rl(t,"")}if(r.path==="")return r;throw Qwn(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(_){_.path_=decodeURIComponent(_.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===Dqe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let _=0;_<b.length;_++){const w=b[_],S=w.regex.exec(t);if(S){const T=S[w.indices.bucket];let A=S[w.indices.path];A||(A=""),r=new Rl(T,A),w.postModify(r);break}}if(r==null)throw Xwn(t);return r}}class r_n{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_n(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function s_n(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_n(e){return e!==void 0}function a_n(e){return typeof e=="object"&&!Array.isArray(e)}function bce(e){return typeof e=="string"||e instanceof String}function Z2e(e){return xce()&&e instanceof Blob}function xce(){return typeof Blob<"u"}function VQ(e,t,n,r){if(r<t)throw zQ(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw zQ(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Rqe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jw;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(jw||(jw={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_n(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_n{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new x6(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===jw.NO_ERROR,u=s.getStatus();if(!a||u_n(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===jw.ABORT;r(!1,new x6(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new x6(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());o_n(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=vce();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?kqe():Kwn();o(u)}else{const u=Ywn();o(u)}};this.canceled_?n(!1,new x6(!1,null,!0)):this.backoffId_=i_n(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&s_n(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class x6{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function c_n(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function f_n(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function d_n(e,t){t&&(e["X-Firebase-GMPID"]=t)}function h_n(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function p_n(e,t,n,r,i,s,o=!0){const a=Rqe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return d_n(l,t),c_n(l,n),f_n(l,s),h_n(l,r),new l_n(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_n(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function g_n(...e){const t=m_n();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(xce())return new Blob(e);throw new yo(go.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function y_n(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_n(e){if(typeof atob>"u")throw t_n("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class eW{constructor(t,n){this.data=t,this.contentType=n||null}}function b_n(e,t){switch(e){case Cm.RAW:return new eW(Nqe(t));case Cm.BASE64:case Cm.BASE64URL:return new eW(Pqe(e,t));case Cm.DATA_URL:return new eW(w_n(t),__n(t))}throw vce()}function Nqe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function x_n(e){let t;try{t=decodeURIComponent(e)}catch{throw Kk(Cm.DATA_URL,"Malformed data URL.")}return Nqe(t)}function Pqe(e,t){switch(e){case Cm.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Kk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Cm.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Kk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=v_n(t)}catch(i){throw i.message.includes("polyfill")?i:Kk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Oqe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Kk(Cm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=E_n(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function w_n(e){const t=new Oqe(e);return t.base64?Pqe(Cm.BASE64,t.rest):x_n(t.rest)}function __n(e){return new Oqe(e).contentType}function E_n(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(t,n){let r=0,i="";Z2e(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Z2e(this.data_)){const r=this.data_,i=y_n(r,t,n);return i===null?null:new L1(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new L1(r,!0)}}static getBlob(...t){if(xce()){const n=t.map(r=>r instanceof L1?r.data_:r);return new L1(g_n.apply(null,n))}else{const n=t.map(o=>bce(o)?b_n(Cm.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new L1(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wce(e){let t;try{t=JSON.parse(e)}catch{return null}return a_n(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_n(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function C_n(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function Fqe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_n(e,t){return t}class bl{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||T_n}}let w6=null;function A_n(e){return!bce(e)||e.length<2?e:Fqe(e)}function Mqe(){if(w6)return w6;const e=[];e.push(new bl("bucket")),e.push(new bl("generation")),e.push(new bl("metageneration")),e.push(new bl("name","fullPath",!0));function t(s,o){return A_n(o)}const n=new bl("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new bl("size");return i.xform=r,e.push(i),e.push(new bl("timeCreated")),e.push(new bl("updated")),e.push(new bl("md5Hash",null,!0)),e.push(new bl("cacheControl",null,!0)),e.push(new bl("contentDisposition",null,!0)),e.push(new bl("contentEncoding",null,!0)),e.push(new bl("contentLanguage",null,!0)),e.push(new bl("contentType",null,!0)),e.push(new bl("metadata","customMetadata",!0)),w6=e,w6}function D_n(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Rl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function I_n(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return D_n(r,e),r}function $qe(e,t,n){const r=wce(t);return r===null?null:I_n(e,r,n)}function k_n(e,t,n,r){const i=wce(t);if(i===null||!bce(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=MP(d,n,r),p=Rqe({alt:"media",token:l});return h+p})[0]}function R_n(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eSe="prefixes",tSe="items";function N_n(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[eSe])for(const i of n[eSe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Rl(t,s));r.prefixes.push(o)}if(n[tSe])for(const i of n[tSe]){const s=e._makeStorageReference(new Rl(t,i.name));r.items.push(s)}return r}function P_n(e,t,n){const r=wce(n);return r===null?null:N_n(e,t,r)}class yj{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ce(e){if(!e)throw vce()}function O_n(e,t){function n(r,i){const s=$qe(e,i,t);return _ce(s!==null),s}return n}function F_n(e,t){function n(r,i){const s=P_n(e,t,i);return _ce(s!==null),s}return n}function M_n(e,t){function n(r,i){const s=$qe(e,i,t);return _ce(s!==null),k_n(s,i,e.host,e._protocol)}return n}function Ece(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Wwn():i=qwn():n.getStatus()===402?i=Hwn(e.bucket):n.getStatus()===403?i=Gwn(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function Lqe(e){const t=Ece(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=Vwn(e.path)),s.serverResponse=i.serverResponse,s}return n}function $_n(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=MP(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new yj(a,u,F_n(e,t.bucket),l);return c.urlParams=s,c.errorHandler=Ece(t),c}function L_n(e,t,n){const r=t.fullServerUrl(),i=MP(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new yj(i,s,M_n(e,n),o);return a.errorHandler=Lqe(t),a}function B_n(e,t){const n=t.fullServerUrl(),r=MP(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new yj(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Lqe(t),a}function j_n(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function U_n(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=j_n(null,t)),r}function z_n(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let _=0;_<2;_++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=U_n(t,r,i),c=R_n(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=L1.getBlob(f,r,d);if(h===null)throw Zwn();const p={name:l.fullPath},m=MP(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new yj(m,g,O_n(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=Ece(t),v}class V_n{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jw.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jw.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jw.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw tI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tI("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class H_n extends V_n{initXhr(){this.xhr_.responseType="text"}}function vj(){return new H_n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(t,n){this._service=t,n instanceof Rl?this._location=n:this._location=Rl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new D_(t,n)}get root(){const t=new Rl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fqe(this._location.path)}get storage(){return this._service}get parent(){const t=S_n(this._location.path);if(t===null)return null;const n=new Rl(this._location.bucket,t);return new D_(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw n_n(t)}}function q_n(e,t,n){e._throwIfRoot("uploadBytes");const r=z_n(e.storage,e._location,Mqe(),new L1(t,!0),n);return e.storage.makeRequestWithTokens(r,vj).then(i=>({metadata:i,ref:e}))}function W_n(e){const t={prefixes:[],items:[]};return Bqe(e,t).then(()=>t)}async function Bqe(e,t,n){const i=await G_n(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await Bqe(e,t,i.nextPageToken)}function G_n(e,t){t!=null&&typeof t.maxResults=="number"&&VQ("options.maxResults",1,1e3,t.maxResults);const n=t,r=$_n(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,vj)}function Y_n(e){e._throwIfRoot("getDownloadURL");const t=L_n(e.storage,e._location,Mqe());return e.storage.makeRequestWithTokens(t,vj).then(n=>{if(n===null)throw e_n();return n})}function K_n(e){e._throwIfRoot("deleteObject");const t=B_n(e.storage,e._location);return e.storage.makeRequestWithTokens(t,vj)}function X_n(e,t){const n=C_n(e._location.path,t),r=new Rl(e._location.bucket,n);return new D_(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_n(e){return/^[A-Za-z]+:\/\//.test(e)}function J_n(e,t){return new D_(e,t)}function jqe(e,t){if(e instanceof Sce){const n=e;if(n._bucket==null)throw Jwn();const r=new D_(n,n._bucket);return t!=null?jqe(r,t):r}else return t!==void 0?X_n(e,t):e}function Z_n(e,t){if(t&&Q_n(t)){if(e instanceof Sce)return J_n(e,t);throw zQ("To use ref(service, url), the first argument must be a Storage instance.")}else return jqe(e,t)}function nSe(e,t){const n=t==null?void 0:t[Iqe];return n==null?null:Rl.makeFromBucketSpec(n,e)}function eEn(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:fvn(i,e.app.options.projectId))}class Sce{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Dqe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Uwn,this._maxUploadRetryTime=zwn,this._requests=new Set,i!=null?this._bucket=Rl.makeFromBucketSpec(i,this._host):this._bucket=nSe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Rl.makeFromBucketSpec(this._url,t):this._bucket=nSe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){VQ("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){VQ("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new D_(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new r_n(kqe());{const o=p_n(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const rSe="@firebase/storage",iSe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uqe="storage";function _6(e,t,n){return e=gs(e),q_n(e,t,n)}function nI(e){return e=gs(e),W_n(e)}function E6(e){return e=gs(e),Y_n(e)}function sSe(e){return e=gs(e),K_n(e)}function cf(e,t){return e=gs(e),Z_n(e,t)}function oSe(e=uce(),t){e=gs(e);const r=$A(e,Uqe).getImmediate({identifier:t}),i=cvn("storage");return i&&tEn(r,...i),r}function tEn(e,t,n,r={}){eEn(e,t,n,r)}function nEn(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Sce(n,r,i,t,gE)}function rEn(){gy(new o0(Uqe,nEn,"PUBLIC").setMultipleInstances(!0)),lp(rSe,iSe,""),lp(rSe,iSe,"esm2017")}rEn();var aSe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uw,zqe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,A){function k(){}k.prototype=A.prototype,T.D=A.prototype,T.prototype=new k,T.prototype.constructor=T,T.C=function(I,R,F){for(var O=Array(arguments.length-2),$=2;$<arguments.length;$++)O[$-2]=arguments[$];return A.prototype[R].apply(I,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,A,k){k||(k=0);var I=Array(16);if(typeof A=="string")for(var R=0;16>R;++R)I[R]=A.charCodeAt(k++)|A.charCodeAt(k++)<<8|A.charCodeAt(k++)<<16|A.charCodeAt(k++)<<24;else for(R=0;16>R;++R)I[R]=A[k++]|A[k++]<<8|A[k++]<<16|A[k++]<<24;A=T.g[0],k=T.g[1],R=T.g[2];var F=T.g[3],O=A+(F^k&(R^F))+I[0]+3614090360&4294967295;A=k+(O<<7&4294967295|O>>>25),O=F+(R^A&(k^R))+I[1]+3905402710&4294967295,F=A+(O<<12&4294967295|O>>>20),O=R+(k^F&(A^k))+I[2]+606105819&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(A^R&(F^A))+I[3]+3250441966&4294967295,k=R+(O<<22&4294967295|O>>>10),O=A+(F^k&(R^F))+I[4]+4118548399&4294967295,A=k+(O<<7&4294967295|O>>>25),O=F+(R^A&(k^R))+I[5]+1200080426&4294967295,F=A+(O<<12&4294967295|O>>>20),O=R+(k^F&(A^k))+I[6]+2821735955&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(A^R&(F^A))+I[7]+4249261313&4294967295,k=R+(O<<22&4294967295|O>>>10),O=A+(F^k&(R^F))+I[8]+1770035416&4294967295,A=k+(O<<7&4294967295|O>>>25),O=F+(R^A&(k^R))+I[9]+2336552879&4294967295,F=A+(O<<12&4294967295|O>>>20),O=R+(k^F&(A^k))+I[10]+4294925233&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(A^R&(F^A))+I[11]+2304563134&4294967295,k=R+(O<<22&4294967295|O>>>10),O=A+(F^k&(R^F))+I[12]+1804603682&4294967295,A=k+(O<<7&4294967295|O>>>25),O=F+(R^A&(k^R))+I[13]+4254626195&4294967295,F=A+(O<<12&4294967295|O>>>20),O=R+(k^F&(A^k))+I[14]+2792965006&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(A^R&(F^A))+I[15]+1236535329&4294967295,k=R+(O<<22&4294967295|O>>>10),O=A+(R^F&(k^R))+I[1]+4129170786&4294967295,A=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(A^k))+I[6]+3225465664&4294967295,F=A+(O<<9&4294967295|O>>>23),O=R+(A^k&(F^A))+I[11]+643717713&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^A&(R^F))+I[0]+3921069994&4294967295,k=R+(O<<20&4294967295|O>>>12),O=A+(R^F&(k^R))+I[5]+3593408605&4294967295,A=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(A^k))+I[10]+38016083&4294967295,F=A+(O<<9&4294967295|O>>>23),O=R+(A^k&(F^A))+I[15]+3634488961&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^A&(R^F))+I[4]+3889429448&4294967295,k=R+(O<<20&4294967295|O>>>12),O=A+(R^F&(k^R))+I[9]+568446438&4294967295,A=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(A^k))+I[14]+3275163606&4294967295,F=A+(O<<9&4294967295|O>>>23),O=R+(A^k&(F^A))+I[3]+4107603335&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^A&(R^F))+I[8]+1163531501&4294967295,k=R+(O<<20&4294967295|O>>>12),O=A+(R^F&(k^R))+I[13]+2850285829&4294967295,A=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(A^k))+I[2]+4243563512&4294967295,F=A+(O<<9&4294967295|O>>>23),O=R+(A^k&(F^A))+I[7]+1735328473&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^A&(R^F))+I[12]+2368359562&4294967295,k=R+(O<<20&4294967295|O>>>12),O=A+(k^R^F)+I[5]+4294588738&4294967295,A=k+(O<<4&4294967295|O>>>28),O=F+(A^k^R)+I[8]+2272392833&4294967295,F=A+(O<<11&4294967295|O>>>21),O=R+(F^A^k)+I[11]+1839030562&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^A)+I[14]+4259657740&4294967295,k=R+(O<<23&4294967295|O>>>9),O=A+(k^R^F)+I[1]+2763975236&4294967295,A=k+(O<<4&4294967295|O>>>28),O=F+(A^k^R)+I[4]+1272893353&4294967295,F=A+(O<<11&4294967295|O>>>21),O=R+(F^A^k)+I[7]+4139469664&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^A)+I[10]+3200236656&4294967295,k=R+(O<<23&4294967295|O>>>9),O=A+(k^R^F)+I[13]+681279174&4294967295,A=k+(O<<4&4294967295|O>>>28),O=F+(A^k^R)+I[0]+3936430074&4294967295,F=A+(O<<11&4294967295|O>>>21),O=R+(F^A^k)+I[3]+3572445317&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^A)+I[6]+76029189&4294967295,k=R+(O<<23&4294967295|O>>>9),O=A+(k^R^F)+I[9]+3654602809&4294967295,A=k+(O<<4&4294967295|O>>>28),O=F+(A^k^R)+I[12]+3873151461&4294967295,F=A+(O<<11&4294967295|O>>>21),O=R+(F^A^k)+I[15]+530742520&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^A)+I[2]+3299628645&4294967295,k=R+(O<<23&4294967295|O>>>9),O=A+(R^(k|~F))+I[0]+4096336452&4294967295,A=k+(O<<6&4294967295|O>>>26),O=F+(k^(A|~R))+I[7]+1126891415&4294967295,F=A+(O<<10&4294967295|O>>>22),O=R+(A^(F|~k))+I[14]+2878612391&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~A))+I[5]+4237533241&4294967295,k=R+(O<<21&4294967295|O>>>11),O=A+(R^(k|~F))+I[12]+1700485571&4294967295,A=k+(O<<6&4294967295|O>>>26),O=F+(k^(A|~R))+I[3]+2399980690&4294967295,F=A+(O<<10&4294967295|O>>>22),O=R+(A^(F|~k))+I[10]+4293915773&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~A))+I[1]+2240044497&4294967295,k=R+(O<<21&4294967295|O>>>11),O=A+(R^(k|~F))+I[8]+1873313359&4294967295,A=k+(O<<6&4294967295|O>>>26),O=F+(k^(A|~R))+I[15]+4264355552&4294967295,F=A+(O<<10&4294967295|O>>>22),O=R+(A^(F|~k))+I[6]+2734768916&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~A))+I[13]+1309151649&4294967295,k=R+(O<<21&4294967295|O>>>11),O=A+(R^(k|~F))+I[4]+4149444226&4294967295,A=k+(O<<6&4294967295|O>>>26),O=F+(k^(A|~R))+I[11]+3174756917&4294967295,F=A+(O<<10&4294967295|O>>>22),O=R+(A^(F|~k))+I[2]+718787259&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~A))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(R+(O<<21&4294967295|O>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+F&4294967295}r.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var k=A-this.blockSize,I=this.B,R=this.h,F=0;F<A;){if(R==0)for(;F<=k;)i(this,T,F),F+=this.blockSize;if(typeof T=="string"){for(;F<A;)if(I[R++]=T.charCodeAt(F++),R==this.blockSize){i(this,I),R=0;break}}else for(;F<A;)if(I[R++]=T[F++],R==this.blockSize){i(this,I),R=0;break}}this.h=R,this.o+=A},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var k=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=k&255,k/=256;for(this.u(T),T=Array(16),A=k=0;4>A;++A)for(var I=0;32>I;I+=8)T[k++]=this.g[A]>>>I&255;return T};function s(T,A){var k=a;return Object.prototype.hasOwnProperty.call(k,T)?k[T]:k[T]=A(T)}function o(T,A){this.h=A;for(var k=[],I=!0,R=T.length-1;0<=R;R--){var F=T[R]|0;I&&F==A||(k[R]=F,I=!1)}this.g=k}var a={};function u(T){return-128<=T&&128>T?s(T,function(A){return new o([A|0],0>A?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return g(l(-T));for(var A=[],k=1,I=0;T>=k;I++)A[I]=T/k|0,k*=4294967296;return new o(A,0)}function c(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return g(c(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=l(Math.pow(A,8)),I=f,R=0;R<T.length;R+=8){var F=Math.min(8,T.length-R),O=parseInt(T.substring(R,R+F),A);8>F?(F=l(Math.pow(A,F)),I=I.j(F).add(l(O))):(I=I.j(k),I=I.add(l(O)))}return I}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,A=1,k=0;k<this.g.length;k++){var I=this.i(k);T+=(0<=I?I:4294967296+I)*A,A*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var A=l(Math.pow(T,6)),k=this,I="";;){var R=_(k,A).g;k=y(k,R.j(A));var F=((0<k.g.length?k.g[0]:k.h)>>>0).toString(T);if(k=R,p(k))return F+I;for(;6>F.length;)F="0"+F;I=F+I}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var A=T.g.length,k=[],I=0;I<A;I++)k[I]=~T.g[I];return new o(k,~T.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var A=Math.max(this.g.length,T.g.length),k=[],I=0,R=0;R<=A;R++){var F=I+(this.i(R)&65535)+(T.i(R)&65535),O=(F>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);I=O>>>16,F&=65535,O&=65535,k[R]=O<<16|F}return new o(k,k[k.length-1]&-2147483648?-1:0)};function y(T,A){return T.add(g(A))}e.j=function(T){if(p(this)||p(T))return f;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return l(this.m()*T.m());for(var A=this.g.length+T.g.length,k=[],I=0;I<2*A;I++)k[I]=0;for(I=0;I<this.g.length;I++)for(var R=0;R<T.g.length;R++){var F=this.i(I)>>>16,O=this.i(I)&65535,$=T.i(R)>>>16,V=T.i(R)&65535;k[2*I+2*R]+=O*V,v(k,2*I+2*R),k[2*I+2*R+1]+=F*V,v(k,2*I+2*R+1),k[2*I+2*R+1]+=O*$,v(k,2*I+2*R+1),k[2*I+2*R+2]+=F*$,v(k,2*I+2*R+2)}for(I=0;I<A;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=A;I<2*A;I++)k[I]=0;return new o(k,0)};function v(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function b(T,A){this.g=T,this.h=A}function _(T,A){if(p(A))throw Error("division by zero");if(p(T))return new b(f,f);if(m(T))return A=_(g(T),A),new b(g(A.g),g(A.h));if(m(A))return A=_(T,g(A)),new b(g(A.g),A.h);if(30<T.g.length){if(m(T)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var k=d,I=A;0>=I.l(T);)k=w(k),I=w(I);var R=S(k,1),F=S(I,1);for(I=S(I,2),k=S(k,2);!p(I);){var O=F.add(I);0>=O.l(T)&&(R=R.add(k),F=O),I=S(I,1),k=S(k,1)}return A=y(T,R.j(A)),new b(R,A)}for(R=f;0<=T.l(A);){for(k=Math.max(1,Math.floor(T.m()/A.m())),I=Math.ceil(Math.log(k)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),F=l(k),O=F.j(A);m(O)||0<O.l(T);)k-=I,F=l(k),O=F.j(A);p(F)&&(F=d),R=R.add(F),T=y(T,O)}return new b(R,T)}e.A=function(T){return _(this,T).h},e.and=function(T){for(var A=Math.max(this.g.length,T.g.length),k=[],I=0;I<A;I++)k[I]=this.i(I)&T.i(I);return new o(k,this.h&T.h)},e.or=function(T){for(var A=Math.max(this.g.length,T.g.length),k=[],I=0;I<A;I++)k[I]=this.i(I)|T.i(I);return new o(k,this.h|T.h)},e.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),k=[],I=0;I<A;I++)k[I]=this.i(I)^T.i(I);return new o(k,this.h^T.h)};function w(T){for(var A=T.g.length+1,k=[],I=0;I<A;I++)k[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(k,T.h)}function S(T,A){var k=A>>5;A%=32;for(var I=T.g.length-k,R=[],F=0;F<I;F++)R[F]=0<A?T.i(F+k)>>>A|T.i(F+k+1)<<32-A:T.i(F+k);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zqe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Uw=o}).apply(typeof aSe<"u"?aSe:typeof self<"u"?self:typeof window<"u"?window:{});var S6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vqe,Hqe,KI,qqe,JF,HQ,Wqe,Gqe,Yqe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(D,z,K){return D==Array.prototype||D==Object.prototype||(D[z]=K.value),D};function n(D){D=[typeof globalThis=="object"&&globalThis,D,typeof window=="object"&&window,typeof self=="object"&&self,typeof S6=="object"&&S6];for(var z=0;z<D.length;++z){var K=D[z];if(K&&K.Math==Math)return K}throw Error("Cannot find global object")}var r=n(this);function i(D,z){if(z)e:{var K=r;D=D.split(".");for(var ie=0;ie<D.length-1;ie++){var Me=D[ie];if(!(Me in K))break e;K=K[Me]}D=D[D.length-1],ie=K[D],z=z(ie),z!=ie&&z!=null&&t(K,D,{configurable:!0,writable:!0,value:z})}}function s(D,z){D instanceof String&&(D+="");var K=0,ie=!1,Me={next:function(){if(!ie&&K<D.length){var Ge=K++;return{value:z(Ge,D[Ge]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return Me[Symbol.iterator]=function(){return Me},Me}i("Array.prototype.values",function(D){return D||function(){return s(this,function(z,K){return K})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(D){var z=typeof D;return z=z!="object"?z:D?Array.isArray(D)?"array":z:"null",z=="array"||z=="object"&&typeof D.length=="number"}function l(D){var z=typeof D;return z=="object"&&D!=null||z=="function"}function c(D,z,K){return D.call.apply(D.bind,arguments)}function f(D,z,K){if(!D)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var Me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Me,ie),D.apply(z,Me)}}return function(){return D.apply(z,arguments)}}function d(D,z,K){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(D,z){var K=Array.prototype.slice.call(arguments,1);return function(){var ie=K.slice();return ie.push.apply(ie,arguments),D.apply(this,ie)}}function p(D,z){function K(){}K.prototype=z.prototype,D.aa=z.prototype,D.prototype=new K,D.prototype.constructor=D,D.Qb=function(ie,Me,Ge){for(var Ft=Array(arguments.length-2),Si=2;Si<arguments.length;Si++)Ft[Si-2]=arguments[Si];return z.prototype[Me].apply(ie,Ft)}}function m(D){const z=D.length;if(0<z){const K=Array(z);for(let ie=0;ie<z;ie++)K[ie]=D[ie];return K}return[]}function g(D,z){for(let K=1;K<arguments.length;K++){const ie=arguments[K];if(u(ie)){const Me=D.length||0,Ge=ie.length||0;D.length=Me+Ge;for(let Ft=0;Ft<Ge;Ft++)D[Me+Ft]=ie[Ft]}else D.push(ie)}}class y{constructor(z,K){this.i=z,this.j=K,this.h=0,this.g=null}get(){let z;return 0<this.h?(this.h--,z=this.g,this.g=z.next,z.next=null):z=this.i(),z}}function v(D){return/^[\s\xa0]*$/.test(D)}function b(){var D=a.navigator;return D&&(D=D.userAgent)?D:""}function _(D){return _[" "](D),D}_[" "]=function(){};var w=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S(D,z,K){for(const ie in D)z.call(K,D[ie],ie,D)}function T(D,z){for(const K in D)z.call(void 0,D[K],K,D)}function A(D){const z={};for(const K in D)z[K]=D[K];return z}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(D,z){let K,ie;for(let Me=1;Me<arguments.length;Me++){ie=arguments[Me];for(K in ie)D[K]=ie[K];for(let Ge=0;Ge<k.length;Ge++)K=k[Ge],Object.prototype.hasOwnProperty.call(ie,K)&&(D[K]=ie[K])}}function R(D){var z=1;D=D.split(":");const K=[];for(;0<z&&D.length;)K.push(D.shift()),z--;return D.length&&K.push(D.join(":")),K}function F(D){a.setTimeout(()=>{throw D},0)}function O(){var D=J;let z=null;return D.g&&(z=D.g,D.g=D.g.next,D.g||(D.h=null),z.next=null),z}class ${constructor(){this.h=this.g=null}add(z,K){const ie=V.get();ie.set(z,K),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var V=new y(()=>new j,D=>D.reset());class j{constructor(){this.next=this.g=this.h=null}set(z,K){this.h=z,this.g=K,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Y=!1,J=new $,L=()=>{const D=a.Promise.resolve(void 0);G=()=>{D.then(U)}};var U=()=>{for(var D;D=O();){try{D.h.call(D.g)}catch(K){F(K)}var z=V;z.j(D),100>z.h&&(z.h++,D.next=z.g,z.g=D)}Y=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(D,z){this.type=D,this.g=this.target=z,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var D=!1,z=Object.defineProperty({},"passive",{get:function(){D=!0}});try{const K=()=>{};a.addEventListener("test",K,z),a.removeEventListener("test",K,z)}catch{}return D}();function Z(D,z){if(B.call(this,D?D.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,D){var K=this.type=D.type,ie=D.changedTouches&&D.changedTouches.length?D.changedTouches[0]:null;if(this.target=D.target||D.srcElement,this.g=z,z=D.relatedTarget){if(w){e:{try{_(z.nodeName);var Me=!0;break e}catch{}Me=!1}Me||(z=null)}}else K=="mouseover"?z=D.fromElement:K=="mouseout"&&(z=D.toElement);this.relatedTarget=z,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0),this.button=D.button,this.key=D.key||"",this.ctrlKey=D.ctrlKey,this.altKey=D.altKey,this.shiftKey=D.shiftKey,this.metaKey=D.metaKey,this.pointerId=D.pointerId||0,this.pointerType=typeof D.pointerType=="string"?D.pointerType:re[D.pointerType]||"",this.state=D.state,this.i=D,D.defaultPrevented&&Z.aa.h.call(this)}}p(Z,B);var re={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var D=this.i;D.preventDefault?D.preventDefault():D.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),pe=0;function Te(D,z,K,ie,Me){this.listener=D,this.proxy=null,this.src=z,this.type=K,this.capture=!!ie,this.ha=Me,this.key=++pe,this.da=this.fa=!1}function ke(D){D.da=!0,D.listener=null,D.proxy=null,D.src=null,D.ha=null}function it(D){this.src=D,this.g={},this.h=0}it.prototype.add=function(D,z,K,ie,Me){var Ge=D.toString();D=this.g[Ge],D||(D=this.g[Ge]=[],this.h++);var Ft=ut(D,z,ie,Me);return-1<Ft?(z=D[Ft],K||(z.fa=!1)):(z=new Te(z,this.src,Ge,!!ie,Me),z.fa=K,D.push(z)),z};function Re(D,z){var K=z.type;if(K in D.g){var ie=D.g[K],Me=Array.prototype.indexOf.call(ie,z,void 0),Ge;(Ge=0<=Me)&&Array.prototype.splice.call(ie,Me,1),Ge&&(ke(z),D.g[K].length==0&&(delete D.g[K],D.h--))}}function ut(D,z,K,ie){for(var Me=0;Me<D.length;++Me){var Ge=D[Me];if(!Ge.da&&Ge.listener==z&&Ge.capture==!!K&&Ge.ha==ie)return Me}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),Ct={};function gt(D,z,K,ie,Me){if(Array.isArray(z)){for(var Ge=0;Ge<z.length;Ge++)gt(D,z[Ge],K,ie,Me);return null}return K=we(K),D&&D[xe]?D.K(z,K,l(ie)?!!ie.capture:!1,Me):Ie(D,z,K,!1,ie,Me)}function Ie(D,z,K,ie,Me,Ge){if(!z)throw Error("Invalid event type");var Ft=l(Me)?!!Me.capture:!!Me,Si=X(D);if(Si||(D[Ke]=Si=new it(D)),K=Si.add(z,K,ie,Ft,Ge),K.proxy)return K;if(ie=Ve(),K.proxy=ie,ie.src=D,ie.listener=K,D.addEventListener)q||(Me=Ft),Me===void 0&&(Me=!1),D.addEventListener(z.toString(),ie,Me);else if(D.attachEvent)D.attachEvent(Mt(z.toString()),ie);else if(D.addListener&&D.removeListener)D.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return K}function Ve(){function D(K){return z.call(D.src,D.listener,K)}const z=st;return D}function ft(D,z,K,ie,Me){if(Array.isArray(z))for(var Ge=0;Ge<z.length;Ge++)ft(D,z[Ge],K,ie,Me);else ie=l(ie)?!!ie.capture:!!ie,K=we(K),D&&D[xe]?(D=D.i,z=String(z).toString(),z in D.g&&(Ge=D.g[z],K=ut(Ge,K,ie,Me),-1<K&&(ke(Ge[K]),Array.prototype.splice.call(Ge,K,1),Ge.length==0&&(delete D.g[z],D.h--)))):D&&(D=X(D))&&(z=D.g[z.toString()],D=-1,z&&(D=ut(z,K,ie,Me)),(K=-1<D?z[D]:null)&&_t(K))}function _t(D){if(typeof D!="number"&&D&&!D.da){var z=D.src;if(z&&z[xe])Re(z.i,D);else{var K=D.type,ie=D.proxy;z.removeEventListener?z.removeEventListener(K,ie,D.capture):z.detachEvent?z.detachEvent(Mt(K),ie):z.addListener&&z.removeListener&&z.removeListener(ie),(K=X(z))?(Re(K,D),K.h==0&&(K.src=null,z[Ke]=null)):ke(D)}}}function Mt(D){return D in Ct?Ct[D]:Ct[D]="on"+D}function st(D,z){if(D.da)D=!0;else{z=new Z(z,this);var K=D.listener,ie=D.ha||D.src;D.fa&&_t(D),D=K.call(ie,z)}return D}function X(D){return D=D[Ke],D instanceof it?D:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(D){return typeof D=="function"?D:(D[de]||(D[de]=function(z){return D.handleEvent(z)}),D[de])}function ae(){W.call(this),this.i=new it(this),this.M=this,this.F=null}p(ae,W),ae.prototype[xe]=!0,ae.prototype.removeEventListener=function(D,z,K,ie){ft(this,D,z,K,ie)};function he(D,z){var K,ie=D.F;if(ie)for(K=[];ie;ie=ie.F)K.push(ie);if(D=D.M,ie=z.type||z,typeof z=="string")z=new B(z,D);else if(z instanceof B)z.target=z.target||D;else{var Me=z;z=new B(ie,D),I(z,Me)}if(Me=!0,K)for(var Ge=K.length-1;0<=Ge;Ge--){var Ft=z.g=K[Ge];Me=Ee(Ft,ie,!0,z)&&Me}if(Ft=z.g=D,Me=Ee(Ft,ie,!0,z)&&Me,Me=Ee(Ft,ie,!1,z)&&Me,K)for(Ge=0;Ge<K.length;Ge++)Ft=z.g=K[Ge],Me=Ee(Ft,ie,!1,z)&&Me}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var D=this.i,z;for(z in D.g){for(var K=D.g[z],ie=0;ie<K.length;ie++)ke(K[ie]);delete D.g[z],D.h--}}this.F=null},ae.prototype.K=function(D,z,K,ie){return this.i.add(String(D),z,!1,K,ie)},ae.prototype.L=function(D,z,K,ie){return this.i.add(String(D),z,!0,K,ie)};function Ee(D,z,K,ie){if(z=D.i.g[String(z)],!z)return!0;z=z.concat();for(var Me=!0,Ge=0;Ge<z.length;++Ge){var Ft=z[Ge];if(Ft&&!Ft.da&&Ft.capture==K){var Si=Ft.listener,Qo=Ft.ha||Ft.src;Ft.fa&&Re(D.i,Ft),Me=Si.call(Qo,ie)!==!1&&Me}}return Me&&!ie.defaultPrevented}function $e(D,z,K){if(typeof D=="function")K&&(D=d(D,K));else if(D&&typeof D.handleEvent=="function")D=d(D.handleEvent,D);else throw Error("Invalid listener argument");return 2147483647<Number(z)?-1:a.setTimeout(D,z||0)}function Be(D){D.g=$e(()=>{D.g=null,D.i&&(D.i=!1,Be(D))},D.l);const z=D.h;D.h=null,D.m.apply(null,z)}class lt extends W{constructor(z,K){super(),this.m=z,this.l=K,this.h=null,this.i=!1,this.g=null}j(z){this.h=arguments,this.g?this.i=!0:Be(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Je(D){W.call(this),this.h=D,this.g={}}p(Je,W);var Xt=[];function fn(D){S(D.g,function(z,K){this.g.hasOwnProperty(K)&&_t(z)},D),D.g={}}Je.prototype.N=function(){Je.aa.N.call(this),fn(this)},Je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=a.JSON.stringify,an=a.JSON.parse,Sn=class{stringify(D){return a.JSON.stringify(D,void 0)}parse(D){return a.JSON.parse(D,void 0)}};function Mn(){}Mn.prototype.h=null;function ki(D){return D.h||(D.h=D.i())}function di(){}var Li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function As(){B.call(this,"d")}p(As,B);function Br(){B.call(this,"c")}p(Br,B);var ls={},ll=null;function Fo(){return ll=ll||new ae}ls.La="serverreachability";function qa(D){B.call(this,ls.La,D)}p(qa,B);function Nr(D){const z=Fo();he(z,new qa(z))}ls.STAT_EVENT="statevent";function Ri(D,z){B.call(this,ls.STAT_EVENT,D),this.stat=z}p(Ri,B);function hi(D){const z=Fo();he(z,new Ri(z,D))}ls.Ma="timingevent";function Vs(D,z){B.call(this,ls.Ma,D),this.size=z}p(Vs,B);function ri(D,z){if(typeof D!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){D()},z)}function Ni(){this.g=!0}Ni.prototype.xa=function(){this.g=!1};function ve(D,z,K,ie,Me,Ge){D.info(function(){if(D.g)if(Ge)for(var Ft="",Si=Ge.split("&"),Qo=0;Qo<Si.length;Qo++){var zr=Si[Qo].split("=");if(1<zr.length){var Oi=zr[0];zr=zr[1];var $o=Oi.split("_");Ft=2<=$o.length&&$o[1]=="type"?Ft+(Oi+"="+zr+"&"):Ft+(Oi+"=redacted&")}}else Ft=null;else Ft=Ge;return"XMLHTTP REQ ("+ie+") [attempt "+Me+"]: "+z+`
`+K+`
`+Ft})}function ce(D,z,K,ie,Me,Ge,Ft){D.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Me+"]: "+z+`
`+K+`
`+Ge+" "+Ft})}function _e(D,z,K,ie){D.info(function(){return"XMLHTTP TEXT ("+z+"): "+je(D,K)+(ie?" "+ie:"")})}function Ue(D,z){D.info(function(){return"TIMEOUT: "+z})}Ni.prototype.info=function(){};function je(D,z){if(!D.g)return z;if(!z)return null;try{var K=JSON.parse(z);if(K){for(D=0;D<K.length;D++)if(Array.isArray(K[D])){var ie=K[D];if(!(2>ie.length)){var Me=ie[1];if(Array.isArray(Me)&&!(1>Me.length)){var Ge=Me[0];if(Ge!="noop"&&Ge!="stop"&&Ge!="close")for(var Ft=1;Ft<Me.length;Ft++)Me[Ft]=""}}}}return Wt(K)}catch{return z}}var Dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xn;function rr(){}p(rr,Mn),rr.prototype.g=function(){return new XMLHttpRequest},rr.prototype.i=function(){return{}},xn=new rr;function mr(D,z,K,ie){this.j=D,this.i=z,this.l=K,this.R=ie||1,this.U=new Je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jn}function jn(){this.i=null,this.g="",this.h=!1}var Dr={},ii={};function dn(D,z,K){D.L=1,D.v=gr(vt(z)),D.m=K,D.P=!0,Ir(D,null)}function Ir(D,z){D.F=Date.now(),un(D),D.A=vt(D.v);var K=D.A,ie=D.R;Array.isArray(ie)||(ie=[String(ie)]),ex(K.i,"t",ie),D.C=0,K=D.j.J,D.h=new jn,D.g=QP(D.j,K?z:null,!D.m),0<D.O&&(D.M=new lt(d(D.Y,D,D.g),D.O)),z=D.U,K=D.g,ie=D.ca;var Me="readystatechange";Array.isArray(Me)||(Me&&(Xt[0]=Me.toString()),Me=Xt);for(var Ge=0;Ge<Me.length;Ge++){var Ft=gt(K,Me[Ge],ie||z.handleEvent,!1,z.h||z);if(!Ft)break;z.g[Ft.key]=Ft}z=D.H?A(D.H):{},D.m?(D.u||(D.u="POST"),z["Content-Type"]="application/x-www-form-urlencoded",D.g.ea(D.A,D.u,D.m,z)):(D.u="GET",D.g.ea(D.A,D.u,null,z)),Nr(),ve(D.i,D.u,D.A,D.l,D.R,D.m)}mr.prototype.ca=function(D){D=D.target;const z=this.M;z&&ji(D)==3?z.j():this.Y(D)},mr.prototype.Y=function(D){try{if(D==this.g)e:{const $o=ji(this.g);var z=this.g.Ba();const rd=this.g.Z();if(!(3>$o)&&($o!=3||this.g&&(this.h.h||this.g.oa()||Xo(this.g)))){this.J||$o!=4||z==7||(z==8||0>=rd?Nr(3):Nr(2)),Pi(this);var K=this.g.Z();this.X=K;t:if(Jr(this)){var ie=Xo(this.g);D="";var Me=ie.length,Ge=ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),Ds(this);var Ft="";break t}this.h.i=new a.TextDecoder}for(z=0;z<Me;z++)this.h.h=!0,D+=this.h.i.decode(ie[z],{stream:!(Ge&&z==Me-1)});ie.length=0,this.h.g+=D,this.C=0,Ft=this.h.g}else Ft=this.g.oa();if(this.o=K==200,ce(this.i,this.u,this.A,this.l,this.R,$o,K),this.o){if(this.T&&!this.K){t:{if(this.g){var Si,Qo=this.g;if((Si=Qo.g?Qo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Si)){var zr=Si;break t}}zr=null}if(K=zr)_e(this.i,this.l,K,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ns(this,K);else{this.o=!1,this.s=3,hi(12),_i(this),Ds(this);break e}}if(this.P){K=!0;let Zl;for(;!this.J&&this.C<Ft.length;)if(Zl=ir(this,Ft),Zl==ii){$o==4&&(this.s=4,hi(14),K=!1),_e(this.i,this.l,null,"[Incomplete Response]");break}else if(Zl==Dr){this.s=4,hi(15),_e(this.i,this.l,Ft,"[Invalid Chunk]"),K=!1;break}else _e(this.i,this.l,Zl,null),ns(this,Zl);if(Jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$o!=4||Ft.length!=0||this.h.h||(this.s=1,hi(16),K=!1),this.o=this.o&&K,!K)_e(this.i,this.l,Ft,"[Invalid Chunked Response]"),_i(this),Ds(this);else if(0<Ft.length&&!this.W){this.W=!0;var Oi=this.j;Oi.g==this&&Oi.ba&&!Oi.M&&(Oi.j.info("Great, no buffering proxy detected. Bytes received: "+Ft.length),nd(Oi),Oi.M=!0,hi(11))}}else _e(this.i,this.l,Ft,null),ns(this,Ft);$o==4&&_i(this),this.o&&!this.J&&($o==4?rs(this.j,this):(this.o=!1,un(this)))}else dh(this.g),K==400&&0<Ft.indexOf("Unknown SID")?(this.s=3,hi(12)):(this.s=0,hi(13)),_i(this),Ds(this)}}}catch{}finally{}};function Jr(D){return D.g?D.u=="GET"&&D.L!=2&&D.j.Ca:!1}function ir(D,z){var K=D.C,ie=z.indexOf(`
`,K);return ie==-1?ii:(K=Number(z.substring(K,ie)),isNaN(K)?Dr:(ie+=1,ie+K>z.length?ii:(z=z.slice(ie,ie+K),D.C=ie+K,z)))}mr.prototype.cancel=function(){this.J=!0,_i(this)};function un(D){D.S=Date.now()+D.I,jr(D,D.I)}function jr(D,z){if(D.B!=null)throw Error("WatchDog timer not null");D.B=ri(d(D.ba,D),z)}function Pi(D){D.B&&(a.clearTimeout(D.B),D.B=null)}mr.prototype.ba=function(){this.B=null;const D=Date.now();0<=D-this.S?(Ue(this.i,this.A),this.L!=2&&(Nr(),hi(17)),_i(this),this.s=2,Ds(this)):jr(this,this.S-D)};function Ds(D){D.j.G==0||D.J||rs(D.j,D)}function _i(D){Pi(D);var z=D.M;z&&typeof z.ma=="function"&&z.ma(),D.M=null,fn(D.U),D.g&&(z=D.g,D.g=null,z.abort(),z.ma())}function ns(D,z){try{var K=D.j;if(K.G!=0&&(K.g==D||td(K.h,D))){if(!D.K&&td(K.h,D)&&K.G==3){try{var ie=K.Da.g.parse(z)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Me=ie;if(Me[0]==0){e:if(!K.u){if(K.g)if(K.g.F+3e3<D.F)Gy(K),nx(K);else break e;CE(K),hi(18)}}else K.za=Me[1],0<K.za-K.T&&37500>Me[2]&&K.F&&K.v==0&&!K.C&&(K.C=ri(d(K.Za,K),6e3));if(1>=Jl(K.h)&&K.ca){try{K.ca()}catch{}K.ca=void 0}}else ph(K,11)}else if((D.K||K.g==D)&&Gy(K),!v(z))for(Me=K.Da.g.parse(z),z=0;z<Me.length;z++){let zr=Me[z];if(K.T=zr[0],zr=zr[1],K.G==2)if(zr[0]=="c"){K.K=zr[1],K.ia=zr[2];const Oi=zr[3];Oi!=null&&(K.la=Oi,K.j.info("VER="+K.la));const $o=zr[4];$o!=null&&(K.Aa=$o,K.j.info("SVER="+K.Aa));const rd=zr[5];rd!=null&&typeof rd=="number"&&0<rd&&(ie=1.5*rd,K.L=ie,K.j.info("backChannelRequestTimeoutMs_="+ie)),ie=K;const Zl=D.g;if(Zl){const ax=Zl.g?Zl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ax){var Ge=ie.h;Ge.g||ax.indexOf("spdy")==-1&&ax.indexOf("quic")==-1&&ax.indexOf("h2")==-1||(Ge.j=Ge.l,Ge.g=new Set,Ge.h&&(te(Ge,Ge.h),Ge.h=null))}if(ie.D){const qA=Zl.g?Zl.g.getResponseHeader("X-HTTP-Session-Id"):null;qA&&(ie.ya=qA,nn(ie.I,ie.D,qA))}}K.G=3,K.l&&K.l.ua(),K.ba&&(K.R=Date.now()-D.F,K.j.info("Handshake RTT: "+K.R+"ms")),ie=K;var Ft=D;if(ie.qa=TE(ie,ie.J?ie.ia:null,ie.W),Ft.K){be(ie.h,Ft);var Si=Ft,Qo=ie.L;Qo&&(Si.I=Qo),Si.B&&(Pi(Si),un(Si)),ie.g=Ft}else KP(ie);0<K.i.length&&rx(K)}else zr[0]!="stop"&&zr[0]!="close"||ph(K,7);else K.G==3&&(zr[0]=="stop"||zr[0]=="close"?zr[0]=="stop"?ph(K,7):P0(K):zr[0]!="noop"&&K.l&&K.l.ta(zr),K.v=0)}}Nr(4)}catch{}}var Yo=class{constructor(D,z){this.g=D,this.map=z}};function Wa(D){this.l=D||10,a.PerformanceNavigationTiming?(D=a.performance.getEntriesByType("navigation"),D=0<D.length&&(D[0].nextHopProtocol=="hq"||D[0].nextHopProtocol=="h2")):D=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=D?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mo(D){return D.h?!0:D.g?D.g.size>=D.j:!1}function Jl(D){return D.h?1:D.g?D.g.size:0}function td(D,z){return D.h?D.h==z:D.g?D.g.has(z):!1}function te(D,z){D.g?D.g.add(z):D.h=z}function be(D,z){D.h&&D.h==z?D.h=null:D.g&&D.g.has(z)&&D.g.delete(z)}Wa.prototype.cancel=function(){if(this.i=ue(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const D of this.g.values())D.cancel();this.g.clear()}};function ue(D){if(D.h!=null)return D.i.concat(D.h.D);if(D.g!=null&&D.g.size!==0){let z=D.i;for(const K of D.g.values())z=z.concat(K.D);return z}return m(D.i)}function De(D){if(D.V&&typeof D.V=="function")return D.V();if(typeof Map<"u"&&D instanceof Map||typeof Set<"u"&&D instanceof Set)return Array.from(D.values());if(typeof D=="string")return D.split("");if(u(D)){for(var z=[],K=D.length,ie=0;ie<K;ie++)z.push(D[ie]);return z}z=[],K=0;for(ie in D)z[K++]=D[ie];return z}function Pe(D){if(D.na&&typeof D.na=="function")return D.na();if(!D.V||typeof D.V!="function"){if(typeof Map<"u"&&D instanceof Map)return Array.from(D.keys());if(!(typeof Set<"u"&&D instanceof Set)){if(u(D)||typeof D=="string"){var z=[];D=D.length;for(var K=0;K<D;K++)z.push(K);return z}z=[],K=0;for(const ie in D)z[K++]=ie;return z}}}function Ae(D,z){if(D.forEach&&typeof D.forEach=="function")D.forEach(z,void 0);else if(u(D)||typeof D=="string")Array.prototype.forEach.call(D,z,void 0);else for(var K=Pe(D),ie=De(D),Me=ie.length,Ge=0;Ge<Me;Ge++)z.call(void 0,ie[Ge],K&&K[Ge],D)}var Xe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pt(D,z){if(D){D=D.split("&");for(var K=0;K<D.length;K++){var ie=D[K].indexOf("="),Me=null;if(0<=ie){var Ge=D[K].substring(0,ie);Me=D[K].substring(ie+1)}else Ge=D[K];z(Ge,Me?decodeURIComponent(Me.replace(/\+/g," ")):"")}}}function yt(D){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,D instanceof yt){this.h=D.h,It(this,D.j),this.o=D.o,this.g=D.g,zt(this,D.s),this.l=D.l;var z=D.i,K=new cl;K.i=z.i,z.g&&(K.g=new Map(z.g),K.h=z.h),Xn(this,K),this.m=D.m}else D&&(z=String(D).match(Xe))?(this.h=!1,It(this,z[1]||"",!0),this.o=si(z[2]||""),this.g=si(z[3]||"",!0),zt(this,z[4]),this.l=si(z[5]||"",!0),Xn(this,z[6]||"",!0),this.m=si(z[7]||"")):(this.h=!1,this.i=new cl(null,this.h))}yt.prototype.toString=function(){var D=[],z=this.j;z&&D.push(Pr(z,sf,!0),":");var K=this.g;return(K||z=="file")&&(D.push("//"),(z=this.o)&&D.push(Pr(z,sf,!0),"@"),D.push(encodeURIComponent(String(K)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),K=this.s,K!=null&&D.push(":",String(K))),(K=this.l)&&(this.g&&K.charAt(0)!="/"&&D.push("/"),D.push(Pr(K,K.charAt(0)=="/"?qy:uh,!0))),(K=this.i.toString())&&D.push("?",K),(K=this.m)&&D.push("#",Pr(K,Zb)),D.join("")};function vt(D){return new yt(D)}function It(D,z,K){D.j=K?si(z,!0):z,D.j&&(D.j=D.j.replace(/:$/,""))}function zt(D,z){if(z){if(z=Number(z),isNaN(z)||0>z)throw Error("Bad port number "+z);D.s=z}else D.s=null}function Xn(D,z,K){z instanceof cl?(D.i=z,tx(D.i,D.h)):(K||(z=Pr(z,Lp)),D.i=new cl(z,D.h))}function nn(D,z,K){D.i.set(z,K)}function gr(D){return nn(D,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),D}function si(D,z){return D?z?decodeURI(D.replace(/%25/g,"%2525")):decodeURIComponent(D):""}function Pr(D,z,K){return typeof D=="string"?(D=encodeURI(D).replace(z,Ko),K&&(D=D.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D):null}function Ko(D){return D=D.charCodeAt(0),"%"+(D>>4&15).toString(16)+(D&15).toString(16)}var sf=/[#\/\?@]/g,uh=/[#\?:]/g,qy=/[#\?]/g,Lp=/[#\?@]/g,Zb=/#/g;function cl(D,z){this.h=this.g=null,this.i=D||null,this.j=!!z}function bu(D){D.g||(D.g=new Map,D.h=0,D.i&&pt(D.i,function(z,K){D.add(decodeURIComponent(z.replace(/\+/g," ")),K)}))}e=cl.prototype,e.add=function(D,z){bu(this),this.i=null,D=ch(this,D);var K=this.g.get(D);return K||this.g.set(D,K=[]),K.push(z),this.h+=1,this};function lh(D,z){bu(D),z=ch(D,z),D.g.has(z)&&(D.i=null,D.h-=D.g.get(z).length,D.g.delete(z))}function Wy(D,z){return bu(D),z=ch(D,z),D.g.has(z)}e.forEach=function(D,z){bu(this),this.g.forEach(function(K,ie){K.forEach(function(Me){D.call(z,Me,ie,this)},this)},this)},e.na=function(){bu(this);const D=Array.from(this.g.values()),z=Array.from(this.g.keys()),K=[];for(let ie=0;ie<z.length;ie++){const Me=D[ie];for(let Ge=0;Ge<Me.length;Ge++)K.push(z[ie])}return K},e.V=function(D){bu(this);let z=[];if(typeof D=="string")Wy(this,D)&&(z=z.concat(this.g.get(ch(this,D))));else{D=Array.from(this.g.values());for(let K=0;K<D.length;K++)z=z.concat(D[K])}return z},e.set=function(D,z){return bu(this),this.i=null,D=ch(this,D),Wy(this,D)&&(this.h-=this.g.get(D).length),this.g.set(D,[z]),this.h+=1,this},e.get=function(D,z){return D?(D=this.V(D),0<D.length?String(D[0]):z):z};function ex(D,z,K){lh(D,z),0<K.length&&(D.i=null,D.g.set(ch(D,z),m(K)),D.h+=K.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const D=[],z=Array.from(this.g.keys());for(var K=0;K<z.length;K++){var ie=z[K];const Ge=encodeURIComponent(String(ie)),Ft=this.V(ie);for(ie=0;ie<Ft.length;ie++){var Me=Ge;Ft[ie]!==""&&(Me+="="+encodeURIComponent(String(Ft[ie]))),D.push(Me)}}return this.i=D.join("&")};function ch(D,z){return z=String(z),D.j&&(z=z.toLowerCase()),z}function tx(D,z){z&&!D.j&&(bu(D),D.i=null,D.g.forEach(function(K,ie){var Me=ie.toLowerCase();ie!=Me&&(lh(this,ie),ex(this,Me,K))},D)),D.j=z}function wE(D,z){const K=new Ni;if(a.Image){const ie=new Image;ie.onload=h(xa,K,"TestLoadImage: loaded",!0,z,ie),ie.onerror=h(xa,K,"TestLoadImage: error",!1,z,ie),ie.onabort=h(xa,K,"TestLoadImage: abort",!1,z,ie),ie.ontimeout=h(xa,K,"TestLoadImage: timeout",!1,z,ie),a.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=D}else z(!1)}function fh(D,z){const K=new Ni,ie=new AbortController,Me=setTimeout(()=>{ie.abort(),xa(K,"TestPingServer: timeout",!1,z)},1e4);fetch(D,{signal:ie.signal}).then(Ge=>{clearTimeout(Me),Ge.ok?xa(K,"TestPingServer: ok",!0,z):xa(K,"TestPingServer: server error",!1,z)}).catch(()=>{clearTimeout(Me),xa(K,"TestPingServer: error",!1,z)})}function xa(D,z,K,ie,Me){try{Me&&(Me.onload=null,Me.onerror=null,Me.onabort=null,Me.ontimeout=null),ie(K)}catch{}}function VA(){this.g=new Sn}function _E(D,z,K){const ie=K||"";try{Ae(D,function(Me,Ge){let Ft=Me;l(Me)&&(Ft=Wt(Me)),z.push(ie+Ge+"="+encodeURIComponent(Ft))})}catch(Me){throw z.push(ie+"type="+encodeURIComponent("_badmap")),Me}}function k0(D){this.l=D.Ub||null,this.j=D.eb||!1}p(k0,Mn),k0.prototype.g=function(){return new R0(this.l,this.j)},k0.prototype.i=function(D){return function(){return D}}({});function R0(D,z){ae.call(this),this.D=D,this.o=z,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(R0,ae),e=R0.prototype,e.open=function(D,z){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=D,this.A=z,this.readyState=1,Ur(this)},e.send=function(D){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const z={headers:this.u,method:this.B,credentials:this.m,cache:void 0};D&&(z.body=D),(this.D||a).fetch(new Request(this.A,z)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},e.Sa=function(D){if(this.g&&(this.l=D,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=D.headers,this.readyState=2,Ur(this)),this.g&&(this.readyState=3,Ur(this),this.g)))if(this.responseType==="arraybuffer")D.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in D){if(this.j=D.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;EE(this)}else D.text().then(this.Ra.bind(this),this.ga.bind(this))};function EE(D){D.j.read().then(D.Pa.bind(D)).catch(D.ga.bind(D))}e.Pa=function(D){if(this.g){if(this.o&&D.value)this.response.push(D.value);else if(!this.o){var z=D.value?D.value:new Uint8Array(0);(z=this.v.decode(z,{stream:!D.done}))&&(this.response=this.responseText+=z)}D.done?oi(this):Ur(this),this.readyState==3&&EE(this)}},e.Ra=function(D){this.g&&(this.response=this.responseText=D,oi(this))},e.Qa=function(D){this.g&&(this.response=D,oi(this))},e.ga=function(){this.g&&oi(this)};function oi(D){D.readyState=4,D.l=null,D.j=null,D.v=null,Ur(D)}e.setRequestHeader=function(D,z){this.u.append(D,z)},e.getResponseHeader=function(D){return this.h&&this.h.get(D.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const D=[],z=this.h.entries();for(var K=z.next();!K.done;)K=K.value,D.push(K[0]+": "+K[1]),K=z.next();return D.join(`\r
`)};function Ur(D){D.onreadystatechange&&D.onreadystatechange.call(D)}Object.defineProperty(R0.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(D){this.m=D?"include":"same-origin"}});function SE(D){let z="";return S(D,function(K,ie){z+=ie,z+=":",z+=K,z+=`\r
`}),z}function fe(D,z,K){e:{for(ie in K){var ie=!1;break e}ie=!0}ie||(K=SE(K),typeof D=="string"?K!=null&&encodeURIComponent(String(K)):nn(D,z,K))}function Se(D){ae.call(this),this.headers=new Map,this.o=D||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Se,ae);var He=/^https?$/i,Qt=["POST","PUT"];e=Se.prototype,e.Ha=function(D){this.J=D},e.ea=function(D,z,K,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+D);z=z?z.toUpperCase():"GET",this.D=D,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xn.g(),this.v=this.o?ki(this.o):ki(xn),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(z,String(D),!0),this.B=!1}catch(Ge){wr(this,Ge);return}if(D=K||"",K=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Me in ie)K.set(Me,ie[Me]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Ge of ie.keys())K.set(Ge,ie.get(Ge));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(K.keys()).find(Ge=>Ge.toLowerCase()=="content-type"),Me=a.FormData&&D instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Qt,z,void 0))||ie||Me||K.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ge,Ft]of K)this.g.setRequestHeader(Ge,Ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ei(this),this.u=!0,this.g.send(D),this.u=!1}catch(Ge){wr(this,Ge)}};function wr(D,z){D.h=!1,D.g&&(D.j=!0,D.g.abort(),D.j=!1),D.l=z,D.m=5,ai(D),wn(D)}function ai(D){D.A||(D.A=!0,he(D,"complete"),he(D,"error"))}e.abort=function(D){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=D||7,he(this,"complete"),he(this,"abort"),wn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wn(this,!0)),Se.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bi(this):this.bb())},e.bb=function(){Bi(this)};function Bi(D){if(D.h&&typeof o<"u"&&(!D.v[1]||ji(D)!=4||D.Z()!=2)){if(D.u&&ji(D)==4)$e(D.Ea,0,D);else if(he(D,"readystatechange"),ji(D)==4){D.h=!1;try{const Ft=D.Z();e:switch(Ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var z=!0;break e;default:z=!1}var K;if(!(K=z)){var ie;if(ie=Ft===0){var Me=String(D.D).match(Xe)[1]||null;!Me&&a.self&&a.self.location&&(Me=a.self.location.protocol.slice(0,-1)),ie=!He.test(Me?Me.toLowerCase():"")}K=ie}if(K)he(D,"complete"),he(D,"success");else{D.m=6;try{var Ge=2<ji(D)?D.g.statusText:""}catch{Ge=""}D.l=Ge+" ["+D.Z()+"]",ai(D)}}finally{wn(D)}}}}function wn(D,z){if(D.g){Ei(D);const K=D.g,ie=D.v[0]?()=>{}:null;D.g=null,D.v=null,z||he(D,"ready");try{K.onreadystatechange=ie}catch{}}}function Ei(D){D.I&&(a.clearTimeout(D.I),D.I=null)}e.isActive=function(){return!!this.g};function ji(D){return D.g?D.g.readyState:0}e.Z=function(){try{return 2<ji(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(D){if(this.g){var z=this.g.responseText;return D&&z.indexOf(D)==0&&(z=z.substring(D.length)),an(z)}};function Xo(D){try{if(!D.g)return null;if("response"in D.g)return D.g.response;switch(D.H){case"":case"text":return D.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in D.g)return D.g.mozResponseArrayBuffer}return null}catch{return null}}function dh(D){const z={};D=(D.g&&2<=ji(D)&&D.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<D.length;ie++){if(v(D[ie]))continue;var K=R(D[ie]);const Me=K[0];if(K=K[1],typeof K!="string")continue;K=K.trim();const Ge=z[Me]||[];z[Me]=Ge,Ge.push(K)}T(z,function(ie){return ie.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zs(D,z,K){return K&&K.internalChannelParams&&K.internalChannelParams[D]||z}function N0(D){this.Aa=0,this.i=[],this.j=new Ni,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zs("failFast",!1,D),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zs("baseRetryDelayMs",5e3,D),this.cb=Zs("retryDelaySeedMs",1e4,D),this.Wa=Zs("forwardChannelMaxRetries",2,D),this.wa=Zs("forwardChannelRequestTimeoutMs",2e4,D),this.pa=D&&D.xmlHttpFactory||void 0,this.Xa=D&&D.Tb||void 0,this.Ca=D&&D.useFetchStreams||!1,this.L=void 0,this.J=D&&D.supportsCrossDomainXhr||!1,this.K="",this.h=new Wa(D&&D.concurrentRequestLimit),this.Da=new VA,this.P=D&&D.fastHandshake||!1,this.O=D&&D.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=D&&D.Rb||!1,D&&D.xa&&this.j.xa(),D&&D.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&D&&D.detectBufferingProxy||!1,this.ja=void 0,D&&D.longPollingTimeout&&0<D.longPollingTimeout&&(this.ja=D.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=N0.prototype,e.la=8,e.G=1,e.connect=function(D,z,K,ie){hi(0),this.W=D,this.H=z||{},K&&ie!==void 0&&(this.H.OSID=K,this.H.OAID=ie),this.F=this.X,this.I=TE(this,null,this.W),rx(this)};function P0(D){if(HA(D),D.G==3){var z=D.U++,K=vt(D.I);if(nn(K,"SID",D.K),nn(K,"RID",z),nn(K,"TYPE","terminate"),ix(D,K),z=new mr(D,D.j,z),z.L=2,z.v=gr(vt(K)),K=!1,a.navigator&&a.navigator.sendBeacon)try{K=a.navigator.sendBeacon(z.v.toString(),"")}catch{}!K&&a.Image&&(new Image().src=z.v,K=!0),K||(z.g=QP(z.j,null),z.g.ea(z.v)),z.F=Date.now(),un(z)}XP(D)}function nx(D){D.g&&(nd(D),D.g.cancel(),D.g=null)}function HA(D){nx(D),D.u&&(a.clearTimeout(D.u),D.u=null),Gy(D),D.h.cancel(),D.s&&(typeof D.s=="number"&&a.clearTimeout(D.s),D.s=null)}function rx(D){if(!Mo(D.h)&&!D.s){D.s=!0;var z=D.Ga;G||L(),Y||(G(),Y=!0),J.add(z,D),D.B=0}}function YP(D,z){return Jl(D.h)>=D.h.j-(D.s?1:0)?!1:D.s?(D.i=z.D.concat(D.i),!0):D.G==1||D.G==2||D.B>=(D.Va?0:D.Wa)?!1:(D.s=ri(d(D.Ga,D,z),hh(D,D.B)),D.B++,!0)}e.Ga=function(D){if(this.s)if(this.s=null,this.G==1){if(!D){this.U=Math.floor(1e5*Math.random()),D=this.U++;const Me=new mr(this,this.j,D);let Ge=this.o;if(this.S&&(Ge?(Ge=A(Ge),I(Ge,this.S)):Ge=this.S),this.m!==null||this.O||(Me.H=Ge,Ge=null),this.P)e:{for(var z=0,K=0;K<this.i.length;K++){t:{var ie=this.i[K];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(z+=ie,4096<z){z=K;break e}if(z===4096||K===this.i.length-1){z=K+1;break e}}z=1e3}else z=1e3;z=fl(this,Me,z),K=vt(this.I),nn(K,"RID",D),nn(K,"CVER",22),this.D&&nn(K,"X-HTTP-Session-Id",this.D),ix(this,K),Ge&&(this.O?z="headers="+encodeURIComponent(String(SE(Ge)))+"&"+z:this.m&&fe(K,this.m,Ge)),te(this.h,Me),this.Ua&&nn(K,"TYPE","init"),this.P?(nn(K,"$req",z),nn(K,"SID","null"),Me.T=!0,dn(Me,K,null)):dn(Me,K,z),this.G=2}}else this.G==3&&(D?xu(this,D):this.i.length==0||Mo(this.h)||xu(this))};function xu(D,z){var K;z?K=z.l:K=D.U++;const ie=vt(D.I);nn(ie,"SID",D.K),nn(ie,"RID",K),nn(ie,"AID",D.T),ix(D,ie),D.m&&D.o&&fe(ie,D.m,D.o),K=new mr(D,D.j,K,D.B+1),D.m===null&&(K.H=D.o),z&&(D.i=z.D.concat(D.i)),z=fl(D,K,1e3),K.I=Math.round(.5*D.wa)+Math.round(.5*D.wa*Math.random()),te(D.h,K),dn(K,ie,z)}function ix(D,z){D.H&&S(D.H,function(K,ie){nn(z,ie,K)}),D.l&&Ae({},function(K,ie){nn(z,ie,K)})}function fl(D,z,K){K=Math.min(D.i.length,K);var ie=D.l?d(D.l.Na,D.l,D):null;e:{var Me=D.i;let Ge=-1;for(;;){const Ft=["count="+K];Ge==-1?0<K?(Ge=Me[0].g,Ft.push("ofs="+Ge)):Ge=0:Ft.push("ofs="+Ge);let Si=!0;for(let Qo=0;Qo<K;Qo++){let zr=Me[Qo].g;const Oi=Me[Qo].map;if(zr-=Ge,0>zr)Ge=Math.max(0,Me[Qo].g-100),Si=!1;else try{_E(Oi,Ft,"req"+zr+"_")}catch{ie&&ie(Oi)}}if(Si){ie=Ft.join("&");break e}}}return D=D.i.splice(0,K),z.D=D,ie}function KP(D){if(!D.g&&!D.u){D.Y=1;var z=D.Fa;G||L(),Y||(G(),Y=!0),J.add(z,D),D.v=0}}function CE(D){return D.g||D.u||3<=D.v?!1:(D.Y++,D.u=ri(d(D.Fa,D),hh(D,D.v)),D.v++,!0)}e.Fa=function(){if(this.u=null,sx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var D=2*this.R;this.j.info("BP detection timer enabled: "+D),this.A=ri(d(this.ab,this),D)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hi(10),nx(this),sx(this))};function nd(D){D.A!=null&&(a.clearTimeout(D.A),D.A=null)}function sx(D){D.g=new mr(D,D.j,"rpc",D.Y),D.m===null&&(D.g.H=D.o),D.g.O=0;var z=vt(D.qa);nn(z,"RID","rpc"),nn(z,"SID",D.K),nn(z,"AID",D.T),nn(z,"CI",D.F?"0":"1"),!D.F&&D.ja&&nn(z,"TO",D.ja),nn(z,"TYPE","xmlhttp"),ix(D,z),D.m&&D.o&&fe(z,D.m,D.o),D.L&&(D.g.I=D.L);var K=D.g;D=D.ia,K.L=1,K.v=gr(vt(z)),K.m=null,K.P=!0,Ir(K,D)}e.Za=function(){this.C!=null&&(this.C=null,nx(this),CE(this),hi(19))};function Gy(D){D.C!=null&&(a.clearTimeout(D.C),D.C=null)}function rs(D,z){var K=null;if(D.g==z){Gy(D),nd(D),D.g=null;var ie=2}else if(td(D.h,z))K=z.D,be(D.h,z),ie=1;else return;if(D.G!=0){if(z.o)if(ie==1){K=z.m?z.m.length:0,z=Date.now()-z.F;var Me=D.B;ie=Fo(),he(ie,new Vs(ie,K)),rx(D)}else KP(D);else if(Me=z.s,Me==3||Me==0&&0<z.X||!(ie==1&&YP(D,z)||ie==2&&CE(D)))switch(K&&0<K.length&&(z=D.h,z.i=z.i.concat(K)),Me){case 1:ph(D,5);break;case 4:ph(D,10);break;case 3:ph(D,6);break;default:ph(D,2)}}}function hh(D,z){let K=D.Ta+Math.floor(Math.random()*D.cb);return D.isActive()||(K*=2),K*z}function ph(D,z){if(D.j.info("Error code "+z),z==2){var K=d(D.fb,D),ie=D.Xa;const Me=!ie;ie=new yt(ie||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||It(ie,"https"),gr(ie),Me?wE(ie.toString(),K):fh(ie.toString(),K)}else hi(2);D.G=0,D.l&&D.l.sa(z),XP(D),HA(D)}e.fb=function(D){D?(this.j.info("Successfully pinged google.com"),hi(2)):(this.j.info("Failed to ping google.com"),hi(1))};function XP(D){if(D.G=0,D.ka=[],D.l){const z=ue(D.h);(z.length!=0||D.i.length!=0)&&(g(D.ka,z),g(D.ka,D.i),D.h.i.length=0,m(D.i),D.i.length=0),D.l.ra()}}function TE(D,z,K){var ie=K instanceof yt?vt(K):new yt(K);if(ie.g!="")z&&(ie.g=z+"."+ie.g),zt(ie,ie.s);else{var Me=a.location;ie=Me.protocol,z=z?z+"."+Me.hostname:Me.hostname,Me=+Me.port;var Ge=new yt(null);ie&&It(Ge,ie),z&&(Ge.g=z),Me&&zt(Ge,Me),K&&(Ge.l=K),ie=Ge}return K=D.D,z=D.ya,K&&z&&nn(ie,K,z),nn(ie,"VER",D.la),ix(D,ie),ie}function QP(D,z,K){if(z&&!D.J)throw Error("Can't create secondary domain capable XhrIo object.");return z=D.Ca&&!D.pa?new Se(new k0({eb:K})):new Se(D.pa),z.Ha(D.J),z}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function JP(){}e=JP.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function AE(){}AE.prototype.g=function(D,z){return new wu(D,z)};function wu(D,z){ae.call(this),this.g=new N0(z),this.l=D,this.h=z&&z.messageUrlParams||null,D=z&&z.messageHeaders||null,z&&z.clientProtocolHeaderRequired&&(D?D["X-Client-Protocol"]="webchannel":D={"X-Client-Protocol":"webchannel"}),this.g.o=D,D=z&&z.initMessageHeaders||null,z&&z.messageContentType&&(D?D["X-WebChannel-Content-Type"]=z.messageContentType:D={"X-WebChannel-Content-Type":z.messageContentType}),z&&z.va&&(D?D["X-WebChannel-Client-Profile"]=z.va:D={"X-WebChannel-Client-Profile":z.va}),this.g.S=D,(D=z&&z.Sb)&&!v(D)&&(this.g.m=D),this.v=z&&z.supportsCrossDomainXhr||!1,this.u=z&&z.sendRawJson||!1,(z=z&&z.httpSessionIdParam)&&!v(z)&&(this.g.D=z,D=this.h,D!==null&&z in D&&(D=this.h,z in D&&delete D[z])),this.j=new Yy(this)}p(wu,ae),wu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wu.prototype.close=function(){P0(this.g)},wu.prototype.o=function(D){var z=this.g;if(typeof D=="string"){var K={};K.__data__=D,D=K}else this.u&&(K={},K.__data__=Wt(D),D=K);z.i.push(new Yo(z.Ya++,D)),z.G==3&&rx(z)},wu.prototype.N=function(){this.g.l=null,delete this.j,P0(this.g),delete this.g,wu.aa.N.call(this)};function ox(D){As.call(this),D.__headers__&&(this.headers=D.__headers__,this.statusCode=D.__status__,delete D.__headers__,delete D.__status__);var z=D.__sm__;if(z){e:{for(const K in z){D=K;break e}D=void 0}(this.i=D)&&(D=this.i,z=z!==null&&D in z?z[D]:void 0),this.data=z}else this.data=D}p(ox,As);function O0(){Br.call(this),this.status=1}p(O0,Br);function Yy(D){this.g=D}p(Yy,JP),Yy.prototype.ua=function(){he(this.g,"a")},Yy.prototype.ta=function(D){he(this.g,new ox(D))},Yy.prototype.sa=function(D){he(this.g,new O0)},Yy.prototype.ra=function(){he(this.g,"b")},AE.prototype.createWebChannel=AE.prototype.g,wu.prototype.send=wu.prototype.o,wu.prototype.open=wu.prototype.m,wu.prototype.close=wu.prototype.close,Yqe=function(){return new AE},Gqe=function(){return Fo()},Wqe=ls,HQ={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dt.NO_ERROR=0,Dt.TIMEOUT=8,Dt.HTTP_ERROR=6,JF=Dt,Ht.COMPLETE="complete",qqe=Ht,di.EventType=Li,Li.OPEN="a",Li.CLOSE="b",Li.ERROR="c",Li.MESSAGE="d",ae.prototype.listen=ae.prototype.K,KI=di,Hqe=k0,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,Vqe=Se}).apply(typeof S6<"u"?S6:typeof self<"u"?self:typeof window<"u"?window:{});const uSe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}dc.UNAUTHENTICATED=new dc(null),dc.GOOGLE_CREDENTIALS=new dc("google-credentials-uid"),dc.FIRST_PARTY=new dc("first-party-uid"),dc.MOCK_USER=new dc("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BA="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new dj("@firebase/firestore");function rI(){return I_.logLevel}function tn(e,...t){if(I_.logLevel<=Wr.DEBUG){const n=t.map(Cce);I_.debug(`Firestore (${BA}): ${e}`,...n)}}function vy(e,...t){if(I_.logLevel<=Wr.ERROR){const n=t.map(Cce);I_.error(`Firestore (${BA}): ${e}`,...n)}}function L3(e,...t){if(I_.logLevel<=Wr.WARN){const n=t.map(Cce);I_.warn(`Firestore (${BA}): ${e}`,...n)}}function Cce(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(e="Unexpected state"){const t=`FIRESTORE (${BA}) INTERNAL ASSERTION FAILED: `+e;throw vy(t),new Error(t)}function ps(e,t){e||Wn()}function tr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vt extends I0{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iEn{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class sEn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(dc.UNAUTHENTICATED))}shutdown(){}}class oEn{constructor(t){this.t=t,this.currentUser=dc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new qg;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qg,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{tn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(tn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qg)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(tn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ps(typeof r.accessToken=="string"),new iEn(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ps(t===null||typeof t=="string"),new dc(t)}}class aEn{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=dc.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uEn{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new aEn(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(dc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lEn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cEn{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&tn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,tn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{tn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):tn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ps(typeof n.token=="string"),this.R=n.token,new lEn(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fEn(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kqe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=fEn(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Ti(e,t){return e<t?-1:e>t?1:0}function hT(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ha.fromMillis(Date.now())}static fromDate(t){return ha.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new ha(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ti(this.nanoseconds,t.nanoseconds):Ti(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t){this.timestamp=t}static fromTimestamp(t){return new er(t)}static min(){return new er(new ha(0,0))}static max(){return new er(new ha(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(t,n,r){n===void 0?n=0:n>t.length&&Wn(),r===void 0?r=t.length-n:r>t.length-n&&Wn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return B3.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof B3?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Ss extends B3{construct(t,n,r){return new Ss(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ss(n)}static emptyPath(){return new Ss([])}}const dEn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class iu extends B3{construct(t,n,r){return new iu(t,n,r)}static isValidIdentifier(t){return dEn.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),iu.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new iu(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Vt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Vt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Vt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new iu(n)}static emptyPath(){return new iu([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.path=t}static fromPath(t){return new En(Ss.fromString(t))}static fromName(t){return new En(Ss.fromString(t).popFirst(5))}static empty(){return new En(Ss.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ss.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ss.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new En(new Ss(t.slice()))}}function hEn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=er.fromTimestamp(r===1e9?new ha(n+1,0):new ha(n,r));return new fb(i,En.empty(),t)}function pEn(e){return new fb(e.readTime,e.key,-1)}class fb{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new fb(er.min(),En.empty(),-1)}static max(){return new fb(er.max(),En.empty(),-1)}}function mEn(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=En.comparator(e.documentKey,t.documentKey),n!==0?n:Ti(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gEn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yEn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(e){if(e.code!==ht.FAILED_PRECONDITION||e.message!==gEn)throw e;tn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Wn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Et((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Et?n:Et.resolve(n)}catch(n){return Et.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Et.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Et.reject(n)}static resolve(t){return new Et((n,r)=>{n(t)})}static reject(t){return new Et((n,r)=>{r(t)})}static waitFor(t){return new Et((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Et.resolve(!1);for(const r of t)n=n.next(i=>i?Et.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Et((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Et((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function vEn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function LP(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tce{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Tce.oe=-1;function bj(e){return e==null}function G$(e){return e===0&&1/e==-1/0}function bEn(e){return typeof e=="number"&&Number.isInteger(e)&&!G$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lSe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function yE(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xqe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t,n){this.comparator=t,this.root=n||nu.EMPTY}insert(t,n){return new Qs(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,nu.BLACK,null,null))}remove(t){return new Qs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,nu.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new C6(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new C6(this.root,t,this.comparator,!1)}getReverseIterator(){return new C6(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new C6(this.root,t,this.comparator,!0)}}class C6{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class nu{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??nu.RED,this.left=i??nu.EMPTY,this.right=s??nu.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new nu(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nu.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return nu.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,nu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,nu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Wn();const t=this.left.check();if(t!==this.right.check())throw Wn();return t+(this.isRed()?0:1)}}nu.EMPTY=null,nu.RED=!0,nu.BLACK=!1;nu.EMPTY=new class{constructor(){this.size=0}get key(){throw Wn()}get value(){throw Wn()}get color(){throw Wn()}get left(){throw Wn()}get right(){throw Wn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new nu(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t){this.comparator=t,this.data=new Qs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new cSe(this.data.getIterator())}getIteratorFrom(t){return new cSe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof du)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new du(this.comparator);return n.data=t,n}}class cSe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(t){this.fields=t,t.sort(iu.comparator)}static empty(){return new Df([])}unionWith(t){let n=new du(iu.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Df(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return hT(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qqe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Qqe("Invalid base64 string: "+s):s}}(t);return new sl(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new sl(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ti(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}sl.EMPTY_BYTE_STRING=new sl("");const xEn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function db(e){if(ps(!!e),typeof e=="string"){let t=0;const n=xEn.exec(e);if(ps(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:zo(e.seconds),nanos:zo(e.nanos)}}function zo(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function k_(e){return typeof e=="string"?sl.fromBase64String(e):sl.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ace(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Dce(e){const t=e.mapValue.fields.__previous_value__;return Ace(t)?Dce(t):t}function j3(e){const t=db(e.mapValue.fields.__local_write_time__.timestampValue);return new ha(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wEn{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class U3{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new U3("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof U3&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function R_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ace(e)?4:_En(e)?9007199254740991:10:Wn()}function u0(e,t){if(e===t)return!0;const n=R_(e);if(n!==R_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return j3(e).isEqual(j3(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=db(i.timestampValue),a=db(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return k_(i.bytesValue).isEqual(k_(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return zo(i.geoPointValue.latitude)===zo(s.geoPointValue.latitude)&&zo(i.geoPointValue.longitude)===zo(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return zo(i.integerValue)===zo(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=zo(i.doubleValue),a=zo(s.doubleValue);return o===a?G$(o)===G$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return hT(e.arrayValue.values||[],t.arrayValue.values||[],u0);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(lSe(o)!==lSe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!u0(o[u],a[u])))return!1;return!0}(e,t);default:return Wn()}}function z3(e,t){return(e.values||[]).find(n=>u0(n,t))!==void 0}function pT(e,t){if(e===t)return 0;const n=R_(e),r=R_(t);if(n!==r)return Ti(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ti(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=zo(s.integerValue||s.doubleValue),u=zo(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return fSe(e.timestampValue,t.timestampValue);case 4:return fSe(j3(e),j3(t));case 5:return Ti(e.stringValue,t.stringValue);case 6:return function(s,o){const a=k_(s),u=k_(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Ti(a[l],u[l]);if(c!==0)return c}return Ti(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Ti(zo(s.latitude),zo(o.latitude));return a!==0?a:Ti(zo(s.longitude),zo(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=pT(a[l],u[l]);if(c)return c}return Ti(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===T6.mapValue&&o===T6.mapValue)return 0;if(s===T6.mapValue)return 1;if(o===T6.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Ti(u[f],c[f]);if(d!==0)return d;const h=pT(a[u[f]],l[c[f]]);if(h!==0)return h}return Ti(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Wn()}}function fSe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ti(e,t);const n=db(e),r=db(t),i=Ti(n.seconds,r.seconds);return i!==0?i:Ti(n.nanos,r.nanos)}function mT(e){return qQ(e)}function qQ(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=db(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return k_(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return En.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=qQ(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${qQ(n.fields[o])}`;return i+"}"}(e.mapValue):Wn()}function dSe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function WQ(e){return!!e&&"integerValue"in e}function Ice(e){return!!e&&"arrayValue"in e}function hSe(e){return!!e&&"nullValue"in e}function pSe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ZF(e){return!!e&&"mapValue"in e}function Xk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return yE(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Xk(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Xk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function _En(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t){this.value=t}static empty(){return new Ec({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!ZF(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Xk(n)}setAll(t){let n=iu.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Xk(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());ZF(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return u0(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];ZF(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){yE(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Ec(Xk(this.value))}}function Jqe(e){const t=[];return yE(e.fields,(n,r)=>{const i=new iu([n]);if(ZF(r)){const s=Jqe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Df(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Uu(t,0,er.min(),er.min(),er.min(),Ec.empty(),0)}static newFoundDocument(t,n,r,i){return new Uu(t,1,n,er.min(),r,i,0)}static newNoDocument(t,n){return new Uu(t,2,n,er.min(),er.min(),Ec.empty(),0)}static newUnknownDocument(t,n){return new Uu(t,3,n,er.min(),er.min(),Ec.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(er.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ec.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ec.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=er.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Uu&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Uu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(t,n){this.position=t,this.inclusive=n}}function mSe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=En.comparator(En.fromName(o.referenceValue),n.key):r=pT(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function gSe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!u0(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(t,n="asc"){this.field=t,this.dir=n}}function EEn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zqe{}class Ho extends Zqe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new CEn(t,n,r):n==="array-contains"?new DEn(t,r):n==="in"?new IEn(t,r):n==="not-in"?new kEn(t,r):n==="array-contains-any"?new REn(t,r):new Ho(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new TEn(t,r):new AEn(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(pT(n,this.value)):n!==null&&R_(this.value)===R_(n)&&this.matchesComparison(pT(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Wn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _p extends Zqe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new _p(t,n)}matches(t){return eWe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function eWe(e){return e.op==="and"}function tWe(e){return SEn(e)&&eWe(e)}function SEn(e){for(const t of e.filters)if(t instanceof _p)return!1;return!0}function GQ(e){if(e instanceof Ho)return e.field.canonicalString()+e.op.toString()+mT(e.value);if(tWe(e))return e.filters.map(t=>GQ(t)).join(",");{const t=e.filters.map(n=>GQ(n)).join(",");return`${e.op}(${t})`}}function nWe(e,t){return e instanceof Ho?function(r,i){return i instanceof Ho&&r.op===i.op&&r.field.isEqual(i.field)&&u0(r.value,i.value)}(e,t):e instanceof _p?function(r,i){return i instanceof _p&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&nWe(o,i.filters[a]),!0):!1}(e,t):void Wn()}function rWe(e){return e instanceof Ho?function(n){return`${n.field.canonicalString()} ${n.op} ${mT(n.value)}`}(e):e instanceof _p?function(n){return n.op.toString()+" {"+n.getFilters().map(rWe).join(" ,")+"}"}(e):"Filter"}class CEn extends Ho{constructor(t,n,r){super(t,n,r),this.key=En.fromName(r.referenceValue)}matches(t){const n=En.comparator(t.key,this.key);return this.matchesComparison(n)}}class TEn extends Ho{constructor(t,n){super(t,"in",n),this.keys=iWe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class AEn extends Ho{constructor(t,n){super(t,"not-in",n),this.keys=iWe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function iWe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>En.fromName(r.referenceValue))}class DEn extends Ho{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Ice(n)&&z3(n.arrayValue,this.value)}}class IEn extends Ho{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&z3(this.value.arrayValue,n)}}class kEn extends Ho{constructor(t,n){super(t,"not-in",n)}matches(t){if(z3(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!z3(this.value.arrayValue,n)}}class REn extends Ho{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Ice(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>z3(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NEn{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function ySe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new NEn(e,t,n,r,i,s,o)}function kce(e){const t=tr(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>GQ(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bj(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>mT(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>mT(r)).join(",")),t.ue=n}return t.ue}function Rce(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!EEn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!nWe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gSe(e.startAt,t.startAt)&&gSe(e.endAt,t.endAt)}function YQ(e){return En.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function PEn(e,t,n,r,i,s,o,a){return new jA(e,t,n,r,i,s,o,a)}function Nce(e){return new jA(e)}function vSe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function sWe(e){return e.collectionGroup!==null}function Qk(e){const t=tr(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new du(iu.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new V3(s,r))}),n.has(iu.keyField().canonicalString())||t.ce.push(new V3(iu.keyField(),r))}return t.ce}function jm(e){const t=tr(e);return t.le||(t.le=OEn(t,Qk(e))),t.le}function OEn(e,t){if(e.limitType==="F")return ySe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new V3(i.field,s)});const n=e.endAt?new Y$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Y$(e.startAt.position,e.startAt.inclusive):null;return ySe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function KQ(e,t){const n=e.filters.concat([t]);return new jA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function XQ(e,t,n){return new jA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xj(e,t){return Rce(jm(e),jm(t))&&e.limitType===t.limitType}function oWe(e){return`${kce(jm(e))}|lt:${e.limitType}`}function R2(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>rWe(i)).join(", ")}]`),bj(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>mT(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>mT(i)).join(",")),`Target(${r})`}(jm(e))}; limitType=${e.limitType})`}function wj(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):En.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of Qk(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=mSe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Qk(r),i)||r.endAt&&!function(o,a,u){const l=mSe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Qk(r),i))}(e,t)}function FEn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function aWe(e){return(t,n)=>{let r=!1;for(const i of Qk(e)){const s=MEn(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function MEn(e,t,n){const r=e.field.isKeyField()?En.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?pT(u,l):Wn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){yE(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return Xqe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $En=new Qs(En.comparator);function by(){return $En}const uWe=new Qs(En.comparator);function XI(...e){let t=uWe;for(const n of e)t=t.insert(n.key,n);return t}function lWe(e){let t=uWe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Tw(){return Jk()}function cWe(){return Jk()}function Jk(){return new UA(e=>e.toString(),(e,t)=>e.isEqual(t))}const LEn=new Qs(En.comparator),BEn=new du(En.comparator);function Fr(...e){let t=BEn;for(const n of e)t=t.add(n);return t}const jEn=new du(Ti);function UEn(){return jEn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fWe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:G$(t)?"-0":t}}function dWe(e){return{integerValue:""+e}}function zEn(e,t){return bEn(t)?dWe(t):fWe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(){this._=void 0}}function VEn(e,t,n){return e instanceof H3?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ace(s)&&(s=Dce(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof q3?pWe(e,t):e instanceof W3?mWe(e,t):function(i,s){const o=hWe(i,s),a=bSe(o)+bSe(i.Pe);return WQ(o)&&WQ(i.Pe)?dWe(a):fWe(i.serializer,a)}(e,t)}function HEn(e,t,n){return e instanceof q3?pWe(e,t):e instanceof W3?mWe(e,t):n}function hWe(e,t){return e instanceof K$?function(r){return WQ(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class H3 extends _j{}class q3 extends _j{constructor(t){super(),this.elements=t}}function pWe(e,t){const n=gWe(t);for(const r of e.elements)n.some(i=>u0(i,r))||n.push(r);return{arrayValue:{values:n}}}class W3 extends _j{constructor(t){super(),this.elements=t}}function mWe(e,t){let n=gWe(t);for(const r of e.elements)n=n.filter(i=>!u0(i,r));return{arrayValue:{values:n}}}class K$ extends _j{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function bSe(e){return zo(e.integerValue||e.doubleValue)}function gWe(e){return Ice(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qEn{constructor(t,n){this.field=t,this.transform=n}}function WEn(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof q3&&i instanceof q3||r instanceof W3&&i instanceof W3?hT(r.elements,i.elements,u0):r instanceof K$&&i instanceof K$?u0(r.Pe,i.Pe):r instanceof H3&&i instanceof H3}(e.transform,t.transform)}class GEn{constructor(t,n){this.version=t,this.transformResults=n}}class Ff{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ff}static exists(t){return new Ff(void 0,t)}static updateTime(t){return new Ff(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function eM(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ej{}function yWe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Pce(e.key,Ff.none()):new BP(e.key,e.data,Ff.none());{const n=e.data,r=Ec.empty();let i=new du(iu.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Jb(e.key,r,new Df(i.toArray()),Ff.none())}}function YEn(e,t,n){e instanceof BP?function(i,s,o){const a=i.value.clone(),u=wSe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Jb?function(i,s,o){if(!eM(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=wSe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(vWe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Zk(e,t,n,r){return e instanceof BP?function(s,o,a,u){if(!eM(s.precondition,o))return a;const l=s.value.clone(),c=_Se(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Jb?function(s,o,a,u){if(!eM(s.precondition,o))return a;const l=_Se(s.fieldTransforms,u,o),c=o.data;return c.setAll(vWe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return eM(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function KEn(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=hWe(r.transform,i||null);s!=null&&(n===null&&(n=Ec.empty()),n.set(r.field,s))}return n||null}function xSe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hT(r,i,(s,o)=>WEn(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class BP extends Ej{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Jb extends Ej{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vWe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function wSe(e,t,n){const r=new Map;ps(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,HEn(o,a,n[i]))}return r}function _Se(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,VEn(s,o,t))}return r}class Pce extends Ej{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XEn extends Ej{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QEn{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&YEn(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Zk(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Zk(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=cWe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=yWe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(er.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Fr())}isEqual(t){return this.batchId===t.batchId&&hT(this.mutations,t.mutations,(n,r)=>xSe(n,r))&&hT(this.baseMutations,t.baseMutations,(n,r)=>xSe(n,r))}}class Oce{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ps(t.mutations.length===r.length);let i=function(){return LEn}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Oce(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JEn{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZEn{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lo,Zr;function e2n(e){switch(e){default:return Wn();case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0}}function bWe(e){if(e===void 0)return vy("GRPC error has no .code"),ht.UNKNOWN;switch(e){case Lo.OK:return ht.OK;case Lo.CANCELLED:return ht.CANCELLED;case Lo.UNKNOWN:return ht.UNKNOWN;case Lo.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case Lo.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case Lo.INTERNAL:return ht.INTERNAL;case Lo.UNAVAILABLE:return ht.UNAVAILABLE;case Lo.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case Lo.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case Lo.NOT_FOUND:return ht.NOT_FOUND;case Lo.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case Lo.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case Lo.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case Lo.ABORTED:return ht.ABORTED;case Lo.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case Lo.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case Lo.DATA_LOSS:return ht.DATA_LOSS;default:return Wn()}}(Zr=Lo||(Lo={}))[Zr.OK=0]="OK",Zr[Zr.CANCELLED=1]="CANCELLED",Zr[Zr.UNKNOWN=2]="UNKNOWN",Zr[Zr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zr[Zr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zr[Zr.NOT_FOUND=5]="NOT_FOUND",Zr[Zr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zr[Zr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zr[Zr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zr[Zr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zr[Zr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zr[Zr.ABORTED=10]="ABORTED",Zr[Zr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zr[Zr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zr[Zr.INTERNAL=13]="INTERNAL",Zr[Zr.UNAVAILABLE=14]="UNAVAILABLE",Zr[Zr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2n(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2n=new Uw([4294967295,4294967295],0);function ESe(e){const t=t2n().encode(e),n=new zqe;return n.update(t),new Uint8Array(n.digest())}function SSe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Uw([n,r],0),new Uw([i,s],0)]}class Fce{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new QI(`Invalid padding: ${n}`);if(r<0)throw new QI(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new QI(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new QI(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Uw.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(Uw.fromNumber(r)));return i.compare(n2n)===1&&(i=new Uw([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=ESe(t),[r,i]=SSe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Fce(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=ESe(t),[r,i]=SSe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class QI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,jP.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Sj(er.min(),i,new Qs(Ti),by(),Fr())}}class jP{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new jP(r,n,Fr(),Fr(),Fr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class xWe{constructor(t,n){this.targetId=t,this.me=n}}class wWe{constructor(t,n,r=sl.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class CSe{constructor(){this.fe=0,this.ge=ASe(),this.pe=sl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Fr(),n=Fr(),r=Fr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Wn()}}),new jP(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=ASe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ps(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class r2n{constructor(t){this.Le=t,this.Be=new Map,this.ke=by(),this.qe=TSe(),this.Qe=new Qs(Ti)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Wn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(YQ(s))if(r===0){const o=new En(s.path);this.Ue(n,o,Uu.newNoDocument(o,er.min()))}else ps(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=k_(r).toUint8Array()}catch(u){if(u instanceof Qqe)return L3("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Fce(o,i,s)}catch(u){return L3(u instanceof QI?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&YQ(a.target)){const u=new En(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Uu.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Fr();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new Sj(t,n,this.Qe,this.ke,r);return this.ke=by(),this.qe=TSe(),this.Qe=new Qs(Ti),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new CSe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new du(Ti),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||tn("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new CSe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function TSe(){return new Qs(En.comparator)}function ASe(){return new Qs(En.comparator)}const i2n={asc:"ASCENDING",desc:"DESCENDING"},s2n={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o2n={and:"AND",or:"OR"};class a2n{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function QQ(e,t){return e.useProto3Json||bj(t)?t:{value:t}}function X$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _We(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function u2n(e,t){return X$(e,t.toTimestamp())}function Um(e){return ps(!!e),er.fromTimestamp(function(n){const r=db(n);return new ha(r.seconds,r.nanos)}(e))}function Mce(e,t){return JQ(e,t).canonicalString()}function JQ(e,t){const n=function(i){return new Ss(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function EWe(e){const t=Ss.fromString(e);return ps(DWe(t)),t}function ZQ(e,t){return Mce(e.databaseId,t.path)}function tW(e,t){const n=EWe(t);if(n.get(1)!==e.databaseId.projectId)throw new Vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new En(CWe(n))}function SWe(e,t){return Mce(e.databaseId,t)}function l2n(e){const t=EWe(e);return t.length===4?Ss.emptyPath():CWe(t)}function eJ(e){return new Ss(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function CWe(e){return ps(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function DSe(e,t,n){return{name:ZQ(e,t),fields:n.value.mapValue.fields}}function c2n(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Wn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ps(c===void 0||typeof c=="string"),sl.fromBase64String(c||"")):(ps(c===void 0||c instanceof Buffer||c instanceof Uint8Array),sl.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?ht.UNKNOWN:bWe(l.code);return new Vt(c,l.message||"")}(o);n=new wWe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=tW(e,r.document.name),s=Um(r.document.updateTime),o=r.document.createTime?Um(r.document.createTime):er.min(),a=new Ec({mapValue:{fields:r.document.fields}}),u=Uu.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new tM(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=tW(e,r.document),s=r.readTime?Um(r.readTime):er.min(),o=Uu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new tM([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=tW(e,r.document),s=r.removedTargetIds||[];n=new tM([],s,i,null)}else{if(!("filter"in t))return Wn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new ZEn(i,s),a=r.targetId;n=new xWe(a,o)}}return n}function f2n(e,t){let n;if(t instanceof BP)n={update:DSe(e,t.key,t.value)};else if(t instanceof Pce)n={delete:ZQ(e,t.key)};else if(t instanceof Jb)n={update:DSe(e,t.key,t.data),updateMask:x2n(t.fieldMask)};else{if(!(t instanceof XEn))return Wn();n={verify:ZQ(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof H3)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof q3)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof W3)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof K$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Wn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:u2n(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Wn()}(e,t.precondition)),n}function d2n(e,t){return e&&e.length>0?(ps(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Um(i.updateTime):Um(s);return o.isEqual(er.min())&&(o=Um(s)),new GEn(o,i.transformResults||[])}(n,t))):[]}function h2n(e,t){return{documents:[SWe(e,t.path)]}}function p2n(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SWe(e,i);const s=function(l){if(l.length!==0)return AWe(_p.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:N2(d.field),direction:y2n(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=QQ(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function m2n(e){let t=l2n(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ps(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=TWe(f);return d instanceof _p&&tWe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new V3(P2(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,bj(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new Y$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new Y$(h,d)}(n.endAt)),PEn(t,i,o,s,a,"F",u,l)}function g2n(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function TWe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=P2(n.unaryFilter.field);return Ho.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=P2(n.unaryFilter.field);return Ho.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=P2(n.unaryFilter.field);return Ho.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=P2(n.unaryFilter.field);return Ho.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Wn()}}(e):e.fieldFilter!==void 0?function(n){return Ho.create(P2(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return _p.create(n.compositeFilter.filters.map(r=>TWe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Wn()}}(n.compositeFilter.op))}(e):Wn()}function y2n(e){return i2n[e]}function v2n(e){return s2n[e]}function b2n(e){return o2n[e]}function N2(e){return{fieldPath:e.canonicalString()}}function P2(e){return iu.fromServerFormat(e.fieldPath)}function AWe(e){return e instanceof Ho?function(n){if(n.op==="=="){if(pSe(n.value))return{unaryFilter:{field:N2(n.field),op:"IS_NAN"}};if(hSe(n.value))return{unaryFilter:{field:N2(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pSe(n.value))return{unaryFilter:{field:N2(n.field),op:"IS_NOT_NAN"}};if(hSe(n.value))return{unaryFilter:{field:N2(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:N2(n.field),op:v2n(n.op),value:n.value}}}(e):e instanceof _p?function(n){const r=n.getFilters().map(i=>AWe(i));return r.length===1?r[0]:{compositeFilter:{op:b2n(n.op),filters:r}}}(e):Wn()}function x2n(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function DWe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(t,n,r,i,s=er.min(),o=er.min(),a=sl.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new ev(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ev(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ev(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ev(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2n{constructor(t){this.ct=t}}function _2n(e){const t=m2n({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?XQ(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2n{constructor(){this._n=new S2n}addToCollectionParentIndex(t,n){return this._n.add(n),Et.resolve()}getCollectionParents(t,n){return Et.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Et.resolve()}deleteFieldIndex(t,n){return Et.resolve()}deleteAllFieldIndexes(t){return Et.resolve()}createTargetIndexes(t,n){return Et.resolve()}getDocumentsMatchingTarget(t,n){return Et.resolve(null)}getIndexType(t,n){return Et.resolve(0)}getFieldIndexes(t,n){return Et.resolve([])}getNextCollectionGroupToUpdate(t){return Et.resolve(null)}getMinOffset(t,n){return Et.resolve(fb.min())}getMinOffsetFromCollectionGroup(t,n){return Et.resolve(fb.min())}updateCollectionGroup(t,n,r){return Et.resolve()}updateIndexEntries(t,n){return Et.resolve()}}class S2n{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new du(Ss.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new du(Ss.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new gT(0)}static Ln(){return new gT(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2n{constructor(){this.changes=new UA(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Uu.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Et.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2n{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2n{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&Zk(r.mutation,i,Df.empty(),ha.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Fr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Fr()){const i=Tw();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=XI();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Tw();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Fr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=by();const o=Jk(),a=function(){return Jk()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Jb)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),Zk(c.mutation,l,c.mutation.getFieldMask(),ha.now())):o.set(l.key,Df.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new T2n(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Jk();let i=new Qs((o,a)=>o-a),s=Fr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Df.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Fr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=cWe();c.forEach(d=>{if(!s.has(d)){const h=yWe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Et.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return En.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):sWe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Et.resolve(Tw());let a=-1,u=s;return o.next(l=>Et.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Et.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Fr())).next(c=>({batchId:a,changes:lWe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new En(n)).next(r=>{let i=XI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=XI();return this.indexManager.getCollectionParents(t,s).next(a=>Et.forEach(a,u=>{const l=function(f,d){return new jA(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Uu.newInvalidDocument(c)))});let a=XI();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&Zk(c.mutation,l,Df.empty(),ha.now()),wj(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2n{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Et.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Um(i.createTime)}}(n)),Et.resolve()}getNamedQuery(t,n){return Et.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:_2n(i.bundledQuery),readTime:Um(i.readTime)}}(n)),Et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2n{constructor(){this.overlays=new Qs(En.comparator),this.hr=new Map}getOverlay(t,n){return Et.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Tw();return Et.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Et.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Et.resolve()}getOverlaysForCollection(t,n,r){const i=Tw(),s=n.length+1,o=new En(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Et.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Qs((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Tw(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Tw(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Et.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new JEn(n,r));let s=this.hr.get(n);s===void 0&&(s=Fr(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ce{constructor(){this.Pr=new du(Ta.Ir),this.Tr=new du(Ta.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ta(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ta(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new En(new Ss([])),r=new Ta(n,t),i=new Ta(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new En(new Ss([])),r=new Ta(n,t),i=new Ta(n,t+1);let s=Fr();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ta(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ta{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return En.comparator(t.key,n.key)||Ti(t.pr,n.pr)}static Er(t,n){return Ti(t.pr,n.pr)||En.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2n{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new du(Ta.Ir)}checkEmpty(t){return Et.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new QEn(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ta(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Et.resolve(o)}lookupMutationBatch(t,n){return Et.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Et.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Et.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ta(n,0),i=new Ta(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Et.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new du(Ti);return n.forEach(i=>{const s=new Ta(i,0),o=new Ta(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Et.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;En.isDocumentKey(s)||(s=s.child(""));const o=new Ta(new En(s),0);let a=new du(Ti);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Et.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ps(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Et.forEach(n.mutations,i=>{const s=new Ta(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ta(n,0),i=this.wr.firstAfterOrEqual(r);return Et.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Et.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2n{constructor(t){this.vr=t,this.docs=function(){return new Qs(En.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Et.resolve(r?r.document.mutableCopy():Uu.newInvalidDocument(n))}getEntries(t,n){let r=by();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Uu.newInvalidDocument(i))}),Et.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=by();const o=n.path,a=new En(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||mEn(pEn(c),r)<=0||(i.has(c.key)||wj(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Et.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Wn()}Fr(t,n){return Et.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new N2n(this)}getSize(t){return Et.resolve(this.size)}}class N2n extends C2n{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Et.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2n{constructor(t){this.persistence=t,this.Mr=new UA(n=>kce(n),Rce),this.lastRemoteSnapshotVersion=er.min(),this.highestTargetId=0,this.Or=0,this.Nr=new $ce,this.targetCount=0,this.Lr=gT.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Et.resolve()}getLastRemoteSnapshotVersion(t){return Et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Et.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Et.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Et.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new gT(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Et.resolve()}updateTargetData(t,n){return this.qn(n),Et.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Et.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Et.waitFor(s).next(()=>i)}getTargetCount(t){return Et.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Et.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Et.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Et.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Et.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Et.resolve(r)}containsKey(t,n){return Et.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2n{constructor(t,n){this.Br={},this.overlays={},this.kr=new Tce(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new P2n(this),this.indexManager=new E2n,this.remoteDocumentCache=function(i){return new R2n(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new w2n(n),this.$r=new D2n(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new I2n,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new k2n(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){tn("MemoryPersistence","Starting transaction:",t);const i=new F2n(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Et.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class F2n extends yEn{constructor(t){super(),this.currentSequenceNumber=t}}class Lce{constructor(t){this.persistence=t,this.zr=new $ce,this.jr=null}static Hr(t){return new Lce(t)}get Jr(){if(this.jr)return this.jr;throw Wn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Et.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Et.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Et.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Et.forEach(this.Jr,r=>{const i=En.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,er.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Et.or([()=>Et.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bce{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Fr(),i=Fr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Bce(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2n{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2n{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return yvn()?8:vEn(mu())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new M2n;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(rI()<=Wr.DEBUG&&tn("QueryEngine","SDK will not create cache indexes for query:",R2(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Et.resolve()):(rI()<=Wr.DEBUG&&tn("QueryEngine","Query:",R2(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(rI()<=Wr.DEBUG&&tn("QueryEngine","The SDK decides to create cache indexes for query:",R2(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,jm(n))):Et.resolve())}ji(t,n){if(vSe(n))return Et.resolve(null);let r=jm(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=XQ(n,null,"F"),r=jm(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Fr(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,XQ(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return vSe(n)||i.isEqual(er.min())?Et.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Et.resolve(null):(rI()<=Wr.DEBUG&&tn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),R2(n)),this.es(t,o,n,hEn(i,-1)).next(a=>a))})}Zi(t,n){let r=new du(aWe(t));return n.forEach((i,s)=>{wj(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return rI()<=Wr.DEBUG&&tn("QueryEngine","Using full collection scan to execute query:",R2(n)),this.zi.getDocumentsMatchingQuery(t,n,fb.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2n{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Qs(Ti),this.rs=new UA(s=>kce(s),Rce),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new A2n(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function B2n(e,t,n,r){return new L2n(e,t,n,r)}async function IWe(e,t){const n=tr(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Fr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function j2n(e,t){const n=tr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Et.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ps(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Fr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function kWe(e){const t=tr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function U2n(e,t){const n=tr(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(sl.EMPTY_BYTE_STRING,er.min()).withLastLimboFreeSnapshotVersion(er.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=by(),l=Fr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(z2n(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(er.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Et.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function z2n(e,t,n){let r=Fr(),i=Fr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=by();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(er.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):tn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function V2n(e,t){const n=tr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function H2n(e,t){const n=tr(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Et.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new ev(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function tJ(e,t,n){const r=tr(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!LP(o))throw o;tn("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function ISe(e,t,n){const r=tr(e);let i=er.min(),s=Fr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=tr(u),d=f.rs.get(c);return d!==void 0?Et.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,jm(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:er.min(),n?s:Fr())).next(a=>(q2n(r,FEn(t),a),{documents:a,hs:s})))}function q2n(e,t,n){let r=e.ss.get(t)||er.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class kSe{constructor(){this.activeTargetIds=UEn()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class W2n{constructor(){this.no=new kSe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new kSe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2n{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RSe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){tn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){tn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A6=null;function nW(){return A6===null?A6=function(){return 268435456+Math.round(2147483648*Math.random())}():A6++,"0x"+A6.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2n={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2n{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu="WebChannelConnection";class X2n extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=nW(),u=this.vo(n,r.toUriEncodedString());tn("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(tn("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw L3("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+BA}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=Y2n[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=nW();return new Promise((o,a)=>{const u=new Vqe;u.setWithCredentials(!0),u.listenOnce(qqe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case JF.NO_ERROR:const c=u.getResponseJson();tn(Nu,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case JF.TIMEOUT:tn(Nu,`RPC '${t}' ${s} timed out`),a(new Vt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case JF.HTTP_ERROR:const f=u.getStatus();if(tn(Nu,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(y)>=0?y:ht.UNKNOWN}(h.status);a(new Vt(p,h.message))}else a(new Vt(ht.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Vt(ht.UNAVAILABLE,"Connection failed."));break;default:Wn()}}finally{tn(Nu,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);tn(Nu,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=nW(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Yqe(),a=Gqe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Hqe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");tn(Nu,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new K2n({lo:g=>{h?tn(Nu,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(tn(Nu,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),tn(Nu,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(_){setTimeout(()=>{throw _},0)}})};return m(f,KI.EventType.OPEN,()=>{h||(tn(Nu,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,KI.EventType.CLOSE,()=>{h||(h=!0,tn(Nu,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,KI.EventType.ERROR,g=>{h||(h=!0,L3(Nu,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Vt(ht.UNAVAILABLE,"The operation could not be completed")))}),m(f,KI.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ps(!!v);const b=v,_=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(_){tn(Nu,`RPC '${t}' stream ${i} received error:`,_);const w=_.status;let S=function(k){const I=Lo[k];if(I!==void 0)return bWe(I)}(w),T=_.message;S===void 0&&(S=ht.INTERNAL,T="Unknown error status: "+w+" with message "+_.message),h=!0,p.po(new Vt(S,T)),f.close()}else tn(Nu,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,Wqe.STAT_EVENT,g=>{g.stat===HQ.PROXY?tn(Nu,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===HQ.NOPROXY&&tn(Nu,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function rW(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(e){return new a2n(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RWe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&tn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NWe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new RWe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===ht.RESOURCE_EXHAUSTED?(vy(n.toString()),vy("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Vt(ht.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return tn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(tn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Q2n extends NWe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=c2n(this.serializer,t),r=function(s){if(!("targetChange"in s))return er.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?er.min():o.readTime?Um(o.readTime):er.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=eJ(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=YQ(u)?{documents:h2n(s,u)}:{query:p2n(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_We(s,o.resumeToken);const l=QQ(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(er.min())>0){a.readTime=X$(s,o.snapshotVersion.toTimestamp());const l=QQ(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=g2n(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=eJ(this.serializer),n.removeTarget=t,this.i_(n)}}class J2n extends NWe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ps(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=d2n(t.writeResults,t.commitTime),r=Um(t.commitTime);return this.listener.A_(r,n)}return ps(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=eJ(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>f2n(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2n extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Vt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,JQ(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Vt(ht.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,JQ(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Vt(ht.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class eSn{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(vy(n),this.y_=!1):tn("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tSn{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{vE(this)&&(tn("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=tr(u);l.M_.add(4),await zP(l),l.N_.set("Unknown"),l.M_.delete(4),await UP(l)}(this))})}),this.N_=new eSn(r,i)}}async function UP(e){if(vE(e))for(const t of e.x_)await t(!0)}async function zP(e){for(const t of e.x_)await t(!1)}function PWe(e,t){const n=tr(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Vce(n)?zce(n):zA(n).Xo()&&Uce(n,t))}function jce(e,t){const n=tr(e),r=zA(n);n.F_.delete(t),r.Xo()&&OWe(n,t),n.F_.size===0&&(r.Xo()?r.n_():vE(n)&&n.N_.set("Unknown"))}function Uce(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(er.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zA(e).P_(t)}function OWe(e,t){e.L_.xe(t),zA(e).I_(t)}function zce(e){e.L_=new r2n({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),zA(e).start(),e.N_.w_()}function Vce(e){return vE(e)&&!zA(e).Zo()&&e.F_.size>0}function vE(e){return tr(e).M_.size===0}function FWe(e){e.L_=void 0}async function nSn(e){e.N_.set("Online")}async function rSn(e){e.F_.forEach((t,n)=>{Uce(e,t)})}async function iSn(e,t){FWe(e),Vce(e)?(e.N_.D_(t),zce(e)):e.N_.set("Unknown")}async function sSn(e,t,n){if(e.N_.set("Online"),t instanceof wWe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){tn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Q$(e,r)}else if(t instanceof tM?e.L_.Ke(t):t instanceof xWe?e.L_.He(t):e.L_.We(t),!n.isEqual(er.min()))try{const r=await kWe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(sl.EMPTY_BYTE_STRING,c.snapshotVersion)),OWe(s,u);const f=new ev(c.target,u,l,c.sequenceNumber);Uce(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){tn("RemoteStore","Failed to raise snapshot:",r),await Q$(e,r)}}async function Q$(e,t,n){if(!LP(t))throw t;e.M_.add(1),await zP(e),e.N_.set("Offline"),n||(n=()=>kWe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{tn("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await UP(e)})}function MWe(e,t){return t().catch(n=>Q$(e,n,t))}async function Tj(e){const t=tr(e),n=hb(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;oSn(t);)try{const i=await V2n(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,aSn(t,i)}catch(i){await Q$(t,i)}$We(t)&&LWe(t)}function oSn(e){return vE(e)&&e.v_.length<10}function aSn(e,t){e.v_.push(t);const n=hb(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function $We(e){return vE(e)&&!hb(e).Zo()&&e.v_.length>0}function LWe(e){hb(e).start()}async function uSn(e){hb(e).V_()}async function lSn(e){const t=hb(e);for(const n of e.v_)t.d_(n.mutations)}async function cSn(e,t,n){const r=e.v_.shift(),i=Oce.from(r,t,n);await MWe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Tj(e)}async function fSn(e,t){t&&hb(e).E_&&await async function(r,i){if(function(o){return e2n(o)&&o!==ht.ABORTED}(i.code)){const s=r.v_.shift();hb(r).t_(),await MWe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Tj(r)}}(e,t),$We(e)&&LWe(e)}async function NSe(e,t){const n=tr(e);n.asyncQueue.verifyOperationInProgress(),tn("RemoteStore","RemoteStore received new credentials");const r=vE(n);n.M_.add(3),await zP(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await UP(n)}async function dSn(e,t){const n=tr(e);t?(n.M_.delete(2),await UP(n)):t||(n.M_.add(2),await zP(n),n.N_.set("Unknown"))}function zA(e){return e.B_||(e.B_=function(n,r,i){const s=tr(n);return s.f_(),new Q2n(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:nSn.bind(null,e),To:rSn.bind(null,e),Ao:iSn.bind(null,e),h_:sSn.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),Vce(e)?zce(e):e.N_.set("Unknown")):(await e.B_.stop(),FWe(e))})),e.B_}function hb(e){return e.k_||(e.k_=function(n,r,i){const s=tr(n);return s.f_(),new J2n(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:uSn.bind(null,e),Ao:fSn.bind(null,e),R_:lSn.bind(null,e),A_:cSn.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await Tj(e)):(await e.k_.stop(),e.v_.length>0&&(tn("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hce{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Hce(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Vt(ht.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qce(e,t){if(vy("AsyncQueue",`${t}: ${e}`),LP(e))return new Vt(ht.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t){this.comparator=t?(n,r)=>t(n,r)||En.comparator(n.key,r.key):(n,r)=>En.comparator(n.key,r.key),this.keyedMap=XI(),this.sortedSet=new Qs(this.comparator)}static emptySet(t){return new KS(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof KS)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new KS;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PSe{constructor(){this.q_=new Qs(En.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Wn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class yT{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new yT(t,n,KS.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&xj(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hSn{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class pSn{constructor(){this.queries=new UA(t=>oWe(t),xj),this.onlineState="Unknown",this.z_=new Set}}async function BWe(e,t){const n=tr(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new hSn,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=qce(o,`Initialization of query '${R2(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Wce(n)}async function jWe(e,t){const n=tr(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function mSn(e,t){const n=tr(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Wce(n)}function gSn(e,t,n){const r=tr(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function Wce(e){e.z_.forEach(t=>{t.next()})}var nJ,OSe;(OSe=nJ||(nJ={})).J_="default",OSe.Cache="cache";class UWe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new yT(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=yT.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==nJ.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zWe{constructor(t){this.key=t}}class VWe{constructor(t){this.key=t}}class ySn{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Fr(),this.mutatedKeys=Fr(),this.Ia=aWe(t),this.Ta=new KS(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new PSe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=wj(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new yT(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new PSe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Fr(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new VWe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new zWe(r))}),n}pa(t){this.la=t.hs,this.Pa=Fr();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return yT.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class vSn{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class bSn{constructor(t){this.key=t,this.wa=!1}}class xSn{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new UA(a=>oWe(a),xj),this.Da=new Map,this.Ca=new Set,this.va=new Qs(En.comparator),this.Fa=new Map,this.Ma=new $ce,this.xa={},this.Oa=new Map,this.Na=gT.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function wSn(e,t,n=!0){const r=KWe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await HWe(r,t,n,!0),i}async function _Sn(e,t){const n=KWe(e);await HWe(n,t,!0,!1)}async function HWe(e,t,n,r){const i=await H2n(e.localStore,jm(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await ESn(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&PWe(e.remoteStore,i),a}async function ESn(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await ISe(m.localStore,g.query,!1).then(({documents:T})=>g.view.da(T,b)));const _=v&&v.targetChanges.get(g.targetId),w=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,_,w);return MSe(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await ISe(e.localStore,t,!0),o=new ySn(t,s.hs),a=o.da(s.documents),u=jP.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);MSe(e,n,l.fa);const c=new vSn(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function SSn(e,t,n){const r=tr(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!xj(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tJ(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&jce(r.remoteStore,i.targetId),rJ(r,i.targetId)}).catch($P)):(rJ(r,i.targetId),await tJ(r.localStore,i.targetId,!0))}async function CSn(e,t){const n=tr(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jce(n.remoteStore,r.targetId))}async function TSn(e,t,n){const r=PSn(e);try{const i=await function(o,a){const u=tr(o),l=ha.now(),c=a.reduce((h,p)=>h.add(p.key),Fr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=by(),m=Fr();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=KEn(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Jb(v.key,b,Jqe(b.value.mapValue),Ff.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:lWe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Qs(Ti)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await VP(r,i.changes),await Tj(r.remoteStore)}catch(i){const s=qce(i,"Failed to persist write");n.reject(s)}}async function qWe(e,t){const n=tr(e);try{const r=await U2n(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ps(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ps(o.wa):i.removedDocuments.size>0&&(ps(o.wa),o.wa=!1))}),await VP(n,r,t)}catch(r){await $P(r)}}function FSe(e,t,n){const r=tr(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=tr(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&Wce(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ASn(e,t,n){const r=tr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Qs(En.comparator);o=o.insert(s,Uu.newNoDocument(s,er.min()));const a=Fr().add(s),u=new Sj(er.min(),new Map,new Qs(Ti),o,a);await qWe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),Gce(r)}else await tJ(r.localStore,t,!1).then(()=>rJ(r,t,n)).catch($P)}async function DSn(e,t){const n=tr(e),r=t.batch.batchId;try{const i=await j2n(n.localStore,t);GWe(n,r,null),WWe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await VP(n,i)}catch(i){await $P(i)}}async function ISn(e,t,n){const r=tr(e);try{const i=await function(o,a){const u=tr(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ps(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);GWe(r,t,n),WWe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await VP(r,i)}catch(i){await $P(i)}}function WWe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function GWe(e,t,n){const r=tr(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function rJ(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||YWe(e,r)})}function YWe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(jce(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Gce(e))}function MSe(e,t,n){for(const r of n)r instanceof zWe?(e.Ma.addReference(r.key,t),kSn(e,r)):r instanceof VWe?(tn("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||YWe(e,r.key)):Wn()}function kSn(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(tn("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Gce(e))}function Gce(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new En(Ss.fromString(t)),r=e.Na.next();e.Fa.set(r,new bSn(n)),e.va=e.va.insert(n,r),PWe(e.remoteStore,new ev(jm(Nce(n.path)),r,"TargetPurposeLimboResolution",Tce.oe))}}async function VP(e,t,n){const r=tr(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=Bce.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=tr(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Et.forEach(l,d=>Et.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Et.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!LP(f))throw f;tn("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function RSn(e,t){const n=tr(e);if(!n.currentUser.isEqual(t)){tn("SyncEngine","User change. New user:",t.toKey());const r=await IWe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Vt(ht.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await VP(n,r.us)}}function NSn(e,t){const n=tr(e),r=n.Fa.get(t);if(r&&r.wa)return Fr().add(r.key);{let i=Fr();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function KWe(e){const t=tr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=qWe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NSn.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ASn.bind(null,t),t.Sa.h_=mSn.bind(null,t.eventManager),t.Sa.ka=gSn.bind(null,t.eventManager),t}function PSn(e){const t=tr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=DSn.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ISn.bind(null,t),t}class $Se{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Cj(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return B2n(this.persistence,new $2n,t.initialUser,this.serializer)}createPersistence(t){return new O2n(Lce.Hr,this.serializer)}createSharedClientState(t){return new W2n}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OSn{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>FSe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RSn.bind(null,this.syncEngine),await dSn(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new pSn}()}createDatastore(t){const n=Cj(t.databaseInfo.databaseId),r=function(s){return new X2n(s)}(t.databaseInfo);return function(s,o,a,u){return new Z2n(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new tSn(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>FSe(this.syncEngine,n,0),function(){return RSe.D()?new RSe:new G2n}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new xSn(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=tr(r);tn("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await zP(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XWe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):vy("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FSn{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dc.UNAUTHENTICATED,this.clientId=Kqe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{tn("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(tn("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Vt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new qg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=qce(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function iW(e,t){e.asyncQueue.verifyOperationInProgress(),tn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await IWe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function LSe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await QWe(e);tn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>NSe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>NSe(t.remoteStore,i)),e._onlineComponents=t}function MSn(e){return e.name==="FirebaseError"?e.code===ht.FAILED_PRECONDITION||e.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function QWe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){tn("FirestoreClient","Using user provided OfflineComponentProvider");try{await iW(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!MSn(n))throw n;L3("Error using user provided cache. Falling back to memory cache: "+n),await iW(e,new $Se)}}else tn("FirestoreClient","Using default OfflineComponentProvider"),await iW(e,new $Se);return e._offlineComponents}async function Yce(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(tn("FirestoreClient","Using user provided OnlineComponentProvider"),await LSe(e,e._uninitializedComponentsProvider._online)):(tn("FirestoreClient","Using default OnlineComponentProvider"),await LSe(e,new OSn))),e._onlineComponents}function $Sn(e){return QWe(e).then(t=>t.persistence)}function LSn(e){return Yce(e).then(t=>t.remoteStore)}function BSn(e){return Yce(e).then(t=>t.syncEngine)}async function JWe(e){const t=await Yce(e),n=t.eventManager;return n.onListen=wSn.bind(null,t.syncEngine),n.onUnlisten=SSn.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_Sn.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=CSn.bind(null,t.syncEngine),n}function jSn(e){return e.asyncQueue.enqueue(async()=>{const t=await $Sn(e),n=await LSn(e);return t.setNetworkEnabled(!0),function(i){const s=tr(i);return s.M_.delete(0),UP(s)}(n)})}function USn(e,t,n={}){const r=new qg;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new XWe({next:d=>{o.enqueueAndForget(()=>jWe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Vt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Vt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new UWe(Nce(a.path),c,{includeMetadataChanges:!0,ra:!0});return BWe(s,f)}(await JWe(e),e.asyncQueue,t,n,r)),r.promise}function zSn(e,t,n={}){const r=new qg;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new XWe({next:d=>{o.enqueueAndForget(()=>jWe(s,f)),d.fromCache&&u.source==="server"?l.reject(new Vt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new UWe(a,c,{includeMetadataChanges:!0,ra:!0});return BWe(s,f)}(await JWe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZWe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BSe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eGe(e,t,n){if(!n)throw new Vt(ht.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function VSn(e,t,n,r){if(t===!0&&r===!0)throw new Vt(ht.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function jSe(e){if(!En.isDocumentKey(e))throw new Vt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function USe(e){if(En.isDocumentKey(e))throw new Vt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Aj(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Wn()}function l0(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Vt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Aj(e);throw new Vt(ht.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zSe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Vt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Vt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}VSn("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZWe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Kce{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zSe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Vt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Vt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zSe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sEn;switch(r.type){case"firstParty":return new uEn(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Vt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=BSe.get(n);r&&(tn("ComponentProvider","Removing Datastore"),BSe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new bE(this.firestore,t,this._query)}}class $l{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cv(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new $l(this.firestore,t,this._key)}}class Cv extends bE{constructor(t,n,r){super(t,n,Nce(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new $l(this.firestore,null,new En(t))}withConverter(t){return new Cv(this.firestore,t,this._path)}}function uc(e,t,...n){if(e=gs(e),eGe("collection","path",t),e instanceof Kce){const r=Ss.fromString(t,...n);return USe(r),new Cv(e,null,r)}{if(!(e instanceof $l||e instanceof Cv))throw new Vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ss.fromString(t,...n));return USe(r),new Cv(e.firestore,null,r)}}function ys(e,t,...n){if(e=gs(e),arguments.length===1&&(t=Kqe.newId()),eGe("doc","path",t),e instanceof Kce){const r=Ss.fromString(t,...n);return jSe(r),new $l(e,null,new En(r))}{if(!(e instanceof $l||e instanceof Cv))throw new Vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ss.fromString(t,...n));return jSe(r),new $l(e.firestore,e instanceof Cv?e.converter:null,new En(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HSn{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new RWe(this,"async_queue_retry"),this.hu=()=>{const n=rW();n&&tn("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=rW();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=rW();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new qg;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!LP(t))throw t;tn("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw vy("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=Hce.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Wn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class xE extends Kce{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new HSn}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||tGe(this),this._firestoreClient.terminate()}}function qSn(e,t,n){n||(n="(default)");const r=$A(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(F3(s,t))return i;throw new Vt(ht.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Vt(ht.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Vt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function HP(e){return e._firestoreClient||tGe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function tGe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new wEn(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,ZWe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new FSn(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function WSn(e){return jSn(HP(e=l0(e,xE)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t){this._byteString=t}static fromBase64String(t){try{return new vT(sl.fromBase64String(t))}catch(n){throw new Vt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new vT(sl.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Vt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new iu(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xce{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Vt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Vt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ti(this._lat,t._lat)||Ti(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GSn=/^__.*__$/;class YSn{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Jb(t,this.data,this.fieldMask,n,this.fieldTransforms):new BP(t,this.data,n,this.fieldTransforms)}}class nGe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Jb(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function rGe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wn()}}class Qce{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Qce(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return J$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(rGe(this.fu)&&GSn.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class KSn{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Cj(t)}Fu(t,n,r,i=!1){return new Qce({fu:t,methodName:n,vu:r,path:iu.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ij(e){const t=e._freezeSettings(),n=Cj(e._databaseId);return new KSn(e._databaseId,!!t.ignoreUndefinedProperties,n)}function iGe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Zce("Data must be an object, but it was:",o,r);const a=aGe(r,o);let u,l;if(s.merge)u=new Df(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=iJ(t,f,n);if(!o.contains(d))throw new Vt(ht.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);lGe(c,d)||c.push(d)}u=new Df(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new YSn(new Ec(a),u,l)}class kj extends Dj{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof kj}}class Jce extends Dj{_toFieldTransform(t){return new qEn(t.path,new H3)}isEqual(t){return t instanceof Jce}}function sGe(e,t,n,r){const i=e.Fu(1,t,n);Zce("Data must be an object, but it was:",i,r);const s=[],o=Ec.empty();yE(r,(u,l)=>{const c=efe(t,u,n);l=gs(l);const f=i.Su(c);if(l instanceof kj)s.push(c);else{const d=WP(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Df(s);return new nGe(o,a,i.fieldTransforms)}function oGe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[iJ(t,r,n)],u=[i];if(s.length%2!=0)throw new Vt(ht.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(iJ(t,s[d])),u.push(s[d+1]);const l=[],c=Ec.empty();for(let d=a.length-1;d>=0;--d)if(!lGe(l,a[d])){const h=a[d];let p=u[d];p=gs(p);const m=o.Su(h);if(p instanceof kj)l.push(h);else{const g=WP(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Df(l);return new nGe(c,f,o.fieldTransforms)}function XSn(e,t,n,r=!1){return WP(n,e.Fu(r?4:3,t))}function WP(e,t){if(uGe(e=gs(e)))return Zce("Unsupported field value:",t,e),aGe(e,t);if(e instanceof Dj)return function(r,i){if(!rGe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=WP(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=gs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zEn(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ha.fromDate(r);return{timestampValue:X$(i.serializer,s)}}if(r instanceof ha){const s=new ha(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:X$(i.serializer,s)}}if(r instanceof Xce)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vT)return{bytesValue:_We(i.serializer,r._byteString)};if(r instanceof $l){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Mce(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Aj(r)}`)}(e,t)}function aGe(e,t){const n={};return Xqe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yE(e,(r,i)=>{const s=WP(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function uGe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ha||e instanceof Xce||e instanceof vT||e instanceof $l||e instanceof Dj)}function Zce(e,t,n){if(!uGe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Aj(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function iJ(e,t,n){if((t=gs(t))instanceof qP)return t._internalPath;if(typeof t=="string")return efe(e,t);throw J$("Field path arguments must be of type string or ",e,!1,void 0,n)}const QSn=new RegExp("[~\\*/\\[\\]]");function efe(e,t,n){if(t.search(QSn)>=0)throw J$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new qP(...t.split("."))._internalPath}catch{throw J$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function J$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Vt(ht.INVALID_ARGUMENT,a+e+u)}function lGe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cGe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $l(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new JSn(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Rj("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JSn extends cGe{data(){return super.data()}}function Rj(e,t){return typeof t=="string"?efe(e,t):t instanceof qP?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZSn(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Vt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tfe{}class fGe extends tfe{}function sW(e,t,...n){let r=[];t instanceof tfe&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof nfe).length,a=s.filter(u=>u instanceof Nj).length;if(o>1||o>0&&a>0)throw new Vt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Nj extends fGe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Nj(t,n,r)}_apply(t){const n=this._parse(t);return dGe(t._query,n),new bE(t.firestore,t.converter,KQ(t._query,n))}_parse(t){const n=Ij(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Vt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){WSe(f,c);const h=[];for(const p of f)h.push(qSe(u,s,p));d={arrayValue:{values:h}}}else d=qSe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||WSe(f,c),d=XSn(a,o,f,c==="in"||c==="not-in");return Ho.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function VSe(e,t,n){const r=t,i=Rj("where",e);return Nj._create(i,r,n)}class nfe extends tfe{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new nfe(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_p.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)dGe(o,u),o=KQ(o,u)}(t._query,n),new bE(t.firestore,t.converter,KQ(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rfe extends fGe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new rfe(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new V3(s,o)}(t._query,this._field,this._direction);return new bE(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new jA(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function HSe(e,t="asc"){const n=t,r=Rj("orderBy",e);return rfe._create(r,n)}function qSe(e,t,n){if(typeof(n=gs(n))=="string"){if(n==="")throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sWe(t)&&n.indexOf("/")!==-1)throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ss.fromString(n));if(!En.isDocumentKey(r))throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dSe(e,new En(r))}if(n instanceof $l)return dSe(e,n._key);throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Aj(n)}.`)}function WSe(e,t){if(!Array.isArray(e)||e.length===0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function dGe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class eCn{convertValue(t,n="none"){switch(R_(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(k_(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Wn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return yE(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Xce(zo(t.latitude),zo(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Dce(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(j3(t));default:return null}}convertTimestamp(t){const n=db(t);return new ha(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Ss.fromString(t);ps(DWe(r));const i=new U3(r.get(1),r.get(3)),s=new En(r.popFirst(5));return i.isEqual(n)||vy(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hGe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class pGe extends cGe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new nM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Rj("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nM extends pGe{data(t={}){return super.data(t)}}class tCn{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new JI(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new nM(this._firestore,this._userDataWriter,r.key,r,new JI(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Vt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new nM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new JI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new nM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new JI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:nCn(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nCn(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(e){e=l0(e,$l);const t=l0(e.firestore,xE);return USn(HP(t),e._key).then(n=>rCn(t,e,n))}class mGe extends eCn{constructor(t){super(),this.firestore=t}convertBytes(t){return new vT(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new $l(this.firestore,null,n)}}function v2(e){e=l0(e,bE);const t=l0(e.firestore,xE),n=HP(t),r=new mGe(t);return ZSn(e._query),zSn(n,e._query).then(i=>new tCn(t,r,e,i))}function Pu(e,t,n){e=l0(e,$l);const r=l0(e.firestore,xE),i=hGe(e.converter,t,n);return ife(r,[iGe(Ij(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Ff.none())])}function GSe(e,t,n,...r){e=l0(e,$l);const i=l0(e.firestore,xE),s=Ij(i);let o;return o=typeof(t=gs(t))=="string"||t instanceof qP?oGe(s,"updateDoc",e._key,t,n,r):sGe(s,"updateDoc",e._key,t),ife(i,[o.toMutation(e._key,Ff.exists(!0))])}function ife(e,t){return function(r,i){const s=new qg;return r.asyncQueue.enqueueAndForget(async()=>TSn(await BSn(r),i,s)),s.promise}(HP(e),t)}function rCn(e,t,n){const r=n.docs.get(t._key),i=new mGe(e);return new pGe(e,i,t._key,r,new JI(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iCn{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ij(t)}set(t,n,r){this._verifyNotCommitted();const i=oW(t,this._firestore),s=hGe(i.converter,n,r),o=iGe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ff.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=oW(t,this._firestore);let o;return o=typeof(n=gs(n))=="string"||n instanceof qP?oGe(this._dataReader,"WriteBatch.update",s._key,n,r,i):sGe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ff.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=oW(t,this._firestore);return this._mutations=this._mutations.concat(new Pce(n._key,Ff.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Vt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function oW(e,t){if((e=gs(e)).firestore!==t)throw new Vt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function YSe(){return new Jce("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KSe(e){return HP(e=l0(e,xE)),new iCn(e,t=>ife(e,t))}(function(t,n=!0){(function(i){BA=i})(gE),gy(new o0("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new xE(new oEn(r.getProvider("auth-internal")),new cEn(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Vt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new U3(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),lp(uSe,"4.6.3",t),lp(uSe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sJ=new Map,gGe={activated:!1,tokenObservers:[]},sCn={initialized:!1,enabled:!1};function pa(e){return sJ.get(e)||Object.assign({},gGe)}function oCn(e,t){return sJ.set(e,t),sJ.get(e)}function Pj(){return sCn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yGe="https://content-firebaseappcheck.googleapis.com/v1",aCn="exchangeRecaptchaV3Token",uCn="exchangeDebugToken",XSe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},lCn=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cCn{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new O3,this.pending.promise.catch(n=>{}),await fCn(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new O3,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function fCn(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dCn={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},kc=new MA("appCheck","AppCheck",dCn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QSe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function sfe(e){if(!pa(e).activated)throw kc.create("use-before-activation",{appName:e.name})}function vGe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=I6(n)+"d:"),r&&(o+=I6(r)+"h:"),o+=I6(i)+"m:"+I6(s)+"s",o}function I6(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ofe({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw kc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw kc.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw kc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw kc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function hCn(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${yGe}/projects/${n}/apps/${r}:${aCn}?key=${i}`,body:{recaptcha_v3_token:t}}}function bGe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${yGe}/projects/${n}/apps/${r}:${uCn}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pCn="firebase-app-check-database",mCn=1,G3="firebase-app-check-store",xGe="debug-token";let k6=null;function wGe(){return k6||(k6=new Promise((e,t)=>{try{const n=indexedDB.open(pCn,mCn);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(kc.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(G3,{keyPath:"compositeKey"})}}}catch(n){t(kc.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),k6)}function gCn(e){return EGe(SGe(e))}function yCn(e,t){return _Ge(SGe(e),t)}function vCn(e){return _Ge(xGe,e)}function bCn(){return EGe(xGe)}async function _Ge(e,t){const r=(await wGe()).transaction(G3,"readwrite"),s=r.objectStore(G3).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(kc.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function EGe(e){const n=(await wGe()).transaction(G3,"readonly"),i=n.objectStore(G3).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(kc.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function SGe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=new dj("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xCn(e){if(oce()){let t;try{t=await gCn(e)}catch(n){Y3.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function aW(e,t){return oce()?yCn(e,t).catch(n=>{Y3.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function wCn(){let e;try{e=await bCn()}catch{}if(e)return e;{const t=Tvn();return vCn(t).catch(n=>Y3.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function afe(){return Pj().enabled}async function ufe(){const e=Pj();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function _Cn(){const e=UHe(),t=Pj();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new O3;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(wCn())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ECn={error:"UNKNOWN_ERROR"};function SCn(e){return sce.encodeString(JSON.stringify(e),!1)}async function oJ(e,t=!1){const n=e.app;sfe(n);const r=pa(n);let i=r.token,s;if(i&&!oS(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(oS(u)?i=u:await aW(n,void 0))}if(!t&&i&&oS(i))return{token:i.token};let o=!1;if(afe()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ofe(bGe(n,await ufe()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await aW(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await pa(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Y3.warn(u.message):Y3.error(u),s=u}let a;return i?s?oS(i)?a={token:i.token,internalError:s}:a=ZSe(s):(a={token:i.token},r.token=i,await aW(n,i)):a=ZSe(s),o&&AGe(n,a),a}async function CCn(e){const t=e.app;sfe(t);const{provider:n}=pa(t);if(afe()){const r=await ufe(),{token:i}=await ofe(bGe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function CGe(e,t,n,r){const{app:i}=e,s=pa(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&oS(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),JSe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>JSe(e))}function TGe(e,t){const n=pa(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function JSe(e){const{app:t}=e,n=pa(t);let r=n.tokenRefresher;r||(r=TCn(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function TCn(e){const{app:t}=e;return new cCn(async()=>{const n=pa(t);let r;if(n.token?r=await oJ(e,!0):r=await oJ(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=pa(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},XSe.RETRIAL_MIN_WAIT,XSe.RETRIAL_MAX_WAIT)}function AGe(e,t){const n=pa(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function oS(e){return e.expireTimeMillis-Date.now()>0}function ZSe(e){return{token:SCn(ECn),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ACn{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=pa(this.app);for(const n of t)TGe(this.app,n.next);return Promise.resolve()}}function DCn(e,t){return new ACn(e,t)}function ICn(e){return{getToken:t=>oJ(e,t),getLimitedUseToken:()=>CCn(e),addTokenListener:t=>CGe(e,"INTERNAL",t),removeTokenListener:t=>TGe(e.app,t)}}const kCn="@firebase/app-check",RCn="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NCn="https://www.google.com/recaptcha/api.js";function PCn(e,t){const n=new O3,r=pa(e);r.reCAPTCHAState={initialized:n};const i=OCn(e),s=QSe(!1);return s?eCe(e,t,s,i,n):$Cn(()=>{const o=QSe(!1);if(!o)throw new Error("no recaptcha");eCe(e,t,o,i,n)}),n.promise}function eCe(e,t,n,r,i){n.ready(()=>{MCn(e,t,n,r),i.resolve(n)})}function OCn(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function FCn(e){sfe(e);const n=await pa(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=pa(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function MCn(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{pa(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{pa(e).reCAPTCHAState.succeeded=!1}}),s=pa(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function $Cn(e){const t=document.createElement("script");t.src=NCn,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lfe{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;BCn(this._throttleData);const i=await FCn(this._app).catch(o=>{throw kc.create("recaptcha-error")});if(!(!((t=pa(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw kc.create("recaptcha-error");let s;try{s=await ofe(hCn(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=LCn(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),kc.create("throttled",{time:vGe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=$A(t,"heartbeat"),PCn(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof lfe?this._siteKey===t._siteKey:!1}}function LCn(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+lCn,httpStatus:e};{const n=t?t.backoffCount:0,r=Rvn(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function BCn(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw kc.create("throttled",{time:vGe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jCn(e=uce(),t){e=gs(e);const n=$A(e,"app-check");if(Pj().initialized||_Cn(),afe()&&ufe().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw kc.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return UCn(e,t.provider,t.isTokenAutoRefreshEnabled),pa(e).isTokenAutoRefreshEnabled&&CGe(r,"INTERNAL",()=>{}),r}function UCn(e,t,n){const r=oCn(e,Object.assign({},gGe));r.activated=!0,r.provider=t,r.cachedTokenPromise=xCn(e).then(i=>(i&&oS(i)&&(r.token=i,AGe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const zCn="app-check",tCe="app-check-internal";function VCn(){gy(new o0(zCn,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return DCn(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(tCe).initialize()})),gy(new o0(tCe,e=>{const t=e.getProvider("app-check").getImmediate();return ICn(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),lp(kCn,RCn)}VCn();var DGe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof pI=="function"&&pI;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof pI=="function"&&pI,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof on<"u"?on:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,w!==o&&m(this,w)}f.prototype.catch=function(w){return this.then(null,w)},f.prototype.then=function(w,S){if(typeof w!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var T=new this.constructor(o);if(this.state!==c){var A=this.state===l?w:S;h(T,A,this.outcome)}else this.queue.push(new d(T,w,S));return T};function d(w,S,T){this.promise=w,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(w){a.resolve(this.promise,w)},d.prototype.otherCallFulfilled=function(w){h(this.promise,this.onFulfilled,w)},d.prototype.callRejected=function(w){a.reject(this.promise,w)},d.prototype.otherCallRejected=function(w){h(this.promise,this.onRejected,w)};function h(w,S,T){s(function(){var A;try{A=S(T)}catch(k){return a.reject(w,k)}A===w?a.reject(w,new TypeError("Cannot resolve promise with itself")):a.resolve(w,A)})}a.resolve=function(w,S){var T=g(p,S);if(T.status==="error")return a.reject(w,T.value);var A=T.value;if(A)m(w,A);else{w.state=l,w.outcome=S;for(var k=-1,I=w.queue.length;++k<I;)w.queue[k].callFulfilled(S)}return w},a.reject=function(w,S){w.state=u,w.outcome=S;for(var T=-1,A=w.queue.length;++T<A;)w.queue[T].callRejected(S);return w};function p(w){var S=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof S=="function")return function(){S.apply(w,arguments)}}function m(w,S){var T=!1;function A(F){T||(T=!0,a.reject(w,F))}function k(F){T||(T=!0,a.resolve(w,F))}function I(){S(k,A)}var R=g(I);R.status==="error"&&A(R.value)}function g(w,S){var T={};try{T.value=w(S),T.status="success"}catch(A){T.status="error",T.value=A}return T}f.resolve=y;function y(w){return w instanceof this?w:a.resolve(new this(o),w)}f.reject=v;function v(w){var S=new this(o);return a.reject(S,w)}f.all=b;function b(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=w.length,A=!1;if(!T)return this.resolve([]);for(var k=new Array(T),I=0,R=-1,F=new this(o);++R<T;)O(w[R],R);return F;function O($,V){S.resolve($).then(j,function(G){A||(A=!0,a.reject(F,G))});function j(G){k[V]=G,++I===T&&!A&&(A=!0,a.resolve(F,k))}}}f.race=_;function _(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=w.length,A=!1;if(!T)return this.resolve([]);for(var k=-1,I=new this(o);++k<T;)R(w[k]);return I;function R(F){S.resolve(F).then(function(O){A||(A=!0,a.resolve(I,O))},function(O){A||(A=!0,a.reject(I,O))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof on<"u"?on:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te};function o(te,be){if(!(te instanceof be))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var te=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),be=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!te||be)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(te,be){te=te||[],be=be||{};try{return new Blob(te,be)}catch(Ae){if(Ae.name!=="TypeError")throw Ae;for(var ue=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,De=new ue,Pe=0;Pe<te.length;Pe+=1)De.append(te[Pe]);return De.getBlob(be.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(te,be){be&&te.then(function(ue){be(null,ue)},function(ue){be(ue)})}function h(te,be,ue){typeof be=="function"&&te.then(be),typeof ue=="function"&&te.catch(ue)}function p(te){return typeof te!="string"&&(console.warn(te+" used as a key, but it is not a string."),te=String(te)),te}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,_="readonly",w="readwrite";function S(te){for(var be=te.length,ue=new ArrayBuffer(be),De=new Uint8Array(ue),Pe=0;Pe<be;Pe++)De[Pe]=te.charCodeAt(Pe);return ue}function T(te){return new f(function(be){var ue=te.transaction(g,w),De=c([""]);ue.objectStore(g).put(De,"key"),ue.onabort=function(Pe){Pe.preventDefault(),Pe.stopPropagation(),be(!1)},ue.oncomplete=function(){var Pe=navigator.userAgent.match(/Chrome\/(\d+)/),Ae=navigator.userAgent.match(/Edge\//);be(Ae||!Pe||parseInt(Pe[1],10)>=43)}}).catch(function(){return!1})}function A(te){return typeof y=="boolean"?f.resolve(y):T(te).then(function(be){return y=be,y})}function k(te){var be=v[te.name],ue={};ue.promise=new f(function(De,Pe){ue.resolve=De,ue.reject=Pe}),be.deferredOperations.push(ue),be.dbReady?be.dbReady=be.dbReady.then(function(){return ue.promise}):be.dbReady=ue.promise}function I(te){var be=v[te.name],ue=be.deferredOperations.pop();if(ue)return ue.resolve(),ue.promise}function R(te,be){var ue=v[te.name],De=ue.deferredOperations.pop();if(De)return De.reject(be),De.promise}function F(te,be){return new f(function(ue,De){if(v[te.name]=v[te.name]||W(),te.db)if(be)k(te),te.db.close();else return ue(te.db);var Pe=[te.name];be&&Pe.push(te.version);var Ae=u.open.apply(u,Pe);be&&(Ae.onupgradeneeded=function(Xe){var pt=Ae.result;try{pt.createObjectStore(te.storeName),Xe.oldVersion<=1&&pt.createObjectStore(g)}catch(yt){if(yt.name==="ConstraintError")console.warn('The database "'+te.name+'" has been upgraded from version '+Xe.oldVersion+" to version "+Xe.newVersion+', but the storage "'+te.storeName+'" already exists.');else throw yt}}),Ae.onerror=function(Xe){Xe.preventDefault(),De(Ae.error)},Ae.onsuccess=function(){var Xe=Ae.result;Xe.onversionchange=function(pt){pt.target.close()},ue(Xe),I(te)}})}function O(te){return F(te,!1)}function $(te){return F(te,!0)}function V(te,be){if(!te.db)return!0;var ue=!te.db.objectStoreNames.contains(te.storeName),De=te.version<te.db.version,Pe=te.version>te.db.version;if(De&&(te.version!==be&&console.warn('The database "'+te.name+`" can't be downgraded from version `+te.db.version+" to version "+te.version+"."),te.version=te.db.version),Pe||ue){if(ue){var Ae=te.db.version+1;Ae>te.version&&(te.version=Ae)}return!0}return!1}function j(te){return new f(function(be,ue){var De=new FileReader;De.onerror=ue,De.onloadend=function(Pe){var Ae=btoa(Pe.target.result||"");be({__local_forage_encoded_blob:!0,data:Ae,type:te.type})},De.readAsBinaryString(te)})}function G(te){var be=S(atob(te.data));return c([be],{type:te.type})}function Y(te){return te&&te.__local_forage_encoded_blob}function J(te){var be=this,ue=be._initReady().then(function(){var De=v[be._dbInfo.name];if(De&&De.dbReady)return De.dbReady});return h(ue,te,te),ue}function L(te){k(te);for(var be=v[te.name],ue=be.forages,De=0;De<ue.length;De++){var Pe=ue[De];Pe._dbInfo.db&&(Pe._dbInfo.db.close(),Pe._dbInfo.db=null)}return te.db=null,O(te).then(function(Ae){return te.db=Ae,V(te)?$(te):Ae}).then(function(Ae){te.db=be.db=Ae;for(var Xe=0;Xe<ue.length;Xe++)ue[Xe]._dbInfo.db=Ae}).catch(function(Ae){throw R(te,Ae),Ae})}function U(te,be,ue,De){De===void 0&&(De=1);try{var Pe=te.db.transaction(te.storeName,be);ue(null,Pe)}catch(Ae){if(De>0&&(!te.db||Ae.name==="InvalidStateError"||Ae.name==="NotFoundError"))return f.resolve().then(function(){if(!te.db||Ae.name==="NotFoundError"&&!te.db.objectStoreNames.contains(te.storeName)&&te.version<=te.db.version)return te.db&&(te.version=te.db.version+1),$(te)}).then(function(){return L(te).then(function(){U(te,be,ue,De-1)})}).catch(ue);ue(Ae)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function B(te){var be=this,ue={db:null};if(te)for(var De in te)ue[De]=te[De];var Pe=v[ue.name];Pe||(Pe=W(),v[ue.name]=Pe),Pe.forages.push(be),be._initReady||(be._initReady=be.ready,be.ready=J);var Ae=[];function Xe(){return f.resolve()}for(var pt=0;pt<Pe.forages.length;pt++){var yt=Pe.forages[pt];yt!==be&&Ae.push(yt._initReady().catch(Xe))}var vt=Pe.forages.slice(0);return f.all(Ae).then(function(){return ue.db=Pe.db,O(ue)}).then(function(It){return ue.db=It,V(ue,be._defaultConfig.version)?$(ue):It}).then(function(It){ue.db=Pe.db=It,be._dbInfo=ue;for(var zt=0;zt<vt.length;zt++){var Xn=vt[zt];Xn!==be&&(Xn._dbInfo.db=ue.db,Xn._dbInfo.version=ue.version)}})}function q(te,be){var ue=this;te=p(te);var De=new f(function(Pe,Ae){ue.ready().then(function(){U(ue._dbInfo,_,function(Xe,pt){if(Xe)return Ae(Xe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.get(te);vt.onsuccess=function(){var It=vt.result;It===void 0&&(It=null),Y(It)&&(It=G(It)),Pe(It)},vt.onerror=function(){Ae(vt.error)}}catch(It){Ae(It)}})}).catch(Ae)});return d(De,be),De}function Z(te,be){var ue=this,De=new f(function(Pe,Ae){ue.ready().then(function(){U(ue._dbInfo,_,function(Xe,pt){if(Xe)return Ae(Xe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.openCursor(),It=1;vt.onsuccess=function(){var zt=vt.result;if(zt){var Xn=zt.value;Y(Xn)&&(Xn=G(Xn));var nn=te(Xn,zt.key,It++);nn!==void 0?Pe(nn):zt.continue()}else Pe()},vt.onerror=function(){Ae(vt.error)}}catch(zt){Ae(zt)}})}).catch(Ae)});return d(De,be),De}function re(te,be,ue){var De=this;te=p(te);var Pe=new f(function(Ae,Xe){var pt;De.ready().then(function(){return pt=De._dbInfo,b.call(be)==="[object Blob]"?A(pt.db).then(function(yt){return yt?be:j(be)}):be}).then(function(yt){U(De._dbInfo,w,function(vt,It){if(vt)return Xe(vt);try{var zt=It.objectStore(De._dbInfo.storeName);yt===null&&(yt=void 0);var Xn=zt.put(yt,te);It.oncomplete=function(){yt===void 0&&(yt=null),Ae(yt)},It.onabort=It.onerror=function(){var nn=Xn.error?Xn.error:Xn.transaction.error;Xe(nn)}}catch(nn){Xe(nn)}})}).catch(Xe)});return d(Pe,ue),Pe}function xe(te,be){var ue=this;te=p(te);var De=new f(function(Pe,Ae){ue.ready().then(function(){U(ue._dbInfo,w,function(Xe,pt){if(Xe)return Ae(Xe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.delete(te);pt.oncomplete=function(){Pe()},pt.onerror=function(){Ae(vt.error)},pt.onabort=function(){var It=vt.error?vt.error:vt.transaction.error;Ae(It)}}catch(It){Ae(It)}})}).catch(Ae)});return d(De,be),De}function pe(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){U(be._dbInfo,w,function(Ae,Xe){if(Ae)return Pe(Ae);try{var pt=Xe.objectStore(be._dbInfo.storeName),yt=pt.clear();Xe.oncomplete=function(){De()},Xe.onabort=Xe.onerror=function(){var vt=yt.error?yt.error:yt.transaction.error;Pe(vt)}}catch(vt){Pe(vt)}})}).catch(Pe)});return d(ue,te),ue}function Te(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){U(be._dbInfo,_,function(Ae,Xe){if(Ae)return Pe(Ae);try{var pt=Xe.objectStore(be._dbInfo.storeName),yt=pt.count();yt.onsuccess=function(){De(yt.result)},yt.onerror=function(){Pe(yt.error)}}catch(vt){Pe(vt)}})}).catch(Pe)});return d(ue,te),ue}function ke(te,be){var ue=this,De=new f(function(Pe,Ae){if(te<0){Pe(null);return}ue.ready().then(function(){U(ue._dbInfo,_,function(Xe,pt){if(Xe)return Ae(Xe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=!1,It=yt.openKeyCursor();It.onsuccess=function(){var zt=It.result;if(!zt){Pe(null);return}te===0||vt?Pe(zt.key):(vt=!0,zt.advance(te))},It.onerror=function(){Ae(It.error)}}catch(zt){Ae(zt)}})}).catch(Ae)});return d(De,be),De}function it(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){U(be._dbInfo,_,function(Ae,Xe){if(Ae)return Pe(Ae);try{var pt=Xe.objectStore(be._dbInfo.storeName),yt=pt.openKeyCursor(),vt=[];yt.onsuccess=function(){var It=yt.result;if(!It){De(vt);return}vt.push(It.key),It.continue()},yt.onerror=function(){Pe(yt.error)}}catch(It){Pe(It)}})}).catch(Pe)});return d(ue,te),ue}function Re(te,be){be=m.apply(this,arguments);var ue=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName);var De=this,Pe;if(!te.name)Pe=f.reject("Invalid arguments");else{var Ae=te.name===ue.name&&De._dbInfo.db,Xe=Ae?f.resolve(De._dbInfo.db):O(te).then(function(pt){var yt=v[te.name],vt=yt.forages;yt.db=pt;for(var It=0;It<vt.length;It++)vt[It]._dbInfo.db=pt;return pt});te.storeName?Pe=Xe.then(function(pt){if(pt.objectStoreNames.contains(te.storeName)){var yt=pt.version+1;k(te);var vt=v[te.name],It=vt.forages;pt.close();for(var zt=0;zt<It.length;zt++){var Xn=It[zt];Xn._dbInfo.db=null,Xn._dbInfo.version=yt}var nn=new f(function(gr,si){var Pr=u.open(te.name,yt);Pr.onerror=function(Ko){var sf=Pr.result;sf.close(),si(Ko)},Pr.onupgradeneeded=function(){var Ko=Pr.result;Ko.deleteObjectStore(te.storeName)},Pr.onsuccess=function(){var Ko=Pr.result;Ko.close(),gr(Ko)}});return nn.then(function(gr){vt.db=gr;for(var si=0;si<It.length;si++){var Pr=It[si];Pr._dbInfo.db=gr,I(Pr._dbInfo)}}).catch(function(gr){throw(R(te,gr)||f.resolve()).catch(function(){}),gr})}}):Pe=Xe.then(function(pt){k(te);var yt=v[te.name],vt=yt.forages;pt.close();for(var It=0;It<vt.length;It++){var zt=vt[It];zt._dbInfo.db=null}var Xn=new f(function(nn,gr){var si=u.deleteDatabase(te.name);si.onerror=function(){var Pr=si.result;Pr&&Pr.close(),gr(si.error)},si.onblocked=function(){console.warn('dropInstance blocked for database "'+te.name+'" until all open connections are closed')},si.onsuccess=function(){var Pr=si.result;Pr&&Pr.close(),nn(Pr)}});return Xn.then(function(nn){yt.db=nn;for(var gr=0;gr<vt.length;gr++){var si=vt[gr];I(si._dbInfo)}}).catch(function(nn){throw(R(te,nn)||f.resolve()).catch(function(){}),nn})})}return d(Pe,be),Pe}var ut={_driver:"asyncStorage",_initStorage:B,_support:l(),iterate:Z,getItem:q,setItem:re,removeItem:xe,clear:pe,length:Te,key:ke,keys:it,dropInstance:Re};function Ke(){return typeof openDatabase=="function"}var Ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gt="~~local_forage_type~",Ie=/^~~local_forage_type~([^~]+)~/,Ve="__lfsc__:",ft=Ve.length,_t="arbf",Mt="blob",st="si08",X="ui08",de="uic8",we="si16",ae="si32",he="ur16",Ee="ui32",$e="fl32",Be="fl64",lt=ft+_t.length,Je=Object.prototype.toString;function Xt(te){var be=te.length*.75,ue=te.length,De,Pe=0,Ae,Xe,pt,yt;te[te.length-1]==="="&&(be--,te[te.length-2]==="="&&be--);var vt=new ArrayBuffer(be),It=new Uint8Array(vt);for(De=0;De<ue;De+=4)Ae=Ct.indexOf(te[De]),Xe=Ct.indexOf(te[De+1]),pt=Ct.indexOf(te[De+2]),yt=Ct.indexOf(te[De+3]),It[Pe++]=Ae<<2|Xe>>4,It[Pe++]=(Xe&15)<<4|pt>>2,It[Pe++]=(pt&3)<<6|yt&63;return vt}function fn(te){var be=new Uint8Array(te),ue="",De;for(De=0;De<be.length;De+=3)ue+=Ct[be[De]>>2],ue+=Ct[(be[De]&3)<<4|be[De+1]>>4],ue+=Ct[(be[De+1]&15)<<2|be[De+2]>>6],ue+=Ct[be[De+2]&63];return be.length%3===2?ue=ue.substring(0,ue.length-1)+"=":be.length%3===1&&(ue=ue.substring(0,ue.length-2)+"=="),ue}function Wt(te,be){var ue="";if(te&&(ue=Je.call(te)),te&&(ue==="[object ArrayBuffer]"||te.buffer&&Je.call(te.buffer)==="[object ArrayBuffer]")){var De,Pe=Ve;te instanceof ArrayBuffer?(De=te,Pe+=_t):(De=te.buffer,ue==="[object Int8Array]"?Pe+=st:ue==="[object Uint8Array]"?Pe+=X:ue==="[object Uint8ClampedArray]"?Pe+=de:ue==="[object Int16Array]"?Pe+=we:ue==="[object Uint16Array]"?Pe+=he:ue==="[object Int32Array]"?Pe+=ae:ue==="[object Uint32Array]"?Pe+=Ee:ue==="[object Float32Array]"?Pe+=$e:ue==="[object Float64Array]"?Pe+=Be:be(new Error("Failed to get type for BinaryArray"))),be(Pe+fn(De))}else if(ue==="[object Blob]"){var Ae=new FileReader;Ae.onload=function(){var Xe=gt+te.type+"~"+fn(this.result);be(Ve+Mt+Xe)},Ae.readAsArrayBuffer(te)}else try{be(JSON.stringify(te))}catch(Xe){console.error("Couldn't convert value into a JSON string: ",te),be(null,Xe)}}function an(te){if(te.substring(0,ft)!==Ve)return JSON.parse(te);var be=te.substring(lt),ue=te.substring(ft,lt),De;if(ue===Mt&&Ie.test(be)){var Pe=be.match(Ie);De=Pe[1],be=be.substring(Pe[0].length)}var Ae=Xt(be);switch(ue){case _t:return Ae;case Mt:return c([Ae],{type:De});case st:return new Int8Array(Ae);case X:return new Uint8Array(Ae);case de:return new Uint8ClampedArray(Ae);case we:return new Int16Array(Ae);case he:return new Uint16Array(Ae);case ae:return new Int32Array(Ae);case Ee:return new Uint32Array(Ae);case $e:return new Float32Array(Ae);case Be:return new Float64Array(Ae);default:throw new Error("Unkown type: "+ue)}}var Sn={serialize:Wt,deserialize:an,stringToBuffer:Xt,bufferToString:fn};function Mn(te,be,ue,De){te.executeSql("CREATE TABLE IF NOT EXISTS "+be.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ue,De)}function ki(te){var be=this,ue={db:null};if(te)for(var De in te)ue[De]=typeof te[De]!="string"?te[De].toString():te[De];var Pe=new f(function(Ae,Xe){try{ue.db=openDatabase(ue.name,String(ue.version),ue.description,ue.size)}catch(pt){return Xe(pt)}ue.db.transaction(function(pt){Mn(pt,ue,function(){be._dbInfo=ue,Ae()},function(yt,vt){Xe(vt)})},Xe)});return ue.serializer=Sn,Pe}function di(te,be,ue,De,Pe,Ae){te.executeSql(ue,De,Pe,function(Xe,pt){pt.code===pt.SYNTAX_ERR?Xe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[be.storeName],function(yt,vt){vt.rows.length?Ae(yt,pt):Mn(yt,be,function(){yt.executeSql(ue,De,Pe,Ae)},Ae)},Ae):Ae(Xe,pt)},Ae)}function Li(te,be){var ue=this;te=p(te);var De=new f(function(Pe,Ae){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(pt){di(pt,Xe,"SELECT * FROM "+Xe.storeName+" WHERE key = ? LIMIT 1",[te],function(yt,vt){var It=vt.rows.length?vt.rows.item(0).value:null;It&&(It=Xe.serializer.deserialize(It)),Pe(It)},function(yt,vt){Ae(vt)})})}).catch(Ae)});return d(De,be),De}function As(te,be){var ue=this,De=new f(function(Pe,Ae){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(pt){di(pt,Xe,"SELECT * FROM "+Xe.storeName,[],function(yt,vt){for(var It=vt.rows,zt=It.length,Xn=0;Xn<zt;Xn++){var nn=It.item(Xn),gr=nn.value;if(gr&&(gr=Xe.serializer.deserialize(gr)),gr=te(gr,nn.key,Xn+1),gr!==void 0){Pe(gr);return}}Pe()},function(yt,vt){Ae(vt)})})}).catch(Ae)});return d(De,be),De}function Br(te,be,ue,De){var Pe=this;te=p(te);var Ae=new f(function(Xe,pt){Pe.ready().then(function(){be===void 0&&(be=null);var yt=be,vt=Pe._dbInfo;vt.serializer.serialize(be,function(It,zt){zt?pt(zt):vt.db.transaction(function(Xn){di(Xn,vt,"INSERT OR REPLACE INTO "+vt.storeName+" (key, value) VALUES (?, ?)",[te,It],function(){Xe(yt)},function(nn,gr){pt(gr)})},function(Xn){if(Xn.code===Xn.QUOTA_ERR){if(De>0){Xe(Br.apply(Pe,[te,yt,ue,De-1]));return}pt(Xn)}})})}).catch(pt)});return d(Ae,ue),Ae}function ls(te,be,ue){return Br.apply(this,[te,be,ue,1])}function ll(te,be){var ue=this;te=p(te);var De=new f(function(Pe,Ae){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(pt){di(pt,Xe,"DELETE FROM "+Xe.storeName+" WHERE key = ?",[te],function(){Pe()},function(yt,vt){Ae(vt)})})}).catch(Ae)});return d(De,be),De}function Fo(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){var Ae=be._dbInfo;Ae.db.transaction(function(Xe){di(Xe,Ae,"DELETE FROM "+Ae.storeName,[],function(){De()},function(pt,yt){Pe(yt)})})}).catch(Pe)});return d(ue,te),ue}function qa(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){var Ae=be._dbInfo;Ae.db.transaction(function(Xe){di(Xe,Ae,"SELECT COUNT(key) as c FROM "+Ae.storeName,[],function(pt,yt){var vt=yt.rows.item(0).c;De(vt)},function(pt,yt){Pe(yt)})})}).catch(Pe)});return d(ue,te),ue}function Nr(te,be){var ue=this,De=new f(function(Pe,Ae){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(pt){di(pt,Xe,"SELECT key FROM "+Xe.storeName+" WHERE id = ? LIMIT 1",[te+1],function(yt,vt){var It=vt.rows.length?vt.rows.item(0).key:null;Pe(It)},function(yt,vt){Ae(vt)})})}).catch(Ae)});return d(De,be),De}function Ri(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){var Ae=be._dbInfo;Ae.db.transaction(function(Xe){di(Xe,Ae,"SELECT key FROM "+Ae.storeName,[],function(pt,yt){for(var vt=[],It=0;It<yt.rows.length;It++)vt.push(yt.rows.item(It).key);De(vt)},function(pt,yt){Pe(yt)})})}).catch(Pe)});return d(ue,te),ue}function hi(te){return new f(function(be,ue){te.transaction(function(De){De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Pe,Ae){for(var Xe=[],pt=0;pt<Ae.rows.length;pt++)Xe.push(Ae.rows.item(pt).name);be({db:te,storeNames:Xe})},function(Pe,Ae){ue(Ae)})},function(De){ue(De)})})}function Vs(te,be){be=m.apply(this,arguments);var ue=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName);var De=this,Pe;return te.name?Pe=new f(function(Ae){var Xe;te.name===ue.name?Xe=De._dbInfo.db:Xe=openDatabase(te.name,"","",0),te.storeName?Ae({db:Xe,storeNames:[te.storeName]}):Ae(hi(Xe))}).then(function(Ae){return new f(function(Xe,pt){Ae.db.transaction(function(yt){function vt(nn){return new f(function(gr,si){yt.executeSql("DROP TABLE IF EXISTS "+nn,[],function(){gr()},function(Pr,Ko){si(Ko)})})}for(var It=[],zt=0,Xn=Ae.storeNames.length;zt<Xn;zt++)It.push(vt(Ae.storeNames[zt]));f.all(It).then(function(){Xe()}).catch(function(nn){pt(nn)})},function(yt){pt(yt)})})}):Pe=f.reject("Invalid arguments"),d(Pe,be),Pe}var ri={_driver:"webSQLStorage",_initStorage:ki,_support:Ke(),iterate:As,getItem:Li,setItem:ls,removeItem:ll,clear:Fo,length:qa,key:Nr,keys:Ri,dropInstance:Vs};function Ni(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ve(te,be){var ue=te.name+"/";return te.storeName!==be.storeName&&(ue+=te.storeName+"/"),ue}function ce(){var te="_localforage_support_test";try{return localStorage.setItem(te,!0),localStorage.removeItem(te),!1}catch{return!0}}function _e(){return!ce()||localStorage.length>0}function Ue(te){var be=this,ue={};if(te)for(var De in te)ue[De]=te[De];return ue.keyPrefix=ve(te,be._defaultConfig),_e()?(be._dbInfo=ue,ue.serializer=Sn,f.resolve()):f.reject()}function je(te){var be=this,ue=be.ready().then(function(){for(var De=be._dbInfo.keyPrefix,Pe=localStorage.length-1;Pe>=0;Pe--){var Ae=localStorage.key(Pe);Ae.indexOf(De)===0&&localStorage.removeItem(Ae)}});return d(ue,te),ue}function Dt(te,be){var ue=this;te=p(te);var De=ue.ready().then(function(){var Pe=ue._dbInfo,Ae=localStorage.getItem(Pe.keyPrefix+te);return Ae&&(Ae=Pe.serializer.deserialize(Ae)),Ae});return d(De,be),De}function Ht(te,be){var ue=this,De=ue.ready().then(function(){for(var Pe=ue._dbInfo,Ae=Pe.keyPrefix,Xe=Ae.length,pt=localStorage.length,yt=1,vt=0;vt<pt;vt++){var It=localStorage.key(vt);if(It.indexOf(Ae)===0){var zt=localStorage.getItem(It);if(zt&&(zt=Pe.serializer.deserialize(zt)),zt=te(zt,It.substring(Xe),yt++),zt!==void 0)return zt}}});return d(De,be),De}function xn(te,be){var ue=this,De=ue.ready().then(function(){var Pe=ue._dbInfo,Ae;try{Ae=localStorage.key(te)}catch{Ae=null}return Ae&&(Ae=Ae.substring(Pe.keyPrefix.length)),Ae});return d(De,be),De}function rr(te){var be=this,ue=be.ready().then(function(){for(var De=be._dbInfo,Pe=localStorage.length,Ae=[],Xe=0;Xe<Pe;Xe++){var pt=localStorage.key(Xe);pt.indexOf(De.keyPrefix)===0&&Ae.push(pt.substring(De.keyPrefix.length))}return Ae});return d(ue,te),ue}function mr(te){var be=this,ue=be.keys().then(function(De){return De.length});return d(ue,te),ue}function jn(te,be){var ue=this;te=p(te);var De=ue.ready().then(function(){var Pe=ue._dbInfo;localStorage.removeItem(Pe.keyPrefix+te)});return d(De,be),De}function Dr(te,be,ue){var De=this;te=p(te);var Pe=De.ready().then(function(){be===void 0&&(be=null);var Ae=be;return new f(function(Xe,pt){var yt=De._dbInfo;yt.serializer.serialize(be,function(vt,It){if(It)pt(It);else try{localStorage.setItem(yt.keyPrefix+te,vt),Xe(Ae)}catch(zt){(zt.name==="QuotaExceededError"||zt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&pt(zt),pt(zt)}})})});return d(Pe,ue),Pe}function ii(te,be){if(be=m.apply(this,arguments),te=typeof te!="function"&&te||{},!te.name){var ue=this.config();te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName}var De=this,Pe;return te.name?Pe=new f(function(Ae){te.storeName?Ae(ve(te,De._defaultConfig)):Ae(te.name+"/")}).then(function(Ae){for(var Xe=localStorage.length-1;Xe>=0;Xe--){var pt=localStorage.key(Xe);pt.indexOf(Ae)===0&&localStorage.removeItem(pt)}}):Pe=f.reject("Invalid arguments"),d(Pe,be),Pe}var dn={_driver:"localStorageWrapper",_initStorage:Ue,_support:Ni(),iterate:Ht,getItem:Dt,setItem:Dr,removeItem:jn,clear:je,length:mr,key:xn,keys:rr,dropInstance:ii},Ir=function(be,ue){return be===ue||typeof be=="number"&&typeof ue=="number"&&isNaN(be)&&isNaN(ue)},Jr=function(be,ue){for(var De=be.length,Pe=0;Pe<De;){if(Ir(be[Pe],ue))return!0;Pe++}return!1},ir=Array.isArray||function(te){return Object.prototype.toString.call(te)==="[object Array]"},un={},jr={},Pi={INDEXEDDB:ut,WEBSQL:ri,LOCALSTORAGE:dn},Ds=[Pi.INDEXEDDB._driver,Pi.WEBSQL._driver,Pi.LOCALSTORAGE._driver],_i=["dropInstance"],ns=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(_i),Yo={description:"",driver:Ds.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Wa(te,be){te[be]=function(){var ue=arguments;return te.ready().then(function(){return te[be].apply(te,ue)})}}function Mo(){for(var te=1;te<arguments.length;te++){var be=arguments[te];if(be)for(var ue in be)be.hasOwnProperty(ue)&&(ir(be[ue])?arguments[0][ue]=be[ue].slice():arguments[0][ue]=be[ue])}return arguments[0]}var Jl=function(){function te(be){o(this,te);for(var ue in Pi)if(Pi.hasOwnProperty(ue)){var De=Pi[ue],Pe=De._driver;this[ue]=Pe,un[Pe]||this.defineDriver(De)}this._defaultConfig=Mo({},Yo),this._config=Mo({},this._defaultConfig,be),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return te.prototype.config=function(ue){if((typeof ue>"u"?"undefined":s(ue))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var De in ue){if(De==="storeName"&&(ue[De]=ue[De].replace(/\W/g,"_")),De==="version"&&typeof ue[De]!="number")return new Error("Database version must be a number.");this._config[De]=ue[De]}return"driver"in ue&&ue.driver?this.setDriver(this._config.driver):!0}else return typeof ue=="string"?this._config[ue]:this._config},te.prototype.defineDriver=function(ue,De,Pe){var Ae=new f(function(Xe,pt){try{var yt=ue._driver,vt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ue._driver){pt(vt);return}for(var It=ns.concat("_initStorage"),zt=0,Xn=It.length;zt<Xn;zt++){var nn=It[zt],gr=!Jr(_i,nn);if((gr||ue[nn])&&typeof ue[nn]!="function"){pt(vt);return}}var si=function(){for(var sf=function(cl){return function(){var bu=new Error("Method "+cl+" is not implemented by the current driver"),lh=f.reject(bu);return d(lh,arguments[arguments.length-1]),lh}},uh=0,qy=_i.length;uh<qy;uh++){var Lp=_i[uh];ue[Lp]||(ue[Lp]=sf(Lp))}};si();var Pr=function(sf){un[yt]&&console.info("Redefining LocalForage driver: "+yt),un[yt]=ue,jr[yt]=sf,Xe()};"_support"in ue?ue._support&&typeof ue._support=="function"?ue._support().then(Pr,pt):Pr(!!ue._support):Pr(!0)}catch(Ko){pt(Ko)}});return h(Ae,De,Pe),Ae},te.prototype.driver=function(){return this._driver||null},te.prototype.getDriver=function(ue,De,Pe){var Ae=un[ue]?f.resolve(un[ue]):f.reject(new Error("Driver not found."));return h(Ae,De,Pe),Ae},te.prototype.getSerializer=function(ue){var De=f.resolve(Sn);return h(De,ue),De},te.prototype.ready=function(ue){var De=this,Pe=De._driverSet.then(function(){return De._ready===null&&(De._ready=De._initDriver()),De._ready});return h(Pe,ue,ue),Pe},te.prototype.setDriver=function(ue,De,Pe){var Ae=this;ir(ue)||(ue=[ue]);var Xe=this._getSupportedDrivers(ue);function pt(){Ae._config.driver=Ae.driver()}function yt(zt){return Ae._extend(zt),pt(),Ae._ready=Ae._initStorage(Ae._config),Ae._ready}function vt(zt){return function(){var Xn=0;function nn(){for(;Xn<zt.length;){var gr=zt[Xn];return Xn++,Ae._dbInfo=null,Ae._ready=null,Ae.getDriver(gr).then(yt).catch(nn)}pt();var si=new Error("No available storage method found.");return Ae._driverSet=f.reject(si),Ae._driverSet}return nn()}}var It=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=It.then(function(){var zt=Xe[0];return Ae._dbInfo=null,Ae._ready=null,Ae.getDriver(zt).then(function(Xn){Ae._driver=Xn._driver,pt(),Ae._wrapLibraryMethodsWithReady(),Ae._initDriver=vt(Xe)})}).catch(function(){pt();var zt=new Error("No available storage method found.");return Ae._driverSet=f.reject(zt),Ae._driverSet}),h(this._driverSet,De,Pe),this._driverSet},te.prototype.supports=function(ue){return!!jr[ue]},te.prototype._extend=function(ue){Mo(this,ue)},te.prototype._getSupportedDrivers=function(ue){for(var De=[],Pe=0,Ae=ue.length;Pe<Ae;Pe++){var Xe=ue[Pe];this.supports(Xe)&&De.push(Xe)}return De},te.prototype._wrapLibraryMethodsWithReady=function(){for(var ue=0,De=ns.length;ue<De;ue++)Wa(this,ns[ue])},te.prototype.createInstance=function(ue){return new te(ue)},te}(),td=new Jl;r.exports=td},{3:3}]},{},[4])(4)})})(DGe);var HCn=DGe.exports;const O2=c0(HCn);var Xa=[];for(var uW=0;uW<256;++uW)Xa.push((uW+256).toString(16).slice(1));function qCn(e,t=0){return(Xa[e[t+0]]+Xa[e[t+1]]+Xa[e[t+2]]+Xa[e[t+3]]+"-"+Xa[e[t+4]]+Xa[e[t+5]]+"-"+Xa[e[t+6]]+Xa[e[t+7]]+"-"+Xa[e[t+8]]+Xa[e[t+9]]+"-"+Xa[e[t+10]]+Xa[e[t+11]]+Xa[e[t+12]]+Xa[e[t+13]]+Xa[e[t+14]]+Xa[e[t+15]]).toLowerCase()}var R6,WCn=new Uint8Array(16);function GCn(){if(!R6&&(R6=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!R6))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R6(WCn)}var YCn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const nCe={randomUUID:YCn};function Z$(e,t,n){if(nCe.randomUUID&&!e)return nCe.randomUUID();e=e||{};var r=e.random||(e.rng||GCn)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,qCn(r)}class IGe{constructor(t){ml(this,"engine");ml(this,"connected",!1);ml(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function eL(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function iI(e){return e.participantId!==void 0}class sm extends IGe{constructor(){super("firebase");ml(this,"RECAPTCHAV3TOKEN","6LdQ8qUqAAAAAPE14fuWshHdzOerFOSMhzEdA1Wp");ml(this,"firestore");ml(this,"collectionPrefix","prod-");ml(this,"studyCollection");ml(this,"storage");ml(this,"studyId","");ml(this,"localForage",O2.createInstance({name:"currentParticipantId"}));ml(this,"participantData",null);ml(this,"userManagementData",{});const n=sj.parse(`
{
  apiKey: "AIzaSyBB3ZVfd5sNerH0LLPbe8Pn-NXtLOO4-8M",
  authDomain: "vis-decode-operator-1eb8d.firebaseapp.com",
  projectId: "vis-decode-operator-1eb8d",
  storageBucket: "vis-decode-operator-1eb8d.firebasestorage.app",
  messagingSenderId: "967262141033",
  appId: "1:967262141033:web:b1ed6ad992b441194440f8"
}
`),r=GHe(n);this.firestore=qSn(r,{}),this.storage=oSe();try{jCn(r,{provider:new lfe(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await WSn(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=W$();if(!i.currentUser&&(await xxn(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=uc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await eL(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(iI(a))return this.participantData=a,a;const l=await eL(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=ys(this.studyCollection,"configHash"),r=await D6(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=ys(this.studyCollection,"configHash");await Pu(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=cf(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=Z$(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){const i=s=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,s.data)};n.addEventListener("dataavailable",i),n.requestData(),setTimeout(()=>{n.removeEventListener("dataavailable",i)},0)}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=ys(this.studyCollection,"sequenceAssignment");await Pu(i,{});const s=uc(i,"sequenceAssignment"),o=ys(s,this.currentParticipantId),a=sW(s,VSe("rejected","==",!0),VSe("claimed","==",!1)),u=await v2(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await Pu(m.ref,{claimed:!0}),await Pu(o,{participantId:this.currentParticipantId,timestamp:g,rejected:!1,claimed:!1,completed:null}))}else r.dataCollectionEnabled&&await Pu(o,{participantId:this.currentParticipantId,timestamp:YSe(),rejected:!1,claimed:!1,completed:null});const l=sW(s,HSe("timestamp","asc")),d=(await v2(l)).docs.map(m=>m.data()).filter(m=>!m.rejected).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=cf(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await nI(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");iI(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=oSe(),s=await E6(cf(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return iI(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Z$();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=ys(this.studyCollection,"sequenceAssignment"),i=uc(r,"sequenceAssignment"),s=ys(i,this.currentParticipantId);return await GSe(s,{completed:YSe()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=uc(this.firestore,"user-management"),i=await v2(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await Pu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Pu(ys(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Pu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Pu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Pu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=cf(this.storage,`${this.collectionPrefix}${n}/participants`),i=await nI(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");iI(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=uc(this.firestore,`${this.collectionPrefix}${n}`),o=cf(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!iI(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=ys(s,"sequenceAssignment"),l=uc(u,"sequenceAssignment"),c=ys(l,r);await GSe(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=ys(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Pu(s,{[r]:i},{merge:!0})}async getModes(n){const r=ys(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await D6(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Pu(r,s),s}async getParticipantsStatusCounts(n){const r=uc(this.firestore,`${this.collectionPrefix}${n}`),i=ys(r,"sequenceAssignment"),s=uc(i,"sequenceAssignment"),o=sW(s,HSe("timestamp","asc")),u=(await v2(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=ys(this.firestore,"metadata","collections"),i=await D6(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=ys(this.firestore,"metadata","collections");await Pu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=ys(this.firestore,"metadata","collections");return await Pu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=ys(this.firestore,"metadata","collections"),i=await D6(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Pu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=cf(this.storage,n),s=(await nI(r)).items.map(o=>sSe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=cf(this.storage,n),o=(await nI(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=cf(this.storage,n),s=cf(this.storage,r),o=await E6(i),u=await(await fetch(o)).blob();await _6(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=uc(this.firestore,n),s=ys(i,"sequenceAssignment"),o=uc(s,"sequenceAssignment"),a=uc(this.firestore,r),u=ys(a,"sequenceAssignment");await Pu(u,{});const l=uc(u,"sequenceAssignment"),c=await v2(o),f=KSe(this.firestore);c.docs.forEach(d=>{const h=ys(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=uc(this.firestore,n),i=ys(r,"sequenceAssignment"),s=uc(i,"sequenceAssignment"),o=await v2(s),a=KSe(this.firestore);o.forEach(u=>{const l=ys(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=cf(this.storage,n);return(await nI(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=cf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await E6(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await E6(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=cf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await _6(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await _6(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await _6(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=cf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await sSe(i)}}const kGe=N.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),GP=()=>N.useContext(kGe);function KCn({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=N.useState(t),[o,a]=N.useState(!1),{storageEngine:u}=Po(),l=async()=>{const h=W$();try{await Axn(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;N.useEffect(()=>{s(t);let h;if(u instanceof sm)try{h=W$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof sm){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=Txn(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=N.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return E.jsx(kGe.Provider,{value:d,children:i.determiningStatus?E.jsx(jf,{visible:!0}):e})}function XCn({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?E.jsx(_n.Td,{children:E.jsx(Ys,{miw:100,children:e.timedOut?E.jsx(tt,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>E.jsxs(Fe,{children:[E.jsxs(tt,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?E.jsx(tt,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):E.jsx(tt,{span:!0,children:n})]},`cell-${t}`))})}):E.jsx(_n.Td,{children:"N/A"})}function rCe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=y5e(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?E.jsxs(_n.Td,{children:[t.toFixed(1)," ","s",n&&E.jsxs(E.Fragment,{children:[E.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):E.jsx(_n.Td,{children:"N/A"})}function QCn(e){const{metaData:t}=e;return E.jsx(_n.Td,{children:E.jsx(Mee,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:E.jsxs(Ys,{gap:"xs",children:[E.jsxs(Fe,{children:["IP:"," ",t.ip]}),E.jsxs(Fe,{children:["Language:"," ",t.language]}),E.jsxs(Fe,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),E.jsxs(Fe,{children:["User Agent:"," ",t.userAgent]})]})})})}function JCn({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=Po(),{studyId:i}=Vm(),{user:s}=GP(),o=async(_,w)=>{if(r&&i)if(s.isAdmin){const S=w===""?"Rejected by admin":w;await r.rejectParticipant(i,_,S),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=N.useState([]),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(""),m=async()=>{c(!0),d(!1);const _=a.map(async w=>await o(w,h));await Promise.all(_),u([]),await n(),c(!1)};function g(_){_==="all"?a.length===e.length?u([]):u(e.map(w=>w.participantId)):a.includes(_)?u(a.filter(w=>w!==_)):u([...a,_])}const y=S3e(t.sequence),v=[E.jsx(_n.Th,{children:E.jsx(Jt,{justify:"center",children:E.jsx(Cc,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),E.jsx(_n.Th,{children:"ID"},"ID"),E.jsx(_n.Th,{children:"Status"},"status"),E.jsx(_n.Th,{children:"Tags"},"tags"),E.jsx(_n.Th,{children:"Meta"},"meta"),...y.flatMap(_=>[E.jsx(_n.Th,{children:_.componentName},`header-${_.componentName}-${_.timesSeenInBlock}`),E.jsxs(_n.Th,{children:[E.jsx("span",{style:{whiteSpace:"nowrap"},children:_.componentName})," ","Duration (clean)"]},`header-${_.componentName}-${_.timesSeenInBlock}-duration`)]),E.jsx(_n.Th,{children:"Total Duration (clean)"},"total-duration")],b=e.map(_=>E.jsxs(_n.Tr,{children:[E.jsx(_n.Td,{children:E.jsx(Jt,{justify:"center",children:E.jsx(Cc,{mb:-4,checked:a.includes(_.participantId),onChange:()=>g(_.participantId)})})}),E.jsx(_n.Td,{style:{whiteSpace:"nowrap"},children:_.participantId}),E.jsx(_n.Td,{children:E.jsxs(Jt,{direction:"column",miw:100,children:[E.jsxs(Jt,{direction:"row",align:"center",children:[_.rejected?E.jsx(xs,{label:"Rejected",children:E.jsx(Jee,{size:16,color:"red",style:{marginBottom:-3}})}):_.completed?E.jsx(xs,{label:"Completed",children:E.jsx(Eke,{size:16,color:"teal",style:{marginBottom:-3}})}):E.jsx(xs,{label:"In Progress",children:E.jsx(Ske,{size:16,color:"orange",style:{marginBottom:-3}})}),!_.completed&&E.jsxs(tt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(_.answers).filter(([w,S])=>S.endTime!==-1&&S.endTime!==void 0).length/(hp(_.sequence).length-1)*100).toFixed(2),"%"]})]}),_.rejected&&E.jsx(tt,{mt:5,fz:10,children:_.rejected.reason})]})}),E.jsx(_n.Td,{children:E.jsx(Jt,{direction:"column",miw:100,children:(_.participantTags||[]).map(w=>E.jsxs(tt,{fz:10,children:["-"," ",w]},`tag-${w}`))})}),_.metadata?E.jsx(QCn,{metaData:_.metadata}):E.jsx(_n.Td,{children:"N/A"}),y.map(w=>{const S=Ste(_.sequence,w.orderPath),T=S&&Object.entries(_.answers).sort((A,k)=>{const I=parseInt(A[0].slice(A[0].lastIndexOf("_")+1),10),R=parseInt(k[0].slice(k[0].lastIndexOf("_")+1),10);return I-R}).filter(([A])=>{const k=A.slice(0,A.lastIndexOf("_")),I=parseInt(A.slice(A.lastIndexOf("_")+1),10);return k===w.componentName&&I<=S[0].lastIndex&&I>=S[0].firstIndex});return T!==null&&T.length>=w.timesSeenInBlock+1&&T[w.timesSeenInBlock][1].endTime!==-1?E.jsxs(yi.Fragment,{children:[E.jsx(XCn,{cellData:T[w.timesSeenInBlock][1]}),E.jsx(rCe,{cellData:T[w.timesSeenInBlock][1]})]},`cellgroup-${_.participantId}-${w.componentName}-${w.timesSeenInBlock}`):E.jsxs(yi.Fragment,{children:[E.jsx(_n.Td,{children:"N/A"}),E.jsx(_n.Td,{children:"N/A"})]},`cellgroup-${_.participantId}-${w.componentName}-${w.timesSeenInBlock}`)}),E.jsx(rCe,{cellData:{startTime:Math.min(...Object.values(_.answers).filter(w=>w.endTime!==-1&&w.endTime!==void 0).map(w=>w.startTime)),endTime:Math.max(...Object.values(_.answers).filter(w=>w.endTime!==-1&&w.endTime!==void 0).map(w=>w.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(_.answers).flatMap(w=>w.windowEvents),timedOut:!1}},`cell-${_.participantId}-total-duration`)]},_.participantId));return e.length>0?E.jsxs(E.Fragment,{children:[E.jsx(jf,{visible:l,overlayProps:{blur:2}}),E.jsxs(Jt,{justify:"space-between",mb:8,p:8,children:[E.jsx($i,{children:E.jsx(FT,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(_=>_.participantId))],searchable:!0,value:null,leftSection:E.jsx(_pt,{size:14}),onChange:_=>_&&g(_)})}),E.jsxs($i,{children:[E.jsx(LHe,{visibleParticipants:e,studyId:i||""}),E.jsxs(bn,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),E.jsx(Jt,{direction:"column",style:{width:"100%",overflow:"auto"},children:E.jsxs(_n,{striped:!0,withTableBorder:!0,children:[E.jsx(_n.Thead,{children:E.jsx(_n.Tr,{children:v})}),E.jsx(_n.Tbody,{children:b})]})}),E.jsxs(ho,{opened:f,onClose:()=>d(!1),title:E.jsxs(tt,{children:["Reject Participants (",a.length,")"]}),children:[E.jsx(xg,{label:"Please enter the reason for rejection.",onChange:_=>p(_.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),E.jsx(bn,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):E.jsxs(E.Fragment,{children:[E.jsx(Rf,{h:"xl"}),E.jsx(Jt,{justify:"center",align:"center",children:E.jsx(tt,{children:"No data available"})})]})}function ZCn({studyId:e,refresh:t}){const[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(!1),[c,f]=N.useState(""),[d,h]=N.useState([]),[p,m]=N.useState(""),[g,y]=N.useState(""),[v,b]=N.useState(!1),[_,w]=N.useState(!1),{storageEngine:S}=Po(),T=S,A=N.useCallback(async()=>{w(!0);const L=await T.getSnapshots(e);h(L),w(!1)},[T,e]);N.useEffect(()=>{A()},[A]);const k=async(L,...U)=>{b(!0);const W=await L(...U);W.status==="SUCCESS"?(A(),b(!1),await t(),W.notifications&&W.notifications.forEach(B=>{l3(B)})):(b(!1),l3({title:W.error.title,message:W.error.message,color:"red"}))},I=async()=>{await k(T.createSnapshot.bind(T),e,!1)},R=async()=>{m(""),r(!1),await k(T.createSnapshot.bind(T),e,!0)},F=async()=>{a(!1),await k(T.renameSnapshot.bind(T),c,g)},O=async L=>{await k(T.restoreSnapshot.bind(T),e,L)},$=async()=>{m(""),s(!1),await k(T.removeSnapshotOrLive.bind(T),c,!0)},V=async()=>{m(""),l(!1),await k(T.removeSnapshotOrLive.bind(T),e,!0)},j=()=>Cme({title:"Create a Snapshot",children:E.jsx(tt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>I()}),G=L=>Cme({title:"Restore Snapshot",children:E.jsx(tt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>O(L)}),Y=L=>{const U=/-snapshot-(.+)$/,W=L.match(U);return W&&W[1]?W[1].replace("T"," "):null},J=async L=>{const U=L.slice(L.indexOf("-")+1);return await T.getAllParticipantsDataByStudy(U)};return E.jsxs(E.Fragment,{children:[E.jsx(jf,{visible:v}),E.jsxs(Jt,{justify:"space-between",align:"center",children:[E.jsxs(Fe,{style:{width:"70%"},children:[E.jsx(lo,{order:5,children:"Create a Snapshot"}),E.jsxs(tt,{children:["This will create a snapshot of the live"," ",E.jsx(tt,{span:!0,fw:700,children:e})," ","database. It will"," ",E.jsx(tt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),E.jsx(xs,{label:"Create a snapshot",children:E.jsx(bn,{onClick:j,children:"Snapshot"})})]}),E.jsx(Rf,{h:"lg"}),E.jsxs(Jt,{justify:"space-between",align:"center",children:[E.jsxs(Fe,{style:{width:"70%"},children:[E.jsx(lo,{order:5,children:"Archive Data"}),E.jsxs(tt,{children:["This will create a snapshot of the live"," ",E.jsx(tt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),E.jsx(xs,{label:"Snapshot and Delete Data",children:E.jsx(bn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),E.jsx(Rf,{h:"lg"}),E.jsxs(Jt,{justify:"space-between",align:"center",children:[E.jsxs(Fe,{style:{width:"70%"},children:[E.jsx(lo,{order:5,children:"Delete Data"}),E.jsxs(tt,{children:["This will delete the live"," ",E.jsx(tt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),E.jsx(xs,{label:"Delete Data",children:E.jsx(bn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),E.jsx(Rf,{h:"xl"}),E.jsxs(Jt,{direction:"column",children:[E.jsx(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:E.jsx(lo,{order:5,children:"Snapshots"})}),E.jsxs(Fe,{style:{position:"relative"},children:[E.jsx(jf,{visible:_}),d.length>0?E.jsxs(_n,{children:[E.jsx(_n.Thead,{children:E.jsxs(_n.Tr,{children:[E.jsx(_n.Th,{children:"Snapshot Name"}),E.jsx(_n.Th,{children:"Date Created"}),E.jsx(_n.Th,{children:"Actions"})]})}),E.jsx(_n.Tbody,{children:d.map(L=>E.jsxs(_n.Tr,{children:[E.jsx(_n.Td,{children:L.alternateName}),E.jsx(_n.Td,{children:Y(L.originalName)}),E.jsx(_n.Td,{children:E.jsxs(Jt,{children:[E.jsx(xs,{label:"Rename",children:E.jsx(bn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(L.originalName)},children:E.jsx(ypt,{})})}),E.jsx(xs,{label:"Restore Snapshot",children:E.jsx(bn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{G(L.originalName)},children:E.jsx(xpt,{})})}),E.jsx(xs,{label:"Delete Snapshot",children:E.jsx(bn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(L.originalName)},children:E.jsx(Ake,{})})}),E.jsx(LHe,{visibleParticipants:()=>J(L.originalName),studyId:e,gap:"10px",fileName:L.alternateName})]})})]},L.originalName))})]}):E.jsx(tt,{children:"No snapshots."})]})]}),E.jsxs(ho,{opened:n,onClose:()=>{r(!1),m("")},title:E.jsx(tt,{children:"Archive Data"}),children:[E.jsx(tt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),E.jsx(xg,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:L=>m(L.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),E.jsx(bn,{color:"red",onClick:R,disabled:p!==e,children:"Archive"})]})]}),E.jsxs(ho,{opened:i,onClose:()=>{s(!1),m("")},title:E.jsx(tt,{children:"Delete Snapshot"}),children:[E.jsxs(tt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",E.jsx(tt,{span:!0,fw:700,children:"irreversible"}),"."]}),E.jsx(xg,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:L=>m(L.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),E.jsx(bn,{color:"red",onClick:$,disabled:p!==e,children:"Delete"})]})]}),E.jsxs(ho,{opened:o,onClose:()=>{a(!1),y("")},title:E.jsx(tt,{children:"Rename Snapshot"}),children:[E.jsx(xg,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:L=>y(L.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),E.jsx(bn,{color:"green",onClick:F,disabled:!g||g.length===0,children:"Rename"})]})]}),E.jsxs(ho,{opened:u,onClose:()=>{l(!1),m("")},title:E.jsx(tt,{children:"Delete Live Data"}),children:[E.jsxs(tt,{mb:"sm",children:["This will permanently delete the live"," ",E.jsx(tt,{span:!0,fw:700,children:e})," ","data. This action is"," ",E.jsx(tt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),E.jsx(xg,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:L=>m(L.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),E.jsx(bn,{color:"red",onClick:V,disabled:p!==e,children:"Delete"})]})]})]})}function eTn({studyId:e}){const{storageEngine:t}=Po(),[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(!1);N.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&E.jsxs(Ys,{children:[E.jsx(yS,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),E.jsx(yS,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),E.jsx(yS,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function tTn({studyId:e,refresh:t}){const{storageEngine:n}=Po();return E.jsx(Bf,{children:E.jsxs(hc,{multiple:!0,variant:"contained",children:[E.jsxs(hc.Item,{value:"ReVISit Modes",children:[E.jsx(hc.Control,{children:E.jsx(lo,{order:5,children:"ReVISit Modes"})}),E.jsx(hc.Panel,{children:E.jsx(eTn,{studyId:e})})]},"modes"),E.jsxs(hc.Item,{value:"Data Management",children:[E.jsx(hc.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:E.jsx(lo,{order:5,children:"Data Management"})}),E.jsx(hc.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&E.jsx(ZCn,{studyId:e,refresh:t})})]},"dataManagement")]})})}function nTn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=oZ(!0),[o,a]=kf(),u=N.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=N.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=N.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,y])=>y.endTime!==-1).map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return E.jsxs(ST,{p:"lg",withBorder:!0,ref:o,children:[E.jsxs(Jt,{direction:"row",justify:"space-between",onClick:s,children:[E.jsxs(Jt,{align:"center",children:[e.type==="metadata"&&E.jsx(opt,{size:20}),e.type==="numerical"&&E.jsx(mpt,{size:20}),(e.type==="shortText"||e.type==="longText")&&E.jsx(rpt,{size:20}),e.type==="likert"&&E.jsx(lpt,{size:20}),e.type==="dropdown"&&E.jsx(Ept,{size:20}),e.type==="slider"&&E.jsx(Qht,{size:20}),e.type==="radio"&&E.jsx(bpt,{size:20}),e.type==="checkbox"&&E.jsx(Spt,{size:20}),e.type==="iframe"&&E.jsx(fpt,{size:20}),E.jsx(lo,{order:5,ml:4,children:e.id})]}),E.jsx(spt,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),E.jsxs(wL,{in:i,mah:400,children:[E.jsx(Fe,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:E.jsx(RT,{})}),E.jsxs(Pee,{cols:2,h:360,children:[E.jsx(Xg,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?E.jsx(VEe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):E.jsxs(Jt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&E.jsx(lk,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&E.jsxs(E.Fragment,{children:[E.jsx(tt,{fw:700,children:"Response Values: "}),u.map((f,d)=>E.jsx(Jt,{align:"center",gap:"xs",children:E.jsx(tt,{children:f[e.id]})},d))]})]})}),E.jsx(Xg,{mih:200,children:e.type==="metadata"?E.jsx(VEe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):E.jsxs(E.Fragment,{children:[E.jsx(tt,{fw:700,children:"Response Specification: "}),E.jsx(lk,{block:!0,children:JSON.stringify(e,null,2)}),E.jsx("br",{}),l&&E.jsxs(E.Fragment,{children:[E.jsx(tt,{fw:700,children:"Correct Answer: "}),E.jsx(lk,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function rTn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&BVe(t.components[n],t),i=N.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?E.jsx(Jt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>E.jsx(nTn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):E.jsx(Jt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:E.jsx(tt,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function iTn({studyConfig:e,visibleParticipants:t}){const n=N.useMemo(()=>{let i=Og(e.sequence);return i=Cte(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=Vm();return E.jsx(ST,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?E.jsx(Jt,{justify:"center",align:"center",pt:"lg",pb:"md",children:E.jsx(tt,{children:"No data available."})}):E.jsxs(Jt,{direction:"row",children:[E.jsx(Fe,{w:340,children:E.jsx(R$,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),E.jsx(RT,{orientation:"vertical",mx:"md"}),E.jsx(rTn,{participantData:t,studyConfig:e,trialId:r})]})})}function sTn({xScale:e,answer:t,height:n,labelHeight:r=0}){return E.jsx("g",{children:E.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const N6=3,b2=25,P6=25,O6=20,iCe=1;function oTn({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=N.useState(!1),[l,{width:c}]=kf();return E.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[E.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+iCe,width:e(t.endTime)-e(t.startTime)-iCe*2,y:r-b2,height:b2}),E.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-N6,width:c+N6*2,y:r-b2-P6-o,height:O6,fill:"whitesmoke"}),E.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-N6,x2:c+e(t.startTime)+N6,y1:r-b2-P6+O6-o,y2:r-b2-P6+O6-o}),E.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-b2-P6-o,height:O6,children:E.jsx(ma,{style:{width:"fit-content"},children:E.jsx(tt,{lineClamp:1,ref:l,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}const sCe=25,aTn=8,lW={left:20,top:0,right:20,bottom:0};function uTn({participantData:e,width:t,height:n,selectedTask:r,studyId:i}){const s=Sp(),o=N.useCallback(f=>{const d=f.split("_"),h=+d[d.length-1];s(`/${i}/${jh(h)}?participantId=${e.participantId}`)},[s,e.participantId,i]),a=N.useMemo(()=>{const f=Object.values(e.answers||{}).filter(p=>p.startTime).map(p=>[p.startTime,p.endTime]).flat(),d=NR(f);return ja([lW.left,t-lW.left-lW.right]).domain(d).clamp(!0)},[e,t]),u=N.useMemo(()=>{let f=0;const d=Object.entries(e.answers||{}).filter(h=>!!h[1].startTime).sort((h,p)=>h[1].startTime-p[1].startTime);return d.map((h,p)=>{const[m,g]=h,y=p>0?d[p-f-1]:null;return y&&y[0].length*aTn+a(y[1].startTime)>a(g.startTime)?f+=1:f=0,{line:E.jsx(sTn,{labelHeight:f*sCe,answer:g,height:n,xScale:a},m),label:E.jsx(oTn,{labelHeight:f*sCe,isSelected:r===m,setSelectedTask:o,answer:g,height:n,name:m,xScale:a},m)}})},[n,e.answers,r,o,a]),l=N.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const f=Object.values(e.answers).filter(d=>d.startTime).sort((d,h)=>d.startTime-h.startTime);return new Date(f[f.length-1].endTime-(f[0]?f[0].startTime:0)).getTime()},[e]),c=N.useMemo(()=>Object.entries(e.answers||{}).sort((d,h)=>d[1].startTime-h[1].startTime).map(d=>{const[h,p]=d,m=[];let g=[-1,-1],y="visible";if(p.windowEvents)for(let v=0;v<p.windowEvents.length;v+=1)p.windowEvents[v][1]==="visibility"&&(p.windowEvents[v][2]==="hidden"&&y==="visible"?(g=[p.windowEvents[v][0],-1],y="hidden"):p.windowEvents[v][2]==="visible"&&y==="hidden"&&(g[1]=p.windowEvents[v][0],m.push(g),g=[-1,-1],y="visible"));return m.map((v,b)=>E.jsx(xs,{withinPortal:!0,label:"Browsed away",children:E.jsx("rect",{x:a(v[0]),width:a(v[1])-a(v[0]),y:n-5,height:10})},b))}),[n,e,a]);return E.jsx(ma,{children:E.jsxs(Ys,{gap:25,style:{width:"100%"},children:[E.jsx(RT,{size:"md"}),E.jsxs($i,{justify:"center",children:[E.jsx(_b,{href:"",onClick:()=>s(`/${i}/${jh(0)}?participantId=${e.participantId}`),children:e.participantId}),e.completed?null:E.jsx(tt,{size:"xl",c:"red",children:"Not completed"}),E.jsx(tt,{size:"xl",children:`${_Q(l)}`})]}),e.completed?E.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[u.map(f=>f.line),u.map(f=>f.label),c]}):null]})})}function lTn({visibleParticipants:e}){const{studyId:t}=Vm(),[n,{width:r}]=kf();return E.jsx(Ys,{ref:n,style:{width:"100%"},children:e.map(i=>E.jsx(uTn,{studyId:t||"",height:200,participantData:i,width:r},i.participantId))})}function cTn({globalConfig:e}){const{studyId:t}=Vm(),[n,r]=N.useState([]),[i,s]=N.useState(void 0),[o,a]=N.useState(!1),{storageEngine:u}=Po(),l=Sp(),{tab:c}=Vm(),{user:f}=GP();N.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const b=async _=>{if(_.data.type==="revisitWidget/CONFIG"&&u){const w=await rce(_.data.payload);s(w)}};return window.addEventListener("message",b),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",b)}}return ice(t,e).then(b=>{b&&s(b)}),()=>{}},[t,e,u]);const d=N.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const b=await u.getAllParticipantsData();r(b),a(!1)}},[u,t,i]);N.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=N.useState([]),[m,g,y]=N.useMemo(()=>{const b=n.filter(S=>!S.rejected&&S.completed),_=n.filter(S=>!S.rejected&&!S.completed),w=n.filter(S=>S.rejected);return p([...b,..._,...w]),[b,_,w]},[n]),v=N.useCallback(b=>{const _=[];b.includes("completed")&&_.push(...m),b.includes("inprogress")&&_.push(...g),b.includes("rejected")&&_.push(...y),p(_)},[m,g,y]);return E.jsxs(E.Fragment,{children:[E.jsx(GF,{studyIds:e.configsList}),E.jsx(Yi.Main,{children:E.jsxs(Bf,{fluid:!0,style:{height:"100%",position:"relative"},children:[E.jsx(jf,{visible:o}),E.jsxs(Jt,{direction:"row",align:"center",justify:"space-between",children:[E.jsx(lo,{order:5,children:t}),E.jsxs(Jt,{direction:"row",align:"center",children:[E.jsx(tt,{mt:-2,size:"sm",children:"Participants: "}),E.jsx(Cc.Group,{defaultValue:["completed","inprogress","rejected"],onChange:v,mb:"xs",mt:8,ml:"xs",children:E.jsxs($i,{children:[E.jsx(Cc,{value:"completed",label:"Completed"}),E.jsx(Cc,{value:"inprogress",label:"In Progress"}),E.jsx(Cc,{value:"rejected",label:"Rejected"})]})})]})]}),E.jsx(Rf,{h:"xs"}),E.jsxs(qr,{variant:"outline",value:c,onChange:b=>l(`/analysis/stats/${t}/${b}`),style:{height:"100%"},children:[E.jsxs(qr.List,{children:[E.jsx(qr.Tab,{value:"table",leftSection:E.jsx(Cpt,{size:16}),children:"Table View"}),E.jsx(qr.Tab,{value:"stats",leftSection:E.jsx(ipt,{size:16}),children:"Trial Stats"}),E.jsx(qr.Tab,{value:"replay",leftSection:E.jsx(vpt,{size:16}),children:"Participant Replay"}),E.jsx(qr.Tab,{value:"manage",leftSection:E.jsx(Cke,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),E.jsx(qr.Panel,{value:"table",pt:"xs",children:i&&E.jsx(JCn,{visibleParticipants:h,studyConfig:i,refresh:d})}),E.jsx(qr.Panel,{value:"stats",pt:"xs",children:i&&E.jsx(iTn,{studyConfig:i,visibleParticipants:h})}),E.jsx(qr.Panel,{value:"replay",pt:"xs",children:E.jsx(lTn,{visibleParticipants:h})}),E.jsx(qr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?E.jsx(tTn,{studyId:t,refresh:d}):E.jsx(Bf,{mt:20,children:E.jsx(Pg,{title:"Unauthorized Access",variant:"light",color:"red",icon:E.jsx(Xee,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function oCe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=GP(),{storageEngine:o}=Po(),[a,u]=N.useState(!1),l=Vm();return N.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?E.jsx(jf,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?E.jsx(Yee,{to:"/login"}):E.jsx(E.Fragment,{children:e})}async function RGe(e,t){if(e instanceof sm){t(!0);const n=new mg,r=W$();try{await Yxn(r,n,Aqe)}catch(i){l3({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function fTn(){const{user:e}=GP(),[t,n]=N.useState(!1),{storageEngine:r}=Po();return N.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&l3({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?E.jsx(Yee,{to:"/"}):E.jsx(Bf,{children:E.jsx(kT,{padding:"lg",children:E.jsxs(Jt,{align:"center",direction:"column",justify:"center",children:[E.jsx(Sb,{maw:200,mt:50,mb:100,src:`${Ll}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),E.jsxs(E.Fragment,{children:[E.jsx(tt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),E.jsx(bn,{onClick:()=>RGe(r,n),leftSection:E.jsx(Tpt,{}),variant:"filled",children:"Sign In With Google"})]}),E.jsx(jf,{visible:t})]})})})}function dTn(){const{user:e,triggerAuth:t}=GP(),{storageEngine:n}=Po(),[r,i]=N.useState(!1),[s,o]=N.useState([]),[a,u]=N.useState(!1),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(!1),[y,v]=N.useState(""),[b,_]=N.useState(null),w=O3e({initialValues:{email:""},validate:{email:O_t("Invalid email")}});N.useEffect(()=>{(async()=>{if(u(!0),n instanceof sm){const O=await(n==null?void 0:n.getUserManagementData("authentication"));i((O==null?void 0:O.isEnabled)||!1);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(V=>V.email))}else i(!1);u(!1)})()},[n]);const S=async()=>{if(u(!0),n instanceof sm){const F=await RGe(n,u);F&&F.email?(_({email:F.email,uid:F.uid}),p(!0)):g(!0)}u(!1)},T=async F=>{u(!0),n instanceof sm&&F&&(await n.changeAuth(!0),await n.addAdminUser(F),o([F.email]),i(!0),t()),p(!1),u(!1)},A=async()=>{if(u(!0),n instanceof sm){await n.addAdminUser({email:w.values.email,uid:null});const F=await n.getUserManagementData("adminUsers");o((F==null?void 0:F.adminUsersList.map(O=>O.email))||[])}u(!1),c(!1),w.setValues({email:""})},k=F=>{d(!0),v(F)},I=async()=>{if(u(!0),n instanceof sm){await n.removeAdminUser(y);const F=await n.getUserManagementData("adminUsers");o((F==null?void 0:F.adminUsersList.map(O=>O.email))||[])}d(!1),u(!1)},R=N.useMemo(()=>n instanceof sm,[n]);return E.jsxs(E.Fragment,{children:[E.jsx(Bf,{children:E.jsxs(kT,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[E.jsx(lo,{mb:20,order:3,children:"Authentication"}),r?E.jsx(Jt,{children:E.jsx(tt,{children:"Authentication is enabled."})}):E.jsxs(Jt,{justify:"space-between",children:[E.jsx(Fe,{children:E.jsx(tt,{children:"Authentication is currently disabled."})}),E.jsx(xs,{label:"You can only enable auth when using Firebase",disabled:R,children:E.jsx(bn,{onClick:F=>R?S():F.preventDefault(),color:"green","data-disabled":R?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?E.jsxs(Jt,{mt:40,direction:"column",children:[E.jsxs(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[E.jsx(lo,{order:6,children:"Enabled Users"}),E.jsx(Qee,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(F=>{var O;return E.jsxs(Jt,{justify:"space-between",mb:10,children:[E.jsx(tt,{children:F}),F===((O=e.user)==null?void 0:O.email)?E.jsx(tt,{color:"blue",size:"xs",children:"You"}):E.jsx(L_,{variant:"subtle",onClick:()=>k(F),children:E.jsx(Ake,{color:"red"})})]},F)}):null]}):null]})}),E.jsx(ho,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:E.jsxs(Fe,{component:"form",onSubmit:w.onSubmit(()=>A()),children:[E.jsx(xg,{leftSection:E.jsx(ept,{}),placeholder:"User Gmail Account",...w.getInputProps("email")}),E.jsxs(Jt,{mt:30,justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),E.jsx(bn,{type:"submit",children:"Save"})]})]})}),E.jsxs(ho,{opened:f,size:"large",onClose:()=>d(!1),title:E.jsxs(tt,{fw:700,children:["Remove",y,"?"]}),children:[E.jsxs(tt,{mt:40,children:["Are you sure you want to remove",E.jsx("b",{children:y})," ","as an administrator?"]}),E.jsxs(Jt,{mt:40,justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),E.jsx(bn,{onClick:()=>I(),children:"Yes, I'm sure."})]})]}),E.jsxs(ho,{opened:h,size:"md",onClose:()=>p(!1),title:E.jsx(tt,{fw:700,children:"Enable Authentication?"}),children:[E.jsxs(tt,{mt:40,children:["User"," ",E.jsx("b",{children:b==null?void 0:b.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),E.jsxs(Jt,{mt:40,justify:"right",children:[E.jsx(bn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),E.jsx(bn,{onClick:()=>T(b),children:"Yes, I'm sure."})]})]}),E.jsxs(ho,{opened:m,size:"md",onClose:()=>g(!1),title:E.jsx(tt,{fw:700,children:"An Error Occurred."}),children:[E.jsxs(tt,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",E.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),E.jsx(Jt,{mt:40,justify:"right",children:E.jsx(bn,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),E.jsx(jf,{visible:a})]})}class hTn extends IGe{constructor(){super("localStorage");ml(this,"studyDatabase");ml(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await O2.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await eL(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await eL(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await O2.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=Z$();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=O2.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=Z$();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await O2.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await O2.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function pTn(){let e;{const t=new hTn;await t.connect(),e=t}return e}function sI({title:e}){const t=Cb();return N.useEffect(()=>{document.title=e},[t,e]),null}async function mTn(){const t=await(await fetch(`${Ll}global.json`)).text();return Z1n(t)}function gTn(){const[e,t]=N.useState(null),[n,r]=N.useState({});N.useEffect(()=>{async function a(){e&&r(await nvn(e))}a()},[e]),N.useEffect(()=>{e||mTn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Po();N.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await pTn();s(u)}a()},[s,i]);const o=async a=>i instanceof sm?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?E.jsx(Vht,{basename:Ll,children:E.jsx(KCn,{children:E.jsx(Kht,{children:E.jsxs(Bht,{children:[E.jsx(Nx,{path:"/",element:E.jsxs(E.Fragment,{children:[E.jsx(sI,{title:"ReVISit | Home"}),E.jsxs(Yi,{padding:"md",header:{height:70},children:[E.jsx(GF,{studyIds:e.configsList}),E.jsx(hxt,{globalConfig:e,studyConfigs:n})]})]})}),E.jsx(Nx,{path:"/:studyId/*",element:E.jsxs(E.Fragment,{children:[E.jsx(sI,{title:"ReVISit | Study"}),E.jsx(rvn,{globalConfig:e})]})}),E.jsx(Nx,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:E.jsxs(E.Fragment,{children:[E.jsx(sI,{title:"ReVISit | Analysis"}),E.jsx(oCe,{paramToCheck:"studyId",paramCallback:o,children:E.jsx(Yi,{padding:"md",header:{height:70},children:E.jsx(cTn,{globalConfig:e})})})]})}),E.jsx(Nx,{path:"/analysis/stats/:studyId",element:E.jsx(FVe,{to:"./table",replace:!0})}),E.jsx(Nx,{path:"/settings",element:E.jsxs(oCe,{children:[E.jsx(sI,{title:"ReVISit | Settings"}),E.jsxs(Yi,{padding:"md",header:{height:70},children:[E.jsx(GF,{studyIds:e.configsList}),E.jsx(Yi.Main,{children:E.jsx(dTn,{})})]})]})}),E.jsx(Nx,{path:"/login",element:E.jsxs(E.Fragment,{children:[E.jsx(sI,{title:"ReVISit | Login"}),E.jsxs(Yi,{padding:"md",header:{height:70},children:[E.jsx(GF,{studyIds:e.configsList}),E.jsx(Yi.Main,{children:E.jsx(fTn,{})})]})]})})]})})})}):null}cW.createRoot(document.getElementById("root")).render(E.jsx(yi.StrictMode,{children:E.jsx(Kdt,{children:E.jsxs(zAe,{children:[E.jsx(Ay,{}),E.jsx(gTn,{})]})})}))});export default yTn();

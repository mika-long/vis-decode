var dit=Object.defineProperty;var hit=(e,t,n)=>t in e?dit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pit=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ku=(e,t,n)=>hit(e,typeof t!="symbol"?t+"":t,n);var xzn=pit((PVn,zce)=>{function mit(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function git(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var nIe={exports:{}},$7={},rIe={exports:{}},gr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aR=Symbol.for("react.element"),yit=Symbol.for("react.portal"),vit=Symbol.for("react.fragment"),bit=Symbol.for("react.strict_mode"),_it=Symbol.for("react.profiler"),wit=Symbol.for("react.provider"),xit=Symbol.for("react.context"),Eit=Symbol.for("react.forward_ref"),Tit=Symbol.for("react.suspense"),Sit=Symbol.for("react.memo"),Ait=Symbol.for("react.lazy"),Mpe=Symbol.iterator;function Cit(e){return e===null||typeof e!="object"?null:(e=Mpe&&e[Mpe]||e["@@iterator"],typeof e=="function"?e:null)}var iIe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sIe=Object.assign,oIe={};function pA(e,t,n){this.props=e,this.context=t,this.refs=oIe,this.updater=n||iIe}pA.prototype.isReactComponent={};pA.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};pA.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aIe(){}aIe.prototype=pA.prototype;function WZ(e,t,n){this.props=e,this.context=t,this.refs=oIe,this.updater=n||iIe}var GZ=WZ.prototype=new aIe;GZ.constructor=WZ;sIe(GZ,pA.prototype);GZ.isPureReactComponent=!0;var Fpe=Array.isArray,uIe=Object.prototype.hasOwnProperty,YZ={current:null},lIe={key:!0,ref:!0,__self:!0,__source:!0};function cIe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)uIe.call(t,r)&&!lIe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:aR,type:e,key:s,ref:o,props:i,_owner:YZ.current}}function Iit(e,t){return{$$typeof:aR,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function KZ(e){return typeof e=="object"&&e!==null&&e.$$typeof===aR}function kit(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bpe=/\/+/g;function mz(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kit(""+e.key):t.toString(36)}function SD(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case aR:case yit:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+mz(o,0):r,Fpe(i)?(n="",e!=null&&(n=e.replace(Bpe,"$&/")+"/"),SD(i,t,n,"",function(l){return l})):i!=null&&(KZ(i)&&(i=Iit(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Bpe,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Fpe(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+mz(s,a);o+=SD(s,t,n,u,i)}else if(u=Cit(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+mz(s,a++),o+=SD(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function JN(e,t,n){if(e==null)return e;var r=[],i=0;return SD(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Rit(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Al={current:null},AD={transition:null},Nit={ReactCurrentDispatcher:Al,ReactCurrentBatchConfig:AD,ReactCurrentOwner:YZ};function fIe(){throw Error("act(...) is not supported in production builds of React.")}gr.Children={map:JN,forEach:function(e,t,n){JN(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return JN(e,function(){t++}),t},toArray:function(e){return JN(e,function(t){return t})||[]},only:function(e){if(!KZ(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};gr.Component=pA;gr.Fragment=vit;gr.Profiler=_it;gr.PureComponent=WZ;gr.StrictMode=bit;gr.Suspense=Tit;gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nit;gr.act=fIe;gr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sIe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=YZ.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)uIe.call(t,u)&&!lIe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:aR,type:e.type,key:i,ref:s,props:r,_owner:o}};gr.createContext=function(e){return e={$$typeof:xit,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wit,_context:e},e.Consumer=e};gr.createElement=cIe;gr.createFactory=function(e){var t=cIe.bind(null,e);return t.type=e,t};gr.createRef=function(){return{current:null}};gr.forwardRef=function(e){return{$$typeof:Eit,render:e}};gr.isValidElement=KZ;gr.lazy=function(e){return{$$typeof:Ait,_payload:{_status:-1,_result:e},_init:Rit}};gr.memo=function(e,t){return{$$typeof:Sit,type:e,compare:t===void 0?null:t}};gr.startTransition=function(e){var t=AD.transition;AD.transition={};try{e()}finally{AD.transition=t}};gr.unstable_act=fIe;gr.useCallback=function(e,t){return Al.current.useCallback(e,t)};gr.useContext=function(e){return Al.current.useContext(e)};gr.useDebugValue=function(){};gr.useDeferredValue=function(e){return Al.current.useDeferredValue(e)};gr.useEffect=function(e,t){return Al.current.useEffect(e,t)};gr.useId=function(){return Al.current.useId()};gr.useImperativeHandle=function(e,t,n){return Al.current.useImperativeHandle(e,t,n)};gr.useInsertionEffect=function(e,t){return Al.current.useInsertionEffect(e,t)};gr.useLayoutEffect=function(e,t){return Al.current.useLayoutEffect(e,t)};gr.useMemo=function(e,t){return Al.current.useMemo(e,t)};gr.useReducer=function(e,t,n){return Al.current.useReducer(e,t,n)};gr.useRef=function(e){return Al.current.useRef(e)};gr.useState=function(e){return Al.current.useState(e)};gr.useSyncExternalStore=function(e,t,n){return Al.current.useSyncExternalStore(e,t,n)};gr.useTransition=function(){return Al.current.useTransition()};gr.version="18.3.1";rIe.exports=gr;var R=rIe.exports;const ni=Rf(R),WO=mit({__proto__:null,default:ni},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pit=R,Dit=Symbol.for("react.element"),Oit=Symbol.for("react.fragment"),$it=Object.prototype.hasOwnProperty,Lit=Pit.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mit={key:!0,ref:!0,__self:!0,__source:!0};function dIe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)$it.call(t,r)&&!Mit.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Dit,type:e,key:s,ref:o,props:i,_owner:Lit.current}}$7.Fragment=Oit;$7.jsx=dIe;$7.jsxs=dIe;nIe.exports=$7;var E=nIe.exports,BG={},hIe={exports:{}},Nf={},pIe={exports:{}},mIe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,J){var F=K.length;K.push(J);e:for(;0<F;){var j=F-1>>>1,W=K[j];if(0<i(W,J))K[j]=J,K[F]=W,F=j;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var J=K[0],F=K.pop();if(F!==J){K[0]=F;e:for(var j=0,W=K.length,M=W>>>1;j<M;){var V=2*(j+1)-1,Q=K[V],se=V+1,be=K[se];if(0>i(Q,F))se<W&&0>i(be,Q)?(K[j]=be,K[se]=F,j=se):(K[j]=Q,K[V]=F,j=V);else if(se<W&&0>i(be,F))K[j]=be,K[se]=F,j=se;else break e}}return J}function i(K,J){var F=K.sortIndex-J.sortIndex;return F!==0?F:K.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(K){for(var J=n(l);J!==null;){if(J.callback===null)r(l);else if(J.startTime<=K)r(l),J.sortIndex=J.expirationTime,t(u,J);else break;J=n(l)}}function w(K){if(m=!1,b(K),!p)if(n(u)!==null)p=!0,H(x);else{var J=n(l);J!==null&&G(w,J.startTime-K)}}function x(K,J){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var F=d;try{for(b(J),f=n(u);f!==null&&(!(f.expirationTime>J)||K&&!D());){var j=f.callback;if(typeof j=="function"){f.callback=null,d=f.priorityLevel;var W=j(f.expirationTime<=J);J=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(J)}else r(u);f=n(u)}if(f!==null)var M=!0;else{var V=n(l);V!==null&&G(w,V.startTime-J),M=!1}return M}finally{f=null,d=F,h=!1}}var S=!1,A=null,C=-1,N=5,k=-1;function D(){return!(e.unstable_now()-k<N)}function L(){if(A!==null){var K=e.unstable_now();k=K;var J=!0;try{J=A(!0,K)}finally{J?O():(S=!1,A=null)}}else S=!1}var O;if(typeof v=="function")O=function(){v(L)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,q=B.port2;B.port1.onmessage=L,O=function(){q.postMessage(null)}}else O=function(){g(L,0)};function H(K){A=K,S||(S=!0,O())}function G(K,J){C=g(function(){K(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,H(x))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(K){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var F=d;d=J;try{return K()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,J){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var F=d;d=K;try{return J()}finally{d=F}},e.unstable_scheduleCallback=function(K,J,F){var j=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?j+F:j):F=j,K){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=F+W,K={id:c++,callback:J,priorityLevel:K,startTime:F,expirationTime:W,sortIndex:-1},F>j?(K.sortIndex=F,t(l,K),n(u)===null&&K===n(l)&&(m?(y(C),C=-1):m=!0,G(w,F-j))):(K.sortIndex=W,t(u,K),p||h||(p=!0,H(x))),K},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(K){var J=d;return function(){var F=d;d=J;try{return K.apply(this,arguments)}finally{d=F}}}})(mIe);pIe.exports=mIe;var Fit=pIe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bit=R,mf=Fit;function bt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gIe=new Set,pk={};function Ax(e,t){KT(e,t),KT(e+"Capture",t)}function KT(e,t){for(pk[e]=t,e=0;e<t.length;e++)gIe.add(t[e])}var Pg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jG=Object.prototype.hasOwnProperty,jit=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jpe={},Upe={};function Uit(e){return jG.call(Upe,e)?!0:jG.call(jpe,e)?!1:jit.test(e)?Upe[e]=!0:(jpe[e]=!0,!1)}function zit(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Vit(e,t,n,r){if(t===null||typeof t>"u"||zit(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Cl(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Ya={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ya[e]=new Cl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ya[t]=new Cl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ya[e]=new Cl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ya[e]=new Cl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ya[e]=new Cl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ya[e]=new Cl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ya[e]=new Cl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ya[e]=new Cl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ya[e]=new Cl(e,5,!1,e.toLowerCase(),null,!1,!1)});var XZ=/[\-:]([a-z])/g;function QZ(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(XZ,QZ);Ya[t]=new Cl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(XZ,QZ);Ya[t]=new Cl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(XZ,QZ);Ya[t]=new Cl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ya[e]=new Cl(e,1,!1,e.toLowerCase(),null,!1,!1)});Ya.xlinkHref=new Cl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ya[e]=new Cl(e,1,!1,e.toLowerCase(),null,!0,!0)});function JZ(e,t,n,r){var i=Ya.hasOwnProperty(t)?Ya[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Vit(t,n,i,r)&&(n=null),r||i===null?Uit(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var o1=Bit.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ZN=Symbol.for("react.element"),OE=Symbol.for("react.portal"),$E=Symbol.for("react.fragment"),ZZ=Symbol.for("react.strict_mode"),UG=Symbol.for("react.profiler"),yIe=Symbol.for("react.provider"),vIe=Symbol.for("react.context"),eee=Symbol.for("react.forward_ref"),zG=Symbol.for("react.suspense"),VG=Symbol.for("react.suspense_list"),tee=Symbol.for("react.memo"),my=Symbol.for("react.lazy"),bIe=Symbol.for("react.offscreen"),zpe=Symbol.iterator;function s3(e){return e===null||typeof e!="object"?null:(e=zpe&&e[zpe]||e["@@iterator"],typeof e=="function"?e:null)}var Os=Object.assign,gz;function wI(e){if(gz===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);gz=t&&t[1]||""}return`
`+gz+e}var yz=!1;function vz(e,t){if(!e||yz)return"";yz=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{yz=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?wI(e):""}function Hit(e){switch(e.tag){case 5:return wI(e.type);case 16:return wI("Lazy");case 13:return wI("Suspense");case 19:return wI("SuspenseList");case 0:case 2:case 15:return e=vz(e.type,!1),e;case 11:return e=vz(e.type.render,!1),e;case 1:return e=vz(e.type,!0),e;default:return""}}function HG(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $E:return"Fragment";case OE:return"Portal";case UG:return"Profiler";case ZZ:return"StrictMode";case zG:return"Suspense";case VG:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vIe:return(e.displayName||"Context")+".Consumer";case yIe:return(e._context.displayName||"Context")+".Provider";case eee:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tee:return t=e.displayName||null,t!==null?t:HG(e.type)||"Memo";case my:t=e._payload,e=e._init;try{return HG(e(t))}catch{}}return null}function qit(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return HG(t);case 8:return t===ZZ?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xv(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _Ie(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wit(e){var t=_Ie(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function eP(e){e._valueTracker||(e._valueTracker=Wit(e))}function wIe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_Ie(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function GO(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qG(e,t){var n=t.checked;return Os({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vpe(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xv(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xIe(e,t){t=t.checked,t!=null&&JZ(e,"checked",t,!1)}function WG(e,t){xIe(e,t);var n=xv(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?GG(e,t.type,n):t.hasOwnProperty("defaultValue")&&GG(e,t.type,xv(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hpe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function GG(e,t,n){(t!=="number"||GO(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var xI=Array.isArray;function oT(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xv(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function YG(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(bt(91));return Os({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qpe(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(bt(92));if(xI(n)){if(1<n.length)throw Error(bt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xv(n)}}function EIe(e,t){var n=xv(t.value),r=xv(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Wpe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function TIe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function KG(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?TIe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var tP,SIe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(tP=tP||document.createElement("div"),tP.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=tP.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function mk(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var p4={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Git=["Webkit","ms","Moz","O"];Object.keys(p4).forEach(function(e){Git.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),p4[t]=p4[e]})});function AIe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||p4.hasOwnProperty(e)&&p4[e]?(""+t).trim():t+"px"}function CIe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=AIe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Yit=Os({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function XG(e,t){if(t){if(Yit[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(bt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(bt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(bt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(bt(62))}}function QG(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JG=null;function nee(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ZG=null,aT=null,uT=null;function Gpe(e){if(e=cR(e)){if(typeof ZG!="function")throw Error(bt(280));var t=e.stateNode;t&&(t=j7(t),ZG(e.stateNode,e.type,t))}}function IIe(e){aT?uT?uT.push(e):uT=[e]:aT=e}function kIe(){if(aT){var e=aT,t=uT;if(uT=aT=null,Gpe(e),t)for(e=0;e<t.length;e++)Gpe(t[e])}}function RIe(e,t){return e(t)}function NIe(){}var bz=!1;function PIe(e,t,n){if(bz)return e(t,n);bz=!0;try{return RIe(e,t,n)}finally{bz=!1,(aT!==null||uT!==null)&&(NIe(),kIe())}}function gk(e,t){var n=e.stateNode;if(n===null)return null;var r=j7(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(bt(231,t,typeof n));return n}var eY=!1;if(Pg)try{var o3={};Object.defineProperty(o3,"passive",{get:function(){eY=!0}}),window.addEventListener("test",o3,o3),window.removeEventListener("test",o3,o3)}catch{eY=!1}function Kit(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var m4=!1,YO=null,KO=!1,tY=null,Xit={onError:function(e){m4=!0,YO=e}};function Qit(e,t,n,r,i,s,o,a,u){m4=!1,YO=null,Kit.apply(Xit,arguments)}function Jit(e,t,n,r,i,s,o,a,u){if(Qit.apply(this,arguments),m4){if(m4){var l=YO;m4=!1,YO=null}else throw Error(bt(198));KO||(KO=!0,tY=l)}}function Cx(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function DIe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ype(e){if(Cx(e)!==e)throw Error(bt(188))}function Zit(e){var t=e.alternate;if(!t){if(t=Cx(e),t===null)throw Error(bt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ype(i),e;if(s===r)return Ype(i),t;s=s.sibling}throw Error(bt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(bt(189))}}if(n.alternate!==r)throw Error(bt(190))}if(n.tag!==3)throw Error(bt(188));return n.stateNode.current===n?e:t}function OIe(e){return e=Zit(e),e!==null?$Ie(e):null}function $Ie(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$Ie(e);if(t!==null)return t;e=e.sibling}return null}var LIe=mf.unstable_scheduleCallback,Kpe=mf.unstable_cancelCallback,est=mf.unstable_shouldYield,tst=mf.unstable_requestPaint,oo=mf.unstable_now,nst=mf.unstable_getCurrentPriorityLevel,ree=mf.unstable_ImmediatePriority,MIe=mf.unstable_UserBlockingPriority,XO=mf.unstable_NormalPriority,rst=mf.unstable_LowPriority,FIe=mf.unstable_IdlePriority,L7=null,d0=null;function ist(e){if(d0&&typeof d0.onCommitFiberRoot=="function")try{d0.onCommitFiberRoot(L7,e,void 0,(e.current.flags&128)===128)}catch{}}var Oh=Math.clz32?Math.clz32:ast,sst=Math.log,ost=Math.LN2;function ast(e){return e>>>=0,e===0?32:31-(sst(e)/ost|0)|0}var nP=64,rP=4194304;function EI(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function QO(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=EI(a):(s&=o,s!==0&&(r=EI(s)))}else o=n&~i,o!==0?r=EI(o):s!==0&&(r=EI(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Oh(t),i=1<<n,r|=e[n],t&=~i;return r}function ust(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lst(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Oh(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=ust(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function nY(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function BIe(){var e=nP;return nP<<=1,!(nP&4194240)&&(nP=64),e}function _z(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function uR(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Oh(t),e[t]=n}function cst(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Oh(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function iee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Oh(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ci=0;function jIe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var UIe,see,zIe,VIe,HIe,rY=!1,iP=[],Jy=null,Zy=null,ev=null,yk=new Map,vk=new Map,Sy=[],fst="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xpe(e,t){switch(e){case"focusin":case"focusout":Jy=null;break;case"dragenter":case"dragleave":Zy=null;break;case"mouseover":case"mouseout":ev=null;break;case"pointerover":case"pointerout":yk.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vk.delete(t.pointerId)}}function a3(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=cR(t),t!==null&&see(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function dst(e,t,n,r,i){switch(t){case"focusin":return Jy=a3(Jy,e,t,n,r,i),!0;case"dragenter":return Zy=a3(Zy,e,t,n,r,i),!0;case"mouseover":return ev=a3(ev,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return yk.set(s,a3(yk.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,vk.set(s,a3(vk.get(s)||null,e,t,n,r,i)),!0}return!1}function qIe(e){var t=Z_(e.target);if(t!==null){var n=Cx(t);if(n!==null){if(t=n.tag,t===13){if(t=DIe(n),t!==null){e.blockedOn=t,HIe(e.priority,function(){zIe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function CD(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=iY(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);JG=r,n.target.dispatchEvent(r),JG=null}else return t=cR(n),t!==null&&see(t),e.blockedOn=n,!1;t.shift()}return!0}function Qpe(e,t,n){CD(e)&&n.delete(t)}function hst(){rY=!1,Jy!==null&&CD(Jy)&&(Jy=null),Zy!==null&&CD(Zy)&&(Zy=null),ev!==null&&CD(ev)&&(ev=null),yk.forEach(Qpe),vk.forEach(Qpe)}function u3(e,t){e.blockedOn===t&&(e.blockedOn=null,rY||(rY=!0,mf.unstable_scheduleCallback(mf.unstable_NormalPriority,hst)))}function bk(e){function t(i){return u3(i,e)}if(0<iP.length){u3(iP[0],e);for(var n=1;n<iP.length;n++){var r=iP[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Jy!==null&&u3(Jy,e),Zy!==null&&u3(Zy,e),ev!==null&&u3(ev,e),yk.forEach(t),vk.forEach(t),n=0;n<Sy.length;n++)r=Sy[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sy.length&&(n=Sy[0],n.blockedOn===null);)qIe(n),n.blockedOn===null&&Sy.shift()}var lT=o1.ReactCurrentBatchConfig,JO=!0;function pst(e,t,n,r){var i=Ci,s=lT.transition;lT.transition=null;try{Ci=1,oee(e,t,n,r)}finally{Ci=i,lT.transition=s}}function mst(e,t,n,r){var i=Ci,s=lT.transition;lT.transition=null;try{Ci=4,oee(e,t,n,r)}finally{Ci=i,lT.transition=s}}function oee(e,t,n,r){if(JO){var i=iY(e,t,n,r);if(i===null)Rz(e,t,r,ZO,n),Xpe(e,r);else if(dst(i,e,t,n,r))r.stopPropagation();else if(Xpe(e,r),t&4&&-1<fst.indexOf(e)){for(;i!==null;){var s=cR(i);if(s!==null&&UIe(s),s=iY(e,t,n,r),s===null&&Rz(e,t,r,ZO,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Rz(e,t,r,null,n)}}var ZO=null;function iY(e,t,n,r){if(ZO=null,e=nee(r),e=Z_(e),e!==null)if(t=Cx(e),t===null)e=null;else if(n=t.tag,n===13){if(e=DIe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ZO=e,null}function WIe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nst()){case ree:return 1;case MIe:return 4;case XO:case rst:return 16;case FIe:return 536870912;default:return 16}default:return 16}}var Ly=null,aee=null,ID=null;function GIe(){if(ID)return ID;var e,t=aee,n=t.length,r,i="value"in Ly?Ly.value:Ly.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return ID=i.slice(e,1<r?1-r:void 0)}function kD(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sP(){return!0}function Jpe(){return!1}function Pf(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sP:Jpe,this.isPropagationStopped=Jpe,this}return Os(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sP)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sP)},persist:function(){},isPersistent:sP}),t}var mA={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uee=Pf(mA),lR=Os({},mA,{view:0,detail:0}),gst=Pf(lR),wz,xz,l3,M7=Os({},lR,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lee,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==l3&&(l3&&e.type==="mousemove"?(wz=e.screenX-l3.screenX,xz=e.screenY-l3.screenY):xz=wz=0,l3=e),wz)},movementY:function(e){return"movementY"in e?e.movementY:xz}}),Zpe=Pf(M7),yst=Os({},M7,{dataTransfer:0}),vst=Pf(yst),bst=Os({},lR,{relatedTarget:0}),Ez=Pf(bst),_st=Os({},mA,{animationName:0,elapsedTime:0,pseudoElement:0}),wst=Pf(_st),xst=Os({},mA,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Est=Pf(xst),Tst=Os({},mA,{data:0}),e0e=Pf(Tst),Sst={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ast={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cst={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ist(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Cst[e])?!!t[e]:!1}function lee(){return Ist}var kst=Os({},lR,{key:function(e){if(e.key){var t=Sst[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kD(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ast[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lee,charCode:function(e){return e.type==="keypress"?kD(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kD(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rst=Pf(kst),Nst=Os({},M7,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t0e=Pf(Nst),Pst=Os({},lR,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lee}),Dst=Pf(Pst),Ost=Os({},mA,{propertyName:0,elapsedTime:0,pseudoElement:0}),$st=Pf(Ost),Lst=Os({},M7,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mst=Pf(Lst),Fst=[9,13,27,32],cee=Pg&&"CompositionEvent"in window,g4=null;Pg&&"documentMode"in document&&(g4=document.documentMode);var Bst=Pg&&"TextEvent"in window&&!g4,YIe=Pg&&(!cee||g4&&8<g4&&11>=g4),n0e=" ",r0e=!1;function KIe(e,t){switch(e){case"keyup":return Fst.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XIe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var LE=!1;function jst(e,t){switch(e){case"compositionend":return XIe(t);case"keypress":return t.which!==32?null:(r0e=!0,n0e);case"textInput":return e=t.data,e===n0e&&r0e?null:e;default:return null}}function Ust(e,t){if(LE)return e==="compositionend"||!cee&&KIe(e,t)?(e=GIe(),ID=aee=Ly=null,LE=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return YIe&&t.locale!=="ko"?null:t.data;default:return null}}var zst={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i0e(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zst[e.type]:t==="textarea"}function QIe(e,t,n,r){IIe(r),t=e$(t,"onChange"),0<t.length&&(n=new uee("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var y4=null,_k=null;function Vst(e){u4e(e,0)}function F7(e){var t=BE(e);if(wIe(t))return e}function Hst(e,t){if(e==="change")return t}var JIe=!1;if(Pg){var Tz;if(Pg){var Sz="oninput"in document;if(!Sz){var s0e=document.createElement("div");s0e.setAttribute("oninput","return;"),Sz=typeof s0e.oninput=="function"}Tz=Sz}else Tz=!1;JIe=Tz&&(!document.documentMode||9<document.documentMode)}function o0e(){y4&&(y4.detachEvent("onpropertychange",ZIe),_k=y4=null)}function ZIe(e){if(e.propertyName==="value"&&F7(_k)){var t=[];QIe(t,_k,e,nee(e)),PIe(Vst,t)}}function qst(e,t,n){e==="focusin"?(o0e(),y4=t,_k=n,y4.attachEvent("onpropertychange",ZIe)):e==="focusout"&&o0e()}function Wst(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return F7(_k)}function Gst(e,t){if(e==="click")return F7(t)}function Yst(e,t){if(e==="input"||e==="change")return F7(t)}function Kst(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hh=typeof Object.is=="function"?Object.is:Kst;function wk(e,t){if(Hh(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!jG.call(t,i)||!Hh(e[i],t[i]))return!1}return!0}function a0e(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function u0e(e,t){var n=a0e(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=a0e(n)}}function e4e(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?e4e(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function t4e(){for(var e=window,t=GO();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=GO(e.document)}return t}function fee(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xst(e){var t=t4e(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&e4e(n.ownerDocument.documentElement,n)){if(r!==null&&fee(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=u0e(n,s);var o=u0e(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qst=Pg&&"documentMode"in document&&11>=document.documentMode,ME=null,sY=null,v4=null,oY=!1;function l0e(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oY||ME==null||ME!==GO(r)||(r=ME,"selectionStart"in r&&fee(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),v4&&wk(v4,r)||(v4=r,r=e$(sY,"onSelect"),0<r.length&&(t=new uee("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ME)))}function oP(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var FE={animationend:oP("Animation","AnimationEnd"),animationiteration:oP("Animation","AnimationIteration"),animationstart:oP("Animation","AnimationStart"),transitionend:oP("Transition","TransitionEnd")},Az={},n4e={};Pg&&(n4e=document.createElement("div").style,"AnimationEvent"in window||(delete FE.animationend.animation,delete FE.animationiteration.animation,delete FE.animationstart.animation),"TransitionEvent"in window||delete FE.transitionend.transition);function B7(e){if(Az[e])return Az[e];if(!FE[e])return e;var t=FE[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in n4e)return Az[e]=t[n];return e}var r4e=B7("animationend"),i4e=B7("animationiteration"),s4e=B7("animationstart"),o4e=B7("transitionend"),a4e=new Map,c0e="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lb(e,t){a4e.set(e,t),Ax(t,[e])}for(var Cz=0;Cz<c0e.length;Cz++){var Iz=c0e[Cz],Jst=Iz.toLowerCase(),Zst=Iz[0].toUpperCase()+Iz.slice(1);lb(Jst,"on"+Zst)}lb(r4e,"onAnimationEnd");lb(i4e,"onAnimationIteration");lb(s4e,"onAnimationStart");lb("dblclick","onDoubleClick");lb("focusin","onFocus");lb("focusout","onBlur");lb(o4e,"onTransitionEnd");KT("onMouseEnter",["mouseout","mouseover"]);KT("onMouseLeave",["mouseout","mouseover"]);KT("onPointerEnter",["pointerout","pointerover"]);KT("onPointerLeave",["pointerout","pointerover"]);Ax("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ax("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ax("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ax("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ax("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ax("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var TI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eot=new Set("cancel close invalid load scroll toggle".split(" ").concat(TI));function f0e(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Jit(r,t,void 0,e),e.currentTarget=null}function u4e(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;f0e(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;f0e(i,a,l),s=u}}}if(KO)throw e=tY,KO=!1,tY=null,e}function as(e,t){var n=t[fY];n===void 0&&(n=t[fY]=new Set);var r=e+"__bubble";n.has(r)||(l4e(t,e,2,!1),n.add(r))}function kz(e,t,n){var r=0;t&&(r|=4),l4e(n,e,r,t)}var aP="_reactListening"+Math.random().toString(36).slice(2);function xk(e){if(!e[aP]){e[aP]=!0,gIe.forEach(function(n){n!=="selectionchange"&&(eot.has(n)||kz(n,!1,e),kz(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[aP]||(t[aP]=!0,kz("selectionchange",!1,t))}}function l4e(e,t,n,r){switch(WIe(t)){case 1:var i=pst;break;case 4:i=mst;break;default:i=oee}n=i.bind(null,t,n,e),i=void 0,!eY||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Rz(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Z_(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}PIe(function(){var l=s,c=nee(n),f=[];e:{var d=a4e.get(e);if(d!==void 0){var h=uee,p=e;switch(e){case"keypress":if(kD(n)===0)break e;case"keydown":case"keyup":h=Rst;break;case"focusin":p="focus",h=Ez;break;case"focusout":p="blur",h=Ez;break;case"beforeblur":case"afterblur":h=Ez;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Zpe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=vst;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Dst;break;case r4e:case i4e:case s4e:h=wst;break;case o4e:h=$st;break;case"scroll":h=gst;break;case"wheel":h=Mst;break;case"copy":case"cut":case"paste":h=Est;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=t0e}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=gk(v,y),w!=null&&m.push(Ek(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==JG&&(p=n.relatedTarget||n.fromElement)&&(Z_(p)||p[Dg]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Z_(p):null,p!==null&&(g=Cx(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=Zpe,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=t0e,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:BE(h),b=p==null?d:BE(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,Z_(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=B2(b))v++;for(b=0,w=y;w;w=B2(w))b++;for(;0<v-b;)m=B2(m),v--;for(;0<b-v;)y=B2(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=B2(m),y=B2(y)}m=null}else m=null;h!==null&&d0e(f,d,h,m,!1),p!==null&&g!==null&&d0e(f,g,p,m,!0)}}e:{if(d=l?BE(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var x=Hst;else if(i0e(d))if(JIe)x=Yst;else{x=Wst;var S=qst}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=Gst);if(x&&(x=x(e,l))){QIe(f,x,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&GG(d,"number",d.value)}switch(S=l?BE(l):window,e){case"focusin":(i0e(S)||S.contentEditable==="true")&&(ME=S,sY=l,v4=null);break;case"focusout":v4=sY=ME=null;break;case"mousedown":oY=!0;break;case"contextmenu":case"mouseup":case"dragend":oY=!1,l0e(f,n,c);break;case"selectionchange":if(Qst)break;case"keydown":case"keyup":l0e(f,n,c)}var A;if(cee)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else LE?KIe(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(YIe&&n.locale!=="ko"&&(LE||C!=="onCompositionStart"?C==="onCompositionEnd"&&LE&&(A=GIe()):(Ly=c,aee="value"in Ly?Ly.value:Ly.textContent,LE=!0)),S=e$(l,C),0<S.length&&(C=new e0e(C,e,null,n,c),f.push({event:C,listeners:S}),A?C.data=A:(A=XIe(n),A!==null&&(C.data=A)))),(A=Bst?jst(e,n):Ust(e,n))&&(l=e$(l,"onBeforeInput"),0<l.length&&(c=new e0e("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=A))}u4e(f,t)})}function Ek(e,t,n){return{instance:e,listener:t,currentTarget:n}}function e$(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=gk(e,n),s!=null&&r.unshift(Ek(e,s,i)),s=gk(e,t),s!=null&&r.push(Ek(e,s,i))),e=e.return}return r}function B2(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function d0e(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=gk(n,s),u!=null&&o.unshift(Ek(n,u,a))):i||(u=gk(n,s),u!=null&&o.push(Ek(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var tot=/\r\n?/g,not=/\u0000|\uFFFD/g;function h0e(e){return(typeof e=="string"?e:""+e).replace(tot,`
`).replace(not,"")}function uP(e,t,n){if(t=h0e(t),h0e(e)!==t&&n)throw Error(bt(425))}function t$(){}var aY=null,uY=null;function lY(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cY=typeof setTimeout=="function"?setTimeout:void 0,rot=typeof clearTimeout=="function"?clearTimeout:void 0,p0e=typeof Promise=="function"?Promise:void 0,iot=typeof queueMicrotask=="function"?queueMicrotask:typeof p0e<"u"?function(e){return p0e.resolve(null).then(e).catch(sot)}:cY;function sot(e){setTimeout(function(){throw e})}function Nz(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),bk(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);bk(t)}function tv(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function m0e(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gA=Math.random().toString(36).slice(2),qp="__reactFiber$"+gA,Tk="__reactProps$"+gA,Dg="__reactContainer$"+gA,fY="__reactEvents$"+gA,oot="__reactListeners$"+gA,aot="__reactHandles$"+gA;function Z_(e){var t=e[qp];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Dg]||n[qp]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=m0e(e);e!==null;){if(n=e[qp])return n;e=m0e(e)}return t}e=n,n=e.parentNode}return null}function cR(e){return e=e[qp]||e[Dg],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function BE(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(bt(33))}function j7(e){return e[Tk]||null}var dY=[],jE=-1;function cb(e){return{current:e}}function hs(e){0>jE||(e.current=dY[jE],dY[jE]=null,jE--)}function Xi(e,t){jE++,dY[jE]=e.current,e.current=t}var Ev={},Ou=cb(Ev),fc=cb(!1),Lw=Ev;function XT(e,t){var n=e.type.contextTypes;if(!n)return Ev;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function dc(e){return e=e.childContextTypes,e!=null}function n$(){hs(fc),hs(Ou)}function g0e(e,t,n){if(Ou.current!==Ev)throw Error(bt(168));Xi(Ou,t),Xi(fc,n)}function c4e(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(bt(108,qit(e)||"Unknown",i));return Os({},n,r)}function r$(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ev,Lw=Ou.current,Xi(Ou,e),Xi(fc,fc.current),!0}function y0e(e,t,n){var r=e.stateNode;if(!r)throw Error(bt(169));n?(e=c4e(e,t,Lw),r.__reactInternalMemoizedMergedChildContext=e,hs(fc),hs(Ou),Xi(Ou,e)):hs(fc),Xi(fc,n)}var qm=null,U7=!1,Pz=!1;function f4e(e){qm===null?qm=[e]:qm.push(e)}function uot(e){U7=!0,f4e(e)}function fb(){if(!Pz&&qm!==null){Pz=!0;var e=0,t=Ci;try{var n=qm;for(Ci=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}qm=null,U7=!1}catch(i){throw qm!==null&&(qm=qm.slice(e+1)),LIe(ree,fb),i}finally{Ci=t,Pz=!1}}return null}var UE=[],zE=0,i$=null,s$=0,td=[],nd=0,Mw=null,rg=1,ig="";function E_(e,t){UE[zE++]=s$,UE[zE++]=i$,i$=e,s$=t}function d4e(e,t,n){td[nd++]=rg,td[nd++]=ig,td[nd++]=Mw,Mw=e;var r=rg;e=ig;var i=32-Oh(r)-1;r&=~(1<<i),n+=1;var s=32-Oh(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,rg=1<<32-Oh(t)+i|n<<i|r,ig=s+e}else rg=1<<s|n<<i|r,ig=e}function dee(e){e.return!==null&&(E_(e,1),d4e(e,1,0))}function hee(e){for(;e===i$;)i$=UE[--zE],UE[zE]=null,s$=UE[--zE],UE[zE]=null;for(;e===Mw;)Mw=td[--nd],td[nd]=null,ig=td[--nd],td[nd]=null,rg=td[--nd],td[nd]=null}var lf=null,ef=null,Ts=!1,gh=null;function h4e(e,t){var n=ld(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function v0e(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,lf=e,ef=tv(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,lf=e,ef=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mw!==null?{id:rg,overflow:ig}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ld(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,lf=e,ef=null,!0):!1;default:return!1}}function hY(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pY(e){if(Ts){var t=ef;if(t){var n=t;if(!v0e(e,t)){if(hY(e))throw Error(bt(418));t=tv(n.nextSibling);var r=lf;t&&v0e(e,t)?h4e(r,n):(e.flags=e.flags&-4097|2,Ts=!1,lf=e)}}else{if(hY(e))throw Error(bt(418));e.flags=e.flags&-4097|2,Ts=!1,lf=e}}}function b0e(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lf=e}function lP(e){if(e!==lf)return!1;if(!Ts)return b0e(e),Ts=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!lY(e.type,e.memoizedProps)),t&&(t=ef)){if(hY(e))throw p4e(),Error(bt(418));for(;t;)h4e(e,t),t=tv(t.nextSibling)}if(b0e(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(bt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ef=tv(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ef=null}}else ef=lf?tv(e.stateNode.nextSibling):null;return!0}function p4e(){for(var e=ef;e;)e=tv(e.nextSibling)}function QT(){ef=lf=null,Ts=!1}function pee(e){gh===null?gh=[e]:gh.push(e)}var lot=o1.ReactCurrentBatchConfig;function c3(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(bt(309));var r=n.stateNode}if(!r)throw Error(bt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(bt(284));if(!n._owner)throw Error(bt(290,e))}return e}function cP(e,t){throw e=Object.prototype.toString.call(t),Error(bt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _0e(e){var t=e._init;return t(e._payload)}function m4e(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=sv(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=Bz(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var x=b.type;return x===$E?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===my&&_0e(x)===v.type)?(w=i(v,b.props),w.ref=c3(y,v,b),w.return=y,w):(w=LD(b.type,b.key,b.props,null,y.mode,w),w.ref=c3(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=jz(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,x){return v===null||v.tag!==7?(v=xw(b,y.mode,w,x),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Bz(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ZN:return b=LD(v.type,v.key,v.props,null,y.mode,b),b.ref=c3(y,null,v),b.return=y,b;case OE:return v=jz(v,y.mode,b),v.return=y,v;case my:var w=v._init;return f(y,w(v._payload),b)}if(xI(v)||s3(v))return v=xw(v,y.mode,b,null),v.return=y,v;cP(y,v)}return null}function d(y,v,b,w){var x=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ZN:return b.key===x?u(y,v,b,w):null;case OE:return b.key===x?l(y,v,b,w):null;case my:return x=b._init,d(y,v,x(b._payload),w)}if(xI(b)||s3(b))return x!==null?null:c(y,v,b,w,null);cP(y,b)}return null}function h(y,v,b,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ZN:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,x);case OE:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,x);case my:var S=w._init;return h(y,v,b,S(w._payload),x)}if(xI(w)||s3(w))return y=y.get(b)||null,c(v,y,w,x,null);cP(v,w)}return null}function p(y,v,b,w){for(var x=null,S=null,A=v,C=v=0,N=null;A!==null&&C<b.length;C++){A.index>C?(N=A,A=null):N=A.sibling;var k=d(y,A,b[C],w);if(k===null){A===null&&(A=N);break}e&&A&&k.alternate===null&&t(y,A),v=s(k,v,C),S===null?x=k:S.sibling=k,S=k,A=N}if(C===b.length)return n(y,A),Ts&&E_(y,C),x;if(A===null){for(;C<b.length;C++)A=f(y,b[C],w),A!==null&&(v=s(A,v,C),S===null?x=A:S.sibling=A,S=A);return Ts&&E_(y,C),x}for(A=r(y,A);C<b.length;C++)N=h(A,y,C,b[C],w),N!==null&&(e&&N.alternate!==null&&A.delete(N.key===null?C:N.key),v=s(N,v,C),S===null?x=N:S.sibling=N,S=N);return e&&A.forEach(function(D){return t(y,D)}),Ts&&E_(y,C),x}function m(y,v,b,w){var x=s3(b);if(typeof x!="function")throw Error(bt(150));if(b=x.call(b),b==null)throw Error(bt(151));for(var S=x=null,A=v,C=v=0,N=null,k=b.next();A!==null&&!k.done;C++,k=b.next()){A.index>C?(N=A,A=null):N=A.sibling;var D=d(y,A,k.value,w);if(D===null){A===null&&(A=N);break}e&&A&&D.alternate===null&&t(y,A),v=s(D,v,C),S===null?x=D:S.sibling=D,S=D,A=N}if(k.done)return n(y,A),Ts&&E_(y,C),x;if(A===null){for(;!k.done;C++,k=b.next())k=f(y,k.value,w),k!==null&&(v=s(k,v,C),S===null?x=k:S.sibling=k,S=k);return Ts&&E_(y,C),x}for(A=r(y,A);!k.done;C++,k=b.next())k=h(A,y,C,k.value,w),k!==null&&(e&&k.alternate!==null&&A.delete(k.key===null?C:k.key),v=s(k,v,C),S===null?x=k:S.sibling=k,S=k);return e&&A.forEach(function(L){return t(y,L)}),Ts&&E_(y,C),x}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===$E&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ZN:e:{for(var x=b.key,S=v;S!==null;){if(S.key===x){if(x=b.type,x===$E){if(S.tag===7){n(y,S.sibling),v=i(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===my&&_0e(x)===S.type){n(y,S.sibling),v=i(S,b.props),v.ref=c3(y,S,b),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}b.type===$E?(v=xw(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=LD(b.type,b.key,b.props,null,y.mode,w),w.ref=c3(y,v,b),w.return=y,y=w)}return o(y);case OE:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=jz(b,y.mode,w),v.return=y,y=v}return o(y);case my:return S=b._init,g(y,v,S(b._payload),w)}if(xI(b))return p(y,v,b,w);if(s3(b))return m(y,v,b,w);cP(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=Bz(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var JT=m4e(!0),g4e=m4e(!1),o$=cb(null),a$=null,VE=null,mee=null;function gee(){mee=VE=a$=null}function yee(e){var t=o$.current;hs(o$),e._currentValue=t}function mY(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cT(e,t){a$=e,mee=VE=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ic=!0),e.firstContext=null)}function yd(e){var t=e._currentValue;if(mee!==e)if(e={context:e,memoizedValue:t,next:null},VE===null){if(a$===null)throw Error(bt(308));VE=e,a$.dependencies={lanes:0,firstContext:e}}else VE=VE.next=e;return t}var ew=null;function vee(e){ew===null?ew=[e]:ew.push(e)}function y4e(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,vee(t)):(n.next=i.next,i.next=n),t.interleaved=n,Og(e,r)}function Og(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var gy=!1;function bee(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v4e(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yg(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nv(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Xr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Og(e,n)}return i=r.interleaved,i===null?(t.next=t,vee(r)):(t.next=i.next,i.next=t),r.interleaved=t,Og(e,n)}function RD(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iee(e,n)}}function w0e(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function u$(e,t,n,r){var i=e.updateQueue;gy=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Os({},f,d);break e;case 2:gy=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Bw|=o,e.lanes=o,e.memoizedState=f}}function x0e(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(bt(191,i));i.call(r)}}}var fR={},h0=cb(fR),Sk=cb(fR),Ak=cb(fR);function tw(e){if(e===fR)throw Error(bt(174));return e}function _ee(e,t){switch(Xi(Ak,t),Xi(Sk,e),Xi(h0,fR),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:KG(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=KG(t,e)}hs(h0),Xi(h0,t)}function ZT(){hs(h0),hs(Sk),hs(Ak)}function b4e(e){tw(Ak.current);var t=tw(h0.current),n=KG(t,e.type);t!==n&&(Xi(Sk,e),Xi(h0,n))}function wee(e){Sk.current===e&&(hs(h0),hs(Sk))}var Ps=cb(0);function l$(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dz=[];function xee(){for(var e=0;e<Dz.length;e++)Dz[e]._workInProgressVersionPrimary=null;Dz.length=0}var ND=o1.ReactCurrentDispatcher,Oz=o1.ReactCurrentBatchConfig,Fw=0,Ds=null,Mo=null,ua=null,c$=!1,b4=!1,Ck=0,cot=0;function au(){throw Error(bt(321))}function Eee(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Hh(e[n],t[n]))return!1;return!0}function Tee(e,t,n,r,i,s){if(Fw=s,Ds=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ND.current=e===null||e.memoizedState===null?pot:mot,e=n(r,i),b4){s=0;do{if(b4=!1,Ck=0,25<=s)throw Error(bt(301));s+=1,ua=Mo=null,t.updateQueue=null,ND.current=got,e=n(r,i)}while(b4)}if(ND.current=f$,t=Mo!==null&&Mo.next!==null,Fw=0,ua=Mo=Ds=null,c$=!1,t)throw Error(bt(300));return e}function See(){var e=Ck!==0;return Ck=0,e}function Op(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ua===null?Ds.memoizedState=ua=e:ua=ua.next=e,ua}function vd(){if(Mo===null){var e=Ds.alternate;e=e!==null?e.memoizedState:null}else e=Mo.next;var t=ua===null?Ds.memoizedState:ua.next;if(t!==null)ua=t,Mo=e;else{if(e===null)throw Error(bt(310));Mo=e,e={memoizedState:Mo.memoizedState,baseState:Mo.baseState,baseQueue:Mo.baseQueue,queue:Mo.queue,next:null},ua===null?Ds.memoizedState=ua=e:ua=ua.next=e}return ua}function Ik(e,t){return typeof t=="function"?t(e):t}function $z(e){var t=vd(),n=t.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=e;var r=Mo,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Fw&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ds.lanes|=c,Bw|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Hh(r,t.memoizedState)||(ic=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ds.lanes|=s,Bw|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Lz(e){var t=vd(),n=t.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Hh(s,t.memoizedState)||(ic=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _4e(){}function w4e(e,t){var n=Ds,r=vd(),i=t(),s=!Hh(r.memoizedState,i);if(s&&(r.memoizedState=i,ic=!0),r=r.queue,Aee(T4e.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ua!==null&&ua.memoizedState.tag&1){if(n.flags|=2048,kk(9,E4e.bind(null,n,r,i,t),void 0,null),va===null)throw Error(bt(349));Fw&30||x4e(n,t,i)}return i}function x4e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ds.updateQueue,t===null?(t={lastEffect:null,stores:null},Ds.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function E4e(e,t,n,r){t.value=n,t.getSnapshot=r,S4e(t)&&A4e(e)}function T4e(e,t,n){return n(function(){S4e(t)&&A4e(e)})}function S4e(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Hh(e,n)}catch{return!0}}function A4e(e){var t=Og(e,1);t!==null&&$h(t,e,1,-1)}function E0e(e){var t=Op();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ik,lastRenderedState:e},t.queue=e,e=e.dispatch=hot.bind(null,Ds,e),[t.memoizedState,e]}function kk(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ds.updateQueue,t===null?(t={lastEffect:null,stores:null},Ds.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function C4e(){return vd().memoizedState}function PD(e,t,n,r){var i=Op();Ds.flags|=e,i.memoizedState=kk(1|t,n,void 0,r===void 0?null:r)}function z7(e,t,n,r){var i=vd();r=r===void 0?null:r;var s=void 0;if(Mo!==null){var o=Mo.memoizedState;if(s=o.destroy,r!==null&&Eee(r,o.deps)){i.memoizedState=kk(t,n,s,r);return}}Ds.flags|=e,i.memoizedState=kk(1|t,n,s,r)}function T0e(e,t){return PD(8390656,8,e,t)}function Aee(e,t){return z7(2048,8,e,t)}function I4e(e,t){return z7(4,2,e,t)}function k4e(e,t){return z7(4,4,e,t)}function R4e(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function N4e(e,t,n){return n=n!=null?n.concat([e]):null,z7(4,4,R4e.bind(null,t,e),n)}function Cee(){}function P4e(e,t){var n=vd();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Eee(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function D4e(e,t){var n=vd();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Eee(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function O4e(e,t,n){return Fw&21?(Hh(n,t)||(n=BIe(),Ds.lanes|=n,Bw|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ic=!0),e.memoizedState=n)}function fot(e,t){var n=Ci;Ci=n!==0&&4>n?n:4,e(!0);var r=Oz.transition;Oz.transition={};try{e(!1),t()}finally{Ci=n,Oz.transition=r}}function $4e(){return vd().memoizedState}function dot(e,t,n){var r=iv(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},L4e(e))M4e(t,n);else if(n=y4e(e,t,n,r),n!==null){var i=dl();$h(n,e,r,i),F4e(n,t,r)}}function hot(e,t,n){var r=iv(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(L4e(e))M4e(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hh(a,o)){var u=t.interleaved;u===null?(i.next=i,vee(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=y4e(e,t,i,r),n!==null&&(i=dl(),$h(n,e,r,i),F4e(n,t,r))}}function L4e(e){var t=e.alternate;return e===Ds||t!==null&&t===Ds}function M4e(e,t){b4=c$=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function F4e(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iee(e,n)}}var f$={readContext:yd,useCallback:au,useContext:au,useEffect:au,useImperativeHandle:au,useInsertionEffect:au,useLayoutEffect:au,useMemo:au,useReducer:au,useRef:au,useState:au,useDebugValue:au,useDeferredValue:au,useTransition:au,useMutableSource:au,useSyncExternalStore:au,useId:au,unstable_isNewReconciler:!1},pot={readContext:yd,useCallback:function(e,t){return Op().memoizedState=[e,t===void 0?null:t],e},useContext:yd,useEffect:T0e,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,PD(4194308,4,R4e.bind(null,t,e),n)},useLayoutEffect:function(e,t){return PD(4194308,4,e,t)},useInsertionEffect:function(e,t){return PD(4,2,e,t)},useMemo:function(e,t){var n=Op();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Op();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=dot.bind(null,Ds,e),[r.memoizedState,e]},useRef:function(e){var t=Op();return e={current:e},t.memoizedState=e},useState:E0e,useDebugValue:Cee,useDeferredValue:function(e){return Op().memoizedState=e},useTransition:function(){var e=E0e(!1),t=e[0];return e=fot.bind(null,e[1]),Op().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ds,i=Op();if(Ts){if(n===void 0)throw Error(bt(407));n=n()}else{if(n=t(),va===null)throw Error(bt(349));Fw&30||x4e(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,T0e(T4e.bind(null,r,s,e),[e]),r.flags|=2048,kk(9,E4e.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Op(),t=va.identifierPrefix;if(Ts){var n=ig,r=rg;n=(r&~(1<<32-Oh(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ck++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=cot++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mot={readContext:yd,useCallback:P4e,useContext:yd,useEffect:Aee,useImperativeHandle:N4e,useInsertionEffect:I4e,useLayoutEffect:k4e,useMemo:D4e,useReducer:$z,useRef:C4e,useState:function(){return $z(Ik)},useDebugValue:Cee,useDeferredValue:function(e){var t=vd();return O4e(t,Mo.memoizedState,e)},useTransition:function(){var e=$z(Ik)[0],t=vd().memoizedState;return[e,t]},useMutableSource:_4e,useSyncExternalStore:w4e,useId:$4e,unstable_isNewReconciler:!1},got={readContext:yd,useCallback:P4e,useContext:yd,useEffect:Aee,useImperativeHandle:N4e,useInsertionEffect:I4e,useLayoutEffect:k4e,useMemo:D4e,useReducer:Lz,useRef:C4e,useState:function(){return Lz(Ik)},useDebugValue:Cee,useDeferredValue:function(e){var t=vd();return Mo===null?t.memoizedState=e:O4e(t,Mo.memoizedState,e)},useTransition:function(){var e=Lz(Ik)[0],t=vd().memoizedState;return[e,t]},useMutableSource:_4e,useSyncExternalStore:w4e,useId:$4e,unstable_isNewReconciler:!1};function ch(e,t){if(e&&e.defaultProps){t=Os({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gY(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Os({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var V7={isMounted:function(e){return(e=e._reactInternals)?Cx(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dl(),i=iv(e),s=yg(r,i);s.payload=t,n!=null&&(s.callback=n),t=nv(e,s,i),t!==null&&($h(t,e,i,r),RD(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dl(),i=iv(e),s=yg(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=nv(e,s,i),t!==null&&($h(t,e,i,r),RD(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dl(),r=iv(e),i=yg(n,r);i.tag=2,t!=null&&(i.callback=t),t=nv(e,i,r),t!==null&&($h(t,e,r,n),RD(t,e,r))}};function S0e(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!wk(n,r)||!wk(i,s):!0}function B4e(e,t,n){var r=!1,i=Ev,s=t.contextType;return typeof s=="object"&&s!==null?s=yd(s):(i=dc(t)?Lw:Ou.current,r=t.contextTypes,s=(r=r!=null)?XT(e,i):Ev),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=V7,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function A0e(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&V7.enqueueReplaceState(t,t.state,null)}function yY(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},bee(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=yd(s):(s=dc(t)?Lw:Ou.current,i.context=XT(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(gY(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&V7.enqueueReplaceState(i,i.state,null),u$(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function eS(e,t){try{var n="",r=t;do n+=Hit(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Mz(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function vY(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yot=typeof WeakMap=="function"?WeakMap:Map;function j4e(e,t,n){n=yg(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){h$||(h$=!0,IY=r),vY(e,t)},n}function U4e(e,t,n){n=yg(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){vY(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vY(e,t),typeof r!="function"&&(rv===null?rv=new Set([this]):rv.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function C0e(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new yot;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Not.bind(null,e,t,n),t.then(e,e))}function I0e(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function k0e(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=yg(-1,1),t.tag=2,nv(n,t,1))),n.lanes|=1),e)}var vot=o1.ReactCurrentOwner,ic=!1;function tl(e,t,n,r){t.child=e===null?g4e(t,null,n,r):JT(t,e.child,n,r)}function R0e(e,t,n,r,i){n=n.render;var s=t.ref;return cT(t,i),r=Tee(e,t,n,r,s,i),n=See(),e!==null&&!ic?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$g(e,t,i)):(Ts&&n&&dee(t),t.flags|=1,tl(e,t,r,i),t.child)}function N0e(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!$ee(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,z4e(e,t,s,r,i)):(e=LD(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wk,n(o,r)&&e.ref===t.ref)return $g(e,t,i)}return t.flags|=1,e=sv(s,r),e.ref=t.ref,e.return=t,t.child=e}function z4e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(wk(s,r)&&e.ref===t.ref)if(ic=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ic=!0);else return t.lanes=e.lanes,$g(e,t,i)}return bY(e,t,n,r,i)}function V4e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xi(qE,Gc),Gc|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xi(qE,Gc),Gc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Xi(qE,Gc),Gc|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Xi(qE,Gc),Gc|=r;return tl(e,t,i,n),t.child}function H4e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function bY(e,t,n,r,i){var s=dc(n)?Lw:Ou.current;return s=XT(t,s),cT(t,i),n=Tee(e,t,n,r,s,i),r=See(),e!==null&&!ic?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$g(e,t,i)):(Ts&&r&&dee(t),t.flags|=1,tl(e,t,n,i),t.child)}function P0e(e,t,n,r,i){if(dc(n)){var s=!0;r$(t)}else s=!1;if(cT(t,i),t.stateNode===null)DD(e,t),B4e(t,n,r),yY(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=yd(l):(l=dc(n)?Lw:Ou.current,l=XT(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&A0e(t,o,r,l),gy=!1;var d=t.memoizedState;o.state=d,u$(t,r,o,i),u=t.memoizedState,a!==r||d!==u||fc.current||gy?(typeof c=="function"&&(gY(t,n,c,r),u=t.memoizedState),(a=gy||S0e(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,v4e(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:ch(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=yd(u):(u=dc(n)?Lw:Ou.current,u=XT(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&A0e(t,o,r,u),gy=!1,d=t.memoizedState,o.state=d,u$(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||fc.current||gy?(typeof h=="function"&&(gY(t,n,h,r),p=t.memoizedState),(l=gy||S0e(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return _Y(e,t,n,r,s,i)}function _Y(e,t,n,r,i,s){H4e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&y0e(t,n,!1),$g(e,t,s);r=t.stateNode,vot.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=JT(t,e.child,null,s),t.child=JT(t,null,a,s)):tl(e,t,a,s),t.memoizedState=r.state,i&&y0e(t,n,!0),t.child}function q4e(e){var t=e.stateNode;t.pendingContext?g0e(e,t.pendingContext,t.pendingContext!==t.context):t.context&&g0e(e,t.context,!1),_ee(e,t.containerInfo)}function D0e(e,t,n,r,i){return QT(),pee(i),t.flags|=256,tl(e,t,n,r),t.child}var wY={dehydrated:null,treeContext:null,retryLane:0};function xY(e){return{baseLanes:e,cachePool:null,transitions:null}}function W4e(e,t,n){var r=t.pendingProps,i=Ps.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Xi(Ps,i&1),e===null)return pY(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=W7(o,r,0,null),e=xw(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=xY(n),t.memoizedState=wY,e):Iee(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return bot(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=sv(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=sv(a,s):(s=xw(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?xY(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=wY,r}return s=e.child,e=s.sibling,r=sv(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Iee(e,t){return t=W7({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fP(e,t,n,r){return r!==null&&pee(r),JT(t,e.child,null,n),e=Iee(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bot(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Mz(Error(bt(422))),fP(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=W7({mode:"visible",children:r.children},i,0,null),s=xw(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&JT(t,e.child,null,o),t.child.memoizedState=xY(o),t.memoizedState=wY,s);if(!(t.mode&1))return fP(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(bt(419)),r=Mz(s,r,void 0),fP(e,t,o,r)}if(a=(o&e.childLanes)!==0,ic||a){if(r=va,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Og(e,i),$h(r,e,i,-1))}return Oee(),r=Mz(Error(bt(421))),fP(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Pot.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ef=tv(i.nextSibling),lf=t,Ts=!0,gh=null,e!==null&&(td[nd++]=rg,td[nd++]=ig,td[nd++]=Mw,rg=e.id,ig=e.overflow,Mw=t),t=Iee(t,r.children),t.flags|=4096,t)}function O0e(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),mY(e.return,t,n)}function Fz(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function G4e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(tl(e,t,r.children,n),r=Ps.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&O0e(e,n,t);else if(e.tag===19)O0e(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Xi(Ps,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&l$(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fz(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&l$(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fz(t,!0,n,null,s);break;case"together":Fz(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function DD(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $g(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Bw|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(bt(153));if(t.child!==null){for(e=t.child,n=sv(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sv(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _ot(e,t,n){switch(t.tag){case 3:q4e(t),QT();break;case 5:b4e(t);break;case 1:dc(t.type)&&r$(t);break;case 4:_ee(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Xi(o$,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Xi(Ps,Ps.current&1),t.flags|=128,null):n&t.child.childLanes?W4e(e,t,n):(Xi(Ps,Ps.current&1),e=$g(e,t,n),e!==null?e.sibling:null);Xi(Ps,Ps.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return G4e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xi(Ps,Ps.current),r)break;return null;case 22:case 23:return t.lanes=0,V4e(e,t,n)}return $g(e,t,n)}var Y4e,EY,K4e,X4e;Y4e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};EY=function(){};K4e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,tw(h0.current);var s=null;switch(n){case"input":i=qG(e,i),r=qG(e,r),s=[];break;case"select":i=Os({},i,{value:void 0}),r=Os({},r,{value:void 0}),s=[];break;case"textarea":i=YG(e,i),r=YG(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=t$)}XG(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(pk.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(pk.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&as("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};X4e=function(e,t,n,r){n!==r&&(t.flags|=4)};function f3(e,t){if(!Ts)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function wot(e,t,n){var r=t.pendingProps;switch(hee(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return uu(t),null;case 1:return dc(t.type)&&n$(),uu(t),null;case 3:return r=t.stateNode,ZT(),hs(fc),hs(Ou),xee(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(lP(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gh!==null&&(NY(gh),gh=null))),EY(e,t),uu(t),null;case 5:wee(t);var i=tw(Ak.current);if(n=t.type,e!==null&&t.stateNode!=null)K4e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(bt(166));return uu(t),null}if(e=tw(h0.current),lP(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[qp]=t,r[Tk]=s,e=(t.mode&1)!==0,n){case"dialog":as("cancel",r),as("close",r);break;case"iframe":case"object":case"embed":as("load",r);break;case"video":case"audio":for(i=0;i<TI.length;i++)as(TI[i],r);break;case"source":as("error",r);break;case"img":case"image":case"link":as("error",r),as("load",r);break;case"details":as("toggle",r);break;case"input":Vpe(r,s),as("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},as("invalid",r);break;case"textarea":qpe(r,s),as("invalid",r)}XG(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&uP(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&uP(r.textContent,a,e),i=["children",""+a]):pk.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&as("scroll",r)}switch(n){case"input":eP(r),Hpe(r,s,!0);break;case"textarea":eP(r),Wpe(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=t$)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=TIe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[qp]=t,e[Tk]=r,Y4e(e,t,!1,!1),t.stateNode=e;e:{switch(o=QG(n,r),n){case"dialog":as("cancel",e),as("close",e),i=r;break;case"iframe":case"object":case"embed":as("load",e),i=r;break;case"video":case"audio":for(i=0;i<TI.length;i++)as(TI[i],e);i=r;break;case"source":as("error",e),i=r;break;case"img":case"image":case"link":as("error",e),as("load",e),i=r;break;case"details":as("toggle",e),i=r;break;case"input":Vpe(e,r),i=qG(e,r),as("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Os({},r,{value:void 0}),as("invalid",e);break;case"textarea":qpe(e,r),i=YG(e,r),as("invalid",e);break;default:i=r}XG(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?CIe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&SIe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&mk(e,u):typeof u=="number"&&mk(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pk.hasOwnProperty(s)?u!=null&&s==="onScroll"&&as("scroll",e):u!=null&&JZ(e,s,u,o))}switch(n){case"input":eP(e),Hpe(e,r,!1);break;case"textarea":eP(e),Wpe(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xv(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?oT(e,!!r.multiple,s,!1):r.defaultValue!=null&&oT(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=t$)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return uu(t),null;case 6:if(e&&t.stateNode!=null)X4e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(bt(166));if(n=tw(Ak.current),tw(h0.current),lP(t)){if(r=t.stateNode,n=t.memoizedProps,r[qp]=t,(s=r.nodeValue!==n)&&(e=lf,e!==null))switch(e.tag){case 3:uP(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&uP(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qp]=t,t.stateNode=r}return uu(t),null;case 13:if(hs(Ps),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ts&&ef!==null&&t.mode&1&&!(t.flags&128))p4e(),QT(),t.flags|=98560,s=!1;else if(s=lP(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(bt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(bt(317));s[qp]=t}else QT(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;uu(t),s=!1}else gh!==null&&(NY(gh),gh=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ps.current&1?Vo===0&&(Vo=3):Oee())),t.updateQueue!==null&&(t.flags|=4),uu(t),null);case 4:return ZT(),EY(e,t),e===null&&xk(t.stateNode.containerInfo),uu(t),null;case 10:return yee(t.type._context),uu(t),null;case 17:return dc(t.type)&&n$(),uu(t),null;case 19:if(hs(Ps),s=t.memoizedState,s===null)return uu(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)f3(s,!1);else{if(Vo!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=l$(e),o!==null){for(t.flags|=128,f3(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Xi(Ps,Ps.current&1|2),t.child}e=e.sibling}s.tail!==null&&oo()>tS&&(t.flags|=128,r=!0,f3(s,!1),t.lanes=4194304)}else{if(!r)if(e=l$(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),f3(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ts)return uu(t),null}else 2*oo()-s.renderingStartTime>tS&&n!==1073741824&&(t.flags|=128,r=!0,f3(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=oo(),t.sibling=null,n=Ps.current,Xi(Ps,r?n&1|2:n&1),t):(uu(t),null);case 22:case 23:return Dee(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Gc&1073741824&&(uu(t),t.subtreeFlags&6&&(t.flags|=8192)):uu(t),null;case 24:return null;case 25:return null}throw Error(bt(156,t.tag))}function xot(e,t){switch(hee(t),t.tag){case 1:return dc(t.type)&&n$(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ZT(),hs(fc),hs(Ou),xee(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wee(t),null;case 13:if(hs(Ps),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(bt(340));QT()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hs(Ps),null;case 4:return ZT(),null;case 10:return yee(t.type._context),null;case 22:case 23:return Dee(),null;case 24:return null;default:return null}}var dP=!1,wu=!1,Eot=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function HE(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zs(e,t,r)}else n.current=null}function TY(e,t,n){try{n()}catch(r){zs(e,t,r)}}var $0e=!1;function Tot(e,t){if(aY=JO,e=t4e(),fee(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(uY={focusedElem:e,selectionRange:n},JO=!1,Vt=t;Vt!==null;)if(t=Vt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Vt=e;else for(;Vt!==null;){t=Vt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ch(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(bt(163))}}catch(w){zs(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Vt=e;break}Vt=t.return}return p=$0e,$0e=!1,p}function _4(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&TY(t,n,s)}i=i.next}while(i!==r)}}function H7(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function SY(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Q4e(e){var t=e.alternate;t!==null&&(e.alternate=null,Q4e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qp],delete t[Tk],delete t[fY],delete t[oot],delete t[aot])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function J4e(e){return e.tag===5||e.tag===3||e.tag===4}function L0e(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||J4e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function AY(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=t$));else if(r!==4&&(e=e.child,e!==null))for(AY(e,t,n),e=e.sibling;e!==null;)AY(e,t,n),e=e.sibling}function CY(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(CY(e,t,n),e=e.sibling;e!==null;)CY(e,t,n),e=e.sibling}var $a=null,dh=!1;function W1(e,t,n){for(n=n.child;n!==null;)Z4e(e,t,n),n=n.sibling}function Z4e(e,t,n){if(d0&&typeof d0.onCommitFiberUnmount=="function")try{d0.onCommitFiberUnmount(L7,n)}catch{}switch(n.tag){case 5:wu||HE(n,t);case 6:var r=$a,i=dh;$a=null,W1(e,t,n),$a=r,dh=i,$a!==null&&(dh?(e=$a,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$a.removeChild(n.stateNode));break;case 18:$a!==null&&(dh?(e=$a,n=n.stateNode,e.nodeType===8?Nz(e.parentNode,n):e.nodeType===1&&Nz(e,n),bk(e)):Nz($a,n.stateNode));break;case 4:r=$a,i=dh,$a=n.stateNode.containerInfo,dh=!0,W1(e,t,n),$a=r,dh=i;break;case 0:case 11:case 14:case 15:if(!wu&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&TY(n,t,o),i=i.next}while(i!==r)}W1(e,t,n);break;case 1:if(!wu&&(HE(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){zs(n,t,a)}W1(e,t,n);break;case 21:W1(e,t,n);break;case 22:n.mode&1?(wu=(r=wu)||n.memoizedState!==null,W1(e,t,n),wu=r):W1(e,t,n);break;default:W1(e,t,n)}}function M0e(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Eot),t.forEach(function(r){var i=Dot.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jd(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:$a=a.stateNode,dh=!1;break e;case 3:$a=a.stateNode.containerInfo,dh=!0;break e;case 4:$a=a.stateNode.containerInfo,dh=!0;break e}a=a.return}if($a===null)throw Error(bt(160));Z4e(s,o,i),$a=null,dh=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){zs(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eke(t,e),t=t.sibling}function eke(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jd(t,e),Ep(e),r&4){try{_4(3,e,e.return),H7(3,e)}catch(m){zs(e,e.return,m)}try{_4(5,e,e.return)}catch(m){zs(e,e.return,m)}}break;case 1:Jd(t,e),Ep(e),r&512&&n!==null&&HE(n,n.return);break;case 5:if(Jd(t,e),Ep(e),r&512&&n!==null&&HE(n,n.return),e.flags&32){var i=e.stateNode;try{mk(i,"")}catch(m){zs(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&xIe(i,s),QG(a,o);var l=QG(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?CIe(i,f):c==="dangerouslySetInnerHTML"?SIe(i,f):c==="children"?mk(i,f):JZ(i,c,f,l)}switch(a){case"input":WG(i,s);break;case"textarea":EIe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?oT(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?oT(i,!!s.multiple,s.defaultValue,!0):oT(i,!!s.multiple,s.multiple?[]:"",!1))}i[Tk]=s}catch(m){zs(e,e.return,m)}}break;case 6:if(Jd(t,e),Ep(e),r&4){if(e.stateNode===null)throw Error(bt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){zs(e,e.return,m)}}break;case 3:if(Jd(t,e),Ep(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bk(t.containerInfo)}catch(m){zs(e,e.return,m)}break;case 4:Jd(t,e),Ep(e);break;case 13:Jd(t,e),Ep(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Nee=oo())),r&4&&M0e(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(wu=(l=wu)||c,Jd(t,e),wu=l):Jd(t,e),Ep(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Vt=e,c=e.child;c!==null;){for(f=Vt=c;Vt!==null;){switch(d=Vt,h=d.child,d.tag){case 0:case 11:case 14:case 15:_4(4,d,d.return);break;case 1:HE(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){zs(r,n,m)}}break;case 5:HE(d,d.return);break;case 22:if(d.memoizedState!==null){B0e(f);continue}}h!==null?(h.return=d,Vt=h):B0e(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=AIe("display",o))}catch(m){zs(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){zs(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Jd(t,e),Ep(e),r&4&&M0e(e);break;case 21:break;default:Jd(t,e),Ep(e)}}function Ep(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(J4e(n)){var r=n;break e}n=n.return}throw Error(bt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(mk(i,""),r.flags&=-33);var s=L0e(e);CY(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=L0e(e);AY(e,a,o);break;default:throw Error(bt(161))}}catch(u){zs(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Sot(e,t,n){Vt=e,tke(e)}function tke(e,t,n){for(var r=(e.mode&1)!==0;Vt!==null;){var i=Vt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||dP;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||wu;a=dP;var l=wu;if(dP=o,(wu=u)&&!l)for(Vt=i;Vt!==null;)o=Vt,u=o.child,o.tag===22&&o.memoizedState!==null?j0e(i):u!==null?(u.return=o,Vt=u):j0e(i);for(;s!==null;)Vt=s,tke(s),s=s.sibling;Vt=i,dP=a,wu=l}F0e(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Vt=s):F0e(e)}}function F0e(e){for(;Vt!==null;){var t=Vt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wu||H7(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wu)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ch(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&x0e(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}x0e(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&bk(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(bt(163))}wu||t.flags&512&&SY(t)}catch(d){zs(t,t.return,d)}}if(t===e){Vt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function B0e(e){for(;Vt!==null;){var t=Vt;if(t===e){Vt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function j0e(e){for(;Vt!==null;){var t=Vt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{H7(4,t)}catch(u){zs(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){zs(t,i,u)}}var s=t.return;try{SY(t)}catch(u){zs(t,s,u)}break;case 5:var o=t.return;try{SY(t)}catch(u){zs(t,o,u)}}}catch(u){zs(t,t.return,u)}if(t===e){Vt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Vt=a;break}Vt=t.return}}var Aot=Math.ceil,d$=o1.ReactCurrentDispatcher,kee=o1.ReactCurrentOwner,pd=o1.ReactCurrentBatchConfig,Xr=0,va=null,So=null,Va=0,Gc=0,qE=cb(0),Vo=0,Rk=null,Bw=0,q7=0,Ree=0,w4=null,Ql=null,Nee=0,tS=1/0,jm=null,h$=!1,IY=null,rv=null,hP=!1,My=null,p$=0,x4=0,kY=null,OD=-1,$D=0;function dl(){return Xr&6?oo():OD!==-1?OD:OD=oo()}function iv(e){return e.mode&1?Xr&2&&Va!==0?Va&-Va:lot.transition!==null?($D===0&&($D=BIe()),$D):(e=Ci,e!==0||(e=window.event,e=e===void 0?16:WIe(e.type)),e):1}function $h(e,t,n,r){if(50<x4)throw x4=0,kY=null,Error(bt(185));uR(e,n,r),(!(Xr&2)||e!==va)&&(e===va&&(!(Xr&2)&&(q7|=n),Vo===4&&Ay(e,Va)),hc(e,r),n===1&&Xr===0&&!(t.mode&1)&&(tS=oo()+500,U7&&fb()))}function hc(e,t){var n=e.callbackNode;lst(e,t);var r=QO(e,e===va?Va:0);if(r===0)n!==null&&Kpe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Kpe(n),t===1)e.tag===0?uot(U0e.bind(null,e)):f4e(U0e.bind(null,e)),iot(function(){!(Xr&6)&&fb()}),n=null;else{switch(jIe(r)){case 1:n=ree;break;case 4:n=MIe;break;case 16:n=XO;break;case 536870912:n=FIe;break;default:n=XO}n=lke(n,nke.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nke(e,t){if(OD=-1,$D=0,Xr&6)throw Error(bt(327));var n=e.callbackNode;if(fT()&&e.callbackNode!==n)return null;var r=QO(e,e===va?Va:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=m$(e,r);else{t=r;var i=Xr;Xr|=2;var s=ike();(va!==e||Va!==t)&&(jm=null,tS=oo()+500,ww(e,t));do try{kot();break}catch(a){rke(e,a)}while(!0);gee(),d$.current=s,Xr=i,So!==null?t=0:(va=null,Va=0,t=Vo)}if(t!==0){if(t===2&&(i=nY(e),i!==0&&(r=i,t=RY(e,i))),t===1)throw n=Rk,ww(e,0),Ay(e,r),hc(e,oo()),n;if(t===6)Ay(e,r);else{if(i=e.current.alternate,!(r&30)&&!Cot(i)&&(t=m$(e,r),t===2&&(s=nY(e),s!==0&&(r=s,t=RY(e,s))),t===1))throw n=Rk,ww(e,0),Ay(e,r),hc(e,oo()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(bt(345));case 2:T_(e,Ql,jm);break;case 3:if(Ay(e,r),(r&130023424)===r&&(t=Nee+500-oo(),10<t)){if(QO(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){dl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=cY(T_.bind(null,e,Ql,jm),t);break}T_(e,Ql,jm);break;case 4:if(Ay(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Oh(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=oo()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Aot(r/1960))-r,10<r){e.timeoutHandle=cY(T_.bind(null,e,Ql,jm),r);break}T_(e,Ql,jm);break;case 5:T_(e,Ql,jm);break;default:throw Error(bt(329))}}}return hc(e,oo()),e.callbackNode===n?nke.bind(null,e):null}function RY(e,t){var n=w4;return e.current.memoizedState.isDehydrated&&(ww(e,t).flags|=256),e=m$(e,t),e!==2&&(t=Ql,Ql=n,t!==null&&NY(t)),e}function NY(e){Ql===null?Ql=e:Ql.push.apply(Ql,e)}function Cot(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hh(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ay(e,t){for(t&=~Ree,t&=~q7,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Oh(t),r=1<<n;e[n]=-1,t&=~r}}function U0e(e){if(Xr&6)throw Error(bt(327));fT();var t=QO(e,0);if(!(t&1))return hc(e,oo()),null;var n=m$(e,t);if(e.tag!==0&&n===2){var r=nY(e);r!==0&&(t=r,n=RY(e,r))}if(n===1)throw n=Rk,ww(e,0),Ay(e,t),hc(e,oo()),n;if(n===6)throw Error(bt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,T_(e,Ql,jm),hc(e,oo()),null}function Pee(e,t){var n=Xr;Xr|=1;try{return e(t)}finally{Xr=n,Xr===0&&(tS=oo()+500,U7&&fb())}}function jw(e){My!==null&&My.tag===0&&!(Xr&6)&&fT();var t=Xr;Xr|=1;var n=pd.transition,r=Ci;try{if(pd.transition=null,Ci=1,e)return e()}finally{Ci=r,pd.transition=n,Xr=t,!(Xr&6)&&fb()}}function Dee(){Gc=qE.current,hs(qE)}function ww(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,rot(n)),So!==null)for(n=So.return;n!==null;){var r=n;switch(hee(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&n$();break;case 3:ZT(),hs(fc),hs(Ou),xee();break;case 5:wee(r);break;case 4:ZT();break;case 13:hs(Ps);break;case 19:hs(Ps);break;case 10:yee(r.type._context);break;case 22:case 23:Dee()}n=n.return}if(va=e,So=e=sv(e.current,null),Va=Gc=t,Vo=0,Rk=null,Ree=q7=Bw=0,Ql=w4=null,ew!==null){for(t=0;t<ew.length;t++)if(n=ew[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ew=null}return e}function rke(e,t){do{var n=So;try{if(gee(),ND.current=f$,c$){for(var r=Ds.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}c$=!1}if(Fw=0,ua=Mo=Ds=null,b4=!1,Ck=0,kee.current=null,n===null||n.return===null){Vo=1,Rk=t,So=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Va,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=I0e(o);if(h!==null){h.flags&=-257,k0e(h,o,a,s,t),h.mode&1&&C0e(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){C0e(s,l,t),Oee();break e}u=Error(bt(426))}}else if(Ts&&a.mode&1){var g=I0e(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),k0e(g,o,a,s,t),pee(eS(u,a));break e}}s=u=eS(u,a),Vo!==4&&(Vo=2),w4===null?w4=[s]:w4.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=j4e(s,u,t);w0e(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(rv===null||!rv.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=U4e(s,a,t);w0e(s,w);break e}}s=s.return}while(s!==null)}oke(n)}catch(x){t=x,So===n&&n!==null&&(So=n=n.return);continue}break}while(!0)}function ike(){var e=d$.current;return d$.current=f$,e===null?f$:e}function Oee(){(Vo===0||Vo===3||Vo===2)&&(Vo=4),va===null||!(Bw&268435455)&&!(q7&268435455)||Ay(va,Va)}function m$(e,t){var n=Xr;Xr|=2;var r=ike();(va!==e||Va!==t)&&(jm=null,ww(e,t));do try{Iot();break}catch(i){rke(e,i)}while(!0);if(gee(),Xr=n,d$.current=r,So!==null)throw Error(bt(261));return va=null,Va=0,Vo}function Iot(){for(;So!==null;)ske(So)}function kot(){for(;So!==null&&!est();)ske(So)}function ske(e){var t=uke(e.alternate,e,Gc);e.memoizedProps=e.pendingProps,t===null?oke(e):So=t,kee.current=null}function oke(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=xot(n,t),n!==null){n.flags&=32767,So=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Vo=6,So=null;return}}else if(n=wot(n,t,Gc),n!==null){So=n;return}if(t=t.sibling,t!==null){So=t;return}So=t=e}while(t!==null);Vo===0&&(Vo=5)}function T_(e,t,n){var r=Ci,i=pd.transition;try{pd.transition=null,Ci=1,Rot(e,t,n,r)}finally{pd.transition=i,Ci=r}return null}function Rot(e,t,n,r){do fT();while(My!==null);if(Xr&6)throw Error(bt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(bt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(cst(e,s),e===va&&(So=va=null,Va=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hP||(hP=!0,lke(XO,function(){return fT(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pd.transition,pd.transition=null;var o=Ci;Ci=1;var a=Xr;Xr|=4,kee.current=null,Tot(e,n),eke(n,e),Xst(uY),JO=!!aY,uY=aY=null,e.current=n,Sot(n),tst(),Xr=a,Ci=o,pd.transition=s}else e.current=n;if(hP&&(hP=!1,My=e,p$=i),s=e.pendingLanes,s===0&&(rv=null),ist(n.stateNode),hc(e,oo()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(h$)throw h$=!1,e=IY,IY=null,e;return p$&1&&e.tag!==0&&fT(),s=e.pendingLanes,s&1?e===kY?x4++:(x4=0,kY=e):x4=0,fb(),null}function fT(){if(My!==null){var e=jIe(p$),t=pd.transition,n=Ci;try{if(pd.transition=null,Ci=16>e?16:e,My===null)var r=!1;else{if(e=My,My=null,p$=0,Xr&6)throw Error(bt(331));var i=Xr;for(Xr|=4,Vt=e.current;Vt!==null;){var s=Vt,o=s.child;if(Vt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Vt=l;Vt!==null;){var c=Vt;switch(c.tag){case 0:case 11:case 15:_4(8,c,s)}var f=c.child;if(f!==null)f.return=c,Vt=f;else for(;Vt!==null;){c=Vt;var d=c.sibling,h=c.return;if(Q4e(c),c===l){Vt=null;break}if(d!==null){d.return=h,Vt=d;break}Vt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Vt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Vt=o;else e:for(;Vt!==null;){if(s=Vt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_4(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Vt=y;break e}Vt=s.return}}var v=e.current;for(Vt=v;Vt!==null;){o=Vt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Vt=b;else e:for(o=v;Vt!==null;){if(a=Vt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:H7(9,a)}}catch(x){zs(a,a.return,x)}if(a===o){Vt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Vt=w;break e}Vt=a.return}}if(Xr=i,fb(),d0&&typeof d0.onPostCommitFiberRoot=="function")try{d0.onPostCommitFiberRoot(L7,e)}catch{}r=!0}return r}finally{Ci=n,pd.transition=t}}return!1}function z0e(e,t,n){t=eS(n,t),t=j4e(e,t,1),e=nv(e,t,1),t=dl(),e!==null&&(uR(e,1,t),hc(e,t))}function zs(e,t,n){if(e.tag===3)z0e(e,e,n);else for(;t!==null;){if(t.tag===3){z0e(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rv===null||!rv.has(r))){e=eS(n,e),e=U4e(t,e,1),t=nv(t,e,1),e=dl(),t!==null&&(uR(t,1,e),hc(t,e));break}}t=t.return}}function Not(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=dl(),e.pingedLanes|=e.suspendedLanes&n,va===e&&(Va&n)===n&&(Vo===4||Vo===3&&(Va&130023424)===Va&&500>oo()-Nee?ww(e,0):Ree|=n),hc(e,t)}function ake(e,t){t===0&&(e.mode&1?(t=rP,rP<<=1,!(rP&130023424)&&(rP=4194304)):t=1);var n=dl();e=Og(e,t),e!==null&&(uR(e,t,n),hc(e,n))}function Pot(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ake(e,n)}function Dot(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(bt(314))}r!==null&&r.delete(t),ake(e,n)}var uke;uke=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||fc.current)ic=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ic=!1,_ot(e,t,n);ic=!!(e.flags&131072)}else ic=!1,Ts&&t.flags&1048576&&d4e(t,s$,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;DD(e,t),e=t.pendingProps;var i=XT(t,Ou.current);cT(t,n),i=Tee(null,t,r,e,i,n);var s=See();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dc(r)?(s=!0,r$(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bee(t),i.updater=V7,t.stateNode=i,i._reactInternals=t,yY(t,r,e,n),t=_Y(null,t,r,!0,s,n)):(t.tag=0,Ts&&s&&dee(t),tl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(DD(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=$ot(r),e=ch(r,e),i){case 0:t=bY(null,t,r,e,n);break e;case 1:t=P0e(null,t,r,e,n);break e;case 11:t=R0e(null,t,r,e,n);break e;case 14:t=N0e(null,t,r,ch(r.type,e),n);break e}throw Error(bt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ch(r,i),bY(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ch(r,i),P0e(e,t,r,i,n);case 3:e:{if(q4e(t),e===null)throw Error(bt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,v4e(e,t),u$(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=eS(Error(bt(423)),t),t=D0e(e,t,r,n,i);break e}else if(r!==i){i=eS(Error(bt(424)),t),t=D0e(e,t,r,n,i);break e}else for(ef=tv(t.stateNode.containerInfo.firstChild),lf=t,Ts=!0,gh=null,n=g4e(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(QT(),r===i){t=$g(e,t,n);break e}tl(e,t,r,n)}t=t.child}return t;case 5:return b4e(t),e===null&&pY(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,lY(r,i)?o=null:s!==null&&lY(r,s)&&(t.flags|=32),H4e(e,t),tl(e,t,o,n),t.child;case 6:return e===null&&pY(t),null;case 13:return W4e(e,t,n);case 4:return _ee(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=JT(t,null,r,n):tl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ch(r,i),R0e(e,t,r,i,n);case 7:return tl(e,t,t.pendingProps,n),t.child;case 8:return tl(e,t,t.pendingProps.children,n),t.child;case 12:return tl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Xi(o$,r._currentValue),r._currentValue=o,s!==null)if(Hh(s.value,o)){if(s.children===i.children&&!fc.current){t=$g(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=yg(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),mY(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(bt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),mY(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}tl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cT(t,n),i=yd(i),r=r(i),t.flags|=1,tl(e,t,r,n),t.child;case 14:return r=t.type,i=ch(r,t.pendingProps),i=ch(r.type,i),N0e(e,t,r,i,n);case 15:return z4e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ch(r,i),DD(e,t),t.tag=1,dc(r)?(e=!0,r$(t)):e=!1,cT(t,n),B4e(t,r,i),yY(t,r,i,n),_Y(null,t,r,!0,e,n);case 19:return G4e(e,t,n);case 22:return V4e(e,t,n)}throw Error(bt(156,t.tag))};function lke(e,t){return LIe(e,t)}function Oot(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ld(e,t,n,r){return new Oot(e,t,n,r)}function $ee(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $ot(e){if(typeof e=="function")return $ee(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eee)return 11;if(e===tee)return 14}return 2}function sv(e,t){var n=e.alternate;return n===null?(n=ld(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function LD(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")$ee(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case $E:return xw(n.children,i,s,t);case ZZ:o=8,i|=8;break;case UG:return e=ld(12,n,t,i|2),e.elementType=UG,e.lanes=s,e;case zG:return e=ld(13,n,t,i),e.elementType=zG,e.lanes=s,e;case VG:return e=ld(19,n,t,i),e.elementType=VG,e.lanes=s,e;case bIe:return W7(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yIe:o=10;break e;case vIe:o=9;break e;case eee:o=11;break e;case tee:o=14;break e;case my:o=16,r=null;break e}throw Error(bt(130,e==null?e:typeof e,""))}return t=ld(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function xw(e,t,n,r){return e=ld(7,e,r,t),e.lanes=n,e}function W7(e,t,n,r){return e=ld(22,e,r,t),e.elementType=bIe,e.lanes=n,e.stateNode={isHidden:!1},e}function Bz(e,t,n){return e=ld(6,e,null,t),e.lanes=n,e}function jz(e,t,n){return t=ld(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lot(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_z(0),this.expirationTimes=_z(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_z(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lee(e,t,n,r,i,s,o,a,u){return e=new Lot(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ld(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bee(s),e}function Mot(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:OE,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function cke(e){if(!e)return Ev;e=e._reactInternals;e:{if(Cx(e)!==e||e.tag!==1)throw Error(bt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dc(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(bt(171))}if(e.tag===1){var n=e.type;if(dc(n))return c4e(e,n,t)}return t}function fke(e,t,n,r,i,s,o,a,u){return e=Lee(n,r,!0,e,i,s,o,a,u),e.context=cke(null),n=e.current,r=dl(),i=iv(n),s=yg(r,i),s.callback=t??null,nv(n,s,i),e.current.lanes=i,uR(e,i,r),hc(e,r),e}function G7(e,t,n,r){var i=t.current,s=dl(),o=iv(i);return n=cke(n),t.context===null?t.context=n:t.pendingContext=n,t=yg(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=nv(i,t,o),e!==null&&($h(e,i,o,s),RD(e,i,o)),o}function g$(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function V0e(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Mee(e,t){V0e(e,t),(e=e.alternate)&&V0e(e,t)}var dke=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fee(e){this._internalRoot=e}Y7.prototype.render=Fee.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(bt(409));G7(e,t,null,null)};Y7.prototype.unmount=Fee.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jw(function(){G7(null,e,null,null)}),t[Dg]=null}};function Y7(e){this._internalRoot=e}Y7.prototype.unstable_scheduleHydration=function(e){if(e){var t=VIe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sy.length&&t!==0&&t<Sy[n].priority;n++);Sy.splice(n,0,e),n===0&&qIe(e)}};function Bee(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function K7(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function H0e(){}function Fot(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=g$(o);s.call(l)}}var o=fke(t,r,e,0,null,!1,!1,"",H0e);return e._reactRootContainer=o,e[Dg]=o.current,xk(e.nodeType===8?e.parentNode:e),jw(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=g$(u);a.call(l)}}var u=Lee(e,0,!1,null,null,!1,!1,"",H0e);return e._reactRootContainer=u,e[Dg]=u.current,xk(e.nodeType===8?e.parentNode:e),jw(function(){G7(t,u,n,r)}),u}function X7(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=g$(o);a.call(u)}}G7(t,o,e,i)}else o=Fot(n,t,e,i,r);return g$(o)}UIe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=EI(t.pendingLanes);n!==0&&(iee(t,n|1),hc(t,oo()),!(Xr&6)&&(tS=oo()+500,fb()))}break;case 13:jw(function(){var r=Og(e,1);if(r!==null){var i=dl();$h(r,e,1,i)}}),Mee(e,1)}};see=function(e){if(e.tag===13){var t=Og(e,134217728);if(t!==null){var n=dl();$h(t,e,134217728,n)}Mee(e,134217728)}};zIe=function(e){if(e.tag===13){var t=iv(e),n=Og(e,t);if(n!==null){var r=dl();$h(n,e,t,r)}Mee(e,t)}};VIe=function(){return Ci};HIe=function(e,t){var n=Ci;try{return Ci=e,t()}finally{Ci=n}};ZG=function(e,t,n){switch(t){case"input":if(WG(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=j7(r);if(!i)throw Error(bt(90));wIe(r),WG(r,i)}}}break;case"textarea":EIe(e,n);break;case"select":t=n.value,t!=null&&oT(e,!!n.multiple,t,!1)}};RIe=Pee;NIe=jw;var Bot={usingClientEntryPoint:!1,Events:[cR,BE,j7,IIe,kIe,Pee]},d3={findFiberByHostInstance:Z_,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jot={bundleType:d3.bundleType,version:d3.version,rendererPackageName:d3.rendererPackageName,rendererConfig:d3.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o1.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=OIe(e),e===null?null:e.stateNode},findFiberByHostInstance:d3.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pP.isDisabled&&pP.supportsFiber)try{L7=pP.inject(jot),d0=pP}catch{}}Nf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bot;Nf.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bee(t))throw Error(bt(200));return Mot(e,t,null,n)};Nf.createRoot=function(e,t){if(!Bee(e))throw Error(bt(299));var n=!1,r="",i=dke;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Lee(e,1,!1,null,null,n,!1,r,i),e[Dg]=t.current,xk(e.nodeType===8?e.parentNode:e),new Fee(t)};Nf.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(bt(188)):(e=Object.keys(e).join(","),Error(bt(268,e)));return e=OIe(t),e=e===null?null:e.stateNode,e};Nf.flushSync=function(e){return jw(e)};Nf.hydrate=function(e,t,n){if(!K7(t))throw Error(bt(200));return X7(null,e,t,!0,n)};Nf.hydrateRoot=function(e,t,n){if(!Bee(e))throw Error(bt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=dke;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=fke(t,null,e,1,n??null,i,!1,s,o),e[Dg]=t.current,xk(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Y7(t)};Nf.render=function(e,t,n){if(!K7(t))throw Error(bt(200));return X7(null,e,t,!1,n)};Nf.unmountComponentAtNode=function(e){if(!K7(e))throw Error(bt(40));return e._reactRootContainer?(jw(function(){X7(null,null,e,!1,function(){e._reactRootContainer=null,e[Dg]=null})}),!0):!1};Nf.unstable_batchedUpdates=Pee;Nf.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!K7(n))throw Error(bt(200));if(e==null||e._reactInternals===void 0)throw Error(bt(38));return X7(e,t,n,!1,r)};Nf.version="18.3.1-next-f1338f8080-20240426";function hke(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hke)}catch(e){console.error(e)}}hke(),hIe.exports=Nf;var dR=hIe.exports;const SI=Rf(dR);var q0e=dR;BG.createRoot=q0e.createRoot,BG.hydrateRoot=q0e.hydrateRoot;var Wp=function(){return Wp=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Wp.apply(this,arguments)};function hR(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Xm(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function W0e(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Uot(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Or(e){return this instanceof Or?(this.v=e,this):new Or(e)}function nw(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Or?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Uz(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Or(e[i](o)),done:!1}:s?s(o):o}:s}}function E4(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof W0e=="function"?W0e(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var MD="right-scroll-bar-position",FD="width-before-scroll-bar",zot="with-scroll-bars-hidden",Vot="--removed-body-scroll-bar-size";function zz(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Hot(e,t){var n=R.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var qot=typeof window<"u"?R.useLayoutEffect:R.useEffect,G0e=new WeakMap;function Wot(e,t){var n=Hot(null,function(r){return e.forEach(function(i){return zz(i,r)})});return qot(function(){var r=G0e.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||zz(a,null)}),s.forEach(function(a){i.has(a)||zz(a,o)})}G0e.set(n,e)},[e]),n}function Got(e){return e}function Yot(e,t){t===void 0&&(t=Got);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function Kot(e){e===void 0&&(e={});var t=Yot(null);return t.options=Wp({async:!0,ssr:!1},e),t}var pke=function(e){var t=e.sideCar,n=hR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return R.createElement(r,Wp({},n))};pke.isSideCarExport=!0;function Xot(e,t){return e.useMedium(t),pke}var mke=Kot(),Vz=function(){},Q7=R.forwardRef(function(e,t){var n=R.useRef(null),r=R.useState({onScrollCapture:Vz,onWheelCapture:Vz,onTouchMoveCapture:Vz}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=hR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,x=Wot([n,t]),S=Wp(Wp({},b),i);return R.createElement(R.Fragment,null,c&&R.createElement(w,{sideCar:mke,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?R.cloneElement(R.Children.only(a),Wp(Wp({},S),{ref:x})):R.createElement(y,Wp({},S,{className:u,ref:x}),a))});Q7.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Q7.classNames={fullWidth:FD,zeroRight:MD};var Qot=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Jot(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Qot();return t&&e.setAttribute("nonce",t),e}function Zot(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function eat(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var tat=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Jot())&&(Zot(t,n),eat(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},nat=function(){var e=tat();return function(t,n){R.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},gke=function(){var e=nat(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},rat={left:0,top:0,right:0,gap:0},Hz=function(e){return parseInt(e||"",10)||0},iat=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Hz(n),Hz(r),Hz(i)]},sat=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return rat;var t=iat(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},oat=gke(),dT="data-scroll-locked",aat=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(zot,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(dT,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(MD,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(FD,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(MD," .").concat(MD,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(FD," .").concat(FD,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(dT,`] {
    `).concat(Vot,": ").concat(a,`px;
  }
`)},Y0e=function(){var e=parseInt(document.body.getAttribute(dT)||"0",10);return isFinite(e)?e:0},uat=function(){R.useEffect(function(){return document.body.setAttribute(dT,(Y0e()+1).toString()),function(){var e=Y0e()-1;e<=0?document.body.removeAttribute(dT):document.body.setAttribute(dT,e.toString())}},[])},lat=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;uat();var s=R.useMemo(function(){return sat(i)},[i]);return R.createElement(oat,{styles:aat(s,!t,i,n?"":"!important")})},PY=!1;if(typeof window<"u")try{var mP=Object.defineProperty({},"passive",{get:function(){return PY=!0,!0}});window.addEventListener("test",mP,mP),window.removeEventListener("test",mP,mP)}catch{PY=!1}var j2=PY?{passive:!1}:!1,cat=function(e){return e.tagName==="TEXTAREA"},yke=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!cat(e)&&n[t]==="visible")},fat=function(e){return yke(e,"overflowY")},dat=function(e){return yke(e,"overflowX")},K0e=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=vke(e,r);if(i){var s=bke(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},hat=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},pat=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},vke=function(e,t){return e==="v"?fat(t):dat(t)},bke=function(e,t){return e==="v"?hat(t):pat(t)},mat=function(e,t){return e==="h"&&t==="rtl"?-1:1},gat=function(e,t,n,r,i){var s=mat(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=bke(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&vke(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},gP=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},X0e=function(e){return[e.deltaX,e.deltaY]},Q0e=function(e){return e&&"current"in e?e.current:e},yat=function(e,t){return e[0]===t[0]&&e[1]===t[1]},vat=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},bat=0,U2=[];function _at(e){var t=R.useRef([]),n=R.useRef([0,0]),r=R.useRef(),i=R.useState(bat++)[0],s=R.useState(gke)[0],o=R.useRef(e);R.useEffect(function(){o.current=e},[e]),R.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Uot([e.lockRef.current],(e.shards||[]).map(Q0e),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=R.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=gP(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],x,S=m.target,A=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&A==="h"&&S.type==="range")return!1;var C=K0e(A,S);if(!C)return!0;if(C?x=A:(x=A==="v"?"h":"v",C=K0e(A,S)),!C)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=x),!x)return!0;var N=r.current||x;return gat(N,g,m,N==="h"?b:w)},[]),u=R.useCallback(function(m){var g=m;if(!(!U2.length||U2[U2.length-1]!==s)){var y="deltaY"in g?X0e(g):gP(g),v=t.current.filter(function(x){return x.name===g.type&&(x.target===g.target||g.target===x.shadowParent)&&yat(x.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(Q0e).filter(Boolean).filter(function(x){return x.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=R.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:wat(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=R.useCallback(function(m){n.current=gP(m),r.current=void 0},[]),f=R.useCallback(function(m){l(m.type,X0e(m),m.target,a(m,e.lockRef.current))},[]),d=R.useCallback(function(m){l(m.type,gP(m),m.target,a(m,e.lockRef.current))},[]);R.useEffect(function(){return U2.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,j2),document.addEventListener("touchmove",u,j2),document.addEventListener("touchstart",c,j2),function(){U2=U2.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,j2),document.removeEventListener("touchmove",u,j2),document.removeEventListener("touchstart",c,j2)}},[]);var h=e.removeScrollBar,p=e.inert;return R.createElement(R.Fragment,null,p?R.createElement(s,{styles:vat(i)}):null,h?R.createElement(lat,{gapMode:e.gapMode}):null)}function wat(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const xat=Xot(mke,_at);var nS=R.forwardRef(function(e,t){return R.createElement(Q7,Wp({},e,{ref:t,sideCar:xat}))});nS.classNames=Q7.classNames;function Gi(e){return Object.keys(e)}function qz(e){return e&&typeof e=="object"&&!Array.isArray(e)}function jee(e,t){const n={...e},r=t;return qz(e)&&qz(t)&&Object.keys(t).forEach(i=>{qz(r[i])&&i in e?n[i]=jee(n[i],r[i]):n[i]=r[i]}),n}function Eat(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Tat(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function Nk(e){const t=Tat(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function Wz(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function _ke(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?Wz(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?Wz(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?Wz(s):s}}return r}return n}const $e=_ke("rem",{shouldScale:!0}),y$=_ke("em");function db(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function wke(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function hb(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==R.Fragment:!1}function Qa(e){const t=R.createContext(null);return[({children:i,value:s})=>E.jsx(t.Provider,{value:s,children:i}),()=>{const i=R.useContext(t);if(i===null)throw new Error(e);return i}]}function yA(e=null){const t=R.createContext(e);return[({children:i,value:s})=>E.jsx(t.Provider,{value:s,children:i}),()=>R.useContext(t)]}function v$(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function b$(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function Sat(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function Aat(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function Cat(e,t,n){return b$(e,n)===b$(t,n)}function Uee({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=b$(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>Cat(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=Aat(l,u,r),f=Sat(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const Iat={app:100,modal:200,popover:300,overlay:400,max:9999};function np(e){return Iat[e]}const kat=()=>{};function Rat(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||kat:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Wn(e,t="size",n=!0){if(e!==void 0)return wke(e)?n?$e(e):e:`var(--${t}-${e})`}function Co(e){return Wn(e,"mantine-spacing")}function ji(e){return e===void 0?"var(--mantine-radius-default)":Wn(e,"mantine-radius")}function hl(e){return Wn(e,"mantine-font-size")}function xke(e){return Wn(e,"mantine-line-height",!1)}function zee(e){if(e)return Wn(e,"mantine-shadow",!1)}function sg(e,t){return n=>{e==null||e(n),t==null||t(n)}}function Vee(e,t){return e in t.breakpoints?Nk(t.breakpoints[e]):Nk(e)}function Pk(e,t){const n=e.map(r=>({value:r,px:Vee(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Ah(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function Nat(e,t,n){var r;return n?Array.from(((r=b$(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function Pat(){const[e,t]=R.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function og(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function hT(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Cy(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e}),R.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function J7(e,t){const n=Cy(e),r=R.useRef(0);return R.useEffect(()=>()=>window.clearTimeout(r.current),[]),R.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const J0e=["mousedown","touchstart"];function Dat(e,t,n){const r=R.useRef();return R.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||J0e).forEach(s=>document.addEventListener(s,i)),()=>{(t||J0e).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function Oat(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function $at(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function Lat(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=R.useState(n?t:$at(e)),s=R.useRef();return R.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),Oat(s.current,o=>i(o.matches))},[e]),r}const Ix=typeof document<"u"?R.useLayoutEffect:R.useEffect;function I0(e,t){const n=R.useRef(!1);R.useEffect(()=>()=>{n.current=!1},[]),R.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Eke({opened:e,shouldReturnFocus:t=!0}){const n=R.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return I0(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function Mat(e,t="body > :not(script)"){const n=hT(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const Fat=/input|select|textarea|button|object/,Tke="a, input, select, textarea, button, object, [tabindex]";function Bat(e){return e.style.display==="none"}function jat(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(Bat(n))return!1;n=n.parentNode}return!0}function Ske(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function DY(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Ske(e));return(Fat.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&jat(e)}function Ake(e){const t=Ske(e);return(Number.isNaN(t)||t>=0)&&DY(e)}function Uat(e){return Array.from(e.querySelectorAll(Tke)).filter(Ake)}function zat(e,t){const n=Uat(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function Vat(e=!0){const t=R.useRef(),n=R.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(Tke));o=a.find(Ake)||a.find(DY)||null,!o&&DY(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=R.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=Mat(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return R.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&zat(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const Hat=e=>(e+1)%1e6;function qat(){const[,e]=R.useReducer(Hat,0);return e}const Wat=ni.useId||(()=>{});function Gat(){const e=Wat();return e?`mantine-${e.replace(/:/g,"")}`:""}function ju(e){const t=Gat(),[n,r]=R.useState(t);return Ix(()=>{r(hT())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function Cke(e,t,n){R.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function Hee(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Ike(...e){return t=>{e.forEach(n=>Hee(n,t))}}function mo(...e){return R.useCallback(Ike(...e),e)}function kke(e,t,n="ltr"){const r=R.useRef(null),i=R.useRef(!1),s=R.useRef(!1),o=R.useRef(0),[a,u]=R.useState(!1);return R.useEffect(()=>{i.current=!0},[]),R.useEffect(()=>{var v,b;const l=({x:w,y:x})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const A=og((w-S.left)/S.width,0,1);e({x:n==="ltr"?A:1-A,y:og((x-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function wa({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=R.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function Z7(e,t){return Lat("(prefers-reduced-motion: reduce)",e,t)}const Yat={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function cf(e){const t=R.useRef(0),n=R.useRef(null),[r,i]=R.useState(Yat),s=R.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return R.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function Kat(e){const[t,{width:n,height:r}]=cf(e);return{ref:t,width:n,height:r}}function Xat(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function Qat(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function Jat(e){return t=>Qat(Xat(e),t)}function Zat(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{Jat(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function qee(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=R.useState(e),o=R.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=R.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=R.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function eut(e,t,n={autoInvoke:!1}){const r=R.useRef(null),i=R.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=R.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return R.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function tut(e,t,n){const r=R.useRef(),i=R.useRef(null);return R.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function nut(){const[e,t]=R.useState(!1);return R.useEffect(()=>t(!0),[]),e}function rut(e,t){const n=Cy(e),r=R.useRef(),i=R.useRef(),s=R.useRef(!0),o=R.useRef(t),a=R.useRef(-1),u=()=>window.clearTimeout(a.current),l=R.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=R.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=R.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return R.useEffect(()=>{o.current=t},[t]),[f,u]}function iut(e,t){const[n,r]=R.useState(e),[i,s]=rut(r,t);return R.useEffect(()=>s,[]),[n,i]}function sut(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function out(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Ix(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>sut(`${e}:${String(r)}`,i[0])}return[t,n]}var aut={};function Rke(){return typeof process<"u"&&aut?"production":"development"}function Nke(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Nke(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function co(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Nke(e))&&(r&&(r+=" "),r+=t);return r}const uut={};function lut(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=co(t[r],i):t[r]=i})}),t}function eM({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||uut);return lut(s)}function _$({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const Pke=R.createContext(null);function pb(){const e=R.useContext(Pke);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function cut(){return pb().cssVariablesResolver}function fut(){return pb().classNamesPrefix}function Wee(){return pb().getStyleNonce}function dut(){return pb().withStaticClasses}function hut(){return pb().headless}function put(){var e;return(e=pb().stylesTransform)==null?void 0:e.sx}function mut(){var e;return(e=pb().stylesTransform)==null?void 0:e.styles}function gut(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function yut(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function vut(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function but(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function Gee(e){return gut(e)?yut(e):e.startsWith("rgb")?vut(e):e.startsWith("hsl")?but(e):{r:0,g:0,b:0,a:1}}function yP(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=Gee(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function Dk(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function Gz(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function _ut(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function wut(e){if(e.startsWith("oklch("))return(_ut(e)||0)/100;const{r:t,g:n,b:r}=Gee(e),i=t/255,s=n/255,o=r/255,a=Gz(i),u=Gz(s),l=Gz(o);return .2126*a+.7152*u+.0722*l}function h3(e,t=.179){return e.startsWith("var(")?!1:wut(e)>t}function K0({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:h3(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:h3(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:h3(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][Dk(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:h3(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:h3(e,t.luminanceThreshold),shade:s,variable:void 0}}function Li(e,t){const n=K0({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function OY(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Li(n.from,t),i=Li(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function $p(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=Gee(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const z2=$p,xut=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=K0({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${$e(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${$e(1)} solid transparent`}:{background:e,hover:yP(e,.1),color:a,border:`${$e(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:$p(a,.1),hover:$p(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}}return{background:$p(e,.1),hover:$p(e,.12),color:e,border:`${$e(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${$e(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:$p(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${$e(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:$p(e,.05),color:e,border:`${$e(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:$p(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}}return{background:"transparent",hover:$p(e,.12),color:e,border:`${$e(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${$e(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:yP(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${$e(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:yP(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${$e(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:yP(t.white,.01),color:e,border:`${$e(1)} solid transparent`}:n==="gradient"?{background:OY(r,t),hover:OY(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${$e(1)} solid var(--mantine-color-default-border)`}:{}},Eut={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Z0e="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Yee={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Eut,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:xut,autoContrast:!1,luminanceThreshold:.3,fontFamily:Z0e,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Z0e,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:$e(34),lineHeight:"1.3"},h2:{fontSize:$e(26),lineHeight:"1.35"},h3:{fontSize:$e(22),lineHeight:"1.4"},h4:{fontSize:$e(18),lineHeight:"1.45"},h5:{fontSize:$e(16),lineHeight:"1.5"},h6:{fontSize:$e(14),lineHeight:"1.5"}}},fontSizes:{xs:$e(12),sm:$e(14),md:$e(16),lg:$e(18),xl:$e(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:$e(2),sm:$e(4),md:$e(8),lg:$e(16),xl:$e(32)},spacing:{xs:$e(10),sm:$e(12),md:$e(16),lg:$e(20),xl:$e(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), 0 ${$e(1)} ${$e(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(10)} ${$e(15)} ${$e(-5)}, rgba(0, 0, 0, 0.04) 0 ${$e(7)} ${$e(7)} ${$e(-5)}`,md:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(20)} ${$e(25)} ${$e(-5)}, rgba(0, 0, 0, 0.04) 0 ${$e(10)} ${$e(10)} ${$e(-5)}`,lg:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(28)} ${$e(23)} ${$e(-7)}, rgba(0, 0, 0, 0.04) 0 ${$e(12)} ${$e(12)} ${$e(-7)}`,xl:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(36)} ${$e(28)} ${$e(-7)}, rgba(0, 0, 0, 0.04) 0 ${$e(17)} ${$e(17)} ${$e(-7)}`},other:{},components:{}};function eme(e){return e==="auto"||e==="dark"||e==="light"}function Tut({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return eme(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&eme(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const Sut="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",tme="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Yz(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function nme(e){if(!(e.primaryColor in e.colors))throw new Error(Sut);if(typeof e.primaryShade=="object"&&(!Yz(e.primaryShade.dark)||!Yz(e.primaryShade.light)))throw new Error(tme);if(typeof e.primaryShade=="number"&&!Yz(e.primaryShade))throw new Error(tme)}function Aut(e,t){var r;if(!t)return nme(e),e;const n=jee(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),nme(n),n}const Kee=R.createContext(null),Cut=()=>R.useContext(Kee)||Yee;function go(){const e=R.useContext(Kee);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function Dke({theme:e,children:t,inherit:n=!0}){const r=Cut(),i=R.useMemo(()=>Aut(n?r:Yee,e),[e,r,n]);return E.jsx(Kee.Provider,{value:i,children:t})}Dke.displayName="@mantine/core/MantineThemeProvider";function Iut(){const e=go(),t=Wee(),n=Gi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=Nk(e.breakpoints[i]),a=s?`${o-.1}px`:y$(o-.1),u=s?`${o}px`:y$(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return E.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function Kz(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Xz(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function kut(e,t){const n=Kz(e.variables),r=n?Xz(t,n):"",i=Kz(e.dark),s=i?Xz(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=Kz(e.light),a=o?Xz(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function mb({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&K0({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function rme(e,t){return mb({color:e.colors[e.primaryColor][Dk(e,t)],theme:e,autoContrast:null})}function vP({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=Dk(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:z2(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:z2(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:z2(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=Dk(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:z2(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:z2(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:z2(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function Rut(e){return Array.isArray(e)?e:Array(10).fill(e)}function Nut(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function V2(e,t,n){Gi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const Oke=e=>{const t=Dk(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:$e(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":rme(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":rme(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};V2(r.variables,e.breakpoints,"breakpoint"),V2(r.variables,e.spacing,"spacing"),V2(r.variables,e.fontSizes,"font-size"),V2(r.variables,e.lineHeights,"line-height"),V2(r.variables,e.shadows,"shadow"),V2(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Gi(e.colors).forEach(s=>{const o=e.colors[s];if(Nut(o)){Object.assign(r.light,vP({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,vP({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,vP({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,vP({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Gi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function Put({theme:e,generator:t}){const n=Oke(e),r=t==null?void 0:t(e);return r?jee(n,r):n}const Qz=Oke(Yee);function Dut(e){const t={variables:{},light:{},dark:{}};return Gi(e.variables).forEach(n=>{Qz.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Gi(e.light).forEach(n=>{Qz.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Gi(e.dark).forEach(n=>{Qz.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function Out(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function $ke({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=go(),r=Wee(),i=cut(),s=Put({theme:n,generator:i}),o=e===":root"&&t,a=o?Dut(s):s,u=kut(a,e);return u?E.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":Out(e)}`}}):null}$ke.displayName="@mantine/CssVariables";function $ut(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function H2(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function Lut({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=R.useRef(),[s,o]=R.useState(()=>e.get(t)),a=r||s,u=R.useCallback(c=>{r||(H2(c,n),o(c),e.set(c))},[e.set,a,r]),l=R.useCallback(()=>{o(t),H2(t,n),e.clear()},[e.clear,t]);return R.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Ix(()=>{H2(e.get(t),n)},[]),R.useEffect(()=>{var f;if(r)return H2(r,n),()=>{};r===void 0&&H2(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&H2(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function Mut({respectReducedMotion:e,getRootElement:t}){Ix(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}$ut();function Lke({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=Tut(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=Lut({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return Mut({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),E.jsx(Pke.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:E.jsxs(Dke,{theme:e,children:[o&&E.jsx($ke,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&E.jsx(Iut,{}),t]})})}Lke.displayName="@mantine/core/MantineProvider";function pR({classNames:e,styles:t,props:n,stylesCtx:r}){const i=go();return{resolvedClassNames:eM({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:_$({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const Fut={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function But({theme:e,options:t,unstyled:n}){return co((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||Fut[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function jut({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return eM({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function ime({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return eM({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function Uut({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function zut({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function Vut({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function Hut({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=eM({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function qut({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function Wut({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return co(But({theme:e,options:t,unstyled:a||h}),Hut({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),qut({options:t,classes:o,selector:r,unstyled:a}),ime({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),ime({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),jut({selector:r,stylesCtx:f,options:t,props:c,theme:e}),Uut({rootSelector:l,selector:r,className:u}),zut({selector:r,classes:o,unstyled:a||h}),d&&!h&&Vut({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function Gut({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return _$({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function $Y({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...$Y({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function Yut(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...db(n[r])}}),t),{})}function Kut({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=Yut([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function Xut({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&Gut({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&_$({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&_$({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...Kut({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?$Y({style:u,theme:e}):null,...$Y({style:r==null?void 0:r.style,theme:e})}}function Qut({props:e,stylesCtx:t,themeName:n}){var o;const r=go(),i=(o=mut())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Bt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=go(),h=fut(),p=dut(),m=hut(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=Qut({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:Wut({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:Xut({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function vA(e,t){return typeof e=="boolean"?e:t.autoContrast}function We(e,t,n){var o;const r=go(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...db(n)}}function Jz(e){return Gi(e).reduce((t,n)=>e[n]!==void 0?`${t}${Eat(n)}:${e[n]};`:t,"").trim()}function Jut({selector:e,styles:t,media:n,container:r}){const i=t?Jz(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${Jz(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${Jz(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function kx(e){const t=Wee();return E.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:Jut(e)}})}function Rx(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:x,opacity:S,ff:A,fz:C,fw:N,lts:k,ta:D,lh:L,fs:O,tt:B,td:q,w:H,miw:G,maw:K,h:J,mih:F,mah:j,bgsz:W,bgp:M,bgr:V,bga:Q,pos:se,top:be,left:he,bottom:Ce,right:De,inset:rt,display:Re,flex:Tt,hiddenFrom:Ze,visibleFrom:It,lightHidden:mt,darkHidden:Se,sx:Fe,...st}=e;return{styleProps:db({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:x,opacity:S,ff:A,fz:C,fw:N,lts:k,ta:D,lh:L,fs:O,tt:B,td:q,w:H,miw:G,maw:K,h:J,mih:F,mah:j,bgsz:W,bgp:M,bgr:V,bga:Q,pos:se,top:be,left:he,bottom:Ce,right:De,inset:rt,display:Re,flex:Tt,hiddenFrom:Ze,visibleFrom:It,lightHidden:mt,darkHidden:Se,sx:Fe}),rest:st}}const Zut={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Xee(e,t){const n=K0({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function elt(e,t){const n=K0({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:Xee(e,t)}function tlt(e,t){if(typeof e=="number")return $e(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${$e(n)}`;return r&&(s+=` ${r}`),Rut.length>0&&(s+=` ${Xee(i.join(" "),t)}`),s.trim()}return e}const sme={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function nlt(e){return typeof e=="string"&&e in sme?sme[e]:e}const rlt=["h1","h2","h3","h4","h5","h6"];function ilt(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&rlt.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?$e(e):e}function slt(e){return e}const olt=["h1","h2","h3","h4","h5","h6"];function alt(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&olt.includes(e)?`var(--mantine-${e}-line-height)`:e}function ult(e){return typeof e=="number"?$e(e):e}function llt(e,t){if(typeof e=="number")return $e(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return $e(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const Zz={color:Xee,textColor:elt,fontSize:ilt,spacing:llt,identity:slt,size:ult,lineHeight:alt,fontFamily:nlt,border:tlt};function ome(e){return e.replace("(min-width: ","").replace("em)","")}function clt({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(ome(i))-Number(ome(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function flt(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function dlt(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function hlt(e){return typeof e=="object"&&e!==null?Gi(e).filter(t=>t!=="base"):[]}function plt(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function Mke({styleProps:e,data:t,theme:n}){return clt(Gi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=dlt(e[i]);if(!flt(e[i]))return o.forEach(l=>{r.inlineStyles[l]=Zz[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=hlt(e[i]);return o.forEach(l=>{a&&(r.styles[l]=Zz[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:Zz[s.type](plt(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function mR(){return`__m__-${R.useId().replace(/:/g,"")}`}function Qee(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Qee(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Fke(e){return e.startsWith("data-")?e:`data-${e}`}function mlt(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[Fke(n)]=e[n]),t},{})}function Bke(e){return e?typeof e=="string"?{[Fke(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Bke(n)}),{}):mlt(e):null}function LY(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...LY(r,t)}),{}):typeof e=="function"?e(t):e??{}}function glt({theme:e,style:t,vars:n,styleProps:r}){const i=LY(t,e),s=LY(n,e);return{...i,...s,...r}}const jke=R.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=go(),g=e||"div",{styleProps:y,rest:v}=Rx(h),b=put(),w=(C=b==null?void 0:b())==null?void 0:C(y.sx),x=mR(),S=Mke({styleProps:y,theme:m,data:Zut}),A={ref:p,style:glt({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:co(r,w,{[x]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":wke(o)?void 0:o||void 0,size:d,...Bke(s),...v};return E.jsxs(E.Fragment,{children:[S.hasResponsiveStyles&&E.jsx(kx,{selector:`.${x}`,styles:S.styles,media:S.media}),typeof f=="function"?f(A):E.jsx(g,{...A})]})});jke.displayName="@mantine/core/Box";const ke=jke;function Uke(e){return e}function ft(e){const t=R.forwardRef(e);return t.extend=Uke,t}function Qo(e){const t=R.forwardRef(e);return t.extend=Uke,t}const ylt=R.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function a1(){return R.useContext(ylt)}function vlt(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function eV(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const p3=typeof window<"u"&&window.requestAnimationFrame;function blt({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=R.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=R.useState(r?{}:o),l=p=>{dR.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||vlt(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}I0(()=>{typeof p3=="function"&&p3(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),p3(()=>{const p=eV(i);c({...f(p),height:p})})}:()=>{const p=eV(i);c({...f(p),willChange:"height",height:p}),p3(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=eV(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:Ike(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const _lt={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},tM=ft((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=We("Collapse",_lt,e),c=go(),f=Z7(),h=(c.respectReducedMotion?f:!1)?0:i,p=blt({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?E.jsx(ke,{...l,children:n}):null:E.jsx(ke,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...Qee(o,c)},ref:t,...l}),children:n})});tM.displayName="@mantine/core/Collapse";const[wlt,Id]=Qa("ScrollArea.Root component was not found in tree");function rS(e,t){const n=Cy(t);Ix(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const xlt=R.forwardRef((e,t)=>{const{style:n,...r}=e,i=Id(),[s,o]=R.useState(0),[a,u]=R.useState(0),l=!!(s&&a);return rS(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),rS(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?E.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),Elt=R.forwardRef((e,t)=>{const n=Id(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?E.jsx(xlt,{...e,ref:t}):null}),Tlt={scrollHideDelay:1e3,type:"hover"},zke=R.forwardRef((e,t)=>{const n=We("ScrollAreaRoot",Tlt,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=R.useState(null),[l,c]=R.useState(null),[f,d]=R.useState(null),[h,p]=R.useState(null),[m,g]=R.useState(null),[y,v]=R.useState(0),[b,w]=R.useState(0),[x,S]=R.useState(!1),[A,C]=R.useState(!1),N=mo(t,k=>u(k));return E.jsx(wlt,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:x,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:A,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:w},children:E.jsx(ke,{...o,ref:N,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});zke.displayName="@mantine/core/ScrollAreaRoot";function Vke(e,t){const n=e/t;return Number.isNaN(n)?0:n}function nM(e){const t=Vke(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Hke(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Slt(e,[t,n]){return Math.min(n,Math.max(t,e))}function ame(e,t,n="ltr"){const r=nM(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=Slt(e,u);return Hke([0,o],[0,a])(l)}function Alt(e,t,n,r="ltr"){const i=nM(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return Hke([u,l],f)(e)}function qke(e,t){return e>0&&e<t}function w$(e){return e?parseInt(e,10):0}function Ew(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[Clt,Wke]=Qa("ScrollAreaScrollbar was not found in tree"),Gke=R.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Id(),[h,p]=R.useState(null),m=mo(t,C=>p(C)),g=R.useRef(null),y=R.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=Cy(l),x=Cy(a),S=J7(c,10),A=C=>{if(g.current){const N=C.clientX-g.current.left,k=C.clientY-g.current.top;u({x:N,y:k})}};return R.useEffect(()=>{const C=N=>{const k=N.target;(h==null?void 0:h.contains(k))&&w(N,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,b,w]),R.useEffect(x,[n,x]),rS(h,S),rS(d.content,S),E.jsx(Clt,{value:{scrollbar:h,hasThumb:r,onThumbChange:Cy(i),onThumbPointerUp:Cy(s),onThumbPositionChange:x,onThumbPointerDown:Cy(o)},children:E.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:Ew(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",A(C))}),onPointerMove:Ew(e.onPointerMove,A),onPointerUp:Ew(e.onPointerUp,C=>{const N=C.target;N.hasPointerCapture(C.pointerId)&&N.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),Ilt=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Id(),[a,u]=R.useState(),l=R.useRef(null),c=mo(t,l,o.onScrollbarXChange);return R.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),E.jsx(Gke,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${nM(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),qke(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:w$(a.paddingLeft),paddingEnd:w$(a.paddingRight)}})}})}),klt=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Id(),[a,u]=R.useState(),l=R.useRef(null),c=mo(t,l,o.onScrollbarYChange);return R.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),E.jsx(Gke,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${nM(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),qke(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:w$(a.paddingTop),paddingEnd:w$(a.paddingBottom)}})}})}),Jee=R.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=a1(),s=Id(),o=R.useRef(null),a=R.useRef(0),[u,l]=R.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Vke(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>Alt(h,a.current,u,p);return n==="horizontal"?E.jsx(Ilt,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=ame(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?E.jsx(klt,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=ame(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),Yke=R.forwardRef((e,t)=>{const n=Id(),{forceMount:r,...i}=e,[s,o]=R.useState(!1),a=e.orientation==="horizontal",u=J7(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return rS(n.viewport,u),rS(n.content,u),r||s?E.jsx(Jee,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),Rlt=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Id(),[s,o]=R.useState(!1);return R.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?E.jsx(Yke,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),Nlt=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Id(),s=e.orientation==="horizontal",[o,a]=R.useState("hidden"),u=J7(()=>a("idle"),100);return R.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),R.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?E.jsx(Jee,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ew(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Ew(e.onPointerLeave,()=>a("idle"))}):null}),ume=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Id(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return R.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?E.jsx(Rlt,{...r,ref:t,forceMount:n}):i.type==="scroll"?E.jsx(Nlt,{...r,ref:t,forceMount:n}):i.type==="auto"?E.jsx(Yke,{...r,ref:t,forceMount:n}):i.type==="always"?E.jsx(Jee,{...r,ref:t}):null});function Plt(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Dlt=R.forwardRef((e,t)=>{const{style:n,...r}=e,i=Id(),s=Wke(),{onThumbPositionChange:o}=s,a=mo(t,c=>s.onThumbChange(c)),u=R.useRef(),l=J7(()=>{u.current&&(u.current(),u.current=void 0)},100);return R.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=Plt(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),E.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Ew(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Ew(e.onPointerUp,s.onThumbPointerUp)})}),lme=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Wke();return n||i.hasThumb?E.jsx(Dlt,{ref:t,...r}):null}),Kke=R.forwardRef(({children:e,style:t,...n},r)=>{const i=Id(),s=mo(r,i.onViewportChange);return E.jsx(ke,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:E.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Kke.displayName="@mantine/core/ScrollAreaViewport";var Zee={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Xke={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Olt=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":$e(t)}}),Lg=ft((e,t)=>{const n=We("ScrollArea",Xke,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=R.useState(!1),x=Bt({name:"ScrollArea",props:n,classes:Zee,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Olt});return E.jsxs(zke,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...x("root"),...v,children:[E.jsx(Kke,{...d,...x("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var A;(A=d==null?void 0:d.onScroll)==null||A.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&E.jsx(ume,{...x("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:E.jsx(lme,{...x("thumb")})}),(y==="xy"||y==="y")&&E.jsx(ume,{...x("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:E.jsx(lme,{...x("thumb")})}),E.jsx(Elt,{...x("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Lg.displayName="@mantine/core/ScrollArea";const ete=ft((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=We("ScrollAreaAutosize",Xke,e);return E.jsx(ke,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:E.jsx(ke,{style:{display:"flex",flexDirection:"column",flex:1},children:E.jsx(Lg,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Lg.classes=Zee;ete.displayName="@mantine/core/ScrollAreaAutosize";ete.classes=Zee;Lg.Autosize=ete;var Qke={root:"m_87cf2631"};const $lt={__staticSelector:"UnstyledButton"},gf=Qo((e,t)=>{const n=We("UnstyledButton",$lt,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Bt({name:s,props:n,classes:Qke,className:r,style:l,classNames:a,styles:u,unstyled:o});return E.jsx(ke,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});gf.classes=Qke;gf.displayName="@mantine/core/UnstyledButton";var Jke={root:"m_515a97f8"};const Llt={},tte=ft((e,t)=>{const n=We("VisuallyHidden",Llt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Bt({name:"VisuallyHidden",classes:Jke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return E.jsx(ke,{component:"span",ref:t,...c("root"),...l})});tte.classes=Jke;tte.displayName="@mantine/core/VisuallyHidden";var Zke={root:"m_1b7284a3"};const Mlt={},Flt=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:ji(t),"--paper-shadow":zee(n)}}),bA=Qo((e,t)=>{const n=We("Paper",Mlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Bt({name:"Paper",props:n,classes:Zke,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Flt});return E.jsx(ke,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});bA.classes=Zke;bA.displayName="@mantine/core/Paper";function _A(e){return e6e(e)?(e.nodeName||"").toLowerCase():"#document"}function pc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function u1(e){var t;return(t=(e6e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function e6e(e){return e instanceof Node||e instanceof pc(e).Node}function Ss(e){return e instanceof Element||e instanceof pc(e).Element}function yf(e){return e instanceof HTMLElement||e instanceof pc(e).HTMLElement}function MY(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof pc(e).ShadowRoot}function gR(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=bd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Blt(e){return["table","td","th"].includes(_A(e))}function nte(e){const t=rte(),n=bd(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function jlt(e){let t=Mg(e);for(;yf(t)&&!Tv(t);){if(nte(t))return t;t=Mg(t)}return null}function rte(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Tv(e){return["html","body","#document"].includes(_A(e))}function bd(e){return pc(e).getComputedStyle(e)}function rM(e){return Ss(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Mg(e){if(_A(e)==="html")return e;const t=e.assignedSlot||e.parentNode||MY(e)&&e.host||u1(e);return MY(t)?t.host:t}function t6e(e){const t=Mg(e);return Tv(t)?e.ownerDocument?e.ownerDocument.body:e.body:yf(t)&&gR(t)?t:t6e(t)}function vg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=t6e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=pc(i);return s?t.concat(o,o.visualViewport||[],gR(i)?i:[],o.frameElement&&n?vg(o.frameElement):[]):t.concat(i,vg(i,[],n))}function cme(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Ok(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&MY(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function n6e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function r6e(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Ult(e){return Hlt()?!1:!fme()&&e.width===0&&e.height===0||fme()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function zlt(){return/apple/i.test(navigator.vendor)}function fme(){const e=/android/i;return e.test(n6e())||e.test(r6e())}function Vlt(){return n6e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Hlt(){return r6e().includes("jsdom/")}function FY(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function qlt(e){return"nativeEvent"in e}function Wlt(e){return e.matches("html,body")}function rw(e){return(e==null?void 0:e.ownerDocument)||document}function tV(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function _E(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Glt="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Ylt(e){return yf(e)&&e.matches(Glt)}const tf=Math.min,xu=Math.max,x$=Math.round,bP=Math.floor,Sv=e=>({x:e,y:e}),Klt={left:"right",right:"left",bottom:"top",top:"bottom"},Xlt={start:"end",end:"start"};function BY(e,t,n){return xu(e,tf(t,n))}function Fg(e,t){return typeof e=="function"?e(t):e}function qh(e){return e.split("-")[0]}function wA(e){return e.split("-")[1]}function ite(e){return e==="x"?"y":"x"}function ste(e){return e==="y"?"height":"width"}function Nx(e){return["top","bottom"].includes(qh(e))?"y":"x"}function ote(e){return ite(Nx(e))}function Qlt(e,t,n){n===void 0&&(n=!1);const r=wA(e),i=ote(e),s=ste(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=E$(o)),[o,E$(o)]}function Jlt(e){const t=E$(e);return[jY(e),t,jY(t)]}function jY(e){return e.replace(/start|end/g,t=>Xlt[t])}function Zlt(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function ect(e,t,n,r){const i=wA(e);let s=Zlt(qh(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(jY)))),s}function E$(e){return e.replace(/left|right|bottom|top/g,t=>Klt[t])}function tct(e){return{top:0,right:0,bottom:0,left:0,...e}}function ate(e){return typeof e!="number"?tct(e):{top:e,right:e,bottom:e,left:e}}function iS(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function dme(e,t,n){let{reference:r,floating:i}=e;const s=Nx(t),o=ote(t),a=ste(o),u=qh(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(wA(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const nct=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=dme(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:x}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(l=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:c,y:f}=dme(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function ute(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Fg(t,e),p=ate(h),g=a[d?f==="floating"?"reference":"floating":f],y=iS(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},x=iS(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-x.top+p.top)/w.y,bottom:(x.bottom-y.bottom+p.bottom)/w.y,left:(y.left-x.left+p.left)/w.x,right:(x.right-y.right+p.right)/w.x}}const rct=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Fg(e,t)||{};if(l==null)return{};const f=ate(c),d={x:n,y:r},h=ote(i),p=ste(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],x=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let A=S?S[b]:0;(!A||!await(o.isElement==null?void 0:o.isElement(S)))&&(A=a.floating[b]||s.floating[p]);const C=w/2-x/2,N=A/2-m[p]/2-1,k=tf(f[y],N),D=tf(f[v],N),L=k,O=A-m[p]-D,B=A/2-m[p]/2+C,q=BY(L,B,O),H=!u.arrow&&wA(i)!=null&&B!==q&&s.reference[p]/2-(B<L?k:D)-m[p]/2<0,G=H?B<L?B-L:B-O:0;return{[h]:d[h]+G,data:{[h]:q,centerOffset:B-q-G,...H&&{alignmentOffset:G}},reset:H}}}),ict=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Fg(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=qh(i),v=qh(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[E$(a)]:Jlt(a));!d&&p!=="none"&&w.push(...ect(a,m,p,b));const x=[a,...w],S=await ute(t,g),A=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&A.push(S[y]),f){const L=Qlt(i,o,b);A.push(S[L[0]],S[L[1]])}if(C=[...C,{placement:i,overflows:A}],!A.every(L=>L<=0)){var N,k;const L=(((N=s.flip)==null?void 0:N.index)||0)+1,O=x[L];if(O)return{data:{index:L,overflows:C},reset:{placement:O}};let B=(k=C.filter(q=>q.overflows[0]<=0).sort((q,H)=>q.overflows[1]-H.overflows[1])[0])==null?void 0:k.placement;if(!B)switch(h){case"bestFit":{var D;const q=(D=C.map(H=>[H.placement,H.overflows.filter(G=>G>0).reduce((G,K)=>G+K,0)]).sort((H,G)=>H[1]-G[1])[0])==null?void 0:D[0];q&&(B=q);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function i6e(e){const t=tf(...e.map(s=>s.left)),n=tf(...e.map(s=>s.top)),r=xu(...e.map(s=>s.right)),i=xu(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function sct(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>iS(i6e(i)))}const oct=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Fg(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=sct(c),d=iS(i6e(c)),h=ate(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Nx(n)==="y"){const k=f[0],D=f[f.length-1],L=qh(n)==="top",O=k.top,B=D.bottom,q=L?k.left:D.left,H=L?k.right:D.right,G=H-q,K=B-O;return{top:O,bottom:B,left:q,right:H,width:G,height:K,x:q,y:O}}const g=qh(n)==="left",y=xu(...f.map(k=>k.right)),v=tf(...f.map(k=>k.left)),b=f.filter(k=>g?k.left===v:k.right===y),w=b[0].top,x=b[b.length-1].bottom,S=v,A=y,C=A-S,N=x-w;return{top:w,bottom:x,left:S,right:A,width:C,height:N,x:S,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function act(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=qh(n),a=wA(n),u=Nx(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Fg(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const uct=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await act(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},lct=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=Fg(e,t),l={x:n,y:r},c=await ute(t,u),f=Nx(qh(i)),d=ite(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=BY(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=BY(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},cct=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Fg(e,t),c={x:n,y:r},f=Nx(i),d=ite(f);let h=c[d],p=c[f];const m=Fg(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,x=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>x&&(h=x)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(qh(i)),x=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[d]:h,[f]:p}}}},fct=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Fg(e,t),u=await ute(t,a),l=qh(n),c=wA(n),f=Nx(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=tf(h-u[p],g),b=tf(d-u[m],y),w=!t.middlewareData.shift;let x=v,S=b;if(f?S=c||w?tf(b,y):y:x=c||w?tf(v,g):g,w&&!c){const C=xu(u.left,0),N=xu(u.right,0),k=xu(u.top,0),D=xu(u.bottom,0);f?S=d-2*(C!==0||N!==0?C+N:xu(u.left,u.right)):x=h-2*(k!==0||D!==0?k+D:xu(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:x});const A=await i.getDimensions(s.floating);return d!==A.width||h!==A.height?{reset:{rects:!0}}:{}}}};function s6e(e){const t=bd(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=yf(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=x$(n)!==s||x$(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function lte(e){return Ss(e)?e:e.contextElement}function pT(e){const t=lte(e);if(!yf(t))return Sv(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=s6e(t);let o=(s?x$(n.width):n.width)/r,a=(s?x$(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const dct=Sv(0);function o6e(e){const t=pc(e);return!rte()||!t.visualViewport?dct:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function hct(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==pc(e)?!1:t}function Uw(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=lte(e);let o=Sv(1);t&&(r?Ss(r)&&(o=pT(r)):o=pT(e));const a=hct(s,n,r)?o6e(s):Sv(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=pc(s),h=r&&Ss(r)?pc(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=pT(m),y=m.getBoundingClientRect(),v=bd(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=pc(m),m=p.frameElement}}return iS({width:c,height:f,x:u,y:l})}const pct=[":popover-open",":modal"];function cte(e){return pct.some(t=>{try{return e.matches(t)}catch{return!1}})}function mct(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=u1(r),a=t?cte(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=Sv(1);const c=Sv(0),f=yf(r);if((f||!f&&!s)&&((_A(r)!=="body"||gR(o))&&(u=rM(r)),yf(r))){const d=Uw(r);l=pT(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function gct(e){return Array.from(e.getClientRects())}function a6e(e){return Uw(u1(e)).left+rM(e).scrollLeft}function yct(e){const t=u1(e),n=rM(e),r=e.ownerDocument.body,i=xu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=xu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+a6e(e);const a=-n.scrollTop;return bd(r).direction==="rtl"&&(o+=xu(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function vct(e,t){const n=pc(e),r=u1(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=rte();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function bct(e,t){const n=Uw(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=yf(e)?pT(e):Sv(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function hme(e,t,n){let r;if(t==="viewport")r=vct(e,n);else if(t==="document")r=yct(u1(e));else if(Ss(t))r=bct(t,n);else{const i=o6e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return iS(r)}function u6e(e,t){const n=Mg(e);return n===t||!Ss(n)||Tv(n)?!1:bd(n).position==="fixed"||u6e(n,t)}function _ct(e,t){const n=t.get(e);if(n)return n;let r=vg(e,[],!1).filter(a=>Ss(a)&&_A(a)!=="body"),i=null;const s=bd(e).position==="fixed";let o=s?Mg(e):e;for(;Ss(o)&&!Tv(o);){const a=bd(o),u=nte(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||gR(o)&&!u&&u6e(e,o))?r=r.filter(c=>c!==o):i=a,o=Mg(o)}return t.set(e,r),r}function wct(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?cte(t)?[]:_ct(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=hme(t,c,i);return l.top=xu(f.top,l.top),l.right=tf(f.right,l.right),l.bottom=tf(f.bottom,l.bottom),l.left=xu(f.left,l.left),l},hme(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function xct(e){const{width:t,height:n}=s6e(e);return{width:t,height:n}}function Ect(e,t,n){const r=yf(t),i=u1(t),s=n==="fixed",o=Uw(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=Sv(0);if(r||!r&&!s)if((_A(t)!=="body"||gR(i))&&(a=rM(t)),r){const f=Uw(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=a6e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function nV(e){return bd(e).position==="static"}function pme(e,t){return!yf(e)||bd(e).position==="fixed"?null:t?t(e):e.offsetParent}function l6e(e,t){const n=pc(e);if(cte(e))return n;if(!yf(e)){let i=Mg(e);for(;i&&!Tv(i);){if(Ss(i)&&!nV(i))return i;i=Mg(i)}return n}let r=pme(e,t);for(;r&&Blt(r)&&nV(r);)r=pme(r,t);return r&&Tv(r)&&nV(r)&&!nte(r)?n:r||jlt(e)||n}const Tct=async function(e){const t=this.getOffsetParent||l6e,n=this.getDimensions,r=await n(e.floating);return{reference:Ect(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Sct(e){return bd(e).direction==="rtl"}const Act={convertOffsetParentRelativeRectToViewportRelativeRect:mct,getDocumentElement:u1,getClippingRect:wct,getOffsetParent:l6e,getElementRects:Tct,getClientRects:gct,getDimensions:xct,getScale:pT,isElement:Ss,isRTL:Sct};function Cct(e,t){let n=null,r;const i=u1(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=bP(c),p=bP(i.clientWidth-(l+f)),m=bP(i.clientHeight-(c+d)),g=bP(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:xu(0,tf(1,u))||1};let b=!0;function w(x){const S=x[0].intersectionRatio;if(S!==u){if(!b)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function Ict(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=lte(e),c=i||s?[...l?vg(l):[],...vg(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?Cct(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Uw(e):null;u&&g();function g(){const y=Uw(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const kct=uct,Rct=lct,Nct=ict,Pct=fct,mme=rct,Dct=oct,Oct=cct,$ct=(e,t,n)=>{const r=new Map,i={platform:Act,...n},s={...i.platform,_c:r};return nct(e,t,{...i,platform:s})};var BD=typeof document<"u"?R.useLayoutEffect:R.useEffect;function T$(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!T$(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!T$(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function c6e(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function gme(e,t){const n=c6e(e);return Math.round(t*n)/n}function yme(e){const t=R.useRef(e);return BD(()=>{t.current=e}),t}function Lct(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=R.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=R.useState(r);T$(d,r)||h(r);const[p,m]=R.useState(null),[g,y]=R.useState(null),v=R.useCallback(G=>{G!==S.current&&(S.current=G,m(G))},[]),b=R.useCallback(G=>{G!==A.current&&(A.current=G,y(G))},[]),w=s||p,x=o||g,S=R.useRef(null),A=R.useRef(null),C=R.useRef(c),N=u!=null,k=yme(u),D=yme(i),L=R.useCallback(()=>{if(!S.current||!A.current)return;const G={placement:t,strategy:n,middleware:d};D.current&&(G.platform=D.current),$ct(S.current,A.current,G).then(K=>{const J={...K,isPositioned:!0};O.current&&!T$(C.current,J)&&(C.current=J,dR.flushSync(()=>{f(J)}))})},[d,t,n,D]);BD(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(G=>({...G,isPositioned:!1})))},[l]);const O=R.useRef(!1);BD(()=>(O.current=!0,()=>{O.current=!1}),[]),BD(()=>{if(w&&(S.current=w),x&&(A.current=x),w&&x){if(k.current)return k.current(w,x,L);L()}},[w,x,L,k,N]);const B=R.useMemo(()=>({reference:S,floating:A,setReference:v,setFloating:b}),[v,b]),q=R.useMemo(()=>({reference:w,floating:x}),[w,x]),H=R.useMemo(()=>{const G={position:n,left:0,top:0};if(!q.floating)return G;const K=gme(q.floating,c.x),J=gme(q.floating,c.y);return a?{...G,transform:"translate("+K+"px, "+J+"px)",...c6e(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:K,top:J}},[n,a,q.floating,c.x,c.y]);return R.useMemo(()=>({...c,update:L,refs:B,elements:q,floatingStyles:H}),[c,L,B,q,H])}const Mct=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?mme({element:r.current,padding:i}).fn(n):{}:r?mme({element:r,padding:i}).fn(n):{}}}},f6e=(e,t)=>({...kct(e),options:[e,t]}),fte=(e,t)=>({...Rct(e),options:[e,t]}),vme=(e,t)=>({...Oct(e),options:[e,t]}),UY=(e,t)=>({...Nct(e),options:[e,t]}),Fct=(e,t)=>({...Pct(e),options:[e,t]}),zY=(e,t)=>({...Dct(e),options:[e,t]}),d6e=(e,t)=>({...Mct(e),options:[e,t]}),h6e={...WO},Bct=h6e.useInsertionEffect,jct=Bct||(e=>e());function Iy(e){const t=R.useRef(()=>{});return jct(()=>{t.current=e}),R.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var p0=typeof document<"u"?R.useLayoutEffect:R.useEffect;let bme=!1,Uct=0;const _me=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Uct++;function zct(){const[e,t]=R.useState(()=>bme?_me():void 0);return p0(()=>{e==null&&t(_me())},[]),R.useEffect(()=>{bme=!0},[]),e}const Vct=h6e.useId,p6e=Vct||zct;function Hct(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const qct=R.createContext(null),Wct=R.createContext(null),dte=()=>{var e;return((e=R.useContext(qct))==null?void 0:e.id)||null},hte=()=>R.useContext(Wct);function pte(e){return"data-floating-ui-"+e}function wme(e){const t=R.useRef(e);return p0(()=>{t.current=e}),t}const xme=pte("safe-polygon");function jD(e,t,n){return n&&!FY(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Gct(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=hte(),m=dte(),g=wme(c),y=wme(l),v=R.useRef(),b=R.useRef(-1),w=R.useRef(),x=R.useRef(-1),S=R.useRef(!0),A=R.useRef(!1),C=R.useRef(()=>{}),N=R.useCallback(()=>{var O;const B=(O=i.current.openEvent)==null?void 0:O.type;return(B==null?void 0:B.includes("mouse"))&&B!=="mousedown"},[i]);R.useEffect(()=>{if(!u)return;function O(B){let{open:q}=B;q||(clearTimeout(b.current),clearTimeout(x.current),S.current=!0)}return s.on("openchange",O),()=>{s.off("openchange",O)}},[u,s]),R.useEffect(()=>{if(!u||!g.current||!n)return;function O(q){N()&&r(!1,q,"hover")}const B=rw(a).documentElement;return B.addEventListener("mouseleave",O),()=>{B.removeEventListener("mouseleave",O)}},[a,n,r,u,g,N]);const k=R.useCallback(function(O,B,q){B===void 0&&(B=!0),q===void 0&&(q="hover");const H=jD(y.current,"close",v.current);H&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,O,q),H)):B&&(clearTimeout(b.current),r(!1,O,q))},[y,r]),D=Iy(()=>{C.current(),w.current=void 0}),L=Iy(()=>{if(A.current){const O=rw(a).body;O.style.pointerEvents="",O.removeAttribute(xme),A.current=!1}});return R.useEffect(()=>{if(!u)return;function O(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function B(G){if(clearTimeout(b.current),S.current=!1,f&&!FY(v.current)||d>0&&!jD(y.current,"open"))return;const K=jD(y.current,"open",v.current);K?b.current=window.setTimeout(()=>{r(!0,G,"hover")},K):r(!0,G,"hover")}function q(G){if(O())return;C.current();const K=rw(a);if(clearTimeout(x.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){L(),D(),k(G,!0,"safe-polygon")}});const F=w.current;K.addEventListener("mousemove",F),C.current=()=>{K.removeEventListener("mousemove",F)};return}(v.current==="touch"?!Ok(a,G.relatedTarget):!0)&&k(G)}function H(G){O()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){L(),D(),k(G)}})(G))}if(Ss(o)){const G=o;return n&&G.addEventListener("mouseleave",H),a==null||a.addEventListener("mouseleave",H),h&&G.addEventListener("mousemove",B,{once:!0}),G.addEventListener("mouseenter",B),G.addEventListener("mouseleave",q),()=>{n&&G.removeEventListener("mouseleave",H),a==null||a.removeEventListener("mouseleave",H),h&&G.removeEventListener("mousemove",B),G.removeEventListener("mouseenter",B),G.removeEventListener("mouseleave",q)}}},[o,a,u,e,f,d,h,k,D,L,r,n,p,y,g,i]),p0(()=>{var O;if(u&&n&&(O=g.current)!=null&&O.__options.blockPointerEvents&&N()){const q=rw(a).body;if(q.setAttribute(xme,""),q.style.pointerEvents="none",A.current=!0,Ss(o)&&a){var B;const H=o,G=p==null||(B=p.nodesRef.current.find(K=>K.id===m))==null||(B=B.context)==null?void 0:B.elements.floating;return G&&(G.style.pointerEvents=""),H.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{H.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,N]),p0(()=>{n||(v.current=void 0,D(),L())},[n,D,L]),R.useEffect(()=>()=>{D(),clearTimeout(b.current),clearTimeout(x.current),L()},[u,o,D,L]),R.useMemo(()=>{if(!u)return{};function O(B){v.current=B.pointerType}return{reference:{onPointerDown:O,onPointerEnter:O,onMouseMove(B){function q(){S.current||r(!0,B.nativeEvent,"hover")}f&&!FY(v.current)||n||d===0||(clearTimeout(x.current),v.current==="touch"?q():x.current=window.setTimeout(q,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(B){k(B.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const VY=()=>{},m6e=R.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:VY,setState:VY,isInstantPhase:!1}),g6e=()=>R.useContext(m6e);function Yct(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=R.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=R.useRef(null),a=R.useCallback(u=>{s({currentId:u})},[]);return p0(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),R.createElement(m6e.Provider,{value:R.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function Kct(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=g6e(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return p0(()=>{u&&(f({delay:{open:1,close:jD(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),p0(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),p0(()=>{l===VY||!n||l(o)},[n,l,o]),a}function rV(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Xct={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Qct={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Eme=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Jct(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=hte(),v=Iy(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=R.useRef(!1),x=R.useRef(!1),{escapeKey:S,outsidePress:A}=Eme(m),{escapeKey:C,outsidePress:N}=Eme(g),k=Iy(B=>{var q;if(!n||!u||!l||B.key!=="Escape")return;const H=(q=a.current.floatingContext)==null?void 0:q.nodeId,G=y?rV(y.nodesRef.current,H):[];if(!S&&(B.stopPropagation(),G.length>0)){let K=!0;if(G.forEach(J=>{var F;if((F=J.context)!=null&&F.open&&!J.context.dataRef.current.__escapeKeyBubbles){K=!1;return}}),!K)return}r(!1,qlt(B)?B.nativeEvent:B,"escape-key")}),D=Iy(B=>{var q;const H=()=>{var G;k(B),(G=_E(B))==null||G.removeEventListener("keydown",H)};(q=_E(B))==null||q.addEventListener("keydown",H)}),L=Iy(B=>{var q;const H=w.current;w.current=!1;const G=x.current;if(x.current=!1,f==="click"&&G||H||typeof b=="function"&&!b(B))return;const K=_E(B),J="["+pte("inert")+"]",F=rw(o).querySelectorAll(J);let j=Ss(K)?K:null;for(;j&&!Tv(j);){const Q=Mg(j);if(Tv(Q)||!Ss(Q))break;j=Q}if(F.length&&Ss(K)&&!Wlt(K)&&!Ok(K,o)&&Array.from(F).every(Q=>!Ok(j,Q)))return;if(yf(K)&&o){const Q=K.clientWidth>0&&K.scrollWidth>K.clientWidth,se=K.clientHeight>0&&K.scrollHeight>K.clientHeight;let be=se&&B.offsetX>K.clientWidth;if(se&&bd(K).direction==="rtl"&&(be=B.offsetX<=K.offsetWidth-K.clientWidth),be||Q&&B.offsetY>K.clientHeight)return}const W=(q=a.current.floatingContext)==null?void 0:q.nodeId,M=y&&rV(y.nodesRef.current,W).some(Q=>{var se;return tV(B,(se=Q.context)==null?void 0:se.elements.floating)});if(tV(B,o)||tV(B,s)||M)return;const V=y?rV(y.nodesRef.current,W):[];if(V.length>0){let Q=!0;if(V.forEach(se=>{var be;if((be=se.context)!=null&&be.open&&!se.context.dataRef.current.__outsidePressBubbles){Q=!1;return}}),!Q)return}r(!1,B,"outside-press")}),O=Iy(B=>{var q;const H=()=>{var G;L(B),(G=_E(B))==null||G.removeEventListener(f,H)};(q=_E(B))==null||q.addEventListener(f,H)});return R.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=A;function B(G){r(!1,G,"ancestor-scroll")}const q=rw(o);l&&q.addEventListener("keydown",C?D:k,C),b&&q.addEventListener(f,N?O:L,N);let H=[];return p&&(Ss(s)&&(H=vg(s)),Ss(o)&&(H=H.concat(vg(o))),!Ss(i)&&i&&i.contextElement&&(H=H.concat(vg(i.contextElement)))),H=H.filter(G=>{var K;return G!==((K=q.defaultView)==null?void 0:K.visualViewport)}),H.forEach(G=>{G.addEventListener("scroll",B,{passive:!0})}),()=>{l&&q.removeEventListener("keydown",C?D:k,C),b&&q.removeEventListener(f,N?O:L,N),H.forEach(G=>{G.removeEventListener("scroll",B)})}},[a,o,s,i,l,b,f,n,r,p,u,S,A,k,C,D,L,N,O]),R.useEffect(()=>{w.current=!1},[b,f]),R.useMemo(()=>u?{reference:{onKeyDown:k,[Xct[h]]:B=>{d&&r(!1,B.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[Qct[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function Zct(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=p6e(),s=R.useRef({}),[o]=R.useState(()=>Hct()),a=dte()!=null,[u,l]=R.useState(r.reference),c=Iy((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=R.useMemo(()=>({setPositionReference:l}),[]),d=R.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return R.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function mte(e){e===void 0&&(e={});const{nodeId:t}=e,n=Zct({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=R.useState(null),[a,u]=R.useState(null),c=(i==null?void 0:i.reference)||s,f=R.useRef(null),d=hte();p0(()=>{c&&(f.current=c)},[c]);const h=Lct({...e,elements:{...i,...a&&{reference:a}}}),p=R.useCallback(b=>{const w=Ss(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=R.useCallback(b=>{(Ss(b)||b===null)&&(f.current=b,o(b)),(Ss(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ss(b))&&h.refs.setReference(b)},[h.refs]),g=R.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=R.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=R.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return p0(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),R.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function eft(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=R.useRef(!1),c=R.useRef(),f=R.useRef(!0);return R.useEffect(()=>{if(!a)return;const d=pc(o);function h(){!n&&yf(o)&&o===cme(rw(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),R.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),R.useEffect(()=>()=>{clearTimeout(c.current)},[]),R.useMemo(()=>a?{reference:{onPointerDown(d){Ult(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=_E(d.nativeEvent);if(u&&Ss(h))try{if(zlt()&&Vlt())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!Ylt(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ss(h)&&h.hasAttribute(pte("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=cme(o?o.ownerDocument:document);!h&&g===o||Ok((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||Ok(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Tme="active",Sme="selected";function iV(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Tme]:o,[Sme]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Tme,Sme].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function tft(e){e===void 0&&(e=[]);const t=e,n=R.useCallback(s=>iV(s,e,"reference"),t),r=R.useCallback(s=>iV(s,e,"floating"),t),i=R.useCallback(s=>iV(s,e,"item"),e.map(s=>s==null?void 0:s.item));return R.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const nft=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function rft(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=nft.get(o))!=null?n:o,u=p6e(),c=dte()!=null;return R.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function y6e(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Ame(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Cme(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const ift={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function sft({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:$e(t),height:$e(t),transform:"rotate(45deg)",position:"absolute",[ift[u]]:$e(r)},f=$e(-t/2);return u==="left"?{...c,...Ame(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Ame(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Cme(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Cme(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const gte=R.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=a1();return s?E.jsx("div",{...l,ref:c,style:{...u,...sft({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});gte.displayName="@mantine/core/FloatingArrow";const[oft,v6e]=Qa("Popover component was not found in the tree");function iM({children:e,active:t=!0,refProp:n="ref"}){const r=Vat(t),i=mo(r,e==null?void 0:e.ref);return hb(e)?R.cloneElement(e,{[n]:i}):e}function b6e(e){return E.jsx(tte,{tabIndex:-1,"data-autofocus":!0,...e})}iM.displayName="@mantine/core/FocusTrap";b6e.displayName="@mantine/core/FocusTrapInitialFocus";iM.InitialFocus=b6e;function aft(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const uft={},_6e=R.forwardRef((e,t)=>{const{children:n,target:r,...i}=We("Portal",uft,e),[s,o]=R.useState(!1),a=R.useRef(null);return Ix(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:aft(i),Hee(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:dR.createPortal(E.jsx(E.Fragment,{children:n}),a.current)});_6e.displayName="@mantine/core/Portal";function xA({withinPortal:e=!0,children:t,...n}){return e?E.jsx(_6e,{...n,children:t}):E.jsx(E.Fragment,{children:t})}xA.displayName="@mantine/core/OptionalPortal";const m3=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${$e(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),_P={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${$e(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${$e(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${$e(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${$e(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${$e(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${$e(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${$e(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${$e(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...m3("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...m3("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...m3("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...m3("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...m3("top"),common:{transformOrigin:"top right"}}},Ime={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function lft({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in _P?{transitionProperty:_P[e].transitionProperty,...i,..._P[e].common,..._P[e][Ime[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Ime[t]]}}function cft({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=go(),l=Z7(),c=u.respectReducedMotion?l:!1,[f,d]=R.useState(c?0:e),[h,p]=R.useState(r?"entered":"exited"),m=R.useRef(-1),g=R.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const x=c?0:v?e:t;d(x),x===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{SI.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},x)})})};return I0(()=>{y(r)},[r]),R.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function l1({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=cft({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?E.jsx(E.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:E.jsx(E.Fragment,{children:s(lft({transition:t,duration:f,state:d,timingFunction:h}))})}l1.displayName="@mantine/core/Transition";var w6e={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const fft={},yte=ft((e,t)=>{var g,y,v,b;const n=We("PopoverDropdown",fft,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=v6e(),h=Eke({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=mo(t,d.floating);return d.disabled?null:E.jsx(xA,{...d.portalProps,withinPortal:d.withinPortal,children:E.jsx(l1,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>E.jsx(iM,{active:d.trapFocus,children:E.jsxs(ke,{...p,...f,variant:u,ref:m,onKeyDownCapture:Rat(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:$e(d.width)},i]}),children:[o,E.jsx(gte,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});yte.classes=w6e;yte.displayName="@mantine/core/PopoverDropdown";const dft={refProp:"ref",popupType:"dialog"},x6e=ft((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=We("PopoverTarget",dft,e);if(!hb(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=v6e(),u=mo(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return R.cloneElement(n,{...o,...l,...a.targetProps,className:co(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});x6e.displayName="@mantine/core/PopoverTarget";function E6e({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=R.useState(0);R.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return Ict(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),I0(()=>{t.update()},r),I0(()=>{s(o=>o+1)},[e])}function hft(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function pft(e,t){const n=hft(e.middlewares),r=[f6e(e.offset)];return n.shift&&r.push(fte(typeof n.shift=="boolean"?{limiter:vme(),padding:5}:{limiter:vme(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?UY():UY(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?zY():zY(n.inline)),r.push(d6e({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Fct({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function mft(e){const[t,n]=wa({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=mte({strategy:e.strategy,placement:e.position,middleware:pft(e,()=>s)});return E6e({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),I0(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),I0(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const gft={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:np("popover"),__staticSelector:"Popover",width:"max-content"},yft=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:ji(t),"--popover-shadow":zee(n)}});function mc(e){var Se,Fe,st,yt,Nt,Je;const t=We("Popover",gft,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:x,closeOnEscape:S,clickOutsideEvents:A,trapFocus:C,onClose:N,onOpen:k,onChange:D,zIndex:L,radius:O,shadow:B,id:q,defaultOpened:H,__staticSelector:G,withRoles:K,disabled:J,returnFocus:F,variant:j,keepMounted:W,vars:M,floatingStrategy:V,...Q}=t,se=Bt({name:G,props:t,classes:w6e,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:M,varsResolver:yft}),be=R.useRef(null),[he,Ce]=R.useState(null),[De,rt]=R.useState(null),{dir:Re}=a1(),Tt=ju(q),Ze=mft({middlewares:c,width:l,position:y6e(Re,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:be,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:H,onChange:D,onOpen:k,onClose:N,strategy:V});Dat(()=>b&&Ze.onClose(),A,[he,De]);const It=R.useCallback(xe=>{Ce(xe),Ze.floating.refs.setReference(xe)},[Ze.floating.refs.setReference]),mt=R.useCallback(xe=>{rt(xe),Ze.floating.refs.setFloating(xe)},[Ze.floating.refs.setFloating]);return E.jsx(oft,{value:{returnFocus:F,disabled:J,controlled:Ze.controlled,reference:It,floating:mt,x:Ze.floating.x,y:Ze.floating.y,arrowX:(st=(Fe=(Se=Ze.floating)==null?void 0:Se.middlewareData)==null?void 0:Fe.arrow)==null?void 0:st.x,arrowY:(Je=(Nt=(yt=Ze.floating)==null?void 0:yt.middlewareData)==null?void 0:Nt.arrow)==null?void 0:Je.y,opened:Ze.opened,arrowRef:be,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ze.floating.placement,trapFocus:C,withinPortal:w,portalProps:x,zIndex:L,radius:O,shadow:B,closeOnEscape:S,onClose:Ze.onClose,onToggle:Ze.onToggle,getTargetId:()=>`${Tt}-target`,getDropdownId:()=>`${Tt}-dropdown`,withRoles:K,targetProps:Q,__staticSelector:G,classNames:y,styles:v,unstyled:g,variant:j,keepMounted:W,getStyles:se},children:n})}mc.Target=x6e;mc.Dropdown=yte;mc.displayName="@mantine/core/Popover";mc.extend=e=>e;var Ch={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const vft=R.forwardRef(({className:e,...t},n)=>E.jsxs(ke,{component:"span",className:co(Ch.barsLoader,e),...t,ref:n,children:[E.jsx("span",{className:Ch.bar}),E.jsx("span",{className:Ch.bar}),E.jsx("span",{className:Ch.bar})]})),bft=R.forwardRef(({className:e,...t},n)=>E.jsxs(ke,{component:"span",className:co(Ch.dotsLoader,e),...t,ref:n,children:[E.jsx("span",{className:Ch.dot}),E.jsx("span",{className:Ch.dot}),E.jsx("span",{className:Ch.dot})]})),_ft=R.forwardRef(({className:e,...t},n)=>E.jsx(ke,{component:"span",className:co(Ch.ovalLoader,e),...t,ref:n})),T6e={bars:vft,oval:_ft,dots:bft},wft={loaders:T6e,type:"oval"},xft=(e,{size:t,color:n})=>({root:{"--loader-size":Wn(t,"loader-size"),"--loader-color":n?Li(n,e):void 0}}),Pc=ft((e,t)=>{const n=We("Loader",wft,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Bt({name:"Loader",props:n,classes:Ch,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:xft});return p?E.jsx(ke,{...g("root"),ref:t,...m,children:p}):E.jsx(ke,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Pc.defaultLoaders=T6e;Pc.classes=Ch;Pc.displayName="@mantine/core/Loader";var sM={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const kme={orientation:"horizontal"},Eft=(e,{borderWidth:t})=>({group:{"--ai-border-width":$e(t)}}),vte=ft((e,t)=>{const n=We("ActionIconGroup",kme,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=We("ActionIconGroup",kme,e),p=Bt({name:"ActionIconGroup",props:n,classes:sM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Eft,rootSelector:"group"});return E.jsx(ke,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});vte.classes=sM;vte.displayName="@mantine/core/ActionIconGroup";const Tft={},Sft=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Wn(t,"ai-size"),"--ai-radius":n===void 0?void 0:ji(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Px=Qo((e,t)=>{const n=We("ActionIcon",Tft,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:x,...S}=n,A=Bt({name:["ActionIcon",p],props:n,className:r,style:u,classes:sM,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:Sft});return E.jsxs(gf,{...A("root",{active:!v&&!l&&!b}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},x],children:[E.jsx(l1,{mounted:!!l,transition:"slide-down",duration:150,children:C=>E.jsx(ke,{component:"span",...A("loader",{style:C}),"aria-hidden":!0,children:E.jsx(Pc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),E.jsx(ke,{component:"span",mod:{loading:l},...A("icon"),children:y})]})});Px.classes=sM;Px.displayName="@mantine/core/ActionIcon";Px.Group=vte;const S6e=R.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>E.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:E.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));S6e.displayName="@mantine/core/CloseIcon";var A6e={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Aft={variant:"subtle"},Cft=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Wn(t,"cb-size"),"--cb-radius":n===void 0?void 0:ji(n),"--cb-icon-size":$e(r)}}),gb=Qo((e,t)=>{const n=We("CloseButton",Aft,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=Bt({name:"CloseButton",props:n,className:a,style:l,classes:A6e,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:Cft});return E.jsxs(gf,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||E.jsx(S6e,{}),i]})});gb.classes=A6e;gb.displayName="@mantine/core/CloseButton";function Ift(e){return R.Children.toArray(e).filter(Boolean)}var C6e={root:"m_4081bf90"};const kft={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Rft=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Co(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),bi=ft((e,t)=>{const n=We("Group",kft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=Ift(u),x=w.length,S=Co(l??"md"),C={childWidth:`calc(${100/x}% - (${S} - ${S} / ${x}))`},N=Bt({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:C6e,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:Rft});return E.jsx(ke,{...N("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});bi.classes=C6e;bi.displayName="@mantine/core/Group";var I6e={root:"m_9814e45f"};const Nft={zIndex:np("modal")},Pft=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&$p(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${$e(i)})`:void 0,"--overlay-radius":s===void 0?void 0:ji(s),"--overlay-z-index":o==null?void 0:o.toString()}}),$k=Qo((e,t)=>{const n=We("Overlay",Nft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=Bt({name:"Overlay",props:n,classes:I6e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Pft});return E.jsx(ke,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});$k.classes=I6e;$k.displayName="@mantine/core/Overlay";const[Dft,c1]=Qa("ModalBase component was not found in tree");function Oft({opened:e,transitionDuration:t}){const[n,r]=R.useState(e),i=R.useRef(),o=Z7()?0:t;return R.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function $ft({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=ju(e),[u,l]=R.useState(!1),[c,f]=R.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=Oft({opened:n,transitionDuration:d});return Cke("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),Eke({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Lft=R.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:x,titleMounted:S,bodyMounted:A,shouldLockScroll:C,setTitleMounted:N,setBodyMounted:k}=$ft({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return E.jsx(xA,{...c,withinPortal:l,children:E.jsx(Dft,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${x}-title`,getBodyId:()=>`${x}-body`,titleMounted:S,bodyMounted:A,setTitleMounted:N,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:E.jsx(nS,{enabled:C&&f,...v,children:E.jsx(ke,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||np("modal")).toString(),"--mb-shadow":zee(p),"--mb-padding":Co(m)},children:d})})})})});function Mft(){const e=c1();return R.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var sS={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const k6e=R.forwardRef(({className:e,...t},n)=>{const r=Mft(),i=c1();return E.jsx(ke,{ref:n,...t,id:r,className:co({[sS.body]:!i.unstyled},e)})});k6e.displayName="@mantine/core/ModalBaseBody";const R6e=R.forwardRef(({className:e,onClick:t,...n},r)=>{const i=c1();return E.jsx(gb,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:co({[sS.close]:!i.unstyled},e),unstyled:i.unstyled})});R6e.displayName="@mantine/core/ModalBaseCloseButton";const Fft=R.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=c1();return E.jsx(l1,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>E.jsx("div",{...n,className:co({[sS.inner]:!a.unstyled},n.className),children:E.jsx(iM,{active:a.opened&&a.trapFocus,children:E.jsx(bA,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:co({[sS.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),N6e=R.forwardRef(({className:e,...t},n)=>{const r=c1();return E.jsx(ke,{component:"header",ref:n,className:co({[sS.header]:!r.unstyled},e),...t})});N6e.displayName="@mantine/core/ModalBaseHeader";const Bft={duration:200,timingFunction:"ease",transition:"fade"};function jft(e){const t=c1();return{...Bft,...t.transitionProps,...e}}const P6e=R.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=c1(),o=jft(t);return E.jsx(l1,{mounted:s.opened,...o,transition:"fade",children:a=>E.jsx($k,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});P6e.displayName="@mantine/core/ModalBaseOverlay";function Uft(){const e=c1();return R.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const D6e=R.forwardRef(({className:e,...t},n)=>{const r=Uft(),i=c1();return E.jsx(ke,{component:"h2",ref:n,className:co({[sS.title]:!i.unstyled},e),...t,id:r})});D6e.displayName="@mantine/core/ModalBaseTitle";function zft({children:e}){return E.jsx(E.Fragment,{children:e})}const[Vft,EA]=yA({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var kd={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Rme={},Hft=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${hl(t)} - ${$e(2)})`}}),oM=ft((e,t)=>{const n=We("InputDescription",Rme,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=We("InputDescription",Rme,n),p=EA(),m=Bt({name:["InputWrapper",c],props:n,classes:kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:Hft}),g=f&&(p==null?void 0:p.getStyles)||m;return E.jsx(ke,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});oM.classes=kd;oM.displayName="@mantine/core/InputDescription";const qft={},Wft=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${hl(t)} - ${$e(2)})`}}),aM=ft((e,t)=>{const n=We("InputError",qft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Bt({name:["InputWrapper",c],props:n,classes:kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:Wft}),m=EA(),g=f&&(m==null?void 0:m.getStyles)||p;return E.jsx(ke,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});aM.classes=kd;aM.displayName="@mantine/core/InputError";const Nme={labelElement:"label"},Gft=(e,{size:t})=>({label:{"--input-label-size":hl(t),"--input-asterisk-color":void 0}}),uM=ft((e,t)=>{const n=We("InputLabel",Nme,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=We("InputLabel",Nme,n),b=Bt({name:["InputWrapper",m],props:n,classes:kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:Gft}),w=EA(),x=(w==null?void 0:w.getStyles)||b;return E.jsxs(ke,{...x("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&E.jsx("span",{...x("required"),"aria-hidden":!0,children:" *"})]})});uM.classes=kd;uM.displayName="@mantine/core/InputLabel";const Pme={},bte=ft((e,t)=>{const n=We("InputPlaceholder",Pme,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=We("InputPlaceholder",Pme,n),p=Bt({name:["InputPlaceholder",l],props:n,classes:kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return E.jsx(ke,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});bte.classes=kd;bte.displayName="@mantine/core/InputPlaceholder";function Yft(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const Kft={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},Xft=(e,{size:t})=>({label:{"--input-label-size":hl(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${hl(t)} - ${$e(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${hl(t)} - ${$e(2)})`}}),_te=ft((e,t)=>{const n=We("InputWrapper",Kft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:x,withAsterisk:S,id:A,required:C,__stylesApiProps:N,mod:k,...D}=n,L=Bt({name:["InputWrapper",f],props:N||n,classes:kd,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Xft}),O={size:l,variant:c,__staticSelector:f},B=ju(A),q=typeof S=="boolean"?S:C,H=(b==null?void 0:b.id)||`${B}-error`,G=(v==null?void 0:v.id)||`${B}-description`,K=B,J=!!m&&typeof m!="boolean",F=!!g,j=`${J?H:""} ${F?G:""}`,W=j.trim().length>0?j.trim():void 0,M=(y==null?void 0:y.id)||`${B}-label`,V=p&&E.jsx(uM,{labelElement:w,id:M,htmlFor:K,required:q,...O,...y,children:p},"label"),Q=F&&E.jsx(oM,{...v,...O,size:(v==null?void 0:v.size)||O.size,id:(v==null?void 0:v.id)||G,children:g},"description"),se=E.jsx(R.Fragment,{children:d(x)},"input"),be=J&&R.createElement(aM,{...b,...O,size:(b==null?void 0:b.size)||O.size,key:"error",id:(b==null?void 0:b.id)||H},m),he=h.map(Ce=>{switch(Ce){case"label":return V;case"input":return se;case"description":return Q;case"error":return be;default:return null}});return E.jsx(Vft,{value:{getStyles:L,describedBy:W,inputId:K,labelId:M,...Yft(h,{hasDescription:F,hasError:J})},children:E.jsx(ke,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...L("root"),...D,children:he})})});_te.classes=kd;_te.displayName="@mantine/core/InputWrapper";const Qft={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Jft=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Wn(t.size,"input-height"),"--input-fz":hl(t.size),"--input-radius":t.radius===void 0?void 0:ji(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?$e(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?$e(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Wn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Qs=Qo((e,t)=>{const n=We("Input",Qft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:x,leftSectionPointerEvents:S,variant:A,vars:C,pointer:N,multiline:k,radius:D,id:L,withAria:O,withErrorStyles:B,mod:q,inputSize:H,...G}=n,{styleProps:K,rest:J}=Rx(G),F=EA(),j={offsetBottom:F==null?void 0:F.offsetBottom,offsetTop:F==null?void 0:F.offsetTop},W=Bt({name:["Input",l],props:c||n,classes:kd,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:j,rootSelector:"wrapper",vars:C,varsResolver:Jft}),M=O?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":F==null?void 0:F.describedBy,id:(F==null?void 0:F.inputId)||L}:{};return E.jsxs(ke,{...W("wrapper"),...K,...d,mod:[{error:!!h&&B,pointer:N,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},q],variant:A,size:f,children:[m&&E.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),E.jsx(ke,{component:"input",...J,...M,ref:t,required:u,mod:{disabled:p,error:!!h&&B},variant:A,__size:H,...W("input")}),v&&E.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});Qs.classes=kd;Qs.Wrapper=_te;Qs.Label=uM;Qs.Error=aM;Qs.Description=oM;Qs.Placeholder=bte;Qs.displayName="@mantine/core/Input";function Zft(e,t,n){const r=We(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:x,inputWrapperOrder:S,withAsterisk:A,variant:C,vars:N,mod:k,...D}=r,{styleProps:L,rest:O}=Rx(D),B={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:x,inputWrapperOrder:S,withAsterisk:A,variant:C,id:v,mod:k,...y};return{...O,classNames:u,styles:l,unstyled:f,wrapperProps:{...B,...L},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const edt={__staticSelector:"InputBase",withAria:!0},Rd=Qo((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Zft("InputBase",edt,e);return E.jsx(Qs.Wrapper,{...r,children:E.jsx(Qs,{...n,...i,ref:t})})});Rd.classes={...Qs.classes,...Qs.Wrapper.classes};Rd.displayName="@mantine/core/InputBase";const tdt={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var O6e={root:"m_8bffd616"};const ndt={},qt=Qo((e,t)=>{const n=We("Flex",ndt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=Bt({name:"Flex",classes:O6e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=go(),b=mR(),w=Mke({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:tdt});return E.jsxs(E.Fragment,{children:[w.hasResponsiveStyles&&E.jsx(kx,{selector:`.${b}`,styles:w.styles,media:w.media}),E.jsx(ke,{ref:t,...y("root",{className:b,style:db(w.inlineStyles)}),...g})]})});qt.classes=O6e;qt.displayName="@mantine/core/Flex";function rdt(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function idt({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=R.useRef(),[s,o]=R.useState(!1),[a,u]=R.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=R.useRef(),d=R.useRef();return R.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),R.useEffect(()=>{if(t){const h=p=>{rdt(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),eut(()=>{Rke()!=="test"&&o(!0)},20,{autoInvoke:!0}),tut(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var $6e={root:"m_96b553a6"};const sdt={},odt=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),wte=ft((e,t)=>{const n=We("FloatingIndicator",sdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=Bt({name:"FloatingIndicator",classes:$6e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:odt}),g=R.useRef(null),{initialized:y,hidden:v}=idt({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=mo(t,g);return!l||!c?null:E.jsx(ke,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});wte.displayName="@mantine/core/FloatingIndicator";wte.classes=$6e;const[adt,xte]=Qa("Accordion component was not found in the tree");function lM({style:e,size:t=16,...n}){return E.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:$e(t),height:$e(t),display:"block"},...n,children:E.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}lM.displayName="@mantine/core/AccordionChevron";const[udt,L6e]=Qa("Accordion.Item component was not found in the tree");var yR={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const ldt={},Ete=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=We("AccordionControl",ldt,e),{value:m}=L6e(),g=xte(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,w=E.jsxs(gf,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:x=>{l==null||l(x),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:Uee({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[E.jsx(ke,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),E.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&E.jsx(ke,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?E.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});Ete.displayName="@mantine/core/AccordionControl";Ete.classes=yR;const cdt={},Tte=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=We("AccordionItem",cdt,e),c=xte();return E.jsx(udt,{value:{value:a},children:E.jsx(ke,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});Tte.displayName="@mantine/core/AccordionItem";Tte.classes=yR;const fdt={},Ste=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=We("AccordionPanel",fdt,e),{value:l}=L6e(),c=xte();return E.jsx(tM,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:E.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});Ste.displayName="@mantine/core/AccordionPanel";Ste.classes=yR;const ddt={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:E.jsx(lM,{})},hdt=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:$e(n),"--accordion-radius":r===void 0?void 0:ji(r)}});function Gl(e){const t=We("Accordion",ddt,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:w,variant:x,radius:S,...A}=t,C=ju(h),[N,k]=wa({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),D=B=>Array.isArray(N)?N.includes(B):B===N,L=B=>{const q=Array.isArray(N)?N.includes(B)?N.filter(H=>H!==B):[...N,B]:B===N?null:B;k(q)},O=Bt({name:"Accordion",classes:yR,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:hdt});return E.jsx(adt,{value:{isItemActive:D,onChange:L,getControlId:v$(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:v$(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:w,loop:p,getStyles:O,variant:x,unstyled:o},children:E.jsx(ke,{...O("root"),id:C,...A,variant:x,"data-accordion":!0,children:u})})}const pdt=e=>e;Gl.extend=pdt;Gl.classes=yR;Gl.displayName="@mantine/core/Accordion";Gl.Item=Tte;Gl.Panel=Ste;Gl.Control=Ete;Gl.Chevron=lM;var M6e={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const mdt={},gdt=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:ji(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},bg=ft((e,t)=>{const n=We("Alert",mdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,x=Bt({name:"Alert",classes:M6e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gdt}),S=ju(h),A=f&&`${S}-title`||void 0,C=`${S}-body`;return E.jsx(ke,{id:S,...x("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":C,"aria-labelledby":A,children:E.jsxs("div",{...x("wrapper"),children:[p&&E.jsx("div",{...x("icon"),children:p}),E.jsxs("div",{...x("body"),children:[f&&E.jsx("div",{...x("title"),"data-with-close-button":m||void 0,children:E.jsx("span",{id:A,...x("label"),children:f})}),d&&E.jsx("div",{id:C,...x("message"),"data-variant":v,children:d})]}),m&&E.jsx(gb,{...x("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});bg.classes=M6e;bg.displayName="@mantine/core/Alert";var F6e={root:"m_b6d8b162"};function ydt(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const vdt={inherit:!1},bdt=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":hl(i),"--text-lh":xke(i),"--text-gradient":t==="gradient"?OY(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Li(s,e):void 0}}),Ue=Qo((e,t)=>{const n=We("Text",vdt,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=Bt({name:["Text",l],props:n,classes:F6e,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:bdt});return E.jsx(ke,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":ydt(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});Ue.classes=F6e;Ue.displayName="@mantine/core/Text";var B6e={root:"m_849cf0da"};const _dt={underline:"hover"},yb=Qo((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=We("Anchor",_dt,e);return E.jsx(Ue,{component:"a",ref:t,className:co({[B6e.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});yb.classes=B6e;yb.displayName="@mantine/core/Anchor";const[wdt,TA]=Qa("AppShell was not found in tree");var vb={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const xdt={},Ate=ft((e,t)=>{const n=We("AppShellAside",xdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=TA();return h.disabled?null:E.jsx(ke,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});Ate.classes=vb;Ate.displayName="@mantine/core/AppShellAside";const Edt={},Cte=ft((e,t)=>{var p;const n=We("AppShellFooter",Edt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=TA();return h.disabled?null:E.jsx(ke,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:co({[nS.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Cte.classes=vb;Cte.displayName="@mantine/core/AppShellFooter";const Tdt={},Ite=ft((e,t)=>{var p;const n=We("AppShellHeader",Tdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=TA();return h.disabled?null:E.jsx(ke,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:co({[nS.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Ite.classes=vb;Ite.displayName="@mantine/core/AppShellHeader";const Sdt={},kte=ft((e,t)=>{const n=We("AppShellMain",Sdt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=TA();return E.jsx(ke,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});kte.classes=vb;kte.displayName="@mantine/core/AppShellMain";function vR(e){return typeof e=="object"?e.base:e}function bR(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function _R(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function Adt({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),bR(s)){const f=$e(vR(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(_R(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=$e(s.base),e["--app-shell-aside-offset"]=$e(s.base)),Gi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=$e(s[f]),t[f]["--app-shell-aside-offset"]=$e(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Vee(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function Cdt({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(bR(r)){const o=$e(vR(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}_R(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=$e(r.base),s&&(e["--app-shell-footer-offset"]=$e(r.base))),Gi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=$e(r[o]),s&&(t[o]["--app-shell-footer-offset"]=$e(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function Idt({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(bR(r)){const o=$e(vR(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}_R(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=$e(r.base),s&&(e["--app-shell-header-offset"]=$e(r.base))),Gi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=$e(r[o]),s&&(t[o]["--app-shell-header-offset"]=$e(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function kdt({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),bR(s)){const f=$e(vR(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(_R(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=$e(s.base),e["--app-shell-navbar-offset"]=$e(s.base)),Gi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=$e(s[f]),t[f]["--app-shell-navbar-offset"]=$e(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Vee(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function sV(e){return Number(e)===0?"0px":Co(e)}function Rdt({padding:e,baseStyles:t,minMediaStyles:n}){bR(e)&&(t["--app-shell-padding"]=sV(vR(e))),_R(e)&&(e.base&&(t["--app-shell-padding"]=sV(e.base)),Gi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=sV(e[r]))}))}function Ndt({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};kdt({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),Adt({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),Idt({baseStyles:u,minMediaStyles:o,header:t}),Cdt({baseStyles:u,minMediaStyles:o,footer:n}),Rdt({baseStyles:u,minMediaStyles:o,padding:i});const l=Pk(Gi(o),s).map(d=>({query:`(min-width: ${y$(d.px)})`,styles:o[d.value]})),c=Pk(Gi(a),s).map(d=>({query:`(max-width: ${y$(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function Pdt({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=go(),o=pb(),{media:a,baseStyles:u}=Ndt({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return E.jsx(kx,{media:a,styles:u,selector:o.cssVariablesSelector})}const Ddt={},Rte=ft((e,t)=>{const n=We("AppShellNavbar",Ddt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=TA();return h.disabled?null:E.jsx(ke,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});Rte.classes=vb;Rte.displayName="@mantine/core/AppShellNavbar";const Odt={},Nte=Qo((e,t)=>{const n=We("AppShellSection",Odt,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=TA();return E.jsx(ke,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});Nte.classes=vb;Nte.displayName="@mantine/core/AppShellSection";function $dt({transitionDuration:e,disabled:t}){const[n,r]=R.useState(!0),i=R.useRef(),s=R.useRef();return Cke("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Ix(()=>{R.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const Ldt={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:np("app")},Mdt=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Oi=ft((e,t)=>{const n=We("AppShell",Ldt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:x,...S}=n,A=Bt({name:"AppShell",classes:vb,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Mdt}),C=$dt({disabled:y,transitionDuration:d});return E.jsxs(wdt,{value:{getStyles:A,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[E.jsx(Pdt,{navbar:l,header:p,aside:v,footer:b,padding:f}),E.jsx(ke,{ref:t,...A("root"),mod:[{resizing:C,layout:g,disabled:y},x],...S})]})});Oi.classes=vb;Oi.displayName="@mantine/core/AppShell";Oi.Navbar=Rte;Oi.Header=Ite;Oi.Main=kte;Oi.Aside=Ate;Oi.Footer=Cte;Oi.Section=Nte;function j6e(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>j6e(t))}:e}function U6e(e){return e?e.map(t=>j6e(t)):[]}function Pte(e){return e.reduce((t,n)=>"group"in n?{...t,...Pte(n.items)}:(t[n.value]=n,t),{})}var wc={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const Fdt={error:null},Bdt=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Wn(t,"combobox-chevron-size")}}),Dte=ft((e,t)=>{const n=We("ComboboxChevron",Fdt,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Bt({name:"ComboboxChevron",classes:wc,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:Bdt,rootSelector:"chevron"});return E.jsx(ke,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:E.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});Dte.classes=wc;Dte.displayName="@mantine/core/ComboboxChevron";const[jdt,Nd]=Qa("Combobox component was not found in tree"),z6e=R.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>E.jsx(gb,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));z6e.displayName="@mantine/core/ComboboxClearButton";const Udt={},Ote=ft((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=We("ComboboxDropdown",Udt,e),u=Nd();return E.jsx(mc.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});Ote.classes=wc;Ote.displayName="@mantine/core/ComboboxDropdown";const zdt={refProp:"ref"},V6e=ft((e,t)=>{const{children:n,refProp:r}=We("ComboboxDropdownTarget",zdt,e);if(Nd(),!hb(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return E.jsx(mc.Target,{ref:t,refProp:r,children:n})});V6e.displayName="@mantine/core/ComboboxDropdownTarget";const Vdt={},$te=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("ComboboxEmpty",Vdt,e),u=Nd();return E.jsx(ke,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});$te.classes=wc;$te.displayName="@mantine/core/ComboboxEmpty";function Lte({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Nd(),[a,u]=R.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Hdt={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},H6e=ft((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=We("ComboboxEventsTarget",Hdt,e);if(!hb(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Nd(),f=Lte({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return R.cloneElement(n,{...f,...l,[r]:mo(t,c.store.targetRef,n==null?void 0:n.ref)})});H6e.displayName="@mantine/core/ComboboxEventsTarget";const qdt={},Mte=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("ComboboxFooter",qdt,e),u=Nd();return E.jsx(ke,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});Mte.classes=wc;Mte.displayName="@mantine/core/ComboboxFooter";const Wdt={},Fte=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=We("ComboboxGroup",Wdt,e),c=Nd();return E.jsxs(ke,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&E.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});Fte.classes=wc;Fte.displayName="@mantine/core/ComboboxGroup";const Gdt={},Bte=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("ComboboxHeader",Gdt,e),u=Nd();return E.jsx(ke,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});Bte.classes=wc;Bte.displayName="@mantine/core/ComboboxHeader";function q6e({value:e,valuesDivider:t=",",...n}){return E.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}q6e.displayName="@mantine/core/ComboboxHiddenInput";const Ydt={},jte=ft((e,t)=>{const n=We("ComboboxOption",Ydt,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Nd(),v=R.useId(),b=l||v;return E.jsx(ke,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var x;h?w.preventDefault():((x=y.onOptionSubmit)==null||x.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});jte.classes=wc;jte.displayName="@mantine/core/ComboboxOption";const Kdt={},Ute=ft((e,t)=>{const n=We("ComboboxOptions",Kdt,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Nd(),d=ju(a);return R.useEffect(()=>{f.store.setListId(d)},[d]),E.jsx(ke,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});Ute.classes=wc;Ute.displayName="@mantine/core/ComboboxOptions";const Xdt={withAriaAttributes:!0,withKeyboardNavigation:!0},zte=ft((e,t)=>{const n=We("ComboboxSearch",Xdt,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Nd(),h=d.getStyles("search"),p=Lte({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return E.jsx(Qs,{ref:mo(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});zte.classes=wc;zte.displayName="@mantine/core/ComboboxSearch";const Qdt={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},W6e=ft((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=We("ComboboxTarget",Qdt,e);if(!hb(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Nd(),f=Lte({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=R.cloneElement(n,{...f,...l});return E.jsx(mc.Target,{ref:mo(t,c.store.targetRef),children:d})});W6e.displayName="@mantine/core/ComboboxTarget";function Jdt(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Zdt(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function eht(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function Vte({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=wa({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=R.useRef(null),c=R.useRef(-1),f=R.useRef(null),d=R.useRef(null),h=R.useRef(-1),p=R.useRef(-1),m=R.useRef(-1),g=R.useCallback((H="unknown")=>{a||(u(!0),i==null||i(H))},[u,i,a]),y=R.useCallback((H="unknown")=>{a&&(u(!1),r==null||r(H))},[u,r,a]),v=R.useCallback((H="unknown")=>{a?y(H):g(H)},[y,g,a]),b=R.useCallback(()=>{const H=document.querySelector(`#${l.current} [data-combobox-selected]`);H==null||H.removeAttribute("data-combobox-selected"),H==null||H.removeAttribute("aria-selected")},[]),w=R.useCallback(H=>{const G=document.getElementById(l.current),K=G==null?void 0:G.querySelectorAll("[data-combobox-option]");if(!K)return null;const J=H>=K.length?0:H<0?K.length-1:H;return c.current=J,K!=null&&K[J]&&!K[J].hasAttribute("data-combobox-disabled")?(b(),K[J].setAttribute("data-combobox-selected","true"),K[J].setAttribute("aria-selected","true"),K[J].scrollIntoView({block:"nearest",behavior:o}),K[J].id):null},[o,b]),x=R.useCallback(()=>{const H=document.querySelector(`#${l.current} [data-combobox-active]`);if(H){const G=document.querySelectorAll(`#${l.current} [data-combobox-option]`),K=Array.from(G).findIndex(J=>J===H);return w(K)}return w(0)},[w]),S=R.useCallback(()=>w(Zdt(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),A=R.useCallback(()=>w(Jdt(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),C=R.useCallback(()=>w(eht(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),N=R.useCallback((H="selected",G)=>{m.current=window.setTimeout(()=>{var F;const K=document.querySelectorAll(`#${l.current} [data-combobox-option]`),J=Array.from(K).findIndex(j=>j.hasAttribute(`data-combobox-${H}`));c.current=J,G!=null&&G.scrollIntoView&&((F=K[J])==null||F.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=R.useCallback(()=>{c.current=-1,b()},[b]),D=R.useCallback(()=>{const H=document.querySelectorAll(`#${l.current} [data-combobox-option]`),G=H==null?void 0:H[c.current];G==null||G.click()},[]),L=R.useCallback(H=>{l.current=H},[]),O=R.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),B=R.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),q=R.useCallback(()=>c.current,[]);return R.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:q,selectOption:w,selectFirstOption:C,selectActiveOption:x,selectNextOption:S,selectPreviousOption:A,resetSelectedOption:k,updateSelectedOptionIndex:N,listId:l.current,setListId:L,clickSelectedOption:D,searchRef:f,focusSearchInput:O,targetRef:d,focusTarget:B}}const tht={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},nht=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":hl(t),"--combobox-option-padding":Wn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:$e(n),"--combobox-option-fz":hl(t),"--combobox-option-padding":Wn(t,"combobox-option-padding")}});function $r(e){const t=We("Combobox",tht,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=Vte(),y=o||g,v=Bt({name:h||"Combobox",classes:wc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:nht}),b=()=>{l==null||l(),y.closeDropdown()};return E.jsx(jdt,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:E.jsx(mc,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const rht=e=>e;$r.extend=rht;$r.classes=wc;$r.displayName="@mantine/core/Combobox";$r.Target=W6e;$r.Dropdown=Ote;$r.Options=Ute;$r.Option=jte;$r.Search=zte;$r.Empty=$te;$r.Chevron=Dte;$r.Footer=Mte;$r.Header=Bte;$r.EventsTarget=H6e;$r.DropdownTarget=V6e;$r.Group=Fte;$r.ClearButton=z6e;$r.HiddenInput=q6e;var G6e={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Y6e=G6e,cM=R.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},x)=>{const S=Bt({name:e,props:t,className:n,style:y,classes:G6e,classNames:r,styles:i,unstyled:s});return E.jsx(ke,{...S("root"),ref:x,__vars:{"--label-fz":hl(d),"--label-lh":Wn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:E.jsxs(ke,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,E.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&E.jsx(ke,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&E.jsx(Qs.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&E.jsx(Qs.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});cM.displayName="@mantine/core/InlineInput";const K6e=R.createContext(null),iht=K6e.Provider,X6e=()=>R.useContext(K6e),[sht,oht]=yA();var Q6e={card:"m_26775b0a"};const aht={withBorder:!0},uht=(e,{radius:t})=>({card:{"--card-radius":ji(t)}}),Hte=ft((e,t)=>{const n=We("CheckboxCard",aht,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=Bt({name:"CheckboxCard",classes:Q6e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uht,rootSelector:"card"}),g=X6e(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return E.jsx(sht,{value:{checked:y},children:E.jsx(gf,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});Hte.displayName="@mantine/core/CheckboxCard";Hte.classes=Q6e;function qte({children:e,role:t}){const n=EA();return n?E.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):E.jsx(E.Fragment,{children:e})}const lht={},Wte=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=We("CheckboxGroup",lht,e),[c,f]=wa({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return E.jsx(iht,{value:{value:c,onChange:d,size:s},children:E.jsx(Qs.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:E.jsx(qte,{role:"group",children:a})})})});Wte.classes=Qs.Wrapper.classes;Wte.displayName="@mantine/core/CheckboxGroup";function J6e({size:e,style:t,...n}){const r=e!==void 0?{width:$e(e),height:$e(e),...t}:t;return E.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:E.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Z6e({indeterminate:e,...t}){return e?E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:E.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):E.jsx(J6e,{...t})}var eRe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const cht={icon:Z6e},fht=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=K0({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Wn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:ji(t),"--checkbox-color":s==="outline"?u:Li(n,e),"--checkbox-icon-color":i?Li(i,e):vA(o,e)?mb({color:n,theme:e,autoContrast:o}):void 0}}},Gte=ft((e,t)=>{const n=We("CheckboxIndicator",cht,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,x=Bt({name:"CheckboxIndicator",classes:eRe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fht,rootSelector:"indicator"}),S=oht(),A=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return E.jsx(ke,{ref:t,...x("indicator",{variant:y}),variant:y,mod:[{checked:A,disabled:v},g],...b,children:E.jsx(w,{indeterminate:c,...x("icon")})})});Gte.displayName="@mantine/core/CheckboxIndicator";Gte.classes=eRe;var tRe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const dht={labelPosition:"right",icon:Z6e},hht=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=K0({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Wn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:ji(t),"--checkbox-color":s==="outline"?u:Li(n,e),"--checkbox-icon-color":i?Li(i,e):vA(o,e)?mb({color:n,theme:e,autoContrast:o}):void 0}}},sc=ft((e,t)=>{const n=We("Checkbox",dht,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:x,indeterminate:S,icon:A,rootRef:C,iconColor:N,onChange:k,autoContrast:D,mod:L,...O}=n,B=X6e(),q=d||(B==null?void 0:B.size),H=A,G=Bt({name:"Checkbox",props:n,classes:tRe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hht}),{styleProps:K,rest:J}=Rx(O),F=ju(f),j=B?{checked:B.value.includes(J.value),onChange:W=>{B.onChange(W),k==null||k(W)}}:{};return E.jsx(cM,{...G("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:F,size:q,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":j.checked||g||void 0,variant:x,ref:C,mod:L,...K,...p,children:E.jsxs(ke,{...G("inner"),mod:{"data-label-position":y},children:[E.jsx(ke,{component:"input",id:F,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:S},...G("input",{focusable:!0,variant:x}),onChange:k,...J,...j,type:"checkbox"}),E.jsx(H,{indeterminate:S,...G("icon")})]})})});sc.classes={...tRe,...Y6e};sc.displayName="@mantine/core/Checkbox";sc.Group=Wte;sc.Indicator=Gte;sc.Card=Hte;function oS(e){return"group"in e}function nRe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;oS(o)&&i.push({group:o.group,items:nRe({options:o.items,search:t,limit:n-i.length})}),oS(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function pht(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function rRe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(oS(n))rRe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function mht(e,t){return Array.isArray(e)?e.includes(t):e===t}function iRe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!oS(e)){const a=mht(n,e.value),u=t&&a&&E.jsx(J6e,{className:wc.optionsDropdownCheckIcon}),l=E.jsxs(E.Fragment,{children:[r==="left"&&u,E.jsx("span",{children:e.label}),r==="right"&&u]});return E.jsx($r.Option,{value:e.value,disabled:e.disabled,className:co({[wc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>E.jsx(iRe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return E.jsx($r.Group,{label:e.group,children:o})}function sRe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){rRe(e);const b=typeof i=="string"?(r||nRe)({options:e,search:u?i:"",limit:s??1/0}):e,w=pht(b),x=b.map(S=>E.jsx(iRe,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},oS(S)?S.group:S.value));return E.jsx($r.Dropdown,{hidden:t||n&&w,children:E.jsxs($r.Options,{labelledBy:p,"aria-label":y,children:[a?E.jsx(Lg.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:x}):x,w&&d&&E.jsx($r.Empty,{children:d})]})})}var oRe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const ght={},yht=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Wn(s,"badge-height"),"--badge-padding-x":Wn(s,"badge-padding-x"),"--badge-fz":Wn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:ji(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Li(n,e):void 0}}},ov=Qo((e,t)=>{const n=We("Badge",ght,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,x=Bt({name:"Badge",props:n,classes:oRe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yht});return E.jsxs(ke,{variant:m,mod:[{block:g,circle:v},b],...x("root",{variant:m}),ref:t,...w,children:[d&&E.jsx("span",{...x("section"),"data-position":"left",children:d}),E.jsx("span",{...x("label"),children:p}),h&&E.jsx("span",{...x("section"),"data-position":"right",children:h})]})});ov.classes=oRe;ov.displayName="@mantine/core/Badge";var fM={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Dme={orientation:"horizontal"},vht=(e,{borderWidth:t})=>({group:{"--button-border-width":$e(t)}}),Yte=ft((e,t)=>{const n=We("ButtonGroup",Dme,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=We("ButtonGroup",Dme,e),p=Bt({name:"ButtonGroup",props:n,classes:fM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:vht,rootSelector:"group"});return E.jsx(ke,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});Yte.classes=fM;Yte.displayName="@mantine/core/ButtonGroup";const bht={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${$e(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},_ht={},wht=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Wn(s,"button-height"),"--button-padding-x":Wn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?hl(s.replace("compact-","")):hl(s),"--button-radius":t===void 0?void 0:ji(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},on=Qo((e,t)=>{const n=We("Button",_ht,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:x,mod:S,...A}=n,C=Bt({name:"Button",props:n,classes:fM,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:wht}),N=!!l,k=!!c;return E.jsxs(gf,{ref:t,...C("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":N,"with-right-section":k},S],...A,children:[E.jsx(l1,{mounted:!!p,transition:bht,duration:150,children:D=>E.jsx(ke,{component:"span",...C("loader",{style:D}),"aria-hidden":!0,children:E.jsx(Pc,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),E.jsxs("span",{...C("inner"),children:[l&&E.jsx(ke,{component:"span",...C("section"),mod:{position:"left"},children:l}),E.jsx(ke,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&E.jsx(ke,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});on.classes=fM;on.displayName="@mantine/core/Button";on.Group=Yte;const[xht,Eht]=Qa("Card component was not found in tree");var Kte={root:"m_e615b15f",section:"m_599a2148"};const Tht={},dM=Qo((e,t)=>{const n=We("CardSection",Tht,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=Eht();return E.jsx(ke,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});dM.classes=Kte;dM.displayName="@mantine/core/CardSection";const Sht={},Aht=(e,{padding:t})=>({root:{"--card-padding":Co(t)}}),SA=Qo((e,t)=>{const n=We("Card",Sht,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Bt({name:"Card",props:n,classes:Kte,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Aht}),h=R.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===dM?R.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return E.jsx(xht,{value:{getStyles:d},children:E.jsx(bA,{ref:t,unstyled:a,...d("root"),...f,children:p})})});SA.classes=Kte;SA.displayName="@mantine/core/Card";SA.Section=dM;var aRe={root:"m_4451eb3a"};const Cht={},Ko=Qo((e,t)=>{const n=We("Center",Cht,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Bt({name:"Center",props:n,classes:aRe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return E.jsx(ke,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Ko.classes=aRe;Ko.displayName="@mantine/core/Center";var uRe={root:"m_b183c0a2"};const Iht={},kht=(e,{color:t})=>({root:{"--code-bg":t?Li(t,e):void 0}}),T4=ft((e,t)=>{const n=We("Code",Iht,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Bt({name:"Code",props:n,classes:uRe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kht});return E.jsx(ke,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});T4.classes=uRe;T4.displayName="@mantine/core/Code";var lRe={root:"m_7485cace"};const Rht={},Nht=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Wn(t,"container-size")}}),yl=ft((e,t)=>{const n=We("Container",Rht,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Bt({name:"Container",classes:lRe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nht});return E.jsx(ke,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});yl.classes=lRe;yl.displayName="@mantine/core/Container";var cRe={root:"m_3eebeb36",label:"m_9e365f20"};const Pht={orientation:"horizontal"},Dht=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Li(t,e):void 0,"--divider-border-style":n,"--divider-size":Wn(r,"divider-size")}}),AA=ft((e,t)=>{const n=We("Divider",Pht,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Bt({name:"Divider",classes:cRe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Dht});return E.jsx(ke,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&E.jsx(ke,{component:"span",mod:{position:d},...m("label"),children:f})})});AA.classes=cRe;AA.displayName="@mantine/core/Divider";function Oht({open:e,close:t,openDelay:n,closeDelay:r}){const i=R.useRef(-1),s=R.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return R.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[$ht,fRe]=Qa("Grid component was not found in tree"),HY=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Ome=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":HY(e,t),$me=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Lme=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function Lht({span:e,order:t,offset:n,selector:r}){var d;const i=go(),s=fRe(),a=Ah(e)===void 0?12:Ah(e),u=db({"--col-order":(d=Ah(t))==null?void 0:d.toString(),"--col-flex-grow":$me(a,s.grow),"--col-flex-basis":HY(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Ome(a,s.columns,s.grow),"--col-offset":Lme(Ah(n),s.columns)}),l=Gi(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=$me(e[p],s.grow),h[p]["--col-flex-basis"]=HY(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Ome(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Lme(n[p],s.columns)),h},{}),f=Pk(Gi(l),i).filter(h=>Gi(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return E.jsx(kx,{styles:u,media:f,selector:r})}var Xte={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Mht={span:12},Qte=ft((e,t)=>{const n=We("GridCol",Mht,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=fRe(),h=mR();return E.jsxs(E.Fragment,{children:[E.jsx(Lht,{selector:`.${h}`,span:u,order:l,offset:c}),E.jsx(ke,{ref:t,...d.getStyles("col",{className:co(i,h),style:s,classNames:r,styles:o}),...f})]})});Qte.classes=Xte;Qte.displayName="@mantine/core/GridCol";function Fht({gutter:e,selector:t}){const n=go(),r=db({"--grid-gutter":Co(Ah(e))}),i=Gi(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Co(e[u])),a),{}),o=Pk(Gi(i),n).filter(a=>Gi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return E.jsx(kx,{styles:r,media:o,selector:t})}const Bht={gutter:"md",grow:!1,columns:12},jht=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),nf=ft((e,t)=>{const n=We("Grid",Bht,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=Bt({name:"Grid",classes:Xte,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jht}),y=mR();return E.jsxs($ht,{value:{getStyles:g,grow:l,columns:f},children:[E.jsx(Fht,{selector:`.${y}`,...n}),E.jsx(ke,{ref:t,...g("root",{className:y}),...m,children:E.jsx("div",{...g("inner"),children:p})})]})});nf.classes=Xte;nf.displayName="@mantine/core/Grid";nf.Col=Qte;var dRe={root:"m_9e117634"};const Uht={},zht=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:ji(t),"--image-object-fit":n}}),bb=Qo((e,t)=>{const n=We("Image",Uht,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=R.useState(!c);R.useEffect(()=>y(!c),[c]);const v=Bt({name:"Image",classes:dRe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zht});return g&&h?E.jsx(ke,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):E.jsx(ke,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});bb.classes=dRe;bb.displayName="@mantine/core/Image";function S$(){return S$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S$.apply(null,arguments)}function Jte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Vht=R.useLayoutEffect,Hht=function(t){var n=R.useRef(t);return Vht(function(){n.current=t}),n},Mme=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},qht=function(t,n){var r=R.useRef();return R.useCallback(function(i){t.current=i,r.current&&Mme(r.current,null),r.current=n,n&&Mme(n,i)},[n])},Fme={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Wht=function(t){Object.keys(Fme).forEach(function(n){t.style.setProperty(n,Fme[n],"important")})},Bme=Wht,Xu=null,jme=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Ght(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Xu||(Xu=document.createElement("textarea"),Xu.setAttribute("tabindex","-1"),Xu.setAttribute("aria-hidden","true"),Bme(Xu)),Xu.parentNode===null&&document.body.appendChild(Xu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Xu.style[h]=o[h]}),Bme(Xu),Xu.value=t;var u=jme(Xu,e);Xu.value=t,u=jme(Xu,e),Xu.value="x";var l=Xu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Ume=function(){},Yht=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Kht=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Xht=!!document.documentElement.currentStyle,Qht=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Yht(Kht,n),i=r.boxSizing;if(i==="")return null;Xht&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},Jht=Qht;function hRe(e,t,n){var r=Hht(n);R.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var Zht=function(t){hRe(window,"resize",t)},ept=function(t){hRe(document.fonts,"loadingdone",t)},tpt=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],npt=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Ume:o,u=t.onHeightChange,l=u===void 0?Ume:u,c=Jte(t,tpt),f=c.value!==void 0,d=R.useRef(null),h=qht(d,n),p=R.useRef(0),m=R.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:Jht(b);if(w){m.current=w;var x=Ght(w,b.value||b.placeholder||"x",s,i),S=x[0],A=x[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),l(S,{rowHeight:A}))}},y=function(b){f||g(),a(b)};return R.useLayoutEffect(g),Zht(g),ept(g),R.createElement("textarea",S$({},c,{onChange:y,ref:h}))},rpt=R.forwardRef(npt);const ipt={},Zte=ft((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=We("Textarea",ipt,e),u=n&&Rke()!=="test",l=u?{maxRows:r,minRows:i}:{};return E.jsx(Rd,{component:u?rpt:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});Zte.classes=Rd.classes;Zte.displayName="@mantine/core/Textarea";const[spt,opt]=Qa("List component was not found in tree");var ene={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const apt={},tne=ft((e,t)=>{const n=We("ListItem",apt,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=opt(),h=u||d.icon,p={classNames:r,styles:o};return E.jsx(ke,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:E.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&E.jsx("span",{...d.getStyles("itemIcon",p),children:h}),E.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});tne.classes=ene;tne.displayName="@mantine/core/ListItem";const upt={type:"unordered"},lpt=(e,{size:t,spacing:n})=>({root:{"--list-fz":hl(t),"--list-lh":xke(t),"--list-spacing":Co(n)}}),ao=ft((e,t)=>{const n=We("List",upt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=Bt({name:"List",classes:ene,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lpt});return E.jsx(spt,{value:{center:p,icon:d,getStyles:v},children:E.jsx(ke,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});ao.classes=ene;ao.displayName="@mantine/core/List";ao.Item=tne;var pRe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const zme={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:np("overlay")},cpt=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),vf=ft((e,t)=>{const n=We("LoadingOverlay",zme,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=go(),g=Bt({name:"LoadingOverlay",classes:pRe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cpt}),y={...zme.overlayProps,...f};return E.jsx(l1,{transition:"fade",...l,mounted:!!d,children:v=>E.jsxs(ke,{...g("root",{style:v}),ref:t,...p,children:[E.jsx(Pc,{...g("loader"),unstyled:a,...c}),E.jsx($k,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),E.jsx($k,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});vf.classes=pRe;vf.displayName="@mantine/core/LoadingOverlay";const[fpt,wR]=Qa("Menu component was not found in the tree");var CA={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const dpt={},nne=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("MenuDivider",dpt,e),u=wR();return E.jsx(ke,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});nne.classes=CA;nne.displayName="@mantine/core/MenuDivider";const hpt={},rne=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=We("MenuDropdown",hpt,e),f=R.useRef(null),d=wR(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=sg(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=sg(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return E.jsxs(mc.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:mo(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[E.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});rne.classes=CA;rne.displayName="@mantine/core/MenuDropdown";const ppt={},ine=Qo((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=We("MenuItem",ppt,e),p=wR(),m=go(),{dir:g}=a1(),y=R.useRef(),v=p.getItemIndex(y.current),b=h,w=sg(b.onMouseLeave,()=>p.setHovered(-1)),x=sg(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=sg(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),A=sg(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,N=a?K0({color:a,theme:m}):null;return E.jsxs(gf,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:A,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:mo(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:x,onMouseLeave:w,onClick:S,onKeyDown:Uee({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":N!=null&&N.isThemeColor&&(N==null?void 0:N.shade)===void 0?`var(--mantine-color-${N.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&E.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&E.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&E.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});ine.classes=CA;ine.displayName="@mantine/core/MenuItem";const mpt={},sne=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("MenuLabel",mpt,e),u=wR();return E.jsx(ke,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});sne.classes=CA;sne.displayName="@mantine/core/MenuLabel";const gpt={refProp:"ref"},mRe=R.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=We("MenuTarget",gpt,e);if(!hb(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=wR(),o=sg(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=sg(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=sg(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return E.jsx(mc.Target,{refProp:r,popupType:"menu",ref:t,...i,children:R.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});mRe.displayName="@mantine/core/MenuTarget";const ypt={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function rl(e){const t=We("Menu",ypt,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:x,...S}=t,A=Bt({name:"Menu",classes:CA,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:N,resetHovered:k}]=Pat(),[D,L]=wa({value:s,defaultValue:o,finalValue:!1,onChange:u}),[O,B]=R.useState(!1),q=()=>{L(!1),B(!1),D&&(i==null||i())},H=()=>{L(!0),!D&&(r==null||r())},G=()=>{D?q():H()},{openDropdown:K,closeDropdown:J}=Oht({open:H,close:q,closeDelay:p,openDelay:h}),F=M=>Nat("[data-menu-item]","[data-menu-dropdown]",M),{resolvedClassNames:j,resolvedStyles:W}=pR({classNames:m,styles:g,props:t});return I0(()=>{k()},[D]),E.jsx(fpt,{value:{getStyles:A,opened:D,toggleDropdown:G,getItemIndex:F,hovered:C,setHovered:N,openedViaClick:O,setOpenedViaClick:B,closeOnItemClick:l,closeDropdown:d==="click"?q:J,openDropdown:d==="click"?H:K,closeDropdownImmediately:q,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:E.jsx(mc,{...S,opened:D,onChange:G,defaultOpened:o,trapFocus:x?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:j,styles:W,unstyled:y,variant:v,keepMounted:x,children:n})})}rl.extend=e=>e;rl.classes=CA;rl.displayName="@mantine/core/Menu";rl.Item=ine;rl.Label=sne;rl.Dropdown=rne;rl.Target=mRe;rl.Divider=nne;const[vpt,IA]=Qa("Modal component was not found in tree");var f1={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const bpt={},hM=ft((e,t)=>{const n=We("ModalBody",bpt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IA();return E.jsx(k6e,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});hM.classes=f1;hM.displayName="@mantine/core/ModalBody";const _pt={},pM=ft((e,t)=>{const n=We("ModalCloseButton",_pt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IA();return E.jsx(R6e,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});pM.classes=f1;pM.displayName="@mantine/core/ModalCloseButton";const wpt={},mM=ft((e,t)=>{const n=We("ModalContent",wpt,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=IA(),f=c.scrollAreaComponent||zft;return E.jsx(Fft,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:E.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${$e(c.yOffset)} * 2))`},children:u})})});mM.classes=f1;mM.displayName="@mantine/core/ModalContent";const xpt={},gM=ft((e,t)=>{const n=We("ModalHeader",xpt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IA();return E.jsx(N6e,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});gM.classes=f1;gM.displayName="@mantine/core/ModalHeader";const Ept={},yM=ft((e,t)=>{const n=We("ModalOverlay",Ept,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IA();return E.jsx(P6e,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});yM.classes=f1;yM.displayName="@mantine/core/ModalOverlay";const Tpt={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:np("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},Spt=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:ji(t),"--modal-size":Wn(n,"modal-size"),"--modal-y-offset":$e(r),"--modal-x-offset":$e(i)}}),vM=ft((e,t)=>{const n=We("ModalRoot",Tpt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=Bt({name:m,classes:f1,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Spt});return E.jsx(vpt,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:E.jsx(Lft,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});vM.classes=f1;vM.displayName="@mantine/core/ModalRoot";const Apt={},bM=ft((e,t)=>{const n=We("ModalTitle",Apt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IA();return E.jsx(D6e,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});bM.classes=f1;bM.displayName="@mantine/core/ModalTitle";const Cpt={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:np("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ks=ft((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=We("Modal",Cpt,e),c=!!n||s;return E.jsxs(vM,{ref:t,radius:u,...l,children:[r&&E.jsx(yM,{...i}),E.jsxs(mM,{radius:u,children:[c&&E.jsxs(gM,{children:[n&&E.jsx(bM,{children:n}),s&&E.jsx(pM,{...o})]}),E.jsx(hM,{children:a})]})]})});Ks.classes=f1;Ks.displayName="@mantine/core/Modal";Ks.Root=vM;Ks.Overlay=yM;Ks.Content=mM;Ks.Body=hM;Ks.Header=gM;Ks.Title=bM;Ks.CloseButton=pM;const[Ipt,one]=yA(),[kpt,Rpt]=yA();var _M={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const Npt={},Ppt=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Wn(t):Wn(n,"pg-gap")}}),ane=ft((e,t)=>{const n=We("PillGroup",Npt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=one(),h=(d==null?void 0:d.size)||l||void 0,p=Bt({name:"PillGroup",classes:_M,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ppt,stylesCtx:{size:h},rootSelector:"group"});return E.jsx(kpt,{value:{size:h,disabled:c},children:E.jsx(ke,{ref:t,size:h,...p("group"),...f})})});ane.classes=_M;ane.displayName="@mantine/core/PillGroup";const Dpt={variant:"default"},Opt=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Wn(n,"pill-fz"),"--pill-height":Wn(n,"pill-height"),"--pill-radius":t===void 0?void 0:ji(t)}}),Lk=ft((e,t)=>{const n=We("Pill",Dpt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=Rpt(),w=one(),x=m||(b==null?void 0:b.size)||void 0,S=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",A=Bt({name:"Pill",classes:_M,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Opt,stylesCtx:{size:x}});return E.jsxs(ke,{component:"span",ref:t,variant:S,size:x,...A("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[E.jsx("span",{...A("label"),children:c}),f&&E.jsx(gb,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...A("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var N;C.preventDefault(),C.stopPropagation(),(N=h==null?void 0:h.onMouseDown)==null||N.call(h,C)},onClick:C=>{var N;C.stopPropagation(),d==null||d(),(N=h==null?void 0:h.onClick)==null||N.call(h,C)}})]})});Lk.classes=_M;Lk.displayName="@mantine/core/Pill";Lk.Group=ane;var gRe={field:"m_45c4369d"};const $pt={type:"visible"},une=ft((e,t)=>{const n=We("PillsInputField",$pt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=one(),g=EA(),y=Bt({name:"PillsInputField",classes:gRe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return E.jsx(ke,{component:"input",ref:mo(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});une.classes=gRe;une.displayName="@mantine/core/PillsInputField";const Lpt={},A$=ft((e,t)=>{const n=We("PillsInput",Lpt,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=R.useRef();return E.jsx(Ipt,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:E.jsx(Rd,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});A$.displayName="@mantine/core/PillsInput";A$.Field=une;function Mpt({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(oS(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const Fpt={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},lne=ft((e,t)=>{const n=We("MultiSelect",Fpt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:x,comboboxProps:S,filter:A,limit:C,withScrollArea:N,maxDropdownHeight:k,searchValue:D,defaultSearchValue:L,onSearchChange:O,readOnly:B,disabled:q,onFocus:H,onBlur:G,onPaste:K,radius:J,rightSection:F,rightSectionWidth:j,rightSectionPointerEvents:W,rightSectionProps:M,leftSection:V,leftSectionWidth:Q,leftSectionPointerEvents:se,leftSectionProps:be,inputContainer:he,inputWrapperOrder:Ce,withAsterisk:De,labelProps:rt,descriptionProps:Re,errorProps:Tt,wrapperProps:Ze,description:It,label:mt,error:Se,maxValues:Fe,searchable:st,nothingFoundMessage:yt,withCheckIcon:Nt,checkIconPosition:Je,hidePickedOptions:xe,withErrorStyles:kt,name:Rt,form:Ee,id:Oe,clearable:ot,clearButtonProps:_t,hiddenInputProps:jt,placeholder:Un,hiddenInputValuesDivider:hr,required:Sr,mod:_i,renderOption:Sn,onRemove:zn,onClear:pr,scrollAreaProps:yr,...ea}=n,rs=ju(Oe),ms=U6e(m),Ls=Pte(ms),Hr=Vte({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Hr.resetSelectedOption()}}),{styleProps:gs,rest:{type:Mc,autoComplete:ta,...Vu}}=Rx(ea),[Br,ki]=wa({value:c,defaultValue:f,finalValue:[],onChange:d}),[mi,eo]=wa({value:D,defaultValue:L,finalValue:"",onChange:O}),oi=Bt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ri,resolvedStyles:me}=pR({props:n,styles:o,classNames:r}),ue=wt=>{h==null||h(wt),wt.key===" "&&!st&&(wt.preventDefault(),Hr.toggleDropdown()),wt.key==="Backspace"&&mi.length===0&&Br.length>0&&(zn==null||zn(Br[Br.length-1]),ki(Br.slice(0,Br.length-1)))},ge=Br.map((wt,Ut)=>{var dn,Zn;return E.jsx(Lk,{withRemoveButton:!B&&!((dn=Ls[wt])!=null&&dn.disabled),onRemove:()=>{ki(Br.filter(ur=>wt!==ur)),zn==null||zn(wt)},unstyled:a,disabled:q,...oi("pill"),children:((Zn=Ls[wt])==null?void 0:Zn.label)||wt},`${wt}-${Ut}`)});R.useEffect(()=>{w&&Hr.selectFirstOption()},[w,Br]);const Me=ot&&Br.length>0&&!q&&!B&&E.jsx($r.ClearButton,{size:l,..._t,onClear:()=>{pr==null||pr(),ki([]),eo("")}}),Le=Mpt({data:ms,value:Br});return E.jsxs(E.Fragment,{children:[E.jsxs($r,{store:Hr,classNames:Ri,styles:me,unstyled:a,size:l,readOnly:B,__staticSelector:"MultiSelect",onOptionSubmit:wt=>{x==null||x(wt),eo(""),Hr.updateSelectedOptionIndex("selected"),Br.includes(Ls[wt].value)?(ki(Br.filter(Ut=>Ut!==Ls[wt].value)),zn==null||zn(Ls[wt].value)):Br.length<Fe&&ki([...Br,Ls[wt].value])},...S,children:[E.jsx($r.DropdownTarget,{children:E.jsx(A$,{...gs,__staticSelector:"MultiSelect",classNames:Ri,styles:me,unstyled:a,size:l,className:i,style:s,variant:p,disabled:q,radius:J,rightSection:F||Me||E.jsx($r.Chevron,{size:l,error:Se,unstyled:a}),rightSectionPointerEvents:W||(Me?"all":"none"),rightSectionWidth:j,rightSectionProps:M,leftSection:V,leftSectionWidth:Q,leftSectionPointerEvents:se,leftSectionProps:be,inputContainer:he,inputWrapperOrder:Ce,withAsterisk:De,labelProps:rt,descriptionProps:Re,errorProps:Tt,wrapperProps:Ze,description:It,label:mt,error:Se,multiline:!0,withErrorStyles:kt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Me?"all":"none"),multiline:!0},pointer:!st,onClick:()=>st?Hr.openDropdown():Hr.toggleDropdown(),"data-expanded":Hr.dropdownOpened||void 0,id:rs,required:Sr,mod:_i,children:E.jsxs(Lk.Group,{disabled:q,unstyled:a,...oi("pillsList"),children:[ge,E.jsx($r.EventsTarget,{autoComplete:ta,children:E.jsx(A$.Field,{...Vu,ref:t,id:rs,placeholder:Un,type:!st&&!Un?"hidden":"visible",...oi("inputField"),unstyled:a,onFocus:wt=>{H==null||H(wt),st&&Hr.openDropdown()},onBlur:wt=>{G==null||G(wt),Hr.closeDropdown(),eo("")},onKeyDown:ue,value:mi,onChange:wt=>{eo(wt.currentTarget.value),st&&Hr.openDropdown(),w&&Hr.selectFirstOption()},disabled:q,readOnly:B||!st,pointer:!st})})]})})}),E.jsx(sRe,{data:xe?Le:ms,hidden:B||q,filter:A,search:mi,limit:C,hiddenWhenEmpty:!st||!yt||xe&&Le.length===0&&mi.trim().length===0,withScrollArea:N,maxDropdownHeight:k,filterOptions:st,value:Br,checkIconPosition:Je,withCheckIcon:Nt,nothingFoundMessage:yt,unstyled:a,labelId:mt?`${rs}-label`:void 0,"aria-label":mt?void 0:ea["aria-label"],renderOption:Sn,scrollAreaProps:yr})]}),E.jsx($r.HiddenInput,{name:Rt,valuesDivider:hr,value:Br,form:Ee,disabled:q,...jt})]})});lne.classes={...Rd.classes,...$r.classes};lne.displayName="@mantine/core/MultiSelect";var yRe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const Bpt={},jpt=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Co(r)}}},wM=Qo((e,t)=>{const n=We("NavLink",Bpt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:x,childrenOffset:S,onKeyDown:A,autoContrast:C,mod:N,...k}=n,D=Bt({name:"NavLink",props:n,classes:yRe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jpt}),[L,O]=wa({value:l,defaultValue:c,finalValue:!1,onChange:f}),B=!!d,q=H=>{h==null||h(H),B&&(H.preventDefault(),O(!L))};return E.jsxs(E.Fragment,{children:[E.jsxs(gf,{...D("root"),component:"a",ref:t,onClick:q,onKeyDown:H=>{A==null||A(H),H.nativeEvent.code==="Space"&&B&&(H.preventDefault(),O(!L))},unstyled:a,mod:[{disabled:m,active:p,expanded:L},N],...k,children:[g&&E.jsx(ke,{component:"span",...D("section"),mod:{position:"left"},children:g}),E.jsxs(ke,{...D("body"),mod:{"no-wrap":x},children:[E.jsx(ke,{component:"span",...D("label"),children:v}),E.jsx(ke,{component:"span",mod:{active:p},...D("description"),children:b})]}),(B||y)&&E.jsx(ke,{...D("section"),component:"span",mod:{rotate:L&&!w,position:"right"},children:B?y||E.jsx(lM,{...D("chevron")}):y})]}),E.jsx(tM,{in:L,...D("collapse"),children:E.jsx("div",{...D("children"),children:d})})]})});wM.classes=yRe;wM.displayName="@mantine/core/NavLink";var vRe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const Upt={withCloseButton:!0},zpt=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:ji(t),"--notification-color":n?Li(n,e):void 0}}),cne=ft((e,t)=>{const n=We("Notification",Upt,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:b,mod:w,...x}=n,S=Bt({name:"Notification",classes:vRe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:b,varsResolver:zpt});return E.jsxs(ke,{...S("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:v,...x,role:"alert",children:[c&&!o&&E.jsx("div",{...S("icon"),children:c}),o&&E.jsx(Pc,{size:28,color:i,...S("loader")}),E.jsxs("div",{...S("body"),children:[l&&E.jsx("div",{...S("title"),children:l}),E.jsx(ke,{...S("description"),mod:{"data-with-title":!!l},children:f})]}),a&&E.jsx(gb,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...S("closeButton")})]})});cne.classes=vRe;cne.displayName="@mantine/core/Notification";function bRe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var Mk;(function(e){e.event="event",e.props="prop"})(Mk||(Mk={}));function ky(){}function Vpt(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function Fk(e){return!!(e||"").match(/\d/)}function mT(e){return e==null}function Hpt(e){return typeof e=="number"&&isNaN(e)}function _Re(e){return mT(e)||Hpt(e)||typeof e=="number"&&!isFinite(e)}function wRe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function qpt(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Wpt(e,t,n){var r=qpt(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function Gpt(e){var t=R.useRef(e);t.current=e;var n=R.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function fne(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function Ypt(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function xRe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Vme(e,t){return Array(t+1).join(e)}function ERe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Vme("0",Math.abs(o))+i:o>=a?i=i+Vme("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Hme(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=fne(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=xRe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function j_(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var TRe=Vpt(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),Kpt=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function Xpt(e,t,n){return Math.min(Math.max(e,t),n)}function oV(e){return Math.max(e.selectionStart,e.selectionEnd)}function Qpt(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Jpt(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Zpt(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function e0t(e,t,n,r,i,s,o){o===void 0&&(o=Zpt);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function qme(e,t,n,r){var i=e.length;if(t=Xpt(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function t0t(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(Fk(e[n])||Fk(e[n-1]));return t}function SRe(e,t,n,r,i,s){s===void 0&&(s=ky);var o=Gpt(function(p,m){var g,y;return _Re(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?ERe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=R.useState(function(){return o(mT(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;mT(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return R.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function n0t(e){return e.replace(/[^0-9]/g,"")}function r0t(e){return e}function i0t(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=r0t);var a=e.removeFormatting;a===void 0&&(a=n0t);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=ky);var h=e.onKeyDown;h===void 0&&(h=ky);var p=e.onMouseUp;p===void 0&&(p=ky);var m=e.onFocus;m===void 0&&(m=ky);var g=e.onBlur;g===void 0&&(g=ky);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=t0t);var b=e.isValidInputCharacter;b===void 0&&(b=Fk);var w=e.isCharacterSame,x=bRe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=SRe(y,u,!!l,o,a,c),A=S[0],C=A.formattedValue,N=A.numAsString,k=S[1],D=R.useRef(),L=R.useRef({formattedValue:C,numAsString:N}),O=function(Se,Fe){L.current={formattedValue:Se.formattedValue,numAsString:Se.value},k(Se,Fe)},B=R.useState(!1),q=B[0],H=B[1],G=R.useRef(null),K=R.useRef({setCaretTimeout:null,focusTimeout:null});R.useEffect(function(){return H(!0),function(){clearTimeout(K.current.setCaretTimeout),clearTimeout(K.current.focusTimeout)}},[]);var J=o,F=function(Se,Fe){var st=parseFloat(Fe);return{formattedValue:Se,value:Fe,floatValue:isNaN(st)?void 0:st}},j=function(Se,Fe,st){Se.selectionStart===0&&Se.selectionEnd===Se.value.length||(j_(Se,Fe),K.current.setCaretTimeout=setTimeout(function(){Se.value===st&&Se.selectionStart!==Fe&&j_(Se,Fe)},0))},W=function(Se,Fe,st){return qme(Se,Fe,v(Se),st)},M=function(Se,Fe,st){var yt=v(Fe),Nt=e0t(Fe,C,Se,st,yt,b,w);return Nt=qme(Fe,Nt,yt),Nt},V=function(Se){var Fe=Se.formattedValue;Fe===void 0&&(Fe="");var st=Se.input,yt=Se.source,Nt=Se.event,Je=Se.numAsString,xe;if(st){var kt=Se.inputValue||st.value,Rt=oV(st);st.value=Fe,xe=M(kt,Fe,Rt),xe!==void 0&&j(st,xe,Fe)}Fe!==C&&O(F(Fe,Je),{event:Nt,source:yt})};R.useEffect(function(){var Se=L.current,Fe=Se.formattedValue,st=Se.numAsString;(C!==Fe||N!==st)&&O(F(C,N),{event:void 0,source:Mk.props})},[C,N]);var Q=G.current?oV(G.current):void 0,se=typeof window<"u"?R.useLayoutEffect:R.useEffect;se(function(){var Se=G.current;if(C!==L.current.formattedValue&&Se){var Fe=M(L.current.formattedValue,C,Q);Se.value=C,j(Se,Fe,C)}},[C]);var be=function(Se,Fe,st){var yt=Fe.target,Nt=D.current?Kpt(D.current,yt.selectionEnd):TRe(C,Se),Je=Object.assign(Object.assign({},Nt),{lastValue:C}),xe=a(Se,Je),kt=J(xe);if(xe=a(kt,void 0),f&&!f(F(kt,xe))){var Rt=Fe.target,Ee=oV(Rt),Oe=M(Se,C,Ee);return Rt.value=C,j(Rt,Oe,C),!1}return V({formattedValue:kt,numAsString:xe,inputValue:Se,event:Fe,source:st,input:Fe.target}),!0},he=function(Se,Fe){Fe===void 0&&(Fe=0);var st=Se.selectionStart,yt=Se.selectionEnd;D.current={selectionStart:st,selectionEnd:yt+Fe}},Ce=function(Se){var Fe=Se.target,st=Fe.value,yt=be(st,Se,Mk.event);yt&&d(Se),D.current=void 0},De=function(Se){var Fe=Se.target,st=Se.key,yt=Fe.selectionStart,Nt=Fe.selectionEnd,Je=Fe.value;Je===void 0&&(Je="");var xe;st==="ArrowLeft"||st==="Backspace"?xe=Math.max(yt-1,0):st==="ArrowRight"?xe=Math.min(yt+1,Je.length):st==="Delete"&&(xe=yt);var kt=0;st==="Delete"&&yt===Nt&&(kt=1);var Rt=st==="ArrowLeft"||st==="ArrowRight";if(xe===void 0||yt!==Nt&&!Rt){h(Se),he(Fe,kt);return}var Ee=xe;if(Rt){var Oe=st==="ArrowLeft"?"left":"right";Ee=W(Je,xe,Oe),Ee!==xe&&Se.preventDefault()}else st==="Delete"&&!b(Je[xe])?Ee=W(Je,xe,"right"):st==="Backspace"&&!b(Je[xe])&&(Ee=W(Je,xe,"left"));Ee!==xe&&j(Fe,Ee,Je),h(Se),he(Fe,kt)},rt=function(Se){var Fe=Se.target,st=function(){var yt=Fe.selectionStart,Nt=Fe.selectionEnd,Je=Fe.value;if(Je===void 0&&(Je=""),yt===Nt){var xe=W(Je,yt);xe!==yt&&j(Fe,xe,Je)}};st(),requestAnimationFrame(function(){st()}),p(Se),he(Fe)},Re=function(Se){Se.persist&&Se.persist();var Fe=Se.target,st=Se.currentTarget;G.current=Fe,K.current.focusTimeout=setTimeout(function(){var yt=Fe.selectionStart,Nt=Fe.selectionEnd,Je=Fe.value;Je===void 0&&(Je="");var xe=W(Je,yt);xe!==yt&&!(yt===0&&Nt===Je.length)&&j(Fe,xe,Je),m(Object.assign(Object.assign({},Se),{currentTarget:st}))},0)},Tt=function(Se){G.current=null,clearTimeout(K.current.focusTimeout),clearTimeout(K.current.setCaretTimeout),g(Se)},Ze=q&&Qpt()?"numeric":void 0,It=Object.assign({inputMode:Ze},x,{type:t,value:C,onChange:Ce,onKeyDown:De,onMouseUp:rt,onFocus:Re,onBlur:Tt});if(n==="text")return i?ni.createElement(ni.Fragment,null,i(C,x)||null):ni.createElement("span",Object.assign({},x,{ref:s}),C);if(r){var mt=r;return ni.createElement(mt,Object.assign({},It,{ref:s}))}return ni.createElement("input",Object.assign({},It,{ref:s}))}function Wme(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=xM(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=fne(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=xRe(p,n,!!r)),l&&(h=Wpt(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function xM(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function s0t(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function o0t(e,t){return new RegExp("(^-)|[0-9]|"+wRe(e),"g")}function a0t(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function u0t(e,t,n){var r;t===void 0&&(t=Jpt(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=xM(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(Fk(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(G,K,J){var F=!1,j=!1;s.startsWith("-")?F=!1:G.startsWith("--")?(F=!1,j=!0):o.startsWith("-")&&G.length===o.length?F=!1:G[0]==="-"&&(F=!0);var W=F?1:0;return j&&(W=2),W&&(G=G.substring(W),K-=W,J-=W),{value:G,start:K,end:J,hasNegation:F}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),x=w.start,S=w.end,A=w.value,C=e.substring(c,f);e.length&&A.length&&(x>A.length-o.length||S<s.length)&&!(C&&o.startsWith(C))&&(e=A);var N=0;e.startsWith(s)?N+=s.length:c<s.length&&(N=c),e=e.substring(N),f-=N;var k=e.length,D=e.length-o.length;e.endsWith(o)?k=D:(f>D||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=s0t(b?"-"+e:e,i),e=(e.match(o0t(p))||[]).join("");var L=e.indexOf(p);e=e.replace(new RegExp(wRe(p),"g"),function(G,K){return K===L?".":""});var O=fne(e,i),B=O.beforeDecimal,q=O.afterDecimal,H=O.addNegation;return l.end-l.start<u.end-u.start&&B===""&&m&&!parseFloat(q)&&(e=H?"-":""),e}function l0t(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function c0t(e){var t=xM(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function f0t(e){e=c0t(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=ky);var s=e.onBlur;s===void 0&&(s=ky);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=bRe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=xM(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(H){return Wme(H,e)},b=function(H,G){return u0t(H,G,e)},w=mT(f)?c:f,x=d??a0t(w,l,t);mT(f)?mT(c)||(x=x||typeof c=="number"):x=x||typeof f=="number";var S=function(H){return _Re(H)?H:(typeof H=="number"&&(H=ERe(H)),x&&typeof a=="number"?Hme(H,a,!!u):H)},A=SRe(S(f),S(c),!!x,v,b,h),C=A[0],N=C.numAsString,k=C.formattedValue,D=A[1],L=function(H){var G=H.target,K=H.key,J=G.selectionStart,F=G.selectionEnd,j=G.value;if(j===void 0&&(j=""),(K==="Backspace"||K==="Delete")&&F<l.length){H.preventDefault();return}if(J!==F){i(H);return}K==="Backspace"&&j[0]==="-"&&J===l.length+1&&n&&j_(G,1),a&&u&&(K==="Backspace"&&j[J-1]===g?(j_(G,J-1),H.preventDefault()):K==="Delete"&&j[J]===g&&H.preventDefault()),y!=null&&y.includes(K)&&j[J]===g&&j_(G,J+1);var W=o===!0?",":o;K==="Backspace"&&j[J-1]===W&&j_(G,J-1),K==="Delete"&&j[J]===W&&j_(G,J+1),i(H)},O=function(H){var G=N;if(G.match(/\d/g)||(G=""),r||(G=Ypt(G)),u&&a&&(G=Hme(G,a,u)),G!==N){var K=Wme(G,e);D({formattedValue:K,value:G,floatValue:parseFloat(G)},{event:H,source:Mk.event})}s(H)},B=function(H){return H===g?!0:Fk(H)},q=function(H){var G=H.currentValue,K=H.lastValue,J=H.formattedValue,F=H.currentValueIndex,j=H.formattedValueIndex,W=G[F],M=J[j],V=TRe(K,G),Q=V.to;return F>=Q.start&&F<Q.end&&y&&y.includes(W)&&M===g?!0:W===M};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:B,isCharacterSame:q,onValueChange:D,format:v,removeFormatting:b,getCaretBoundary:function(H){return l0t(H,e)},onKeyDown:L,onBlur:O})}function d0t(e){var t=f0t(e);return ni.createElement(i0t,Object.assign({},t))}function Gme({direction:e,style:t,...n}){return E.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:E.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var qY={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const h0t=/^(0\.0*|-0(\.0*)?)$/,p0t=/^-?0\d+(\.\d+)?\.?$/;function m0t(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Yme(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const g0t={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},y0t=(e,{size:t})=>({controls:{"--ni-chevron-size":Wn(t,"ni-chevron-size")}}),dne=ft((e,t)=>{const n=We("NumberInput",g0t,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:x,onKeyDown:S,onKeyDownCapture:A,handlersRef:C,startValue:N,disabled:k,rightSectionPointerEvents:D,allowNegative:L,readOnly:O,size:B,rightSectionWidth:q,stepHoldInterval:H,stepHoldDelay:G,allowLeadingZeros:K,withKeyboardEvents:J,trimLeadingZeroesOnBlur:F,...j}=n,W=Bt({name:"NumberInput",classes:qY,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:y0t}),{resolvedClassNames:M,resolvedStyles:V}=pR({classNames:i,styles:s,props:n}),[Q,se]=wa({value:c,defaultValue:f,onChange:u}),be=G!==void 0&&H!==void 0,he=R.useRef(null),Ce=R.useRef(null),De=R.useRef(0),rt=(xe,kt)=>{kt.source==="event"&&se(m0t(xe.floatValue)&&!h0t.test(xe.value)&&!(K&&p0t.test(xe.value))?xe.floatValue:xe.value),l==null||l(xe,kt)},Re=xe=>{const kt=String(xe).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return kt?Math.max(0,(kt[1]?kt[1].length:0)-(kt[2]?+kt[2]:0)):0},Tt=xe=>{he.current&&typeof xe<"u"&&he.current.setSelectionRange(xe,xe)},Ze=R.useRef();Ze.current=()=>{let xe;const kt=Re(Q),Rt=Re(p),Ee=Math.max(kt,Rt),Oe=10**Ee;if(typeof Q!="number"||Number.isNaN(Q))xe=og(N,h,d);else if(d!==void 0){const _t=(Math.round(Q*Oe)+Math.round(p*Oe))/Oe;xe=_t<=d?_t:d}else xe=(Math.round(Q*Oe)+Math.round(p*Oe))/Oe;const ot=xe.toFixed(Ee);se(parseFloat(ot)),l==null||l({floatValue:parseFloat(ot),formattedValue:ot,value:ot},{source:"increment"}),setTimeout(()=>{var _t;return Tt((_t=he.current)==null?void 0:_t.value.length)},0)};const It=R.useRef();It.current=()=>{let xe;const kt=h!==void 0?h:L?Number.MIN_SAFE_INTEGER:0,Rt=Re(Q),Ee=Re(p),Oe=Math.max(Rt,Ee),ot=10**Oe;if(typeof Q!="number"||Number.isNaN(Q))xe=og(N,kt,d);else{const jt=(Math.round(Q*ot)-Math.round(p*ot))/ot;xe=kt!==void 0&&jt<kt?kt:jt}const _t=xe.toFixed(Oe);se(parseFloat(_t)),l==null||l({floatValue:parseFloat(_t),formattedValue:_t,value:_t},{source:"decrement"}),setTimeout(()=>{var jt;return Tt((jt=he.current)==null?void 0:jt.value.length)},0)};const mt=xe=>{S==null||S(xe),!(O||!J)&&(xe.key==="ArrowUp"&&(xe.preventDefault(),Ze.current()),xe.key==="ArrowDown"&&(xe.preventDefault(),It.current()))},Se=xe=>{if(A==null||A(xe),xe.key==="Backspace"){const kt=he.current;kt.selectionStart===0&&kt.selectionStart===kt.selectionEnd&&(xe.preventDefault(),window.setTimeout(()=>Tt(0),0))}};Hee(C,{increment:Ze.current,decrement:It.current});const Fe=xe=>{xe?Ze.current():It.current(),De.current+=1},st=xe=>{if(Fe(xe),be){const kt=typeof H=="number"?H:H(De.current);Ce.current=window.setTimeout(()=>st(xe),kt)}},yt=(xe,kt)=>{var Rt;xe.preventDefault(),(Rt=he.current)==null||Rt.focus(),Fe(kt),be&&(Ce.current=window.setTimeout(()=>st(kt),G))},Nt=()=>{Ce.current&&window.clearTimeout(Ce.current),Ce.current=null,De.current=0},Je=E.jsxs("div",{...W("controls"),children:[E.jsx(gf,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof Q=="number"&&d!==void 0&&Q>=d,mod:{direction:"up"},onMouseDown:xe=>xe.preventDefault(),onPointerDown:xe=>{yt(xe,!0)},onPointerUp:Nt,onPointerLeave:Nt,children:E.jsx(Gme,{direction:"up"})}),E.jsx(gf,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof Q=="number"&&h!==void 0&&Q<=h,mod:{direction:"down"},onMouseDown:xe=>xe.preventDefault(),onPointerDown:xe=>{yt(xe,!1)},onPointerUp:Nt,onPointerLeave:Nt,children:E.jsx(Gme,{direction:"down"})})]});return E.jsx(Rd,{component:d0t,allowNegative:L,className:co(qY.root,r),size:B,...j,readOnly:O,disabled:k,value:Q,getInputRef:mo(t,he),onValueChange:rt,rightSection:m||O?g:g||Je,classNames:M,styles:V,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?x:0,onKeyDown:mt,onKeyDownCapture:Se,rightSectionPointerEvents:D??(k?"none":void 0),rightSectionWidth:q??`var(--ni-right-section-width-${B||"sm"})`,allowLeadingZeros:K,onBlur:xe=>{if(b==null||b(xe),v==="blur"&&typeof Q=="number"&&og(Q,h,d)!==Q&&se(og(Q,h,d)),F&&typeof Q=="string"){const kt=Q.replace(/^0+/,""),Rt=parseFloat(kt);se(Number.isNaN(Rt)?kt:Rt)}},isAllowed:xe=>v==="strict"?y?y(xe)&&Yme(xe.floatValue,h,d):Yme(xe.floatValue,h,d):y?y(xe):!0})});dne.classes={...Rd.classes,...qY};dne.displayName="@mantine/core/NumberInput";const[v0t,ARe]=Qa("Progress.Root component was not found in tree");var xR={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const b0t={},hne=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=We("ProgressLabel",b0t,e),u=ARe();return E.jsx(ke,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});hne.classes=xR;hne.displayName="@mantine/core/ProgressLabel";const _0t={},w0t=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Wn(t,"progress-size"),"--progress-radius":n===void 0?void 0:ji(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),EM=ft((e,t)=>{const n=We("ProgressRoot",_0t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Bt({name:"Progress",classes:xR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:w0t});return E.jsx(v0t,{value:{getStyles:d,autoContrast:l},children:E.jsx(ke,{ref:t,...d("root"),...f})})});EM.classes=xR;EM.displayName="@mantine/core/ProgressRoot";const x0t={withAria:!0},TM=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=We("ProgressSection",x0t,e),p=ARe(),m=go(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return E.jsx(ke,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Li(l,m),"--progress-label-color":vA(p.autoContrast,m)?mb({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});TM.classes=xR;TM.displayName="@mantine/core/ProgressSection";const E0t={},kA=ft((e,t)=>{const n=We("Progress",E0t,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=pR({classNames:i,styles:s,props:n});return E.jsx(EM,{ref:t,classNames:d,styles:h,vars:o,...f,children:E.jsx(TM,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});kA.classes=xR;kA.displayName="@mantine/core/Progress";kA.Section=TM;kA.Root=EM;kA.Label=hne;const[T0t,CRe]=yA(),[S0t,A0t]=yA();var IRe={card:"m_9dc8ae12"};const C0t={withBorder:!0},I0t=(e,{radius:t})=>({card:{"--card-radius":ji(t)}}),pne=ft((e,t)=>{const n=We("RadioCard",C0t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=Bt({name:"RadioCard",classes:IRe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:I0t,rootSelector:"card"}),{dir:v}=a1(),b=CRe(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,x=p||(b==null?void 0:b.name),S=A=>{if(m==null||m(A),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(A.nativeEvent.code)){A.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${x||"__mantine"}"]`)),N=C.findIndex(L=>L===A.target),k=N+1>=C.length?0:N+1,D=N-1<0?C.length-1:N-1;A.nativeEvent.code==="ArrowDown"&&(C[k].focus(),C[k].click()),A.nativeEvent.code==="ArrowUp"&&(C[D].focus(),C[D].click()),A.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?D:k].focus(),C[v==="ltr"?D:k].click()),A.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?k:D].focus(),C[v==="ltr"?k:D].click())}};return E.jsx(S0t,{value:{checked:w},children:E.jsx(gf,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:x,onClick:A=>{h==null||h(A),b==null||b.onChange(d||"")},onKeyDown:S})})});pne.displayName="@mantine/core/RadioCard";pne.classes=IRe;const k0t={},mne=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=We("RadioGroup",k0t,e),f=ju(u),[d,h]=wa({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return E.jsx(T0t,{value:{value:d,onChange:p,size:s,name:f},children:E.jsx(Qs.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:E.jsx(qte,{role:"radiogroup",children:a})})})});mne.classes=Qs.Wrapper.classes;mne.displayName="@mantine/core/RadioGroup";function kRe({size:e,style:t,...n}){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:$e(e),height:$e(e),...t},"aria-hidden":!0,...n,children:E.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var RRe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const R0t={icon:kRe},N0t=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=K0({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Wn(r,"radio-size"),"--radio-radius":t===void 0?void 0:ji(t),"--radio-color":s==="outline"?u:Li(n,e),"--radio-icon-size":Wn(r,"radio-icon-size"),"--radio-icon-color":i?Li(i,e):vA(o,e)?mb({color:n,theme:e,autoContrast:o}):void 0}}},gne=ft((e,t)=>{const n=We("RadioIndicator",R0t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=Bt({name:"RadioIndicator",classes:RRe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:N0t,rootSelector:"indicator"}),x=A0t(),S=typeof p=="boolean"?p:(x==null?void 0:x.checked)||!1;return E.jsx(ke,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:E.jsx(b,{...w("icon")})})});gne.displayName="@mantine/core/RadioIndicator";gne.classes=RRe;var NRe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const P0t={labelPosition:"right"},D0t=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=K0({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Wn(t,"radio-size"),"--radio-radius":n===void 0?void 0:ji(n),"--radio-color":s==="outline"?u:Li(r,e),"--radio-icon-color":i?Li(i,e):vA(o,e)?mb({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Wn(t,"radio-icon-size")}}},Bg=ft((e,t)=>{const n=We("Radio",P0t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=kRe,rootRef:x,iconColor:S,onChange:A,mod:C,...N}=n,k=Bt({name:"Radio",classes:NRe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:D0t}),D=CRe(),L=(D==null?void 0:D.size)??c,O=n.size?c:L,{styleProps:B,rest:q}=Rx(N),H=ju(l),G=D?{checked:D.value===q.value,name:q.name??D.name,onChange:K=>{D.onChange(K),A==null||A(K)}}:{};return E.jsx(cM,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:H,size:O,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":G.checked||void 0,variant:y,ref:x,mod:C,...B,...b,children:E.jsxs(ke,{...k("inner"),mod:{"label-position":d},children:[E.jsx(ke,{...k("radio",{focusable:!0,variant:y}),onChange:A,...q,...G,component:"input",mod:{error:!!p},ref:t,id:H,disabled:v,type:"radio"}),E.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});Bg.classes=NRe;Bg.displayName="@mantine/core/Radio";Bg.Group=mne;Bg.Card=pne;Bg.Indicator=gne;const O0t={duration:100,transition:"fade"};function $0t(e,t){return{...O0t,...t,...e}}function L0t({offset:e,position:t}){const[n,r]=R.useState(!1),i=R.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=mte({placement:t,middleware:[fte({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=R.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return R.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=vg(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var SM={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const M0t={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:np("popover")},F0t=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ji(t),"--tooltip-bg":n?Li(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),yne=ft((e,t)=>{const n=We("TooltipFloating",M0t,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:x,...S}=n,A=go(),C=Bt({name:"TooltipFloating",props:n,classes:SM,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:F0t}),{handleMouseMove:N,x:k,y:D,opened:L,boundaryRef:O,floating:B,setOpened:q}=L0t({offset:p,position:m});if(!hb(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const H=mo(O,r.ref,t),G=J=>{var F,j;(j=(F=r.props).onMouseEnter)==null||j.call(F,J),N(J),q(!0)},K=J=>{var F,j;(j=(F=r.props).onMouseLeave)==null||j.call(F,J),q(!1)};return E.jsxs(E.Fragment,{children:[E.jsx(xA,{...x,withinPortal:s,children:E.jsx(ke,{...S,...C("tooltip",{style:{...Qee(o,A),zIndex:y,display:!v&&L?"block":"none",top:(D&&Math.round(D))??"",left:(k&&Math.round(k))??""}}),variant:b,ref:B,mod:{multiline:g},children:h})}),R.cloneElement(r,{...r.props,[i]:H,onMouseEnter:G,onMouseLeave:K})]})});yne.classes=SM;yne.displayName="@mantine/core/TooltipFloating";const PRe=R.createContext(!1),B0t=PRe.Provider,j0t=()=>R.useContext(PRe),U0t={openDelay:0,closeDelay:0};function DRe(e){const{openDelay:t,closeDelay:n,children:r}=We("TooltipGroup",U0t,e);return E.jsx(B0t,{value:!0,children:E.jsx(Yct,{delay:{open:t,close:n},children:r})})}DRe.displayName="@mantine/core/TooltipGroup";function z0t(e){var S,A,C;const[t,n]=R.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=j0t(),o=ju(),{delay:a,currentId:u,setCurrentId:l}=g6e(),c=R.useCallback(N=>{n(N),N&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=mte({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[f6e(e.offset),fte({padding:8}),UY(),d6e({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[zY()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=tft([Gct(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((A=e.events)!=null&&A.touch)}),eft(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),rft(h,{role:"tooltip"}),Jct(h,{enabled:typeof e.opened>"u"}),Kct(h,{id:o})]);E6e({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),I0(()=>{var N;(N=e.onPositionChange)==null||N.call(e,g)},[g]);const x=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:x,opened:i,placement:g}}const Kme={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:np("popover"),positionDependencies:[]},V0t=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ji(t),"--tooltip-bg":n?Li(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),us=ft((e,t)=>{const n=We("Tooltip",Kme,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:x,arrowRadius:S,arrowPosition:A,offset:C,transitionProps:N,multiline:k,events:D,zIndex:L,disabled:O,positionDependencies:B,onClick:q,onMouseEnter:H,onMouseLeave:G,inline:K,variant:J,keepMounted:F,vars:j,portalProps:W,mod:M,floatingStrategy:V,...Q}=We("Tooltip",Kme,n),{dir:se}=a1(),be=R.useRef(null),he=z0t({position:y6e(se,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:D,arrowRef:be,arrowOffset:x,offset:typeof C=="number"?C+(b?w/2:0):C,positionDependencies:[...B,r],inline:K,strategy:V}),Ce=Bt({name:"Tooltip",props:n,classes:SM,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:j,varsResolver:V0t});if(!hb(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const De=mo(he.reference,r.ref,t),rt=$0t(N,{duration:100,transition:"fade"});return E.jsxs(E.Fragment,{children:[E.jsx(xA,{...W,withinPortal:f,children:E.jsx(l1,{...rt,keepMounted:F,mounted:!O&&!!he.opened,duration:he.isGroupPhase?10:rt.duration,children:Re=>E.jsxs(ke,{...Q,variant:J,mod:[{multiline:k},M],...he.getFloatingProps({ref:he.floating,className:Ce("tooltip").className,style:{...Ce("tooltip").style,...Re,zIndex:L,top:he.y??0,left:he.x??0}}),children:[o,E.jsx(gte,{ref:be,arrowX:he.arrowX,arrowY:he.arrowY,visible:b,position:he.placement,arrowSize:w,arrowOffset:x,arrowRadius:S,arrowPosition:A,...Ce("arrow")})]})})}),R.cloneElement(r,he.getReferenceProps({onClick:q,onMouseEnter:H,onMouseLeave:G,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:De,className:co(v,r.props.className),...r.props}))]})});us.classes=SM;us.displayName="@mantine/core/Tooltip";us.Floating=yne;us.Group=DRe;var ORe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const H0t={withItemsBorders:!0},q0t=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:ji(t),"--sc-color":n?Li(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Wn(i,"sc-padding"),"--sc-font-size":hl(i)}}),AM=ft((e,t)=>{var se,be;const n=We("SegmentedControl",H0t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:x,transitionTimingFunction:S,variant:A,autoContrast:C,withItemsBorders:N,mod:k,...D}=n,L=Bt({name:"SegmentedControl",props:n,classes:ORe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:q0t}),O=go(),B=l.map(he=>typeof he=="string"?{label:he,value:he}:he),q=nut(),[H,G]=R.useState(null),[K,J]=R.useState({}),F=(he,Ce)=>{K[Ce]=he,J(K)},[j,W]=wa({value:c,defaultValue:f,finalValue:Array.isArray(l)?((se=B.find(he=>!he.disabled))==null?void 0:se.value)??((be=l[0])==null?void 0:be.value)??null:null,onChange:d}),M=ju(p),V=B.map(he=>R.createElement(ke,{...L("control"),mod:{active:j===he.value,orientation:v},key:he.value},R.createElement("input",{...L("input"),disabled:m||he.disabled,type:"radio",name:M,value:he.value,id:`${M}-${he.value}`,checked:j===he.value,onChange:()=>!g&&W(he.value),"data-focus-ring":O.focusRing,key:`${he.value}-input`}),R.createElement(ke,{component:"label",...L("label"),mod:{active:j===he.value&&!(m||he.disabled),disabled:m||he.disabled,"read-only":g},htmlFor:`${M}-${he.value}`,ref:Ce=>F(Ce,he.value),__vars:{"--sc-label-color":w!==void 0?mb({color:w,theme:O,autoContrast:C}):void 0},key:`${he.value}-label`},E.jsx("span",{...L("innerLabel"),children:he.label})))),Q=mo(t,he=>G(he));return l.length===0?null:E.jsxs(ke,{...L("root"),variant:A,size:h,ref:Q,mod:[{"full-width":y,orientation:v,initialized:q,"with-items-borders":N},k],...D,role:"radiogroup",children:[typeof j=="string"&&E.jsx(wte,{target:K[j],parent:H,component:"span",transitionDuration:"var(--sc-transition-duration)",...L("indicator")}),V]})});AM.classes=ORe;AM.displayName="@mantine/core/SegmentedControl";const W0t={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},RA=ft((e,t)=>{const n=We("Select",W0t,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:x,disabled:S,filter:A,limit:C,withScrollArea:N,maxDropdownHeight:k,size:D,searchable:L,rightSection:O,checkIconPosition:B,withCheckIcon:q,nothingFoundMessage:H,name:G,form:K,searchValue:J,defaultSearchValue:F,onSearchChange:j,allowDeselect:W,error:M,rightSectionPointerEvents:V,id:Q,clearable:se,clearButtonProps:be,hiddenInputProps:he,renderOption:Ce,onClear:De,autoComplete:rt,scrollAreaProps:Re,...Tt}=n,Ze=R.useMemo(()=>U6e(m),[m]),It=R.useMemo(()=>Pte(Ze),[Ze]),mt=ju(Q),[Se,Fe,st]=wa({value:g,defaultValue:y,finalValue:null,onChange:p}),yt=typeof Se=="string"?It[Se]:void 0,[Nt,Je]=wa({value:J,defaultValue:F,finalValue:yt?yt.label:"",onChange:j}),xe=Vte({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),xe.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),xe.resetSelectedOption()}}),{resolvedClassNames:kt,resolvedStyles:Rt}=pR({props:n,styles:i,classNames:r});R.useEffect(()=>{v&&xe.selectFirstOption()},[v,Se]),R.useEffect(()=>{g===null&&Je(""),typeof g=="string"&&yt&&Je(yt.label)},[g,yt]);const Ee=se&&!!Se&&!S&&!x&&E.jsx($r.ClearButton,{size:D,...be,onClear:()=>{Fe(null,null),Je(""),De==null||De()}});return E.jsxs(E.Fragment,{children:[E.jsxs($r,{store:xe,__staticSelector:"Select",classNames:kt,styles:Rt,unstyled:s,readOnly:x,onOptionSubmit:Oe=>{b==null||b(Oe);const ot=W&&It[Oe].value===Se?null:It[Oe],_t=ot?ot.value:null;Fe(_t,ot),!st&&Je(typeof _t=="string"&&(ot==null?void 0:ot.label)||""),xe.closeDropdown()},size:D,...w,children:[E.jsx($r.Target,{targetType:L?"input":"button",autoComplete:rt,children:E.jsx(Rd,{id:mt,ref:t,rightSection:O||Ee||E.jsx($r.Chevron,{size:D,error:M,unstyled:s}),rightSectionPointerEvents:V||(Ee?"all":"none"),...Tt,size:D,__staticSelector:"Select",disabled:S,readOnly:x||!L,value:Nt,onChange:Oe=>{Je(Oe.currentTarget.value),xe.openDropdown(),v&&xe.selectFirstOption()},onFocus:Oe=>{L&&xe.openDropdown(),f==null||f(Oe)},onBlur:Oe=>{var ot;L&&xe.closeDropdown(),Je(Se!=null&&((ot=It[Se])==null?void 0:ot.label)||""),d==null||d(Oe)},onClick:Oe=>{L?xe.openDropdown():xe.toggleDropdown(),h==null||h(Oe)},classNames:kt,styles:Rt,unstyled:s,pointer:!L,error:M})}),E.jsx(sRe,{data:Ze,hidden:x||S,filter:A,search:Nt,limit:C,hiddenWhenEmpty:!L||!H,withScrollArea:N,maxDropdownHeight:k,filterOptions:L&&(yt==null?void 0:yt.label)!==Nt,value:Se,checkIconPosition:B,withCheckIcon:q,nothingFoundMessage:H,unstyled:s,labelId:Tt.label?`${mt}-label`:void 0,"aria-label":Tt.label?void 0:Tt["aria-label"],renderOption:Ce,scrollAreaProps:Re})]}),E.jsx($r.HiddenInput,{value:Se,name:G,form:K,disabled:S,...he})]})});RA.classes={...Rd.classes,...$r.classes};RA.displayName="@mantine/core/Select";function G0t({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=go(),s=t===void 0?e:t,o=db({"--sg-spacing-x":Co(Ah(e)),"--sg-spacing-y":Co(Ah(s)),"--sg-cols":(c=Ah(n))==null?void 0:c.toString()}),a=Gi(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=Co(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=Co(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=Pk(Gi(a),i).filter(f=>Gi(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return E.jsx(kx,{styles:o,media:l,selector:r})}function aV(e){return typeof e=="object"&&e!==null?Gi(e):[]}function Y0t(e){return e.sort((t,n)=>Nk(t)-Nk(n))}function K0t({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...aV(e),...aV(t),...aV(n)]));return Y0t(r)}function X0t({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=db({"--sg-spacing-x":Co(Ah(e)),"--sg-spacing-y":Co(Ah(i)),"--sg-cols":(l=Ah(n))==null?void 0:l.toString()}),o=K0t({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=Co(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=Co(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return E.jsx(kx,{styles:s,container:u,selector:r})}var $Re={container:"m_925c2d2c",root:"m_2415a157"};const Q0t={cols:1,spacing:"md",type:"media"},vne=ft((e,t)=>{const n=We("SimpleGrid",Q0t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Bt({name:"SimpleGrid",classes:$Re,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=mR();return d==="container"?E.jsxs(E.Fragment,{children:[E.jsx(X0t,{...n,selector:`.${m}`}),E.jsx("div",{...p("container"),children:E.jsx(ke,{ref:t,...p("root",{className:m}),...h})})]}):E.jsxs(E.Fragment,{children:[E.jsx(G0t,{...n,selector:`.${m}`}),E.jsx(ke,{ref:t,...p("root",{className:m}),...h})]})});vne.classes=$Re;vne.displayName="@mantine/core/SimpleGrid";const[LRe,CM]=Qa("SliderProvider was not found in tree"),bne=R.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=CM();return E.jsx(ke,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});bne.displayName="@mantine/core/SliderRoot";const C$=R.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=CM(),[b,w]=R.useState(!1),x=l||s||b||h&&p;return E.jsxs(ke,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,E.jsx(l1,{mounted:i!=null&&!!x,transition:"fade",duration:0,...u,children:S=>E.jsx("div",{...v("label",{style:S}),children:i})})]})});C$.displayName="@mantine/core/SliderThumb";function I$({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function J0t({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function MRe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=CM();if(!e)return null;const u=e.map((l,c)=>R.createElement(ke,{...a("markWrapper"),__vars:{"--mark-offset":`${I$({value:l.value,min:t,max:n})}%`},key:c},E.jsx(ke,{...a("mark"),mod:{filled:J0t({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&E.jsx("div",{...a("markLabel"),children:l.label})));return E.jsx("div",{children:u})}MRe.displayName="@mantine/core/SliderMarks";function _ne({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=CM();return E.jsx(E.Fragment,{children:E.jsx(ke,{...u("trackContainer"),mod:{disabled:r},...o,children:E.jsxs(ke,{...u("track"),mod:{inverted:s,disabled:r},children:[E.jsx(ke,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,E.jsx(MRe,{...a,offset:i,disabled:r,inverted:s})]})})})}_ne.displayName="@mantine/core/SliderTrack";function WY({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function Zf(e,t){return parseFloat(e.toFixed(t))}function FRe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var IM={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const Z0t={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},emt=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Wn(t,"slider-size"),"--slider-color":n?Li(n,e):void 0,"--slider-radius":i===void 0?void 0:ji(i),"--slider-thumb-size":r!==void 0?$e(r):"calc(var(--slider-size) * 2)"}}),_b=ft((e,t)=>{const n=We("Slider",Z0t,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:x,disabled:S,unstyled:A,scale:C,inverted:N,className:k,style:D,vars:L,hiddenInputProps:O,...B}=n,q=Bt({name:"Slider",props:n,classes:IM,classNames:r,className:k,styles:i,style:D,vars:L,varsResolver:emt,unstyled:A}),{dir:H}=a1(),[G,K]=R.useState(!1),[J,F]=wa({value:typeof s=="number"?og(s,l,c):s,defaultValue:typeof h=="number"?og(h,l,c):h,finalValue:og(0,l,c),onChange:o}),j=R.useRef(J),W=R.useRef(),M=R.useRef(),V=I$({value:J,min:l,max:c}),Q=C(J),se=typeof g=="function"?g(Q):g,be=d??FRe(f),he=R.useCallback(({x:Re})=>{if(!S){const Tt=WY({value:Re,min:l,max:c,step:f,precision:be});F(Tt),j.current=Tt}},[S,l,c,f,be,F]),{ref:Ce,active:De}=kke(he,{onScrubEnd:()=>a==null?void 0:a(j.current)},H),rt=Re=>{var Tt,Ze,It,mt,Se,Fe;if(!S)switch(Re.key){case"ArrowUp":{Re.preventDefault(),(Tt=M.current)==null||Tt.focus();const st=Zf(Math.min(Math.max(J+f,l),c),be);F(st),a==null||a(st);break}case"ArrowRight":{Re.preventDefault(),(Ze=M.current)==null||Ze.focus();const st=Zf(Math.min(Math.max(H==="rtl"?J-f:J+f,l),c),be);F(st),a==null||a(st);break}case"ArrowDown":{Re.preventDefault(),(It=M.current)==null||It.focus();const st=Zf(Math.min(Math.max(J-f,l),c),be);F(st),a==null||a(st);break}case"ArrowLeft":{Re.preventDefault(),(mt=M.current)==null||mt.focus();const st=Zf(Math.min(Math.max(H==="rtl"?J+f:J-f,l),c),be);F(st),a==null||a(st);break}case"Home":{Re.preventDefault(),(Se=M.current)==null||Se.focus(),F(l),a==null||a(l);break}case"End":{Re.preventDefault(),(Fe=M.current)==null||Fe.focus(),F(c),a==null||a(c);break}}};return E.jsx(LRe,{value:{getStyles:q},children:E.jsxs(bne,{...B,ref:mo(t,W),onKeyDownCapture:rt,onMouseDownCapture:()=>{var Re;return(Re=W.current)==null?void 0:Re.focus()},size:u,disabled:S,children:[E.jsx(_ne,{inverted:N,offset:0,filled:V,marks:m,min:l,max:c,value:Q,disabled:S,containerProps:{ref:Ce,onMouseEnter:w?()=>K(!0):void 0,onMouseLeave:w?()=>K(!1):void 0},children:E.jsx(C$,{max:c,min:l,value:Q,position:V,dragging:De,label:se,ref:M,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:G,disabled:S,children:x})}),E.jsx("input",{type:"hidden",name:p,value:Q,...O})]})})});_b.classes=IM;_b.displayName="@mantine/core/Slider";function tmt(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const nmt=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Wn(t,"slider-size"),"--slider-color":n?Li(n,e):void 0,"--slider-radius":i===void 0?void 0:ji(i),"--slider-thumb-size":r!==void 0?$e(r):"calc(var(--slider-size) * 2)"}}),rmt={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},aS=ft((e,t)=>{const n=We("RangeSlider",rmt,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:x,thumbToLabel:S,showLabelOnHover:A,thumbChildren:C,disabled:N,unstyled:k,scale:D,inverted:L,className:O,style:B,vars:q,hiddenInputProps:H,...G}=n,K=Bt({name:"Slider",props:n,classes:IM,classNames:r,className:O,styles:i,style:B,vars:q,varsResolver:nmt,unstyled:k}),{dir:J}=a1(),[F,j]=R.useState(-1),[W,M]=R.useState(!1),[V,Q]=wa({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),se=R.useRef(V),be=R.useRef([]),he=R.useRef(void 0),Ce=[I$({value:V[0],min:l,max:c}),I$({value:V[1],min:l,max:c})],De=p??FRe(h),rt=Je=>{Q(Je),se.current=Je};R.useEffect(()=>{Array.isArray(s)&&(se.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const Re=(Je,xe,kt)=>{const Rt=[...se.current];Rt[xe]=Je,xe===0&&(Je>Rt[1]-(f-1e-9)&&(Rt[1]=Math.min(Je+f,c)),Je>(c-(f-1e-9)||l)&&(Rt[xe]=se.current[xe]),Rt[1]-Je>d&&(Rt[1]=Je+d)),xe===1&&(Je<Rt[0]+f&&(Rt[0]=Math.max(Je-f,l)),Je<Rt[0]+f&&(Rt[xe]=se.current[xe]),Je-Rt[0]>d&&(Rt[0]=Je-d)),Rt[0]=Zf(Rt[0],De),Rt[1]=Zf(Rt[1],De),rt(Rt),kt&&(a==null||a(se.current))},Tt=Je=>{if(!N){const xe=WY({value:Je,min:l,max:c,step:h,precision:De});Re(xe,he.current,!1)}},{ref:Ze,active:It}=kke(({x:Je})=>Tt(Je),{onScrubEnd:()=>a==null?void 0:a(se.current)},J);function mt(Je){he.current=Je}const Se=Je=>{Ze.current.focus();const xe=Ze.current.getBoundingClientRect(),kt=tmt(Je.nativeEvent),Rt=WY({value:kt-xe.left,max:c,min:l,step:h,containerWidth:xe.width}),Ee=Math.abs(V[0]-Rt)>Math.abs(V[1]-Rt)?1:0,Oe=J==="ltr"?Ee:Ee===1?0:1;he.current=Oe},Fe=()=>F!==1&&F!==0?(j(0),0):F,st=Je=>{if(!N)switch(Je.key){case"ArrowUp":{Je.preventDefault();const xe=Fe();be.current[xe].focus(),Re(Zf(Math.min(Math.max(se.current[xe]+h,l),c),De),xe,!0);break}case"ArrowRight":{Je.preventDefault();const xe=Fe();be.current[xe].focus(),Re(Zf(Math.min(Math.max(J==="rtl"?se.current[xe]-h:se.current[xe]+h,l),c),De),xe,!0);break}case"ArrowDown":{Je.preventDefault();const xe=Fe();be.current[xe].focus(),Re(Zf(Math.min(Math.max(se.current[xe]-h,l),c),De),xe,!0);break}case"ArrowLeft":{Je.preventDefault();const xe=Fe();be.current[xe].focus(),Re(Zf(Math.min(Math.max(J==="rtl"?se.current[xe]+h:se.current[xe]-h,l),c),De),xe,!0);break}}},yt={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>j(-1)},Nt=Array.isArray(C);return E.jsx(LRe,{value:{getStyles:K},children:E.jsxs(bne,{...G,size:u,ref:t,disabled:N,children:[E.jsxs(_ne,{offset:Ce[0],marksOffset:V[0],filled:Ce[1]-Ce[0],marks:y,inverted:L,min:l,max:c,value:V[1],disabled:N,containerProps:{ref:Ze,onMouseEnter:A?()=>M(!0):void 0,onMouseLeave:A?()=>M(!1):void 0,onTouchStartCapture:Se,onTouchEndCapture:()=>{he.current=-1},onMouseDownCapture:Se,onMouseUpCapture:()=>{he.current=-1},onKeyDownCapture:st},children:[E.jsx(C$,{...yt,value:D(V[0]),position:Ce[0],dragging:It,label:typeof v=="function"?v(Zf(D(V[0]),De)):v,ref:Je=>{be.current[0]=Je},thumbLabel:x,onMouseDown:()=>mt(0),onFocus:()=>j(0),showLabelOnHover:A,isHovered:W,disabled:N,children:Nt?C[0]:C}),E.jsx(C$,{...yt,thumbLabel:S,value:D(V[1]),position:Ce[1],dragging:It,label:typeof v=="function"?v(Zf(D(V[1]),De)):v,ref:Je=>{be.current[1]=Je},onMouseDown:()=>mt(1),onFocus:()=>j(1),showLabelOnHover:A,isHovered:W,disabled:N,children:Nt?C[1]:C})]}),E.jsx("input",{type:"hidden",name:`${g}_from`,value:V[0],...H}),E.jsx("input",{type:"hidden",name:`${g}_to`,value:V[1],...H})]})})});aS.classes=IM;aS.displayName="@mantine/core/RangeSlider";const imt={},ba=ft((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=We("Space",imt,e);return E.jsx(ke,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});ba.displayName="@mantine/core/Space";var BRe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const smt={maxHeight:100,initialState:!1},omt=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),wne=ft((e,t)=>{const n=We("Spoiler",smt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=Bt({name:"Spoiler",classes:BRe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:omt}),b=ju(g),w=`${b}-region`,[x,S]=R.useState(l),{ref:A,height:C}=Kat(),N=x?f:d,k=N!==null&&c<C;return E.jsxs(ke,{...v("root"),id:b,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&E.jsx(yb,{component:"button",type:"button",ref:p,onClick:()=>S(D=>!D),"aria-expanded":x,"aria-controls":w,...v("control"),children:N}),E.jsx("div",{...v("content",{style:{maxHeight:x?C?$e(C):void 0:$e(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:E.jsx("div",{ref:A,children:h})})]})});wne.classes=BRe;wne.displayName="@mantine/core/Spoiler";var jRe={root:"m_6d731127"};const amt={gap:"md",align:"stretch",justify:"flex-start"},umt=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Co(t),"--stack-align":n,"--stack-justify":r}}),$i=ft((e,t)=>{const n=We("Stack",amt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Bt({name:"Stack",props:n,classes:jRe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:umt});return E.jsx(ke,{ref:t,...p("root"),variant:d,...h})});$i.classes=jRe;$i.displayName="@mantine/core/Stack";const URe=R.createContext(null),lmt=URe.Provider,cmt=()=>R.useContext(URe),fmt={},xne=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=We("SwitchGroup",fmt,e),[c,f]=wa({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return E.jsx(lmt,{value:{value:c,onChange:d,size:s},children:E.jsx(Qs.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:E.jsx(qte,{role:"group",children:a})})})});xne.classes=Qs.Wrapper.classes;xne.displayName="@mantine/core/SwitchGroup";var zRe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const dmt={labelPosition:"right"},hmt=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:ji(t),"--switch-height":Wn(r,"switch-height"),"--switch-width":Wn(r,"switch-width"),"--switch-thumb-size":Wn(r,"switch-thumb-size"),"--switch-label-font-size":Wn(r,"switch-label-font-size"),"--switch-track-label-padding":Wn(r,"switch-track-label-padding"),"--switch-color":n?Li(n,e):void 0}}),gT=ft((e,t)=>{const n=We("Switch",dmt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:x,labelPosition:S,description:A,error:C,disabled:N,variant:k,rootRef:D,mod:L,...O}=n,B=cmt(),q=p||(B==null?void 0:B.size),H=Bt({name:"Switch",props:n,classes:zRe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hmt}),{styleProps:G,rest:K}=Rx(O),J=ju(h),F=B?{checked:B.value.includes(K.value),onChange:B.onChange}:{},[j,W]=wa({value:F.checked??b,defaultValue:w,finalValue:!1});return E.jsxs(cM,{...H("root"),__staticSelector:"Switch",__stylesApiProps:n,id:J,size:q,labelPosition:S,label:c,description:A,error:C,disabled:N,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":F.checked||void 0,variant:k,ref:D,mod:L,...G,...g,children:[E.jsx("input",{...K,disabled:N,checked:j,onChange:M=>{var V;B?(V=F.onChange)==null||V.call(F,M):x==null||x(M),W(M.currentTarget.checked)},id:J,ref:t,type:"checkbox",role:"switch",...H("input")}),E.jsxs(ke,{"aria-hidden":"true",mod:{error:C,"label-position":S},...H("track"),children:[E.jsx(ke,{component:"span",mod:"reduce-motion",...H("thumb"),children:v}),E.jsx("span",{...H("trackLabel"),children:j?d:f})]})]})});gT.classes={...zRe,...Y6e};gT.displayName="@mantine/core/Switch";gT.Group=xne;const[pmt,mmt]=Qa("Table component was not found in the tree");var ER={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function gmt(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Dx(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=ft((i,s)=>{const o=We(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=mmt();return E.jsx(ke,{component:e,ref:s,...gmt(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=ER,r}const GY=Dx("th",{columnBorder:!0}),VRe=Dx("td",{columnBorder:!0}),UD=Dx("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),HRe=Dx("thead",{stickyHeader:!0}),qRe=Dx("tbody"),WRe=Dx("tfoot"),GRe=Dx("caption",{captionSide:!0});function Ene({data:e}){return E.jsxs(E.Fragment,{children:[e.caption&&E.jsx(GRe,{children:e.caption}),e.head&&E.jsx(HRe,{children:E.jsx(UD,{children:e.head.map((t,n)=>E.jsx(GY,{children:t},n))})}),e.body&&E.jsx(qRe,{children:e.body.map((t,n)=>E.jsx(UD,{children:t.map((r,i)=>E.jsx(VRe,{children:r},i))},n))}),e.foot&&E.jsx(WRe,{children:E.jsx(UD,{children:e.foot.map((t,n)=>E.jsx(GY,{children:t},n))})})]})}Ene.displayName="@mantine/core/TableDataRenderer";const ymt={type:"scrollarea"},vmt=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":$e(t),"--table-overflow":n==="native"?"auto":void 0}}),Tne=ft((e,t)=>{const n=We("TableScrollContainer",ymt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Bt({name:"TableScrollContainer",classes:ER,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vmt,rootSelector:"scrollContainer"});return E.jsx(ke,{component:f==="scrollarea"?Lg:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:E.jsx("div",{...h("scrollContainerInner"),children:l})})});Tne.classes=ER;Tne.displayName="@mantine/core/TableScrollContainer";const bmt={withRowBorders:!0,verticalSpacing:7},_mt=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Co(r),"--table-vertical-spacing":Co(i),"--table-border-color":s?Li(s,e):void 0,"--table-striped-color":u&&o?Li(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Li(a,e):void 0,"--table-sticky-header-offset":f?$e(c):void 0}}),ln=ft((e,t)=>{const n=We("Table",bmt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:x,data:S,children:A,stickyHeader:C,stickyHeaderOffset:N,mod:k,...D}=n,L=Bt({name:"Table",props:n,className:i,style:s,classes:ER,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:_mt});return E.jsx(pmt,{value:{getStyles:L,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:E.jsx(ke,{component:"table",variant:x,ref:t,mod:[{"data-with-table-border":v},k],...L("table"),...D,children:A||!!S&&E.jsx(Ene,{data:S})})})});ln.classes=ER;ln.displayName="@mantine/core/Table";ln.Td=VRe;ln.Th=GY;ln.Tr=UD;ln.Thead=HRe;ln.Tbody=qRe;ln.Tfoot=WRe;ln.Caption=GRe;ln.ScrollContainer=Tne;ln.DataRenderer=Ene;const[wmt,Sne]=Qa("Tabs component was not found in the tree");var TR={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const xmt={},Ane=ft((e,t)=>{const n=We("TabsList",xmt,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=Sne();return E.jsx(ke,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});Ane.classes=TR;Ane.displayName="@mantine/core/TabsList";const Emt={},Cne=ft((e,t)=>{const n=We("TabsPanel",Emt,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=Sne(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return E.jsx(ke,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});Cne.classes=TR;Cne.displayName="@mantine/core/TabsPanel";const Tmt={},Ine=ft((e,t)=>{const n=We("TabsTab",Tmt,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=go(),{dir:b}=a1(),w=Sne(),x=a===w.value,S=C=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(C)},A={classNames:h,styles:p,props:n};return E.jsxs(gf,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...A}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:x,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":x,tabIndex:x||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?Li(f,v):void 0},onKeyDown:Uee({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&E.jsx("span",{...w.getStyles("tabSection",A),"data-position":"left",children:o}),i&&E.jsx("span",{...w.getStyles("tabLabel",A),children:i}),s&&E.jsx("span",{...w.getStyles("tabSection",A),"data-position":"right",children:s})]})});Ine.classes=TR;Ine.displayName="@mantine/core/TabsTab";const Xme="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Smt={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Amt=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":ji(t),"--tabs-color":Li(n,e),"--tabs-text-color":vA(r,e)?mb({color:n,theme:e,autoContrast:r}):void 0}}),Pr=ft((e,t)=>{const n=We("Tabs",Smt,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:x,style:S,vars:A,autoContrast:C,mod:N,...k}=n,D=ju(l),[L,O]=wa({value:i,defaultValue:r,finalValue:null,onChange:s}),B=Bt({name:"Tabs",props:n,classes:TR,className:x,style:S,classNames:v,styles:b,unstyled:w,vars:A,varsResolver:Amt});return E.jsx(wmt,{value:{placement:g,value:L,orientation:o,id:D,loop:u,activateTabWithKeyboard:c,getTabId:v$(`${D}-tab`,Xme),getPanelId:v$(`${D}-panel`,Xme),onChange:O,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:B},children:E.jsx(ke,{ref:t,id:D,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},N],...B("root"),...k,children:a})})});Pr.classes=TR;Pr.displayName="@mantine/core/Tabs";Pr.Tab=Ine;Pr.Panel=Cne;Pr.List=Ane;const Cmt={},ag=ft((e,t)=>{const n=We("TextInput",Cmt,e);return E.jsx(Rd,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});ag.classes=Rd.classes;ag.displayName="@mantine/core/TextInput";const Imt=["h1","h2","h3","h4","h5","h6"];function kmt(e,t){const n=t!==void 0?t:`h${e}`;return Imt.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:$e(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var YRe={root:"m_8a5d1357"};const Rmt={order:1},Nmt=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=kmt(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Ws=ft((e,t)=>{const n=We("Title",Rmt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Bt({name:"Title",props:n,classes:YRe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Nmt});return[1,2,3,4,5,6].includes(u)?E.jsx(ke,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});Ws.classes=YRe;Ws.displayName="@mantine/core/Title";function Pmt(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function Dmt(e){return R.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Omt(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const $mt=()=>Pmt({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Ox=$mt(),Lmt=(e=Ox)=>Dmt(e);function NA(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Omt(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Mmt(e,t=Ox){const n=e.id||hT();return NA(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function KRe(e,t=Ox){return NA(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function Fmt(e,t=Ox){return NA(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function Bmt(e=Ox){NA(e,()=>[])}function jmt(e=Ox){NA(e,t=>t.slice(0,e.getState().limit))}const $x={show:Mmt,hide:KRe,update:Fmt,clean:Bmt,cleanQueue:jmt,updateState:NA};function YY(e,t){return YY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},YY(e,t)}function XRe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,YY(e,t)}var QRe={exports:{}},Umt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zmt=Umt,Vmt=zmt;function JRe(){}function ZRe(){}ZRe.resetWarningCache=JRe;var Hmt=function(){function e(r,i,s,o,a,u){if(u!==Vmt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ZRe,resetWarningCache:JRe};return n.PropTypes=n,n};QRe.exports=Hmt();var qmt=QRe.exports;const Qme=Rf(qmt),Jme={disabled:!1},k$=ni.createContext(null);var Wmt=function(t){return t.scrollTop},AI="unmounted",S_="exited",A_="entering",wE="entered",KY="exiting",d1=function(e){XRe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=S_,s.appearStatus=A_):u=wE:r.unmountOnExit||r.mountOnEnter?u=AI:u=S_,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===AI?{status:S_}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==A_&&o!==wE&&(s=A_):(o===A_||o===wE)&&(s=KY)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===A_){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:SI.findDOMNode(this);o&&Wmt(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===S_&&this.setState({status:AI})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[SI.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||Jme.disabled){this.safeSetState({status:wE},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:A_},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:wE},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:SI.findDOMNode(this);if(!s||Jme.disabled){this.safeSetState({status:S_},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:KY},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:S_},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:SI.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===AI)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Jte(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ni.createElement(k$.Provider,{value:null},typeof o=="function"?o(i,a):ni.cloneElement(ni.Children.only(o),a))},t}(ni.Component);d1.contextType=k$;d1.propTypes={};function q2(){}d1.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:q2,onEntering:q2,onEntered:q2,onExit:q2,onExiting:q2,onExited:q2};d1.UNMOUNTED=AI;d1.EXITED=S_;d1.ENTERING=A_;d1.ENTERED=wE;d1.EXITING=KY;function Gmt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kne(e,t){var n=function(s){return t&&R.isValidElement(s)?t(s):s},r=Object.create(null);return e&&R.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Ymt(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function iw(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Kmt(e,t){return kne(e.children,function(n){return R.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:iw(n,"appear",e),enter:iw(n,"enter",e),exit:iw(n,"exit",e)})})}function Xmt(e,t,n){var r=kne(e.children),i=Ymt(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(R.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=R.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=R.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:iw(o,"exit",e),enter:iw(o,"enter",e)}):!u&&a&&!c?i[s]=R.cloneElement(o,{in:!1}):u&&a&&R.isValidElement(l)&&(i[s]=R.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:iw(o,"exit",e),enter:iw(o,"enter",e)}))}}),i}var Qmt=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Jmt={component:"div",childFactory:function(t){return t}},yy=function(e){XRe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(Gmt(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?Kmt(i,a):Xmt(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=kne(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=S$({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=Jte(i,["component","childFactory"]),u=this.state.contextValue,l=Qmt(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?ni.createElement(k$.Provider,{value:u},l):ni.createElement(k$.Provider,{value:u},ni.createElement(s,a,l))},t}(ni.Component);yy.propTypes={};yy.defaultProps=Jmt;const e5e=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function Zmt(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),e5e.reduce((n,r)=>(n[r]=[],n),{}))}const Zme={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},egt={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function tgt({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Zme[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:egt[o]},l={opacity:0,maxHeight:0,transform:Zme[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function ngt(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const t5e=R.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=ngt(n,e.autoClose),l=R.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return R.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),R.useEffect(()=>(d(),c),[u]),E.jsx(cne,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});t5e.displayName="@mantine/notifications/NotificationContainer";var n5e={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const rgt=d1,igt={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:np("overlay"),store:Ox,withinPortal:!0},sgt=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":$e(n)}}),h1=ft((e,t)=>{const n=We("Notifications",igt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...b}=n,w=go(),x=Lmt(g),S=qat(),A=Z7(),C=R.useRef({}),N=R.useRef(0),D=(w.respectReducedMotion?A:!1)?1:f,L=Bt({name:"Notifications",classes:n5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sgt});R.useEffect(()=>{g==null||g.updateState(q=>({...q,limit:p||5,defaultPosition:l}))},[p,l]),I0(()=>{x.notifications.length>N.current&&setTimeout(()=>S(),0),N.current=x.notifications.length},[x.notifications]);const O=Zmt(x.notifications,l),B=e5e.reduce((q,H)=>(q[H]=O[H].map(({style:G,...K})=>E.jsx(rgt,{timeout:D,onEnter:()=>C.current[K.id].offsetHeight,nodeRef:{current:C.current[K.id]},children:J=>E.jsx(t5e,{ref:F=>{C.current[K.id]=F},data:K,onHide:F=>KRe(F,g),autoClose:c,...L("notification",{style:{...tgt({state:J,position:H,transitionDuration:D,maxHeight:h}),...G}})})},K.id)),q),{});return E.jsxs(xA,{withinPortal:v,...y,children:[E.jsx(ke,{...L("root"),"data-position":"top-center",ref:t,...b,children:E.jsx(yy,{children:B["top-center"]})}),E.jsx(ke,{...L("root"),"data-position":"top-left",...b,children:E.jsx(yy,{children:B["top-left"]})}),E.jsx(ke,{...L("root",{className:nS.classNames.fullWidth}),"data-position":"top-right",...b,children:E.jsx(yy,{children:B["top-right"]})}),E.jsx(ke,{...L("root",{className:nS.classNames.fullWidth}),"data-position":"bottom-right",...b,children:E.jsx(yy,{children:B["bottom-right"]})}),E.jsx(ke,{...L("root"),"data-position":"bottom-left",...b,children:E.jsx(yy,{children:B["bottom-left"]})}),E.jsx(ke,{...L("root"),"data-position":"bottom-center",...b,children:E.jsx(yy,{children:B["bottom-center"]})})]})});h1.classes=n5e;h1.displayName="@mantine/notifications/Notifications";h1.show=$x.show;h1.hide=$x.hide;h1.update=$x.update;h1.clean=$x.clean;h1.cleanQueue=$x.cleanQueue;h1.updateState=$x.updateState;const r5e=R.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),yo=()=>R.useContext(r5e);function ogt({children:e}){const[t,n]=R.useState(void 0),r=R.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return E.jsx(r5e.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bk(){return Bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bk.apply(this,arguments)}var Fy;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Fy||(Fy={}));const ege="popstate";function agt(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return XY("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:s5e(i)}return lgt(t,n,null,e)}function lo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function i5e(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ugt(){return Math.random().toString(36).substr(2,8)}function tge(e,t){return{usr:e.state,key:e.key,idx:t}}function XY(e,t,n,r){return n===void 0&&(n=null),Bk({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?PA(t):t,{state:n,key:t&&t.key||r||ugt()})}function s5e(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function PA(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function lgt(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Fy.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(Bk({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Fy.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Fy.Push;let v=XY(m.location,g,y);l=c()+1;let b=tge(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Fy.Replace;let v=XY(m.location,g,y);l=c();let b=tge(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:s5e(g);return v=v.replace(/ $/,"%20"),lo(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(ege,f),u=g,()=>{i.removeEventListener(ege,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var nge;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(nge||(nge={}));function cgt(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?PA(t):t,i=u5e(r.pathname||"/",n);if(i==null)return null;let s=o5e(e);fgt(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=Egt(i);o=_gt(s[a],u)}return o}function o5e(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(lo(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=av([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(lo(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),o5e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:vgt(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of a5e(s.path))i(s,o,u)}),t}function a5e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=a5e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function fgt(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:bgt(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dgt=/^:[\w-]+$/,hgt=3,pgt=2,mgt=1,ggt=10,ygt=-2,rge=e=>e==="*";function vgt(e,t){let n=e.split("/"),r=n.length;return n.some(rge)&&(r+=ygt),t&&(r+=pgt),n.filter(i=>!rge(i)).reduce((i,s)=>i+(dgt.test(s)?hgt:s===""?mgt:ggt),r)}function bgt(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function _gt(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=wgt({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:av([i,c.pathname]),pathnameBase:Cgt(av([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=av([i,c.pathnameBase]))}return s}function wgt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xgt(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function xgt(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),i5e(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Egt(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return i5e(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function u5e(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Tgt(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?PA(e):e;return{pathname:n?n.startsWith("/")?n:Sgt(n,t):t,search:Igt(r),hash:kgt(i)}}function Sgt(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function uV(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Agt(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Rne(e,t){let n=Agt(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Nne(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=PA(e):(i=Bk({},e),lo(!i.pathname||!i.pathname.includes("?"),uV("?","pathname","search",i)),lo(!i.pathname||!i.pathname.includes("#"),uV("#","pathname","hash",i)),lo(!i.search||!i.search.includes("#"),uV("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=Tgt(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const av=e=>e.join("/").replace(/\/\/+/g,"/"),Cgt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Igt=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,kgt=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Rgt(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const l5e=["post","put","patch","delete"];new Set(l5e);const Ngt=["get",...l5e];new Set(Ngt);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jk(){return jk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jk.apply(this,arguments)}const Pne=R.createContext(null),Pgt=R.createContext(null),Lx=R.createContext(null),kM=R.createContext(null),X0=R.createContext({outlet:null,matches:[],isDataRoute:!1}),c5e=R.createContext(null);function f5e(e,t){let{relative:n}={};DA()||lo(!1);let{basename:r,navigator:i}=R.useContext(Lx),{hash:s,pathname:o,search:a}=Lgt(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:av([r,o])),i.createHref({pathname:u,search:a,hash:s})}function DA(){return R.useContext(kM)!=null}function wb(){return DA()||lo(!1),R.useContext(kM).location}function d5e(e){R.useContext(Lx).static||R.useLayoutEffect(e)}function rp(){let{isDataRoute:e}=R.useContext(X0);return e?Ggt():Dgt()}function Dgt(){DA()||lo(!1);let e=R.useContext(Pne),{basename:t,future:n,navigator:r}=R.useContext(Lx),{matches:i}=R.useContext(X0),{pathname:s}=wb(),o=JSON.stringify(Rne(i,n.v7_relativeSplatPath)),a=R.useRef(!1);return d5e(()=>{a.current=!0}),R.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=Nne(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:av([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const Ogt=R.createContext(null);function $gt(e){let t=R.useContext(X0).outlet;return t&&R.createElement(Ogt.Provider,{value:e},t)}function k0(){let{matches:e}=R.useContext(X0),t=e[e.length-1];return t?t.params:{}}function Lgt(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=R.useContext(Lx),{matches:i}=R.useContext(X0),{pathname:s}=wb(),o=JSON.stringify(Rne(i,r.v7_relativeSplatPath));return R.useMemo(()=>Nne(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function h5e(e,t){return Mgt(e,t)}function Mgt(e,t,n,r){DA()||lo(!1);let{navigator:i}=R.useContext(Lx),{matches:s}=R.useContext(X0),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=wb(),c;if(t){var f;let g=typeof t=="string"?PA(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||lo(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=cgt(e,{pathname:h}),m=zgt(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:av([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:av([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?R.createElement(kM.Provider,{value:{location:jk({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Fy.Pop}},m):m}function Fgt(){let e=Wgt(),t=Rgt(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),n?R.createElement("pre",{style:i},n):null,null)}const Bgt=R.createElement(Fgt,null);class jgt extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?R.createElement(X0.Provider,{value:this.props.routeContext},R.createElement(c5e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ugt(e){let{routeContext:t,match:n,children:r}=e,i=R.useContext(Pne);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(X0.Provider,{value:t},r)}function zgt(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||lo(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||Bgt,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=R.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,R.createElement(Ugt,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?R.createElement(jgt,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var p5e=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(p5e||{}),R$=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(R$||{});function Vgt(e){let t=R.useContext(Pne);return t||lo(!1),t}function Hgt(e){let t=R.useContext(Pgt);return t||lo(!1),t}function qgt(e){let t=R.useContext(X0);return t||lo(!1),t}function m5e(e){let t=qgt(),n=t.matches[t.matches.length-1];return n.route.id||lo(!1),n.route.id}function Wgt(){var e;let t=R.useContext(c5e),n=Hgt(R$.UseRouteError),r=m5e(R$.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Ggt(){let{router:e}=Vgt(p5e.UseNavigateStable),t=m5e(R$.UseNavigateStable),n=R.useRef(!1);return d5e(()=>{n.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,jk({fromRouteId:t},s)))},[e,t])}function Dne(e){let{to:t,replace:n,state:r,relative:i}=e;DA()||lo(!1);let{future:s,static:o}=R.useContext(Lx),{matches:a}=R.useContext(X0),{pathname:u}=wb(),l=rp(),c=Nne(t,Rne(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return R.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function Ygt(e){return $gt(e.context)}function C_(e){lo(!1)}function Kgt(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Fy.Pop,navigator:s,static:o=!1,future:a}=e;DA()&&lo(!1);let u=t.replace(/^\/*/,"/"),l=R.useMemo(()=>({basename:u,navigator:s,static:o,future:jk({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=PA(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=R.useMemo(()=>{let g=u5e(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:R.createElement(Lx.Provider,{value:l},R.createElement(kM.Provider,{children:n,value:m}))}function Xgt(e){let{children:t,location:n}=e;return h5e(QY(t),n)}new Promise(()=>{});function QY(e,t){t===void 0&&(t=[]);let n=[];return R.Children.forEach(e,(r,i)=>{if(!R.isValidElement(r))return;let s=[...t,i];if(r.type===R.Fragment){n.push.apply(n,QY(r.props.children,s));return}r.type!==C_&&lo(!1),!r.props.index||!r.props.children||lo(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=QY(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function JY(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Qgt(e,t){let n=JY(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Jgt="6";try{window.__reactRouterVersion=Jgt}catch{}const Zgt="startTransition",ige=WO[Zgt];function e1t(e){let{basename:t,children:n,future:r,window:i}=e,s=R.useRef();s.current==null&&(s.current=agt({window:i,v5Compat:!0}));let o=s.current,[a,u]=R.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=R.useCallback(f=>{l&&ige?ige(()=>u(f)):u(f)},[u,l]);return R.useLayoutEffect(()=>o.listen(c),[o,c]),R.createElement(Kgt,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var sge;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(sge||(sge={}));var oge;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(oge||(oge={}));function xb(e){let t=R.useRef(JY(e)),n=R.useRef(!1),r=wb(),i=R.useMemo(()=>Qgt(r.search,n.current?null:t.current),[r.search]),s=rp(),o=R.useCallback((a,u)=>{const l=JY(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const One=R.createContext(null);One.displayName="@mantine/modals/ModalsContext";function t1t(){const e=R.useContext(One);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function n1t({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=t1t(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return E.jsxs(E.Fragment,{children:[l&&E.jsx(ke,{mb:"md",children:l}),E.jsxs(bi,{justify:"flex-end",...o,children:[E.jsx(on,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),E.jsx(on,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[r1t,RM]=out("mantine-modals");RM("openModal");RM("closeModal");RM("closeAllModals");const age=RM("openConfirmModal");function uge(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function i1t(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;uge(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{uge(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function s1t(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function o1t({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=R.useReducer(i1t,{modals:[],current:null}),o=R.useRef(i);o.current=i;const a=R.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=R.useCallback(({modalId:g,...y})=>{const v=g||hT();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=R.useCallback(({modalId:g,...y})=>{const v=g||hT();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=R.useCallback((g,{modalId:y,...v})=>{const b=y||hT();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=R.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);r1t({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:E.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=s1t(g.props);return{modalProps:y,content:E.jsx(n1t,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:E.jsx(E.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return E.jsxs(One.Provider,{value:d,children:[E.jsx(Ks,{zIndex:np("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var a1t={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=(e,t,n,r)=>{const i=R.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>R.createElement("svg",{ref:f,...a1t[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>R.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var u1t=Pn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var l1t=Pn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var S4=Pn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lge=Pn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cge=Pn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var c1t=Pn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var f1t=Pn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var d1t=Pn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var h1t=Pn("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var p1t=Pn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var m1t=Pn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var g5e=Pn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y5e=Pn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var g1t=Pn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fge=Pn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y1t=Pn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v1t=Pn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b1t=Pn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _1t=Pn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w1t=Pn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var x1t=Pn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $ne=Pn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var E1t=Pn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var T1t=Pn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var S1t=Pn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var A1t=Pn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var C1t=Pn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var I1t=Pn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var k1t=Pn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v5e=Pn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R1t=Pn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var N1t=Pn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var P1t=Pn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var D1t=Pn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var O1t=Pn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b5e=Pn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $1t=Pn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _5e=Pn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var L1t=Pn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w5e=Pn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lne=Pn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dge=Pn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mne=Pn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var M1t=Pn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F1t=Pn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var B1t=Pn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function x5e(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const vl="/vis-decode/";function hge(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function E5e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const j1t=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,U1t=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,z1t={};function pge(e,t){return(z1t.jsx?U1t:j1t).test(e)}const V1t=/[ \t\n\f\r]/g;function H1t(e){return typeof e=="object"?e.type==="text"?mge(e.value):!1:mge(e)}function mge(e){return e.replace(V1t,"")===""}let SR=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};SR.prototype.property={};SR.prototype.normal={};SR.prototype.space=null;function T5e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new SR(n,r,t)}function Uk(e){return e.toLowerCase()}let Pd=class{constructor(t,n){this.property=t,this.attribute=n}};Pd.prototype.space=null;Pd.prototype.boolean=!1;Pd.prototype.booleanish=!1;Pd.prototype.overloadedBoolean=!1;Pd.prototype.number=!1;Pd.prototype.commaSeparated=!1;Pd.prototype.spaceSeparated=!1;Pd.prototype.commaOrSpaceSeparated=!1;Pd.prototype.mustUseProperty=!1;Pd.prototype.defined=!1;let q1t=0;const Hn=Mx(),Eo=Mx(),S5e=Mx(),xt=Mx(),Ki=Mx(),yT=Mx(),Hc=Mx();function Mx(){return 2**++q1t}const ZY=Object.freeze(Object.defineProperty({__proto__:null,boolean:Hn,booleanish:Eo,commaOrSpaceSeparated:Hc,commaSeparated:yT,number:xt,overloadedBoolean:S5e,spaceSeparated:Ki},Symbol.toStringTag,{value:"Module"})),lV=Object.keys(ZY);class Fne extends Pd{constructor(t,n,r,i){let s=-1;if(super(t,n),gge(this,"space",i),typeof r=="number")for(;++s<lV.length;){const o=lV[s];gge(this,lV[s],(r&ZY[o])===ZY[o])}}}Fne.prototype.defined=!0;function gge(e,t,n){n&&(e[t]=n)}const W1t={}.hasOwnProperty;function OA(e){const t={},n={};let r;for(r in e.properties)if(W1t.call(e.properties,r)){const i=e.properties[r],s=new Fne(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Uk(r)]=r,n[Uk(s.attribute)]=r}return new SR(t,n,e.space)}const A5e=OA({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),C5e=OA({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function I5e(e,t){return t in e?e[t]:t}function k5e(e,t){return I5e(e,t.toLowerCase())}const R5e=OA({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:k5e,properties:{xmlns:null,xmlnsXLink:null}}),N5e=OA({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Eo,ariaAutoComplete:null,ariaBusy:Eo,ariaChecked:Eo,ariaColCount:xt,ariaColIndex:xt,ariaColSpan:xt,ariaControls:Ki,ariaCurrent:null,ariaDescribedBy:Ki,ariaDetails:null,ariaDisabled:Eo,ariaDropEffect:Ki,ariaErrorMessage:null,ariaExpanded:Eo,ariaFlowTo:Ki,ariaGrabbed:Eo,ariaHasPopup:null,ariaHidden:Eo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ki,ariaLevel:xt,ariaLive:null,ariaModal:Eo,ariaMultiLine:Eo,ariaMultiSelectable:Eo,ariaOrientation:null,ariaOwns:Ki,ariaPlaceholder:null,ariaPosInSet:xt,ariaPressed:Eo,ariaReadOnly:Eo,ariaRelevant:null,ariaRequired:Eo,ariaRoleDescription:Ki,ariaRowCount:xt,ariaRowIndex:xt,ariaRowSpan:xt,ariaSelected:Eo,ariaSetSize:xt,ariaSort:null,ariaValueMax:xt,ariaValueMin:xt,ariaValueNow:xt,ariaValueText:null,role:null}}),G1t=OA({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:k5e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yT,acceptCharset:Ki,accessKey:Ki,action:null,allow:null,allowFullScreen:Hn,allowPaymentRequest:Hn,allowUserMedia:Hn,alt:null,as:null,async:Hn,autoCapitalize:null,autoComplete:Ki,autoFocus:Hn,autoPlay:Hn,blocking:Ki,capture:null,charSet:null,checked:Hn,cite:null,className:Ki,cols:xt,colSpan:null,content:null,contentEditable:Eo,controls:Hn,controlsList:Ki,coords:xt|yT,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Hn,defer:Hn,dir:null,dirName:null,disabled:Hn,download:S5e,draggable:Eo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Hn,formTarget:null,headers:Ki,height:xt,hidden:Hn,high:xt,href:null,hrefLang:null,htmlFor:Ki,httpEquiv:Ki,id:null,imageSizes:null,imageSrcSet:null,inert:Hn,inputMode:null,integrity:null,is:null,isMap:Hn,itemId:null,itemProp:Ki,itemRef:Ki,itemScope:Hn,itemType:Ki,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Hn,low:xt,manifest:null,max:null,maxLength:xt,media:null,method:null,min:null,minLength:xt,multiple:Hn,muted:Hn,name:null,nonce:null,noModule:Hn,noValidate:Hn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Hn,optimum:xt,pattern:null,ping:Ki,placeholder:null,playsInline:Hn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Hn,referrerPolicy:null,rel:Ki,required:Hn,reversed:Hn,rows:xt,rowSpan:xt,sandbox:Ki,scope:null,scoped:Hn,seamless:Hn,selected:Hn,shadowRootClonable:Hn,shadowRootDelegatesFocus:Hn,shadowRootMode:null,shape:null,size:xt,sizes:null,slot:null,span:xt,spellCheck:Eo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:xt,step:null,style:null,tabIndex:xt,target:null,title:null,translate:null,type:null,typeMustMatch:Hn,useMap:null,value:Eo,width:xt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ki,axis:null,background:null,bgColor:null,border:xt,borderColor:null,bottomMargin:xt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Hn,declare:Hn,event:null,face:null,frame:null,frameBorder:null,hSpace:xt,leftMargin:xt,link:null,longDesc:null,lowSrc:null,marginHeight:xt,marginWidth:xt,noResize:Hn,noHref:Hn,noShade:Hn,noWrap:Hn,object:null,profile:null,prompt:null,rev:null,rightMargin:xt,rules:null,scheme:null,scrolling:Eo,standby:null,summary:null,text:null,topMargin:xt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:xt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Hn,disableRemotePlayback:Hn,prefix:null,property:null,results:xt,security:null,unselectable:null}}),Y1t=OA({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:I5e,properties:{about:Hc,accentHeight:xt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:xt,amplitude:xt,arabicForm:null,ascent:xt,attributeName:null,attributeType:null,azimuth:xt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:xt,by:null,calcMode:null,capHeight:xt,className:Ki,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:xt,diffuseConstant:xt,direction:null,display:null,dur:null,divisor:xt,dominantBaseline:null,download:Hn,dx:null,dy:null,edgeMode:null,editable:null,elevation:xt,enableBackground:null,end:null,event:null,exponent:xt,externalResourcesRequired:null,fill:null,fillOpacity:xt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yT,g2:yT,glyphName:yT,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:xt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:xt,horizOriginX:xt,horizOriginY:xt,id:null,ideographic:xt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:xt,k:xt,k1:xt,k2:xt,k3:xt,k4:xt,kernelMatrix:Hc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:xt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:xt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:xt,overlineThickness:xt,paintOrder:null,panose1:null,path:null,pathLength:xt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ki,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:xt,pointsAtY:xt,pointsAtZ:xt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Hc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Hc,rev:Hc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Hc,requiredFeatures:Hc,requiredFonts:Hc,requiredFormats:Hc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:xt,specularExponent:xt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:xt,strikethroughThickness:xt,string:null,stroke:null,strokeDashArray:Hc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:xt,strokeOpacity:xt,strokeWidth:null,style:null,surfaceScale:xt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Hc,tabIndex:xt,tableValues:null,target:null,targetX:xt,targetY:xt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Hc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:xt,underlineThickness:xt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:xt,values:null,vAlphabetic:xt,vMathematical:xt,vectorEffect:null,vHanging:xt,vIdeographic:xt,version:null,vertAdvY:xt,vertOriginX:xt,vertOriginY:xt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:xt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),K1t=/^data[-\w.:]+$/i,yge=/-[a-z]/g,X1t=/[A-Z]/g;function NM(e,t){const n=Uk(t);let r=t,i=Pd;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&K1t.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(yge,J1t);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!yge.test(s)){let o=s.replace(X1t,Q1t);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=Fne}return new i(r,t)}function Q1t(e){return"-"+e.toLowerCase()}function J1t(e){return e.charAt(1).toUpperCase()}const Z1t={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},AR=T5e([C5e,A5e,R5e,N5e,G1t],"html"),Eb=T5e([C5e,A5e,R5e,N5e,Y1t],"svg");function vge(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function P5e(e){return e.join(" ").trim()}var D5e={},bge=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,eyt=/\n/g,tyt=/^\s*/,nyt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,ryt=/^:\s*/,iyt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,syt=/^[;\s]*/,oyt=/^\s+|\s+$/g,ayt=`
`,_ge="/",wge="*",U_="",uyt="comment",lyt="declaration",cyt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(eyt);m&&(n+=m.length);var g=p.lastIndexOf(ayt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(tyt)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(_ge!=e.charAt(0)||wge!=e.charAt(1))){for(var m=2;U_!=e.charAt(m)&&(wge!=e.charAt(m)||_ge!=e.charAt(m+1));)++m;if(m+=2,U_===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:uyt,comment:g})}}function d(){var p=s(),m=u(nyt);if(m){if(f(),!u(ryt))return a("property missing ':'");var g=u(iyt),y=p({type:lyt,property:xge(m[0].replace(bge,U_)),value:g?xge(g[0].replace(bge,U_)):U_});return u(syt),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function xge(e){return e?e.replace(oyt,U_):U_}var fyt=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D5e,"__esModule",{value:!0});var dyt=fyt(cyt);function hyt(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,dyt.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Ege=D5e.default=hyt;const pyt=Ege.default||Ege,PM=O5e("end"),Q0=O5e("start");function O5e(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function myt(e){const t=Q0(e),n=PM(e);if(t&&n)return{start:t,end:n}}function A4(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Tge(e.position):"start"in e||"end"in e?Tge(e):"line"in e||"column"in e?eK(e):""}function eK(e){return Sge(e&&e.line)+":"+Sge(e&&e.column)}function Tge(e){return eK(e&&e.start)+"-"+eK(e&&e.end)}function Sge(e){return e&&typeof e=="number"?e:1}class Uu extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=A4(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Uu.prototype.file="";Uu.prototype.name="";Uu.prototype.reason="";Uu.prototype.message="";Uu.prototype.stack="";Uu.prototype.column=void 0;Uu.prototype.line=void 0;Uu.prototype.ancestors=void 0;Uu.prototype.cause=void 0;Uu.prototype.fatal=void 0;Uu.prototype.place=void 0;Uu.prototype.ruleId=void 0;Uu.prototype.source=void 0;const Bne={}.hasOwnProperty,gyt=new Map,yyt=/[A-Z]/g,vyt=/-([a-z])/g,byt=new Set(["table","tbody","thead","tfoot","tr"]),_yt=new Set(["td","th"]),$5e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function wyt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=kyt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Iyt(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Eb:AR,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=L5e(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function L5e(e,t,n){if(t.type==="element")return xyt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Eyt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Syt(e,t,n);if(t.type==="mdxjsEsm")return Tyt(e,t);if(t.type==="root")return Ayt(e,t,n);if(t.type==="text")return Cyt(e,t)}function xyt(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Eb,e.schema=i),e.ancestors.push(t);const s=F5e(e,t.tagName,!1),o=Ryt(e,t);let a=Une(e,t);return byt.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!H1t(u):!0})),M5e(e,o,s,t),jne(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Eyt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}zk(e,t.position)}function Tyt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);zk(e,t.position)}function Syt(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Eb,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:F5e(e,t.name,!0),o=Nyt(e,t),a=Une(e,t);return M5e(e,o,s,t),jne(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Ayt(e,t,n){const r={};return jne(r,Une(e,t)),e.create(t,e.Fragment,r,n)}function Cyt(e,t){return t.value}function M5e(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function jne(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Iyt(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function kyt(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Q0(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function Ryt(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&Bne.call(t.properties,i)){const s=Pyt(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&_yt.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Nyt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else zk(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else zk(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Une(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:gyt;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=L5e(e,s,o);a!==void 0&&n.push(a)}return n}function Pyt(e,t,n){const r=NM(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?E5e(n):P5e(n)),r.property==="style"){let i=typeof n=="object"?n:Dyt(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Oyt(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Z1t[r.property]||r.property:r.attribute,n]}}function Dyt(e,t){const n={};try{pyt(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Uu("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=$5e+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(vyt,Lyt)),n[o]=s}}function F5e(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=pge(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=pge(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return Bne.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);zk(e)}function zk(e,t){const n=new Uu("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=$5e+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Oyt(e){const t={};let n;for(n in e)Bne.call(e,n)&&(t[$yt(n)]=e[n]);return t}function $yt(e){let t=e.replace(yyt,Myt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Lyt(e,t){return t.toUpperCase()}function Myt(e){return"-"+e.toLowerCase()}const cV={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Fyt={};function Byt(e,t){const n=Fyt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return B5e(e,r,i)}function B5e(e,t,n){if(jyt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Age(e.children,t,n)}return Array.isArray(e)?Age(e,t,n):""}function Age(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=B5e(e[i],t,n);return r.join("")}function jyt(e){return!!(e&&typeof e=="object")}const Cge=document.createElement("i");function zne(e){const t="&"+e+";";Cge.innerHTML=t;const n=Cge.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function jg(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function rd(e,t){return e.length>0?(jg(e,e.length,0,t),e):t}const Ige={}.hasOwnProperty;function Uyt(e){const t={};let n=-1;for(;++n<e.length;)zyt(t,e[n]);return t}function zyt(e,t){let n;for(n in t){const i=(Ige.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Ige.call(i,o)||(i[o]=[]);const a=s[o];Vyt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Vyt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);jg(e,0,0,r)}function j5e(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function vT(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Gp=Tb(/[A-Za-z]/),rf=Tb(/[\dA-Za-z]/),Hyt=Tb(/[#-'*+\--9=?A-Z^-~]/);function tK(e){return e!==null&&(e<32||e===127)}const nK=Tb(/\d/),qyt=Tb(/[\dA-Fa-f]/),Wyt=Tb(/[!-/:-@[-`{-~]/);function An(e){return e!==null&&e<-2}function gc(e){return e!==null&&(e<0||e===32)}function di(e){return e===-2||e===-1||e===32}const Gyt=Tb(new RegExp("\\p{P}|\\p{S}","u")),Yyt=Tb(/\s/);function Tb(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function $A(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&rf(e.charCodeAt(n+1))&&rf(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Qi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return di(u)?(e.enter(n),a(u)):t(u)}function a(u){return di(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const Kyt={tokenize:Xyt};function Xyt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Qi(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return An(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Qyt={tokenize:Jyt},kge={tokenize:Zyt};function Jyt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let x=w,S;for(;x--;)if(t.events[x][0]==="exit"&&t.events[x][1].type==="chunkFlow"){S=t.events[x][1].end;break}y(r);let A=w;for(;A<t.events.length;)t.events[A][1].end=Object.assign({},S),A++;return jg(t.events,x+1,0,t.events.slice(w)),t.events.length=A,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(kge,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(kge,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return An(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const x=t.sliceStream(b);if(w&&x.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(x),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const A=t.events.length;let C=A,N,k;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(N){k=t.events[C][1].end;break}N=!0}for(y(r),S=A;S<t.events.length;)t.events[S][1].end=Object.assign({},k),S++;jg(t.events,C+1,0,t.events.slice(A)),t.events.length=S}}function y(b){let w=n.length;for(;w-- >b;){const x=n[w];t.containerState=x[1],x[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Zyt(e,t,n){return Qi(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Rge(e){if(e===null||gc(e)||Yyt(e))return 1;if(Gyt(e))return 2}function Vne(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const rK={name:"attention",tokenize:tvt,resolveAll:evt};function evt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Nge(f,-u),Nge(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=rd(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=rd(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=rd(l,Vne(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=rd(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=rd(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,jg(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function tvt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Rge(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Rge(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Nge(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const nvt={name:"autolink",tokenize:rvt};function rvt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Gp(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||rf(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||rf(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||tK(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):Hyt(h)?(e.consume(h),l):n(h)}function c(h){return rf(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||rf(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const DM={tokenize:ivt,partial:!0};function ivt(e,t,n){return r;function r(s){return di(s)?Qi(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||An(s)?t(s):n(s)}}const U5e={name:"blockQuote",tokenize:svt,continuation:{tokenize:ovt},exit:avt};function svt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return di(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function ovt(e,t,n){const r=this;return i;function i(o){return di(o)?Qi(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(U5e,t,n)(o)}}function avt(e){e.exit("blockQuote")}const z5e={name:"characterEscape",tokenize:uvt};function uvt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Wyt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const V5e={name:"characterReference",tokenize:lvt};function lvt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=rf,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=qyt,c):(e.enter("characterReferenceValue"),s=7,o=nK,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===rf&&!zne(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Pge={tokenize:fvt,partial:!0},Dge={name:"codeFenced",tokenize:cvt,concrete:!0};function cvt(e,t,n){const r=this,i={tokenize:x,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const A=r.events[r.events.length-1];return s=A&&A[1].type==="linePrefix"?A[2].sliceSerialize(A[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),di(S)?Qi(e,f,"whitespace")(S):f(S))}function f(S){return S===null||An(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(Pge,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||An(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):di(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Qi(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||An(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||An(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&di(S)?Qi(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||An(S)?e.check(Pge,m,w)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||An(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function w(S){return e.exit("codeFenced"),t(S)}function x(S,A,C){let N=0;return k;function k(q){return S.enter("lineEnding"),S.consume(q),S.exit("lineEnding"),D}function D(q){return S.enter("codeFencedFence"),di(q)?Qi(S,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):L(q)}function L(q){return q===a?(S.enter("codeFencedFenceSequence"),O(q)):C(q)}function O(q){return q===a?(N++,S.consume(q),O):N>=o?(S.exit("codeFencedFenceSequence"),di(q)?Qi(S,B,"whitespace")(q):B(q)):C(q)}function B(q){return q===null||An(q)?(S.exit("codeFencedFence"),A(q)):C(q)}}}function fvt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const fV={name:"codeIndented",tokenize:hvt},dvt={tokenize:pvt,partial:!0};function hvt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Qi(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):An(l)?e.attempt(dvt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||An(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function pvt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):An(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Qi(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):An(o)?i(o):n(o)}}const mvt={name:"codeText",tokenize:vvt,resolve:gvt,previous:yvt};function gvt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function yvt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function vvt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):An(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||An(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class bvt{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&g3(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),g3(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),g3(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);g3(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);g3(this.left,n.reverse())}}}function g3(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function H5e(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new bvt(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,_vt(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return jg(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function _vt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const wvt={tokenize:Tvt,resolve:Evt},xvt={tokenize:Svt,partial:!0};function Evt(e){return H5e(e),e}function Tvt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):An(a)?e.check(xvt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Svt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Qi(e,s,"linePrefix")}function s(o){if(o===null||An(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function q5e(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||tK(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||An(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||gc(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||tK(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function W5e(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):An(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||An(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!di(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function G5e(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):An(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Qi(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||An(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function C4(e,t){let n;return r;function r(i){return An(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):di(i)?Qi(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Avt={name:"definition",tokenize:Ivt},Cvt={tokenize:kvt,partial:!0};function Ivt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return W5e.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=vT(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return gc(h)?C4(e,l)(h):l(h)}function l(h){return q5e(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(Cvt,f,f)(h)}function f(h){return di(h)?Qi(e,d,"whitespace")(h):d(h)}function d(h){return h===null||An(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function kvt(e,t,n){return r;function r(a){return gc(a)?C4(e,i)(a):n(a)}function i(a){return G5e(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return di(a)?Qi(e,o,"whitespace")(a):o(a)}function o(a){return a===null||An(a)?t(a):n(a)}}const Rvt={name:"hardBreakEscape",tokenize:Nvt};function Nvt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return An(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Pvt={name:"headingAtx",tokenize:Ovt,resolve:Dvt};function Dvt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},jg(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Ovt(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||gc(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||An(c)?(e.exit("atxHeading"),t(c)):di(c)?Qi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||gc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const $vt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Oge=["pre","script","style","textarea"],Lvt={name:"htmlFlow",tokenize:jvt,resolveTo:Bvt,concrete:!0},Mvt={tokenize:zvt,partial:!0},Fvt={tokenize:Uvt,partial:!0};function Bvt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function jvt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(M){return c(M)}function c(M){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(M),f}function f(M){return M===33?(e.consume(M),d):M===47?(e.consume(M),s=!0,m):M===63?(e.consume(M),i=3,r.interrupt?t:F):Gp(M)?(e.consume(M),o=String.fromCharCode(M),g):n(M)}function d(M){return M===45?(e.consume(M),i=2,h):M===91?(e.consume(M),i=5,a=0,p):Gp(M)?(e.consume(M),i=4,r.interrupt?t:F):n(M)}function h(M){return M===45?(e.consume(M),r.interrupt?t:F):n(M)}function p(M){const V="CDATA[";return M===V.charCodeAt(a++)?(e.consume(M),a===V.length?r.interrupt?t:L:p):n(M)}function m(M){return Gp(M)?(e.consume(M),o=String.fromCharCode(M),g):n(M)}function g(M){if(M===null||M===47||M===62||gc(M)){const V=M===47,Q=o.toLowerCase();return!V&&!s&&Oge.includes(Q)?(i=1,r.interrupt?t(M):L(M)):$vt.includes(o.toLowerCase())?(i=6,V?(e.consume(M),y):r.interrupt?t(M):L(M)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(M):s?v(M):b(M))}return M===45||rf(M)?(e.consume(M),o+=String.fromCharCode(M),g):n(M)}function y(M){return M===62?(e.consume(M),r.interrupt?t:L):n(M)}function v(M){return di(M)?(e.consume(M),v):k(M)}function b(M){return M===47?(e.consume(M),k):M===58||M===95||Gp(M)?(e.consume(M),w):di(M)?(e.consume(M),b):k(M)}function w(M){return M===45||M===46||M===58||M===95||rf(M)?(e.consume(M),w):x(M)}function x(M){return M===61?(e.consume(M),S):di(M)?(e.consume(M),x):b(M)}function S(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(e.consume(M),u=M,A):di(M)?(e.consume(M),S):C(M)}function A(M){return M===u?(e.consume(M),u=null,N):M===null||An(M)?n(M):(e.consume(M),A)}function C(M){return M===null||M===34||M===39||M===47||M===60||M===61||M===62||M===96||gc(M)?x(M):(e.consume(M),C)}function N(M){return M===47||M===62||di(M)?b(M):n(M)}function k(M){return M===62?(e.consume(M),D):n(M)}function D(M){return M===null||An(M)?L(M):di(M)?(e.consume(M),D):n(M)}function L(M){return M===45&&i===2?(e.consume(M),H):M===60&&i===1?(e.consume(M),G):M===62&&i===4?(e.consume(M),j):M===63&&i===3?(e.consume(M),F):M===93&&i===5?(e.consume(M),J):An(M)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Mvt,W,O)(M)):M===null||An(M)?(e.exit("htmlFlowData"),O(M)):(e.consume(M),L)}function O(M){return e.check(Fvt,B,W)(M)}function B(M){return e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),q}function q(M){return M===null||An(M)?O(M):(e.enter("htmlFlowData"),L(M))}function H(M){return M===45?(e.consume(M),F):L(M)}function G(M){return M===47?(e.consume(M),o="",K):L(M)}function K(M){if(M===62){const V=o.toLowerCase();return Oge.includes(V)?(e.consume(M),j):L(M)}return Gp(M)&&o.length<8?(e.consume(M),o+=String.fromCharCode(M),K):L(M)}function J(M){return M===93?(e.consume(M),F):L(M)}function F(M){return M===62?(e.consume(M),j):M===45&&i===2?(e.consume(M),F):L(M)}function j(M){return M===null||An(M)?(e.exit("htmlFlowData"),W(M)):(e.consume(M),j)}function W(M){return e.exit("htmlFlow"),t(M)}}function Uvt(e,t,n){const r=this;return i;function i(o){return An(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function zvt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(DM,t,n)}}const Vvt={name:"htmlText",tokenize:Hvt};function Hvt(e,t,n){const r=this;let i,s,o;return a;function a(F){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(F),u}function u(F){return F===33?(e.consume(F),l):F===47?(e.consume(F),x):F===63?(e.consume(F),b):Gp(F)?(e.consume(F),C):n(F)}function l(F){return F===45?(e.consume(F),c):F===91?(e.consume(F),s=0,p):Gp(F)?(e.consume(F),v):n(F)}function c(F){return F===45?(e.consume(F),h):n(F)}function f(F){return F===null?n(F):F===45?(e.consume(F),d):An(F)?(o=f,G(F)):(e.consume(F),f)}function d(F){return F===45?(e.consume(F),h):f(F)}function h(F){return F===62?H(F):F===45?d(F):f(F)}function p(F){const j="CDATA[";return F===j.charCodeAt(s++)?(e.consume(F),s===j.length?m:p):n(F)}function m(F){return F===null?n(F):F===93?(e.consume(F),g):An(F)?(o=m,G(F)):(e.consume(F),m)}function g(F){return F===93?(e.consume(F),y):m(F)}function y(F){return F===62?H(F):F===93?(e.consume(F),y):m(F)}function v(F){return F===null||F===62?H(F):An(F)?(o=v,G(F)):(e.consume(F),v)}function b(F){return F===null?n(F):F===63?(e.consume(F),w):An(F)?(o=b,G(F)):(e.consume(F),b)}function w(F){return F===62?H(F):b(F)}function x(F){return Gp(F)?(e.consume(F),S):n(F)}function S(F){return F===45||rf(F)?(e.consume(F),S):A(F)}function A(F){return An(F)?(o=A,G(F)):di(F)?(e.consume(F),A):H(F)}function C(F){return F===45||rf(F)?(e.consume(F),C):F===47||F===62||gc(F)?N(F):n(F)}function N(F){return F===47?(e.consume(F),H):F===58||F===95||Gp(F)?(e.consume(F),k):An(F)?(o=N,G(F)):di(F)?(e.consume(F),N):H(F)}function k(F){return F===45||F===46||F===58||F===95||rf(F)?(e.consume(F),k):D(F)}function D(F){return F===61?(e.consume(F),L):An(F)?(o=D,G(F)):di(F)?(e.consume(F),D):N(F)}function L(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(e.consume(F),i=F,O):An(F)?(o=L,G(F)):di(F)?(e.consume(F),L):(e.consume(F),B)}function O(F){return F===i?(e.consume(F),i=void 0,q):F===null?n(F):An(F)?(o=O,G(F)):(e.consume(F),O)}function B(F){return F===null||F===34||F===39||F===60||F===61||F===96?n(F):F===47||F===62||gc(F)?N(F):(e.consume(F),B)}function q(F){return F===47||F===62||gc(F)?N(F):n(F)}function H(F){return F===62?(e.consume(F),e.exit("htmlTextData"),e.exit("htmlText"),t):n(F)}function G(F){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),K}function K(F){return di(F)?Qi(e,J,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):J(F)}function J(F){return e.enter("htmlTextData"),o(F)}}const Hne={name:"labelEnd",tokenize:Xvt,resolveTo:Kvt,resolveAll:Yvt},qvt={tokenize:Qvt},Wvt={tokenize:Jvt},Gvt={tokenize:Zvt};function Yvt(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function Kvt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=rd(a,e.slice(s+1,s+r+3)),a=rd(a,[["enter",c,t]]),a=rd(a,Vne(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=rd(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=rd(a,e.slice(o+1)),a=rd(a,[["exit",u,t]]),jg(e,s,e.length,a),e}function Xvt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(vT(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(qvt,c,o?c:f)(d):d===91?e.attempt(Wvt,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(Gvt,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function Qvt(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return gc(f)?C4(e,s)(f):s(f)}function s(f){return f===41?c(f):q5e(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return gc(f)?C4(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?G5e(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return gc(f)?C4(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Jvt(e,t,n){const r=this;return i;function i(a){return W5e.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(vT(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function Zvt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const ebt={name:"labelStartImage",tokenize:tbt,resolveAll:Hne.resolveAll};function tbt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const nbt={name:"labelStartLink",tokenize:rbt,resolveAll:Hne.resolveAll};function rbt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const dV={name:"lineEnding",tokenize:ibt};function ibt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Qi(e,t,"linePrefix")}}const zD={name:"thematicBreak",tokenize:sbt};function sbt(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||An(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),di(l)?Qi(e,a,"whitespace")(l):a(l))}}const Vl={name:"list",tokenize:ubt,continuation:{tokenize:lbt},exit:fbt},obt={tokenize:dbt,partial:!0},abt={tokenize:cbt,partial:!0};function ubt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:nK(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(zD,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return nK(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(DM,r.interrupt?n:c,e.attempt(obt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return di(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function lbt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(DM,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Qi(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!di(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(abt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Qi(e,e.attempt(Vl,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function cbt(e,t,n){const r=this;return Qi(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function fbt(e){e.exit(this.containerState.type)}function dbt(e,t,n){const r=this;return Qi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!di(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const $ge={name:"setextUnderline",tokenize:pbt,resolveTo:hbt};function hbt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function pbt(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),di(l)?Qi(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||An(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const mbt={tokenize:gbt};function gbt(e){const t=this,n=e.attempt(DM,r,e.attempt(this.parser.constructs.flowInitial,i,Qi(e,e.attempt(this.parser.constructs.flow,i,e.attempt(wvt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const ybt={resolveAll:K5e()},vbt=Y5e("string"),bbt=Y5e("text");function Y5e(e){return{tokenize:t,resolveAll:K5e(e==="text"?_bt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function K5e(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function _bt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function wbt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:A(x),check:A(S),interrupt:A(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(D){return o=rd(o,D),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=Vne(s,l.events,l),l.events)}function d(D,L){return Ebt(h(D),L)}function h(D){return xbt(o,D)}function p(){const{line:D,column:L,offset:O,_index:B,_bufferIndex:q}=r;return{line:D,column:L,offset:O,_index:B,_bufferIndex:q}}function m(D){i[D.line]=D.column,k()}function g(){let D;for(;r._index<o.length;){const L=o[r._index];if(typeof L=="string")for(D=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===D&&r._bufferIndex<L.length;)y(L.charCodeAt(r._bufferIndex));else y(L)}}function y(D){c=c(D)}function v(D){An(D)?(r.line++,r.column=1,r.offset+=D===-3?2:1,k()):D!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=D}function b(D,L){const O=L||{};return O.type=D,O.start=p(),l.events.push(["enter",O,l]),a.push(O),O}function w(D){const L=a.pop();return L.end=p(),l.events.push(["exit",L,l]),L}function x(D,L){C(D,L.from)}function S(D,L){L.restore()}function A(D,L){return O;function O(B,q,H){let G,K,J,F;return Array.isArray(B)?W(B):"tokenize"in B?W([B]):j(B);function j(se){return be;function be(he){const Ce=he!==null&&se[he],De=he!==null&&se.null,rt=[...Array.isArray(Ce)?Ce:Ce?[Ce]:[],...Array.isArray(De)?De:De?[De]:[]];return W(rt)(he)}}function W(se){return G=se,K=0,se.length===0?H:M(se[K])}function M(se){return be;function be(he){return F=N(),J=se,se.partial||(l.currentConstruct=se),se.name&&l.parser.constructs.disable.null.includes(se.name)?Q():se.tokenize.call(L?Object.assign(Object.create(l),L):l,u,V,Q)(he)}}function V(se){return D(J,F),q}function Q(se){return F.restore(),++K<G.length?M(G[K]):H}}}function C(D,L){D.resolveAll&&!s.includes(D)&&s.push(D),D.resolve&&jg(l.events,L,l.events.length-L,D.resolve(l.events.slice(L),l)),D.resolveTo&&(l.events=D.resolveTo(l.events,l))}function N(){const D=p(),L=l.previous,O=l.currentConstruct,B=l.events.length,q=Array.from(a);return{restore:H,from:B};function H(){r=D,l.previous=L,l.currentConstruct=O,l.events.length=B,a=q,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function xbt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Ebt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Tbt={42:Vl,43:Vl,45:Vl,48:Vl,49:Vl,50:Vl,51:Vl,52:Vl,53:Vl,54:Vl,55:Vl,56:Vl,57:Vl,62:U5e},Sbt={91:Avt},Abt={[-2]:fV,[-1]:fV,32:fV},Cbt={35:Pvt,42:zD,45:[$ge,zD],60:Lvt,61:$ge,95:zD,96:Dge,126:Dge},Ibt={38:V5e,92:z5e},kbt={[-5]:dV,[-4]:dV,[-3]:dV,33:ebt,38:V5e,42:rK,60:[nvt,Vvt],91:nbt,92:[Rvt,z5e],93:Hne,95:rK,96:mvt},Rbt={null:[rK,ybt]},Nbt={null:[42,95]},Pbt={null:[]},Dbt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Nbt,contentInitial:Sbt,disable:Pbt,document:Tbt,flow:Cbt,flowInitial:Abt,insideSpan:Rbt,string:Ibt,text:kbt},Symbol.toStringTag,{value:"Module"}));function Obt(e){const n=Uyt([Dbt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(Kyt),document:i(Qyt),flow:i(mbt),string:i(vbt),text:i(bbt)};return r;function i(s){return o;function o(a){return wbt(r,s,a)}}}function $bt(e){for(;!H5e(e););return e}const Lge=/[\0\t\n\r]/g;function Lbt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Lge.lastIndex=f,l=Lge.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Mbt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Fbt(e){return e.replace(Mbt,Bbt)}function Bbt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return j5e(n.slice(s?2:1),s?16:10)}return zne(n)||e}const X5e={}.hasOwnProperty;function jbt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Ubt(n)($bt(Obt(n).document().write(Lbt()(e,t,!0))))}function Ubt(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(st),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(It),blockQuote:s(De),characterEscape:N,characterReference:N,codeFenced:s(rt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(rt,o),codeText:s(Re,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(Tt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ze),hardBreakEscape:s(mt),hardBreakTrailing:s(mt),htmlFlow:s(Se,o),htmlFlowData:N,htmlText:s(Se,o),htmlTextData:N,image:s(Fe),label:o,link:s(st),listItem:s(Nt),listItemValue:d,listOrdered:s(yt,f),listUnordered:s(yt),paragraph:s(Je),reference:M,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(It),strong:s(xe),thematicBreak:s(Rt)},exit:{atxHeading:u(),atxHeadingSequence:x,autolink:u(),autolinkEmail:Ce,autolinkProtocol:he,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:Q,characterReferenceMarkerNumeric:Q,characterReferenceValue:se,characterReference:be,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(q),codeTextData:k,data:k,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(L),hardBreakTrailing:u(L),htmlFlow:u(O),htmlFlowData:k,htmlText:u(B),htmlTextData:k,image:u(G),label:J,labelText:K,lineEnding:D,link:u(H),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:V,resourceDestinationString:F,resourceTitleString:j,resource:W,setextHeading:u(C),setextHeadingLineSequence:A,setextHeadingText:S,strong:u(),thematicBreak:u()}};Q5e(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Ee){let Oe={type:"root",children:[]};const ot={stack:[Oe],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},_t=[];let jt=-1;for(;++jt<Ee.length;)if(Ee[jt][1].type==="listOrdered"||Ee[jt][1].type==="listUnordered")if(Ee[jt][0]==="enter")_t.push(jt);else{const Un=_t.pop();jt=i(Ee,Un,jt)}for(jt=-1;++jt<Ee.length;){const Un=t[Ee[jt][0]];X5e.call(Un,Ee[jt][1].type)&&Un[Ee[jt][1].type].call(Object.assign({sliceSerialize:Ee[jt][2].sliceSerialize},ot),Ee[jt][1])}if(ot.tokenStack.length>0){const Un=ot.tokenStack[ot.tokenStack.length-1];(Un[1]||Mge).call(ot,void 0,Un[0])}for(Oe.position={start:G1(Ee.length>0?Ee[0][1].start:{line:1,column:1,offset:0}),end:G1(Ee.length>0?Ee[Ee.length-2][1].end:{line:1,column:1,offset:0})},jt=-1;++jt<t.transforms.length;)Oe=t.transforms[jt](Oe)||Oe;return Oe}function i(Ee,Oe,ot){let _t=Oe-1,jt=-1,Un=!1,hr,Sr,_i,Sn;for(;++_t<=ot;){const zn=Ee[_t];switch(zn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{zn[0]==="enter"?jt++:jt--,Sn=void 0;break}case"lineEndingBlank":{zn[0]==="enter"&&(hr&&!Sn&&!jt&&!_i&&(_i=_t),Sn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Sn=void 0}if(!jt&&zn[0]==="enter"&&zn[1].type==="listItemPrefix"||jt===-1&&zn[0]==="exit"&&(zn[1].type==="listUnordered"||zn[1].type==="listOrdered")){if(hr){let pr=_t;for(Sr=void 0;pr--;){const yr=Ee[pr];if(yr[1].type==="lineEnding"||yr[1].type==="lineEndingBlank"){if(yr[0]==="exit")continue;Sr&&(Ee[Sr][1].type="lineEndingBlank",Un=!0),yr[1].type="lineEnding",Sr=pr}else if(!(yr[1].type==="linePrefix"||yr[1].type==="blockQuotePrefix"||yr[1].type==="blockQuotePrefixWhitespace"||yr[1].type==="blockQuoteMarker"||yr[1].type==="listItemIndent"))break}_i&&(!Sr||_i<Sr)&&(hr._spread=!0),hr.end=Object.assign({},Sr?Ee[Sr][1].start:zn[1].end),Ee.splice(Sr||_t,0,["exit",hr,zn[2]]),_t++,ot++}if(zn[1].type==="listItemPrefix"){const pr={type:"listItem",_spread:!1,start:Object.assign({},zn[1].start),end:void 0};hr=pr,Ee.splice(_t,0,["enter",pr,zn[2]]),_t++,ot++,_i=void 0,Sn=!0}}}return Ee[Oe][1]._spread=Un,ot}function s(Ee,Oe){return ot;function ot(_t){a.call(this,Ee(_t),_t),Oe&&Oe.call(this,_t)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Ee,Oe,ot){this.stack[this.stack.length-1].children.push(Ee),this.stack.push(Ee),this.tokenStack.push([Oe,ot]),Ee.position={start:G1(Oe.start),end:void 0}}function u(Ee){return Oe;function Oe(ot){Ee&&Ee.call(this,ot),l.call(this,ot)}}function l(Ee,Oe){const ot=this.stack.pop(),_t=this.tokenStack.pop();if(_t)_t[0].type!==Ee.type&&(Oe?Oe.call(this,Ee,_t[0]):(_t[1]||Mge).call(this,Ee,_t[0]));else throw new Error("Cannot close `"+Ee.type+"` ("+A4({start:Ee.start,end:Ee.end})+"): its not open");ot.position.end=G1(Ee.end)}function c(){return Byt(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(Ee){if(this.data.expectingFirstListItemValue){const Oe=this.stack[this.stack.length-2];Oe.start=Number.parseInt(this.sliceSerialize(Ee),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.lang=Ee}function p(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.meta=Ee}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee.replace(/(\r?\n|\r)$/g,"")}function v(Ee){const Oe=this.resume(),ot=this.stack[this.stack.length-1];ot.label=Oe,ot.identifier=vT(this.sliceSerialize(Ee)).toLowerCase()}function b(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=Ee}function w(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=Ee}function x(Ee){const Oe=this.stack[this.stack.length-1];if(!Oe.depth){const ot=this.sliceSerialize(Ee).length;Oe.depth=ot}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function A(Ee){const Oe=this.stack[this.stack.length-1];Oe.depth=this.sliceSerialize(Ee).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function N(Ee){const ot=this.stack[this.stack.length-1].children;let _t=ot[ot.length-1];(!_t||_t.type!=="text")&&(_t=kt(),_t.position={start:G1(Ee.start),end:void 0},ot.push(_t)),this.stack.push(_t)}function k(Ee){const Oe=this.stack.pop();Oe.value+=this.sliceSerialize(Ee),Oe.position.end=G1(Ee.end)}function D(Ee){const Oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ot=Oe.children[Oe.children.length-1];ot.position.end=G1(Ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Oe.type)&&(N.call(this,Ee),k.call(this,Ee))}function L(){this.data.atHardBreak=!0}function O(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee}function B(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee}function q(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee}function H(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=Oe,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function G(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=Oe,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function K(Ee){const Oe=this.sliceSerialize(Ee),ot=this.stack[this.stack.length-2];ot.label=Fbt(Oe),ot.identifier=vT(Oe).toLowerCase()}function J(){const Ee=this.stack[this.stack.length-1],Oe=this.resume(),ot=this.stack[this.stack.length-1];if(this.data.inReference=!0,ot.type==="link"){const _t=Ee.children;ot.children=_t}else ot.alt=Oe}function F(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=Ee}function j(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=Ee}function W(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function V(Ee){const Oe=this.resume(),ot=this.stack[this.stack.length-1];ot.label=Oe,ot.identifier=vT(this.sliceSerialize(Ee)).toLowerCase(),this.data.referenceType="full"}function Q(Ee){this.data.characterReferenceType=Ee.type}function se(Ee){const Oe=this.sliceSerialize(Ee),ot=this.data.characterReferenceType;let _t;ot?(_t=j5e(Oe,ot==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_t=zne(Oe);const jt=this.stack[this.stack.length-1];jt.value+=_t}function be(Ee){const Oe=this.stack.pop();Oe.position.end=G1(Ee.end)}function he(Ee){k.call(this,Ee);const Oe=this.stack[this.stack.length-1];Oe.url=this.sliceSerialize(Ee)}function Ce(Ee){k.call(this,Ee);const Oe=this.stack[this.stack.length-1];Oe.url="mailto:"+this.sliceSerialize(Ee)}function De(){return{type:"blockquote",children:[]}}function rt(){return{type:"code",lang:null,meta:null,value:""}}function Re(){return{type:"inlineCode",value:""}}function Tt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ze(){return{type:"emphasis",children:[]}}function It(){return{type:"heading",depth:0,children:[]}}function mt(){return{type:"break"}}function Se(){return{type:"html",value:""}}function Fe(){return{type:"image",title:null,url:"",alt:null}}function st(){return{type:"link",title:null,url:"",children:[]}}function yt(Ee){return{type:"list",ordered:Ee.type==="listOrdered",start:null,spread:Ee._spread,children:[]}}function Nt(Ee){return{type:"listItem",spread:Ee._spread,checked:null,children:[]}}function Je(){return{type:"paragraph",children:[]}}function xe(){return{type:"strong",children:[]}}function kt(){return{type:"text",value:""}}function Rt(){return{type:"thematicBreak"}}}function G1(e){return{line:e.line,column:e.column,offset:e.offset}}function Q5e(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Q5e(e,r):zbt(e,r)}}function zbt(e,t){let n;for(n in t)if(X5e.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Mge(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+A4({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+A4({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+A4({start:t.start,end:t.end})+") is still open")}function Vbt(e){const t=this;t.parser=n;function n(r){return jbt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Hbt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function qbt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Wbt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Gbt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ybt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Kbt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=$A(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Xbt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Qbt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function J5e(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Jbt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return J5e(e,t);const i={src:$A(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Zbt(e,t){const n={src:$A(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function e_t(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function t_t(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return J5e(e,t);const i={href:$A(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function n_t(e,t){const n={href:$A(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function r_t(e,t,n){const r=e.all(t),i=n?i_t(n):Z5e(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function i_t(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Z5e(n[r])}return t}function Z5e(e){const t=e.spread;return t??e.children.length>1}function s_t(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function o_t(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function a_t(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function u_t(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function l_t(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Q0(t.children[1]),u=PM(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function c_t(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function f_t(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Fge=9,Bge=32;function d_t(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(jge(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(jge(t.slice(i),i>0,!1)),s.join("")}function jge(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Fge||s===Bge;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Fge||s===Bge;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function h_t(e,t){const n={type:"text",value:d_t(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function p_t(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const m_t={blockquote:Hbt,break:qbt,code:Wbt,delete:Gbt,emphasis:Ybt,footnoteReference:Kbt,heading:Xbt,html:Qbt,imageReference:Jbt,image:Zbt,inlineCode:e_t,linkReference:t_t,link:n_t,listItem:r_t,list:s_t,paragraph:o_t,root:a_t,strong:u_t,table:l_t,tableCell:f_t,tableRow:c_t,text:h_t,thematicBreak:p_t,toml:wP,yaml:wP,definition:wP,footnoteDefinition:wP};function wP(){}const eNe=-1,OM=0,N$=1,P$=2,qne=3,Wne=4,Gne=5,Yne=6,tNe=7,nNe=8,Uge=typeof self=="object"?self:globalThis,g_t=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case OM:case eNe:return n(o,i);case N$:{const a=n([],i);for(const u of o)a.push(r(u));return a}case P$:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case qne:return n(new Date(o),i);case Wne:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case Gne:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case Yne:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case tNe:{const{name:a,message:u}=o;return n(new Uge[a](u),i)}case nNe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Uge[s](o),i)};return r},zge=e=>g_t(new Map,e)(0),W2="",{toString:y_t}={},{keys:v_t}=Object,y3=e=>{const t=typeof e;if(t!=="object"||!e)return[OM,t];const n=y_t.call(e).slice(8,-1);switch(n){case"Array":return[N$,W2];case"Object":return[P$,W2];case"Date":return[qne,W2];case"RegExp":return[Wne,W2];case"Map":return[Gne,W2];case"Set":return[Yne,W2]}return n.includes("Array")?[N$,n]:n.includes("Error")?[tNe,n]:[P$,n]},xP=([e,t])=>e===OM&&(t==="function"||t==="symbol"),b_t=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=y3(o);switch(a){case OM:{let c=o;switch(u){case"bigint":a=nNe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([eNe],o)}return i([a,c],o)}case N$:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case P$:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of v_t(o))(e||!xP(y3(o[d])))&&c.push([s(d),s(o[d])]);return f}case qne:return i([a,o.toISOString()],o);case Wne:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case Gne:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(xP(y3(d))||xP(y3(h))))&&c.push([s(d),s(h)]);return f}case Yne:{const c=[],f=i([a,c],o);for(const d of o)(e||!xP(y3(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Vge=(e,{json:t,lossy:n}={})=>{const r=[];return b_t(!(t||n),!!t,new Map,r)(e),r},uS=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?zge(Vge(e,t)):structuredClone(e):(e,t)=>zge(Vge(e,t));function __t(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function w_t(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function x_t(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||__t,r=e.options.footnoteBackLabel||w_t,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=$A(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...uS(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const rNe=function(e){if(e==null)return A_t;if(typeof e=="function")return $M(e);if(typeof e=="object")return Array.isArray(e)?E_t(e):T_t(e);if(typeof e=="string")return S_t(e);throw new Error("Expected function, string, or object as test")};function E_t(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=rNe(e[n]);return $M(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function T_t(e){const t=e;return $M(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function S_t(e){return $M(t);function t(n){return n&&n.type===e}}function $M(e){return t;function t(n,r,i){return!!(C_t(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function A_t(){return!0}function C_t(e){return e!==null&&typeof e=="object"&&"type"in e}const iNe=[],I_t=!0,Hge=!1,k_t="skip";function R_t(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=rNe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=iNe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=N_t(n(u,c)),h[0]===Hge))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==k_t)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Hge)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function N_t(e){return Array.isArray(e)?e:typeof e=="number"?[I_t,e]:e==null?iNe:[e]}function Kne(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),R_t(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const iK={}.hasOwnProperty,P_t={};function D_t(e,t){const n=t||P_t,r=new Map,i=new Map,s=new Map,o={...m_t,...n.handlers},a={all:l,applyData:$_t,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:O_t,wrap:M_t};return Kne(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(iK.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=uS(g);return y.children=a.all(c),y}return uS(c)}return(a.options.unknownHandler||L_t)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=qge(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=qge(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function O_t(e,t){e.position&&(t.position=myt(e))}function $_t(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,uS(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function L_t(e,t){const n=t.data||{},r="value"in t&&!(iK.call(n,"hProperties")||iK.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function M_t(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function qge(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Wge(e,t){const n=D_t(e,t),r=n.one(e,void 0),i=x_t(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function F_t(e,t){return e&&"run"in e?async function(n,r){const i=Wge(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Wge(n,{file:r,...t||e})}}function Gge(e){if(e)throw e}var VD=Object.prototype.hasOwnProperty,sNe=Object.prototype.toString,Yge=Object.defineProperty,Kge=Object.getOwnPropertyDescriptor,Xge=function(t){return typeof Array.isArray=="function"?Array.isArray(t):sNe.call(t)==="[object Array]"},Qge=function(t){if(!t||sNe.call(t)!=="[object Object]")return!1;var n=VD.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&VD.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||VD.call(t,i)},Jge=function(t,n){Yge&&n.name==="__proto__"?Yge(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Zge=function(t,n){if(n==="__proto__")if(VD.call(t,n)){if(Kge)return Kge(t,n).value}else return;return t[n]},B_t=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Zge(a,n),i=Zge(t,n),a!==i&&(c&&i&&(Qge(i)||(s=Xge(i)))?(s?(s=!1,o=r&&Xge(r)?r:[]):o=r&&Qge(r)?r:{},Jge(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Jge(a,{name:n,newValue:i}));return a};const hV=Rf(B_t);function sK(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function j_t(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?U_t(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function U_t(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Lp={basename:z_t,dirname:V_t,extname:H_t,join:q_t,sep:"/"};function z_t(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');CR(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function V_t(e){if(CR(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function H_t(e){CR(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function q_t(...e){let t=-1,n;for(;++t<e.length;)CR(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":W_t(n)}function W_t(e){CR(e);const t=e.codePointAt(0)===47;let n=G_t(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function G_t(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function CR(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Y_t={cwd:K_t};function K_t(){return"/"}function oK(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function X_t(e){if(typeof e=="string")e=new URL(e);else if(!oK(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Q_t(e)}function Q_t(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const pV=["history","path","basename","stem","extname","dirname"];class oNe{constructor(t){let n;t?oK(t)?n={path:t}:typeof t=="string"||J_t(t)?n={value:t}:n=t:n={},this.cwd=Y_t.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<pV.length;){const s=pV[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)pV.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Lp.basename(this.path):void 0}set basename(t){gV(t,"basename"),mV(t,"basename"),this.path=Lp.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Lp.dirname(this.path):void 0}set dirname(t){e1e(this.basename,"dirname"),this.path=Lp.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Lp.extname(this.path):void 0}set extname(t){if(mV(t,"extname"),e1e(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Lp.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){oK(t)&&(t=X_t(t)),gV(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Lp.basename(this.path,this.extname):void 0}set stem(t){gV(t,"stem"),mV(t,"stem"),this.path=Lp.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Uu(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function mV(e,t){if(e&&e.includes(Lp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Lp.sep+"`")}function gV(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function e1e(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function J_t(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Z_t=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},ewt={}.hasOwnProperty;class Xne extends Z_t{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=j_t()}copy(){const t=new Xne;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(hV(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(bV("data",this.frozen),this.namespace[t]=n,this):ewt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(bV("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=EP(t),r=this.parser||this.Parser;return yV("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),yV("process",this.parser||this.Parser),vV("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=EP(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);rwt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),yV("processSync",this.parser||this.Parser),vV("processSync",this.compiler||this.Compiler),this.process(t,i),n1e("processSync","process",n),r;function i(s,o){n=!0,Gge(s),r=o}}run(t,n,r){t1e(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=EP(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),n1e("runSync","run",r),i;function s(o,a){Gge(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=EP(n),i=this.compiler||this.Compiler;return vV("stringify",i),t1e(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(bV("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=hV(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];sK(m)&&sK(h)&&(h=hV(!0,m,h)),r[d]=[l,h,...p]}}}}const twt=new Xne().freeze();function yV(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function vV(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function bV(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function t1e(e){if(!sK(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function n1e(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function EP(e){return nwt(e)?e:new oNe(e)}function nwt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function rwt(e){return typeof e=="string"||iwt(e)}function iwt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const swt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",r1e=[],i1e={allowDangerousHtml:!0},owt=/^(https?|ircs?|mailto|xmpp)$/i,awt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function uwt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||r1e,u=e.remarkPlugins||r1e,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...i1e}:i1e,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||lwt,h=twt().use(Vbt).use(u).use(F_t,l).use(a),p=new oNe;typeof r=="string"&&(p.value=r);for(const v of awt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+swt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),Kne(g,y),wyt(g,{Fragment:E.Fragment,components:s,ignoreInvalidStyle:!0,jsx:E.jsx,jsxs:E.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let x;for(x in cV)if(Object.hasOwn(cV,x)&&Object.hasOwn(v.properties,x)){const S=v.properties[x],A=cV[x];(A===null||A.includes(v.tagName))&&(v.properties[x]=d(String(S||""),x,v))}}if(v.type==="element"){let x=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!x&&n&&typeof b=="number"&&(x=!n(v,b,w)),x&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function lwt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||owt.test(e.slice(0,t))?e:""}const s1e=/[#.]/g;function cwt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){s1e.lastIndex=i;const a=s1e.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const fwt=new Set(["button","menu","reset","submit"]),aK={}.hasOwnProperty;function aNe(e,t,n){const r=n&&mwt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=cwt(s,t),l.tagName=l.tagName.toLowerCase(),r&&aK.call(r,l.tagName)&&(l.tagName=r[l.tagName]),dwt(o,l.tagName)){let c;for(c in o)aK.call(o,c)&&hwt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)uK(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function dwt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?fwt.has(e.type.toLowerCase()):!("value"in e)}function hwt(e,t,n,r){const i=NM(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=vge(r):i.commaSeparated?o=hge(r):i.commaOrSpaceSeparated?o=vge(hge(r).join(" ")):o=o1e(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?pwt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=o1e(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function uK(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)uK(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?uK(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function o1e(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||Uk(n)===Uk(t)))return!0}return n}function pwt(e){const t=[];let n;for(n in e)aK.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function mwt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const gwt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],ywt=aNe(AR,"div"),vwt=aNe(Eb,"g",gwt),_V=/\r?\n|\r/g;function bwt(e){const t=String(e),n=[];for(_V.lastIndex=0;_V.test(t);)n.push(_V.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const sw={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},uNe={}.hasOwnProperty,_wt=Object.prototype;function wwt(e,t){const n=t;return Qne({file:n.file||void 0,location:!1,schema:n.space==="svg"?Eb:AR,verbose:n.verbose||!1},e)}function Qne(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},HD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:lNe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=bwt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},HD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},HD(e,r,n),n}default:return n=xwt(e,t),n}}function lNe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=Qne(e,t[n]);r.push(i)}return r}function xwt(e,t){const n=e.schema;e.schema=t.namespaceURI===sw.svg?Eb:AR;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;uNe.call(_wt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?vwt:ywt)(t.tagName,i,lNe(e,t.childNodes));if(HD(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&WE(u.startTag),c=u&&u.endTag&&WE(u.endTag),f=Qne(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function HD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Ewt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Ewt(e,t,n){const r=WE(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)uNe.call(n.attrs,o)&&(s[NM(e.schema,o).property]=WE(n.attrs[o]));n.startTag;const a=WE(n.startTag),u=n.endTag?WE(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function WE(e){const t=a1e({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=a1e({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function a1e(e){return e.line&&e.column?e:void 0}const u1e={}.hasOwnProperty;function cNe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&u1e.call(i,e)){const u=String(i[e]);o=u1e.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Twt={}.hasOwnProperty,fNe=cNe("type",{handlers:{root:Awt,element:Nwt,text:kwt,comment:Rwt,doctype:Iwt}});function Swt(e,t){const r=t.space;return fNe(e,r==="svg"?Eb:AR)}function Awt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Jne(e.children,n,t),LA(e,n),n}function Cwt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Jne(e.children,n,t),LA(e,n),n}function Iwt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return LA(e,t),t}function kwt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return LA(e,t),t}function Rwt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return LA(e,t),t}function Nwt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Eb);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Twt.call(e.properties,s)){const u=Pwt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:sw[o],childNodes:[],parentNode:null};return a.childNodes=Jne(e.children,a,r),LA(e,a),e.tagName==="template"&&e.content&&(a.content=Cwt(e.content,r)),a}function Pwt(e,t,n){const r=NM(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?E5e(n):P5e(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=sw[r.space]}return i}function Jne(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=fNe(e[r],n);s.parentNode=t,i.push(s)}return i}function LA(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Dwt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Owt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),bs="";var ie;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(ie=ie||(ie={}));const jl={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function dNe(e){return e>=55296&&e<=57343}function $wt(e){return e>=56320&&e<=57343}function Lwt(e,t){return(e-55296)*1024+9216+t}function hNe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function pNe(e){return e>=64976&&e<=65007||Owt.has(e)}var ze;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ze=ze||(ze={}));const Mwt=65536;class Fwt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Mwt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if($wt(n))return this.pos++,this._addGap(),Lwt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ie.EOF;return this._err(ze.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;const r=this.html.charCodeAt(n);return r===ie.CARRIAGE_RETURN?ie.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;let t=this.html.charCodeAt(this.pos);return t===ie.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ie.LINE_FEED):t===ie.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,dNe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===ie.LINE_FEED||t===ie.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){hNe(t)?this._err(ze.controlCharacterInInputStream):pNe(t)&&this._err(ze.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var or;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(or=or||(or={}));function mNe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const ly=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Bwt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var wV;const jwt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Uwt=(wV=String.fromCodePoint)!==null&&wV!==void 0?wV:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function zwt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=jwt.get(e))!==null&&t!==void 0?t:e}var fa;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(fa||(fa={}));const Vwt=32;var o0;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(o0||(o0={}));function lK(e){return e>=fa.ZERO&&e<=fa.NINE}function Hwt(e){return e>=fa.UPPER_A&&e<=fa.UPPER_F||e>=fa.LOWER_A&&e<=fa.LOWER_F}function qwt(e){return e>=fa.UPPER_A&&e<=fa.UPPER_Z||e>=fa.LOWER_A&&e<=fa.LOWER_Z||lK(e)}function Wwt(e){return e===fa.EQUALS||qwt(e)}var ia;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ia||(ia={}));var z_;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(z_||(z_={}));class Gwt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=ia.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=z_.Strict}startEntity(t){this.decodeMode=t,this.state=ia.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case ia.EntityStart:return t.charCodeAt(n)===fa.NUM?(this.state=ia.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=ia.NamedEntity,this.stateNamedEntity(t,n));case ia.NumericStart:return this.stateNumericStart(t,n);case ia.NumericDecimal:return this.stateNumericDecimal(t,n);case ia.NumericHex:return this.stateNumericHex(t,n);case ia.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Vwt)===fa.LOWER_X?(this.state=ia.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=ia.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(lK(i)||Hwt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(lK(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===fa.SEMI)this.consumed+=1;else if(this.decodeMode===z_.Strict)return 0;return this.emitCodePoint(zwt(this.result),this.consumed),this.errors&&(t!==fa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&o0.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=yNe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===z_.Attribute&&(s===0||Wwt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&o0.VALUE_LENGTH)>>14,s!==0){if(o===fa.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==z_.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&o0.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~o0.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case ia.NamedEntity:return this.result!==0&&(this.decodeMode!==z_.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ia.NumericDecimal:return this.emitNumericEntity(0,2);case ia.NumericHex:return this.emitNumericEntity(0,3);case ia.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ia.EntityStart:return 0}}}function gNe(e){let t="";const n=new Gwt(e,r=>t+=Uwt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function yNe(e,t,n,r){const i=(t&o0.BRANCH_LENGTH)>>7,s=t&o0.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}gNe(ly);gNe(Bwt);var Xe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Xe=Xe||(Xe={}));var uv;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(uv=uv||(uv={}));var Kc;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Kc=Kc||(Kc={}));var Pe;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Pe=Pe||(Pe={}));var $;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})($=$||($={}));const Ywt=new Map([[Pe.A,$.A],[Pe.ADDRESS,$.ADDRESS],[Pe.ANNOTATION_XML,$.ANNOTATION_XML],[Pe.APPLET,$.APPLET],[Pe.AREA,$.AREA],[Pe.ARTICLE,$.ARTICLE],[Pe.ASIDE,$.ASIDE],[Pe.B,$.B],[Pe.BASE,$.BASE],[Pe.BASEFONT,$.BASEFONT],[Pe.BGSOUND,$.BGSOUND],[Pe.BIG,$.BIG],[Pe.BLOCKQUOTE,$.BLOCKQUOTE],[Pe.BODY,$.BODY],[Pe.BR,$.BR],[Pe.BUTTON,$.BUTTON],[Pe.CAPTION,$.CAPTION],[Pe.CENTER,$.CENTER],[Pe.CODE,$.CODE],[Pe.COL,$.COL],[Pe.COLGROUP,$.COLGROUP],[Pe.DD,$.DD],[Pe.DESC,$.DESC],[Pe.DETAILS,$.DETAILS],[Pe.DIALOG,$.DIALOG],[Pe.DIR,$.DIR],[Pe.DIV,$.DIV],[Pe.DL,$.DL],[Pe.DT,$.DT],[Pe.EM,$.EM],[Pe.EMBED,$.EMBED],[Pe.FIELDSET,$.FIELDSET],[Pe.FIGCAPTION,$.FIGCAPTION],[Pe.FIGURE,$.FIGURE],[Pe.FONT,$.FONT],[Pe.FOOTER,$.FOOTER],[Pe.FOREIGN_OBJECT,$.FOREIGN_OBJECT],[Pe.FORM,$.FORM],[Pe.FRAME,$.FRAME],[Pe.FRAMESET,$.FRAMESET],[Pe.H1,$.H1],[Pe.H2,$.H2],[Pe.H3,$.H3],[Pe.H4,$.H4],[Pe.H5,$.H5],[Pe.H6,$.H6],[Pe.HEAD,$.HEAD],[Pe.HEADER,$.HEADER],[Pe.HGROUP,$.HGROUP],[Pe.HR,$.HR],[Pe.HTML,$.HTML],[Pe.I,$.I],[Pe.IMG,$.IMG],[Pe.IMAGE,$.IMAGE],[Pe.INPUT,$.INPUT],[Pe.IFRAME,$.IFRAME],[Pe.KEYGEN,$.KEYGEN],[Pe.LABEL,$.LABEL],[Pe.LI,$.LI],[Pe.LINK,$.LINK],[Pe.LISTING,$.LISTING],[Pe.MAIN,$.MAIN],[Pe.MALIGNMARK,$.MALIGNMARK],[Pe.MARQUEE,$.MARQUEE],[Pe.MATH,$.MATH],[Pe.MENU,$.MENU],[Pe.META,$.META],[Pe.MGLYPH,$.MGLYPH],[Pe.MI,$.MI],[Pe.MO,$.MO],[Pe.MN,$.MN],[Pe.MS,$.MS],[Pe.MTEXT,$.MTEXT],[Pe.NAV,$.NAV],[Pe.NOBR,$.NOBR],[Pe.NOFRAMES,$.NOFRAMES],[Pe.NOEMBED,$.NOEMBED],[Pe.NOSCRIPT,$.NOSCRIPT],[Pe.OBJECT,$.OBJECT],[Pe.OL,$.OL],[Pe.OPTGROUP,$.OPTGROUP],[Pe.OPTION,$.OPTION],[Pe.P,$.P],[Pe.PARAM,$.PARAM],[Pe.PLAINTEXT,$.PLAINTEXT],[Pe.PRE,$.PRE],[Pe.RB,$.RB],[Pe.RP,$.RP],[Pe.RT,$.RT],[Pe.RTC,$.RTC],[Pe.RUBY,$.RUBY],[Pe.S,$.S],[Pe.SCRIPT,$.SCRIPT],[Pe.SECTION,$.SECTION],[Pe.SELECT,$.SELECT],[Pe.SOURCE,$.SOURCE],[Pe.SMALL,$.SMALL],[Pe.SPAN,$.SPAN],[Pe.STRIKE,$.STRIKE],[Pe.STRONG,$.STRONG],[Pe.STYLE,$.STYLE],[Pe.SUB,$.SUB],[Pe.SUMMARY,$.SUMMARY],[Pe.SUP,$.SUP],[Pe.TABLE,$.TABLE],[Pe.TBODY,$.TBODY],[Pe.TEMPLATE,$.TEMPLATE],[Pe.TEXTAREA,$.TEXTAREA],[Pe.TFOOT,$.TFOOT],[Pe.TD,$.TD],[Pe.TH,$.TH],[Pe.THEAD,$.THEAD],[Pe.TITLE,$.TITLE],[Pe.TR,$.TR],[Pe.TRACK,$.TRACK],[Pe.TT,$.TT],[Pe.U,$.U],[Pe.UL,$.UL],[Pe.SVG,$.SVG],[Pe.VAR,$.VAR],[Pe.WBR,$.WBR],[Pe.XMP,$.XMP]]);function MA(e){var t;return(t=Ywt.get(e))!==null&&t!==void 0?t:$.UNKNOWN}const ht=$,Kwt={[Xe.HTML]:new Set([ht.ADDRESS,ht.APPLET,ht.AREA,ht.ARTICLE,ht.ASIDE,ht.BASE,ht.BASEFONT,ht.BGSOUND,ht.BLOCKQUOTE,ht.BODY,ht.BR,ht.BUTTON,ht.CAPTION,ht.CENTER,ht.COL,ht.COLGROUP,ht.DD,ht.DETAILS,ht.DIR,ht.DIV,ht.DL,ht.DT,ht.EMBED,ht.FIELDSET,ht.FIGCAPTION,ht.FIGURE,ht.FOOTER,ht.FORM,ht.FRAME,ht.FRAMESET,ht.H1,ht.H2,ht.H3,ht.H4,ht.H5,ht.H6,ht.HEAD,ht.HEADER,ht.HGROUP,ht.HR,ht.HTML,ht.IFRAME,ht.IMG,ht.INPUT,ht.LI,ht.LINK,ht.LISTING,ht.MAIN,ht.MARQUEE,ht.MENU,ht.META,ht.NAV,ht.NOEMBED,ht.NOFRAMES,ht.NOSCRIPT,ht.OBJECT,ht.OL,ht.P,ht.PARAM,ht.PLAINTEXT,ht.PRE,ht.SCRIPT,ht.SECTION,ht.SELECT,ht.SOURCE,ht.STYLE,ht.SUMMARY,ht.TABLE,ht.TBODY,ht.TD,ht.TEMPLATE,ht.TEXTAREA,ht.TFOOT,ht.TH,ht.THEAD,ht.TITLE,ht.TR,ht.TRACK,ht.UL,ht.WBR,ht.XMP]),[Xe.MATHML]:new Set([ht.MI,ht.MO,ht.MN,ht.MS,ht.MTEXT,ht.ANNOTATION_XML]),[Xe.SVG]:new Set([ht.TITLE,ht.FOREIGN_OBJECT,ht.DESC]),[Xe.XLINK]:new Set,[Xe.XML]:new Set,[Xe.XMLNS]:new Set};function vNe(e){return e===ht.H1||e===ht.H2||e===ht.H3||e===ht.H4||e===ht.H5||e===ht.H6}Pe.STYLE,Pe.SCRIPT,Pe.XMP,Pe.IFRAME,Pe.NOEMBED,Pe.NOFRAMES,Pe.PLAINTEXT;const Xwt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var ae;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(ae||(ae={}));const uo={DATA:ae.DATA,RCDATA:ae.RCDATA,RAWTEXT:ae.RAWTEXT,SCRIPT_DATA:ae.SCRIPT_DATA,PLAINTEXT:ae.PLAINTEXT,CDATA_SECTION:ae.CDATA_SECTION};function I4(e){return e>=ie.DIGIT_0&&e<=ie.DIGIT_9}function CI(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_Z}function Qwt(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_Z}function cy(e){return Qwt(e)||CI(e)}function cK(e){return cy(e)||I4(e)}function bNe(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_F}function _Ne(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_F}function Jwt(e){return I4(e)||bNe(e)||_Ne(e)}function TP(e){return e+32}function wNe(e){return e===ie.SPACE||e===ie.LINE_FEED||e===ie.TABULATION||e===ie.FORM_FEED}function Zwt(e){return e===ie.EQUALS_SIGN||cK(e)}function l1e(e){return wNe(e)||e===ie.SOLIDUS||e===ie.GREATER_THAN_SIGN}class ext{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=ae.DATA,this.returnState=ae.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Fwt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:or.START_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:or.END_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:or.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:or.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(mNe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ze.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=MA(t.tagName),t.type===or.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ze.endTagWithAttributes),t.selfClosing&&this._err(ze.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case or.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case or.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case or.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:or.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=wNe(t)?or.WHITESPACE_CHARACTER:t===ie.NULL?or.NULL_CHARACTER:or.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(or.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=ly[0];s>=0&&(s=yNe(ly,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=ly[s];const a=o&o0.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==ie.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Zwt(this.preprocessor.peek(1))?(n=[ie.AMPERSAND],s+=u):(n=u===0?[ly[s]&~o0.VALUE_LENGTH]:u===1?[ly[++s]]:[ly[++s],ly[++s]],r=0,i=t!==ie.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(ze.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===ae.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===ae.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===ae.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case ae.DATA:{this._stateData(t);break}case ae.RCDATA:{this._stateRcdata(t);break}case ae.RAWTEXT:{this._stateRawtext(t);break}case ae.SCRIPT_DATA:{this._stateScriptData(t);break}case ae.PLAINTEXT:{this._statePlaintext(t);break}case ae.TAG_OPEN:{this._stateTagOpen(t);break}case ae.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case ae.TAG_NAME:{this._stateTagName(t);break}case ae.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case ae.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case ae.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case ae.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case ae.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case ae.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case ae.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case ae.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case ae.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case ae.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case ae.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case ae.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case ae.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case ae.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case ae.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case ae.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case ae.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case ae.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case ae.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case ae.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case ae.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case ae.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case ae.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case ae.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case ae.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case ae.BOGUS_COMMENT:{this._stateBogusComment(t);break}case ae.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case ae.COMMENT_START:{this._stateCommentStart(t);break}case ae.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case ae.COMMENT:{this._stateComment(t);break}case ae.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case ae.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case ae.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case ae.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case ae.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case ae.COMMENT_END:{this._stateCommentEnd(t);break}case ae.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case ae.DOCTYPE:{this._stateDoctype(t);break}case ae.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case ae.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case ae.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case ae.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case ae.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case ae.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case ae.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case ae.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case ae.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case ae.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case ae.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case ae.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case ae.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case ae.CDATA_SECTION:{this._stateCdataSection(t);break}case ae.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case ae.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case ae.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case ae.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case ae.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case ae.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case ae.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case ae.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case ae.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case ae.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=ae.TAG_OPEN;break}case ie.AMPERSAND:{this.returnState=ae.DATA,this.state=ae.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this._emitCodePoint(t);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case ie.AMPERSAND:{this.returnState=ae.RCDATA,this.state=ae.CHARACTER_REFERENCE;break}case ie.LESS_THAN_SIGN:{this.state=ae.RCDATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(bs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=ae.RAWTEXT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(bs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(bs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case ie.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(bs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(cy(t))this._createStartTagToken(),this.state=ae.TAG_NAME,this._stateTagName(t);else switch(t){case ie.EXCLAMATION_MARK:{this.state=ae.MARKUP_DECLARATION_OPEN;break}case ie.SOLIDUS:{this.state=ae.END_TAG_OPEN;break}case ie.QUESTION_MARK:{this._err(ze.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=ae.BOGUS_COMMENT,this._stateBogusComment(t);break}case ie.EOF:{this._err(ze.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ze.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=ae.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(cy(t))this._createEndTagToken(),this.state=ae.TAG_NAME,this._stateTagName(t);else switch(t){case ie.GREATER_THAN_SIGN:{this._err(ze.missingEndTagName),this.state=ae.DATA;break}case ie.EOF:{this._err(ze.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ze.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=ae.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this.state=ae.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),n.tagName+=bs;break}case ie.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(CI(t)?TP(t):t)}}_stateRcdataLessThanSign(t){t===ie.SOLIDUS?this.state=ae.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=ae.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){cy(t)?(this.state=ae.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=ae.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=ae.BEFORE_ATTRIBUTE_NAME,!1;case ie.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=ae.SELF_CLOSING_START_TAG,!1;case ie.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=ae.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ae.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===ie.SOLIDUS?this.state=ae.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=ae.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){cy(t)?(this.state=ae.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=ae.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ae.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case ie.SOLIDUS:{this.state=ae.SCRIPT_DATA_END_TAG_OPEN;break}case ie.EXCLAMATION_MARK:{this.state=ae.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=ae.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){cy(t)?(this.state=ae.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=ae.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ae.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===ie.HYPHEN_MINUS?(this.state=ae.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=ae.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===ie.HYPHEN_MINUS?(this.state=ae.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=ae.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(bs);break}case ie.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_ESCAPED,this._emitChars(bs);break}case ie.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.GREATER_THAN_SIGN:{this.state=ae.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_ESCAPED,this._emitChars(bs);break}case ie.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===ie.SOLIDUS?this.state=ae.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:cy(t)?(this._emitChars("<"),this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){cy(t)?(this.state=ae.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(jl.SCRIPT,!1)&&l1e(this.preprocessor.peek(jl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<jl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(bs);break}case ie.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bs);break}case ie.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.GREATER_THAN_SIGN:{this.state=ae.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bs);break}case ie.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===ie.SOLIDUS?(this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(jl.SCRIPT,!1)&&l1e(this.preprocessor.peek(jl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<jl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ae.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this.state=ae.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._err(ze.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=ae.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=ae.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this._leaveAttrName(),this.state=ae.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._leaveAttrName(),this.state=ae.BEFORE_ATTRIBUTE_VALUE;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:{this._err(ze.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.name+=bs;break}default:this.currentAttr.name+=String.fromCodePoint(CI(t)?TP(t):t)}}_stateAfterAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:{this.state=ae.SELF_CLOSING_START_TAG;break}case ie.EQUALS_SIGN:{this.state=ae.BEFORE_ATTRIBUTE_VALUE;break}case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=ae.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{this.state=ae.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this.state=ae.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(ze.missingAttributeValue),this.state=ae.DATA,this.emitCurrentTagToken();break}default:this.state=ae.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case ie.QUOTATION_MARK:{this.state=ae.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=ae.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=ae.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=bs;break}case ie.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case ie.APOSTROPHE:{this.state=ae.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=ae.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=ae.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=bs;break}case ie.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=ae.BEFORE_ATTRIBUTE_NAME;break}case ie.AMPERSAND:{this.returnState=ae.ATTRIBUTE_VALUE_UNQUOTED,this.state=ae.CHARACTER_REFERENCE;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ae.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=bs;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:case ie.EQUALS_SIGN:case ie.GRAVE_ACCENT:{this._err(ze.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case ie.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=ae.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this._leaveAttrValue(),this.state=ae.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ae.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._err(ze.missingWhitespaceBetweenAttributes),this.state=ae.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case ie.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=ae.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._err(ze.unexpectedSolidusInTag),this.state=ae.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),n.data+=bs;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(jl.DASH_DASH,!0)?(this._createCommentToken(jl.DASH_DASH.length+1),this.state=ae.COMMENT_START):this._consumeSequenceIfMatch(jl.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(jl.DOCTYPE.length+1),this.state=ae.DOCTYPE):this._consumeSequenceIfMatch(jl.CDATA_START,!0)?this.inForeignNode?this.state=ae.CDATA_SECTION:(this._err(ze.cdataInHtmlContent),this._createCommentToken(jl.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=ae.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ze.incorrectlyOpenedComment),this._createCommentToken(2),this.state=ae.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case ie.HYPHEN_MINUS:{this.state=ae.COMMENT_START_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(ze.abruptClosingOfEmptyComment),this.state=ae.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=ae.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=ae.COMMENT_END;break}case ie.GREATER_THAN_SIGN:{this._err(ze.abruptClosingOfEmptyComment),this.state=ae.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ae.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=ae.COMMENT_END_DASH;break}case ie.LESS_THAN_SIGN:{n.data+="<",this.state=ae.COMMENT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),n.data+=bs;break}case ie.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case ie.EXCLAMATION_MARK:{n.data+="!",this.state=ae.COMMENT_LESS_THAN_SIGN_BANG;break}case ie.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=ae.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===ie.HYPHEN_MINUS?this.state=ae.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=ae.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===ie.HYPHEN_MINUS?this.state=ae.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=ae.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==ie.GREATER_THAN_SIGN&&t!==ie.EOF&&this._err(ze.nestedComment),this.state=ae.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=ae.COMMENT_END;break}case ie.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ae.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentComment(n);break}case ie.EXCLAMATION_MARK:{this.state=ae.COMMENT_END_BANG;break}case ie.HYPHEN_MINUS:{n.data+="-";break}case ie.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=ae.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{n.data+="--!",this.state=ae.COMMENT_END_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(ze.incorrectlyClosedComment),this.state=ae.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=ae.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.BEFORE_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=ae.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case ie.EOF:{this._err(ze.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingWhitespaceBeforeDoctypeName),this.state=ae.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(CI(t))this._createDoctypeToken(String.fromCharCode(TP(t))),this.state=ae.DOCTYPE_NAME;else switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.NULL:{this._err(ze.unexpectedNullCharacter),this._createDoctypeToken(bs),this.state=ae.DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(ze.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=ae.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.AFTER_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),n.name+=bs;break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(CI(t)?TP(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(jl.PUBLIC,!1)?this.state=ae.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(jl.SYSTEM,!1)?this.state=ae.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ze.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(ze.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(ze.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(ze.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(ze.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=ae.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),n.publicId+=bs;break}case ie.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=ae.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),n.publicId+=bs;break}case ie.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ie.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.QUOTATION_MARK:{this._err(ze.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(ze.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.QUOTATION_MARK:{n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=ae.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(ze.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(ze.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=ae.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),n.systemId+=bs;break}case ie.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=ae.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter),n.systemId+=bs;break}case ie.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ae.DATA;break}case ie.NULL:{this._err(ze.unexpectedNullCharacter);break}case ie.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case ie.RIGHT_SQUARE_BRACKET:{this.state=ae.CDATA_SECTION_BRACKET;break}case ie.EOF:{this._err(ze.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===ie.RIGHT_SQUARE_BRACKET?this.state=ae.CDATA_SECTION_END:(this._emitChars("]"),this.state=ae.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case ie.GREATER_THAN_SIGN:{this.state=ae.DATA;break}case ie.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=ae.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===ie.NUMBER_SIGN?this.state=ae.NUMERIC_CHARACTER_REFERENCE:cK(t)?(this.state=ae.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this.state=ae.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){cK(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===ie.SEMICOLON&&this._err(ze.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===ie.LATIN_SMALL_X||t===ie.LATIN_CAPITAL_X?this.state=ae.HEXADEMICAL_CHARACTER_REFERENCE_START:I4(t)?(this.state=ae.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(ze.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Jwt(t)?(this.state=ae.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(ze.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){bNe(t)?this.charRefCode=this.charRefCode*16+t-55:_Ne(t)?this.charRefCode=this.charRefCode*16+t-87:I4(t)?this.charRefCode=this.charRefCode*16+t-48:t===ie.SEMICOLON?this.state=ae.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ze.missingSemicolonAfterCharacterReference),this.state=ae.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){I4(t)?this.charRefCode=this.charRefCode*10+t-48:t===ie.SEMICOLON?this.state=ae.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ze.missingSemicolonAfterCharacterReference),this.state=ae.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===ie.NULL)this._err(ze.nullCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ze.characterReferenceOutsideUnicodeRange),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(dNe(this.charRefCode))this._err(ze.surrogateCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(pNe(this.charRefCode))this._err(ze.noncharacterCharacterReference);else if(hNe(this.charRefCode)||this.charRefCode===ie.CARRIAGE_RETURN){this._err(ze.controlCharacterReference);const n=Xwt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const xNe=new Set([$.DD,$.DT,$.LI,$.OPTGROUP,$.OPTION,$.P,$.RB,$.RP,$.RT,$.RTC]),c1e=new Set([...xNe,$.CAPTION,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]),SP=new Map([[$.APPLET,Xe.HTML],[$.CAPTION,Xe.HTML],[$.HTML,Xe.HTML],[$.MARQUEE,Xe.HTML],[$.OBJECT,Xe.HTML],[$.TABLE,Xe.HTML],[$.TD,Xe.HTML],[$.TEMPLATE,Xe.HTML],[$.TH,Xe.HTML],[$.ANNOTATION_XML,Xe.MATHML],[$.MI,Xe.MATHML],[$.MN,Xe.MATHML],[$.MO,Xe.MATHML],[$.MS,Xe.MATHML],[$.MTEXT,Xe.MATHML],[$.DESC,Xe.SVG],[$.FOREIGN_OBJECT,Xe.SVG],[$.TITLE,Xe.SVG]]),txt=[$.H1,$.H2,$.H3,$.H4,$.H5,$.H6],nxt=[$.TR,$.TEMPLATE,$.HTML],rxt=[$.TBODY,$.TFOOT,$.THEAD,$.TEMPLATE,$.HTML],ixt=[$.TABLE,$.TEMPLATE,$.HTML],sxt=[$.TD,$.TH];class oxt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=$.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===$.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Xe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Xe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(txt,Xe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(sxt,Xe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(ixt,Xe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(rxt,Xe.HTML)}clearBackToTableRowContext(){this.clearBackTo(nxt,Xe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===$.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===$.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Xe.HTML)return!0;if(SP.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(vNe(n)&&r===Xe.HTML)return!0;if(SP.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Xe.HTML)return!0;if((r===$.UL||r===$.OL)&&i===Xe.HTML||SP.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Xe.HTML)return!0;if(r===$.BUTTON&&i===Xe.HTML||SP.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Xe.HTML){if(r===t)return!0;if(r===$.TABLE||r===$.TEMPLATE||r===$.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Xe.HTML){if(n===$.TBODY||n===$.THEAD||n===$.TFOOT)return!0;if(n===$.TABLE||n===$.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Xe.HTML){if(r===t)return!0;if(r!==$.OPTION&&r!==$.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;xNe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;c1e.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&c1e.has(this.currentTagId);)this.pop()}}const xV=3;var yh;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(yh=yh||(yh={}));const f1e={type:yh.Marker};class axt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===yh.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<xV)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<xV)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=xV&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(f1e)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:yh.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:yh.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(f1e);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===yh.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===yh.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===yh.Element&&n.element===t)}}function d1e(e){return{nodeName:"#text",value:e,parentNode:null}}const xE={createDocument(){return{nodeName:"#document",mode:Kc.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};xE.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(xE.isTextNode(n)){n.value+=t;return}}xE.appendChild(e,d1e(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&xE.isTextNode(r)?r.value+=t:xE.insertBefore(e,d1e(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},ENe="html",uxt="about:legacy-compat",lxt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",TNe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],cxt=[...TNe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],fxt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),SNe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],dxt=[...SNe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function h1e(e,t){return t.some(n=>e.startsWith(n))}function hxt(e){return e.name===ENe&&e.publicId===null&&(e.systemId===null||e.systemId===uxt)}function pxt(e){if(e.name!==ENe)return Kc.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===lxt)return Kc.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),fxt.has(n))return Kc.QUIRKS;let r=t===null?cxt:TNe;if(h1e(n,r))return Kc.QUIRKS;if(r=t===null?SNe:dxt,h1e(n,r))return Kc.LIMITED_QUIRKS}return Kc.NO_QUIRKS}const p1e={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},mxt="definitionurl",gxt="definitionURL",yxt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),vxt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Xe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Xe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Xe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Xe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Xe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Xe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Xe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Xe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Xe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Xe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Xe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Xe.XMLNS}]]),bxt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),_xt=new Set([$.B,$.BIG,$.BLOCKQUOTE,$.BODY,$.BR,$.CENTER,$.CODE,$.DD,$.DIV,$.DL,$.DT,$.EM,$.EMBED,$.H1,$.H2,$.H3,$.H4,$.H5,$.H6,$.HEAD,$.HR,$.I,$.IMG,$.LI,$.LISTING,$.MENU,$.META,$.NOBR,$.OL,$.P,$.PRE,$.RUBY,$.S,$.SMALL,$.SPAN,$.STRONG,$.STRIKE,$.SUB,$.SUP,$.TABLE,$.TT,$.U,$.UL,$.VAR]);function wxt(e){const t=e.tagID;return t===$.FONT&&e.attrs.some(({name:r})=>r===uv.COLOR||r===uv.SIZE||r===uv.FACE)||_xt.has(t)}function ANe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===mxt){e.attrs[t].name=gxt;break}}function CNe(e){for(let t=0;t<e.attrs.length;t++){const n=yxt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function Zne(e){for(let t=0;t<e.attrs.length;t++){const n=vxt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function xxt(e){const t=bxt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=MA(e.tagName))}function Ext(e,t){return t===Xe.MATHML&&(e===$.MI||e===$.MO||e===$.MN||e===$.MS||e===$.MTEXT)}function Txt(e,t,n){if(t===Xe.MATHML&&e===$.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===uv.ENCODING){const i=n[r].value.toLowerCase();return i===p1e.TEXT_HTML||i===p1e.APPLICATION_XML}}return t===Xe.SVG&&(e===$.FOREIGN_OBJECT||e===$.DESC||e===$.TITLE)}function Sxt(e,t,n,r){return(!r||r===Xe.HTML)&&Txt(e,t,n)||(!r||r===Xe.MATHML)&&Ext(e,t)}const Axt="hidden",Cxt=8,Ixt=3;var de;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(de||(de={}));const kxt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},INe=new Set([$.TABLE,$.TBODY,$.TFOOT,$.THEAD,$.TR]),m1e={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:xE,onParseError:null};let g1e=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=de.INITIAL,this.originalInsertionMode=de.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...m1e,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new ext(this.options,this),this.activeFormattingElements=new axt(this.treeAdapter),this.fragmentContextID=r?MA(this.treeAdapter.getTagName(r)):$.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new oxt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...m1e,...n};t??(t=r.treeAdapter.createElement(Pe.TEMPLATE,Xe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Xe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===$.TEMPLATE&&s.tmplInsertionModeStack.unshift(de.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:kxt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Xe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Xe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=de.TEXT}switchToPlaintextParsing(){this.insertionMode=de.TEXT,this.originalInsertionMode=de.IN_BODY,this.tokenizer.state=uo.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Pe.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Xe.HTML))switch(this.fragmentContextID){case $.TITLE:case $.TEXTAREA:{this.tokenizer.state=uo.RCDATA;break}case $.STYLE:case $.XMP:case $.IFRAME:case $.NOEMBED:case $.NOFRAMES:case $.NOSCRIPT:{this.tokenizer.state=uo.RAWTEXT;break}case $.SCRIPT:{this.tokenizer.state=uo.SCRIPT_DATA;break}case $.PLAINTEXT:{this.tokenizer.state=uo.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Xe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Xe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Pe.HTML,Xe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,$.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===or.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===$.SVG&&this.treeAdapter.getTagName(n)===Pe.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Xe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===$.MGLYPH||t.tagID===$.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Xe.HTML)}_processToken(t){switch(t.type){case or.CHARACTER:{this.onCharacter(t);break}case or.NULL_CHARACTER:{this.onNullCharacter(t);break}case or.COMMENT:{this.onComment(t);break}case or.DOCTYPE:{this.onDoctype(t);break}case or.START_TAG:{this._processStartTag(t);break}case or.END_TAG:{this.onEndTag(t);break}case or.EOF:{this.onEof(t);break}case or.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Sxt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===yh.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=de.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion($.P),this.openElements.popUntilTagNamePopped($.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case $.TR:{this.insertionMode=de.IN_ROW;return}case $.TBODY:case $.THEAD:case $.TFOOT:{this.insertionMode=de.IN_TABLE_BODY;return}case $.CAPTION:{this.insertionMode=de.IN_CAPTION;return}case $.COLGROUP:{this.insertionMode=de.IN_COLUMN_GROUP;return}case $.TABLE:{this.insertionMode=de.IN_TABLE;return}case $.BODY:{this.insertionMode=de.IN_BODY;return}case $.FRAMESET:{this.insertionMode=de.IN_FRAMESET;return}case $.SELECT:{this._resetInsertionModeForSelect(t);return}case $.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case $.HTML:{this.insertionMode=this.headElement?de.AFTER_HEAD:de.BEFORE_HEAD;return}case $.TD:case $.TH:{if(t>0){this.insertionMode=de.IN_CELL;return}break}case $.HEAD:{if(t>0){this.insertionMode=de.IN_HEAD;return}break}}this.insertionMode=de.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===$.TEMPLATE)break;if(r===$.TABLE){this.insertionMode=de.IN_SELECT_IN_TABLE;return}}this.insertionMode=de.IN_SELECT}_isElementCausesFosterParenting(t){return INe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case $.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Xe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case $.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Kwt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){sEt(this,t);return}switch(this.insertionMode){case de.INITIAL:{v3(this,t);break}case de.BEFORE_HTML:{k4(this,t);break}case de.BEFORE_HEAD:{R4(this,t);break}case de.IN_HEAD:{N4(this,t);break}case de.IN_HEAD_NO_SCRIPT:{P4(this,t);break}case de.AFTER_HEAD:{D4(this,t);break}case de.IN_BODY:case de.IN_CAPTION:case de.IN_CELL:case de.IN_TEMPLATE:{RNe(this,t);break}case de.TEXT:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{EV(this,t);break}case de.IN_TABLE_TEXT:{LNe(this,t);break}case de.IN_COLUMN_GROUP:{D$(this,t);break}case de.AFTER_BODY:{O$(this,t);break}case de.AFTER_AFTER_BODY:{qD(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){iEt(this,t);return}switch(this.insertionMode){case de.INITIAL:{v3(this,t);break}case de.BEFORE_HTML:{k4(this,t);break}case de.BEFORE_HEAD:{R4(this,t);break}case de.IN_HEAD:{N4(this,t);break}case de.IN_HEAD_NO_SCRIPT:{P4(this,t);break}case de.AFTER_HEAD:{D4(this,t);break}case de.TEXT:{this._insertCharacters(t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{EV(this,t);break}case de.IN_COLUMN_GROUP:{D$(this,t);break}case de.AFTER_BODY:{O$(this,t);break}case de.AFTER_AFTER_BODY:{qD(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){fK(this,t);return}switch(this.insertionMode){case de.INITIAL:case de.BEFORE_HTML:case de.BEFORE_HEAD:case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:case de.IN_BODY:case de.IN_TABLE:case de.IN_CAPTION:case de.IN_COLUMN_GROUP:case de.IN_TABLE_BODY:case de.IN_ROW:case de.IN_CELL:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:case de.IN_TEMPLATE:case de.IN_FRAMESET:case de.AFTER_FRAMESET:{fK(this,t);break}case de.IN_TABLE_TEXT:{b3(this,t);break}case de.AFTER_BODY:{Lxt(this,t);break}case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{Mxt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case de.INITIAL:{Fxt(this,t);break}case de.BEFORE_HEAD:case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:{this._err(t,ze.misplacedDoctype);break}case de.IN_TABLE_TEXT:{b3(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ze.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?oEt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case de.INITIAL:{v3(this,t);break}case de.BEFORE_HTML:{Bxt(this,t);break}case de.BEFORE_HEAD:{Uxt(this,t);break}case de.IN_HEAD:{ip(this,t);break}case de.IN_HEAD_NO_SCRIPT:{Hxt(this,t);break}case de.AFTER_HEAD:{Wxt(this,t);break}case de.IN_BODY:{zu(this,t);break}case de.IN_TABLE:{lS(this,t);break}case de.IN_TABLE_TEXT:{b3(this,t);break}case de.IN_CAPTION:{z2t(this,t);break}case de.IN_COLUMN_GROUP:{nre(this,t);break}case de.IN_TABLE_BODY:{FM(this,t);break}case de.IN_ROW:{BM(this,t);break}case de.IN_CELL:{q2t(this,t);break}case de.IN_SELECT:{BNe(this,t);break}case de.IN_SELECT_IN_TABLE:{G2t(this,t);break}case de.IN_TEMPLATE:{K2t(this,t);break}case de.AFTER_BODY:{Q2t(this,t);break}case de.IN_FRAMESET:{J2t(this,t);break}case de.AFTER_FRAMESET:{eEt(this,t);break}case de.AFTER_AFTER_BODY:{nEt(this,t);break}case de.AFTER_AFTER_FRAMESET:{rEt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?aEt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case de.INITIAL:{v3(this,t);break}case de.BEFORE_HTML:{jxt(this,t);break}case de.BEFORE_HEAD:{zxt(this,t);break}case de.IN_HEAD:{Vxt(this,t);break}case de.IN_HEAD_NO_SCRIPT:{qxt(this,t);break}case de.AFTER_HEAD:{Gxt(this,t);break}case de.IN_BODY:{MM(this,t);break}case de.TEXT:{P2t(this,t);break}case de.IN_TABLE:{Vk(this,t);break}case de.IN_TABLE_TEXT:{b3(this,t);break}case de.IN_CAPTION:{V2t(this,t);break}case de.IN_COLUMN_GROUP:{H2t(this,t);break}case de.IN_TABLE_BODY:{dK(this,t);break}case de.IN_ROW:{FNe(this,t);break}case de.IN_CELL:{W2t(this,t);break}case de.IN_SELECT:{jNe(this,t);break}case de.IN_SELECT_IN_TABLE:{Y2t(this,t);break}case de.IN_TEMPLATE:{X2t(this,t);break}case de.AFTER_BODY:{zNe(this,t);break}case de.IN_FRAMESET:{Z2t(this,t);break}case de.AFTER_FRAMESET:{tEt(this,t);break}case de.AFTER_AFTER_BODY:{qD(this,t);break}}}onEof(t){switch(this.insertionMode){case de.INITIAL:{v3(this,t);break}case de.BEFORE_HTML:{k4(this,t);break}case de.BEFORE_HEAD:{R4(this,t);break}case de.IN_HEAD:{N4(this,t);break}case de.IN_HEAD_NO_SCRIPT:{P4(this,t);break}case de.AFTER_HEAD:{D4(this,t);break}case de.IN_BODY:case de.IN_TABLE:case de.IN_CAPTION:case de.IN_COLUMN_GROUP:case de.IN_TABLE_BODY:case de.IN_ROW:case de.IN_CELL:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:{ONe(this,t);break}case de.TEXT:{D2t(this,t);break}case de.IN_TABLE_TEXT:{b3(this,t);break}case de.IN_TEMPLATE:{UNe(this,t);break}case de.AFTER_BODY:case de.IN_FRAMESET:case de.AFTER_FRAMESET:case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{tre(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===ie.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:case de.TEXT:case de.IN_COLUMN_GROUP:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:case de.IN_FRAMESET:case de.AFTER_FRAMESET:{this._insertCharacters(t);break}case de.IN_BODY:case de.IN_CAPTION:case de.IN_CELL:case de.IN_TEMPLATE:case de.AFTER_BODY:case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{kNe(this,t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{EV(this,t);break}case de.IN_TABLE_TEXT:{$Ne(this,t);break}}}};function Rxt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):DNe(e,t),n}function Nxt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Pxt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Ixt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Dxt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Dxt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Oxt(e,t,n){const r=e.treeAdapter.getTagName(t),i=MA(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===$.TEMPLATE&&s===Xe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function $xt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function ere(e,t){for(let n=0;n<Cxt;n++){const r=Rxt(e,t);if(!r)break;const i=Nxt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Pxt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Oxt(e,o,s),$xt(e,i,r)}}function fK(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Lxt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Mxt(e,t){e._appendCommentNode(t,e.document)}function tre(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Fxt(e,t){e._setDocumentType(t);const n=t.forceQuirks?Kc.QUIRKS:pxt(t);hxt(t)||e._err(t,ze.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=de.BEFORE_HTML}function v3(e,t){e._err(t,ze.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Kc.QUIRKS),e.insertionMode=de.BEFORE_HTML,e._processToken(t)}function Bxt(e,t){t.tagID===$.HTML?(e._insertElement(t,Xe.HTML),e.insertionMode=de.BEFORE_HEAD):k4(e,t)}function jxt(e,t){const n=t.tagID;(n===$.HTML||n===$.HEAD||n===$.BODY||n===$.BR)&&k4(e,t)}function k4(e,t){e._insertFakeRootElement(),e.insertionMode=de.BEFORE_HEAD,e._processToken(t)}function Uxt(e,t){switch(t.tagID){case $.HTML:{zu(e,t);break}case $.HEAD:{e._insertElement(t,Xe.HTML),e.headElement=e.openElements.current,e.insertionMode=de.IN_HEAD;break}default:R4(e,t)}}function zxt(e,t){const n=t.tagID;n===$.HEAD||n===$.BODY||n===$.HTML||n===$.BR?R4(e,t):e._err(t,ze.endTagWithoutMatchingOpenElement)}function R4(e,t){e._insertFakeElement(Pe.HEAD,$.HEAD),e.headElement=e.openElements.current,e.insertionMode=de.IN_HEAD,e._processToken(t)}function ip(e,t){switch(t.tagID){case $.HTML:{zu(e,t);break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case $.TITLE:{e._switchToTextParsing(t,uo.RCDATA);break}case $.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,uo.RAWTEXT):(e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_HEAD_NO_SCRIPT);break}case $.NOFRAMES:case $.STYLE:{e._switchToTextParsing(t,uo.RAWTEXT);break}case $.SCRIPT:{e._switchToTextParsing(t,uo.SCRIPT_DATA);break}case $.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=de.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(de.IN_TEMPLATE);break}case $.HEAD:{e._err(t,ze.misplacedStartTagForHeadElement);break}default:N4(e,t)}}function Vxt(e,t){switch(t.tagID){case $.HEAD:{e.openElements.pop(),e.insertionMode=de.AFTER_HEAD;break}case $.BODY:case $.BR:case $.HTML:{N4(e,t);break}case $.TEMPLATE:{Fx(e,t);break}default:e._err(t,ze.endTagWithoutMatchingOpenElement)}}function Fx(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==$.TEMPLATE&&e._err(t,ze.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ze.endTagWithoutMatchingOpenElement)}function N4(e,t){e.openElements.pop(),e.insertionMode=de.AFTER_HEAD,e._processToken(t)}function Hxt(e,t){switch(t.tagID){case $.HTML:{zu(e,t);break}case $.BASEFONT:case $.BGSOUND:case $.HEAD:case $.LINK:case $.META:case $.NOFRAMES:case $.STYLE:{ip(e,t);break}case $.NOSCRIPT:{e._err(t,ze.nestedNoscriptInHead);break}default:P4(e,t)}}function qxt(e,t){switch(t.tagID){case $.NOSCRIPT:{e.openElements.pop(),e.insertionMode=de.IN_HEAD;break}case $.BR:{P4(e,t);break}default:e._err(t,ze.endTagWithoutMatchingOpenElement)}}function P4(e,t){const n=t.type===or.EOF?ze.openElementsLeftAfterEof:ze.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=de.IN_HEAD,e._processToken(t)}function Wxt(e,t){switch(t.tagID){case $.HTML:{zu(e,t);break}case $.BODY:{e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=de.IN_BODY;break}case $.FRAMESET:{e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_FRAMESET;break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{e._err(t,ze.abandonedHeadElementChild),e.openElements.push(e.headElement,$.HEAD),ip(e,t),e.openElements.remove(e.headElement);break}case $.HEAD:{e._err(t,ze.misplacedStartTagForHeadElement);break}default:D4(e,t)}}function Gxt(e,t){switch(t.tagID){case $.BODY:case $.HTML:case $.BR:{D4(e,t);break}case $.TEMPLATE:{Fx(e,t);break}default:e._err(t,ze.endTagWithoutMatchingOpenElement)}}function D4(e,t){e._insertFakeElement(Pe.BODY,$.BODY),e.insertionMode=de.IN_BODY,LM(e,t)}function LM(e,t){switch(t.type){case or.CHARACTER:{RNe(e,t);break}case or.WHITESPACE_CHARACTER:{kNe(e,t);break}case or.COMMENT:{fK(e,t);break}case or.START_TAG:{zu(e,t);break}case or.END_TAG:{MM(e,t);break}case or.EOF:{ONe(e,t);break}}}function kNe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function RNe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Yxt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Kxt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Xxt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_FRAMESET)}function Qxt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML)}function Jxt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),vNe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Xe.HTML)}function Zxt(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function e2t(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),n||(e.formElement=e.openElements.current))}function t2t(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===$.LI&&i===$.LI||(n===$.DD||n===$.DT)&&(i===$.DD||i===$.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==$.ADDRESS&&i!==$.DIV&&i!==$.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML)}function n2t(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.tokenizer.state=uo.PLAINTEXT}function r2t(e,t){e.openElements.hasInScope($.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.framesetOk=!1}function i2t(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Pe.A);n&&(ere(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function s2t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function o2t(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope($.NOBR)&&(ere(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function a2t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function u2t(e,t){e.treeAdapter.getDocumentMode(e.document)!==Kc.QUIRKS&&e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=de.IN_TABLE}function NNe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Xe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function PNe(e){const t=mNe(e,uv.TYPE);return t!=null&&t.toLowerCase()===Axt}function l2t(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Xe.HTML),PNe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function c2t(e,t){e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0}function f2t(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._appendElement(t,Xe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function d2t(e,t){t.tagName=Pe.IMG,t.tagID=$.IMG,NNe(e,t)}function h2t(e,t){e._insertElement(t,Xe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=uo.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=de.TEXT}function p2t(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,uo.RAWTEXT)}function m2t(e,t){e.framesetOk=!1,e._switchToTextParsing(t,uo.RAWTEXT)}function y1e(e,t){e._switchToTextParsing(t,uo.RAWTEXT)}function g2t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===de.IN_TABLE||e.insertionMode===de.IN_CAPTION||e.insertionMode===de.IN_TABLE_BODY||e.insertionMode===de.IN_ROW||e.insertionMode===de.IN_CELL?de.IN_SELECT_IN_TABLE:de.IN_SELECT}function y2t(e,t){e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML)}function v2t(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Xe.HTML)}function b2t(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion($.RTC),e._insertElement(t,Xe.HTML)}function _2t(e,t){e._reconstructActiveFormattingElements(),ANe(t),Zne(t),t.selfClosing?e._appendElement(t,Xe.MATHML):e._insertElement(t,Xe.MATHML),t.ackSelfClosing=!0}function w2t(e,t){e._reconstructActiveFormattingElements(),CNe(t),Zne(t),t.selfClosing?e._appendElement(t,Xe.SVG):e._insertElement(t,Xe.SVG),t.ackSelfClosing=!0}function v1e(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML)}function zu(e,t){switch(t.tagID){case $.I:case $.S:case $.B:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.SMALL:case $.STRIKE:case $.STRONG:{s2t(e,t);break}case $.A:{i2t(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{Jxt(e,t);break}case $.P:case $.DL:case $.OL:case $.UL:case $.DIV:case $.DIR:case $.NAV:case $.MAIN:case $.MENU:case $.ASIDE:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.DETAILS:case $.ADDRESS:case $.ARTICLE:case $.SECTION:case $.SUMMARY:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{Qxt(e,t);break}case $.LI:case $.DD:case $.DT:{t2t(e,t);break}case $.BR:case $.IMG:case $.WBR:case $.AREA:case $.EMBED:case $.KEYGEN:{NNe(e,t);break}case $.HR:{f2t(e,t);break}case $.RB:case $.RTC:{v2t(e,t);break}case $.RT:case $.RP:{b2t(e,t);break}case $.PRE:case $.LISTING:{Zxt(e,t);break}case $.XMP:{p2t(e,t);break}case $.SVG:{w2t(e,t);break}case $.HTML:{Yxt(e,t);break}case $.BASE:case $.LINK:case $.META:case $.STYLE:case $.TITLE:case $.SCRIPT:case $.BGSOUND:case $.BASEFONT:case $.TEMPLATE:{ip(e,t);break}case $.BODY:{Kxt(e,t);break}case $.FORM:{e2t(e,t);break}case $.NOBR:{o2t(e,t);break}case $.MATH:{_2t(e,t);break}case $.TABLE:{u2t(e,t);break}case $.INPUT:{l2t(e,t);break}case $.PARAM:case $.TRACK:case $.SOURCE:{c2t(e,t);break}case $.IMAGE:{d2t(e,t);break}case $.BUTTON:{r2t(e,t);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{a2t(e,t);break}case $.IFRAME:{m2t(e,t);break}case $.SELECT:{g2t(e,t);break}case $.OPTION:case $.OPTGROUP:{y2t(e,t);break}case $.NOEMBED:{y1e(e,t);break}case $.FRAMESET:{Xxt(e,t);break}case $.TEXTAREA:{h2t(e,t);break}case $.NOSCRIPT:{e.options.scriptingEnabled?y1e(e,t):v1e(e,t);break}case $.PLAINTEXT:{n2t(e,t);break}case $.COL:case $.TH:case $.TD:case $.TR:case $.HEAD:case $.FRAME:case $.TBODY:case $.TFOOT:case $.THEAD:case $.CAPTION:case $.COLGROUP:break;default:v1e(e,t)}}function x2t(e,t){if(e.openElements.hasInScope($.BODY)&&(e.insertionMode=de.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function E2t(e,t){e.openElements.hasInScope($.BODY)&&(e.insertionMode=de.AFTER_BODY,zNe(e,t))}function T2t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function S2t(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope($.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped($.FORM):n&&e.openElements.remove(n))}function A2t(e){e.openElements.hasInButtonScope($.P)||e._insertFakeElement(Pe.P,$.P),e._closePElement()}function C2t(e){e.openElements.hasInListItemScope($.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion($.LI),e.openElements.popUntilTagNamePopped($.LI))}function I2t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function k2t(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function R2t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function N2t(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Pe.BR,$.BR),e.openElements.pop(),e.framesetOk=!1}function DNe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==$.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function MM(e,t){switch(t.tagID){case $.A:case $.B:case $.I:case $.S:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.NOBR:case $.SMALL:case $.STRIKE:case $.STRONG:{ere(e,t);break}case $.P:{A2t(e);break}case $.DL:case $.UL:case $.OL:case $.DIR:case $.DIV:case $.NAV:case $.PRE:case $.MAIN:case $.MENU:case $.ASIDE:case $.BUTTON:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.ADDRESS:case $.ARTICLE:case $.DETAILS:case $.SECTION:case $.SUMMARY:case $.LISTING:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{T2t(e,t);break}case $.LI:{C2t(e);break}case $.DD:case $.DT:{I2t(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{k2t(e);break}case $.BR:{N2t(e);break}case $.BODY:{x2t(e,t);break}case $.HTML:{E2t(e,t);break}case $.FORM:{S2t(e);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{R2t(e,t);break}case $.TEMPLATE:{Fx(e,t);break}default:DNe(e,t)}}function ONe(e,t){e.tmplInsertionModeStack.length>0?UNe(e,t):tre(e,t)}function P2t(e,t){var n;t.tagID===$.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function D2t(e,t){e._err(t,ze.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function EV(e,t){if(INe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=de.IN_TABLE_TEXT,t.type){case or.CHARACTER:{LNe(e,t);break}case or.WHITESPACE_CHARACTER:{$Ne(e,t);break}}else IR(e,t)}function O2t(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_CAPTION}function $2t(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_COLUMN_GROUP}function L2t(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Pe.COLGROUP,$.COLGROUP),e.insertionMode=de.IN_COLUMN_GROUP,nre(e,t)}function M2t(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_TABLE_BODY}function F2t(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Pe.TBODY,$.TBODY),e.insertionMode=de.IN_TABLE_BODY,FM(e,t)}function B2t(e,t){e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function j2t(e,t){PNe(t)?e._appendElement(t,Xe.HTML):IR(e,t),t.ackSelfClosing=!0}function U2t(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Xe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function lS(e,t){switch(t.tagID){case $.TD:case $.TH:case $.TR:{F2t(e,t);break}case $.STYLE:case $.SCRIPT:case $.TEMPLATE:{ip(e,t);break}case $.COL:{L2t(e,t);break}case $.FORM:{U2t(e,t);break}case $.TABLE:{B2t(e,t);break}case $.TBODY:case $.TFOOT:case $.THEAD:{M2t(e,t);break}case $.INPUT:{j2t(e,t);break}case $.CAPTION:{O2t(e,t);break}case $.COLGROUP:{$2t(e,t);break}default:IR(e,t)}}function Vk(e,t){switch(t.tagID){case $.TABLE:{e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode());break}case $.TEMPLATE:{Fx(e,t);break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:IR(e,t)}}function IR(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,LM(e,t),e.fosterParentingEnabled=n}function $Ne(e,t){e.pendingCharacterTokens.push(t)}function LNe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function b3(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)IR(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const MNe=new Set([$.CAPTION,$.COL,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]);function z2t(e,t){const n=t.tagID;MNe.has(n)?e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_TABLE,lS(e,t)):zu(e,t)}function V2t(e,t){const n=t.tagID;switch(n){case $.CAPTION:case $.TABLE:{e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_TABLE,n===$.TABLE&&Vk(e,t));break}case $.BODY:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:MM(e,t)}}function nre(e,t){switch(t.tagID){case $.HTML:{zu(e,t);break}case $.COL:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case $.TEMPLATE:{ip(e,t);break}default:D$(e,t)}}function H2t(e,t){switch(t.tagID){case $.COLGROUP:{e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=de.IN_TABLE);break}case $.TEMPLATE:{Fx(e,t);break}case $.COL:break;default:D$(e,t)}}function D$(e,t){e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=de.IN_TABLE,e._processToken(t))}function FM(e,t){switch(t.tagID){case $.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_ROW;break}case $.TH:case $.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Pe.TR,$.TR),e.insertionMode=de.IN_ROW,BM(e,t);break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE,lS(e,t));break}default:lS(e,t)}}function dK(e,t){const n=t.tagID;switch(t.tagID){case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE);break}case $.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE,Vk(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:case $.TR:break;default:Vk(e,t)}}function BM(e,t){switch(t.tagID){case $.TH:case $.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Xe.HTML),e.insertionMode=de.IN_CELL,e.activeFormattingElements.insertMarker();break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,FM(e,t));break}default:lS(e,t)}}function FNe(e,t){switch(t.tagID){case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY);break}case $.TABLE:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,dK(e,t));break}case $.TBODY:case $.TFOOT:case $.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope($.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,dK(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:break;default:Vk(e,t)}}function q2t(e,t){const n=t.tagID;MNe.has(n)?(e.openElements.hasInTableScope($.TD)||e.openElements.hasInTableScope($.TH))&&(e._closeTableCell(),BM(e,t)):zu(e,t)}function W2t(e,t){const n=t.tagID;switch(n){case $.TD:case $.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_ROW);break}case $.TABLE:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),FNe(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:break;default:MM(e,t)}}function BNe(e,t){switch(t.tagID){case $.HTML:{zu(e,t);break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._insertElement(t,Xe.HTML);break}case $.OPTGROUP:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Xe.HTML);break}case $.INPUT:case $.KEYGEN:case $.TEXTAREA:case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),t.tagID!==$.SELECT&&e._processStartTag(t));break}case $.SCRIPT:case $.TEMPLATE:{ip(e,t);break}}}function jNe(e,t){switch(t.tagID){case $.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===$.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===$.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop();break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop();break}case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode());break}case $.TEMPLATE:{Fx(e,t);break}}}function G2t(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e._processStartTag(t)):BNe(e,t)}function Y2t(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e.onEndTag(t)):jNe(e,t)}function K2t(e,t){switch(t.tagID){case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{ip(e,t);break}case $.CAPTION:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.tmplInsertionModeStack[0]=de.IN_TABLE,e.insertionMode=de.IN_TABLE,lS(e,t);break}case $.COL:{e.tmplInsertionModeStack[0]=de.IN_COLUMN_GROUP,e.insertionMode=de.IN_COLUMN_GROUP,nre(e,t);break}case $.TR:{e.tmplInsertionModeStack[0]=de.IN_TABLE_BODY,e.insertionMode=de.IN_TABLE_BODY,FM(e,t);break}case $.TD:case $.TH:{e.tmplInsertionModeStack[0]=de.IN_ROW,e.insertionMode=de.IN_ROW,BM(e,t);break}default:e.tmplInsertionModeStack[0]=de.IN_BODY,e.insertionMode=de.IN_BODY,zu(e,t)}}function X2t(e,t){t.tagID===$.TEMPLATE&&Fx(e,t)}function UNe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):tre(e,t)}function Q2t(e,t){t.tagID===$.HTML?zu(e,t):O$(e,t)}function zNe(e,t){var n;if(t.tagID===$.HTML){if(e.fragmentContext||(e.insertionMode=de.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===$.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else O$(e,t)}function O$(e,t){e.insertionMode=de.IN_BODY,LM(e,t)}function J2t(e,t){switch(t.tagID){case $.HTML:{zu(e,t);break}case $.FRAMESET:{e._insertElement(t,Xe.HTML);break}case $.FRAME:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case $.NOFRAMES:{ip(e,t);break}}}function Z2t(e,t){t.tagID===$.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==$.FRAMESET&&(e.insertionMode=de.AFTER_FRAMESET))}function eEt(e,t){switch(t.tagID){case $.HTML:{zu(e,t);break}case $.NOFRAMES:{ip(e,t);break}}}function tEt(e,t){t.tagID===$.HTML&&(e.insertionMode=de.AFTER_AFTER_FRAMESET)}function nEt(e,t){t.tagID===$.HTML?zu(e,t):qD(e,t)}function qD(e,t){e.insertionMode=de.IN_BODY,LM(e,t)}function rEt(e,t){switch(t.tagID){case $.HTML:{zu(e,t);break}case $.NOFRAMES:{ip(e,t);break}}}function iEt(e,t){t.chars=bs,e._insertCharacters(t)}function sEt(e,t){e._insertCharacters(t),e.framesetOk=!1}function VNe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Xe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function oEt(e,t){if(wxt(t))VNe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Xe.MATHML?ANe(t):r===Xe.SVG&&(xxt(t),CNe(t)),Zne(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function aEt(e,t){if(t.tagID===$.P||t.tagID===$.BR){VNe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Xe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Pe.AREA,Pe.BASE,Pe.BASEFONT,Pe.BGSOUND,Pe.BR,Pe.COL,Pe.EMBED,Pe.FRAME,Pe.HR,Pe.IMG,Pe.INPUT,Pe.KEYGEN,Pe.LINK,Pe.META,Pe.PARAM,Pe.SOURCE,Pe.TRACK,Pe.WBR;const uEt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),b1e={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function HNe(e,t){const n=vEt(e),r=cNe("type",{handlers:{root:lEt,element:cEt,text:fEt,comment:WNe,doctype:dEt,raw:pEt},unknown:mEt}),i={parser:n?new g1e(b1e):g1e.getFragmentParser(void 0,b1e),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),FA(i,Q0());const s=n?i.parser.document:i.parser.getFragment(),o=wwt(s,{file:i.options.file});return i.stitches&&Kne(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function qNe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function lEt(e,t){qNe(e.children,t)}function cEt(e,t){gEt(e,t),qNe(e.children,t),yEt(e,t)}function fEt(e,t){const n={type:or.CHARACTER,chars:e.value,location:kR(e)};FA(t,Q0(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function dEt(e,t){const n={type:or.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:kR(e)};FA(t,Q0(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function hEt(e,t){t.stitches=!0;const n=bEt(e);if("children"in e&&"children"in n){const r=HNe({type:"root",children:e.children},t.options);n.children=r.children}WNe({type:"comment",value:{stitch:n}},t)}function WNe(e,t){const n=e.value,r={type:or.COMMENT,data:n,location:kR(e)};FA(t,Q0(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function pEt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,GNe(t,Q0(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function mEt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))hEt(n,t);else{let r="";throw uEt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function FA(e,t){GNe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=uo.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function GNe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function gEt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===uo.PLAINTEXT)return;FA(t,Q0(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:sw.html;i===sw.html&&n==="svg"&&(i=sw.svg);const s=Swt({...e,children:[]},{space:i===sw.svg?"svg":"html"}),o={type:or.START_TAG,tagName:n,tagID:MA(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:kR(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function yEt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Dwt.includes(n)||t.parser.tokenizer.state===uo.PLAINTEXT)return;FA(t,PM(e));const r={type:or.END_TAG,tagName:n,tagID:MA(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:kR(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===uo.RCDATA||t.parser.tokenizer.state===uo.RAWTEXT||t.parser.tokenizer.state===uo.SCRIPT_DATA)&&(t.parser.tokenizer.state=uo.DATA)}function vEt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function kR(e){const t=Q0(e)||{line:void 0,column:void 0,offset:void 0},n=PM(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function bEt(e){return"children"in e?uS({...e,children:[]}):uS(e)}function _Et(e){return function(t,n){return HNe(t,{...e,file:n})}}function $u({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return E.jsx(bb,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return E.jsx(Ue,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return E.jsx(Ws,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return E.jsx(Ws,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return E.jsx(Ws,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return E.jsx(Ws,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return E.jsx(Ws,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return E.jsx(Ws,{...s,order:6,...s,pb:12})},a({node:i,...s}){return E.jsx(yb,{...s,ref:void 0})},ul({node:i,...s}){return E.jsx(ao,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return E.jsx(ao,{type:"ordered",withPadding:!0,...o,pb:8})}};return E.jsx(uwt,{components:n,rehypePlugins:[_Et],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function WD({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return E.jsx($u,{text:n})}const G2=14;function wEt({completed:e,inProgress:t,rejected:n}){return E.jsxs(qt,{ml:4,gap:4,children:[E.jsx(us,{label:"Completed",children:E.jsx(ov,{variant:"light",color:"green",leftSection:E.jsx(y5e,{width:G2,height:G2,style:{paddingTop:1}}),pb:1,children:e})}),E.jsx(us,{label:"In Progress",children:E.jsx(ov,{variant:"light",color:"orange",leftSection:E.jsx(v5e,{width:G2,height:G2,style:{paddingTop:1}}),pb:1,children:t})}),E.jsx(us,{label:"Rejected",children:E.jsx(ov,{variant:"light",color:"red",leftSection:E.jsx(Mne,{width:G2,height:G2,style:{paddingTop:1}}),pb:1,children:n})})]})}const xEt="https://github.com/revisit-studies/study/tree/main/public/";function EEt({configName:e,config:t,url:n}){const{storageEngine:r}=yo(),[i,s]=R.useState(null);R.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=R.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=R.useState(null);R.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=R.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return E.jsx(SA,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?E.jsxs(E.Fragment,{children:[E.jsx(Ue,{fw:"bold",children:e}),E.jsxs(qt,{align:"center",direction:"row",children:[E.jsx(S4,{color:"red"}),E.jsx(Ue,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),E.jsx(WD,{issues:t.errors,type:"error"}),t.warnings.length>0&&E.jsxs(E.Fragment,{children:[E.jsxs(qt,{align:"center",direction:"row",children:[E.jsx(S4,{color:"orange"}),E.jsx(Ue,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),E.jsx(WD,{issues:t.warnings,type:"warning"})]})]}):E.jsxs(E.Fragment,{children:[E.jsx(qt,{direction:"row",justify:"space-between",children:E.jsx(Ue,{fw:"bold",children:t.studyMetadata.title})}),E.jsxs(Ue,{c:"dimmed",children:[E.jsx(Ue,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),E.jsx(Ue,{c:"dimmed",children:t.studyMetadata.description}),E.jsx(Ue,{c:"dimmed",ta:"right",style:{paddingRight:5},children:E.jsxs(yb,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${xEt}${n}`,children:["View source:"," ",n,E.jsx(w1t,{style:{width:$e(18),height:$e(18),marginLeft:$e(2),marginBottom:$e(-3)}})]})}),t.warnings.length>0&&E.jsxs(E.Fragment,{children:[E.jsxs(qt,{align:"center",direction:"row",children:[E.jsx(S4,{color:"orange"}),E.jsx(Ue,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),E.jsx(WD,{issues:t.warnings,type:"warning"})]}),E.jsx(AA,{my:"md"}),E.jsxs(qt,{direction:"row",gap:"sm",children:[E.jsxs(Ue,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&E.jsx(wEt,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&E.jsxs(Ue,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),E.jsxs(qt,{direction:"row",align:"end",gap:"sm",mt:"md",children:[E.jsx(on,{leftSection:E.jsx(g5e,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${vl}analysis/stats/${n}`,children:"Analyze & Manage Study"}),E.jsx(on,{leftSection:E.jsx(T1t,{}),component:"a",href:`${vl}${n}`,children:"Go to Study"})]})]})},e)}function Y2({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=x5e(n);return E.jsx(EEt,{configName:n,config:r,url:i},n)})}function TEt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=n.filter(l=>l.startsWith("demo-")),i=n.filter(l=>l.startsWith("tutorial-")),s=n.filter(l=>l.startsWith("example-")),o=n.filter(l=>l.startsWith("test-")),a=n.filter(l=>l.startsWith("library-")),u=n.filter(l=>!l.startsWith("demo-")&&!l.startsWith("tutorial-")&&!l.startsWith("example-")&&!l.startsWith("test-")&&!l.startsWith("library-"));return E.jsx(Oi.Main,{children:E.jsxs(yl,{size:"sm",px:0,children:[E.jsx(bb,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${vl}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),E.jsxs(Pr,{variant:"outline",defaultValue:u.length>0?"Others":"Demos",children:[E.jsxs(Pr.List,{children:[u.length>0&&E.jsx(Pr.Tab,{value:"Others",children:"Your Studies"}),E.jsx(Pr.Tab,{value:"Demos",children:"Demo Studies"}),E.jsx(Pr.Tab,{value:"Examples",children:"Example Studies"}),E.jsx(Pr.Tab,{value:"Tutorials",children:"Tutorials"}),E.jsx(Pr.Tab,{value:"Tests",children:"Tests"}),E.jsx(Pr.Tab,{value:"Libraries",children:"Libraries"})]}),u.length>0&&E.jsx(Pr.Panel,{value:"Others",children:E.jsx(Y2,{configNames:u,studyConfigs:t})}),E.jsxs(Pr.Panel,{value:"Demos",children:[E.jsx(Ue,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),E.jsx(Y2,{configNames:r,studyConfigs:t})]}),E.jsxs(Pr.Panel,{value:"Examples",children:[E.jsx(Ue,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),E.jsx(Y2,{configNames:s,studyConfigs:t})]}),E.jsxs(Pr.Panel,{value:"Tutorials",children:[E.jsx(Ue,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),E.jsx(Y2,{configNames:i,studyConfigs:t})]}),E.jsxs(Pr.Panel,{value:"Tests",children:[E.jsx(Ue,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),E.jsx(Y2,{configNames:o,studyConfigs:t})]}),E.jsxs(Pr.Panel,{value:"Libraries",children:[E.jsx(Ue,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish"}),E.jsx(Y2,{configNames:a,studyConfigs:t})]})]})]})})}var YNe={exports:{}},KNe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RR=R;function SEt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var AEt=typeof Object.is=="function"?Object.is:SEt,CEt=RR.useSyncExternalStore,IEt=RR.useRef,kEt=RR.useEffect,REt=RR.useMemo,NEt=RR.useDebugValue;KNe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=IEt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=REt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,AEt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=CEt(e,s[0],s[1]);return kEt(function(){o.hasValue=!0,o.value=a},[a]),NEt(a),a};YNe.exports=KNe;var PEt=YNe.exports,sf="default"in WO?ni:WO,_1e=Symbol.for("react-redux-context"),w1e=typeof globalThis<"u"?globalThis:{};function DEt(){if(!sf.createContext)return{};const e=w1e[_1e]??(w1e[_1e]=new Map);let t=e.get(sf.createContext);return t||(t=sf.createContext(null),e.set(sf.createContext,t)),t}var Av=DEt(),OEt=()=>{throw new Error("uSES not initialized!")};function rre(e=Av){return function(){return sf.useContext(e)}}var XNe=rre(),QNe=OEt,$Et=e=>{QNe=e},LEt=(e,t)=>e===t;function MEt(e=Av){const t=e===Av?XNe:rre(e),n=(r,i={})=>{const{equalityFn:s=LEt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();sf.useRef(!0);const d=sf.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=QNe(u.addNestedSub,a.getState,l||a.getState,d,s);return sf.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var FEt=MEt();function BEt(e){e()}function jEt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){BEt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var x1e={notify(){},get:()=>[]};function UEt(e,t){let n,r=x1e,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=jEt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=x1e)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var zEt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VEt=typeof navigator<"u"&&navigator.product==="ReactNative",HEt=zEt||VEt?sf.useLayoutEffect:sf.useEffect;function qEt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=sf.useMemo(()=>{const l=UEt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=sf.useMemo(()=>e.getState(),[e]);HEt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||Av;return sf.createElement(u.Provider,{value:o},n)}var WEt=qEt;function JNe(e=Av){const t=e===Av?XNe:rre(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var GEt=JNe();function YEt(e=Av){const t=e===Av?GEt:JNe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var ZNe=YEt();$Et(PEt.useSyncExternalStoreWithSelector);function Oa(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var KEt=typeof Symbol=="function"&&Symbol.observable||"@@observable",E1e=KEt,TV=()=>Math.random().toString(36).substring(7).split("").join("."),XEt={INIT:`@@redux/INIT${TV()}`,REPLACE:`@@redux/REPLACE${TV()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${TV()}`},$$=XEt;function ire(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function ePe(e,t,n){if(typeof e!="function")throw new Error(Oa(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Oa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Oa(1));return n(ePe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Oa(3));return i}function f(g){if(typeof g!="function")throw new Error(Oa(4));if(u)throw new Error(Oa(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Oa(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!ire(g))throw new Error(Oa(7));if(typeof g.type>"u")throw new Error(Oa(8));if(typeof g.type!="string")throw new Error(Oa(17));if(u)throw new Error(Oa(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Oa(10));r=g,d({type:$$.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Oa(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[E1e](){return this}}}return d({type:$$.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[E1e]:p}}function QEt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:$$.INIT})>"u")throw new Error(Oa(12));if(typeof n(void 0,{type:$$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Oa(13))})}function JEt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{QEt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Oa(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function L$(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function ZEt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Oa(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=L$(...a)(i.dispatch),{...i,dispatch:s}}}function eTt(e){return ire(e)&&"type"in e&&typeof e.type=="string"}var tPe=Symbol.for("immer-nothing"),T1e=Symbol.for("immer-draftable"),bf=Symbol.for("immer-state");function bh(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var cS=Object.getPrototypeOf;function Cv(e){return!!e&&!!e[bf]}function Ug(e){var t;return e?nPe(e)||Array.isArray(e)||!!e[T1e]||!!((t=e.constructor)!=null&&t[T1e])||UM(e)||zM(e):!1}var tTt=Object.prototype.constructor.toString();function nPe(e){if(!e||typeof e!="object")return!1;const t=cS(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===tTt}function M$(e,t){jM(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function jM(e){const t=e[bf];return t?t.type_:Array.isArray(e)?1:UM(e)?2:zM(e)?3:0}function hK(e,t){return jM(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function rPe(e,t,n){const r=jM(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function nTt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function UM(e){return e instanceof Map}function zM(e){return e instanceof Set}function I_(e){return e.copy_||e.base_}function pK(e,t){if(UM(e))return new Map(e);if(zM(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=nPe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[bf];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(cS(e),r)}else{const r=cS(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function sre(e,t=!1){return VM(e)||Cv(e)||!Ug(e)||(jM(e)>1&&(e.set=e.add=e.clear=e.delete=rTt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>sre(r,!0))),e}function rTt(){bh(2)}function VM(e){return Object.isFrozen(e)}var iTt={};function zw(e){const t=iTt[e];return t||bh(0,e),t}var Hk;function iPe(){return Hk}function sTt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function S1e(e,t){t&&(zw("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function mK(e){gK(e),e.drafts_.forEach(oTt),e.drafts_=null}function gK(e){e===Hk&&(Hk=e.parent_)}function A1e(e){return Hk=sTt(Hk,e)}function oTt(e){const t=e[bf];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function C1e(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[bf].modified_&&(mK(t),bh(4)),Ug(e)&&(e=F$(t,e),t.parent_||B$(t,e)),t.patches_&&zw("Patches").generateReplacementPatches_(n[bf].base_,e,t.patches_,t.inversePatches_)):e=F$(t,n,[]),mK(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==tPe?e:void 0}function F$(e,t,n){if(VM(t))return t;const r=t[bf];if(!r)return M$(t,(i,s)=>I1e(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return B$(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),M$(s,(a,u)=>I1e(e,r,i,a,u,n,o)),B$(e,i,!1),n&&e.patches_&&zw("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function I1e(e,t,n,r,i,s,o){if(Cv(i)){const a=s&&t&&t.type_!==3&&!hK(t.assigned_,r)?s.concat(r):void 0,u=F$(e,i,a);if(rPe(n,r,u),Cv(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Ug(i)&&!VM(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;F$(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&B$(e,i)}}function B$(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&sre(t,n)}function aTt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:iPe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=ore;n&&(i=[r],s=qk);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var ore={get(e,t){if(t===bf)return e;const n=I_(e);if(!hK(n,t))return uTt(e,n,t);const r=n[t];return e.finalized_||!Ug(r)?r:r===SV(e.base_,t)?(AV(e),e.copy_[t]=vK(r,e)):r},has(e,t){return t in I_(e)},ownKeys(e){return Reflect.ownKeys(I_(e))},set(e,t,n){const r=sPe(I_(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=SV(I_(e),t),s=i==null?void 0:i[bf];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(nTt(n,i)&&(n!==void 0||hK(e.base_,t)))return!0;AV(e),yK(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return SV(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,AV(e),yK(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=I_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){bh(11)},getPrototypeOf(e){return cS(e.base_)},setPrototypeOf(){bh(12)}},qk={};M$(ore,(e,t)=>{qk[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});qk.deleteProperty=function(e,t){return qk.set.call(this,e,t,void 0)};qk.set=function(e,t,n){return ore.set.call(this,e[0],t,n,e[0])};function SV(e,t){const n=e[bf];return(n?I_(n):e)[t]}function uTt(e,t,n){var i;const r=sPe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function sPe(e,t){if(!(t in e))return;let n=cS(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=cS(n)}}function yK(e){e.modified_||(e.modified_=!0,e.parent_&&yK(e.parent_))}function AV(e){e.copy_||(e.copy_=pK(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var lTt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&bh(6),r!==void 0&&typeof r!="function"&&bh(7);let i;if(Ug(t)){const s=A1e(this),o=vK(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?mK(s):gK(s)}return S1e(s,r),C1e(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===tPe&&(i=void 0),this.autoFreeze_&&sre(i,!0),r){const s=[],o=[];zw("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else bh(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ug(e)||bh(8),Cv(e)&&(e=oPe(e));const t=A1e(this),n=vK(e,void 0);return n[bf].isManual_=!0,gK(t),n}finishDraft(e,t){const n=e&&e[bf];(!n||!n.isManual_)&&bh(9);const{scope_:r}=n;return S1e(r,t),C1e(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=zw("Patches").applyPatches_;return Cv(e)?r(e,t):this.produce(e,i=>r(i,t))}};function vK(e,t){const n=UM(e)?zw("MapSet").proxyMap_(e,t):zM(e)?zw("MapSet").proxySet_(e,t):aTt(e,t);return(t?t.scope_:iPe()).drafts_.push(n),n}function oPe(e){return Cv(e)||bh(10,e),aPe(e)}function aPe(e){if(!Ug(e)||VM(e))return e;const t=e[bf];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=pK(e,t.scope_.immer_.useStrictShallowCopy_)}else n=pK(e,!0);return M$(n,(r,i)=>{rPe(n,r,aPe(i))}),t&&(t.finalized_=!1),n}var _f=new lTt,uPe=_f.produce;_f.produceWithPatches.bind(_f);_f.setAutoFreeze.bind(_f);_f.setUseStrictShallowCopy.bind(_f);_f.applyPatches.bind(_f);_f.createDraft.bind(_f);_f.finishDraft.bind(_f);function cTt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function fTt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function dTt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var k1e=e=>Array.isArray(e)?e:[e];function hTt(e){const t=Array.isArray(e[0])?e[0]:e;return dTt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function pTt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var mTt=class{constructor(e){this.value=e}deref(){return this.value}},gTt=typeof WeakRef<"u"?WeakRef:mTt,yTt=0,R1e=1;function AP(){return{s:yTt,v:void 0,o:null,p:null}}function are(e,t={}){let n=AP();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=AP(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=AP(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===R1e)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new gTt(c):c}return l.s=R1e,l.v=c,c}return o.clearCache=()=>{n=AP(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function lPe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),cTt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=are,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=k1e(d),y=k1e(p),v=hTt(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const S=pTt(v,arguments);return a=b.apply(null,S),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var cPe=lPe(are),vTt=Object.assign((e,t=cPe)=>{fTt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>vTt});function fPe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var bTt=fPe(),_Tt=fPe,wTt=(...e)=>{const t=lPe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(Cv(o)?oPe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};wTt(are);var xTt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?L$:L$.apply(null,arguments)};function fS(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(yc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>eTt(r)&&r.type===e,n}var dPe=class II extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,II.prototype)}static get[Symbol.species](){return II}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new II(...t[0].concat(this)):new II(...t.concat(this))}};function N1e(e){return Ug(e)?uPe(e,()=>{}):e}function P1e(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(yc(10));const r=n.insert(t,e);return e.set(t,r),r}function ETt(e){return typeof e=="boolean"}var TTt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new dPe;return n&&(ETt(n)?o.push(bTt):o.push(_Tt(n.extraArgument))),o},STt="RTK_autoBatch",hPe=e=>t=>{setTimeout(t,e)},ATt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:hPe(10),CTt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?ATt:e.type==="callback"?e.queueNotification:hPe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[STt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},ITt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new dPe(e);return r&&i.push(CTt(typeof r=="object"?r:void 0)),i};function kTt(e){const t=TTt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(ire(n))a=JEt(n);else throw new Error(yc(1));let u;typeof r=="function"?u=r(t):u=t();let l=L$;i&&(l=xTt({trace:!1,...typeof i=="object"&&i}));const c=ZEt(...u),f=ITt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return ePe(a,s,h)}function pPe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(yc(28));if(a in t)throw new Error(yc(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function RTt(e){return typeof e=="function"}function NTt(e,t){let[n,r,i]=pPe(t),s;if(RTt(e))s=()=>N1e(e());else{const a=N1e(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(Cv(c)){const h=f(c,u);return h===void 0?c:h}else{if(Ug(c))return uPe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(yc(9))}return d}}return c},a)}return o.getInitialState=s,o}var PTt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",DTt=(e=21)=>{let t="",n=e;for(;n--;)t+=PTt[Math.random()*64|0];return t},OTt=Symbol.for("rtk-slice-createasyncthunk");function $Tt(e,t){return`${e}/${t}`}function LTt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[OTt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(yc(11));const a=(typeof i.reducers=="function"?i.reducers(BTt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const x=typeof b=="string"?b:b.type;if(!x)throw new Error(yc(12));if(x in l.sliceCaseReducersByType)throw new Error(yc(13));return l.sliceCaseReducersByType[x]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],x={reducerName:b,type:$Tt(s,b),createNotation:typeof i.reducers=="function"};UTt(w)?VTt(x,w,c,t):jTt(x,w,c)});function f(){const[b={},w=[],x=void 0]=typeof i.extraReducers=="function"?pPe(i.extraReducers):[i.extraReducers],S={...b,...l.sliceCaseReducersByType};return NTt(i.initialState,A=>{for(let C in S)A.addCase(C,S[C]);for(let C of l.sliceMatchers)A.addMatcher(C.matcher,C.reducer);for(let C of w)A.addMatcher(C.matcher,C.reducer);x&&A.addDefaultCase(x)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function x(A){let C=A[b];return typeof C>"u"&&w&&(C=g()),C}function S(A=d){const C=P1e(h,w,{insert:()=>new WeakMap});return P1e(C,A,{insert:()=>{const N={};for(const[k,D]of Object.entries(i.selectors??{}))N[k]=MTt(D,A,g,w);return N}})}return{reducerPath:b,getSelectors:S,get selectors(){return S(x)},selectSlice:x}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...x}={}){const S=w??o;return b.inject({reducerPath:S,reducer:m},x),{...v,...y(S,!0)}}};return v}}function MTt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var FTt=LTt();function BTt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function jTt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!zTt(r))throw new Error(yc(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?fS(e,o):fS(e))}function UTt(e){return e._reducerDefinitionType==="asyncThunk"}function zTt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function VTt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(yc(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||CP,pending:a||CP,rejected:u||CP,settled:l||CP})}function CP(){}var HTt=(e,t)=>{if(typeof e!="function")throw new Error(yc(32))},ure="listenerMiddleware",qTt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=fS(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(yc(21));return HTt(s),{predicate:i,type:t,effect:s}},WTt=Object.assign(e=>{const{type:t,predicate:n,effect:r}=qTt(e);return{id:DTt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(yc(22))}}},{withTypes:()=>WTt}),GTt=Object.assign(fS(`${ure}/add`),{withTypes:()=>GTt});fS(`${ure}/removeAll`);var YTt=Object.assign(fS(`${ure}/remove`),{withTypes:()=>YTt});function yc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Wh(e){return e.components.flatMap(t=>typeof t=="string"?t:Wh(t))}function mPe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:mPe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function gPe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Wh(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Wh(e).length-1}];r+=1}else{const o=gPe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function lre(e,t){const n=gPe(e,t,0);return typeof n=="number"?null:n}function yPe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=yPe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function KTt(e,t){const n=yPe(e,t,0);return n.found?n.distance:-1}function vPe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...vPe(i,`${t}-${s}`))}),n}function cre(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>cre(n,`${t}-${r}`))}}async function XTt(e,t,n,r,i,s,o){const a=Wh(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=FTt({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setIframeAnswers:(p,m)=>{p.iframeAnswers=m.payload},setIframeProvenance:(p,m)=>{p.iframeProvenance=m.payload},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:y,val:v}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[y]:v}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:y,questionKey:v,value:b,isChecked:w,choiceOptions:x}=m.payload,S=((g=p.matrixAnswers[y])==null?void 0:g[v])??"";let A="";w?S.length>0?A=[...S.split("|"),b].sort((C,N)=>x.map(k=>k.value).indexOf(C)-x.map(k=>k.value).indexOf(N)).join("|"):A=`${b}`:A=S.split("|").filter(C=>C!==b).join("|"),p.matrixAnswers={...p.matrixAnswers,[y]:{...p.matrixAnswers[y],[v]:A}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:y,startTime:v,endTime:b,provenanceGraph:w,windowEvents:x,timedOut:S,incorrectAnswers:A,helpButtonClickedCount:C}=m;p.answers[g]={incorrectAnswers:A,answer:y,startTime:v,endTime:b,provenanceGraph:w,windowEvents:x,timedOut:S,helpButtonClickedCount:C}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:y,question:v}=m;p.answers[v].incorrectAnswers||(p.answers[v].incorrectAnswers={}),p.answers[v].incorrectAnswers[g]||(p.answers[v].incorrectAnswers[g]={id:g,value:[]}),p.answers[v].incorrectAnswers[g].value.push(y)}}});return{store:kTt({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const bPe=R.createContext(null);function bl(){return R.useContext(bPe).actions}const Dc=ZNe,Vr=FEt;function QTt(e){return Vr(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const JTt=cPe(e=>e.sequence,e=>Wh(e));function fre(){return Vr(JTt)}var _Pe={exports:{}};function kI(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var CV={exports:{}};const ZTt={},eSt=Object.freeze(Object.defineProperty({__proto__:null,default:ZTt},Symbol.toStringTag,{value:"Module"})),wPe=git(eSt);var D1e;function Fr(){return D1e||(D1e=1,function(e,t){(function(n,r){e.exports=r()})(Jt,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Jt<"u"&&Jt.crypto&&(s=Jt.crypto),!s&&typeof kI=="function")try{s=wPe}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(b){var w;return v.prototype=b,w=new v,v.prototype=null,w}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(v){var b=a(this);return v&&b.mixIn(v),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var b in v)v.hasOwnProperty(b)&&(this[b]=v[b]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(v,b){v=this.words=v||[],b!=i?this.sigBytes=b:this.sigBytes=v.length*4},toString:function(v){return(v||h).stringify(this)},concat:function(v){var b=this.words,w=v.words,x=this.sigBytes,S=v.sigBytes;if(this.clamp(),x%4)for(var A=0;A<S;A++){var C=w[A>>>2]>>>24-A%4*8&255;b[x+A>>>2]|=C<<24-(x+A)%4*8}else for(var N=0;N<S;N+=4)b[x+N>>>2]=w[N>>>2];return this.sigBytes+=S,this},clamp:function(){var v=this.words,b=this.sigBytes;v[b>>>2]&=4294967295<<32-b%4*8,v.length=r.ceil(b/4)},clone:function(){var v=c.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var b=[],w=0;w<v;w+=4)b.push(o());return new f.init(b,v)}}),d=u.enc={},h=d.Hex={stringify:function(v){for(var b=v.words,w=v.sigBytes,x=[],S=0;S<w;S++){var A=b[S>>>2]>>>24-S%4*8&255;x.push((A>>>4).toString(16)),x.push((A&15).toString(16))}return x.join("")},parse:function(v){for(var b=v.length,w=[],x=0;x<b;x+=2)w[x>>>3]|=parseInt(v.substr(x,2),16)<<24-x%8*4;return new f.init(w,b/2)}},p=d.Latin1={stringify:function(v){for(var b=v.words,w=v.sigBytes,x=[],S=0;S<w;S++){var A=b[S>>>2]>>>24-S%4*8&255;x.push(String.fromCharCode(A))}return x.join("")},parse:function(v){for(var b=v.length,w=[],x=0;x<b;x++)w[x>>>2]|=(v.charCodeAt(x)&255)<<24-x%4*8;return new f.init(w,b)}},m=d.Utf8={stringify:function(v){try{return decodeURIComponent(escape(p.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return p.parse(unescape(encodeURIComponent(v)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=m.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var b,w=this._data,x=w.words,S=w.sigBytes,A=this.blockSize,C=A*4,N=S/C;v?N=r.ceil(N):N=r.max((N|0)-this._minBufferSize,0);var k=N*A,D=r.min(k*4,S);if(k){for(var L=0;L<k;L+=A)this._doProcessBlock(x,L);b=x.splice(0,k),w.sigBytes-=D}return new f.init(b,D)},clone:function(){var v=c.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(v){return function(b,w){return new v.init(w).finalize(b)}},_createHmacHelper:function(v){return function(b,w){return new y.HMAC.init(v,w).finalize(b)}}});var y=u.algo={};return u}(Math);return n})}(CV)),CV.exports}var IV={exports:{}},O1e;function HM(){return O1e||(O1e=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(IV)),IV.exports}var kV={exports:{}},$1e;function tSt(){return $1e||($1e=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(kV)),kV.exports}var RV={exports:{}},L1e;function nSt(){return L1e||(L1e=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(RV)),RV.exports}var NV={exports:{}},M1e;function Bx(){return M1e||(M1e=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,y=p<<16|m<<8|g,v=0;v<4&&h+v*.75<c;v++)d.push(f.charAt(y>>>6*(3-v)&63));var b=f.charAt(64);if(b)for(;d.length%4;)d.push(b);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(NV)),NV.exports}var PV={exports:{}},F1e;function rSt(){return F1e||(F1e=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,y=c[p+2>>>2]>>>24-(p+2)%4*8&255,v=m<<16|g<<8|y,b=0;b<4&&p+b*.75<f;b++)h.push(d.charAt(v>>>6*(3-b)&63));var w=d.charAt(64);if(w)for(;h.length%4;)h.push(w);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(PV)),PV.exports}var DV={exports:{}},B1e;function jx(){return B1e||(B1e=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var y=0;y<16;y++){var v=g+y,b=m[v];m[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var w=this._hash.words,x=m[g+0],S=m[g+1],A=m[g+2],C=m[g+3],N=m[g+4],k=m[g+5],D=m[g+6],L=m[g+7],O=m[g+8],B=m[g+9],q=m[g+10],H=m[g+11],G=m[g+12],K=m[g+13],J=m[g+14],F=m[g+15],j=w[0],W=w[1],M=w[2],V=w[3];j=f(j,W,M,V,x,7,l[0]),V=f(V,j,W,M,S,12,l[1]),M=f(M,V,j,W,A,17,l[2]),W=f(W,M,V,j,C,22,l[3]),j=f(j,W,M,V,N,7,l[4]),V=f(V,j,W,M,k,12,l[5]),M=f(M,V,j,W,D,17,l[6]),W=f(W,M,V,j,L,22,l[7]),j=f(j,W,M,V,O,7,l[8]),V=f(V,j,W,M,B,12,l[9]),M=f(M,V,j,W,q,17,l[10]),W=f(W,M,V,j,H,22,l[11]),j=f(j,W,M,V,G,7,l[12]),V=f(V,j,W,M,K,12,l[13]),M=f(M,V,j,W,J,17,l[14]),W=f(W,M,V,j,F,22,l[15]),j=d(j,W,M,V,S,5,l[16]),V=d(V,j,W,M,D,9,l[17]),M=d(M,V,j,W,H,14,l[18]),W=d(W,M,V,j,x,20,l[19]),j=d(j,W,M,V,k,5,l[20]),V=d(V,j,W,M,q,9,l[21]),M=d(M,V,j,W,F,14,l[22]),W=d(W,M,V,j,N,20,l[23]),j=d(j,W,M,V,B,5,l[24]),V=d(V,j,W,M,J,9,l[25]),M=d(M,V,j,W,C,14,l[26]),W=d(W,M,V,j,O,20,l[27]),j=d(j,W,M,V,K,5,l[28]),V=d(V,j,W,M,A,9,l[29]),M=d(M,V,j,W,L,14,l[30]),W=d(W,M,V,j,G,20,l[31]),j=h(j,W,M,V,k,4,l[32]),V=h(V,j,W,M,O,11,l[33]),M=h(M,V,j,W,H,16,l[34]),W=h(W,M,V,j,J,23,l[35]),j=h(j,W,M,V,S,4,l[36]),V=h(V,j,W,M,N,11,l[37]),M=h(M,V,j,W,L,16,l[38]),W=h(W,M,V,j,q,23,l[39]),j=h(j,W,M,V,K,4,l[40]),V=h(V,j,W,M,x,11,l[41]),M=h(M,V,j,W,C,16,l[42]),W=h(W,M,V,j,D,23,l[43]),j=h(j,W,M,V,B,4,l[44]),V=h(V,j,W,M,G,11,l[45]),M=h(M,V,j,W,F,16,l[46]),W=h(W,M,V,j,A,23,l[47]),j=p(j,W,M,V,x,6,l[48]),V=p(V,j,W,M,L,10,l[49]),M=p(M,V,j,W,J,15,l[50]),W=p(W,M,V,j,k,21,l[51]),j=p(j,W,M,V,G,6,l[52]),V=p(V,j,W,M,C,10,l[53]),M=p(M,V,j,W,q,15,l[54]),W=p(W,M,V,j,S,21,l[55]),j=p(j,W,M,V,O,6,l[56]),V=p(V,j,W,M,F,10,l[57]),M=p(M,V,j,W,D,15,l[58]),W=p(W,M,V,j,K,21,l[59]),j=p(j,W,M,V,N,6,l[60]),V=p(V,j,W,M,H,10,l[61]),M=p(M,V,j,W,A,15,l[62]),W=p(W,M,V,j,B,21,l[63]),w[0]=w[0]+j|0,w[1]=w[1]+W|0,w[2]=w[2]+M|0,w[3]=w[3]+V|0},_doFinalize:function(){var m=this._data,g=m.words,y=this._nDataBytes*8,v=m.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=r.floor(y/4294967296),w=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var x=this._hash,S=x.words,A=0;A<4;A++){var C=S[A];S[A]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360}return x},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,y,v,b,w,x){var S=m+(g&y|~g&v)+b+x;return(S<<w|S>>>32-w)+g}function d(m,g,y,v,b,w,x){var S=m+(g&v|y&~v)+b+x;return(S<<w|S>>>32-w)+g}function h(m,g,y,v,b,w,x){var S=m+(g^y^v)+b+x;return(S<<w|S>>>32-w)+g}function p(m,g,y,v,b,w,x){var S=m+(y^(g|~v))+b+x;return(S<<w|S>>>32-w)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(DV)),DV.exports}var OV={exports:{}},j1e;function xPe(){return j1e||(j1e=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)u[v]=c[f+v]|0;else{var b=u[v-3]^u[v-8]^u[v-14]^u[v-16];u[v]=b<<1|b>>>31}var w=(h<<5|h>>>27)+y+u[v];v<20?w+=(p&m|~p&g)+1518500249:v<40?w+=(p^m^g)+1859775393:v<60?w+=(p&m|p&g|m&g)-1894007588:w+=(p^m^g)-899497514,y=g,g=m,m=p<<30|p>>>2,p=h,h=w}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(OV)),OV.exports}var $V={exports:{}},U1e;function dre(){return U1e||(U1e=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(y){for(var v=r.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}function p(y){return(y-(y|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],y=m[1],v=m[2],b=m[3],w=m[4],x=m[5],S=m[6],A=m[7],C=0;C<64;C++){if(C<16)f[C]=h[p+C]|0;else{var N=f[C-15],k=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,D=f[C-2],L=(D<<15|D>>>17)^(D<<13|D>>>19)^D>>>10;f[C]=k+f[C-7]+L+f[C-16]}var O=w&x^~w&S,B=g&y^g&v^y&v,q=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),H=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),G=A+H+O+c[C]+f[C],K=q+B;A=S,S=x,x=w,w=b+G|0,b=v,v=y,y=g,g=G+K|0}m[0]=m[0]+g|0,m[1]=m[1]+y|0,m[2]=m[2]+v|0,m[3]=m[3]+b|0,m[4]=m[4]+w|0,m[5]=m[5]+x|0,m[6]=m[6]+S|0,m[7]=m[7]+A|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}($V)),$V.exports}var LV={exports:{}},z1e;function iSt(){return z1e||(z1e=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),dre())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(LV)),LV.exports}var MV={exports:{}},V1e;function EPe(){return V1e||(V1e=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),HM())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],w=g[3],x=g[4],S=g[5],A=g[6],C=g[7],N=y.high,k=y.low,D=v.high,L=v.low,O=b.high,B=b.low,q=w.high,H=w.low,G=x.high,K=x.low,J=S.high,F=S.low,j=A.high,W=A.low,M=C.high,V=C.low,Q=N,se=k,be=D,he=L,Ce=O,De=B,rt=q,Re=H,Tt=G,Ze=K,It=J,mt=F,Se=j,Fe=W,st=M,yt=V,Nt=0;Nt<80;Nt++){var Je,xe,kt=d[Nt];if(Nt<16)xe=kt.high=p[m+Nt*2]|0,Je=kt.low=p[m+Nt*2+1]|0;else{var Rt=d[Nt-15],Ee=Rt.high,Oe=Rt.low,ot=(Ee>>>1|Oe<<31)^(Ee>>>8|Oe<<24)^Ee>>>7,_t=(Oe>>>1|Ee<<31)^(Oe>>>8|Ee<<24)^(Oe>>>7|Ee<<25),jt=d[Nt-2],Un=jt.high,hr=jt.low,Sr=(Un>>>19|hr<<13)^(Un<<3|hr>>>29)^Un>>>6,_i=(hr>>>19|Un<<13)^(hr<<3|Un>>>29)^(hr>>>6|Un<<26),Sn=d[Nt-7],zn=Sn.high,pr=Sn.low,yr=d[Nt-16],ea=yr.high,rs=yr.low;Je=_t+pr,xe=ot+zn+(Je>>>0<_t>>>0?1:0),Je=Je+_i,xe=xe+Sr+(Je>>>0<_i>>>0?1:0),Je=Je+rs,xe=xe+ea+(Je>>>0<rs>>>0?1:0),kt.high=xe,kt.low=Je}var ms=Tt&It^~Tt&Se,Ls=Ze&mt^~Ze&Fe,Hr=Q&be^Q&Ce^be&Ce,gs=se&he^se&De^he&De,Mc=(Q>>>28|se<<4)^(Q<<30|se>>>2)^(Q<<25|se>>>7),ta=(se>>>28|Q<<4)^(se<<30|Q>>>2)^(se<<25|Q>>>7),Vu=(Tt>>>14|Ze<<18)^(Tt>>>18|Ze<<14)^(Tt<<23|Ze>>>9),Br=(Ze>>>14|Tt<<18)^(Ze>>>18|Tt<<14)^(Ze<<23|Tt>>>9),ki=f[Nt],mi=ki.high,eo=ki.low,oi=yt+Br,Ri=st+Vu+(oi>>>0<yt>>>0?1:0),oi=oi+Ls,Ri=Ri+ms+(oi>>>0<Ls>>>0?1:0),oi=oi+eo,Ri=Ri+mi+(oi>>>0<eo>>>0?1:0),oi=oi+Je,Ri=Ri+xe+(oi>>>0<Je>>>0?1:0),me=ta+gs,ue=Mc+Hr+(me>>>0<ta>>>0?1:0);st=Se,yt=Fe,Se=It,Fe=mt,It=Tt,mt=Ze,Ze=Re+oi|0,Tt=rt+Ri+(Ze>>>0<Re>>>0?1:0)|0,rt=Ce,Re=De,Ce=be,De=he,be=Q,he=se,se=oi+me|0,Q=Ri+ue+(se>>>0<oi>>>0?1:0)|0}k=y.low=k+se,y.high=N+Q+(k>>>0<se>>>0?1:0),L=v.low=L+he,v.high=D+be+(L>>>0<he>>>0?1:0),B=b.low=B+De,b.high=O+Ce+(B>>>0<De>>>0?1:0),H=w.low=H+Re,w.high=q+rt+(H>>>0<Re>>>0?1:0),K=x.low=K+Ze,x.high=G+Tt+(K>>>0<Ze>>>0?1:0),F=S.low=F+mt,S.high=J+It+(F>>>0<mt>>>0?1:0),W=A.low=W+Fe,A.high=j+Se+(W>>>0<Fe>>>0?1:0),V=C.low=V+yt,C.high=M+st+(V>>>0<yt>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,y=p.sigBytes*8;m[y>>>5]|=128<<24-y%32,m[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(y+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var v=this._hash.toX32();return v},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(MV)),MV.exports}var FV={exports:{}},H1e;function sSt(){return H1e||(H1e=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),HM(),EPe())})(Jt,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(FV)),FV.exports}var BV={exports:{}},q1e;function oSt(){return q1e||(q1e=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),HM())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,y=0,v=0;v<24;v++){f[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,w=(2*g+3*y)%5;g=b,y=w}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var x=1,S=0;S<24;S++){for(var A=0,C=0,N=0;N<7;N++){if(x&1){var k=(1<<N)-1;k<32?C^=1<<k:A^=1<<k-32}x&128?x=x<<1^113:x<<=1}h[S]=l.create(A,C)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,y){for(var v=this._state,b=this.blockSize/2,w=0;w<b;w++){var x=g[y+2*w],S=g[y+2*w+1];x=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;var A=v[w];A.high^=S,A.low^=x}for(var C=0;C<24;C++){for(var N=0;N<5;N++){for(var k=0,D=0,L=0;L<5;L++){var A=v[N+5*L];k^=A.high,D^=A.low}var O=p[N];O.high=k,O.low=D}for(var N=0;N<5;N++)for(var B=p[(N+4)%5],q=p[(N+1)%5],H=q.high,G=q.low,k=B.high^(H<<1|G>>>31),D=B.low^(G<<1|H>>>31),L=0;L<5;L++){var A=v[N+5*L];A.high^=k,A.low^=D}for(var K=1;K<25;K++){var k,D,A=v[K],J=A.high,F=A.low,j=f[K];j<32?(k=J<<j|F>>>32-j,D=F<<j|J>>>32-j):(k=F<<j-32|J>>>64-j,D=J<<j-32|F>>>64-j);var W=p[d[K]];W.high=k,W.low=D}var M=p[0],V=v[0];M.high=V.high,M.low=V.low;for(var N=0;N<5;N++)for(var L=0;L<5;L++){var K=N+5*L,A=v[K],Q=p[K],se=p[(N+1)%5+5*L],be=p[(N+2)%5+5*L];A.high=Q.high^~se.high&be.high,A.low=Q.low^~se.low&be.low}var A=v[0],he=h[C];A.high^=he.high,A.low^=he.low}},_doFinalize:function(){var g=this._data,y=g.words;this._nDataBytes*8;var v=g.sigBytes*8,b=this.blockSize*32;y[v>>>5]|=1<<24-v%32,y[(r.ceil((v+1)/b)*b>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var w=this._state,x=this.cfg.outputLength/8,S=x/8,A=[],C=0;C<S;C++){var N=w[C],k=N.high,D=N.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,A.push(D),A.push(k)}return new o.init(A,x)},clone:function(){for(var g=a.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(BV)),BV.exports}var jV={exports:{}},W1e;function aSt(){return W1e||(W1e=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(S,A){for(var C=0;C<16;C++){var N=A+C,k=S[N];S[N]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var D=this._hash.words,L=h.words,O=p.words,B=l.words,q=c.words,H=f.words,G=d.words,K,J,F,j,W,M,V,Q,se,be;M=K=D[0],V=J=D[1],Q=F=D[2],se=j=D[3],be=W=D[4];for(var he,C=0;C<80;C+=1)he=K+S[A+B[C]]|0,C<16?he+=g(J,F,j)+L[0]:C<32?he+=y(J,F,j)+L[1]:C<48?he+=v(J,F,j)+L[2]:C<64?he+=b(J,F,j)+L[3]:he+=w(J,F,j)+L[4],he=he|0,he=x(he,H[C]),he=he+W|0,K=W,W=j,j=x(F,10),F=J,J=he,he=M+S[A+q[C]]|0,C<16?he+=w(V,Q,se)+O[0]:C<32?he+=b(V,Q,se)+O[1]:C<48?he+=v(V,Q,se)+O[2]:C<64?he+=y(V,Q,se)+O[3]:he+=g(V,Q,se)+O[4],he=he|0,he=x(he,G[C]),he=he+be|0,M=be,be=se,se=x(Q,10),Q=V,V=he;he=D[1]+F+se|0,D[1]=D[2]+j+be|0,D[2]=D[3]+W+M|0,D[3]=D[4]+K+V|0,D[4]=D[0]+J+Q|0,D[0]=he},_doFinalize:function(){var S=this._data,A=S.words,C=this._nDataBytes*8,N=S.sigBytes*8;A[N>>>5]|=128<<24-N%32,A[(N+64>>>9<<4)+14]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,S.sigBytes=(A.length+1)*4,this._process();for(var k=this._hash,D=k.words,L=0;L<5;L++){var O=D[L];D[L]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return k},clone:function(){var S=a.clone.call(this);return S._hash=this._hash.clone(),S}});function g(S,A,C){return S^A^C}function y(S,A,C){return S&A|~S&C}function v(S,A,C){return(S|~A)^C}function b(S,A,C){return S&C|A&~C}function w(S,A,C){return S^(A|~C)}function x(S,A){return S<<A|S>>>32-A}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(jV)),jV.exports}var UV={exports:{}},G1e;function hre(){return G1e||(G1e=1,function(e,t){(function(n,r){e.exports=r(Fr())})(Jt,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,y=0;y<f;y++)m[y]^=1549556828,g[y]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(UV)),UV.exports}var zV={exports:{}},Y1e;function uSt(){return Y1e||(Y1e=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),dre(),hre())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),y=m.words,v=g.words,b=h.keySize,w=h.iterations;y.length<b;){var x=p.update(d).finalize(g);p.reset();for(var S=x.words,A=S.length,C=x,N=1;N<w;N++){C=p.finalize(C),p.reset();for(var k=C.words,D=0;D<A;D++)S[D]^=k[D]}m.concat(x),v[0]++}return m.sigBytes=b*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(zV)),zV.exports}var VV={exports:{}},K1e;function Sb(){return K1e||(K1e=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),xPe(),hre())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,y=h.keySize,v=h.iterations;g.length<y;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var b=1;b<v;b++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=y*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(VV)),VV.exports}var HV={exports:{}},X1e;function Ta(){return X1e||(X1e=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Sb())})(Jt,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(k,D){return this.create(this._ENC_XFORM_MODE,k,D)},createDecryptor:function(k,D){return this.create(this._DEC_XFORM_MODE,k,D)},init:function(k,D,L){this.cfg=this.cfg.extend(L),this._xformMode=k,this._key=D,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var D=this._doFinalize();return D},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(D){return typeof D=="string"?N:S}return function(D){return{encrypt:function(L,O,B){return k(O).encrypt(D,L,O,B)},decrypt:function(L,O,B){return k(O).decrypt(D,L,O,B)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(k,D){return this.Encryptor.create(k,D)},createDecryptor:function(k,D){return this.Decryptor.create(k,D)},init:function(k,D){this._cipher=k,this._iv=D}}),g=p.CBC=function(){var k=m.extend();k.Encryptor=k.extend({processBlock:function(L,O){var B=this._cipher,q=B.blockSize;D.call(this,L,O,q),B.encryptBlock(L,O),this._prevBlock=L.slice(O,O+q)}}),k.Decryptor=k.extend({processBlock:function(L,O){var B=this._cipher,q=B.blockSize,H=L.slice(O,O+q);B.decryptBlock(L,O),D.call(this,L,O,q),this._prevBlock=H}});function D(L,O,B){var q,H=this._iv;H?(q=H,this._iv=r):q=this._prevBlock;for(var G=0;G<B;G++)L[O+G]^=q[G]}return k}(),y=i.pad={},v=y.Pkcs7={pad:function(k,D){for(var L=D*4,O=L-k.sigBytes%L,B=O<<24|O<<16|O<<8|O,q=[],H=0;H<O;H+=4)q.push(B);var G=a.create(q,O);k.concat(G)},unpad:function(k){var D=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=D}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:v}),reset:function(){var k;h.reset.call(this);var D=this.cfg,L=D.iv,O=D.mode;this._xformMode==this._ENC_XFORM_MODE?k=O.createEncryptor:(k=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,L&&L.words):(this._mode=k.call(O,this,L&&L.words),this._mode.__creator=k)},_doProcessBlock:function(k,D){this._mode.processBlock(k,D)},_doFinalize:function(){var k,D=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(D.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),D.unpad(k)),k},blockSize:128/32});var b=s.CipherParams=o.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),w=i.format={},x=w.OpenSSL={stringify:function(k){var D,L=k.ciphertext,O=k.salt;return O?D=a.create([1398893684,1701076831]).concat(O).concat(L):D=L,D.toString(c)},parse:function(k){var D,L=c.parse(k),O=L.words;return O[0]==1398893684&&O[1]==1701076831&&(D=a.create(O.slice(2,4)),O.splice(0,4),L.sigBytes-=16),b.create({ciphertext:L,salt:D})}},S=s.SerializableCipher=o.extend({cfg:o.extend({format:x}),encrypt:function(k,D,L,O){O=this.cfg.extend(O);var B=k.createEncryptor(L,O),q=B.finalize(D),H=B.cfg;return b.create({ciphertext:q,key:L,iv:H.iv,algorithm:k,mode:H.mode,padding:H.padding,blockSize:k.blockSize,formatter:O.format})},decrypt:function(k,D,L,O){O=this.cfg.extend(O),D=this._parse(D,O.format);var B=k.createDecryptor(L,O).finalize(D.ciphertext);return B},_parse:function(k,D){return typeof k=="string"?D.parse(k,this):k}}),A=i.kdf={},C=A.OpenSSL={execute:function(k,D,L,O,B){if(O||(O=a.random(64/8)),B)var q=d.create({keySize:D+L,hasher:B}).compute(k,O);else var q=d.create({keySize:D+L}).compute(k,O);var H=a.create(q.words.slice(D),L*4);return q.sigBytes=D*4,b.create({key:q,iv:H,salt:O})}},N=s.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:C}),encrypt:function(k,D,L,O){O=this.cfg.extend(O);var B=O.kdf.execute(L,k.keySize,k.ivSize,O.salt,O.hasher);O.iv=B.iv;var q=S.encrypt.call(this,k,D,B.key,O);return q.mixIn(B),q},decrypt:function(k,D,L,O){O=this.cfg.extend(O),D=this._parse(D,O.format);var B=O.kdf.execute(L,k.keySize,k.ivSize,D.salt,O.hasher);O.iv=B.iv;var q=S.decrypt.call(this,k,D,B.key,O);return q}})}()})}(HV)),HV.exports}var qV={exports:{}},Q1e;function lSt(){return Q1e||(Q1e=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Ta())})(Jt,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(qV)),qV.exports}var WV={exports:{}},J1e;function cSt(){return J1e||(J1e=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Ta())})(Jt,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(WV)),WV.exports}var GV={exports:{}},Z1e;function fSt(){return Z1e||(Z1e=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Ta())})(Jt,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(GV)),GV.exports}var YV={exports:{}},eye;function dSt(){return eye||(eye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Ta())})(Jt,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(YV)),YV.exports}var KV={exports:{}},tye;function hSt(){return tye||(tye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Ta())})(Jt,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(KV)),KV.exports}var XV={exports:{}},nye;function pSt(){return nye||(nye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Ta())})(Jt,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(XV)),XV.exports}var QV={exports:{}},rye;function mSt(){return rye||(rye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Ta())})(Jt,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(QV)),QV.exports}var JV={exports:{}},iye;function gSt(){return iye||(iye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Ta())})(Jt,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(JV)),JV.exports}var ZV={exports:{}},sye;function ySt(){return sye||(sye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Ta())})(Jt,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(ZV)),ZV.exports}var eH={exports:{}},oye;function vSt(){return oye||(oye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Ta())})(Jt,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(eH)),eH.exports}var tH={exports:{}},aye;function bSt(){return aye||(aye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Ta())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(tH)),tH.exports}var nH={exports:{}},uye;function _St(){return uye||(uye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Bx(),jx(),Sb(),Ta())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var b=[],w=0;w<256;w++)w<128?b[w]=w<<1:b[w]=w<<1^283;for(var x=0,S=0,w=0;w<256;w++){var A=S^S<<1^S<<2^S<<3^S<<4;A=A>>>8^A&255^99,a[x]=A,u[A]=x;var C=b[x],N=b[C],k=b[N],D=b[A]*257^A*16843008;l[x]=D<<24|D>>>8,c[x]=D<<16|D>>>16,f[x]=D<<8|D>>>24,d[x]=D;var D=k*16843009^N*65537^C*257^x*16843008;h[A]=D<<24|D>>>8,p[A]=D<<16|D>>>16,m[A]=D<<8|D>>>24,g[A]=D,x?(x=C^b[b[b[k^C]]],S^=b[b[S]]):x=S=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=s.extend({_doReset:function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,x=w.words,S=w.sigBytes/4,A=this._nRounds=S+6,C=(A+1)*4,N=this._keySchedule=[],k=0;k<C;k++)k<S?N[k]=x[k]:(b=N[k-1],k%S?S>6&&k%S==4&&(b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255]):(b=b<<8|b>>>24,b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255],b^=y[k/S|0]<<24),N[k]=N[k-S]^b);for(var D=this._invKeySchedule=[],L=0;L<C;L++){var k=C-L;if(L%4)var b=N[k];else var b=N[k-4];L<4||k<=4?D[L]=b:D[L]=h[a[b>>>24]]^p[a[b>>>16&255]]^m[a[b>>>8&255]]^g[a[b&255]]}}},encryptBlock:function(b,w){this._doCryptBlock(b,w,this._keySchedule,l,c,f,d,a)},decryptBlock:function(b,w){var x=b[w+1];b[w+1]=b[w+3],b[w+3]=x,this._doCryptBlock(b,w,this._invKeySchedule,h,p,m,g,u);var x=b[w+1];b[w+1]=b[w+3],b[w+3]=x},_doCryptBlock:function(b,w,x,S,A,C,N,k){for(var D=this._nRounds,L=b[w]^x[0],O=b[w+1]^x[1],B=b[w+2]^x[2],q=b[w+3]^x[3],H=4,G=1;G<D;G++){var K=S[L>>>24]^A[O>>>16&255]^C[B>>>8&255]^N[q&255]^x[H++],J=S[O>>>24]^A[B>>>16&255]^C[q>>>8&255]^N[L&255]^x[H++],F=S[B>>>24]^A[q>>>16&255]^C[L>>>8&255]^N[O&255]^x[H++],j=S[q>>>24]^A[L>>>16&255]^C[O>>>8&255]^N[B&255]^x[H++];L=K,O=J,B=F,q=j}var K=(k[L>>>24]<<24|k[O>>>16&255]<<16|k[B>>>8&255]<<8|k[q&255])^x[H++],J=(k[O>>>24]<<24|k[B>>>16&255]<<16|k[q>>>8&255]<<8|k[L&255])^x[H++],F=(k[B>>>24]<<24|k[q>>>16&255]<<16|k[L>>>8&255]<<8|k[O&255])^x[H++],j=(k[q>>>24]<<24|k[L>>>16&255]<<16|k[O>>>8&255]<<8|k[B&255])^x[H++];b[w]=K,b[w+1]=J,b[w+2]=F,b[w+3]=j},keySize:256/32});r.AES=s._createHelper(v)}(),n.AES})}(nH)),nH.exports}var rH={exports:{}},lye;function wSt(){return lye||(lye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Bx(),jx(),Sb(),Ta())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var y=this._key,v=y.words,b=[],w=0;w<56;w++){var x=u[w]-1;b[w]=v[x>>>5]>>>31-x%32&1}for(var S=this._subKeys=[],A=0;A<16;A++){for(var C=S[A]=[],N=c[A],w=0;w<24;w++)C[w/6|0]|=b[(l[w]-1+N)%28]<<31-w%6,C[4+(w/6|0)]|=b[28+(l[w+24]-1+N)%28]<<31-w%6;C[0]=C[0]<<1|C[0]>>>31;for(var w=1;w<7;w++)C[w]=C[w]>>>(w-1)*4+3;C[7]=C[7]<<5|C[7]>>>27}for(var k=this._invSubKeys=[],w=0;w<16;w++)k[w]=S[15-w]},encryptBlock:function(y,v){this._doCryptBlock(y,v,this._subKeys)},decryptBlock:function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},_doCryptBlock:function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var w=0;w<16;w++){for(var x=b[w],S=this._lBlock,A=this._rBlock,C=0,N=0;N<8;N++)C|=f[N][((A^x[N])&d[N])>>>0];this._lBlock=A,this._rBlock=S^C}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}function m(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),w=v.length<4?v.slice(0,2):v.slice(2,4),x=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=h.createEncryptor(s.create(b)),this._des2=h.createEncryptor(s.create(w)),this._des3=h.createEncryptor(s.create(x))},encryptBlock:function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},decryptBlock:function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(rH)),rH.exports}var iH={exports:{}},cye;function xSt(){return cye||(cye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Bx(),jx(),Sb(),Ta())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,y=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+y)%256;var v=h[p];h[p]=h[m],h[m]=v}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(iH)),iH.exports}var sH={exports:{}},fye;function ESt(){return fye||(fye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Bx(),jx(),Sb(),Ta())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var y=h.words,v=y[0],b=y[1],w=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,x=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=w>>>16|x&4294901760,A=x<<16|w&65535;g[0]^=w,g[1]^=S,g[2]^=x,g[3]^=A,g[4]^=w,g[5]^=S,g[6]^=x,g[7]^=A;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(sH)),sH.exports}var oH={exports:{}},dye;function TSt(){return dye||(dye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Bx(),jx(),Sb(),Ta())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var y=h.words,v=y[0],b=y[1],w=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,x=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=w>>>16|x&4294901760,A=x<<16|w&65535;m[0]^=w,m[1]^=S,m[2]^=x,m[3]^=A,m[4]^=w,m[5]^=S,m[6]^=x,m[7]^=A;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(oH)),oH.exports}var aH={exports:{}},hye;function SSt(){return hye||(hye=1,function(e,t){(function(n,r,i){e.exports=r(Fr(),Bx(),jx(),Sb(),Ta())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,y){let v=y>>24&255,b=y>>16&255,w=y>>8&255,x=y&255,S=g.sbox[0][v]+g.sbox[1][b];return S=S^g.sbox[2][w],S=S+g.sbox[3][x],S}function d(g,y,v){let b=y,w=v,x;for(let S=0;S<a;++S)b=b^g.pbox[S],w=f(g,b)^w,x=b,b=w,w=x;return x=b,b=w,w=x,w=w^g.pbox[a],b=b^g.pbox[a+1],{left:b,right:w}}function h(g,y,v){let b=y,w=v,x;for(let S=a+1;S>1;--S)b=b^g.pbox[S],w=f(g,b)^w,x=b,b=w,w=x;return x=b,b=w,w=x,w=w^g.pbox[1],b=b^g.pbox[0],{left:b,right:w}}function p(g,y,v){for(let A=0;A<4;A++){g.sbox[A]=[];for(let C=0;C<256;C++)g.sbox[A][C]=l[A][C]}let b=0;for(let A=0;A<a+2;A++)g.pbox[A]=u[A]^y[b],b++,b>=v&&(b=0);let w=0,x=0,S=0;for(let A=0;A<a+2;A+=2)S=d(g,w,x),w=S.left,x=S.right,g.pbox[A]=w,g.pbox[A+1]=x;for(let A=0;A<4;A++)for(let C=0;C<256;C+=2)S=d(g,w,x),w=S.left,x=S.right,g.sbox[A][C]=w,g.sbox[A][C+1]=x;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;p(c,y,v)}},encryptBlock:function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},decryptBlock:function(g,y){var v=h(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(aH)),aH.exports}(function(e,t){(function(n,r,i){e.exports=r(Fr(),HM(),tSt(),nSt(),Bx(),rSt(),jx(),xPe(),dre(),iSt(),EPe(),sSt(),oSt(),aSt(),hre(),uSt(),Sb(),Ta(),lSt(),cSt(),fSt(),dSt(),hSt(),pSt(),mSt(),gSt(),ySt(),vSt(),bSt(),_St(),wSt(),xSt(),ESt(),TSt(),SSt())})(Jt,function(n){return n})})(_Pe);var bK=_Pe.exports;function _h(e){const t=bK.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function ASt(e){const t=bK.AES.decrypt(atob(e),"notSecret").toString(bK.enc.Utf8);return parseInt(t,10)}function Ux(){const{studyId:e}=k0();return`${e}`}function Dd(){const{index:e}=k0();return e===void 0?0:e.startsWith("reviewer-")?e:ASt(e)}function Od(){const e=Dd(),t=fre();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var j$={exports:{}};j$.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",x="[object Set]",S="[object String]",A="[object Undefined]",C="[object WeakMap]",N="[object ArrayBuffer]",k="[object DataView]",D="[object Float32Array]",L="[object Float64Array]",O="[object Int8Array]",B="[object Int16Array]",q="[object Int32Array]",H="[object Uint8Array]",G="[object Uint8ClampedArray]",K="[object Uint16Array]",J="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,M={};M[D]=M[L]=M[O]=M[B]=M[q]=M[H]=M[G]=M[K]=M[J]=!0,M[a]=M[u]=M[N]=M[c]=M[k]=M[f]=M[d]=M[h]=M[m]=M[g]=M[v]=M[w]=M[x]=M[S]=M[C]=!1;var V=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,Q=typeof self=="object"&&self&&self.Object===Object&&self,se=V||Q||Function("return this")(),be=t&&!t.nodeType&&t,he=be&&!0&&e&&!e.nodeType&&e,Ce=he&&he.exports===be,De=Ce&&V.process,rt=function(){try{var le=he&&he.require&&he.require("util").types;return le||De&&De.binding&&De.binding("util")}catch{}}(),Re=rt&&rt.isTypedArray;function Tt(le,ye,Be){switch(Be.length){case 0:return le.call(ye);case 1:return le.call(ye,Be[0]);case 2:return le.call(ye,Be[0],Be[1]);case 3:return le.call(ye,Be[0],Be[1],Be[2])}return le.apply(ye,Be)}function Ze(le,ye){for(var Be=-1,Ht=Array(le);++Be<le;)Ht[Be]=ye(Be);return Ht}function It(le){return function(ye){return le(ye)}}function mt(le,ye){return le==null?void 0:le[ye]}function Se(le,ye){return function(Be){return le(ye(Be))}}var Fe=Array.prototype,st=Function.prototype,yt=Object.prototype,Nt=se["__core-js_shared__"],Je=st.toString,xe=yt.hasOwnProperty,kt=function(){var le=/[^.]+$/.exec(Nt&&Nt.keys&&Nt.keys.IE_PROTO||"");return le?"Symbol(src)_1."+le:""}(),Rt=yt.toString,Ee=Je.call(Object),Oe=RegExp("^"+Je.call(xe).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=Ce?se.Buffer:void 0,_t=se.Symbol,jt=se.Uint8Array;ot&&ot.allocUnsafe;var Un=Se(Object.getPrototypeOf,Object),hr=Object.create,Sr=yt.propertyIsEnumerable,_i=Fe.splice,Sn=_t?_t.toStringTag:void 0,zn=function(){try{var le=at(Object,"defineProperty");return le({},"",{}),le}catch{}}(),pr=ot?ot.isBuffer:void 0,yr=Math.max,ea=Date.now,rs=at(se,"Map"),ms=at(Object,"create"),Ls=function(){function le(){}return function(ye){if(!Hd(ye))return{};if(hr)return hr(ye);le.prototype=ye;var Be=new le;return le.prototype=void 0,Be}}();function Hr(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function gs(){this.__data__=ms?ms(null):{},this.size=0}function Mc(le){var ye=this.has(le)&&delete this.__data__[le];return this.size-=ye?1:0,ye}function ta(le){var ye=this.__data__;if(ms){var Be=ye[le];return Be===r?void 0:Be}return xe.call(ye,le)?ye[le]:void 0}function Vu(le){var ye=this.__data__;return ms?ye[le]!==void 0:xe.call(ye,le)}function Br(le,ye){var Be=this.__data__;return this.size+=this.has(le)?0:1,Be[le]=ms&&ye===void 0?r:ye,this}Hr.prototype.clear=gs,Hr.prototype.delete=Mc,Hr.prototype.get=ta,Hr.prototype.has=Vu,Hr.prototype.set=Br;function ki(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function mi(){this.__data__=[],this.size=0}function eo(le){var ye=this.__data__,Be=vr(ye,le);if(Be<0)return!1;var Ht=ye.length-1;return Be==Ht?ye.pop():_i.call(ye,Be,1),--this.size,!0}function oi(le){var ye=this.__data__,Be=vr(ye,le);return Be<0?void 0:ye[Be][1]}function Ri(le){return vr(this.__data__,le)>-1}function me(le,ye){var Be=this.__data__,Ht=vr(Be,le);return Ht<0?(++this.size,Be.push([le,ye])):Be[Ht][1]=ye,this}ki.prototype.clear=mi,ki.prototype.delete=eo,ki.prototype.get=oi,ki.prototype.has=Ri,ki.prototype.set=me;function ue(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function ge(){this.size=0,this.__data__={hash:new Hr,map:new(rs||ki),string:new Hr}}function Me(le){var ye=it(this,le).delete(le);return this.size-=ye?1:0,ye}function Le(le){return it(this,le).get(le)}function wt(le){return it(this,le).has(le)}function Ut(le,ye){var Be=it(this,le),Ht=Be.size;return Be.set(le,ye),this.size+=Be.size==Ht?0:1,this}ue.prototype.clear=ge,ue.prototype.delete=Me,ue.prototype.get=Le,ue.prototype.has=wt,ue.prototype.set=Ut;function dn(le){var ye=this.__data__=new ki(le);this.size=ye.size}function Zn(){this.__data__=new ki,this.size=0}function ur(le){var ye=this.__data__,Be=ye.delete(le);return this.size=ye.size,Be}function On(le){return this.__data__.get(le)}function Ar(le){return this.__data__.has(le)}function ai(le,ye){var Be=this.__data__;if(Be instanceof ki){var Ht=Be.__data__;if(!rs||Ht.length<n-1)return Ht.push([le,ye]),this.size=++Be.size,this;Be=this.__data__=new ue(Ht)}return Be.set(le,ye),this.size=Be.size,this}dn.prototype.clear=Zn,dn.prototype.delete=ur,dn.prototype.get=On,dn.prototype.has=Ar,dn.prototype.set=ai;function an(le,ye){var Be=zd(le),Ht=!Be&&nu(le),ir=!Be&&!Ht&&Vd(le),Gr=!Be&&!Ht&&!ir&&w2(le),wi=Be||Ht||ir||Gr,un=wi?Ze(le.length,String):[],ui=un.length;for(var xi in le)wi&&(xi=="length"||ir&&(xi=="offset"||xi=="parent")||Gr&&(xi=="buffer"||xi=="byteLength"||xi=="byteOffset")||Lt(xi,ui))||un.push(xi);return un}function Cr(le,ye,Be){(Be!==void 0&&!Hu(le[ye],Be)||Be===void 0&&!(ye in le))&&Ni(le,ye,Be)}function Jr(le,ye,Be){var Ht=le[ye];(!(xe.call(le,ye)&&Hu(Ht,Be))||Be===void 0&&!(ye in le))&&Ni(le,ye,Be)}function vr(le,ye){for(var Be=le.length;Be--;)if(Hu(le[Be][0],ye))return Be;return-1}function Ni(le,ye,Be){ye=="__proto__"&&zn?zn(le,ye,{configurable:!0,enumerable:!0,value:Be,writable:!0}):le[ye]=Be}var bo=qe();function Pi(le){return le==null?le===void 0?A:y:Sn&&Sn in Object(le)?ut(le):No(le)}function ko(le){return na(le)&&Pi(le)==a}function is(le){if(!Hd(le)||er(le))return!1;var ye=Yb(le)?Oe:j;return ye.test(Wb(le))}function ss(le){return na(le)&&_2(le.length)&&!!M[Pi(le)]}function Ro(le){if(!Hd(le))return br(le);var ye=qr(le),Be=[];for(var Ht in le)Ht=="constructor"&&(ye||!xe.call(le,Ht))||Be.push(Ht);return Be}function Ca(le,ye,Be,Ht,ir){le!==ye&&bo(ye,function(Gr,wi){if(ir||(ir=new dn),Hd(Gr))_o(le,ye,wi,Be,Ca,Ht,ir);else{var un=Ht?Ht(Ud(le,wi),Gr,wi+"",le,ye,ir):void 0;un===void 0&&(un=Gr),Cr(le,wi,un)}},gm)}function _o(le,ye,Be,Ht,ir,Gr,wi){var un=Ud(le,Be),ui=Ud(ye,Be),xi=wi.get(ui);if(xi){Cr(le,Be,xi);return}var Po=Gr?Gr(un,ui,Be+"",le,ye,wi):void 0,qd=Po===void 0;if(qd){var Ms=zd(ui),ym=!Ms&&Vd(ui),vm=!Ms&&!ym&&w2(ui);Po=ui,Ms||ym||vm?zd(un)?Po=un:Gb(un)?Po=we(un):ym?(qd=!1,Po=ee(ui)):vm?(qd=!1,Po=oe(ui)):Po=[]:zC(ui)||nu(ui)?(Po=un,nu(un)?Po=mm(un):(!Hd(un)||Yb(un))&&(Po=vt(ui))):qd=!1}qd&&(wi.set(ui,Po),ir(Po,ui,Ht,Gr,wi),wi.delete(ui)),Cr(le,Be,Po)}function Ol(le,ye){return $1(Fc(le,ye,Ir),le+"")}var Of=zn?function(le,ye){return zn(le,"toString",{configurable:!0,enumerable:!1,value:Wr(ye),writable:!0})}:Ir;function ee(le,ye){return le.slice()}function pe(le){var ye=new le.constructor(le.byteLength);return new jt(ye).set(new jt(le)),ye}function oe(le,ye){var Be=pe(le.buffer);return new le.constructor(Be,le.byteOffset,le.length)}function we(le,ye){var Be=-1,Ht=le.length;for(ye||(ye=Array(Ht));++Be<Ht;)ye[Be]=le[Be];return ye}function Ae(le,ye,Be,Ht){var ir=!Be;Be||(Be={});for(var Gr=-1,wi=ye.length;++Gr<wi;){var un=ye[Gr],ui=void 0;ui===void 0&&(ui=le[un]),ir?Ni(Be,un,ui):Jr(Be,un,ui)}return Be}function _e(le){return Ol(function(ye,Be){var Ht=-1,ir=Be.length,Gr=ir>1?Be[ir-1]:void 0,wi=ir>2?Be[2]:void 0;for(Gr=le.length>3&&typeof Gr=="function"?(ir--,Gr):void 0,wi&&$n(Be[0],Be[1],wi)&&(Gr=ir<3?void 0:Gr,ir=1),ye=Object(ye);++Ht<ir;){var un=Be[Ht];un&&le(ye,un,Ht,Gr)}return ye})}function qe(le){return function(ye,Be,Ht){for(var ir=-1,Gr=Object(ye),wi=Ht(ye),un=wi.length;un--;){var ui=wi[++ir];if(Be(Gr[ui],ui,Gr)===!1)break}return ye}}function it(le,ye){var Be=le.__data__;return Kt(ye)?Be[typeof ye=="string"?"string":"hash"]:Be.map}function at(le,ye){var Be=mt(le,ye);return is(Be)?Be:void 0}function ut(le){var ye=xe.call(le,Sn),Be=le[Sn];try{le[Sn]=void 0;var Ht=!0}catch{}var ir=Rt.call(le);return Ht&&(ye?le[Sn]=Be:delete le[Sn]),ir}function vt(le){return typeof le.constructor=="function"&&!qr(le)?Ls(Un(le)):{}}function Lt(le,ye){var Be=typeof le;return ye=ye??o,!!ye&&(Be=="number"||Be!="symbol"&&W.test(le))&&le>-1&&le%1==0&&le<ye}function $n(le,ye,Be){if(!Hd(Be))return!1;var Ht=typeof ye;return(Ht=="number"?L1(Be)&&Lt(ye,Be.length):Ht=="string"&&ye in Be)?Hu(Be[ye],le):!1}function Kt(le){var ye=typeof le;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?le!=="__proto__":le===null}function er(le){return!!kt&&kt in le}function qr(le){var ye=le&&le.constructor,Be=typeof ye=="function"&&ye.prototype||yt;return le===Be}function br(le){var ye=[];if(le!=null)for(var Be in Object(le))ye.push(Be);return ye}function No(le){return Rt.call(le)}function Fc(le,ye,Be){return ye=yr(ye===void 0?le.length-1:ye,0),function(){for(var Ht=arguments,ir=-1,Gr=yr(Ht.length-ye,0),wi=Array(Gr);++ir<Gr;)wi[ir]=Ht[ye+ir];ir=-1;for(var un=Array(ye+1);++ir<ye;)un[ir]=Ht[ir];return un[ye]=Be(wi),Tt(le,this,un)}}function Ud(le,ye){if(!(ye==="constructor"&&typeof le[ye]=="function")&&ye!="__proto__")return le[ye]}var $1=bp(Of);function bp(le){var ye=0,Be=0;return function(){var Ht=ea(),ir=s-(Ht-Be);if(Be=Ht,ir>0){if(++ye>=i)return arguments[0]}else ye=0;return le.apply(void 0,arguments)}}function Wb(le){if(le!=null){try{return Je.call(le)}catch{}try{return le+""}catch{}}return""}function Hu(le,ye){return le===ye||le!==le&&ye!==ye}var nu=ko(function(){return arguments}())?ko:function(le){return na(le)&&xe.call(le,"callee")&&!Sr.call(le,"callee")},zd=Array.isArray;function L1(le){return le!=null&&_2(le.length)&&!Yb(le)}function Gb(le){return na(le)&&L1(le)}var Vd=pr||E2;function Yb(le){if(!Hd(le))return!1;var ye=Pi(le);return ye==h||ye==p||ye==l||ye==b}function _2(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=o}function Hd(le){var ye=typeof le;return le!=null&&(ye=="object"||ye=="function")}function na(le){return le!=null&&typeof le=="object"}function zC(le){if(!na(le)||Pi(le)!=v)return!1;var ye=Un(le);if(ye===null)return!0;var Be=xe.call(ye,"constructor")&&ye.constructor;return typeof Be=="function"&&Be instanceof Be&&Je.call(Be)==Ee}var w2=Re?It(Re):ss;function mm(le){return Ae(le,gm(le))}function gm(le){return L1(le)?an(le):Ro(le)}var x2=_e(function(le,ye,Be){Ca(le,ye,Be)});function Wr(le){return function(){return le}}function Ir(le){return le}function E2(){return!1}e.exports=x2})(j$,j$.exports);var CSt=j$.exports;const pre=Rf(CSt);function _g(e){return structuredClone(e)}function mre(){const e=Dd(),n=`${Od()}_${e}`;return Vr(i=>i.answers[n])}const TPe=R.createContext(null);function ISt(){const e=R.useContext(TPe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function zg(){return Vr(e=>e.config)}function BA(){const[e]=xb();return!!e.get("participantId")}function pye(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function SPe(){const e=Dd(),t=fre(),r=`${Od()}_${e}`,i=Vr(N=>N.trialValidation),s=Vr(N=>N.sequence),o=Vr(N=>N.answers),a=Vr(N=>N.modes),u=Dc(),{saveTrialAnswer:l,setIframeAnswers:c,setMatrixAnswersRadio:f,setMatrixAnswersCheckbox:d}=bl(),{storageEngine:h}=yo(),p=Ux(),m=R.useMemo(()=>a.dataCollectionEnabled,[a]),g=QTt(r),y=BA(),v=typeof e!="number"||y||!g,b=mre(),w=rp(),x=zg(),S=R.useMemo(()=>Date.now(),[]),A=ISt(),C=R.useCallback((N=!0)=>{if(typeof e!="number")return;const k=_g(i[r]),D=Object.values(k).reduce((j,W)=>Object.hasOwn(W,"values")?{...j,...W.values}:j,{}),{provenanceGraph:L}=k,O=Date.now(),{incorrectAnswers:B,helpButtonClickedCount:q}=b,H=A&&"current"in A&&A.current?A.current.splice(0,A.current.length):[];if(m&&b.endTime===-1){const j={answer:N?D:{},startTime:S,endTime:O,incorrectAnswers:B,provenanceGraph:L,windowEvents:H,timedOut:!N,helpButtonClickedCount:q};u(l({identifier:r,...j})),h&&h.saveAnswers({...o,[r]:j}),u(c({})),u(d(null)),u(f(null))}let G=e+1;const K=lre(s,e),J=K!==null&&K.some(j=>Object.hasOwn(j.currentBlock,"skip")&&j.currentBlock.skip!==void 0),F={...o,[r]:{answer:D,startTime:S,endTime:O,provenanceGraph:L,windowEvents:H}};J&&[...K.flatMap(W=>W.currentBlock.skip?W.currentBlock.skip.map(M=>({...M,firstIndex:W.firstIndex,lastIndex:W.lastIndex})):[])].some(W=>{let M=!1;const V=Object.fromEntries(Object.entries(F).filter(([se])=>{const be=parseInt(se.slice(se.lastIndexOf("_")+1),10);return be>=W.firstIndex&&be<=e})),Q=W.check!=="block"?Object.entries(V).filter(([se])=>se.slice(0,se.lastIndexOf("_"))===W.name):Object.entries(V);if(Q.length===0)return!1;if(Q.some(([se,be])=>!be))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(W,null,2)}`);if(W.check==="response"||W.check==="responses"){const[se,be]=Q[0];W.check==="response"?M=W.comparison==="equal"?W.value===be.answer[W.responseId]:W.value!==be.answer[W.responseId]:M=!pye(be.answer,se,x.components[se.slice(0,se.lastIndexOf("_"))],x)}else if(W.check==="block"||W.check==="repeatedComponent"){if(Q.length<W.value)return!1;const se=Q.map(([Ce,De])=>pye(De.answer,Ce,x.components[Ce.slice(0,Ce.lastIndexOf("_"))],x)),be=se.filter(Ce=>Ce).length,he=se.length-be;M=W.condition==="numCorrect"&&be===W.value||W.condition==="numIncorrect"&&he===W.value}if(M){const se=t.indexOf(W.to),be=se===-1?KTt(s,W.to):-1;return G=se===-1?be:se,!0}return!1}),w(`/${p}/${_h(G)}${window.location.search}`)},[e,i,r,A,m,b,s,o,S,w,p,u,l,h,c,d,f,x,t]);return{isNextDisabled:v,goToNextStep:C}}function kSt({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=SPe(),o=zg(),a=rp(),u=R.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=R.useState(void 0);R.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),R.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./__timeout")},[l,f,a,o.uiConfig.timeoutReject]);const h=R.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return E.jsxs(E.Fragment,{children:[E.jsx(on,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&E.jsxs(bg,{mt:"md",title:"Please wait",color:"blue",icon:E.jsx($ne,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?E.jsxs(bg,{mt:"md",title:"Next button disables soon",color:"yellow",icon:E.jsx(S4,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&E.jsxs(bg,{mt:"md",title:"Next button disabled",color:"red",icon:E.jsx(S4,{}),children:["The next button has timed out and is now disabled.",E.jsx(bi,{justify:"right",mt:"sm",children:E.jsx(on,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function RSt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const NSt=typeof window<"u"?R.useLayoutEffect:R.useEffect;function ka(e,t){NSt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function PSt(e,t){e&&RSt(e),ka(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),ka(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),ka(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),ka(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),ka(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),ka(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),ka(`mantine-form:${e}:clear-errors`,t.clearErrors),ka(`mantine-form:${e}:reset`,t.reset),ka(`mantine-form:${e}:validate`,t.validate),ka(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),ka(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),ka(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),ka(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),ka(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),ka(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),ka(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),ka(`mantine-form:${e}:reset-touched`,t.resetTouched)}function DSt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function _K(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function OSt(e){const[t,n]=R.useState(_K(e)),r=R.useRef(t),i=R.useCallback(u=>{n(l=>{const c=_K(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=R.useCallback(()=>i({}),[]),o=R.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=R.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function APe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function mye(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function gye(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=APe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=mye(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=mye(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function $St(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function yye(e,t,n){typeof n.value=="object"&&(n.value=GE(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function GE(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(GE(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(GE(a),GE(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(GE(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)yye(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||yye(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function CPe(e){return typeof e!="string"?[]:e.split(".")}function oc(e,t){const n=CPe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function qM(e,t,n){const r=CPe(e);if(r.length===0)return n;const i=GE(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function LSt(e,{from:t,to:n},r){const i=oc(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),qM(e,s,r)}function MSt(e,t,n,r){const i=oc(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),qM(e,s,r)}function FSt(e,t,n){const r=oc(e,n);return Array.isArray(r)?qM(e,r.filter((i,s)=>s!==t),n):n}function BSt({$values:e,$errors:t,$status:n}){const r=R.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>$St(o,a,u)),e.setValues({values:LSt(o,a,e.refValues.current),updateState:!0})},[]),i=R.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>gye(o,a,u,-1)),e.setValues({values:FSt(o,a,e.refValues.current),updateState:!0})},[]),s=R.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>gye(o,u,l,1)),e.setValues({values:MSt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var gre=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const GD=Rf(gre);function IP(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function jSt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=R.useState(t),[o,a]=R.useState(e),u=R.useRef(t),l=R.useRef(e),c=R.useCallback(x=>{const S=typeof x=="function"?x(u.current):x;u.current=S,n==="controlled"&&s(S)},[]),f=R.useCallback(x=>{const S=typeof x=="function"?x(l.current):x;l.current=S,n==="controlled"&&a(S)},[]),d=R.useCallback(()=>c({}),[]),h=x=>{const S=x?{...x,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=R.useCallback((x,S)=>{c(A=>IP(A,x)===S?A:{...A,[x]:S})},[]),m=R.useCallback((x,S)=>{f(A=>IP(A,x)===S?A:{...A,[x]:S})},[]),g=R.useCallback(x=>IP(u.current,x),[]),y=R.useCallback(x=>f(S=>{if(typeof x!="string")return S;const A=APe(x,S);return delete A[x],GD(A,S)?S:A}),[]),v=R.useCallback(x=>{if(x){const A=oc(x,l.current);if(typeof A=="boolean")return A;const C=oc(x,r.refValues.current),N=oc(x,r.valuesSnapshot.current);return!GD(C,N)}return Object.keys(l.current).length>0?IP(l.current):!GD(r.refValues.current,r.valuesSnapshot.current)},[]),b=R.useCallback(()=>l.current,[]),w=R.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function USt({initialValues:e,onValuesChange:t,mode:n}){const r=R.useRef(!1),[i,s]=R.useState(e||{}),o=R.useRef(i),a=R.useRef(i),u=R.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(x=>x({updatedValues:w,previousValues:v}))},[t]),l=R.useCallback(p=>{var y;const m=oc(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=qM(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=R.useCallback(p=>{a.current=p},[]),f=R.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=R.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=R.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function zSt({$status:e}){const t=R.useRef({}),n=R.useCallback((i,s)=>{R.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=R.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:oc(i,o.previousValues),value:oc(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function vye(e,t){return e?`${e}-${t.toString()}`:t.toString()}function bye(e){const t=_K(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function wK(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=oc(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>wK(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||wK(o,t,a,i)),i},r)}function xK(e,t){return bye(typeof e=="function"?e(t):wK(e,t))}function kP(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=xK(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const VSt="__MANTINE_FORM_INDEX__";function _ye(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${VSt}`)):!1:!1}function IPe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=OSt(r),p=USt({initialValues:n,onValuesChange:l,mode:t}),m=jSt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=BSt({$values:p,$errors:h,$status:m}),y=zSt({$status:m}),[v,b]=R.useState(0),[w,x]=R.useState({}),S=R.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(F=>F+1)},[]),A=R.useCallback(F=>{p.initialize(F,()=>t==="uncontrolled"&&b(j=>j+1))},[]),C=R.useCallback((F,j,W)=>{const M=_ye(F,a);m.clearFieldDirty(F),m.setFieldTouched(F,!0),!M&&o&&h.clearFieldError(F),p.setFieldValue({path:F,value:j,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(F),M?V=>{const Q=kP(F,d,V.updatedValues);Q.hasError?h.setFieldError(F,Q.error):h.clearFieldError(F)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>x(V=>({...V,[F]:(V[F]||0)+1})):null]})},[l,d]),N=R.useCallback(F=>{const j=p.refValues.current;p.setValues({values:F,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const M=oc(W,p.refValues.current),V=oc(W,j);M!==V&&y.getFieldSubscribers(W).forEach(Q=>Q({previousValues:j,updatedValues:p.refValues.current}))})},[l,o]),k=R.useCallback(()=>{const F=xK(d,p.refValues.current);return h.setErrors(F.errors),F},[d]),D=R.useCallback(F=>{const j=kP(F,d,p.refValues.current);return j.hasError?h.setFieldError(F,j.error):h.clearFieldError(F),j},[d]),L=(F,{type:j="input",withError:W=!0,withFocus:M=!0,...V}={})=>{const se={onChange:DSt(be=>C(F,be,{forceUpdate:!1})),"data-path":vye(e,F)};return W&&(se.error=h.errorsState[F]),j==="checkbox"?se[t==="controlled"?"checked":"defaultChecked"]=oc(F,p.refValues.current):se[t==="controlled"?"value":"defaultValue"]=oc(F,p.refValues.current),M&&(se.onFocus=()=>m.setFieldTouched(F,!0),se.onBlur=()=>{if(_ye(F,u)){const be=kP(F,d,p.refValues.current);be.hasError?h.setFieldError(F,be.error):h.clearFieldError(F)}}),Object.assign(se,f==null?void 0:f({inputProps:se,field:F,options:{type:j,withError:W,withFocus:M,...V},form:J}))},O=(F,j)=>W=>{W==null||W.preventDefault();const M=k();M.hasErrors?j==null||j(M.errors,p.refValues.current,W):F==null||F(c(p.refValues.current),W)},B=F=>c(F||p.refValues.current),q=R.useCallback(F=>{F.preventDefault(),S()},[]),H=R.useCallback(F=>F?!kP(F,d,p.refValues.current).hasError:!xK(d,p.refValues.current).hasErrors,[d]),G=F=>`${v}-${F}-${w[F]||0}`,K=R.useCallback(F=>document.querySelector(`[data-path="${vye(e,F)}"]`),[]),J={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:A,setValues:N,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:k,validateField:D,getInputProps:L,onSubmit:O,onReset:q,isValid:H,getTransformedValues:B,key:G,getInputNode:K};return PSt(e,J),J}function HSt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function qSt(e){return HSt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function kPe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const WSt=new URLSearchParams(window.location.search),GSt=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=WSt.get(r.paramCapture):r.type==="iframe"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(o=>[o,""]))),n={...n,[r.id]:s}}}),{...n}},YSt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(i=>i!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?kPe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function KSt(e,t,n){const[r,i]=R.useState(null),s=IPe({initialValues:GSt(e,n),validate:YSt(e)});return R.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function zx(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=kPe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function XSt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return E.jsx(sc.Group,{label:E.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx($u,{text:s,required:o})})]}),description:u,...n,error:zx(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsx(bi,{mt:"xs",children:l.map(c=>E.jsx(sc,{disabled:t,value:c.value,label:c.label},c.value))})})}function QSt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return E.jsx(RA,{disabled:t,label:E.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx($u,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:zx(e,n,c)})}function JSt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return E.jsx(Qs.Wrapper,{label:E.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&E.jsx(ke,{style:{minWidth:"fit-content"},children:`${n}. `}),E.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx($u,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&E.jsx(ao,{children:Array.isArray(t.value)?t.value.map(a=>E.jsx(ao.Item,{children:a},a)):E.jsx(ao.Item,{children:t.value})})})}function RPe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f}=e,d=u.map(h=>typeof h=="string"?{value:h,label:h}:h);return E.jsx(Bg.Group,{name:`radioInput${e.id}`,label:E.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx($u,{text:o,required:a})})]}),description:f,...n,error:zx(e,n,d),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsxs(bi,{mt:"md",gap:"lg",style:{display:"flex",alignItems:"flex-end",justifyContent:s?"space-around":"inherit"},children:[l?E.jsx(Ue,{children:l}):null,d.map(h=>E.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[E.jsx(Ue,{children:h.label}),E.jsx(Bg,{disabled:t,value:h.value,label:h.label,styles:{label:{display:"none"}}})]},h.label)),E.jsx(Ue,{children:c})]})},e.id)}function ZSt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return E.jsx(RPe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function eAt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return E.jsx(dne,{disabled:t,placeholder:l,label:E.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx($u,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:zx(e,n)})}function tAt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=R.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=zx(e,n);return E.jsx(Qs.Wrapper,{label:E.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx($u,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsx(_b,{disabled:t,marks:a,min:l,max:c,...n,h:40})})}function nAt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return E.jsx(ag,{disabled:t,placeholder:s,label:E.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx($u,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:zx(e,n)})}function rAt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return E.jsx(Zte,{disabled:t,placeholder:s,label:E.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx($u,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:zx(e,n)})}function iAt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return E.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>E.jsx(sc,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function sAt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return E.jsx(Bg.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:E.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>E.jsx(Bg,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function oAt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=bl(),a=Dc(),{answerOptions:u,questionOptions:l,prompt:c,required:f}=e,h=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(b=>({value:b,label:b})):u.map(b=>typeof b=="string"?{value:b,label:b}:b),p=l.map(b=>typeof b=="string"?{value:b,label:b}:b),m=(b,w)=>{const x={type:"radio",questionKey:w,val:b,responseId:e.id};a(s(x))},g=(b,w,x)=>{const S=b.target.checked,A={questionKey:w,responseId:e.id,value:x.value,label:x.label,isChecked:S,choiceOptions:h};a(o(A))},y=h.length,v=p.length;return E.jsxs(E.Fragment,{children:[E.jsxs(qt,{direction:"row",wrap:"nowrap",gap:0,children:[i&&E.jsx(ke,{style:{minWidth:"fit-content"},children:`${n}. `}),E.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx($u,{text:c,required:f})})]}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr",margin:"40px 100px 100px 100px"},children:[E.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:h.map((b,w)=>E.jsx(Ue,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:b.label},`choice-${w}-label`))}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v}, 1fr)`},children:p.map((b,w)=>E.jsx(Ue,{style:{height:"60px",display:"flex",alignItems:"center",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(w+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,paddingLeft:"10px"},children:b.label},`question-${w}-label`))}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v},1fr)`},children:p.map((b,w)=>E.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(w+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?E.jsx(sAt,{disabled:r,idx:w,question:b,answer:t,_choices:h,_n:y,onChange:m,response:e}):E.jsx(iAt,{disabled:r,idx:w,question:b,answer:t,_choices:h,_n:y,onChange:g})},`question-${w}`))})]})]})}function aAt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=xb(),u=zg().uiConfig.enumerateQuestions??!1,l=R.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return E.jsxs(ke,{mb:"md",children:[e.type==="numerical"&&E.jsx(eAt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&E.jsx(nAt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&E.jsx(rAt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&E.jsx(ZSt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&E.jsx(QSt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&E.jsx(tAt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&E.jsx(RPe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&E.jsx(XSt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&E.jsx(JSt,{response:e,answer:i,index:r,enumerateQuestions:u}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&E.jsx(oAt,{disabled:l,response:e,answer:i,index:r,enumerateQuestions:u})]})}function U$({config:e,location:t,status:n,style:r}){var F;const{storageEngine:i}=yo(),s=Dc(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=bl(),c=Dd(),f=Od(),d=n==null?void 0:n.answer,h=Ux(),p=rp(),m=e,g=R.useMemo(()=>{var j;return((j=m==null?void 0:m.response)==null?void 0:j.filter(W=>W.location?W.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),y=R.useMemo(()=>g.map(j=>({...j,required:j.required===void 0?!0:j.required})),[g]),v=KSt(y,c,d||{}),[b,w]=R.useState(void 0),x=Vr(j=>j.iframeAnswers),S=Vr(j=>j.iframeProvenance),A=Vr(j=>j.matrixAnswers),C=(m==null?void 0:m.provideFeedback)&&(((F=m==null?void 0:m.correctAnswer)==null?void 0:F.length)||0)>0,N=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[k,D]=R.useState(0),L=(m==null?void 0:m.trainingAttempts)||2,[O,B]=R.useState(!1),q=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");R.useEffect(()=>{const j=y.find(W=>W.type==="iframe");if(x&&j){const W=j.id;v.setValues({...v.values,[W]:x[W]})}},[x]),R.useEffect(()=>{S&&w(S)},[S]),R.useEffect(()=>{const j=y.filter(W=>W.type==="matrix-radio"||W.type==="matrix-checkbox");if(A&&j.length>0){const W={...v.values};j.forEach(M=>{const{id:V}=M;W[V]={...v.getInputProps(V).value,...A[V]}}),v.setValues(W)}},[A]),R.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:v.isValid(),values:_g(v.values),provenanceGraph:b}))},[v.values,f,c,t,s,o,b]);const[H,G]=R.useState(Object.fromEntries(y.map(j=>[j.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),K=(j,W,M,V,Q)=>{G(se=>({...se,[j]:{visible:W,title:M,message:V,color:Q}}))},J=()=>{const j=k+1;D(j);const W=Object.fromEntries(y.map(M=>{var se,be;const V=(be=(se=m.correctAnswer)==null?void 0:se.find(he=>he.id===M.id))==null?void 0:be.answer,Q=v.values[M.id];return[M.id,Array.isArray(Q)?typeof V=="string"?Q.length===1&&V===Q[0]:Q.length===V.length&&Q.every(he=>V.includes(he)):V===Q]}));C&&(y.forEach(M=>{var V;if(W[M.id]&&!((V=H[M.id])!=null&&V.message.includes("You've failed to answer this question correctly")))K(M.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:M.id,answer:v.values[M.id]}));let Q="";L===-1?Q="Please try again.":j>=L?(Q=`You didn't answer this question correctly after ${L} attempts. ${N?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!N&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./__trainingFailed")},5e3)})):L-j===1?Q="Please try again. You have 1 attempt left.":Q=`Please try again. You have ${L-j} attempts left.`,K(M.id,!0,"Incorrect Answer",Q,"red")}}),B(N&&j>=L||Object.values(W).every(M=>M)&&j<=L))};return E.jsxs("div",{style:r,children:[y.map((j,W)=>{var V,Q;const M=(Q=(V=m.correctAnswer)==null?void 0:V.find(se=>se.id===j.id))==null?void 0:Q.answer;return E.jsx(ni.Fragment,{children:j.hidden?"":E.jsxs(E.Fragment,{children:[E.jsx(aAt,{storedAnswer:d?d[j.id]:void 0,answer:{...v.getInputProps(j.id,{type:j.type==="checkbox"?"checkbox":"input"})},response:j,index:W+1}),H[j.id].visible&&E.jsxs(bg,{mb:"md",title:H[j.id].title,color:H[j.id].color,children:[H[j.id].message," ",H[j.id].message.includes("Please try again")&&E.jsxs(E.Fragment,{children:[E.jsx("br",{}),E.jsx("br",{}),"If you're unsure"," ",E.jsx(yb,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),E.jsx("br",{}),E.jsx("br",{}),k>=L&&L>=0&&M&&` The correct answer was: ${M}.`]})]})},`${j.id}-${c}`)}),E.jsxs(bi,{justify:"right",gap:"xs",children:[C&&q&&E.jsx(on,{onClick:()=>J(),disabled:!v.isValid()||k>=L&&L>=0,children:"Check Answer"}),q&&E.jsx(kSt,{disabled:C&&!O||!v.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const _3="@REVISIT_COMMS",uAt={minHeight:"500px",width:"100%",border:0};function lAt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=bl(),r=Dc(),i=ZNe(),s=R.useRef(null),o=R.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Od(),u=rp(),l=R.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${_3}/${c}`,iframeId:o,message:f},"*")},[s,o]);return R.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${_3}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${_3}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${_3}/ANSWERS`:r(t(d.message));break;case`${_3}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),E.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${vl}${e.path}?trialid=${a}&id=${o}`,style:uAt})}async function yre(e){const n=await(await fetch(`${vl}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function cAt(e){const t=await fetch(`${vl}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function Iv({email:e,path:t}){const n=wb();return E.jsxs(yl,{fluid:!0,my:50,maw:800,mx:"auto",children:[E.jsx(Ws,{order:2,children:E.jsx(Ue,{span:!0,c:"orange",children:"404"})}),E.jsxs(Ue,{children:[E.jsx(Ue,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),E.jsx(ba,{h:"lg"}),E.jsxs(ao,{children:[E.jsx(ao.Item,{children:E.jsx(Ue,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),E.jsx(ao.Item,{children:E.jsxs(Ue,{children:["If you're a participant, please contact the study administrator"," ",e&&E.jsxs(E.Fragment,{children:["at"," ",E.jsxs(yb,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const fAt={maxWidth:"100%"};function dAt({currentConfig:e}){const t={...fAt,...e.style},[n,r]=R.useState(!0),[i,s]=R.useState(!1);return R.useEffect(()=>{async function o(){const a=await yre(e.path);s(!!a),r(!1)}o()},[e]),n||i?E.jsx(bb,{mx:"auto",src:`${vl}${e.path}`,style:t}):E.jsx(Iv,{path:e.path})}function wg(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hAt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lh(e){let t,n,r;e.length!==2?(t=wg,n=(a,u)=>wg(e(a),u),r=(a,u)=>e(a)-u):(t=e===wg||e===hAt?e:pAt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function pAt(){return 0}function NPe(e){return e===null?NaN:+e}function*mAt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const PPe=Lh(wg),kv=PPe.right,gAt=PPe.left;Lh(NPe).center;function yAt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function vAt(e,t){const n=yAt(e,t);return n&&Math.sqrt(n)}function Wk(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class pl{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class wye extends Map{constructor(t,n=$Pe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(EK(this,t))}has(t){return super.has(EK(this,t))}set(t,n){return super.set(DPe(this,t),n)}delete(t){return super.delete(OPe(this,t))}}class z$ extends Set{constructor(t,n=$Pe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(EK(this,t))}add(t){return super.add(DPe(this,t))}delete(t){return super.delete(OPe(this,t))}}function EK({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function DPe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function OPe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function $Pe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function bAt(e,t){return Array.from(t,n=>e[n])}function _At(e=wg){if(e===wg)return LPe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function LPe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const wAt=Math.sqrt(50),xAt=Math.sqrt(10),EAt=Math.sqrt(2);function V$(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=wAt?10:s>=xAt?5:s>=EAt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?V$(e,t,n*2):[a,u,l]}function TK(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?V$(t,e,n):V$(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function SK(e,t,n){return t=+t,e=+e,n=+n,V$(e,t,n)[2]}function Rv(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?SK(t,e,n):SK(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function xg(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function AK(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function MPe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?LPe:_At(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));MPe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(w3(e,n,t),i(e[r],s)>0&&w3(e,n,r);o<a;){for(w3(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?w3(e,n,a):(++a,w3(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function w3(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function CK(e,t,n){if(e=Float64Array.from(mAt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return AK(e);if(t>=1)return xg(e);var r,i=(r-1)*t,s=Math.floor(i),o=xg(MPe(e,s).subarray(0,s+1)),a=AK(e.subarray(s+1));return o+(a-o)*(i-s)}}function FPe(e,t,n=NPe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function TAt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function BPe(e,t){return CK(e,.5,t)}function*SAt(e){for(const t of e)yield*t}function jPe(e){return Array.from(SAt(e))}function ac(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function UPe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function AAt(e,...t){e=new z$(e),t=t.map(CAt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function CAt(e){return e instanceof z$?e:new z$(e)}function IAt(...e){const t=new z$;for(const n of e)for(const r of n)t.add(r);return t}function kAt(e){return e}var uH=1,lH=2,IK=3,RI=4,xye=1e-6;function RAt(e){return"translate("+e+",0)"}function NAt(e){return"translate(0,"+e+")"}function PAt(e){return t=>+e(t)}function DAt(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function OAt(){return!this.__axis}function zPe(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===uH||e===RI?-1:1,c=e===RI||e===lH?"x":"y",f=e===uH||e===IK?RAt:NAt;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):kAt),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+u,b=+y[y.length-1]+u,w=(t.bandwidth?DAt:PAt)(t.copy(),u),x=h.selection?h.selection():h,S=x.selectAll(".domain").data([null]),A=x.selectAll(".tick").data(p,t).order(),C=A.exit(),N=A.enter().append("g").attr("class","tick"),k=A.select("line"),D=A.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(N),k=k.merge(N.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),D=D.merge(N.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===uH?"0em":e===IK?"0.71em":"0.32em")),h!==x&&(S=S.transition(h),A=A.transition(h),k=k.transition(h),D=D.transition(h),C=C.transition(h).attr("opacity",xye).attr("transform",function(L){return isFinite(L=w(L))?f(L+u):this.getAttribute("transform")}),N.attr("opacity",xye).attr("transform",function(L){var O=this.parentNode.__axis;return f((O&&isFinite(O=O(L))?O:w(L))+u)})),C.remove(),S.attr("d",e===RI||e===lH?o?"M"+l*o+","+v+"H"+u+"V"+b+"H"+l*o:"M"+u+","+v+"V"+b:o?"M"+v+","+l*o+"V"+u+"H"+b+"V"+l*o:"M"+v+","+u+"H"+b),A.attr("opacity",1).attr("transform",function(L){return f(w(L)+u)}),k.attr(c+"2",l*s),D.attr(c,l*g).text(m),x.filter(OAt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===lH?"start":e===RI?"end":"middle"),x.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function vre(e){return zPe(IK,e)}function bre(e){return zPe(RI,e)}var $At={value:()=>{}};function WM(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new YD(n)}function YD(e){this._=e}function LAt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}YD.prototype=WM.prototype={constructor:YD,on:function(e,t){var n=this._,r=LAt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=MAt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Eye(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Eye(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new YD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function MAt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Eye(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=$At,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var kK="http://www.w3.org/1999/xhtml";const Tye={svg:"http://www.w3.org/2000/svg",xhtml:kK,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function GM(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Tye.hasOwnProperty(t)?{space:Tye[t],local:e}:e}function FAt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===kK&&t.documentElement.namespaceURI===kK?t.createElement(e):t.createElementNS(n,e)}}function BAt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function VPe(e){var t=GM(e);return(t.local?BAt:FAt)(t)}function jAt(){}function _re(e){return e==null?jAt:function(){return this.querySelector(e)}}function UAt(e){typeof e!="function"&&(e=_re(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new _l(r,this._parents)}function HPe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function zAt(){return[]}function qPe(e){return e==null?zAt:function(){return this.querySelectorAll(e)}}function VAt(e){return function(){return HPe(e.apply(this,arguments))}}function HAt(e){typeof e=="function"?e=VAt(e):e=qPe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new _l(r,i)}function WPe(e){return function(){return this.matches(e)}}function GPe(e){return function(t){return t.matches(e)}}var qAt=Array.prototype.find;function WAt(e){return function(){return qAt.call(this.children,e)}}function GAt(){return this.firstElementChild}function YAt(e){return this.select(e==null?GAt:WAt(typeof e=="function"?e:GPe(e)))}var KAt=Array.prototype.filter;function XAt(){return Array.from(this.children)}function QAt(e){return function(){return KAt.call(this.children,e)}}function JAt(e){return this.selectAll(e==null?XAt:QAt(typeof e=="function"?e:GPe(e)))}function ZAt(e){typeof e!="function"&&(e=WPe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new _l(r,this._parents)}function YPe(e){return new Array(e.length)}function eCt(){return new _l(this._enter||this._groups.map(YPe),this._parents)}function H$(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}H$.prototype={constructor:H$,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function tCt(e){return function(){return e}}function nCt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new H$(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function rCt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new H$(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function iCt(e){return e.__data__}function sCt(e,t){if(!arguments.length)return Array.from(this,iCt);var n=t?rCt:nCt,r=this._parents,i=this._groups;typeof e!="function"&&(e=tCt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=oCt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,x;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(x=g[b])&&++b<p;);w._next=x||null}}return o=new _l(o,r),o._enter=a,o._exit=u,o}function oCt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aCt(){return new _l(this._exit||this._groups.map(YPe),this._parents)}function uCt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function lCt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new _l(a,this._parents)}function cCt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function fCt(e){e||(e=dCt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new _l(i,this._parents).order()}function dCt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hCt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function pCt(){return Array.from(this)}function mCt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function gCt(){let e=0;for(const t of this)++e;return e}function yCt(){return!this.node()}function vCt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function bCt(e){return function(){this.removeAttribute(e)}}function _Ct(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wCt(e,t){return function(){this.setAttribute(e,t)}}function xCt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ECt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function TCt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function SCt(e,t){var n=GM(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?_Ct:bCt:typeof t=="function"?n.local?TCt:ECt:n.local?xCt:wCt)(n,t))}function KPe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ACt(e){return function(){this.style.removeProperty(e)}}function CCt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ICt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function kCt(e,t,n){return arguments.length>1?this.each((t==null?ACt:typeof t=="function"?ICt:CCt)(e,t,n??"")):dS(this.node(),e)}function dS(e,t){return e.style.getPropertyValue(t)||KPe(e).getComputedStyle(e,null).getPropertyValue(t)}function RCt(e){return function(){delete this[e]}}function NCt(e,t){return function(){this[e]=t}}function PCt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function DCt(e,t){return arguments.length>1?this.each((t==null?RCt:typeof t=="function"?PCt:NCt)(e,t)):this.node()[e]}function XPe(e){return e.trim().split(/^|\s+/)}function wre(e){return e.classList||new QPe(e)}function QPe(e){this._node=e,this._names=XPe(e.getAttribute("class")||"")}QPe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function JPe(e,t){for(var n=wre(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ZPe(e,t){for(var n=wre(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function OCt(e){return function(){JPe(this,e)}}function $Ct(e){return function(){ZPe(this,e)}}function LCt(e,t){return function(){(t.apply(this,arguments)?JPe:ZPe)(this,e)}}function MCt(e,t){var n=XPe(e+"");if(arguments.length<2){for(var r=wre(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?LCt:t?OCt:$Ct)(n,t))}function FCt(){this.textContent=""}function BCt(e){return function(){this.textContent=e}}function jCt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function UCt(e){return arguments.length?this.each(e==null?FCt:(typeof e=="function"?jCt:BCt)(e)):this.node().textContent}function zCt(){this.innerHTML=""}function VCt(e){return function(){this.innerHTML=e}}function HCt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function qCt(e){return arguments.length?this.each(e==null?zCt:(typeof e=="function"?HCt:VCt)(e)):this.node().innerHTML}function WCt(){this.nextSibling&&this.parentNode.appendChild(this)}function GCt(){return this.each(WCt)}function YCt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function KCt(){return this.each(YCt)}function XCt(e){var t=typeof e=="function"?e:VPe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function QCt(){return null}function JCt(e,t){var n=typeof e=="function"?e:VPe(e),r=t==null?QCt:typeof t=="function"?t:_re(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ZCt(){var e=this.parentNode;e&&e.removeChild(this)}function e3t(){return this.each(ZCt)}function t3t(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function n3t(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function r3t(e){return this.select(e?n3t:t3t)}function i3t(e){return arguments.length?this.property("__data__",e):this.node().__data__}function s3t(e){return function(t){e.call(this,t,this.__data__)}}function o3t(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function a3t(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function u3t(e,t,n){return function(){var r=this.__on,i,s=s3t(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function l3t(e,t,n){var r=o3t(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?u3t:a3t,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function e8e(e,t,n){var r=KPe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function c3t(e,t){return function(){return e8e(this,e,t)}}function f3t(e,t){return function(){return e8e(this,e,t.apply(this,arguments))}}function d3t(e,t){return this.each((typeof t=="function"?f3t:c3t)(e,t))}function*h3t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var xre=[null];function _l(e,t){this._groups=e,this._parents=t}function NR(){return new _l([[document.documentElement]],xre)}function p3t(){return this}_l.prototype=NR.prototype={constructor:_l,select:UAt,selectAll:HAt,selectChild:YAt,selectChildren:JAt,filter:ZAt,data:sCt,enter:eCt,exit:aCt,join:uCt,merge:lCt,selection:p3t,order:cCt,sort:fCt,call:hCt,nodes:pCt,node:mCt,size:gCt,empty:yCt,each:vCt,attr:SCt,style:kCt,property:DCt,classed:MCt,text:UCt,html:qCt,raise:GCt,lower:KCt,append:XCt,insert:JCt,remove:e3t,clone:r3t,datum:i3t,on:l3t,dispatch:d3t,[Symbol.iterator]:h3t};function cr(e){return typeof e=="string"?new _l([[document.querySelector(e)]],[document.documentElement]):new _l([[e]],xre)}function m3t(e){let t;for(;t=e.sourceEvent;)e=t;return e}function q$(e,t){if(e=m3t(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function t8e(e){return typeof e=="string"?new _l([document.querySelectorAll(e)],[document.documentElement]):new _l([HPe(e)],xre)}const RK={capture:!0,passive:!1};function NK(e){e.preventDefault(),e.stopImmediatePropagation()}function g3t(e){var t=e.document.documentElement,n=cr(e).on("dragstart.drag",NK,RK);"onselectstart"in t?n.on("selectstart.drag",NK,RK):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function y3t(e,t){var n=e.document.documentElement,r=cr(e).on("dragstart.drag",null);t&&(r.on("click.drag",NK,RK),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function jA(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function PR(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ab(){}var Vw=.7,hS=1/Vw,bT="\\s*([+-]?\\d+)\\s*",Gk="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",m0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",v3t=/^#([0-9a-f]{3,8})$/,b3t=new RegExp(`^rgb\\(${bT},${bT},${bT}\\)$`),_3t=new RegExp(`^rgb\\(${m0},${m0},${m0}\\)$`),w3t=new RegExp(`^rgba\\(${bT},${bT},${bT},${Gk}\\)$`),x3t=new RegExp(`^rgba\\(${m0},${m0},${m0},${Gk}\\)$`),E3t=new RegExp(`^hsl\\(${Gk},${m0},${m0}\\)$`),T3t=new RegExp(`^hsla\\(${Gk},${m0},${m0},${Gk}\\)$`),Sye={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jA(Ab,Hw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Aye,formatHex:Aye,formatHex8:S3t,formatHsl:A3t,formatRgb:Cye,toString:Cye});function Aye(){return this.rgb().formatHex()}function S3t(){return this.rgb().formatHex8()}function A3t(){return n8e(this).formatHsl()}function Cye(){return this.rgb().formatRgb()}function Hw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=v3t.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Iye(t):n===3?new ha(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?RP(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?RP(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=b3t.exec(e))?new ha(t[1],t[2],t[3],1):(t=_3t.exec(e))?new ha(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=w3t.exec(e))?RP(t[1],t[2],t[3],t[4]):(t=x3t.exec(e))?RP(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=E3t.exec(e))?Nye(t[1],t[2]/100,t[3]/100,1):(t=T3t.exec(e))?Nye(t[1],t[2]/100,t[3]/100,t[4]):Sye.hasOwnProperty(e)?Iye(Sye[e]):e==="transparent"?new ha(NaN,NaN,NaN,0):null}function Iye(e){return new ha(e>>16&255,e>>8&255,e&255,1)}function RP(e,t,n,r){return r<=0&&(e=t=n=NaN),new ha(e,t,n,r)}function Ere(e){return e instanceof Ab||(e=Hw(e)),e?(e=e.rgb(),new ha(e.r,e.g,e.b,e.opacity)):new ha}function Nv(e,t,n,r){return arguments.length===1?Ere(e):new ha(e,t,n,r??1)}function ha(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}jA(ha,Nv,PR(Ab,{brighter(e){return e=e==null?hS:Math.pow(hS,e),new ha(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vw:Math.pow(Vw,e),new ha(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ha(Tw(this.r),Tw(this.g),Tw(this.b),W$(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kye,formatHex:kye,formatHex8:C3t,formatRgb:Rye,toString:Rye}));function kye(){return`#${ow(this.r)}${ow(this.g)}${ow(this.b)}`}function C3t(){return`#${ow(this.r)}${ow(this.g)}${ow(this.b)}${ow((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rye(){const e=W$(this.opacity);return`${e===1?"rgb(":"rgba("}${Tw(this.r)}, ${Tw(this.g)}, ${Tw(this.b)}${e===1?")":`, ${e})`}`}function W$(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tw(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ow(e){return e=Tw(e),(e<16?"0":"")+e.toString(16)}function Nye(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new wh(e,t,n,r)}function n8e(e){if(e instanceof wh)return new wh(e.h,e.s,e.l,e.opacity);if(e instanceof Ab||(e=Hw(e)),!e)return new wh;if(e instanceof wh)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new wh(o,a,u,e.opacity)}function G$(e,t,n,r){return arguments.length===1?n8e(e):new wh(e,t,n,r??1)}function wh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}jA(wh,G$,PR(Ab,{brighter(e){return e=e==null?hS:Math.pow(hS,e),new wh(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vw:Math.pow(Vw,e),new wh(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ha(cH(e>=240?e-240:e+120,i,r),cH(e,i,r),cH(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new wh(Pye(this.h),NP(this.s),NP(this.l),W$(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=W$(this.opacity);return`${e===1?"hsl(":"hsla("}${Pye(this.h)}, ${NP(this.s)*100}%, ${NP(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pye(e){return e=(e||0)%360,e<0?e+360:e}function NP(e){return Math.max(0,Math.min(1,e||0))}function cH(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const r8e=Math.PI/180,i8e=180/Math.PI,Y$=18,s8e=.96422,o8e=1,a8e=.82521,u8e=4/29,_T=6/29,l8e=3*_T*_T,I3t=_T*_T*_T;function c8e(e){if(e instanceof g0)return new g0(e.l,e.a,e.b,e.opacity);if(e instanceof ug)return f8e(e);e instanceof ha||(e=Ere(e));var t=pH(e.r),n=pH(e.g),r=pH(e.b),i=fH((.2225045*t+.7168786*n+.0606169*r)/o8e),s,o;return t===n&&n===r?s=o=i:(s=fH((.4360747*t+.3850649*n+.1430804*r)/s8e),o=fH((.0139322*t+.0971045*n+.7141733*r)/a8e)),new g0(116*i-16,500*(s-i),200*(i-o),e.opacity)}function K$(e,t,n,r){return arguments.length===1?c8e(e):new g0(e,t,n,r??1)}function g0(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}jA(g0,K$,PR(Ab,{brighter(e){return new g0(this.l+Y$*(e??1),this.a,this.b,this.opacity)},darker(e){return new g0(this.l-Y$*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=s8e*dH(t),e=o8e*dH(e),n=a8e*dH(n),new ha(hH(3.1338561*t-1.6168667*e-.4906146*n),hH(-.9787684*t+1.9161415*e+.033454*n),hH(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function fH(e){return e>I3t?Math.pow(e,1/3):e/l8e+u8e}function dH(e){return e>_T?e*e*e:l8e*(e-u8e)}function hH(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function pH(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function k3t(e){if(e instanceof ug)return new ug(e.h,e.c,e.l,e.opacity);if(e instanceof g0||(e=c8e(e)),e.a===0&&e.b===0)return new ug(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*i8e;return new ug(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function X$(e,t,n,r){return arguments.length===1?k3t(e):new ug(e,t,n,r??1)}function ug(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function f8e(e){if(isNaN(e.h))return new g0(e.l,0,0,e.opacity);var t=e.h*r8e;return new g0(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}jA(ug,X$,PR(Ab,{brighter(e){return new ug(this.h,this.c,this.l+Y$*(e??1),this.opacity)},darker(e){return new ug(this.h,this.c,this.l-Y$*(e??1),this.opacity)},rgb(){return f8e(this).rgb()}}));var d8e=-.14861,Tre=1.78277,Sre=-.29227,YM=-.90649,Yk=1.97294,Dye=Yk*YM,Oye=Yk*Tre,$ye=Tre*Sre-YM*d8e;function R3t(e){if(e instanceof Sw)return new Sw(e.h,e.s,e.l,e.opacity);e instanceof ha||(e=Ere(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=($ye*r+Dye*t-Oye*n)/($ye+Dye-Oye),s=r-i,o=(Yk*(n-i)-Sre*s)/YM,a=Math.sqrt(o*o+s*s)/(Yk*i*(1-i)),u=a?Math.atan2(o,s)*i8e-120:NaN;return new Sw(u<0?u+360:u,a,i,e.opacity)}function PK(e,t,n,r){return arguments.length===1?R3t(e):new Sw(e,t,n,r??1)}function Sw(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}jA(Sw,PK,PR(Ab,{brighter(e){return e=e==null?hS:Math.pow(hS,e),new Sw(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vw:Math.pow(Vw,e),new Sw(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*r8e,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ha(255*(t+n*(d8e*r+Tre*i)),255*(t+n*(Sre*r+YM*i)),255*(t+n*(Yk*r)),this.opacity)}}));function h8e(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function p8e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return h8e((n-r/t)*t,o,i,s,a)}}function m8e(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return h8e((n-r/t)*t,i,s,o,a)}}const KM=e=>()=>e;function g8e(e,t){return function(n){return e+n*t}}function N3t(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function XM(e,t){var n=t-e;return n?g8e(e,n>180||n<-180?n-360*Math.round(n/360):n):KM(isNaN(e)?t:e)}function P3t(e){return(e=+e)==1?pa:function(t,n){return n-t?N3t(t,n,e):KM(isNaN(t)?n:t)}}function pa(e,t){var n=t-e;return n?g8e(e,n):KM(isNaN(e)?t:e)}const Kk=function e(t){var n=P3t(t);function r(i,s){var o=n((i=Nv(i)).r,(s=Nv(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=pa(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function y8e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Nv(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var D3t=y8e(p8e),O3t=y8e(m8e);function Are(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function v8e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $3t(e,t){return(v8e(t)?Are:b8e)(e,t)}function b8e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=p1(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function _8e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function id(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function w8e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=p1(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var DK=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mH=new RegExp(DK.source,"g");function L3t(e){return function(){return e}}function M3t(e){return function(t){return e(t)+""}}function Cre(e,t){var n=DK.lastIndex=mH.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=DK.exec(e))&&(i=mH.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:id(r,i)})),n=mH.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?M3t(u[0].x):L3t(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function p1(e,t){var n=typeof t,r;return t==null||n==="boolean"?KM(t):(n==="number"?id:n==="string"?(r=Hw(t))?(t=r,Kk):Cre:t instanceof Hw?Kk:t instanceof Date?_8e:v8e(t)?Are:Array.isArray(t)?b8e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?w8e:id)(e,t)}function F3t(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function B3t(e,t){var n=XM(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function DR(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Lye=180/Math.PI,OK={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function x8e(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Lye,skewX:Math.atan(u)*Lye,scaleX:o,scaleY:a}}var PP;function j3t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?OK:x8e(t.a,t.b,t.c,t.d,t.e,t.f)}function U3t(e){return e==null||(PP||(PP=document.createElementNS("http://www.w3.org/2000/svg","g")),PP.setAttribute("transform",e),!(e=PP.transform.baseVal.consolidate()))?OK:(e=e.matrix,x8e(e.a,e.b,e.c,e.d,e.e,e.f))}function E8e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:id(l,f)},{i:m-2,x:id(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:id(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:id(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:id(l,f)},{i:m-2,x:id(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var T8e=E8e(j3t,"px, ","px)","deg)"),S8e=E8e(U3t,", ",")",")"),z3t=1e-12;function Mye(e){return((e=Math.exp(e))+1/e)/2}function V3t(e){return((e=Math.exp(e))-1/e)/2}function H3t(e){return((e=Math.exp(2*e))-1)/(e+1)}const q3t=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<z3t)y=Math.log(d/l)/t,g=function(A){return[a+A*h,u+A*p,l*Math.exp(t*A*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),x=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-x)/t,g=function(A){var C=A*y,N=Mye(x),k=l/(n*v)*(N*H3t(t*C+x)-V3t(x));return[a+k*h,u+k*p,l*N/Mye(t*C+x)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function A8e(e){return function(t,n){var r=e((t=G$(t)).h,(n=G$(n)).h),i=pa(t.s,n.s),s=pa(t.l,n.l),o=pa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const W3t=A8e(XM);var G3t=A8e(pa);function Y3t(e,t){var n=pa((e=K$(e)).l,(t=K$(t)).l),r=pa(e.a,t.a),i=pa(e.b,t.b),s=pa(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function C8e(e){return function(t,n){var r=e((t=X$(t)).h,(n=X$(n)).h),i=pa(t.c,n.c),s=pa(t.l,n.l),o=pa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const K3t=C8e(XM);var X3t=C8e(pa);function I8e(e){return function t(n){n=+n;function r(i,s){var o=e((i=PK(i)).h,(s=PK(s)).h),a=pa(i.s,s.s),u=pa(i.l,s.l),l=pa(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Q3t=I8e(XM);var J3t=I8e(pa);function Ire(e,t){t===void 0&&(t=e,e=p1);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Z3t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const eIt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:p1,interpolateArray:$3t,interpolateBasis:p8e,interpolateBasisClosed:m8e,interpolateCubehelix:Q3t,interpolateCubehelixLong:J3t,interpolateDate:_8e,interpolateDiscrete:F3t,interpolateHcl:K3t,interpolateHclLong:X3t,interpolateHsl:W3t,interpolateHslLong:G3t,interpolateHue:B3t,interpolateLab:Y3t,interpolateNumber:id,interpolateNumberArray:Are,interpolateObject:w8e,interpolateRgb:Kk,interpolateRgbBasis:D3t,interpolateRgbBasisClosed:O3t,interpolateRound:DR,interpolateString:Cre,interpolateTransformCss:T8e,interpolateTransformSvg:S8e,interpolateZoom:q3t,piecewise:Ire,quantize:Z3t},Symbol.toStringTag,{value:"Module"}));var pS=0,NI=0,x3=0,k8e=1e3,Q$,PI,J$=0,qw=0,QM=0,Xk=typeof performance=="object"&&performance.now?performance:Date,R8e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function JM(){return qw||(R8e(tIt),qw=Xk.now()+QM)}function tIt(){qw=0}function Qk(){this._call=this._time=this._next=null}Qk.prototype=kre.prototype={constructor:Qk,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?JM():+n)+(t==null?0:+t),!this._next&&PI!==this&&(PI?PI._next=this:Q$=this,PI=this),this._call=e,this._time=n,$K()},stop:function(){this._call&&(this._call=null,this._time=1/0,$K())}};function kre(e,t,n){var r=new Qk;return r.restart(e,t,n),r}function nIt(){JM(),++pS;for(var e=Q$,t;e;)(t=qw-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pS}function Fye(){qw=(J$=Xk.now())+QM,pS=NI=0;try{nIt()}finally{pS=0,iIt(),qw=0}}function rIt(){var e=Xk.now(),t=e-J$;t>k8e&&(QM-=t,J$=e)}function iIt(){for(var e,t=Q$,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Q$=n);PI=e,$K(r)}function $K(e){if(!pS){NI&&(NI=clearTimeout(NI));var t=e-qw;t>24?(e<1/0&&(NI=setTimeout(Fye,e-Xk.now()-QM)),x3&&(x3=clearInterval(x3))):(x3||(J$=Xk.now(),x3=setInterval(rIt,k8e)),pS=1,R8e(Fye))}}function Bye(e,t,n){var r=new Qk;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function sIt(e,t,n){var r=new Qk,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?JM():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var oIt=WM("start","end","cancel","interrupt"),aIt=[],N8e=0,jye=1,LK=2,KD=3,Uye=4,MK=5,XD=6;function ZM(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;uIt(e,n,{name:t,index:r,group:i,on:oIt,tween:aIt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:N8e})}function Rre(e,t){var n=sp(e,t);if(n.state>N8e)throw new Error("too late; already scheduled");return n}function J0(e,t){var n=sp(e,t);if(n.state>KD)throw new Error("too late; already running");return n}function sp(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function uIt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=kre(s,0,n.time);function s(l){n.state=jye,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==jye)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===KD)return Bye(o);h.state===Uye?(h.state=XD,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=XD,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Bye(function(){n.state===KD&&(n.state=Uye,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=LK,n.on.call("start",e,e.__data__,n.index,n.group),n.state===LK){for(n.state=KD,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=MK,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===MK&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=XD,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function FK(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>LK&&r.state<MK,r.state=XD,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function lIt(e){return this.each(function(){FK(this,e)})}function cIt(e,t){var n,r;return function(){var i=J0(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function fIt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=J0(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function dIt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=sp(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?cIt:fIt)(n,e,t))}function Nre(e,t,n){var r=e._id;return e.each(function(){var i=J0(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return sp(i,r).value[t]}}function P8e(e,t){var n;return(typeof t=="number"?id:t instanceof Hw?Kk:(n=Hw(t))?(t=n,Kk):Cre)(e,t)}function hIt(e){return function(){this.removeAttribute(e)}}function pIt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mIt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function gIt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function yIt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function vIt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function bIt(e,t){var n=GM(e),r=n==="transform"?S8e:P8e;return this.attrTween(e,typeof t=="function"?(n.local?vIt:yIt)(n,r,Nre(this,"attr."+e,t)):t==null?(n.local?pIt:hIt)(n):(n.local?gIt:mIt)(n,r,t))}function _It(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wIt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function xIt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&wIt(e,s)),n}return i._value=t,i}function EIt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&_It(e,s)),n}return i._value=t,i}function TIt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=GM(e);return this.tween(n,(r.local?xIt:EIt)(r,t))}function SIt(e,t){return function(){Rre(this,e).delay=+t.apply(this,arguments)}}function AIt(e,t){return t=+t,function(){Rre(this,e).delay=t}}function CIt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?SIt:AIt)(t,e)):sp(this.node(),t).delay}function IIt(e,t){return function(){J0(this,e).duration=+t.apply(this,arguments)}}function kIt(e,t){return t=+t,function(){J0(this,e).duration=t}}function RIt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?IIt:kIt)(t,e)):sp(this.node(),t).duration}function NIt(e,t){if(typeof t!="function")throw new Error;return function(){J0(this,e).ease=t}}function PIt(e){var t=this._id;return arguments.length?this.each(NIt(t,e)):sp(this.node(),t).ease}function DIt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;J0(this,e).ease=n}}function OIt(e){if(typeof e!="function")throw new Error;return this.each(DIt(this._id,e))}function $It(e){typeof e!="function"&&(e=WPe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Vg(r,this._parents,this._name,this._id)}function LIt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Vg(o,this._parents,this._name,this._id)}function MIt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function FIt(e,t,n){var r,i,s=MIt(t)?Rre:J0;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function BIt(e,t){var n=this._id;return arguments.length<2?sp(this.node(),n).on.on(e):this.each(FIt(n,e,t))}function jIt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function UIt(){return this.on("end.remove",jIt(this._id))}function zIt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_re(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,ZM(l[d],t,n,d,l,sp(c,n)));return new Vg(s,this._parents,t,n)}function VIt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qPe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=sp(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&ZM(h,t,n,m,d,p);s.push(d),o.push(c)}return new Vg(s,o,t,n)}var HIt=NR.prototype.constructor;function qIt(){return new HIt(this._groups,this._parents)}function WIt(e,t){var n,r,i;return function(){var s=dS(this,e),o=(this.style.removeProperty(e),dS(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function D8e(e){return function(){this.style.removeProperty(e)}}function GIt(e,t,n){var r,i=n+"",s;return function(){var o=dS(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function YIt(e,t,n){var r,i,s;return function(){var o=dS(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),dS(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function KIt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=J0(this,e),l=u.on,c=u.value[s]==null?a||(a=D8e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function XIt(e,t,n){var r=(e+="")=="transform"?T8e:P8e;return t==null?this.styleTween(e,WIt(e,r)).on("end.style."+e,D8e(e)):typeof t=="function"?this.styleTween(e,YIt(e,r,Nre(this,"style."+e,t))).each(KIt(this._id,e)):this.styleTween(e,GIt(e,r,t),n).on("end.style."+e,null)}function QIt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function JIt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&QIt(e,o,n)),r}return s._value=t,s}function ZIt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,JIt(e,t,n??""))}function e4t(e){return function(){this.textContent=e}}function t4t(e){return function(){var t=e(this);this.textContent=t??""}}function n4t(e){return this.tween("text",typeof e=="function"?t4t(Nre(this,"text",e)):e4t(e==null?"":e+""))}function r4t(e){return function(t){this.textContent=e.call(this,t)}}function i4t(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&r4t(i)),t}return r._value=e,r}function s4t(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,i4t(e))}function o4t(){for(var e=this._name,t=this._id,n=O8e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=sp(u,t);ZM(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Vg(r,this._parents,e,n)}function a4t(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=J0(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var u4t=0;function Vg(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function O8e(){return++u4t}var km=NR.prototype;Vg.prototype={constructor:Vg,select:zIt,selectAll:VIt,selectChild:km.selectChild,selectChildren:km.selectChildren,filter:$It,merge:LIt,selection:qIt,transition:o4t,call:km.call,nodes:km.nodes,node:km.node,size:km.size,empty:km.empty,each:km.each,on:BIt,attr:bIt,attrTween:TIt,style:XIt,styleTween:ZIt,text:n4t,textTween:s4t,remove:UIt,tween:dIt,delay:CIt,duration:RIt,ease:PIt,easeVarying:OIt,end:a4t,[Symbol.iterator]:km[Symbol.iterator]};const l4t=e=>+e;function c4t(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var f4t={time:null,delay:0,duration:250,ease:c4t};function d4t(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function h4t(e){var t,n;e instanceof Vg?(t=e._id,e=e._name):(t=O8e(),(n=f4t).time=JM(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&ZM(u,e,t,l,o,n||d4t(u,t));return new Vg(r,this._parents,e,t)}NR.prototype.interrupt=lIt;NR.prototype.transition=h4t;const gH=e=>()=>e;function p4t(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function m4t(e){e.stopImmediatePropagation()}function yH(e){e.preventDefault(),e.stopImmediatePropagation()}var zye={name:"drag"},vH={name:"space"},K2={name:"handle"},X2={name:"center"};const{abs:Vye,max:lu,min:cu}=Math;function Hye(e){return[+e[0],+e[1]]}function BK(e){return[Hye(e[0]),Hye(e[1])]}var QD={name:"x",handles:["w","e"].map(Jk),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},JD={name:"y",handles:["n","s"].map(Jk),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},g4t={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Jk),input:function(e){return e==null?null:BK(e)},output:function(e){return e}},Rm={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},qye={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Wye={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},y4t={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},v4t={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Jk(e){return{type:e}}function b4t(e){return!e.ctrlKey&&!e.button}function _4t(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function w4t(){return navigator.maxTouchPoints||"ontouchstart"in this}function bH(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function x4t(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function $8e(){return Pre(QD)}function L8e(){return Pre(JD)}function M8e(){return Pre(g4t)}function Pre(e){var t=_4t,n=b4t,r=w4t,i=!0,s=WM("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([Jk("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Rm.overlay).merge(y).each(function(){var b=bH(this).extent;cr(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([Jk("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Rm.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Rm[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,x=c(b,arguments),S=w.selection,A=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),C=p1(S,A);function N(k){w.selection=k===1&&A===null?null:C(k),l.call(b),x.brush()}return S!==null&&A!==null?N:N(1)}):g.each(function(){var b=this,w=arguments,x=b.__brush,S=e.input(typeof y=="function"?y.apply(b,w):y,x.extent),A=c(b,w).beforestart();FK(b),x.selection=S===null?null:S,l.call(b),A.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=cr(this),y=bH(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=cr(this.that).datum();s.call(g,this.that,new p4t(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?zye:i&&g.altKey?X2:K2,w=e===JD?null:y4t[v],x=e===QD?null:v4t[v],S=bH(y),A=S.extent,C=S.selection,N=A[0][0],k,D,L=A[0][1],O,B,q=A[1][0],H,G,K=A[1][1],J,F,j=0,W=0,M,V=w&&x&&i&&g.shiftKey,Q,se,be=Array.from(g.touches||[g],Se=>{const Fe=Se.identifier;return Se=q$(Se,y),Se.point0=Se.slice(),Se.identifier=Fe,Se});FK(y);var he=c(y,arguments,!0).beforestart();if(v==="overlay"){C&&(M=!0);const Se=[be[0],be[1]||be[0]];S.selection=C=[[k=e===JD?N:cu(Se[0][0],Se[1][0]),O=e===QD?L:cu(Se[0][1],Se[1][1])],[H=e===JD?q:lu(Se[0][0],Se[1][0]),J=e===QD?K:lu(Se[0][1],Se[1][1])]],be.length>1&&Tt(g)}else k=C[0][0],O=C[0][1],H=C[1][0],J=C[1][1];D=k,B=O,G=H,F=J;var Ce=cr(y).attr("pointer-events","none"),De=Ce.selectAll(".overlay").attr("cursor",Rm[v]);if(g.touches)he.moved=Re,he.ended=Ze;else{var rt=cr(g.view).on("mousemove.brush",Re,!0).on("mouseup.brush",Ze,!0);i&&rt.on("keydown.brush",It,!0).on("keyup.brush",mt,!0),g3t(g.view)}l.call(y),he.start(g,b.name);function Re(Se){for(const Fe of Se.changedTouches||[Se])for(const st of be)st.identifier===Fe.identifier&&(st.cur=q$(Fe,y));if(V&&!Q&&!se&&be.length===1){const Fe=be[0];Vye(Fe.cur[0]-Fe[0])>Vye(Fe.cur[1]-Fe[1])?se=!0:Q=!0}for(const Fe of be)Fe.cur&&(Fe[0]=Fe.cur[0],Fe[1]=Fe.cur[1]);M=!0,yH(Se),Tt(Se)}function Tt(Se){const Fe=be[0],st=Fe.point0;var yt;switch(j=Fe[0]-st[0],W=Fe[1]-st[1],b){case vH:case zye:{w&&(j=lu(N-k,cu(q-H,j)),D=k+j,G=H+j),x&&(W=lu(L-O,cu(K-J,W)),B=O+W,F=J+W);break}case K2:{be[1]?(w&&(D=lu(N,cu(q,be[0][0])),G=lu(N,cu(q,be[1][0])),w=1),x&&(B=lu(L,cu(K,be[0][1])),F=lu(L,cu(K,be[1][1])),x=1)):(w<0?(j=lu(N-k,cu(q-k,j)),D=k+j,G=H):w>0&&(j=lu(N-H,cu(q-H,j)),D=k,G=H+j),x<0?(W=lu(L-O,cu(K-O,W)),B=O+W,F=J):x>0&&(W=lu(L-J,cu(K-J,W)),B=O,F=J+W));break}case X2:{w&&(D=lu(N,cu(q,k-j*w)),G=lu(N,cu(q,H+j*w))),x&&(B=lu(L,cu(K,O-W*x)),F=lu(L,cu(K,J+W*x)));break}}G<D&&(w*=-1,yt=k,k=H,H=yt,yt=D,D=G,G=yt,v in qye&&De.attr("cursor",Rm[v=qye[v]])),F<B&&(x*=-1,yt=O,O=J,J=yt,yt=B,B=F,F=yt,v in Wye&&De.attr("cursor",Rm[v=Wye[v]])),S.selection&&(C=S.selection),Q&&(D=C[0][0],G=C[1][0]),se&&(B=C[0][1],F=C[1][1]),(C[0][0]!==D||C[0][1]!==B||C[1][0]!==G||C[1][1]!==F)&&(S.selection=[[D,B],[G,F]],l.call(y),he.brush(Se,b.name))}function Ze(Se){if(m4t(Se),Se.touches){if(Se.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else y3t(Se.view,M),rt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Ce.attr("pointer-events","all"),De.attr("cursor",Rm.overlay),S.selection&&(C=S.selection),x4t(C)&&(S.selection=null,l.call(y)),he.end(Se,b.name)}function It(Se){switch(Se.keyCode){case 16:{V=w&&x;break}case 18:{b===K2&&(w&&(H=G-j*w,k=D+j*w),x&&(J=F-W*x,O=B+W*x),b=X2,Tt(Se));break}case 32:{(b===K2||b===X2)&&(w<0?H=G-j:w>0&&(k=D-j),x<0?J=F-W:x>0&&(O=B-W),b=vH,De.attr("cursor",Rm.selection),Tt(Se));break}default:return}yH(Se)}function mt(Se){switch(Se.keyCode){case 16:{V&&(Q=se=V=!1,Tt(Se));break}case 18:{b===X2&&(w<0?H=G:w>0&&(k=D),x<0?J=F:x>0&&(O=B),b=K2,Tt(Se));break}case 32:{b===vH&&(Se.altKey?(w&&(H=G-j*w,k=D+j*w),x&&(J=F-W*x,O=B+W*x),b=X2):(w<0?H=G:w>0&&(k=D),x<0?J=F:x>0&&(O=B),b=K2),De.attr("cursor",Rm[v]),Tt(Se));break}default:return}yH(Se)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=BK(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:gH(BK(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:gH(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:gH(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const jK=Math.PI,UK=2*jK,k_=1e-6,E4t=UK-k_;function F8e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function T4t(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return F8e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Dre=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?F8e:T4t(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>k_)if(!(Math.abs(f*u-l*c)>k_)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((jK-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,x=b/y;Math.abs(w-1)>k_&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+x*u},${this._y1=n+x*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>k_||Math.abs(this._y1-c)>k_)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%UK+UK),d>E4t?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>k_&&this._append`A${r},${r},0,${+(d>=jK)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function eF(){return new Dre}eF.prototype=Dre.prototype;const Eg=11102230246251565e-32,fu=134217729,S4t=(3+8*Eg)*Eg;function _H(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function A4t(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function OR(e){return new Float64Array(e)}const C4t=(3+16*Eg)*Eg,I4t=(2+12*Eg)*Eg,k4t=(9+64*Eg)*Eg*Eg,Q2=OR(4),Gye=OR(8),Yye=OR(12),Kye=OR(16),Qu=OR(4);function R4t(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,x,S,A,C;const N=e-i,k=n-i,D=t-s,L=r-s;w=N*L,d=fu*N,h=d-(d-N),p=N-h,d=fu*L,m=d-(d-L),g=L-m,x=p*g-(w-h*m-p*m-h*g),S=D*k,d=fu*D,h=d-(d-D),p=D-h,d=fu*k,m=d-(d-k),g=k-m,A=p*g-(S-h*m-p*m-h*g),y=x-A,f=x-y,Q2[0]=x-(y+f)+(f-A),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Q2[1]=b-(y+f)+(f-S),C=v+y,f=C-v,Q2[2]=v-(C-f)+(y-f),Q2[3]=C;let O=A4t(4,Q2),B=I4t*o;if(O>=B||-O>=B||(f=e-N,a=e-(N+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-D,u=t-(D+f)+(f-s),f=r-L,c=r-(L+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(B=k4t*o+S4t*Math.abs(O),O+=N*c+L*a-(D*l+k*u),O>=B||-O>=B))return O;w=a*L,d=fu*a,h=d-(d-a),p=a-h,d=fu*L,m=d-(d-L),g=L-m,x=p*g-(w-h*m-p*m-h*g),S=u*k,d=fu*u,h=d-(d-u),p=u-h,d=fu*k,m=d-(d-k),g=k-m,A=p*g-(S-h*m-p*m-h*g),y=x-A,f=x-y,Qu[0]=x-(y+f)+(f-A),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Qu[1]=b-(y+f)+(f-S),C=v+y,f=C-v,Qu[2]=v-(C-f)+(y-f),Qu[3]=C;const q=_H(4,Q2,4,Qu,Gye);w=N*c,d=fu*N,h=d-(d-N),p=N-h,d=fu*c,m=d-(d-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),S=D*l,d=fu*D,h=d-(d-D),p=D-h,d=fu*l,m=d-(d-l),g=l-m,A=p*g-(S-h*m-p*m-h*g),y=x-A,f=x-y,Qu[0]=x-(y+f)+(f-A),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Qu[1]=b-(y+f)+(f-S),C=v+y,f=C-v,Qu[2]=v-(C-f)+(y-f),Qu[3]=C;const H=_H(q,Gye,4,Qu,Yye);w=a*c,d=fu*a,h=d-(d-a),p=a-h,d=fu*c,m=d-(d-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),S=u*l,d=fu*u,h=d-(d-u),p=u-h,d=fu*l,m=d-(d-l),g=l-m,A=p*g-(S-h*m-p*m-h*g),y=x-A,f=x-y,Qu[0]=x-(y+f)+(f-A),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Qu[1]=b-(y+f)+(f-S),C=v+y,f=C-v,Qu[2]=v-(C-f)+(y-f),Qu[3]=C;const G=_H(H,Yye,4,Qu,Kye);return Kye[G-1]}function DP(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=C4t*l?u:-R4t(e,t,n,r,i,s,l)}const Xye=Math.pow(2,-52),OP=new Uint32Array(512);class Z${static from(t,n=$4t,r=L4t){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new Z$(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let N=0;N<o;N++){const k=t[2*N],D=t[2*N+1];k<a&&(a=k),D<u&&(u=D),k>l&&(l=k),D>c&&(c=D),this._ids[N]=N}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let N=0,k=1/0;N<o;N++){const D=wH(f,d,t[2*N],t[2*N+1]);D<k&&(h=N,k=D)}const g=t[2*h],y=t[2*h+1];for(let N=0,k=1/0;N<o;N++){if(N===h)continue;const D=wH(g,y,t[2*N],t[2*N+1]);D<k&&D>0&&(p=N,k=D)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let N=0;N<o;N++){if(N===h||N===p)continue;const k=D4t(g,y,v,b,t[2*N],t[2*N+1]);k<w&&(m=N,w=k)}let x=t[2*m],S=t[2*m+1];if(w===1/0){for(let D=0;D<o;D++)this._dists[D]=t[2*D]-t[0]||t[2*D+1]-t[1];YE(this._ids,this._dists,0,o-1);const N=new Uint32Array(o);let k=0;for(let D=0,L=-1/0;D<o;D++){const O=this._ids[D],B=this._dists[O];B>L&&(N[k++]=O,L=B)}this.hull=N.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(DP(g,y,v,b,x,S)<0){const N=p,k=v,D=b;p=m,v=x,b=S,m=N,x=k,S=D}const A=O4t(g,y,v,b,x,S);this._cx=A.x,this._cy=A.y;for(let N=0;N<o;N++)this._dists[N]=wH(t[2*N],t[2*N+1],A.x,A.y);YE(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(x,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let N=0,k,D;N<this._ids.length;N++){const L=this._ids[N],O=t[2*L],B=t[2*L+1];if(N>0&&Math.abs(O-k)<=Xye&&Math.abs(B-D)<=Xye||(k=O,D=B,L===h||L===p||L===m))continue;let q=0;for(let F=0,j=this._hashKey(O,B);F<this._hashSize&&(q=s[(j+F)%this._hashSize],!(q!==-1&&q!==r[q]));F++);q=n[q];let H=q,G;for(;G=r[H],DP(O,B,t[2*H],t[2*H+1],t[2*G],t[2*G+1])>=0;)if(H=G,H===q){H=-1;break}if(H===-1)continue;let K=this._addTriangle(H,L,r[H],-1,-1,i[H]);i[L]=this._legalize(K+2),i[H]=K,C++;let J=r[H];for(;G=r[J],DP(O,B,t[2*J],t[2*J+1],t[2*G],t[2*G+1])<0;)K=this._addTriangle(J,L,G,i[L],-1,i[J]),i[L]=this._legalize(K+2),r[J]=J,C--,J=G;if(H===q)for(;G=n[H],DP(O,B,t[2*G],t[2*G+1],t[2*H],t[2*H+1])<0;)K=this._addTriangle(G,L,H,-1,i[H],i[G]),this._legalize(K+2),i[G]=K,r[H]=H,C--,H=G;this._hullStart=n[L]=H,r[H]=n[J]=L,r[L]=J,s[this._hashKey(O,B)]=L,s[this._hashKey(t[2*H],t[2*H+1])]=H}this.hull=new Uint32Array(C);for(let N=0,k=this._hullStart;N<C;N++)this.hull[N]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(N4t(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=OP[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(P4t(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<OP.length&&(OP[s++]=v)}else{if(s===0)break;t=OP[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function N4t(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function wH(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function P4t(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function D4t(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function O4t(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function YE(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;E3(e,i,s),t[e[n]]>t[e[r]]&&E3(e,n,r),t[e[s]]>t[e[r]]&&E3(e,s,r),t[e[n]]>t[e[s]]&&E3(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;E3(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(YE(e,t,s,r),YE(e,t,n,o-1)):(YE(e,t,n,o-1),YE(e,t,s,r))}}function E3(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function $4t(e){return e[0]}function L4t(e){return e[1]}const Qye=1e-6;class aw{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Qye||Math.abs(this._y1-s)>Qye)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class zK{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let M4t=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,x=r[m+1]*2,S=r[m+2]*2,A=t[w],C=t[w+1],N=t[x],k=t[x+1],D=t[S],L=t[S+1],O=N-A,B=k-C,q=D-A,H=L-C,G=(O*H-B*q)*2;if(Math.abs(G)<1e-9){if(s===void 0){s=o=0;for(const J of n)s+=t[J*2],o+=t[J*2+1];s/=n.length,o/=n.length}const K=1e9*Math.sign((s-A)*H-(o-C)*q);v=(A+D)/2-K*H,b=(C+L)/2+K*q}else{const K=1/G,J=O*O+B*B,F=q*q+H*H;v=A+(H*J-B*F)*K,b=C+(O*F-q*J)*K}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new aw:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new aw:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new aw:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new zK;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const F4t=2*Math.PI,J2=Math.pow;function B4t(e){return e[0]}function j4t(e){return e[1]}function U4t(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function z4t(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Ore{static from(t,n=B4t,r=j4t,i){return new Ore("length"in t?V4t(t,n,r,i):Float64Array.from(H4t(t,n,r,i)))}constructor(t){this._delaunator=new Z$(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&U4t(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=z4t(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new Z$(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new M4t(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=J2(n-l[t*2],2)+J2(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=J2(n-l[p*2],2)+J2(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&J2(n-l[h*2],2)+J2(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new aw:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new aw:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,F4t)}return r&&r.value()}renderHull(t){const n=t==null?t=new aw:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new zK;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new aw:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new zK;return this.renderTriangle(t,n),n.value()}}function V4t(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*H4t(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Jye={},xH={},EH=34,T3=10,TH=13;function B8e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function q4t(e,t){var n=B8e(e);return function(r,i){return t(n(r),i,e)}}function Zye(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Hl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function W4t(e){return e<0?"-"+Hl(-e,6):e>9999?"+"+Hl(e,6):Hl(e,4)}function G4t(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":W4t(e.getUTCFullYear())+"-"+Hl(e.getUTCMonth()+1,2)+"-"+Hl(e.getUTCDate(),2)+(i?"T"+Hl(t,2)+":"+Hl(n,2)+":"+Hl(r,2)+"."+Hl(i,3)+"Z":r?"T"+Hl(t,2)+":"+Hl(n,2)+":"+Hl(r,2)+"Z":n||t?"T"+Hl(t,2)+":"+Hl(n,2)+"Z":"")}function j8e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?q4t(g,d):B8e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===T3&&--p,f.charCodeAt(p-1)===TH&&--p;function w(){if(v)return xH;if(b)return b=!1,Jye;var S,A=m,C;if(f.charCodeAt(A)===EH){for(;m++<p&&f.charCodeAt(m)!==EH||f.charCodeAt(++m)===EH;);return(S=m)>=p?v=!0:(C=f.charCodeAt(m++))===T3?b=!0:C===TH&&(b=!0,f.charCodeAt(m)===T3&&++m),f.slice(A+1,S-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(S=m++))===T3)b=!0;else if(C===TH)b=!0,f.charCodeAt(m)===T3&&++m;else if(C!==n)continue;return f.slice(A,S)}return v=!0,f.slice(A,p)}for(;(y=w())!==xH;){for(var x=[];y!==Jye&&y!==xH;)x.push(y),y=w();d&&(x=d(x,g++))==null||h.push(x)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Zye(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Zye(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?G4t(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Y4t=j8e(","),K4t=Y4t.parse;function X4t(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Q4t(e,t){return fetch(e,t).then(X4t)}function J4t(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Q4t(t,n).then(function(i){return e(i,r)})}}var U8e=J4t(K4t);function Z4t(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function ekt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return z8e(this.cover(t,n),t,n,e)}function z8e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function tkt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)z8e(this,o[n],a[n],e[n]);return this}function nkt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function rkt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function ikt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ul(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function skt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new ul(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new ul(h[3],g,y,u,l),new ul(h[2],o,y,g,l),new ul(h[1],g,a,u,y),new ul(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var x=Math.sqrt(n=w);i=e-x,s=t-x,c=e+x,f=t+x,r=h.data}}return r}function okt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function akt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function ukt(){return this._root}function lkt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function ckt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new ul(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new ul(i,l,c,a,u)),(i=r[2])&&t.push(new ul(i,s,c,l,u)),(i=r[1])&&t.push(new ul(i,l,o,a,c)),(i=r[0])&&t.push(new ul(i,s,o,l,c))}return this}function fkt(e){var t=[],n=[],r;for(this._root&&t.push(new ul(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new ul(s,o,a,c,f)),(s=i[1])&&t.push(new ul(s,c,a,u,f)),(s=i[2])&&t.push(new ul(s,o,f,c,l)),(s=i[3])&&t.push(new ul(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function dkt(e){return e[0]}function hkt(e){return arguments.length?(this._x=e,this):this._x}function pkt(e){return e[1]}function mkt(e){return arguments.length?(this._y=e,this):this._y}function $re(e,t,n){var r=new Lre(t??dkt,n??pkt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Lre(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function eve(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Il=$re.prototype=Lre.prototype;Il.copy=function(){var e=new Lre(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=eve(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=eve(r));return e};Il.add=ekt;Il.addAll=tkt;Il.cover=nkt;Il.data=rkt;Il.extent=ikt;Il.find=skt;Il.remove=okt;Il.removeAll=akt;Il.root=ukt;Il.size=lkt;Il.visit=ckt;Il.visitAfter=fkt;Il.x=hkt;Il.y=mkt;function cl(e){return function(){return e}}function By(e){return(e()-.5)*1e-6}function gkt(e){return e.x+e.vx}function ykt(e){return e.y+e.vy}function vkt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=cl(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=$re(t,gkt,ykt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,x,S,A){var C=b.data,N=b.r,k=m+N;if(C){if(C.index>d.index){var D=h-C.x-C.vx,L=p-C.y-C.vy,O=D*D+L*L;O<k*k&&(D===0&&(D=By(r),O+=D*D),L===0&&(L=By(r),O+=L*L),O=(k-(O=Math.sqrt(O)))/O*i,d.vx+=(D*=O)*(k=(N*=N)/(g+N)),d.vy+=(L*=O)*k,C.vx-=D*(k=1-k),C.vy-=L*k)}return}return w>h+k||S<h-k||x>p+k||A<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:cl(+l),u(),o):e},o}function bkt(e){return e.index}function tve(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function _kt(e){var t=bkt,n=f,r,i=cl(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,x,S,A,C,N,k;b<v;++b)w=e[b],x=w.source,S=w.target,A=S.x+S.vx-x.x-x.vx||By(l),C=S.y+S.vy-x.y-x.vy||By(l),N=Math.sqrt(A*A+C*C),N=(N-s[b])/N*g*r[b],A*=N,C*=N,S.vx-=A*(k=u[b]),S.vy-=C*k,x.vx+=A*(k=1-k),x.vy+=C*k}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((x,S)=>[t(x,S,o),x])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=tve(b,w.source)),typeof w.target!="object"&&(w.target=tve(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:cl(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:cl(+g),m(),d):i},d}const wkt=1664525,xkt=1013904223,nve=4294967296;function Ekt(){let e=1;return()=>(e=(wkt*e+xkt)%nve)/nve}function Tkt(e){return e.x}function Skt(e){return e.y}var Akt=10,Ckt=Math.PI*(3-Math.sqrt(5));function Ikt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=kre(f),l=WM("tick","end"),c=Ekt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Akt*Math.sqrt(.5+m),b=m*Ckt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,x,S,A,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)A=e[v],w=m-A.x,x=g-A.y,S=w*w+x*x,S<y&&(C=A,y=S);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function kkt(){var e,t,n,r,i=cl(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=$re(e,Tkt,Skt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=By(n),w+=y*y),v===0&&(v=By(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=By(n),w+=y*y),v===0&&(v=By(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:cl(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Rkt(e){var t=cl(.1),n,r,i;typeof e!="function"&&(e=cl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:cl(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:cl(+a),o(),s):e},s}function Nkt(e){var t=cl(.1),n,r,i;typeof e!="function"&&(e=cl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:cl(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:cl(+a),o(),s):e},s}function Pkt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function e9(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function mS(e){return e=e9(Math.abs(e)),e?e[1]:NaN}function Dkt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Okt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var $kt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ww(e){if(!(t=$kt.exec(e)))throw new Error("invalid format: "+e);var t;return new Mre({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ww.prototype=Mre.prototype;function Mre(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Mre.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Lkt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var V8e;function Mkt(e,t){var n=e9(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(V8e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+e9(e,Math.max(0,t+s-1))[0]}function rve(e,t){var n=e9(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ive={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Pkt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>rve(e*100,t),r:rve,s:Mkt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sve(e){return e}var ove=Array.prototype.map,ave=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function H8e(e){var t=e.grouping===void 0||e.thousands===void 0?sve:Dkt(ove.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?sve:Okt(ove.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Ww(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,x=f.type;x==="n"?(v=!0,x="g"):ive[x]||(b===void 0&&(b=12),w=!0,x="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",A=m==="$"?r:/[%p]/.test(x)?o:"",C=ive[x],N=/[defgprs%]/.test(x);b=b===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(D){var L=S,O=A,B,q,H;if(x==="c")O=C(D)+O,D="";else{D=+D;var G=D<0||1/D<0;if(D=isNaN(D)?u:C(Math.abs(D),b),w&&(D=Lkt(D)),G&&+D==0&&p!=="+"&&(G=!1),L=(G?p==="("?p:a:p==="-"||p==="("?"":p)+L,O=(x==="s"?ave[8+V8e/3]:"")+O+(G&&p==="("?")":""),N){for(B=-1,q=D.length;++B<q;)if(H=D.charCodeAt(B),48>H||H>57){O=(H===46?i+D.slice(B+1):D.slice(B))+O,D=D.slice(0,B);break}}}v&&!g&&(D=t(D,1/0));var K=L.length+D.length+O.length,J=K<y?new Array(y-K+1).join(d):"";switch(v&&g&&(D=t(J+D,J.length?y-O.length:1/0),J=""),h){case"<":D=L+D+O+J;break;case"=":D=L+J+D+O;break;case"^":D=J.slice(0,K=J.length>>1)+L+D+O+J.slice(K);break;default:D=J+L+D+O;break}return s(D)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=Ww(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(mS(d)/3)))*3,m=Math.pow(10,-p),g=ave[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var $P,Cb,Fre;Fkt({thousands:",",grouping:[3],currency:["$",""]});function Fkt(e){return $P=H8e(e),Cb=$P.format,Fre=$P.formatPrefix,$P}function q8e(e){return Math.max(0,-mS(Math.abs(e)))}function W8e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mS(t)/3)))*3-mS(Math.abs(e)))}function G8e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mS(t)-mS(e))+1}var hn=1e-6,VK=1e-12,fr=Math.PI,Ys=fr/2,t9=fr/4,wl=fr*2,so=180/fr,ar=fr/180,Lr=Math.abs,UA=Math.atan,_d=Math.atan2,fn=Math.cos,LP=Math.ceil,Y8e=Math.exp,HK=Math.hypot,n9=Math.log,SH=Math.pow,rn=Math.sin,cd=Math.sign||function(e){return e>0?1:e<0?-1:0},xl=Math.sqrt,Bre=Math.tan;function K8e(e){return e>1?0:e<-1?fr:Math.acos(e)}function xc(e){return e>1?Ys:e<-1?-Ys:Math.asin(e)}function Ua(){}function r9(e,t){e&&lve.hasOwnProperty(e.type)&&lve[e.type](e,t)}var uve={Feature:function(e,t){r9(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)r9(n[r].geometry,t)}},lve={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){qK(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)qK(n[r],t,0)},Polygon:function(e,t){cve(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)cve(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)r9(n[r],t)}};function qK(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function cve(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)qK(e[n],t,1);t.polygonEnd()}function Qm(e,t){e&&uve.hasOwnProperty(e.type)?uve[e.type](e,t):r9(e,t)}var i9=new pl,s9=new pl,X8e,Q8e,WK,GK,YK,R0={point:Ua,lineStart:Ua,lineEnd:Ua,polygonStart:function(){i9=new pl,R0.lineStart=Bkt,R0.lineEnd=jkt},polygonEnd:function(){var e=+i9;s9.add(e<0?wl+e:e),this.lineStart=this.lineEnd=this.point=Ua},sphere:function(){s9.add(wl)}};function Bkt(){R0.point=Ukt}function jkt(){J8e(X8e,Q8e)}function Ukt(e,t){R0.point=J8e,X8e=e,Q8e=t,e*=ar,t*=ar,WK=e,GK=fn(t=t/2+t9),YK=rn(t)}function J8e(e,t){e*=ar,t*=ar,t=t/2+t9;var n=e-WK,r=n>=0?1:-1,i=r*n,s=fn(t),o=rn(t),a=YK*o,u=GK*s+a*fn(i),l=a*r*rn(i);i9.add(_d(l,u)),WK=e,GK=s,YK=o}function zkt(e){return s9=new pl,Qm(e,R0),s9*2}function o9(e){return[_d(e[1],e[0]),xc(e[2])]}function Gw(e){var t=e[0],n=e[1],r=fn(n);return[r*fn(t),r*rn(t),rn(n)]}function MP(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gS(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function AH(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function FP(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function a9(e){var t=xl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ns,Jl,Bs,Xc,R_,Z8e,eDe,wT,O4,vy,Hg,Wm={point:KK,lineStart:fve,lineEnd:dve,polygonStart:function(){Wm.point=nDe,Wm.lineStart=Vkt,Wm.lineEnd=Hkt,O4=new pl,R0.polygonStart()},polygonEnd:function(){R0.polygonEnd(),Wm.point=KK,Wm.lineStart=fve,Wm.lineEnd=dve,i9<0?(Ns=-(Bs=180),Jl=-(Xc=90)):O4>hn?Xc=90:O4<-1e-6&&(Jl=-90),Hg[0]=Ns,Hg[1]=Bs},sphere:function(){Ns=-(Bs=180),Jl=-(Xc=90)}};function KK(e,t){vy.push(Hg=[Ns=e,Bs=e]),t<Jl&&(Jl=t),t>Xc&&(Xc=t)}function tDe(e,t){var n=Gw([e*ar,t*ar]);if(wT){var r=gS(wT,n),i=[r[1],-r[0],0],s=gS(i,r);a9(s),s=o9(s);var o=e-R_,a=o>0?1:-1,u=s[0]*so*a,l,c=Lr(o)>180;c^(a*R_<u&&u<a*e)?(l=s[1]*so,l>Xc&&(Xc=l)):(u=(u+360)%360-180,c^(a*R_<u&&u<a*e)?(l=-s[1]*so,l<Jl&&(Jl=l)):(t<Jl&&(Jl=t),t>Xc&&(Xc=t))),c?e<R_?Yc(Ns,e)>Yc(Ns,Bs)&&(Bs=e):Yc(e,Bs)>Yc(Ns,Bs)&&(Ns=e):Bs>=Ns?(e<Ns&&(Ns=e),e>Bs&&(Bs=e)):e>R_?Yc(Ns,e)>Yc(Ns,Bs)&&(Bs=e):Yc(e,Bs)>Yc(Ns,Bs)&&(Ns=e)}else vy.push(Hg=[Ns=e,Bs=e]);t<Jl&&(Jl=t),t>Xc&&(Xc=t),wT=n,R_=e}function fve(){Wm.point=tDe}function dve(){Hg[0]=Ns,Hg[1]=Bs,Wm.point=KK,wT=null}function nDe(e,t){if(wT){var n=e-R_;O4.add(Lr(n)>180?n+(n>0?360:-360):n)}else Z8e=e,eDe=t;R0.point(e,t),tDe(e,t)}function Vkt(){R0.lineStart()}function Hkt(){nDe(Z8e,eDe),R0.lineEnd(),Lr(O4)>hn&&(Ns=-(Bs=180)),Hg[0]=Ns,Hg[1]=Bs,wT=null}function Yc(e,t){return(t-=e)<0?t+360:t}function qkt(e,t){return e[0]-t[0]}function hve(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Wkt(e){var t,n,r,i,s,o,a;if(Xc=Bs=-(Ns=Jl=1/0),vy=[],Qm(e,Wm),n=vy.length){for(vy.sort(qkt),t=1,r=vy[0],s=[r];t<n;++t)i=vy[t],hve(r,i[0])||hve(r,i[1])?(Yc(r[0],i[1])>Yc(r[0],r[1])&&(r[1]=i[1]),Yc(i[0],r[1])>Yc(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Yc(r[1],i[0]))>o&&(o=a,Ns=i[0],Bs=r[1])}return vy=Hg=null,Ns===1/0||Jl===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ns,Jl],[Bs,Xc]]}var DI,u9,l9,c9,f9,d9,h9,p9,XK,QK,JK,rDe,iDe,sl,ol,al,Ih={sphere:Ua,point:jre,lineStart:pve,lineEnd:mve,polygonStart:function(){Ih.lineStart=Kkt,Ih.lineEnd=Xkt},polygonEnd:function(){Ih.lineStart=pve,Ih.lineEnd=mve}};function jre(e,t){e*=ar,t*=ar;var n=fn(t);$R(n*fn(e),n*rn(e),rn(t))}function $R(e,t,n){++DI,l9+=(e-l9)/DI,c9+=(t-c9)/DI,f9+=(n-f9)/DI}function pve(){Ih.point=Gkt}function Gkt(e,t){e*=ar,t*=ar;var n=fn(t);sl=n*fn(e),ol=n*rn(e),al=rn(t),Ih.point=Ykt,$R(sl,ol,al)}function Ykt(e,t){e*=ar,t*=ar;var n=fn(t),r=n*fn(e),i=n*rn(e),s=rn(t),o=_d(xl((o=ol*s-al*i)*o+(o=al*r-sl*s)*o+(o=sl*i-ol*r)*o),sl*r+ol*i+al*s);u9+=o,d9+=o*(sl+(sl=r)),h9+=o*(ol+(ol=i)),p9+=o*(al+(al=s)),$R(sl,ol,al)}function mve(){Ih.point=jre}function Kkt(){Ih.point=Qkt}function Xkt(){sDe(rDe,iDe),Ih.point=jre}function Qkt(e,t){rDe=e,iDe=t,e*=ar,t*=ar,Ih.point=sDe;var n=fn(t);sl=n*fn(e),ol=n*rn(e),al=rn(t),$R(sl,ol,al)}function sDe(e,t){e*=ar,t*=ar;var n=fn(t),r=n*fn(e),i=n*rn(e),s=rn(t),o=ol*s-al*i,a=al*r-sl*s,u=sl*i-ol*r,l=HK(o,a,u),c=xc(l),f=l&&-c/l;XK.add(f*o),QK.add(f*a),JK.add(f*u),u9+=c,d9+=c*(sl+(sl=r)),h9+=c*(ol+(ol=i)),p9+=c*(al+(al=s)),$R(sl,ol,al)}function Jkt(e){DI=u9=l9=c9=f9=d9=h9=p9=0,XK=new pl,QK=new pl,JK=new pl,Qm(e,Ih);var t=+XK,n=+QK,r=+JK,i=HK(t,n,r);return i<VK&&(t=d9,n=h9,r=p9,u9<hn&&(t=l9,n=c9,r=f9),i=HK(t,n,r),i<VK)?[NaN,NaN]:[_d(n,t)*so,xc(r/i)*so]}function ZK(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function eX(e,t){return Lr(e)>fr&&(e-=Math.round(e/wl)*wl),[e,t]}eX.invert=eX;function oDe(e,t,n){return(e%=wl)?t||n?ZK(yve(e),vve(t,n)):yve(e):t||n?vve(t,n):eX}function gve(e){return function(t,n){return t+=e,Lr(t)>fr&&(t-=Math.round(t/wl)*wl),[t,n]}}function yve(e){var t=gve(e);return t.invert=gve(-e),t}function vve(e,t){var n=fn(e),r=rn(e),i=fn(t),s=rn(t);function o(a,u){var l=fn(u),c=fn(a)*l,f=rn(a)*l,d=rn(u),h=d*n+c*r;return[_d(f*i-h*s,c*n-d*r),xc(h*i+f*s)]}return o.invert=function(a,u){var l=fn(u),c=fn(a)*l,f=rn(a)*l,d=rn(u),h=d*i-f*s;return[_d(f*i+d*s,c*n+h*r),xc(h*n-c*r)]},o}function Zkt(e){e=oDe(e[0]*ar,e[1]*ar,e.length>2?e[2]*ar:0);function t(n){return n=e(n[0]*ar,n[1]*ar),n[0]*=so,n[1]*=so,n}return t.invert=function(n){return n=e.invert(n[0]*ar,n[1]*ar),n[0]*=so,n[1]*=so,n},t}function e6t(e,t,n,r,i,s){if(n){var o=fn(t),a=rn(t),u=r*n;i==null?(i=t+r*wl,s=t-u/2):(i=bve(o,i),s=bve(o,s),(r>0?i<s:i>s)&&(i+=r*wl));for(var l,c=i;r>0?c>s:c<s;c-=u)l=o9([o,-a*fn(c),-a*rn(c)]),e.point(l[0],l[1])}}function bve(e,t){t=Gw(t),t[0]-=e,a9(t);var n=K8e(-t[1]);return((-t[2]<0?-n:n)+wl-hn)%wl}function aDe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ua,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ZD(e,t){return Lr(e[0]-t[0])<hn&&Lr(e[1]-t[1])<hn}function BP(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function uDe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(ZD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*hn}s.push(v=new BP(g,p,null,!0)),o.push(v.o=new BP(g,null,v,!1)),s.push(v=new BP(y,p,null,!1)),o.push(v.o=new BP(y,null,v,!0))}}),!!s.length){for(o.sort(t),_ve(s),_ve(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function _ve(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function CH(e){return Lr(e[0])<=fr?e[0]:cd(e[0])*((Lr(e[0])+fr)%wl-fr)}function t6t(e,t){var n=CH(t),r=t[1],i=rn(r),s=[rn(n),-fn(n),0],o=0,a=0,u=new pl;i===1?r=Ys+hn:i===-1&&(r=-Ys-hn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=CH(h),m=h[1]/2+t9,g=rn(m),y=fn(m),v=0;v<d;++v,p=w,g=S,y=A,h=b){var b=f[v],w=CH(b),x=b[1]/2+t9,S=rn(x),A=fn(x),C=w-p,N=C>=0?1:-1,k=N*C,D=k>fr,L=g*S;if(u.add(_d(L*N*rn(k),y*A+L*fn(k))),o+=D?C+N*wl:C,D^p>=n^w>=n){var O=gS(Gw(h),Gw(b));a9(O);var B=gS(s,O);a9(B);var q=(D^C>=0?-1:1)*xc(B[2]);(r>q||r===q&&(O[0]||O[1]))&&(a+=D^C>=0?1:-1)}}return(o<-1e-6||o<hn&&u<-1e-12)^a&1}function lDe(e,t,n,r){return function(i){var s=t(i),o=aDe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=jPe(c);var w=t6t(l,r);c.length?(u||(i.polygonStart(),u=!0),uDe(c,r6t,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,x){e(w,x)&&i.point(w,x)}function p(w,x){s.point(w,x)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,x){f.push([w,x]),a.point(w,x)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),x=o.result(),S,A=x.length,C,N,k;if(f.pop(),l.push(f),f=null,!!A){if(w&1){if(N=x[0],(C=N.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<C;++S)i.point((k=N[S])[0],k[1]);i.lineEnd()}return}A>1&&w&2&&x.push(x.pop().concat(x.shift())),c.push(x.filter(n6t))}}return d}}function n6t(e){return e.length>1}function r6t(e,t){return((e=e.x)[0]<0?e[1]-Ys-hn:Ys-e[1])-((t=t.x)[0]<0?t[1]-Ys-hn:Ys-t[1])}const wve=lDe(function(){return!0},i6t,o6t,[-fr,-Ys]);function i6t(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?fr:-fr,u=Lr(s-t);Lr(u-fr)<hn?(e.point(t,n=(n+o)/2>0?Ys:-Ys),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=fr&&(Lr(t-r)<hn&&(t-=r*hn),Lr(s-a)<hn&&(s-=a*hn),n=s6t(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function s6t(e,t,n,r){var i,s,o=rn(e-n);return Lr(o)>hn?UA((rn(t)*(s=fn(r))*rn(n)-rn(r)*(i=fn(t))*rn(e))/(i*s*o)):(t+r)/2}function o6t(e,t,n,r){var i;if(e==null)i=n*Ys,r.point(-fr,i),r.point(0,i),r.point(fr,i),r.point(fr,0),r.point(fr,-i),r.point(0,-i),r.point(-fr,-i),r.point(-fr,0),r.point(-fr,i);else if(Lr(e[0]-t[0])>hn){var s=e[0]<t[0]?fr:-fr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function a6t(e){var t=fn(e),n=2*ar,r=t>0,i=Lr(t)>hn;function s(c,f,d,h){e6t(h,e,n,d,c,f)}function o(c,f){return fn(c)*fn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),x=r?w?0:l(g,y):w?l(g+(g<0?fr:-fr),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||ZD(f,b)||ZD(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var S;!(x&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!f||!ZD(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=x},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Gw(c),p=Gw(f),m=[1,0,0],g=gS(h,p),y=MP(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,x=-t*v/b,S=gS(m,g),A=FP(m,w),C=FP(g,x);AH(A,C);var N=S,k=MP(A,N),D=MP(N,N),L=k*k-D*(MP(A,A)-1);if(!(L<0)){var O=xl(L),B=FP(N,(-k-O)/D);if(AH(B,A),B=o9(B),!d)return B;var q=c[0],H=f[0],G=c[1],K=f[1],J;H<q&&(J=q,q=H,H=J);var F=H-q,j=Lr(F-fr)<hn,W=j||F<hn;if(!j&&K<G&&(J=G,G=K,K=J),W?j?G+K>0^B[1]<(Lr(B[0]-q)<hn?G:K):G<=B[1]&&B[1]<=K:F>fr^(q<=B[0]&&B[0]<=H)){var M=FP(N,(-k+O)/D);return AH(M,A),[B,o9(M)]}}}function l(c,f){var d=r?e:fr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return lDe(o,a,s,r?[0,-e]:[-fr,e-fr])}function u6t(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var jP=1e9,UP=-1e9;function cDe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Lr(l[0]-e)<hn?c>0?0:3:Lr(l[0]-n)<hn?c>0?2:1:Lr(l[1]-t)<hn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=aDe(),d,h,p,m,g,y,v,b,w,x,S,A={point:C,lineStart:L,lineEnd:O,polygonStart:k,polygonEnd:D};function C(q,H){i(q,H)&&c.point(q,H)}function N(){for(var q=0,H=0,G=h.length;H<G;++H)for(var K=h[H],J=1,F=K.length,j=K[0],W,M,V=j[0],Q=j[1];J<F;++J)W=V,M=Q,j=K[J],V=j[0],Q=j[1],M<=r?Q>r&&(V-W)*(r-M)>(Q-M)*(e-W)&&++q:Q<=r&&(V-W)*(r-M)<(Q-M)*(e-W)&&--q;return q}function k(){c=f,d=[],h=[],S=!0}function D(){var q=N(),H=S&&q,G=(d=jPe(d)).length;(H||G)&&(l.polygonStart(),H&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),G&&uDe(d,a,q,s,l),l.polygonEnd()),c=l,d=h=p=null}function L(){A.point=B,h&&h.push(p=[]),x=!0,w=!1,v=b=NaN}function O(){d&&(B(m,g),y&&w&&f.rejoin(),d.push(f.result())),A.point=C,w&&c.lineEnd()}function B(q,H){var G=i(q,H);if(h&&p.push([q,H]),x)m=q,g=H,y=G,x=!1,G&&(c.lineStart(),c.point(q,H));else if(G&&w)c.point(q,H);else{var K=[v=Math.max(UP,Math.min(jP,v)),b=Math.max(UP,Math.min(jP,b))],J=[q=Math.max(UP,Math.min(jP,q)),H=Math.max(UP,Math.min(jP,H))];u6t(K,J,e,t,n,r)?(w||(c.lineStart(),c.point(K[0],K[1])),c.point(J[0],J[1]),G||c.lineEnd(),S=!1):G&&(c.lineStart(),c.point(q,H),S=!1)}v=q,b=H,w=G}return A}}function xve(e,t,n){var r=ac(e,t-hn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Eve(e,t,n){var r=ac(e,t-hn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function l6t(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return ac(LP(r/c)*c,n,c).map(p).concat(ac(LP(a/f)*f,o,f).map(m)).concat(ac(LP(t/u)*u,e,u).filter(function(b){return Lr(b%c)>hn}).map(d)).concat(ac(LP(s/l)*l,i,l).filter(function(b){return Lr(b%f)>hn}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=xve(s,i,90),h=Eve(t,e,g),p=xve(a,o,90),m=Eve(r,n,g),y):g},y.extentMajor([[-180,-90+hn],[180,90-hn]]).extentMinor([[-180,-80-hn],[180,80+hn]])}const Zk=e=>e;var IH=new pl,tX=new pl,fDe,dDe,nX,rX,Jm={point:Ua,lineStart:Ua,lineEnd:Ua,polygonStart:function(){Jm.lineStart=c6t,Jm.lineEnd=d6t},polygonEnd:function(){Jm.lineStart=Jm.lineEnd=Jm.point=Ua,IH.add(Lr(tX)),tX=new pl},result:function(){var e=IH/2;return IH=new pl,e}};function c6t(){Jm.point=f6t}function f6t(e,t){Jm.point=hDe,fDe=nX=e,dDe=rX=t}function hDe(e,t){tX.add(rX*e-nX*t),nX=e,rX=t}function d6t(){hDe(fDe,dDe)}var yS=1/0,m9=yS,e6=-yS,g9=e6,y9={point:h6t,lineStart:Ua,lineEnd:Ua,polygonStart:Ua,polygonEnd:Ua,result:function(){var e=[[yS,m9],[e6,g9]];return e6=g9=-(m9=yS=1/0),e}};function h6t(e,t){e<yS&&(yS=e),e>e6&&(e6=e),t<m9&&(m9=t),t>g9&&(g9=t)}var iX=0,sX=0,OI=0,v9=0,b9=0,KE=0,oX=0,aX=0,$I=0,pDe,mDe,Yp,Kp,ad={point:Yw,lineStart:Tve,lineEnd:Sve,polygonStart:function(){ad.lineStart=g6t,ad.lineEnd=y6t},polygonEnd:function(){ad.point=Yw,ad.lineStart=Tve,ad.lineEnd=Sve},result:function(){var e=$I?[oX/$I,aX/$I]:KE?[v9/KE,b9/KE]:OI?[iX/OI,sX/OI]:[NaN,NaN];return iX=sX=OI=v9=b9=KE=oX=aX=$I=0,e}};function Yw(e,t){iX+=e,sX+=t,++OI}function Tve(){ad.point=p6t}function p6t(e,t){ad.point=m6t,Yw(Yp=e,Kp=t)}function m6t(e,t){var n=e-Yp,r=t-Kp,i=xl(n*n+r*r);v9+=i*(Yp+e)/2,b9+=i*(Kp+t)/2,KE+=i,Yw(Yp=e,Kp=t)}function Sve(){ad.point=Yw}function g6t(){ad.point=v6t}function y6t(){gDe(pDe,mDe)}function v6t(e,t){ad.point=gDe,Yw(pDe=Yp=e,mDe=Kp=t)}function gDe(e,t){var n=e-Yp,r=t-Kp,i=xl(n*n+r*r);v9+=i*(Yp+e)/2,b9+=i*(Kp+t)/2,KE+=i,i=Kp*e-Yp*t,oX+=i*(Yp+e),aX+=i*(Kp+t),$I+=i*3,Yw(Yp=e,Kp=t)}function yDe(e){this._context=e}yDe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,wl);break}}},result:Ua};var uX=new pl,kH,vDe,bDe,LI,MI,t6={point:Ua,lineStart:function(){t6.point=b6t},lineEnd:function(){kH&&_De(vDe,bDe),t6.point=Ua},polygonStart:function(){kH=!0},polygonEnd:function(){kH=null},result:function(){var e=+uX;return uX=new pl,e}};function b6t(e,t){t6.point=_De,vDe=LI=e,bDe=MI=t}function _De(e,t){LI-=e,MI-=t,uX.add(xl(LI*LI+MI*MI)),LI=e,MI=t}let Ave,_9,Cve,Ive;class kve{constructor(t){this._append=t==null?wDe:_6t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Cve||this._append!==_9){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Cve=r,_9=this._append,Ive=this._,this._=i}this._+=Ive;break}}}result(){const t=this._;return this._="",t.length?t:null}}function wDe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _6t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return wDe;if(t!==Ave){const n=10**t;Ave=t,_9=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return _9}function xDe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Qm(a,i(s))),s.result()}return o.area=function(a){return Qm(a,i(Jm)),Jm.result()},o.measure=function(a){return Qm(a,i(t6)),t6.result()},o.bounds=function(a){return Qm(a,i(y9)),y9.result()},o.centroid=function(a){return Qm(a,i(ad)),ad.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,Zk):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new kve(n)):new yDe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new kve(n)),o},o.projection(e).digits(n).context(t)}function tF(e){return function(t){var n=new lX;for(var r in e)n[r]=e[r];return n.stream=t,n}}function lX(){}lX.prototype={constructor:lX,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ure(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Qm(n,e.stream(y9)),t(y9.result()),r!=null&&e.clipExtent(r),e}function nF(e,t,n){return Ure(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function zre(e,t,n){return nF(e,[[0,0],t],n)}function Vre(e,t,n){return Ure(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function Hre(e,t,n){return Ure(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Rve=16,w6t=fn(30*ar);function Nve(e,t){return+t?E6t(e,t):x6t(e)}function x6t(e){return tF({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function E6t(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,x=a+h,S=u+p,A=xl(w*w+x*x+S*S),C=xc(S/=A),N=Lr(Lr(S)-1)<hn||Lr(s-f)<hn?(s+f)/2:_d(x,w),k=e(N,C),D=k[0],L=k[1],O=D-r,B=L-i,q=v*O-y*B;(q*q/b>t||Lr((y*O+v*B)/b-.5)>.3||o*d+a*h+u*p<w6t)&&(n(r,i,s,o,a,u,D,L,N,w/=A,x/=A,S,m,g),g.point(D,L),n(D,L,N,w,x,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=x},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,N){C=e(C,N),r.point(C[0],C[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(C,N){var k=Gw([C,N]),D=e(C,N);n(f,d,c,h,p,m,f=D[0],d=D[1],c=C,h=k[0],p=k[1],m=k[2],Rve,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function x(){v(),g.point=S,g.lineEnd=A}function S(C,N){b(i=C,N),s=f,o=d,a=h,u=p,l=m,g.point=b}function A(){n(f,d,c,h,p,m,s,o,i,a,u,l,Rve,r),g.lineEnd=w,w()}return g}}var T6t=tF({point:function(e,t){this.stream.point(e*ar,t*ar)}});function S6t(e){return tF({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function A6t(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Pve(e,t,n,r,i,s){if(!s)return A6t(e,t,n,r,i);var o=fn(s),a=rn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Z0(e){return EDe(function(){return e})()}function EDe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=wve,g=null,y,v,b,w=Zk,x=.5,S,A,C,N,k;function D(q){return C(q[0]*ar,q[1]*ar)}function L(q){return q=C.invert(q[0],q[1]),q&&[q[0]*so,q[1]*so]}D.stream=function(q){return N&&k===q?N:N=T6t(S6t(c)(m(S(w(k=q)))))},D.preclip=function(q){return arguments.length?(m=q,p=void 0,B()):m},D.postclip=function(q){return arguments.length?(w=q,g=y=v=b=null,B()):w},D.clipAngle=function(q){return arguments.length?(m=+q?a6t(p=q*ar):(p=null,wve),B()):p*so},D.clipExtent=function(q){return arguments.length?(w=q==null?(g=y=v=b=null,Zk):cDe(g=+q[0][0],y=+q[0][1],v=+q[1][0],b=+q[1][1]),B()):g==null?null:[[g,y],[v,b]]},D.scale=function(q){return arguments.length?(n=+q,O()):n},D.translate=function(q){return arguments.length?(r=+q[0],i=+q[1],O()):[r,i]},D.center=function(q){return arguments.length?(s=q[0]%360*ar,o=q[1]%360*ar,O()):[s*so,o*so]},D.rotate=function(q){return arguments.length?(a=q[0]%360*ar,u=q[1]%360*ar,l=q.length>2?q[2]%360*ar:0,O()):[a*so,u*so,l*so]},D.angle=function(q){return arguments.length?(f=q%360*ar,O()):f*so},D.reflectX=function(q){return arguments.length?(d=q?-1:1,O()):d<0},D.reflectY=function(q){return arguments.length?(h=q?-1:1,O()):h<0},D.precision=function(q){return arguments.length?(S=Nve(A,x=q*q),B()):xl(x)},D.fitExtent=function(q,H){return nF(D,q,H)},D.fitSize=function(q,H){return zre(D,q,H)},D.fitWidth=function(q,H){return Vre(D,q,H)},D.fitHeight=function(q,H){return Hre(D,q,H)};function O(){var q=Pve(n,0,0,d,h,f).apply(null,t(s,o)),H=Pve(n,r-q[0],i-q[1],d,h,f);return c=oDe(a,u,l),A=ZK(t,H),C=ZK(c,A),S=Nve(A,x),B()}function B(){return N=k=null,D}return function(){return t=e.apply(this,arguments),D.invert=t.invert&&L,O()}}function qre(e){var t=0,n=fr/3,r=EDe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*ar,n=s[1]*ar):[t*so,n*so]},i}function C6t(e){var t=fn(e);function n(r,i){return[r*t,rn(i)/t]}return n.invert=function(r,i){return[r/t,xc(i*t)]},n}function I6t(e,t){var n=rn(e),r=(n+rn(t))/2;if(Lr(r)<hn)return C6t(e);var i=1+n*(2*r-n),s=xl(i)/r;function o(a,u){var l=xl(i-2*r*rn(u))/r;return[l*rn(a*=r),s-l*fn(a)]}return o.invert=function(a,u){var l=s-u,c=_d(a,Lr(l))*cd(l);return l*r<0&&(c-=fr*cd(a)*cd(l)),[c/r,xc((i-(a*a+l*l)*r*r)/(2*r))]},o}function w9(){return qre(I6t).scale(155.424).center([0,33.6442])}function TDe(){return w9().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function k6t(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function R6t(){var e,t,n=TDe(),r,i=w9().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=w9().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=k6t([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+hn,m+.12*h+hn],[p-.214*h-hn,m+.234*h-hn]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+hn,m+.166*h+hn],[p-.115*h-hn,m+.234*h-hn]]).stream(l),f()},c.fitExtent=function(d,h){return nF(c,d,h)},c.fitSize=function(d,h){return zre(c,d,h)},c.fitWidth=function(d,h){return Vre(c,d,h)},c.fitHeight=function(d,h){return Hre(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function SDe(e){return function(t,n){var r=fn(t),i=fn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*rn(t),s*rn(n)]}}function LR(e){return function(t,n){var r=xl(t*t+n*n),i=e(r),s=rn(i),o=fn(i);return[_d(t*s,r*o),xc(r&&n*s/r)]}}var ADe=SDe(function(e){return xl(2/(1+e))});ADe.invert=LR(function(e){return 2*xc(e/2)});function N6t(){return Z0(ADe).scale(124.75).clipAngle(180-.001)}var CDe=SDe(function(e){return(e=K8e(e))&&e/rn(e)});CDe.invert=LR(function(e){return e});function P6t(){return Z0(CDe).scale(79.4188).clipAngle(180-.001)}function rF(e,t){return[e,n9(Bre((Ys+t)/2))]}rF.invert=function(e,t){return[e,2*UA(Y8e(t))-Ys]};function D6t(){return IDe(rF).scale(961/wl)}function IDe(e){var t=Z0(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=fr*r(),d=t(Zkt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===rF?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function zP(e){return Bre((Ys+e)/2)}function O6t(e,t){var n=fn(e),r=e===t?rn(e):n9(n/fn(t))/n9(zP(t)/zP(e)),i=n*SH(zP(e),r)/r;if(!r)return rF;function s(o,a){i>0?a<-Ys+hn&&(a=-Ys+hn):a>Ys-hn&&(a=Ys-hn);var u=i/SH(zP(a),r);return[u*rn(r*o),i-u*fn(r*o)]}return s.invert=function(o,a){var u=i-a,l=cd(r)*xl(o*o+u*u),c=_d(o,Lr(u))*cd(u);return u*r<0&&(c-=fr*cd(o)*cd(u)),[c/r,2*UA(SH(i/l,1/r))-Ys]},s}function $6t(){return qre(O6t).scale(109.5).parallels([30,30])}function x9(e,t){return[e,t]}x9.invert=x9;function L6t(){return Z0(x9).scale(152.63)}function M6t(e,t){var n=fn(e),r=e===t?rn(e):(n-fn(t))/(t-e),i=n/r+e;if(Lr(r)<hn)return x9;function s(o,a){var u=i-a,l=r*o;return[u*rn(l),i-u*fn(l)]}return s.invert=function(o,a){var u=i-a,l=_d(o,Lr(u))*cd(u);return u*r<0&&(l-=fr*cd(o)*cd(u)),[l/r,i-cd(r)*xl(o*o+u*u)]},s}function F6t(){return qre(M6t).scale(131.154).center([0,13.9389])}var $4=1.340264,L4=-.081106,M4=893e-6,F4=.003796,E9=xl(3)/2,B6t=12;function kDe(e,t){var n=xc(E9*rn(t)),r=n*n,i=r*r*r;return[e*fn(n)/(E9*($4+3*L4*r+i*(7*M4+9*F4*r))),n*($4+L4*r+i*(M4+F4*r))]}kDe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<B6t&&(a=n*($4+L4*r+i*(M4+F4*r))-t,u=$4+3*L4*r+i*(7*M4+9*F4*r),n-=o=a/u,r=n*n,i=r*r*r,!(Lr(o)<VK));++s);return[E9*e*($4+3*L4*r+i*(7*M4+9*F4*r))/fn(n),xc(rn(n)/E9)]};function j6t(){return Z0(kDe).scale(177.158)}function RDe(e,t){var n=fn(t),r=fn(e)*n;return[n*rn(e)/r,rn(t)/r]}RDe.invert=LR(UA);function U6t(){return Z0(RDe).scale(144.049).clipAngle(60)}function z6t(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=tF({point:function(w,x){var S=b([w,x]);this.stream.point(S[0],S[1])}}),m=Zk,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var x=w[0]*d,S=w[1]*h;if(s){var A=S*o-x*a;x=x*o+S*a,S=A}return[x+t,S+n]}return b.invert=function(w){var x=w[0]-t,S=w[1]-n;if(s){var A=S*o+x*a;x=x*o-S*a,S=A}return[x/d,S/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,Zk):cDe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*ar,a=rn(s),o=fn(s),v()):s*so},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,x){return nF(b,w,x)},b.fitSize=function(w,x){return zre(b,w,x)},b.fitWidth=function(w,x){return Vre(b,w,x)},b.fitHeight=function(w,x){return Hre(b,w,x)},b}function NDe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}NDe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Lr(i)>hn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function V6t(){return Z0(NDe).scale(175.295)}function PDe(e,t){return[fn(t)*rn(e),rn(t)]}PDe.invert=LR(xc);function H6t(){return Z0(PDe).scale(249.5).clipAngle(90+hn)}function DDe(e,t){var n=fn(t),r=1+fn(e)*n;return[n*rn(e)/r,rn(t)/r]}DDe.invert=LR(function(e){return 2*UA(e)});function q6t(){return Z0(DDe).scale(250).clipAngle(142)}function ODe(e,t){return[n9(Bre((Ys+t)/2)),-e]}ODe.invert=function(e,t){return[-t,2*UA(Y8e(e))-Ys]};function W6t(){var e=IDe(ODe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function G6t(e,t){return e.parent===t.parent?1:2}function Y6t(e){return e.reduce(K6t,0)/e.length}function K6t(e,t){return e+t.x}function X6t(e){return 1+e.reduce(Q6t,0)}function Q6t(e,t){return Math.max(e,t.y)}function J6t(e){for(var t;t=e.children;)e=t[0];return e}function Z6t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function eRt(){var e=G6t,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Y6t(h),d.y=X6t(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=J6t(s),l=Z6t(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function tRt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function nRt(){return this.eachAfter(tRt)}function rRt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function iRt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function sRt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function oRt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function aRt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function uRt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function lRt(e){for(var t=this,n=cRt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function cRt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function fRt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function dRt(){return Array.from(this)}function hRt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function pRt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*mRt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function iF(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=vRt)):t===void 0&&(t=yRt);for(var n=new vS(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new vS(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore($De)}function gRt(){return iF(this).eachBefore(bRt)}function yRt(e){return e.children}function vRt(e){return Array.isArray(e)?e[1]:null}function bRt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function $De(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function vS(e){this.data=e,this.depth=this.height=0,this.parent=null}vS.prototype=iF.prototype={constructor:vS,count:nRt,each:rRt,eachAfter:sRt,eachBefore:iRt,find:oRt,sum:aRt,sort:uRt,path:lRt,ancestors:fRt,descendants:dRt,leaves:hRt,links:pRt,copy:gRt,[Symbol.iterator]:mRt};function eO(e){return e==null?null:LDe(e)}function LDe(e){if(typeof e!="function")throw new Error;return e}function V_(){return 0}function EE(e){return function(){return e}}const _Rt=1664525,wRt=1013904223,Dve=4294967296;function xRt(){let e=1;return()=>(e=(_Rt*e+wRt)%Dve)/Dve}function ERt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function TRt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function SRt(e,t){for(var n=0,r=(e=TRt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&MDe(o,s)?++n:(o=CRt(i=ARt(i,s)),n=0);return o}function ARt(e,t){var n,r;if(RH(t,e))return[t];for(n=0;n<e.length;++n)if(VP(t,e[n])&&RH(FI(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(VP(FI(e[n],e[r]),t)&&VP(FI(e[n],t),e[r])&&VP(FI(e[r],t),e[n])&&RH(FDe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function VP(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function MDe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function RH(e,t){for(var n=0;n<t.length;++n)if(!MDe(e,t[n]))return!1;return!0}function CRt(e){switch(e.length){case 1:return IRt(e[0]);case 2:return FI(e[0],e[1]);case 3:return FDe(e[0],e[1],e[2])}}function IRt(e){return{x:e.x,y:e.y,r:e.r}}function FI(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function FDe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,x=h*p-d*m,S=(p*w-m*b)/(x*2)-r,A=(m*g-p*y)/x,C=(h*b-d*w)/(x*2)-i,N=(d*y-h*g)/x,k=A*A+N*N-1,D=2*(s+S*A+C*N),L=S*S+C*C-s*s,O=-(Math.abs(k)>1e-6?(D+Math.sqrt(D*D-4*k*L))/(2*k):L/D);return{x:r+S+A*O,y:i+C+N*O,r:O}}function Ove(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function $ve(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Lve(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function HP(e){this._=e,this.next=null,this.previous=null}function kRt(e,t){if(!(s=(e=ERt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Ove(r,n,i=e[2]),n=new HP(n),r=new HP(r),i=new HP(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Ove(n._,r._,i=e[u]),i=new HP(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if($ve(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if($ve(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Lve(n);(i=i.next)!==r;)(a=Lve(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=SRt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function RRt(e){return Math.sqrt(e.value)}function BDe(){var e=null,t=1,n=1,r=V_;function i(s){const o=xRt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Mve(e)).eachAfter(NH(r,.5,o)).eachBefore(Fve(1)):s.eachBefore(Mve(RRt)).eachAfter(NH(V_,1,o)).eachAfter(NH(r,s.r/Math.min(t,n),o)).eachBefore(Fve(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=eO(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:EE(+s),i):r},i}function Mve(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function NH(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=kRt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Fve(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function jDe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function MR(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function NRt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(jDe),o}function s(o,a){return function(u){u.children&&MR(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var PRt={depth:-1},Bve={},PH={};function DRt(e){return e.id}function ORt(e){return e.parentId}function jve(){var e=DRt,t=ORt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,x)=>$Rt(n(w,x,i))),v=y.map(Uve),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(Uve(w)),s.push(PH));o=(w,x)=>y[x],a=(w,x)=>v[x]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new vS(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Bve:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Bve)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===PH&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===PH);--y)h.data=null}if(f.parent=PRt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore($De),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=eO(i),r):e},r.parentId=function(i){return arguments.length?(t=eO(i),r):t},r.path=function(i){return arguments.length?(n=eO(i),r):n},r}function $Rt(e){e=`${e}`;let t=e.length;return cX(e,t-1)&&!cX(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Uve(e){let t=e.length;if(t<2)return"";for(;--t>1&&!cX(e,t););return e.slice(0,t)}function cX(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function LRt(e,t){return e.parent===t.parent?1:2}function DH(e){var t=e.children;return t?t[0]:e.t}function OH(e){var t=e.children;return t?t[t.length-1]:e.t}function MRt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function FRt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function BRt(e,t,n){return e.a.parent===t.parent?e.a:n}function tO(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}tO.prototype=Object.create(vS.prototype);function jRt(e){for(var t=new tO(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new tO(s[o],o)),i.parent=n;return(t.parent=new tO(null,0)).children=[t],t}function URt(){var e=LRt,t=1,n=1,r=null;function i(l){var c=jRt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){FRt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=OH(p),d=DH(d),p&&d;)m=DH(m),h=OH(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(MRt(BRt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!OH(h)&&(h.t=p,h.m+=v-y),d&&!DH(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function sF(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var UDe=(1+Math.sqrt(5))/2;function zDe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,x,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,x=Math.max(p/h,h/p)/(m*e),S=g*g*x,w=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*x,b=Math.max(v/S,S/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?MR(u,n,r,i,m?r+=p*g/m:s):sF(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const VDe=function e(t){function n(r,i,s,o,a){zDe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(UDe);function zRt(){var e=VDe,t=!1,n=1,r=1,i=[0],s=V_,o=V_,a=V_,u=V_,l=V_;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(jDe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=LDe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:EE(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:EE(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:EE(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:EE(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:EE(+d),c):l},c}function VRt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,x=f+1,S=d-1;x<S;){var A=x+S>>>1;l[A]<w?x=A+1:S=A}w-l[x-1]<l[x]-w&&f+1<x&&--x;var C=l[x]-b,N=h-C;if(g-p>y-m){var k=h?(p*N+g*C)/h:g;c(f,x,C,p,m,k,y),c(x,d,N,k,m,g,y)}else{var D=h?(m*N+y*C)/h:y;c(f,x,C,p,m,g,D),c(x,d,N,p,D,g,y)}}}function HRt(e,t,n,r,i){(e.depth&1?sF:MR)(e,t,n,r,i)}const qRt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?MR(l,i,s,o,m?s+=(a-s)*l.value/m:a):sF(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=zDe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(UDe);function op(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ib(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const fX=Symbol("implicit");function kb(){var e=new wye,t=[],n=[],r=fX;function i(s){let o=e.get(s);if(o===void 0){if(r!==fX)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new wye;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return kb(t,n).unknown(r)},op.apply(i,arguments),i}function zA(){var e=kb().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=ac(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return zA(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},op.apply(f(),arguments)}function WRt(e){return function(){return e}}function dX(e){return+e}var zve=[0,1];function uc(e){return e}function hX(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:WRt(isNaN(t)?NaN:.5)}function GRt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function YRt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=hX(i,r),s=n(o,s)):(r=hX(r,i),s=n(s,o)),function(a){return s(r(a))}}function KRt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=hX(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=kv(e,a,1,r)-1;return s[u](i[u](a))}}function FR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function oF(){var e=zve,t=zve,n=p1,r,i,s,o=uc,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==uc&&(o=GRt(e[0],e[d-1])),a=d>2?KRt:YRt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),id)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,dX),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=DR,c()},f.clamp=function(d){return arguments.length?(o=d?!0:uc,c()):o!==uc},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function HDe(){return oF()(uc,uc)}function qDe(e,t,n,r){var i=Rv(e,t,n),s;switch(r=Ww(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=W8e(i,o))&&(r.precision=s),Fre(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=G8e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=q8e(i))&&(r.precision=s-(r.type==="%")*2);break}}return Cb(r)}function Vx(e){var t=e.domain;return e.ticks=function(n){var r=t();return TK(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return qDe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=SK(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function xa(){var e=HDe();return e.copy=function(){return FR(e,xa())},op.apply(e,arguments),Vx(e)}function WDe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,dX),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return WDe(e).unknown(t)},e=arguments.length?Array.from(e,dX):[0,1],Vx(n)}function GDe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Vve(e){return Math.log(e)}function Hve(e){return Math.exp(e)}function XRt(e){return-Math.log(-e)}function QRt(e){return-Math.exp(-e)}function JRt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ZRt(e){return e===10?JRt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function e5t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function qve(e){return(t,n)=>-e(-t,n)}function Wre(e){const t=e(Vve,Hve),n=t.domain;let r=10,i,s;function o(){return i=e5t(r),s=ZRt(r),n()[0]<0?(i=qve(i),s=qve(s),e(XRt,QRt)):e(Vve,Hve),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=TK(l,c,g))}else y=TK(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Ww(u)).precision==null&&(u.trim=!0),u=Cb(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(GDe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function YDe(){const e=Wre(oF()).domain([1,10]);return e.copy=()=>FR(e,YDe()).base(e.base()),op.apply(e,arguments),e}function Wve(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Gve(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Gre(e){var t=1,n=e(Wve(t),Gve(t));return n.constant=function(r){return arguments.length?e(Wve(t=+r),Gve(t)):t},Vx(n)}function KDe(){var e=Gre(oF());return e.copy=function(){return FR(e,KDe()).constant(e.constant())},op.apply(e,arguments)}function Yve(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function t5t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function n5t(e){return e<0?-e*e:e*e}function Yre(e){var t=e(uc,uc),n=1;function r(){return n===1?e(uc,uc):n===.5?e(t5t,n5t):e(Yve(n),Yve(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Vx(t)}function Kre(){var e=Yre(oF());return e.copy=function(){return FR(e,Kre()).exponent(e.exponent())},op.apply(e,arguments),e}function r5t(){return Kre.apply(null,arguments).exponent(.5)}function XDe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=FPe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[kv(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(wg),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return XDe().domain(e).range(t).unknown(r)},op.apply(s,arguments)}function QDe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[kv(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return QDe().domain([e,t]).range(i).unknown(s)},op.apply(Vx(o),arguments)}function JDe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[kv(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return JDe().domain(e).range(t).unknown(n)},op.apply(i,arguments)}const $H=new Date,LH=new Date;function Jo(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Jo(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>($H.setTime(+s),LH.setTime(+o),e($H),e(LH),Math.floor(n($H,LH))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const bS=Jo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Jo(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):bS);bS.range;const lg=1e3,fd=lg*60,cg=fd*60,qg=cg*24,Xre=qg*7,Kve=qg*30,MH=qg*365,fg=Jo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*lg)},(e,t)=>(t-e)/lg,e=>e.getUTCSeconds());fg.range;const aF=Jo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lg)},(e,t)=>{e.setTime(+e+t*fd)},(e,t)=>(t-e)/fd,e=>e.getMinutes());aF.range;const uF=Jo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*fd)},(e,t)=>(t-e)/fd,e=>e.getUTCMinutes());uF.range;const lF=Jo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lg-e.getMinutes()*fd)},(e,t)=>{e.setTime(+e+t*cg)},(e,t)=>(t-e)/cg,e=>e.getHours());lF.range;const cF=Jo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*cg)},(e,t)=>(t-e)/cg,e=>e.getUTCHours());cF.range;const Tg=Jo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*fd)/qg,e=>e.getDate()-1);Tg.range;const lv=Jo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qg,e=>e.getUTCDate()-1);lv.range;const ZDe=Jo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qg,e=>Math.floor(e/qg));ZDe.range;function Hx(e){return Jo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*fd)/Xre)}const VA=Hx(0),T9=Hx(1),i5t=Hx(2),s5t=Hx(3),_S=Hx(4),o5t=Hx(5),a5t=Hx(6);VA.range;T9.range;i5t.range;s5t.range;_S.range;o5t.range;a5t.range;function qx(e){return Jo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Xre)}const HA=qx(0),S9=qx(1),u5t=qx(2),l5t=qx(3),wS=qx(4),c5t=qx(5),f5t=qx(6);HA.range;S9.range;u5t.range;l5t.range;wS.range;c5t.range;f5t.range;const n6=Jo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());n6.range;const r6=Jo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());r6.range;const N0=Jo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());N0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});N0.range;const P0=Jo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());P0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});P0.range;function eOe(e,t,n,r,i,s){const o=[[fg,1,lg],[fg,5,5*lg],[fg,15,15*lg],[fg,30,30*lg],[s,1,fd],[s,5,5*fd],[s,15,15*fd],[s,30,30*fd],[i,1,cg],[i,3,3*cg],[i,6,6*cg],[i,12,12*cg],[r,1,qg],[r,2,2*qg],[n,1,Xre],[t,1,Kve],[t,3,3*Kve],[e,1,MH]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Lh(([,,g])=>g).right(o,d);if(h===o.length)return e.every(Rv(l/MH,c/MH,f));if(h===0)return bS.every(Math.max(Rv(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[d5t,h5t]=eOe(P0,r6,HA,ZDe,cF,uF),[p5t,m5t]=eOe(N0,n6,VA,Tg,lF,aF);function FH(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function BH(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function S3(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function tOe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=A3(i),c=C3(i),f=A3(s),d=C3(s),h=A3(o),p=C3(o),m=A3(a),g=C3(a),y=A3(u),v=C3(u),b={a:G,A:K,b:J,B:F,c:null,d:tbe,e:tbe,f:F5t,g:Y5t,G:X5t,H:$5t,I:L5t,j:M5t,L:nOe,m:B5t,M:j5t,p:j,q:W,Q:ibe,s:sbe,S:U5t,u:z5t,U:V5t,V:H5t,w:q5t,W:W5t,x:null,X:null,y:G5t,Y:K5t,Z:Q5t,"%":rbe},w={a:M,A:V,b:Q,B:se,c:null,d:nbe,e:nbe,f:tNt,g:fNt,G:hNt,H:J5t,I:Z5t,j:eNt,L:iOe,m:nNt,M:rNt,p:be,q:he,Q:ibe,s:sbe,S:iNt,u:sNt,U:oNt,V:aNt,w:uNt,W:lNt,x:null,X:null,y:cNt,Y:dNt,Z:pNt,"%":rbe},x={a:k,A:D,b:L,B:O,c:B,d:Zve,e:Zve,f:N5t,g:Jve,G:Qve,H:ebe,I:ebe,j:C5t,L:R5t,m:A5t,M:I5t,p:N,q:S5t,Q:D5t,s:O5t,S:k5t,u:_5t,U:w5t,V:x5t,w:b5t,W:E5t,x:q,X:H,y:Jve,Y:Qve,Z:T5t,"%":P5t};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(Ce,De){return function(rt){var Re=[],Tt=-1,Ze=0,It=Ce.length,mt,Se,Fe;for(rt instanceof Date||(rt=new Date(+rt));++Tt<It;)Ce.charCodeAt(Tt)===37&&(Re.push(Ce.slice(Ze,Tt)),(Se=Xve[mt=Ce.charAt(++Tt)])!=null?mt=Ce.charAt(++Tt):Se=mt==="e"?" ":"0",(Fe=De[mt])&&(mt=Fe(rt,Se)),Re.push(mt),Ze=Tt+1);return Re.push(Ce.slice(Ze,Tt)),Re.join("")}}function A(Ce,De){return function(rt){var Re=S3(1900,void 0,1),Tt=C(Re,Ce,rt+="",0),Ze,It;if(Tt!=rt.length)return null;if("Q"in Re)return new Date(Re.Q);if("s"in Re)return new Date(Re.s*1e3+("L"in Re?Re.L:0));if(De&&!("Z"in Re)&&(Re.Z=0),"p"in Re&&(Re.H=Re.H%12+Re.p*12),Re.m===void 0&&(Re.m="q"in Re?Re.q:0),"V"in Re){if(Re.V<1||Re.V>53)return null;"w"in Re||(Re.w=1),"Z"in Re?(Ze=BH(S3(Re.y,0,1)),It=Ze.getUTCDay(),Ze=It>4||It===0?S9.ceil(Ze):S9(Ze),Ze=lv.offset(Ze,(Re.V-1)*7),Re.y=Ze.getUTCFullYear(),Re.m=Ze.getUTCMonth(),Re.d=Ze.getUTCDate()+(Re.w+6)%7):(Ze=FH(S3(Re.y,0,1)),It=Ze.getDay(),Ze=It>4||It===0?T9.ceil(Ze):T9(Ze),Ze=Tg.offset(Ze,(Re.V-1)*7),Re.y=Ze.getFullYear(),Re.m=Ze.getMonth(),Re.d=Ze.getDate()+(Re.w+6)%7)}else("W"in Re||"U"in Re)&&("w"in Re||(Re.w="u"in Re?Re.u%7:"W"in Re?1:0),It="Z"in Re?BH(S3(Re.y,0,1)).getUTCDay():FH(S3(Re.y,0,1)).getDay(),Re.m=0,Re.d="W"in Re?(Re.w+6)%7+Re.W*7-(It+5)%7:Re.w+Re.U*7-(It+6)%7);return"Z"in Re?(Re.H+=Re.Z/100|0,Re.M+=Re.Z%100,BH(Re)):FH(Re)}}function C(Ce,De,rt,Re){for(var Tt=0,Ze=De.length,It=rt.length,mt,Se;Tt<Ze;){if(Re>=It)return-1;if(mt=De.charCodeAt(Tt++),mt===37){if(mt=De.charAt(Tt++),Se=x[mt in Xve?De.charAt(Tt++):mt],!Se||(Re=Se(Ce,rt,Re))<0)return-1}else if(mt!=rt.charCodeAt(Re++))return-1}return Re}function N(Ce,De,rt){var Re=l.exec(De.slice(rt));return Re?(Ce.p=c.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function k(Ce,De,rt){var Re=h.exec(De.slice(rt));return Re?(Ce.w=p.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function D(Ce,De,rt){var Re=f.exec(De.slice(rt));return Re?(Ce.w=d.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function L(Ce,De,rt){var Re=y.exec(De.slice(rt));return Re?(Ce.m=v.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function O(Ce,De,rt){var Re=m.exec(De.slice(rt));return Re?(Ce.m=g.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function B(Ce,De,rt){return C(Ce,t,De,rt)}function q(Ce,De,rt){return C(Ce,n,De,rt)}function H(Ce,De,rt){return C(Ce,r,De,rt)}function G(Ce){return o[Ce.getDay()]}function K(Ce){return s[Ce.getDay()]}function J(Ce){return u[Ce.getMonth()]}function F(Ce){return a[Ce.getMonth()]}function j(Ce){return i[+(Ce.getHours()>=12)]}function W(Ce){return 1+~~(Ce.getMonth()/3)}function M(Ce){return o[Ce.getUTCDay()]}function V(Ce){return s[Ce.getUTCDay()]}function Q(Ce){return u[Ce.getUTCMonth()]}function se(Ce){return a[Ce.getUTCMonth()]}function be(Ce){return i[+(Ce.getUTCHours()>=12)]}function he(Ce){return 1+~~(Ce.getUTCMonth()/3)}return{format:function(Ce){var De=S(Ce+="",b);return De.toString=function(){return Ce},De},parse:function(Ce){var De=A(Ce+="",!1);return De.toString=function(){return Ce},De},utcFormat:function(Ce){var De=S(Ce+="",w);return De.toString=function(){return Ce},De},utcParse:function(Ce){var De=A(Ce+="",!0);return De.toString=function(){return Ce},De}}}var Xve={"-":"",_:" ",0:"0"},Sa=/^\s*\d+/,g5t=/^%/,y5t=/[\\^$*+?|[\]().{}]/g;function ri(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function v5t(e){return e.replace(y5t,"\\$&")}function A3(e){return new RegExp("^(?:"+e.map(v5t).join("|")+")","i")}function C3(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function b5t(e,t,n){var r=Sa.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function _5t(e,t,n){var r=Sa.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function w5t(e,t,n){var r=Sa.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function x5t(e,t,n){var r=Sa.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function E5t(e,t,n){var r=Sa.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Qve(e,t,n){var r=Sa.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Jve(e,t,n){var r=Sa.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function T5t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function S5t(e,t,n){var r=Sa.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function A5t(e,t,n){var r=Sa.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Zve(e,t,n){var r=Sa.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function C5t(e,t,n){var r=Sa.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ebe(e,t,n){var r=Sa.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function I5t(e,t,n){var r=Sa.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function k5t(e,t,n){var r=Sa.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function R5t(e,t,n){var r=Sa.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function N5t(e,t,n){var r=Sa.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function P5t(e,t,n){var r=g5t.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function D5t(e,t,n){var r=Sa.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function O5t(e,t,n){var r=Sa.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function tbe(e,t){return ri(e.getDate(),t,2)}function $5t(e,t){return ri(e.getHours(),t,2)}function L5t(e,t){return ri(e.getHours()%12||12,t,2)}function M5t(e,t){return ri(1+Tg.count(N0(e),e),t,3)}function nOe(e,t){return ri(e.getMilliseconds(),t,3)}function F5t(e,t){return nOe(e,t)+"000"}function B5t(e,t){return ri(e.getMonth()+1,t,2)}function j5t(e,t){return ri(e.getMinutes(),t,2)}function U5t(e,t){return ri(e.getSeconds(),t,2)}function z5t(e){var t=e.getDay();return t===0?7:t}function V5t(e,t){return ri(VA.count(N0(e)-1,e),t,2)}function rOe(e){var t=e.getDay();return t>=4||t===0?_S(e):_S.ceil(e)}function H5t(e,t){return e=rOe(e),ri(_S.count(N0(e),e)+(N0(e).getDay()===4),t,2)}function q5t(e){return e.getDay()}function W5t(e,t){return ri(T9.count(N0(e)-1,e),t,2)}function G5t(e,t){return ri(e.getFullYear()%100,t,2)}function Y5t(e,t){return e=rOe(e),ri(e.getFullYear()%100,t,2)}function K5t(e,t){return ri(e.getFullYear()%1e4,t,4)}function X5t(e,t){var n=e.getDay();return e=n>=4||n===0?_S(e):_S.ceil(e),ri(e.getFullYear()%1e4,t,4)}function Q5t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ri(t/60|0,"0",2)+ri(t%60,"0",2)}function nbe(e,t){return ri(e.getUTCDate(),t,2)}function J5t(e,t){return ri(e.getUTCHours(),t,2)}function Z5t(e,t){return ri(e.getUTCHours()%12||12,t,2)}function eNt(e,t){return ri(1+lv.count(P0(e),e),t,3)}function iOe(e,t){return ri(e.getUTCMilliseconds(),t,3)}function tNt(e,t){return iOe(e,t)+"000"}function nNt(e,t){return ri(e.getUTCMonth()+1,t,2)}function rNt(e,t){return ri(e.getUTCMinutes(),t,2)}function iNt(e,t){return ri(e.getUTCSeconds(),t,2)}function sNt(e){var t=e.getUTCDay();return t===0?7:t}function oNt(e,t){return ri(HA.count(P0(e)-1,e),t,2)}function sOe(e){var t=e.getUTCDay();return t>=4||t===0?wS(e):wS.ceil(e)}function aNt(e,t){return e=sOe(e),ri(wS.count(P0(e),e)+(P0(e).getUTCDay()===4),t,2)}function uNt(e){return e.getUTCDay()}function lNt(e,t){return ri(S9.count(P0(e)-1,e),t,2)}function cNt(e,t){return ri(e.getUTCFullYear()%100,t,2)}function fNt(e,t){return e=sOe(e),ri(e.getUTCFullYear()%100,t,2)}function dNt(e,t){return ri(e.getUTCFullYear()%1e4,t,4)}function hNt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?wS(e):wS.ceil(e),ri(e.getUTCFullYear()%1e4,t,4)}function pNt(){return"+0000"}function rbe(){return"%"}function ibe(e){return+e}function sbe(e){return Math.floor(+e/1e3)}var Z2,Qre,oOe,BR,aOe;mNt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mNt(e){return Z2=tOe(e),Qre=Z2.format,oOe=Z2.parse,BR=Z2.utcFormat,aOe=Z2.utcParse,Z2}function gNt(e){return new Date(e)}function yNt(e){return e instanceof Date?+e:+new Date(+e)}function Jre(e,t,n,r,i,s,o,a,u,l){var c=HDe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function x(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:w)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,yNt)):d().map(gNt)},c.ticks=function(S){var A=d();return e(A[0],A[A.length-1],S??10)},c.tickFormat=function(S,A){return A==null?x:l(A)},c.nice=function(S){var A=d();return(!S||typeof S.range!="function")&&(S=t(A[0],A[A.length-1],S??10)),S?d(GDe(A,S)):c},c.copy=function(){return FR(c,Jre(e,t,n,r,i,s,o,a,u,l))},c}function Zre(){return op.apply(Jre(p5t,m5t,N0,n6,VA,Tg,lF,aF,fg,Qre).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vNt(){return op.apply(Jre(d5t,h5t,P0,r6,HA,lv,cF,uF,fg,BR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fF(){var e=0,t=1,n,r,i,s,o=uc,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(p1),l.rangeRound=c(DR),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Rb(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function eie(){var e=Vx(fF()(uc));return e.copy=function(){return Rb(e,eie())},Ib.apply(e,arguments)}function uOe(){var e=Wre(fF()).domain([1,10]);return e.copy=function(){return Rb(e,uOe()).base(e.base())},Ib.apply(e,arguments)}function lOe(){var e=Gre(fF());return e.copy=function(){return Rb(e,lOe()).constant(e.constant())},Ib.apply(e,arguments)}function tie(){var e=Yre(fF());return e.copy=function(){return Rb(e,tie()).exponent(e.exponent())},Ib.apply(e,arguments)}function bNt(){return tie.apply(null,arguments).exponent(.5)}function dF(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=uc,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=Ire(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(p1),h.rangeRound=p(DR),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function cOe(){var e=Vx(dF()(uc));return e.copy=function(){return Rb(e,cOe())},Ib.apply(e,arguments)}function fOe(){var e=Wre(dF()).domain([.1,1,10]);return e.copy=function(){return Rb(e,fOe()).base(e.base())},Ib.apply(e,arguments)}function dOe(){var e=Gre(dF());return e.copy=function(){return Rb(e,dOe()).constant(e.constant())},Ib.apply(e,arguments)}function nie(){var e=Yre(dF());return e.copy=function(){return Rb(e,nie()).exponent(e.exponent())},Ib.apply(e,arguments)}function _Nt(){return nie.apply(null,arguments).exponent(.5)}function ap(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const wNt=ap("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),xNt=ap("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),ENt=ap("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),TNt=ap("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),SNt=ap("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),ANt=ap("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),CNt=ap("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),INt=ap("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),kNt=ap("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),RNt=ap("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),hF=ap("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Qn(e){return function(){return e}}const obe=Math.abs,du=Math.atan2,l_=Math.cos,NNt=Math.max,jH=Math.min,Tp=Math.sin,uw=Math.sqrt,gu=1e-12,xS=Math.PI,A9=xS/2,B4=2*xS;function PNt(e){return e>1?0:e<-1?xS:Math.acos(e)}function abe(e){return e>=1?A9:e<=-1?-A9:Math.asin(e)}function pF(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Dre(t)}function DNt(e){return e.innerRadius}function ONt(e){return e.outerRadius}function $Nt(e){return e.startAngle}function LNt(e){return e.endAngle}function MNt(e){return e&&e.padAngle}function FNt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<gu))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function qP(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/uw(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,x=i-s,S=d*m-p*h,A=(b<0?-1:1)*uw(NNt(0,x*x*w-S*S)),C=(S*b-v*A)/w,N=(-S*v-b*A)/w,k=(S*b+v*A)/w,D=(-S*v+b*A)/w,L=C-g,O=N-y,B=k-g,q=D-y;return L*L+O*O>B*B+q*q&&(C=k,N=D),{cx:C,cy:N,x01:-c,y01:-f,x11:C*(i/x-1),y11:N*(i/x-1)}}function pX(){var e=DNt,t=ONt,n=Qn(0),r=null,i=$Nt,s=LNt,o=MNt,a=null,u=pF(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-A9,m=s.apply(this,arguments)-A9,g=obe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>gu))a.moveTo(0,0);else if(g>B4-gu)a.moveTo(h*l_(p),h*Tp(p)),a.arc(0,0,h,p,m,!y),d>gu&&(a.moveTo(d*l_(m),d*Tp(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,x=m,S=g,A=g,C=o.apply(this,arguments)/2,N=C>gu&&(r?+r.apply(this,arguments):uw(d*d+h*h)),k=jH(obe(h-d)/2,+n.apply(this,arguments)),D=k,L=k,O,B;if(N>gu){var q=abe(N/d*Tp(C)),H=abe(N/h*Tp(C));(S-=q*2)>gu?(q*=y?1:-1,w+=q,x-=q):(S=0,w=x=(p+m)/2),(A-=H*2)>gu?(H*=y?1:-1,v+=H,b-=H):(A=0,v=b=(p+m)/2)}var G=h*l_(v),K=h*Tp(v),J=d*l_(x),F=d*Tp(x);if(k>gu){var j=h*l_(b),W=h*Tp(b),M=d*l_(w),V=d*Tp(w),Q;if(g<xS)if(Q=FNt(G,K,M,V,j,W,J,F)){var se=G-Q[0],be=K-Q[1],he=j-Q[0],Ce=W-Q[1],De=1/Tp(PNt((se*he+be*Ce)/(uw(se*se+be*be)*uw(he*he+Ce*Ce)))/2),rt=uw(Q[0]*Q[0]+Q[1]*Q[1]);D=jH(k,(d-rt)/(De-1)),L=jH(k,(h-rt)/(De+1))}else D=L=0}A>gu?L>gu?(O=qP(M,V,G,K,h,L,y),B=qP(j,W,J,F,h,L,y),a.moveTo(O.cx+O.x01,O.cy+O.y01),L<k?a.arc(O.cx,O.cy,L,du(O.y01,O.x01),du(B.y01,B.x01),!y):(a.arc(O.cx,O.cy,L,du(O.y01,O.x01),du(O.y11,O.x11),!y),a.arc(0,0,h,du(O.cy+O.y11,O.cx+O.x11),du(B.cy+B.y11,B.cx+B.x11),!y),a.arc(B.cx,B.cy,L,du(B.y11,B.x11),du(B.y01,B.x01),!y))):(a.moveTo(G,K),a.arc(0,0,h,v,b,!y)):a.moveTo(G,K),!(d>gu)||!(S>gu)?a.lineTo(J,F):D>gu?(O=qP(J,F,j,W,d,-D,y),B=qP(G,K,M,V,d,-D,y),a.lineTo(O.cx+O.x01,O.cy+O.y01),D<k?a.arc(O.cx,O.cy,D,du(O.y01,O.x01),du(B.y01,B.x01),!y):(a.arc(O.cx,O.cy,D,du(O.y01,O.x01),du(O.y11,O.x11),!y),a.arc(0,0,d,du(O.cy+O.y11,O.cx+O.x11),du(B.cy+B.y11,B.cx+B.x11),y),a.arc(B.cx,B.cy,D,du(B.y11,B.x11),du(B.y01,B.x01),!y))):a.arc(0,0,d,x,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-xS/2;return[l_(f)*c,Tp(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Qn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Qn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Qn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Qn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Qn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Qn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Qn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function mF(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hOe(e){this._context=e}hOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function rie(e){return new hOe(e)}function pOe(e){return e[0]}function mOe(e){return e[1]}function gF(e,t){var n=Qn(!0),r=null,i=rie,s=null,o=pF(a);e=typeof e=="function"?e:e===void 0?pOe:Qn(e),t=typeof t=="function"?t:t===void 0?mOe:Qn(t);function a(u){var l,c=(u=mF(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Qn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Qn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Qn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function gOe(e,t,n){var r=null,i=Qn(!0),s=null,o=rie,a=null,u=pF(l);e=typeof e=="function"?e:e===void 0?pOe:Qn(+e),t=typeof t=="function"?t:Qn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?mOe:Qn(+n);function l(f){var d,h,p,m=(f=mF(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return gF().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Qn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Qn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Qn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function BNt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function jNt(e){return e}function UNt(){var e=jNt,t=BNt,n=null,r=Qn(0),i=Qn(B4),s=Qn(0);function o(a){var u,l=(a=mF(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(B4,Math.max(-B4,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(x,S){return t(p[x],p[S])}):n!=null&&h.sort(function(x,S){return n(a[x],a[S])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:Qn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:Qn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:Qn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Qn(+a),o):s},o}const zNt={draw(e,t){const n=uw(t/xS);e.moveTo(n,0),e.arc(0,0,n,0,B4)}};function VNt(e,t){let n=null,r=pF(i);e=typeof e=="function"?e:Qn(e||zNt),t=typeof t=="function"?t:Qn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Qn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Qn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Pv(){}function C9(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function yF(e){this._context=e}yF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:C9(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:C9(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HNt(e){return new yF(e)}function yOe(e){this._context=e}yOe.prototype={areaStart:Pv,areaEnd:Pv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:C9(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qNt(e){return new yOe(e)}function vOe(e){this._context=e}vOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:C9(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function WNt(e){return new vOe(e)}function bOe(e,t){this._basis=new yF(e),this._beta=t}bOe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const GNt=function e(t){function n(r){return t===1?new yF(r):new bOe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function I9(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function iie(e,t){this._context=e,this._k=(1-t)/6}iie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:I9(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:I9(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const YNt=function e(t){function n(r){return new iie(r,t)}return n.tension=function(r){return e(+r)},n}(0);function sie(e,t){this._context=e,this._k=(1-t)/6}sie.prototype={areaStart:Pv,areaEnd:Pv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:I9(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const KNt=function e(t){function n(r){return new sie(r,t)}return n.tension=function(r){return e(+r)},n}(0);function oie(e,t){this._context=e,this._k=(1-t)/6}oie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:I9(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const XNt=function e(t){function n(r){return new oie(r,t)}return n.tension=function(r){return e(+r)},n}(0);function aie(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>gu){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>gu){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function _Oe(e,t){this._context=e,this._alpha=t}_Oe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:aie(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const QNt=function e(t){function n(r){return t?new _Oe(r,t):new iie(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function wOe(e,t){this._context=e,this._alpha=t}wOe.prototype={areaStart:Pv,areaEnd:Pv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:aie(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const JNt=function e(t){function n(r){return t?new wOe(r,t):new sie(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function xOe(e,t){this._context=e,this._alpha=t}xOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:aie(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ZNt=function e(t){function n(r){return t?new xOe(r,t):new oie(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function EOe(e){this._context=e}EOe.prototype={areaStart:Pv,areaEnd:Pv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ePt(e){return new EOe(e)}function ube(e){return e<0?-1:1}function lbe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(ube(s)+ube(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function cbe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function UH(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function k9(e){this._context=e}k9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:UH(this,this._t0,cbe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,UH(this,cbe(this,n=lbe(this,e,t)),n);break;default:UH(this,this._t0,n=lbe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function TOe(e){this._context=new SOe(e)}(TOe.prototype=Object.create(k9.prototype)).point=function(e,t){k9.prototype.point.call(this,t,e)};function SOe(e){this._context=e}SOe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function tPt(e){return new k9(e)}function nPt(e){return new TOe(e)}function AOe(e){this._context=e}AOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=fbe(e),i=fbe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function fbe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function rPt(e){return new AOe(e)}function vF(e,t){this._context=e,this._t=t}vF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function iPt(e){return new vF(e,.5)}function sPt(e){return new vF(e,0)}function oPt(e){return new vF(e,1)}function dbe(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function hbe(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function aPt(e,t){return e[t]}function uPt(e){const t=[];return t.key=e,t}function lPt(){var e=Qn([]),t=hbe,n=dbe,r=aPt;function i(s){var o=Array.from(e.apply(this,arguments),uPt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=mF(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Qn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Qn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?hbe:typeof s=="function"?s:Qn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??dbe,i):n},i}function BI(e,t,n){this.k=e,this.x=t,this.y=n}BI.prototype={constructor:BI,scale:function(e){return e===1?this:new BI(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new BI(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};BI.prototype;function xh(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Dv(e){return!!e&&!!e[xs]}function Wg(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===vPt}(e)||Array.isArray(e)||!!e[_be]||!!(!((t=e.constructor)===null||t===void 0)&&t[_be])||uie(e)||lie(e))}function Kw(e,t,n){n===void 0&&(n=!1),qA(e)===0?(n?Object.keys:ET)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function qA(e){var t=e[xs];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:uie(e)?2:lie(e)?3:0}function xT(e,t){return qA(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cPt(e,t){return qA(e)===2?e.get(t):e[t]}function COe(e,t,n){var r=qA(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function IOe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function uie(e){return gPt&&e instanceof Map}function lie(e){return yPt&&e instanceof Set}function N_(e){return e.o||e.t}function cie(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ROe(e);delete t[xs];for(var n=ET(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function fie(e,t){return t===void 0&&(t=!1),die(e)||Dv(e)||!Wg(e)||(qA(e)>1&&(e.set=e.add=e.clear=e.delete=fPt),Object.freeze(e),t&&Kw(e,function(n,r){return fie(r,!0)},!0)),e}function fPt(){xh(2)}function die(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function y0(e){var t=vX[e];return t||xh(18,e),t}function dPt(e,t){vX[e]||(vX[e]=t)}function mX(){return i6}function zH(e,t){t&&(y0("Patches"),e.u=[],e.s=[],e.v=t)}function R9(e){gX(e),e.p.forEach(hPt),e.p=null}function gX(e){e===i6&&(i6=e.l)}function pbe(e){return i6={p:[],l:i6,h:e,m:!0,_:0}}function hPt(e){var t=e[xs];t.i===0||t.i===1?t.j():t.g=!0}function VH(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||y0("ES5").S(t,e,r),r?(n[xs].P&&(R9(t),xh(4)),Wg(e)&&(e=N9(t,e),t.l||P9(t,e)),t.u&&y0("Patches").M(n[xs].t,e,t.u,t.s)):e=N9(t,n,[]),R9(t),t.u&&t.v(t.u,t.s),e!==kOe?e:void 0}function N9(e,t,n){if(die(t))return t;var r=t[xs];if(!r)return Kw(t,function(a,u){return mbe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return P9(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=cie(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Kw(s,function(a,u){return mbe(e,r,i,a,u,n,o)}),P9(e,i,!1),n&&e.u&&y0("Patches").N(r,n,e.u,e.s)}return r.o}function mbe(e,t,n,r,i,s,o){if(Dv(i)){var a=N9(e,i,s&&t&&t.i!==3&&!xT(t.R,r)?s.concat(r):void 0);if(COe(n,r,a),!Dv(a))return;e.m=!1}else o&&n.add(i);if(Wg(i)&&!die(i)){if(!e.h.D&&e._<1)return;N9(e,i),t&&t.A.l||P9(e,i)}}function P9(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&fie(t,n)}function HH(e,t){var n=e[xs];return(n?N_(n):e)[t]}function gbe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Ry(e){e.P||(e.P=!0,e.l&&Ry(e.l))}function qH(e){e.o||(e.o=cie(e.t))}function yX(e,t,n){var r=uie(t)?y0("MapSet").F(t,n):lie(t)?y0("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:mX(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=s6;o&&(u=[a],l=jI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):y0("ES5").J(t,n);return(n?n.A:mX()).p.push(r),r}function pPt(e){return Dv(e)||xh(22,e),function t(n){if(!Wg(n))return n;var r,i=n[xs],s=qA(n);if(i){if(!i.P&&(i.i<4||!y0("ES5").K(i)))return i.t;i.I=!0,r=ybe(n,s),i.I=!1}else r=ybe(n,s);return Kw(r,function(o,a){i&&cPt(i.t,o)===a||COe(r,o,t(a))}),s===3?new Set(r):r}(e)}function ybe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return cie(e)}function mPt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[xs];return s6.get(u,s)},set:function(u){var l=this[xs];s6.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][xs];if(!a.P)switch(a.i){case 5:r(a)&&Ry(a);break;case 4:n(a)&&Ry(a)}}}function n(s){for(var o=s.t,a=s.k,u=ET(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==xs){var f=o[c];if(f===void 0&&!xT(o,c))return!0;var d=a[c],h=d&&d[xs];if(h?h.t!==f:!IOe(d,f))return!0}}var p=!!o[xs];return u.length!==ET(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};dPt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=ROe(f);delete p[xs];for(var m=ET(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:mX(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,xs,{value:l,writable:!0}),u},S:function(s,o,a){a?Dv(o)&&o[xs].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[xs];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)Kw(d,function(b){b!==xs&&(f[b]!==void 0||xT(f,b)?h[b]||u(d[b]):(h[b]=!0,Ry(c)))}),Kw(f,function(b){d[b]!==void 0||xT(d,b)||(h[b]=!1,Ry(c))});else if(p===5){if(r(c)&&(Ry(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var vbe,i6,hie=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",gPt=typeof Map<"u",yPt=typeof Set<"u",bbe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",kOe=hie?Symbol.for("immer-nothing"):((vbe={})["immer-nothing"]=!0,vbe),_be=hie?Symbol.for("immer-draftable"):"__$immer_draftable",xs=hie?Symbol.for("immer-state"):"__$immer_state",vPt=""+Object.prototype.constructor,ET=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ROe=Object.getOwnPropertyDescriptors||function(e){var t={};return ET(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},vX={},s6={get:function(e,t){if(t===xs)return e;var n=N_(e);if(!xT(n,t))return function(i,s,o){var a,u=gbe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Wg(r)?r:r===HH(e.t,t)?(qH(e),e.o[t]=yX(e.A.h,r,e)):r},has:function(e,t){return t in N_(e)},ownKeys:function(e){return Reflect.ownKeys(N_(e))},set:function(e,t,n){var r=gbe(N_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=HH(N_(e),t),s=i==null?void 0:i[xs];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(IOe(n,i)&&(n!==void 0||xT(e.t,t)))return!0;qH(e),Ry(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return HH(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,qH(e),Ry(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=N_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){xh(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){xh(12)}},jI={};Kw(s6,function(e,t){jI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),jI.deleteProperty=function(e,t){return jI.set.call(this,e,t,void 0)},jI.set=function(e,t,n){return s6.set.call(this,e[0],t,n,e[0])};var bPt=function(){function e(n){var r=this;this.O=bbe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var l;if(typeof s!="function"&&xh(6),o!==void 0&&typeof o!="function"&&xh(7),Wg(i)){var c=pbe(r),f=yX(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?R9(c):gX(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return zH(c,o),VH(m,c)},function(m){throw R9(c),m}):(zH(c,o),VH(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===kOe&&(l=void 0),r.D&&fie(l,!0),o){var h=[],p=[];y0("Patches").M(i,l,h,p),o(h,p)}return l}xh(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Wg(n)||xh(8),Dv(n)&&(n=pPt(n));var r=pbe(this),i=yX(this,n,void 0);return i[xs].C=!0,gX(r),i},t.finishDraft=function(n,r){var i=n&&n[xs],s=i.A;return zH(s,r),VH(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!bbe&&xh(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=y0("Patches").$;return Dv(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),wf=new bPt,NOe=wf.produce;wf.produceWithPatches.bind(wf);wf.setAutoFreeze.bind(wf);wf.setUseProxies.bind(wf);wf.applyPatches.bind(wf);wf.createDraft.bind(wf);wf.finishDraft.bind(wf);function o6(e){"@babel/helpers - typeof";return o6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o6(e)}function _Pt(e,t){if(o6(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(o6(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wPt(e){var t=_Pt(e,"string");return o6(t)=="symbol"?t:t+""}function xPt(e,t,n){return(t=wPt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xbe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wbe(Object(n),!0).forEach(function(r){xPt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wbe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vu(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ebe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),WH=function(){return Math.random().toString(36).substring(7).split("").join(".")},D9={INIT:"@@redux/INIT"+WH(),REPLACE:"@@redux/REPLACE"+WH(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+WH()}};function EPt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function POe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(vu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(vu(1));return n(POe)(e,t)}if(typeof e!="function")throw new Error(vu(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(vu(3));return s}function f(m){if(typeof m!="function")throw new Error(vu(4));if(u)throw new Error(vu(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(vu(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!EPt(m))throw new Error(vu(7));if(typeof m.type>"u")throw new Error(vu(8));if(u)throw new Error(vu(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(vu(10));i=m,d({type:D9.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(vu(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Ebe]=function(){return this},m}return d({type:D9.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Ebe]=p,r}function TPt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:D9.INIT});if(typeof r>"u")throw new Error(vu(12));if(typeof n(void 0,{type:D9.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(vu(13))})}function SPt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{TPt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(vu(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function O9(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function APt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(vu(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=O9.apply(void 0,a)(i.dispatch),xbe(xbe({},i),{},{dispatch:s})}}}function DOe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var bX=DOe();bX.withExtraArgument=DOe;var OOe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jR=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Xw=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},CPt=Object.defineProperty,IPt=Object.defineProperties,kPt=Object.getOwnPropertyDescriptors,Tbe=Object.getOwnPropertySymbols,RPt=Object.prototype.hasOwnProperty,NPt=Object.prototype.propertyIsEnumerable,Sbe=function(e,t,n){return t in e?CPt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},cv=function(e,t){for(var n in t||(t={}))RPt.call(t,n)&&Sbe(e,n,t[n]);if(Tbe)for(var r=0,i=Tbe(t);r<i.length;r++){var n=i[r];NPt.call(t,n)&&Sbe(e,n,t[n])}return e},GH=function(e,t){return IPt(e,kPt(t))},UR=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},PPt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?O9:O9.apply(null,arguments)};function $Oe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var DPt=function(e){return e&&typeof e.match=="function"};function v0(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return cv(cv({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function OPt(e){return $Oe(e)&&"type"in e}var $Pt=function(e){OOe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Xw([void 0],n[0].concat(this)))):new(t.bind.apply(t,Xw([void 0],n.concat(this))))},t}(Array),LPt=function(e){OOe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Xw([void 0],n[0].concat(this)))):new(t.bind.apply(t,Xw([void 0],n.concat(this))))},t}(Array);function _X(e){return Wg(e)?NOe(e,function(){}):e}function MPt(e){return typeof e=="boolean"}function FPt(){return function(t){return BPt(t)}}function BPt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new $Pt;return n&&(MPt(n)?r.push(bX):r.push(bX.withExtraArgument(n.extraArgument))),r}function jPt(e){var t=FPt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if($Oe(i))h=SPt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=APt.apply(void 0,p),g=O9;u&&(g=PPt(cv({trace:!1},typeof u=="object"&&u)));var y=new LPt(m),v=y;Array.isArray(d)?v=Xw([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return POe(h,c,b)}function LOe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function UPt(e){return typeof e=="function"}function zPt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?LOe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(UPt(e))u=function(){return _X(e())};else{var l=_X(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=Xw([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Dv(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Wg(p))return NOe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function VPt(e,t){return e+"/"+t}function HPt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:_X(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=VPt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?v0(d,p):v0(d)});function u(){var c=typeof e.extraReducers=="function"?LOe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=cv(cv({},d),o);return zPt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,x=p;w<x.length;w++){var S=x[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var qPt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",MOe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=qPt[Math.random()*64|0];return t},WPt=["name","message","stack","code"],YH=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Abe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),GPt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=WPt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=v0(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:GH(cv({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=v0(t+"/pending",function(l,c,f){return{payload:void 0,meta:GH(cv({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=v0(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||GPt)(l||"Rejected"),meta:GH(cv({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):MOe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return UR(this,null,function(){var v,b,w,x,S,A,C;return jR(this,function(N){switch(N.label){case 0:return N.trys.push([0,4,,5]),x=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),KPt(x)?[4,x]:[3,2];case 1:x=N.sent(),N.label=2;case 2:if(x===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(k,D){return p.signal.addEventListener("abort",function(){return D({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,D){return new YH(k,D)},fulfillWithValue:function(k,D){return new Abe(k,D)}})).then(function(k){if(k instanceof YH)throw k;return k instanceof Abe?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=N.sent(),[3,5];case 4:return A=N.sent(),w=A instanceof YH?o(null,h,l,A.payload,A.meta):o(A,h,l),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,C||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(YPt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function YPt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function KPt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var XPt=function(e,t){return DPt(e)?e.match(t):e(t)};function Cbe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return XPt(r,n)})}}var pie=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},wX=function(){},FOe=function(e,t){return t===void 0&&(t=wX),e.catch(t),e},BOe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},TT=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},QPt="task",jOe="listener",UOe="completed",mie="cancelled",JPt="task-"+mie,ZPt="task-"+UOe,zOe=jOe+"-"+mie,e8t=jOe+"-"+UOe,bF=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=QPt+" "+mie+" (reason: "+t+")"}return e}(),ST=function(e){if(e.aborted)throw new bF(e.reason)};function VOe(e,t){var n=wX;return new Promise(function(r,i){var s=function(){return i(new bF(e.reason))};if(e.aborted){s();return}n=BOe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=wX})}var t8t=function(e,t){return UR(void 0,null,function(){var n,r;return jR(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof bF?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},$9=function(e){return function(t){return FOe(VOe(e,t).then(function(n){return ST(e),n}))}},HOe=function(e){var t=$9(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},n8t=Object.assign,Ibe={},zR="listenerMiddleware",r8t=function(e,t){var n=function(r){return BOe(e,function(){return TT(r,e.reason)})};return function(r,i){pie(r,"taskExecutor");var s=new AbortController;n(s);var o=t8t(function(){return UR(void 0,null,function(){var a;return jR(this,function(u){switch(u.label){case 0:return ST(e),ST(s.signal),[4,r({pause:$9(s.signal),delay:HOe(s.signal),signal:s.signal})];case 1:return a=u.sent(),ST(s.signal),[2,a]}})})},function(){return TT(s,ZPt)});return i!=null&&i.autoJoin&&t.push(o),{result:$9(e)(o),cancel:function(){TT(s,JPt)}}}},i8t=function(e,t){var n=function(r,i){return UR(void 0,null,function(){var s,o,a,u;return jR(this,function(l){switch(l.label){case 0:ST(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,VOe(t,Promise.race(a))];case 2:return u=l.sent(),ST(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return FOe(n(r,i))}},qOe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=v0(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return pie(s,"options.listener"),{predicate:i,type:t,effect:s}},s8t=function(e){var t=qOe(e),n=t.type,r=t.predicate,i=t.effect,s=MOe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},xX=function(e){e.pending.forEach(function(t){TT(t,zOe)})},o8t=function(e){return function(){e.forEach(xX),e.clear()}},kbe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},a8t=v0(zR+"/add"),u8t=v0(zR+"/removeAll"),l8t=v0(zR+"/remove"),c8t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Xw([zR+"/error"],e))};function f8t(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?c8t:i;pie(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&xX(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=s8t(h)),o(p)},l=function(h){var p=qOe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&xX(v)),!!v},c=function(h,p,m,g){return UR(t,null,function(){var y,v,b,w;return jR(this,function(x){switch(x.label){case 0:y=new AbortController,v=i8t(u,y.signal),b=[],x.label=1;case 1:return x.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,n8t({},m,{getOriginalState:g,condition:function(S,A){return v(S,A).then(Boolean)},take:v,delay:HOe(y.signal),pause:$9(y.signal),extra:r,signal:y.signal,fork:r8t(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,A,C){S!==y&&(TT(S,zOe),C.delete(S))})}})))];case 2:return x.sent(),[3,6];case 3:return w=x.sent(),w instanceof bF||kbe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return x.sent(),TT(y,e8t),h.pending.delete(y),[7];case 6:return[2]}})})},f=o8t(n),d=function(h){return function(p){return function(m){if(!OPt(m))return p(m);if(a8t.match(m))return u(m.payload);if(u8t.match(m)){f();return}if(l8t.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Ibe)throw new Error(zR+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),x=0,S=w;x<S.length;x++){var A=S[x],C=!1;try{C=A.predicate(m,b,g)}catch(N){C=!1,kbe(s,N,{raisedBy:"predicate"})}C&&c(A,m,h,y)}}finally{g=Ibe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Rbe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);mPt();function d8t(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let WP;const h8t=new Uint8Array(16);function p8t(){if(!WP&&(WP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!WP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return WP(h8t)}const Na=[];for(let e=0;e<256;++e)Na.push((e+256).toString(16).slice(1));function m8t(e,t=0){return(Na[e[t+0]]+Na[e[t+1]]+Na[e[t+2]]+Na[e[t+3]]+"-"+Na[e[t+4]]+Na[e[t+5]]+"-"+Na[e[t+6]]+Na[e[t+7]]+"-"+Na[e[t+8]]+Na[e[t+9]]+"-"+Na[e[t+10]]+Na[e[t+11]]+Na[e[t+12]]+Na[e[t+13]]+Na[e[t+14]]+Na[e[t+15]]).toLowerCase()}const g8t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Nbe={randomUUID:g8t};function Pbe(e,t,n){if(Nbe.randomUUID&&!e)return Nbe.randomUUID();e=e||{};const r=e.random||(e.rng||p8t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,m8t(r)}class b0{static get(){let t=Pbe();for(;this.ids.has(t);)t=Pbe();return this.ids.set(t,!0),t}}b0.ids=new Map;function Mh(e){return"parent"in e}function y8t(e){return!Mh(e)}function v8t(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:b0.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:b0.get(),createdOn:Date.now(),val:r}]:[];return{id:b0.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function b8t({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:b0.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:b0.get(),createdOn:Date.now(),val:s}]:[];return{id:b0.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Hs(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=I8t[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Qw(e){return!!e&&!!e[xf]}function Ov(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===k8t}(e)||Array.isArray(e)||!!e[j4]||!!(!((t=e.constructor)===null||t===void 0)&&t[j4])||_F(e)||wF(e))}function ES(e,t,n){n===void 0&&(n=!1),$v(e)===0?(n?Object.keys:wie)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function $v(e){var t=e[xf];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:_F(e)?2:wF(e)?3:0}function a6(e,t){return $v(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nO(e,t){return $v(e)===2?e.get(t):e[t]}function WOe(e,t,n){var r=$v(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function _8t(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function _F(e){return A8t&&e instanceof Map}function wF(e){return C8t&&e instanceof Set}function P_(e){return e.o||e.t}function gie(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=R8t(e);delete t[xf];for(var n=wie(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function yie(e,t){return t===void 0&&(t=!1),vie(e)||Qw(e)||!Ov(e)||($v(e)>1&&(e.set=e.add=e.clear=e.delete=w8t),Object.freeze(e),t&&ES(e,function(n,r){return yie(r,!0)},!0)),e}function w8t(){Hs(2)}function vie(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function _0(e){var t=AX[e];return t||Hs(18,e),t}function x8t(e,t){AX[e]||(AX[e]=t)}function Dbe(){return{}.NODE_ENV==="production"||TS||Hs(0),TS}function KH(e,t){t&&(_0("Patches"),e.u=[],e.s=[],e.v=t)}function L9(e){EX(e),e.p.forEach(E8t),e.p=null}function EX(e){e===TS&&(TS=e.l)}function Obe(e){return TS={p:[],l:TS,h:e,m:!0,_:0}}function E8t(e){var t=e[xf];t.i===0||t.i===1?t.j():t.O=!0}function XH(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||_0("ES5").S(t,e,r),r?(n[xf].P&&(L9(t),Hs(4)),Ov(e)&&(e=M9(t,e),t.l||F9(t,e)),t.u&&_0("Patches").M(n[xf].t,e,t.u,t.s)):e=M9(t,n,[]),L9(t),t.u&&t.v(t.u,t.s),e!==_ie?e:void 0}function M9(e,t,n){if(vie(t))return t;var r=t[xf];if(!r)return ES(t,function(s,o){return $be(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return F9(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=gie(r.k):r.o;ES(r.i===3?new Set(i):i,function(s,o){return $be(e,r,i,s,o,n)}),F9(e,i,!1),n&&e.u&&_0("Patches").R(r,n,e.u,e.s)}return r.o}function $be(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Hs(5),Qw(i)){var o=M9(e,i,s&&t&&t.i!==3&&!a6(t.D,r)?s.concat(r):void 0);if(WOe(n,r,o),!Qw(o))return;e.m=!1}if(Ov(i)&&!vie(i)){if(!e.h.F&&e._<1)return;M9(e,i),t&&t.A.l||F9(e,i)}}function F9(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&yie(t,n)}function QH(e,t){var n=e[xf];return(n?P_(n):e)[t]}function Lbe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function TX(e){e.P||(e.P=!0,e.l&&TX(e.l))}function JH(e){e.o||(e.o=gie(e.t))}function SX(e,t,n){var r=_F(t)?_0("MapSet").N(t,n):wF(t)?_0("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Dbe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=CX;o&&(u=[a],l=UI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):_0("ES5").J(t,n);return(n?n.A:Dbe()).p.push(r),r}function T8t(e){return Qw(e)||Hs(22,e),function t(n){if(!Ov(n))return n;var r,i=n[xf],s=$v(n);if(i){if(!i.P&&(i.i<4||!_0("ES5").K(i)))return i.t;i.I=!0,r=Mbe(n,s),i.I=!1}else r=Mbe(n,s);return ES(r,function(o,a){i&&nO(i.t,o)===a||WOe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Mbe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return gie(e)}function S8t(){function e(r){if(!Ov(r))return r;if(Array.isArray(r))return r.map(e);if(_F(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(wF(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return a6(r,j4)&&(i[j4]=r[j4]),i}function t(r){return Qw(r)?e(r):r}var n="add";x8t("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=$v(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Hs(24),typeof u=="function"&&f==="prototype"&&Hs(24),typeof(u=nO(u,f))!="object"&&Hs(15,o.join("/"))}var d=$v(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Hs(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Hs(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;ES(a.D,function(h,p){var m=nO(f,h),g=nO(d,h),y=p?a6(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===_ie?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Fbe,TS,bie=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",A8t=typeof Map<"u",C8t=typeof Set<"u",Bbe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",_ie=bie?Symbol.for("immer-nothing"):((Fbe={})["immer-nothing"]=!0,Fbe),j4=bie?Symbol.for("immer-draftable"):"__$immer_draftable",xf=bie?Symbol.for("immer-state"):"__$immer_state",I8t={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},k8t=""+Object.prototype.constructor,wie=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,R8t=Object.getOwnPropertyDescriptors||function(e){var t={};return wie(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},AX={},CX={get:function(e,t){if(t===xf)return e;var n=P_(e);if(!a6(n,t))return function(i,s,o){var a,u=Lbe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Ov(r)?r:r===QH(e.t,t)?(JH(e),e.o[t]=SX(e.A.h,r,e)):r},has:function(e,t){return t in P_(e)},ownKeys:function(e){return Reflect.ownKeys(P_(e))},set:function(e,t,n){var r=Lbe(P_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=QH(P_(e),t),s=i==null?void 0:i[xf];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(_8t(n,i)&&(n!==void 0||a6(e.t,t)))return!0;JH(e),TX(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return QH(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,JH(e),TX(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=P_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Hs(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Hs(12)}},UI={};ES(CX,function(e,t){UI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),UI.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Hs(13),UI.set.call(this,e,t,void 0)},UI.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Hs(14),CX.set.call(this,e[0],t,n,e[0])};var N8t=function(){function e(n){var r=this;this.g=Bbe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Hs(6),o!==void 0&&typeof o!="function"&&Hs(7),Ov(i)){var c=Obe(r),f=SX(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?L9(c):EX(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return KH(c,o),XH(m,c)},function(m){throw L9(c),m}):(KH(c,o),XH(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===_ie&&(l=void 0),r.F&&yie(l,!0),o){var h=[],p=[];_0("Patches").M(i,l,h,p),o(h,p)}return l}Hs(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Ov(n)||Hs(8),Qw(n)&&(n=T8t(n));var r=Obe(this),i=SX(this,n,void 0);return i[xf].C=!0,EX(r),i},t.finishDraft=function(n,r){var i=n&&n[xf];({}).NODE_ENV!=="production"&&(i&&i.C||Hs(9),i.I&&Hs(10));var s=i.A;return KH(s,r),XH(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Bbe&&Hs(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=_0("Patches").$;return Qw(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Ef=new N8t,P8t=Ef.produce;Ef.produceWithPatches.bind(Ef);Ef.setAutoFreeze.bind(Ef);Ef.setUseProxies.bind(Ef);Ef.applyPatches.bind(Ef);Ef.createDraft.bind(Ef);Ef.finishDraft.bind(Ef);function D8t(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=v8t({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return HPt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:b0.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:b0.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function O8t(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=D8t(e),s=f8t();s.startListening({matcher:Cbe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Cbe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=jPt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:b0.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var $8t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),L8t=Object.prototype.hasOwnProperty;function IX(e,t){return L8t.call(e,t)}function kX(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)IX(e,i)&&r.push(i);return r}function lc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function RX(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function D_(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function GOe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function NX(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(NX(e[t]))return!0}else if(typeof e=="object"){for(var r=kX(e),i=r.length,s=0;s<i;s++)if(NX(e[r[s]]))return!0}}return!1}function jbe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var YOe=function(e){$8t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,jbe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=jbe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),js=YOe,M8t=lc,XE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=B9(n,this.path);r&&(r=lc(r));var i=Aw(n,{op:"remove",path:this.from}).removed;return Aw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=B9(n,this.from);return Aw(n,{op:"add",path:this.path,value:lc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:u6(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},F8t={add:function(e,t,n){return RX(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:XE.move,copy:XE.copy,test:XE.test,_get:XE._get};function B9(e,t){if(t=="")return e;var n={op:"_get",path:t};return Aw(e,n),n.value}function Aw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):j9(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=B9(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=u6(e,t.value),o.test===!1)throw new js("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new js("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=lc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=j9;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=GOe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!RX(h))throw new js("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);RX(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new js("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=F8t[t.op].call(t,l,h,e);if(o.test===!1)throw new js("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=XE[t.op].call(t,l,h,e);if(o.test===!1)throw new js("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new js("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function xF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new js("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=lc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Aw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function B8t(e,t,n){var r=Aw(e,t);if(r.test===!1)throw new js("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function j9(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new js("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(XE[e.op]){if(typeof e.path!="string")throw new js("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new js('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new js("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new js("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&NX(e.value))throw new js("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new js("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new js("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=KOe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new js("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new js("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function KOe(e,t,n){try{if(!Array.isArray(e))throw new js("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)xF(lc(t),lc(e),n||!0);else{n=n||j9;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof js)return i;throw i}}function u6(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!u6(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!u6(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const j8t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:js,_areEquals:u6,applyOperation:Aw,applyPatch:xF,applyReducer:B8t,deepClone:M8t,getValueByPointer:B9,validate:KOe,validator:j9},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var xie=new WeakMap,U8t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),z8t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function V8t(e){return xie.get(e)}function H8t(e,t){return e.observers.get(t)}function q8t(e,t){e.observers.delete(t.callback)}function W8t(e,t){t.unobserve()}function G8t(e,t){var n=[],r,i=V8t(e);if(!i)i=new U8t(e),xie.set(e,i);else{var s=H8t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=lc(e),t){r.callback=t,r.next=null;var o=function(){PX(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){PX(r),clearTimeout(r.next),q8t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new z8t(t,r)),r}function PX(e,t){t===void 0&&(t=!1);var n=xie.get(e.object);Eie(n.value,e.object,e.patches,"",t),e.patches.length&&xF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Eie(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=kX(t),o=kX(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(IX(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Eie(c,f,n,r+"/"+D_(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+D_(l),value:lc(c)}),n.push({op:"replace",path:r+"/"+D_(l),value:lc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+D_(l),value:lc(c)}),n.push({op:"remove",path:r+"/"+D_(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!IX(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+D_(l),value:lc(t[l])})}}}function XOe(e,t,n){n===void 0&&(n=!1);var r=[];return Eie(e,t,r,"",n),r}const Y8t=Object.freeze(Object.defineProperty({__proto__:null,compare:XOe,generate:PX,observe:G8t,unobserve:W8t},Symbol.toStringTag,{value:"Module"}));Object.assign({},j8t,Y8t,{JsonPatchError:YOe,deepClone:lc,escapePathComponent:D_,unescapePathComponent:GOe});var zI=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(zI||{});function rO(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=QOe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=rO(i,t);return xF(a,lc(o),!0,!1).newDocument}function K8t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function VR({registry:e,initialState:t}){let n=!1;const r=d8t(),i=O8t(t);function s(c){return i.backend.nodes[c]}r.listen(zI.TRAVERSAL_START,()=>{n=!0}),r.listen(zI.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return rO(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=rO(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=XOe(y,f);if(K8t(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=b8t({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=rO(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(zI.TRAVERSAL_START);const f=QOe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);Q8t(p,m)?Mh(p)&&d.push(...p.sideEffects.undo):Mh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(zI.TRAVERSAL_END)},undo(){const{current:c}=i;return Mh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return JOe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function X8t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Mh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Mh(r)&&(r=n[r.parent]),Mh(i)&&(i=n[i.parent]);return r.id}function QOe(e,t,n){const r=X8t(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Mh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Mh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function Q8t(e,t){if(Mh(e)&&e.parent===t.id)return!0;if(Mh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function JOe(e,t){return{...e,children:e.children.map(n=>JOe(t[n],t)),name:`${e.label}`}}S8t();function J8t(e){return e.length===2?P8t(e):e}class Wx{static create(){return new Wx}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:J8t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),v0(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}const Ube=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},WA=e=>{const t=R.useRef(null),n=Ube(e),[r,i]=R.useState(0),[s,o]=R.useState(0);R.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Ube({...n,width:n.width||r,height:n.height||s});return[t,a]},Z8t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:WA},Symbol.toStringTag,{value:"Module"})),eDt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function tDt({parameters:e,setAnswer:t}){const[n,r]=WA(eDt),[i,s]=R.useState(100),[o,a]=R.useState(100),[u,l]=R.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=R.useMemo(()=>{const p=Wx.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=VR({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=R.useCallback(p=>{const m=cr("#movingCircle"),g=cr("#clickAccuracySvg"),y=q$(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return R.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;cr(n.current).select("circle").transition().duration(y).ease(l4t).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:E.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[E.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),E.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),E.jsxs(ke,{children:["Adjust speed (px/s):",E.jsx(_b,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const nDt=Object.freeze(Object.defineProperty({__proto__:null,default:tDt},Symbol.toStringTag,{value:"Module"}));function Tie({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=R.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=R.useCallback(c=>(s?BR("%B"):Cb(".2s"))(c),[s]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:E.jsx(Ko,{children:E.jsx(bi,{gap:3,children:E.jsx(Ue,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?E.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>E.jsxs("g",{transform:`translate(${f}, ${n})`,children:[E.jsx("line",{y2:"6",stroke:"currentColor"}),o?E.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,E.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:E.jsx(Ko,{children:E.jsx(us,{withinPortal:!0,label:c,children:E.jsx(Ue,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const rDt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:Tie},Symbol.toStringTag,{value:"Module"}));function ZOe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=R.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(Ko,{children:E.jsx(bi,{gap:3,children:E.jsx(Ue,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>E.jsxs("g",{transform:`translate(${n}, ${l})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),s?E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,E.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:E.jsx("foreignObject",{width:a,height:20,children:E.jsx(bi,{style:{width:"100%",height:"100%"},justify:"right",children:E.jsx(Ue,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const iDt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:ZOe},Symbol.toStringTag,{value:"Module"})),Vf={top:15,left:100,right:50,bottom:50};function DX({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=cf(),o=R.useMemo(()=>s-Vf.left-Vf.right,[s]),a=R.useMemo(()=>i-Vf.top-Vf.bottom,[i]),u=R.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return kb(hF).domain(d)},[n,t.category]),l=R.useMemo(()=>e?xa([Vf.left,o+Vf.left]).domain([0,xg(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=R.useMemo(()=>e?zA([Vf.top,a+Vf.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=R.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:E.jsxs("g",{children:[E.jsx("rect",{x:Vf.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Vf.left},h),E.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?E.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E.jsx(Tie,{xScale:l,yRange:c.range(),vertPosition:a+Vf.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?E.jsx(ZOe,{yScale:c,horizontalPosition:Vf.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):E.jsx(Pc,{})}const sDt=Object.freeze(Object.defineProperty({__proto__:null,Bar:DX,default:DX},Symbol.toStringTag,{value:"Module"})),Zr=Array.isArray;function Ec(e){return e!=null?Zr(e)?e:[e]:[]}function oDt(e=0,t=1/0){return`${zbe(e)} < row_number() && row_number() <= ${zbe(t)}`}function zbe(e){return e<0?`count() + ${e}`:e}class e$e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(oDt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Ec(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Jn(e){throw Error(e)}function El(e){return typeof e=="number"}function ps(e){return typeof e=="function"}function EF(e,t){const n=Array(e);if(ps(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let aDt=class extends e$e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Jn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Jn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Jn("Not implemented")}getter(t){Jn("Not implemented")}objects(t){Jn("Not implemented")}object(t){Jn("Not implemented")}[Symbol.iterator](){Jn("Not implemented")}print(t={}){El(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=EF(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},uDt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},lDt=function(e){return e&&ps(e.get)?e:new uDt(e)};function Gg(e){return e instanceof Date}function Lu(e){return e===Object(e)}function U9(e){return e instanceof RegExp}function Ja(e){return typeof e=="string"}function cDt(e,t){const n=r=>Jn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Vbe(e.entries(),t):Gg(e)?n("Date"):U9(e)?n("RegExp"):Ja(e)?n():Zr(e)?fDt(e,t):ps(e[Symbol.iterator])?dDt(e,t):Lu(e)?Vbe(Object.entries(e),t):n()}function Vbe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function fDt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function dDt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:hDt}=Object.prototype;function Gh(e,t){return hDt.call(e,t)}function Df(e){return e?new Hbe({...e.data()},e.columnNames()):new Hbe}class Hbe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Gh(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Kr=void 0,pDt=Object.getPrototypeOf(Int8Array);function HR(e){return e instanceof pDt}function lw(e){return Zr(e)||HR(e)}function kh(e){return e!=null&&e===e}const I3=e=>lw(e)||Ja(e),mDt={compact:e=>lw(e)?e.filter(t=>kh(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>I3(e)?e.includes(t,n):!1,indexof:(e,t)=>I3(e)?e.indexOf(t):-1,join:(e,t)=>lw(e)?e.join(t):Kr,lastindexof:(e,t)=>I3(e)?e.lastIndexOf(t):-1,length:e=>I3(e)?e.length:0,pluck:(e,t)=>lw(e)?e.map(n=>kh(n)?n[t]:Kr):Kr,reverse:e=>lw(e)?e.slice().reverse():Ja(e)?e.split("").reverse().join(""):Kr,slice:(e,t,n)=>I3(e)?e.slice(t,n):Kr};function gDt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function iO(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Sp=e=>(e<10?"0":"")+e,yDt=e=>e<0?"-"+iO(-e,6):e>9999?"+"+iO(e,6):iO(e,4);function t$e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return yDt(e)+"-"+Sp(t+1)+"-"+Sp(n)+(!u||o?"T"+Sp(r)+":"+Sp(i)+":"+Sp(s)+"."+iO(o,3)+l:s?"T"+Sp(r)+":"+Sp(i)+":"+Sp(s)+l:i||r||!a?"T"+Sp(r)+":"+Sp(i)+l:"")}function n$e(e,t){return isNaN(e)?"Invalid Date":t$e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function TF(e,t){return isNaN(e)?"Invalid Date":t$e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const vDt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function bDt(e){return e.match(vDt)&&!isNaN(Date.parse(e))}function _Dt(e,t=Date.parse){return bDt(e)?t(e):e}const r$e=6e4,i$e=864e5,s$e=6048e5,Vs=new Date,qs=new Date,ro=e=>(Vs.setTime(typeof e=="string"?_Dt(e):e),Vs);function wDt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function xDt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function EDt(e){qs.setTime(+e),qs.setHours(0,0,0,0),Vs.setTime(+qs),Vs.setMonth(0),Vs.setDate(1);const t=(qs.getTimezoneOffset()-Vs.getTimezoneOffset())*r$e;return Math.floor(1+(qs-Vs-t)/i$e)}function TDt(e){qs.setTime(+e),qs.setUTCHours(0,0,0,0);const t=Date.UTC(qs.getUTCFullYear(),0,1);return Math.floor(1+(qs-t)/i$e)}function SDt(e,t){const n=t||0;qs.setTime(+e),qs.setDate(qs.getDate()-(qs.getDay()+7-n)%7),qs.setHours(0,0,0,0),Vs.setTime(+e),Vs.setMonth(0),Vs.setDate(1),Vs.setDate(1-(Vs.getDay()+7-n)%7),Vs.setHours(0,0,0,0);const r=(qs.getTimezoneOffset()-Vs.getTimezoneOffset())*r$e;return Math.floor((1+(qs-Vs)-r)/s$e)}function ADt(e,t){const n=t||0;return qs.setTime(+e),qs.setUTCDate(qs.getUTCDate()-(qs.getUTCDay()+7-n)%7),qs.setUTCHours(0,0,0,0),Vs.setTime(+e),Vs.setUTCMonth(0),Vs.setUTCDate(1),Vs.setUTCDate(1-(Vs.getUTCDay()+7-n)%7),Vs.setUTCHours(0,0,0,0),Math.floor((1+(qs-Vs))/s$e)}const CDt={format_date:(e,t)=>n$e(ro(e),!t),format_utcdate:(e,t)=>TF(ro(e),!t),timestamp:e=>+ro(e),year:e=>ro(e).getFullYear(),quarter:e=>Math.floor(ro(e).getMonth()/3),month:e=>ro(e).getMonth(),date:e=>ro(e).getDate(),dayofweek:e=>ro(e).getDay(),hours:e=>ro(e).getHours(),minutes:e=>ro(e).getMinutes(),seconds:e=>ro(e).getSeconds(),milliseconds:e=>ro(e).getMilliseconds(),utcyear:e=>ro(e).getUTCFullYear(),utcquarter:e=>Math.floor(ro(e).getUTCMonth()/3),utcmonth:e=>ro(e).getUTCMonth(),utcdate:e=>ro(e).getUTCDate(),utcdayofweek:e=>ro(e).getUTCDay(),utchours:e=>ro(e).getUTCHours(),utcminutes:e=>ro(e).getUTCMinutes(),utcseconds:e=>ro(e).getUTCSeconds(),utcmilliseconds:e=>ro(e).getUTCMilliseconds(),datetime:wDt,dayofyear:EDt,week:SDt,utcdatetime:xDt,utcdayofyear:TDt,utcweek:ADt,now:Date.now};function Sie(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Gg(e)||Gg(t)?+e==+t:U9(e)&&U9(t)?e+""==t+"":Lu(e)&&Lu(t)?IDt(e,t):!1}function IDt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return qbe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!qbe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!Sie(e[o],t[o]))return!1}return!0}function qbe(e,t,n=Sie){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const kDt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let RDt=Math.random;function GA(){return RDt()}const NDt={random:GA,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Aie(e){return e instanceof Map}function PDt(e){return e instanceof Set}function sO(e){return Aie(e)||PDt(e)}function ZH(e){return Array.from(e)}const DDt={has:(e,t)=>sO(e)?e.has(t):e!=null?Gh(e,t):!1,keys:e=>Aie(e)?ZH(e.keys()):e!=null?Object.keys(e):[],values:e=>sO(e)?ZH(e.values()):e!=null?Object.values(e):[],entries:e=>sO(e)?ZH(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Kr};function ODt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Gh(t,e))return t[e];return n!==void 0?n:e}function $Dt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const LDt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},QE={bin:gDt,equal:Sie,recode:ODt,sequence:$Dt,...mDt,...CDt,...kDt,...NDt,...DDt,...LDt};function l6(e){return typeof e=="bigint"}function D0(e){return e===void 0?e+"":l6(e)?e+"n":JSON.stringify(e)}function qn(e,t=[],n=[]){return new MDt(e,Ec(t),Ec(n))}let MDt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${D0(n)}]`),...this.params.map(D0)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const o$e=e=>qn("any",e),a$e=()=>qn("count"),u$e=e=>qn("array_agg",e),l$e=e=>qn("array_agg_distinct",e),c$e=(e,t)=>qn("map_agg",[e,t]),f$e=(e,t)=>qn("object_agg",[e,t]),d$e=(e,t)=>qn("entries_agg",[e,t]);({...QE});function FDt(e,t){e=sO(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function BDt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function jDt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function UDt(e,t,n,r){const i=r==="map"||r===!0?c$e:r==="entries"?d$e:r==="object"?f$e:Jn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=FDt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:u$e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const zDt="ArrayPattern",VDt="ArrowFunctionExpression",HDt="FunctionExpression",fv="Identifier",YA="Literal",h$e="MemberExpression",qDt="ObjectExpression",p$e="ObjectPattern",m$e="Property",qR="Column",WDt="Constant",GDt="Dictionary",YDt="Function",KDt="Parameter",g$e="Op",Yi=(e,t)=>{const n=XDt[e.type];return n?n(e,t):Jn(`Unsupported expression construct: ${e.type}`)},eq=(e,t)=>"("+Yi(e.left,t)+" "+e.operator+" "+Yi(e.right,t)+")",tq=(e,t)=>"("+Mp(e.params,t)+")=>"+Yi(e.body,t),Wbe=(e,t)=>Yi(e.callee,t)+"("+Mp(e.arguments,t)+")",Mp=(e,t,n=",")=>e.map(r=>Yi(r,t)).join(n),y$e=e=>e.computed?`[${D0(e.name)}]`:`.${e.name}`,Gbe=(e,t,n)=>{const r=e.table||"";return`data${r}${y$e(e)}.${n}(${t.index}${r})`},XDt={Constant:e=>e.raw,Column:(e,t)=>Gbe(e,t,"get"),Dictionary:(e,t)=>Gbe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${y$e(e)}`,Op:(e,t)=>`op(${D0(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Yi(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Yi(e.object,t),i=Yi(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Wbe,NewExpression:(e,t)=>"new "+Wbe(e,t),ArrayExpression:(e,t)=>"["+Mp(e.elements,t)+"]",AssignmentExpression:eq,BinaryExpression:eq,LogicalExpression:eq,UnaryExpression:(e,t)=>"("+e.operator+Yi(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Yi(e.test,t)+"?"+Yi(e.consequent,t)+":"+Yi(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Mp(e.properties,t)+"})",Property:(e,t)=>{const n=Yi(e.key,t);return(e.computed?`[${n}]`:n)+":"+Yi(e.value,t)},ArrowFunctionExpression:tq,FunctionExpression:tq,FunctionDeclaration:tq,ArrayPattern:(e,t)=>"["+Mp(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Mp(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Mp(e.declarations,t,","),VariableDeclarator:(e,t)=>Yi(e.id,t)+"="+Yi(e.init,t),SpreadElement:(e,t)=>"..."+Yi(e.argument,t),BlockStatement:(e,t)=>"{"+Mp(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Yi(e.expression,t),IfStatement:(e,t)=>"if ("+Yi(e.test,t)+")"+Yi(e.consequent,t)+(e.alternate?" else "+Yi(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Yi(e.discriminant,t)+") {"+Mp(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Yi(e.test,t):"default")+": "+Mp(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Yi(e.argument,t),Program:(e,t)=>Yi(e.body[0],t)};function z9(e,t={index:"row"}){return Yi(e,t)}function QDt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function SS(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Gg(e)?+e:Zr(e)||HR(e)?`[${e.map(SS)}]`:U9(e)?e+"":JDt(e)}function JDt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${SS(e[r])}`;return t+="}",t}function V9(e,t){const n=e.length;return n===1?(r,i)=>SS(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=SS(a)}return s}}function ZDt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=SS(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=SS(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Gm(){}function eOt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Lo(e){return e.init=e.init||Gm,e.add=e.add||Gm,e.rem=e.rem||Gm,e}function Ybe(e,t){return e.product_v=!1,e.product=t}const v$e={count:{create:()=>Lo({value:e=>e.count}),param:[]},array_agg:{create:()=>Lo({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Lo({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Lo({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Lo({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Lo({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Kr}),param:[1]},valid:{create:()=>Lo({value:e=>e.valid}),param:[1]},invalid:{create:()=>Lo({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=ZDt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Lo({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Lo({value:e=>{let t=Kr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Kr,add:(e,t)=>l6(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Ybe(e,1),value:e=>e.valid?e.product_v?Ybe(e,eOt(e.list.values())):e.product:void 0,add:(e,t)=>l6(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Kr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Lo({value:e=>e.valid?e.mean:Kr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Kr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Lo({value:e=>e.valid>1?e.dev/e.valid:Kr}),param:[1],req:["variance"]},stdev:{create:()=>Lo({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Kr}),param:[1],req:["variance"]},stdevp:{create:()=>Lo({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Kr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Kr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Kr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Kr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Kr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Lo({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Lo({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Kr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Lo({value:e=>e.valid>1?e.cov/e.valid:Kr}),param:[2],req:["covariance"]},corr:{create:()=>Lo({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Kr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Lo({value:i=>QDt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Kbe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Xbe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},b$e={row_number:{create(){return{init:Gm,value:e=>e.index+1}},param:[]},rank:Kbe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Kbe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Xbe,ntile:{create(e){e=+e,e>0||Jn("ntile num must be greater than zero.");const{init:t,value:n}=Xbe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Kr){return e=+e||1,{init:Gm,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Kr){return e=+e||1,{init:Gm,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Gm,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Gm,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Jn("nth_value nth must be greater than zero."),{init:Gm,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Kr}}},param:[1,1]},fill_down:{create(e=Kr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return kh(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Kr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=tOt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function tOt(e,t,n){for(const r=e.size;n<r;++n)if(kh(e.value(n,t)))return n;return-1}function Cie(e){return Gh(v$e,e)}function Iie(e){return Gh(b$e,e)}function _$e(e){return Gh(QE,e)||e==="row_object"}function w$e(e){return Cie(e)&&v$e[e]}function x$e(e){return Iie(e)&&b$e[e]}function k3(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const kie={escape:(e,t,n)=>k3(e,t,n),expr:(e,t)=>k3(`(row,data,op)=>${e}`,QE,t),expr2:(e,t)=>k3(`(row0,data0,row,data)=>${e}`,QE,t),join:(e,t)=>k3(`(row1,data1,row2,data2)=>${e}`,QE,t),param:(e,t)=>k3(e,QE,t)},nOt={"==":1,"!=":1,"===":1,"!==":1};function E$e(e,t,n=0,r,i){if(e.type=qR,e.name=t,e.table=n,i&&r&&ps(r.keyFor)){const s=nOt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===YA&&rOt(i,e,s,r.keyFor(s.value))}return e}function rOt(e,t,n,r){return r<0?(e.type=YA,e.value=!1,e.raw="false"):(t.type=GDt,n.value=r,n.raw=r+""),!0}function SF(e){return Zr(e)?e:Aie(e)?e.entries():e?Object.entries(e):[]}const T$e="row_object";function S$e(e,t){e.type=qDt;const n=e.properties=[];for(const r of SF(t)){const[i,s]=Zr(r)?r:[r,r];n.push({type:m$e,key:{type:YA,raw:D0(s)},value:E$e({computed:!0},i)})}return e}function A$e(e){return z9(S$e({},e))}function C$e(e){return kie.expr(A$e(e))}const iOt=new TextDecoder("utf-8"),OX=e=>iOt.decode(e),sOt=new TextEncoder,Rie=e=>sOt.encode(e),oOt=e=>typeof e=="boolean",Yl=e=>typeof e=="function",Nb=e=>e!=null&&Object(e)===e,AF=e=>Nb(e)&&Yl(e.then),Nie=e=>Nb(e)&&Yl(e[Symbol.iterator]),CF=e=>Nb(e)&&Yl(e[Symbol.asyncIterator]),aOt=e=>Nb(e)&&"done"in e&&"value"in e,I$e=e=>"_getDOMStream"in e&&"_getNodeStream"in e,uOt=e=>Nb(e)&&Yl(e.abort)&&Yl(e.getWriter)&&!I$e(e),lOt=e=>Nb(e)&&Yl(e.end)&&Yl(e.write)&&oOt(e.writable)&&!I$e(e),cOt=e=>Nb(e)&&Yl(e.clear)&&Yl(e.bytes)&&Yl(e.position)&&Yl(e.setPosition)&&Yl(e.capacity)&&Yl(e.getBufferIdentifier)&&Yl(e.createLong),Pie=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function fOt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function H9(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function O0(e,t){const n=fOt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?H9(o,s,a):o=s;break}H9(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function oa(e,t){let n=aOt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Rie(n)),n instanceof ArrayBuffer?new e(n):n instanceof Pie?new e(n):cOt(n)?oa(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const R3=e=>oa(Int32Array,e),Si=e=>oa(Uint8Array,e),$X=e=>(e.next(),e);function*dOt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Pie?n(t):Nie(t)?t:n(t);return yield*$X(function*(i){let s=null;do s=i.next(yield oa(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const hOt=e=>dOt(Uint8Array,e);function k$e(e,t){return nw(this,arguments,function*(){if(AF(t))return yield Or(yield Or(yield*Uz(E4(k$e(e,yield Or(t))))));const r=function(o){return nw(this,arguments,function*(){yield yield Or(yield Or(o))})},i=function(o){return nw(this,arguments,function*(){yield Or(yield*Uz(E4($X(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Pie?r(t):Nie(t)?i(t):CF(t)?t:r(t);return yield Or(yield*Uz(E4($X(function(o){return nw(this,arguments,function*(){let a=null;do a=yield Or(o.next(yield yield Or(oa(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Or(new e)})}const pOt=e=>k$e(Uint8Array,e);function R$e(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function mOt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Qbe={fromIterable(e){return GP(gOt(e))},fromAsyncIterable(e){return GP(yOt(e))},fromDOMStream(e){return GP(vOt(e))},fromNodeStream(e){return GP(_Ot(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},GP=e=>(e.next(),e);function*gOt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?O0(r,o)[0]:([i,r,a]=O0(r,o),i)}({cmd:s,size:o}=yield null);const l=hOt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function yOt(e){return nw(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?O0(i,a)[0]:([s,i,u]=O0(i,a),s)}({cmd:o,size:a}=yield yield Or(null));const c=pOt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Or(c.next()):yield Or(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Or(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Or(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Or(c.return(new Uint8Array(0))))}return yield Or(null)})}function vOt(e){return nw(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?O0(i,a)[0]:([s,i,u]=O0(i,a),s)}({cmd:o,size:a}=yield yield Or(null));const c=new bOt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Or(c.read()):yield Or(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Si(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Or(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Or(c.cancel(f)))}finally{r===!1?yield Or(c.cancel()):e.locked&&c.releaseLock()}return yield Or(null)})}class bOt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Xm(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Xm(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Si(n)),n})}}const nq=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function _Ot(e){return nw(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?O0(l,a)[0]:([c,l,u]=O0(l,a),c)}if({cmd:o,size:a}=yield yield Or(null),e.isTTY)return yield yield Or(new Uint8Array(0)),yield Or(null);try{n[0]=nq(e,"end"),n[1]=nq(e,"error");do{if(n[2]=nq(e,"readable"),[r,s]=yield Or(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Si(e.read(a-u)),c.byteLength<a-u&&(c=Si(e.read()))):c=Si(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Or(f()));while(a<u)}while(!i)}finally{yield Or(d(n,r==="error"?s:null))}return yield Or(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var ll;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ll||(ll={}));var Tc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Tc||(Tc={}));var Ha;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Ha||(Ha={}));var $0;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})($0||($0={}));var yn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(yn||(yn={}));var L0;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(L0||(L0={}));var la;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(la||(la={}));var fe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(fe||(fe={}));var Um;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Um||(Um={}));const wOt=void 0;function Jw(e){if(e===null)return"null";if(e===wOt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Jw(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const xOt=Symbol.for("isArrowBigNum");function up(e,...t){return t.length===0?Object.setPrototypeOf(oa(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}up.prototype[xOt]=!0;up.prototype.toJSON=function(){return`"${f6(this)}"`};up.prototype.valueOf=function(){return N$e(this)};up.prototype.toString=function(){return f6(this)};up.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return N$e(this);case"string":return f6(this);case"default":return EOt(this)}return f6(this)};function AT(...e){return up.apply(this,e)}function CT(...e){return up.apply(this,e)}function c6(...e){return up.apply(this,e)}Object.setPrototypeOf(AT.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(CT.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(c6.prototype,Object.create(Uint32Array.prototype));Object.assign(AT.prototype,up.prototype,{constructor:AT,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(CT.prototype,up.prototype,{constructor:CT,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(c6.prototype,up.prototype,{constructor:c6,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function N$e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const f6=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return rq(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return rq(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${rq(t)}`},EOt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:f6(e);function rq(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class Die{static new(t,n){switch(n){case!0:return new AT(t);case!1:return new CT(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new AT(t)}return t.byteLength===16?new c6(t):new CT(t)}static signed(t){return new AT(t)}static unsigned(t){return new CT(t)}static decimal(t){return new c6(t)}constructor(t,n){return Die.new(t,n)}}function Yh(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var P$e,D$e,O$e,$$e,L$e,M$e,F$e,B$e,j$e,U$e,z$e,V$e,H$e,q$e,W$e,G$e,Y$e,K$e,X$e,Q$e;let nr=class LX{static isNull(t){return(t==null?void 0:t.typeId)===fe.Null}static isInt(t){return(t==null?void 0:t.typeId)===fe.Int}static isFloat(t){return(t==null?void 0:t.typeId)===fe.Float}static isBinary(t){return(t==null?void 0:t.typeId)===fe.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===fe.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===fe.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===fe.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===fe.Date}static isTime(t){return(t==null?void 0:t.typeId)===fe.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===fe.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===fe.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===fe.Duration}static isList(t){return(t==null?void 0:t.typeId)===fe.List}static isStruct(t){return(t==null?void 0:t.typeId)===fe.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===fe.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===fe.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===fe.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===fe.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===fe.Dictionary}static isDenseUnion(t){return LX.isUnion(t)&&t.mode===Tc.Dense}static isSparseUnion(t){return LX.isUnion(t)&&t.mode===Tc.Sparse}get typeId(){return fe.NONE}};P$e=Symbol.toStringTag;nr[P$e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(nr.prototype);let Yg=class extends nr{toString(){return"Null"}get typeId(){return fe.Null}};D$e=Symbol.toStringTag;Yg[D$e]=(e=>e[Symbol.toStringTag]="Null")(Yg.prototype);class Tl extends nr{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return fe.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}O$e=Symbol.toStringTag;Tl[O$e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Tl.prototype);class Oie extends Tl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class $ie extends Tl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Lv extends Tl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class Lie extends Tl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class Mie extends Tl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Fie extends Tl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class Bie extends Tl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class jie extends Tl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(Oie.prototype,"ArrayType",{value:Int8Array});Object.defineProperty($ie.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Lv.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Lie.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(Mie.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Fie.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Bie.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(jie.prototype,"ArrayType",{value:BigUint64Array});class Mv extends nr{constructor(t){super(),this.precision=t}get typeId(){return fe.Float}get ArrayType(){switch(this.precision){case Ha.HALF:return Uint16Array;case Ha.SINGLE:return Float32Array;case Ha.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}$$e=Symbol.toStringTag;Mv[$$e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Mv.prototype);class J$e extends Mv{constructor(){super(Ha.HALF)}}class Uie extends Mv{constructor(){super(Ha.SINGLE)}}class zie extends Mv{constructor(){super(Ha.DOUBLE)}}Object.defineProperty(J$e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Uie.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(zie.prototype,"ArrayType",{value:Float64Array});let d6=class extends nr{constructor(){super()}get typeId(){return fe.Binary}toString(){return"Binary"}};L$e=Symbol.toStringTag;d6[L$e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(d6.prototype);let AS=class extends nr{constructor(){super()}get typeId(){return fe.Utf8}toString(){return"Utf8"}};M$e=Symbol.toStringTag;AS[M$e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(AS.prototype);let h6=class extends nr{constructor(){super()}get typeId(){return fe.Bool}toString(){return"Bool"}};F$e=Symbol.toStringTag;h6[F$e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(h6.prototype);let q9=class extends nr{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return fe.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};B$e=Symbol.toStringTag;q9[B$e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(q9.prototype);class CS extends nr{constructor(t){super(),this.unit=t}get typeId(){return fe.Date}toString(){return`Date${(this.unit+1)*32}<${$0[this.unit]}>`}}j$e=Symbol.toStringTag;CS[j$e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(CS.prototype);class TOt extends CS{constructor(){super($0.DAY)}}class SOt extends CS{constructor(){super($0.MILLISECOND)}}class Kg extends nr{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return fe.Time}toString(){return`Time${this.bitWidth}<${yn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}U$e=Symbol.toStringTag;Kg[U$e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Kg.prototype);class AOt extends Kg{constructor(){super(yn.SECOND,32)}}class COt extends Kg{constructor(){super(yn.MILLISECOND,32)}}class IOt extends Kg{constructor(){super(yn.MICROSECOND,64)}}class kOt extends Kg{constructor(){super(yn.NANOSECOND,64)}}class W9 extends nr{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return fe.Timestamp}toString(){return`Timestamp<${yn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}z$e=Symbol.toStringTag;W9[z$e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(W9.prototype);class IS extends nr{constructor(t){super(),this.unit=t}get typeId(){return fe.Interval}toString(){return`Interval<${L0[this.unit]}>`}}V$e=Symbol.toStringTag;IS[V$e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(IS.prototype);class ROt extends IS{constructor(){super(L0.DAY_TIME)}}class NOt extends IS{constructor(){super(L0.YEAR_MONTH)}}let G9=class extends nr{constructor(t){super(),this.unit=t}get typeId(){return fe.Duration}toString(){return`Duration<${yn[this.unit]}>`}};H$e=Symbol.toStringTag;G9[H$e]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(G9.prototype);let kS=class extends nr{constructor(t){super(),this.children=[t]}get typeId(){return fe.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};q$e=Symbol.toStringTag;kS[q$e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(kS.prototype);class Tu extends nr{constructor(t){super(),this.children=t}get typeId(){return fe.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}W$e=Symbol.toStringTag;Tu[W$e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Tu.prototype);class p6 extends nr{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return fe.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}G$e=Symbol.toStringTag;p6[G$e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(p6.prototype);let Y9=class extends nr{constructor(t){super(),this.byteWidth=t}get typeId(){return fe.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Y$e=Symbol.toStringTag;Y9[Y$e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(Y9.prototype);let RS=class extends nr{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return fe.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};K$e=Symbol.toStringTag;RS[K$e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(RS.prototype);class m6 extends nr{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return fe.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}X$e=Symbol.toStringTag;m6[X$e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(m6.prototype);const POt=(e=>()=>++e)(-1);class Fv extends nr{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?POt():Yh(r)}get typeId(){return fe.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Q$e=Symbol.toStringTag;Fv[Q$e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Fv.prototype);function jp(e){const t=e;switch(e.typeId){case fe.Decimal:return e.bitWidth/32;case fe.Timestamp:return 2;case fe.Date:return 1+t.unit;case fe.Interval:return 1+t.unit;case fe.FixedSizeList:return t.listSize;case fe.FixedSizeBinary:return t.byteWidth;default:return 1}}class rr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return DOt(this,t,n)}getVisitFnByTypeId(t,n=!0){return TE(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function DOt(e,t,n=!0){return typeof t=="number"?TE(e,t,n):typeof t=="string"&&t in fe?TE(e,fe[t],n):t&&t instanceof nr?TE(e,Jbe(t),n):t!=null&&t.type&&t.type instanceof nr?TE(e,Jbe(t.type),n):TE(e,fe.NONE,n)}function TE(e,t,n=!0){let r=null;switch(t){case fe.Null:r=e.visitNull;break;case fe.Bool:r=e.visitBool;break;case fe.Int:r=e.visitInt;break;case fe.Int8:r=e.visitInt8||e.visitInt;break;case fe.Int16:r=e.visitInt16||e.visitInt;break;case fe.Int32:r=e.visitInt32||e.visitInt;break;case fe.Int64:r=e.visitInt64||e.visitInt;break;case fe.Uint8:r=e.visitUint8||e.visitInt;break;case fe.Uint16:r=e.visitUint16||e.visitInt;break;case fe.Uint32:r=e.visitUint32||e.visitInt;break;case fe.Uint64:r=e.visitUint64||e.visitInt;break;case fe.Float:r=e.visitFloat;break;case fe.Float16:r=e.visitFloat16||e.visitFloat;break;case fe.Float32:r=e.visitFloat32||e.visitFloat;break;case fe.Float64:r=e.visitFloat64||e.visitFloat;break;case fe.Utf8:r=e.visitUtf8;break;case fe.Binary:r=e.visitBinary;break;case fe.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case fe.Date:r=e.visitDate;break;case fe.DateDay:r=e.visitDateDay||e.visitDate;break;case fe.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case fe.Timestamp:r=e.visitTimestamp;break;case fe.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case fe.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case fe.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case fe.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case fe.Time:r=e.visitTime;break;case fe.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case fe.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case fe.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case fe.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case fe.Decimal:r=e.visitDecimal;break;case fe.List:r=e.visitList;break;case fe.Struct:r=e.visitStruct;break;case fe.Union:r=e.visitUnion;break;case fe.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case fe.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case fe.Dictionary:r=e.visitDictionary;break;case fe.Interval:r=e.visitInterval;break;case fe.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case fe.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case fe.Duration:r=e.visitDuration;break;case fe.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case fe.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case fe.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case fe.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case fe.FixedSizeList:r=e.visitFixedSizeList;break;case fe.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${fe[t]}'`)}function Jbe(e){switch(e.typeId){case fe.Null:return fe.Null;case fe.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?fe.Int8:fe.Uint8;case 16:return n?fe.Int16:fe.Uint16;case 32:return n?fe.Int32:fe.Uint32;case 64:return n?fe.Int64:fe.Uint64}return fe.Int}case fe.Float:switch(e.precision){case Ha.HALF:return fe.Float16;case Ha.SINGLE:return fe.Float32;case Ha.DOUBLE:return fe.Float64}return fe.Float;case fe.Binary:return fe.Binary;case fe.Utf8:return fe.Utf8;case fe.Bool:return fe.Bool;case fe.Decimal:return fe.Decimal;case fe.Time:switch(e.unit){case yn.SECOND:return fe.TimeSecond;case yn.MILLISECOND:return fe.TimeMillisecond;case yn.MICROSECOND:return fe.TimeMicrosecond;case yn.NANOSECOND:return fe.TimeNanosecond}return fe.Time;case fe.Timestamp:switch(e.unit){case yn.SECOND:return fe.TimestampSecond;case yn.MILLISECOND:return fe.TimestampMillisecond;case yn.MICROSECOND:return fe.TimestampMicrosecond;case yn.NANOSECOND:return fe.TimestampNanosecond}return fe.Timestamp;case fe.Date:switch(e.unit){case $0.DAY:return fe.DateDay;case $0.MILLISECOND:return fe.DateMillisecond}return fe.Date;case fe.Interval:switch(e.unit){case L0.DAY_TIME:return fe.IntervalDayTime;case L0.YEAR_MONTH:return fe.IntervalYearMonth}return fe.Interval;case fe.Duration:switch(e.unit){case yn.SECOND:return fe.DurationSecond;case yn.MILLISECOND:return fe.DurationMillisecond;case yn.MICROSECOND:return fe.DurationMicrosecond;case yn.NANOSECOND:return fe.DurationNanosecond}return fe.Duration;case fe.Map:return fe.Map;case fe.List:return fe.List;case fe.Struct:return fe.Struct;case fe.Union:switch(e.mode){case Tc.Dense:return fe.DenseUnion;case Tc.Sparse:return fe.SparseUnion}return fe.Union;case fe.FixedSizeBinary:return fe.FixedSizeBinary;case fe.FixedSizeList:return fe.FixedSizeList;case fe.Dictionary:return fe.Dictionary}throw new Error(`Unrecognized type '${fe[e.typeId]}'`)}rr.prototype.visitInt8=null;rr.prototype.visitInt16=null;rr.prototype.visitInt32=null;rr.prototype.visitInt64=null;rr.prototype.visitUint8=null;rr.prototype.visitUint16=null;rr.prototype.visitUint32=null;rr.prototype.visitUint64=null;rr.prototype.visitFloat16=null;rr.prototype.visitFloat32=null;rr.prototype.visitFloat64=null;rr.prototype.visitDateDay=null;rr.prototype.visitDateMillisecond=null;rr.prototype.visitTimestampSecond=null;rr.prototype.visitTimestampMillisecond=null;rr.prototype.visitTimestampMicrosecond=null;rr.prototype.visitTimestampNanosecond=null;rr.prototype.visitTimeSecond=null;rr.prototype.visitTimeMillisecond=null;rr.prototype.visitTimeMicrosecond=null;rr.prototype.visitTimeNanosecond=null;rr.prototype.visitDenseUnion=null;rr.prototype.visitSparseUnion=null;rr.prototype.visitIntervalDayTime=null;rr.prototype.visitIntervalYearMonth=null;rr.prototype.visitDuration=null;rr.prototype.visitDurationSecond=null;rr.prototype.visitDurationMillisecond=null;rr.prototype.visitDurationMicrosecond=null;rr.prototype.visitDurationNanosecond=null;const Z$e=new Float64Array(1),eE=new Uint32Array(Z$e.buffer);function e9e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function t9e(e){if(e!==e)return 32256;Z$e[0]=e;const t=(eE[1]&2147483648)>>16&65535;let n=eE[1]&2146435072,r=0;return n>=1089470464?eE[0]>0?n=31744:(n=(n&2080374784)>>16,r=(eE[1]&1048575)>>10):n<=1056964608?(r=1048576+(eE[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(eE[1]&1048575)+512>>10),t|n|r&65535}class xn extends rr{}function In(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const OOt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},Vie=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},$Ot=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},LOt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},n9e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},MOt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},m1=({values:e},t,n)=>{e[t]=n},Hie=({values:e},t,n)=>{e[t]=n},r9e=({values:e},t,n)=>{e[t]=t9e(n)},FOt=(e,t,n)=>{switch(e.type.precision){case Ha.HALF:return r9e(e,t,n);case Ha.SINGLE:case Ha.DOUBLE:return Hie(e,t,n)}},qie=({values:e},t,n)=>{OOt(e,t,n.valueOf())},Wie=({values:e},t,n)=>{Vie(e,t*2,n.valueOf())},i9e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},BOt=({values:e,valueOffsets:t},n,r)=>n9e(e,t,n,r),jOt=({values:e,valueOffsets:t},n,r)=>{n9e(e,t,n,Rie(r))},s9e=(e,t,n)=>{e.type.unit===$0.DAY?qie(e,t,n):Wie(e,t,n)},Gie=({values:e},t,n)=>Vie(e,t*2,n/1e3),Yie=({values:e},t,n)=>Vie(e,t*2,n),Kie=({values:e},t,n)=>$Ot(e,t*2,n),Xie=({values:e},t,n)=>LOt(e,t*2,n),o9e=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return Gie(e,t,n);case yn.MILLISECOND:return Yie(e,t,n);case yn.MICROSECOND:return Kie(e,t,n);case yn.NANOSECOND:return Xie(e,t,n)}},Qie=({values:e},t,n)=>{e[t]=n},Jie=({values:e},t,n)=>{e[t]=n},Zie=({values:e},t,n)=>{e[t]=n},ese=({values:e},t,n)=>{e[t]=n},a9e=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return Qie(e,t,n);case yn.MILLISECOND:return Jie(e,t,n);case yn.MICROSECOND:return Zie(e,t,n);case yn.NANOSECOND:return ese(e,t,n)}},u9e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},UOt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=wd.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},zOt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=wd.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},VOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),HOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),qOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),WOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),GOt=(e,t,n)=>{const r=e.type.children.map(s=>wd.getVisitFn(s.type)),i=n instanceof Map?qOt(t,n):n instanceof ei?HOt(t,n):Array.isArray(n)?VOt(t,n):WOt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},YOt=(e,t,n)=>{e.type.mode===Tc.Dense?l9e(e,t,n):c9e(e,t,n)},l9e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];wd.visit(i,e.valueOffsets[t],n)},c9e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];wd.visit(i,t,n)},KOt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},f9e=(e,t,n)=>{e.type.unit===L0.DAY_TIME?tse(e,t,n):nse(e,t,n)},tse=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},nse=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},rse=({values:e},t,n)=>{e[t]=n},ise=({values:e},t,n)=>{e[t]=n},sse=({values:e},t,n)=>{e[t]=n},ose=({values:e},t,n)=>{e[t]=n},d9e=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return rse(e,t,n);case yn.MILLISECOND:return ise(e,t,n);case yn.MICROSECOND:return sse(e,t,n);case yn.NANOSECOND:return ose(e,t,n)}},XOt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=wd.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};xn.prototype.visitBool=In(MOt);xn.prototype.visitInt=In(m1);xn.prototype.visitInt8=In(m1);xn.prototype.visitInt16=In(m1);xn.prototype.visitInt32=In(m1);xn.prototype.visitInt64=In(m1);xn.prototype.visitUint8=In(m1);xn.prototype.visitUint16=In(m1);xn.prototype.visitUint32=In(m1);xn.prototype.visitUint64=In(m1);xn.prototype.visitFloat=In(FOt);xn.prototype.visitFloat16=In(r9e);xn.prototype.visitFloat32=In(Hie);xn.prototype.visitFloat64=In(Hie);xn.prototype.visitUtf8=In(jOt);xn.prototype.visitBinary=In(BOt);xn.prototype.visitFixedSizeBinary=In(i9e);xn.prototype.visitDate=In(s9e);xn.prototype.visitDateDay=In(qie);xn.prototype.visitDateMillisecond=In(Wie);xn.prototype.visitTimestamp=In(o9e);xn.prototype.visitTimestampSecond=In(Gie);xn.prototype.visitTimestampMillisecond=In(Yie);xn.prototype.visitTimestampMicrosecond=In(Kie);xn.prototype.visitTimestampNanosecond=In(Xie);xn.prototype.visitTime=In(a9e);xn.prototype.visitTimeSecond=In(Qie);xn.prototype.visitTimeMillisecond=In(Jie);xn.prototype.visitTimeMicrosecond=In(Zie);xn.prototype.visitTimeNanosecond=In(ese);xn.prototype.visitDecimal=In(u9e);xn.prototype.visitList=In(UOt);xn.prototype.visitStruct=In(GOt);xn.prototype.visitUnion=In(YOt);xn.prototype.visitDenseUnion=In(l9e);xn.prototype.visitSparseUnion=In(c9e);xn.prototype.visitDictionary=In(KOt);xn.prototype.visitInterval=In(f9e);xn.prototype.visitIntervalDayTime=In(tse);xn.prototype.visitIntervalYearMonth=In(nse);xn.prototype.visitDuration=In(d9e);xn.prototype.visitDurationSecond=In(rse);xn.prototype.visitDurationMillisecond=In(ise);xn.prototype.visitDurationMicrosecond=In(sse);xn.prototype.visitDurationNanosecond=In(ose);xn.prototype.visitFixedSizeList=In(XOt);xn.prototype.visitMap=In(zOt);const wd=new xn,hh=Symbol.for("parent"),IT=Symbol.for("rowIndex");class ase{constructor(t,n){return this[hh]=t,this[IT]=n,new Proxy(this,new JOt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[IT],n=this[hh],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Sc.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Jw(t)}: ${Jw(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new QOt(this[hh],this[IT])}}class QOt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Sc.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(ase.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[hh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[IT]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class JOt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[hh].type.children.map(n=>n.name)}has(t,n){return t[hh].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[hh].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[hh].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Sc.visit(t[hh].children[r],t[IT]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[hh].type.children.findIndex(s=>s.name===n);return i!==-1?(wd.visit(t[hh].children[i],t[IT],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class vn extends rr{}function En(e){return(t,n)=>t.getValid(n)?e(t,n):null}const ZOt=(e,t)=>864e5*e[t],use=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),e$t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,t$t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,h9e=e=>new Date(e),n$t=(e,t)=>h9e(ZOt(e,t)),r$t=(e,t)=>h9e(use(e,t)),i$t=(e,t)=>null,p9e=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},s$t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},m9e=({values:e},t)=>n$t(e,t),g9e=({values:e},t)=>r$t(e,t*2),Pb=({stride:e,values:t},n)=>t[e*n],o$t=({stride:e,values:t},n)=>e9e(t[e*n]),y9e=({values:e},t)=>e[t],a$t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),u$t=({values:e,valueOffsets:t},n)=>p9e(e,t,n),l$t=({values:e,valueOffsets:t},n)=>{const r=p9e(e,t,n);return r!==null?OX(r):null},c$t=({values:e},t)=>e[t],f$t=({type:e,values:t},n)=>e.precision!==Ha.HALF?t[n]:e9e(t[n]),d$t=(e,t)=>e.type.unit===$0.DAY?m9e(e,t):g9e(e,t),v9e=({values:e},t)=>1e3*use(e,t*2),b9e=({values:e},t)=>use(e,t*2),_9e=({values:e},t)=>e$t(e,t*2),w9e=({values:e},t)=>t$t(e,t*2),h$t=(e,t)=>{switch(e.type.unit){case yn.SECOND:return v9e(e,t);case yn.MILLISECOND:return b9e(e,t);case yn.MICROSECOND:return _9e(e,t);case yn.NANOSECOND:return w9e(e,t)}},x9e=({values:e},t)=>e[t],E9e=({values:e},t)=>e[t],T9e=({values:e},t)=>e[t],S9e=({values:e},t)=>e[t],p$t=(e,t)=>{switch(e.type.unit){case yn.SECOND:return x9e(e,t);case yn.MILLISECOND:return E9e(e,t);case yn.MICROSECOND:return T9e(e,t);case yn.NANOSECOND:return S9e(e,t)}},m$t=({values:e,stride:t},n)=>Die.decimal(e.subarray(t*n,t*(n+1))),g$t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new ei([u])},y$t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new IF(o.slice(i,s-i))},v$t=(e,t)=>new ase(e,t),b$t=(e,t)=>e.type.mode===Tc.Dense?A9e(e,t):C9e(e,t),A9e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Sc.visit(r,e.valueOffsets[t])},C9e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Sc.visit(r,t)},_$t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},w$t=(e,t)=>e.type.unit===L0.DAY_TIME?I9e(e,t):k9e(e,t),I9e=({values:e},t)=>e.subarray(2*t,2*(t+1)),k9e=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},R9e=({values:e},t)=>e[t],N9e=({values:e},t)=>e[t],P9e=({values:e},t)=>e[t],D9e=({values:e},t)=>e[t],x$t=(e,t)=>{switch(e.type.unit){case yn.SECOND:return R9e(e,t);case yn.MILLISECOND:return N9e(e,t);case yn.MICROSECOND:return P9e(e,t);case yn.NANOSECOND:return D9e(e,t)}},E$t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new ei([s])};vn.prototype.visitNull=En(i$t);vn.prototype.visitBool=En(s$t);vn.prototype.visitInt=En(c$t);vn.prototype.visitInt8=En(Pb);vn.prototype.visitInt16=En(Pb);vn.prototype.visitInt32=En(Pb);vn.prototype.visitInt64=En(y9e);vn.prototype.visitUint8=En(Pb);vn.prototype.visitUint16=En(Pb);vn.prototype.visitUint32=En(Pb);vn.prototype.visitUint64=En(y9e);vn.prototype.visitFloat=En(f$t);vn.prototype.visitFloat16=En(o$t);vn.prototype.visitFloat32=En(Pb);vn.prototype.visitFloat64=En(Pb);vn.prototype.visitUtf8=En(l$t);vn.prototype.visitBinary=En(u$t);vn.prototype.visitFixedSizeBinary=En(a$t);vn.prototype.visitDate=En(d$t);vn.prototype.visitDateDay=En(m9e);vn.prototype.visitDateMillisecond=En(g9e);vn.prototype.visitTimestamp=En(h$t);vn.prototype.visitTimestampSecond=En(v9e);vn.prototype.visitTimestampMillisecond=En(b9e);vn.prototype.visitTimestampMicrosecond=En(_9e);vn.prototype.visitTimestampNanosecond=En(w9e);vn.prototype.visitTime=En(p$t);vn.prototype.visitTimeSecond=En(x9e);vn.prototype.visitTimeMillisecond=En(E9e);vn.prototype.visitTimeMicrosecond=En(T9e);vn.prototype.visitTimeNanosecond=En(S9e);vn.prototype.visitDecimal=En(m$t);vn.prototype.visitList=En(g$t);vn.prototype.visitStruct=En(v$t);vn.prototype.visitUnion=En(b$t);vn.prototype.visitDenseUnion=En(A9e);vn.prototype.visitSparseUnion=En(C9e);vn.prototype.visitDictionary=En(_$t);vn.prototype.visitInterval=En(w$t);vn.prototype.visitIntervalDayTime=En(I9e);vn.prototype.visitIntervalYearMonth=En(k9e);vn.prototype.visitDuration=En(x$t);vn.prototype.visitDurationSecond=En(R9e);vn.prototype.visitDurationMillisecond=En(N9e);vn.prototype.visitDurationMicrosecond=En(P9e);vn.prototype.visitDurationNanosecond=En(D9e);vn.prototype.visitFixedSizeList=En(E$t);vn.prototype.visitMap=En(y$t);const Sc=new vn,Eh=Symbol.for("keys"),kT=Symbol.for("vals");class IF{constructor(t){return this[Eh]=new ei([t.children[0]]).memoize(),this[kT]=t.children[1],new Proxy(this,new S$t)}[Symbol.iterator](){return new T$t(this[Eh],this[kT])}get size(){return this[Eh].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Eh],n=this[kT],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Sc.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Jw(t)}: ${Jw(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class T$t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Sc.visit(this.vals,t)]})}}class S$t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Eh].toArray().map(String)}has(t,n){return t[Eh].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Eh].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Eh].indexOf(n);if(r!==-1){const i=Sc.visit(Reflect.get(t,kT),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Eh].indexOf(n);return i!==-1?(wd.visit(Reflect.get(t,kT),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(IF.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Eh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kT]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Zbe;function O9e(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Zbe=s,s=o,o=Zbe),o>i&&(o=i),r?r(e,s,o):[s,o]}const e_e=e=>e!==e;function KA(e){if(typeof e!=="object"||e===null)return e_e(e)?e_e:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?mOt(e,n):!1:e instanceof Map?C$t(e):Array.isArray(e)?A$t(e):e instanceof ei?I$t(e):k$t(e,!0)}function A$t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=KA(e[n]);return kF(t)}function C$t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=KA(r);return kF(n)}function I$t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=KA(e.get(n));return kF(t)}function k$t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=KA(e[n[i]]);return kF(r,n)}function kF(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return R$t(e,n);case Map:return t_e(e,n,n.keys());case IF:case ase:case Object:case void 0:return t_e(e,n,t||Object.keys(n))}return n instanceof ei?N$t(e,n):!1}}function R$t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function N$t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function t_e(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function $9e(e,t,n,r){return(n&1<<r)!==0}function P$t(e,t,n,r){return(n&1<<r)>>r}function K9(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):L9e(new lse(n,e,t,null,$9e)).subarray(0,r)),i}return n}function L9e(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class lse{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function MX(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new lse(e,t,n-t,e,P$t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return MX(e,t,i)+MX(e,r,n)+D$t(e,i>>3,r-i>>3)}function D$t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=iq(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=iq(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=iq(s.getUint8(i)),i+=1;return r}function iq(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const O$t=-1;class Ti{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return nr.isSparseUnion(t)?this.children.some(n=>n.nullable):nr.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(nr.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=O$t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-MX(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Ti?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=jp(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(nr.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Tc.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(nr.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Tc.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(K9(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Ti(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===fe.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(K9(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Um.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Um.TYPE])&&(o[Um.TYPE]=s.subarray(t,t+n)),(s=o[Um.OFFSET])&&(o[Um.OFFSET]=s.subarray(t,t+n+1))||(s=o[Um.DATA])&&(o[Um.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Ti.prototype.children=Object.freeze([]);class U4 extends rr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Ti(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=oa(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=oa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=oa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.data),s=Si(t.nullBitmap),o=R3(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ti(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.data),s=Si(t.nullBitmap),o=R3(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ti(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=oa(n.ArrayType,t.data),{["length"]:o=s.length/jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=oa(n.ArrayType,t.data),{["length"]:o=s.length/jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=oa(n.ArrayType,t.data),{["length"]:o=s.length/jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=oa(n.ArrayType,t.data),{["length"]:o=s.length/jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=oa(n.ArrayType,t.data),{["length"]:o=s.length/jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Si(t.nullBitmap),o=R3(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ti(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Si(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=oa(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(nr.isSparseUnion(n))return new Ti(n,r,o,a,[void 0,void 0,void 0,s],i);const u=R3(t.valueOffsets);return new Ti(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=oa(n.indices.ArrayType,t.data),{["dictionary"]:o=new ei([new U4().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ti(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=oa(n.ArrayType,t.data),{["length"]:o=s.length/jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Si(t.nullBitmap),s=oa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new U4().visit({type:n.valueType})}=t,s=Si(t.nullBitmap),{["length"]:o=i.length/jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ti(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new U4().visit({type:n.childType})}=t,s=Si(t.nullBitmap),o=R3(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ti(n,r,a,u,[o,void 0,s],[i])}}const $$t=new U4;function _u(e){return $$t.visit(e)}class n_e{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function M9e(e){return e.reduce((t,n)=>t+n.nullCount,0)}function F9e(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function B9e(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function cse(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function fse(e,t){return e.getValid(t)}function RT(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return cse(r,this._offsets,n,t)}}function j9e(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=cse(s,this._offsets,r,n);return t=void 0,o}}function U9e(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):cse(s,this._offsets,i,n);return t=void 0,o}}class bn extends rr{}function L$t(e,t){return t===null&&e.length>0?0:-1}function M$t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new lse(n,e.offset+(t||0),e.length,n,$9e)){if(!i)return r;++r}return-1}function Mn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case fe.Union:break;case fe.Dictionary:break;default:return M$t(e,n)}const r=Sc.getVisitFn(e),i=KA(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function z9e(e,t,n){const r=Sc.getVisitFn(e),i=KA(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}bn.prototype.visitNull=L$t;bn.prototype.visitBool=Mn;bn.prototype.visitInt=Mn;bn.prototype.visitInt8=Mn;bn.prototype.visitInt16=Mn;bn.prototype.visitInt32=Mn;bn.prototype.visitInt64=Mn;bn.prototype.visitUint8=Mn;bn.prototype.visitUint16=Mn;bn.prototype.visitUint32=Mn;bn.prototype.visitUint64=Mn;bn.prototype.visitFloat=Mn;bn.prototype.visitFloat16=Mn;bn.prototype.visitFloat32=Mn;bn.prototype.visitFloat64=Mn;bn.prototype.visitUtf8=Mn;bn.prototype.visitBinary=Mn;bn.prototype.visitFixedSizeBinary=Mn;bn.prototype.visitDate=Mn;bn.prototype.visitDateDay=Mn;bn.prototype.visitDateMillisecond=Mn;bn.prototype.visitTimestamp=Mn;bn.prototype.visitTimestampSecond=Mn;bn.prototype.visitTimestampMillisecond=Mn;bn.prototype.visitTimestampMicrosecond=Mn;bn.prototype.visitTimestampNanosecond=Mn;bn.prototype.visitTime=Mn;bn.prototype.visitTimeSecond=Mn;bn.prototype.visitTimeMillisecond=Mn;bn.prototype.visitTimeMicrosecond=Mn;bn.prototype.visitTimeNanosecond=Mn;bn.prototype.visitDecimal=Mn;bn.prototype.visitList=Mn;bn.prototype.visitStruct=Mn;bn.prototype.visitUnion=Mn;bn.prototype.visitDenseUnion=z9e;bn.prototype.visitSparseUnion=z9e;bn.prototype.visitDictionary=Mn;bn.prototype.visitInterval=Mn;bn.prototype.visitIntervalDayTime=Mn;bn.prototype.visitIntervalYearMonth=Mn;bn.prototype.visitDuration=Mn;bn.prototype.visitDurationSecond=Mn;bn.prototype.visitDurationMillisecond=Mn;bn.prototype.visitDurationMicrosecond=Mn;bn.prototype.visitDurationNanosecond=Mn;bn.prototype.visitFixedSizeList=Mn;bn.prototype.visitMap=Mn;const X9=new bn;class _n extends rr{}function Tn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===fe.Timestamp||t instanceof Tl&&t.bitWidth!==64||t instanceof Kg&&t.bitWidth!==64||t instanceof Mv&&t.precision!==Ha.HALF))return new n_e(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new n_e(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new F$t(o)})}class F$t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}_n.prototype.visitNull=Tn;_n.prototype.visitBool=Tn;_n.prototype.visitInt=Tn;_n.prototype.visitInt8=Tn;_n.prototype.visitInt16=Tn;_n.prototype.visitInt32=Tn;_n.prototype.visitInt64=Tn;_n.prototype.visitUint8=Tn;_n.prototype.visitUint16=Tn;_n.prototype.visitUint32=Tn;_n.prototype.visitUint64=Tn;_n.prototype.visitFloat=Tn;_n.prototype.visitFloat16=Tn;_n.prototype.visitFloat32=Tn;_n.prototype.visitFloat64=Tn;_n.prototype.visitUtf8=Tn;_n.prototype.visitBinary=Tn;_n.prototype.visitFixedSizeBinary=Tn;_n.prototype.visitDate=Tn;_n.prototype.visitDateDay=Tn;_n.prototype.visitDateMillisecond=Tn;_n.prototype.visitTimestamp=Tn;_n.prototype.visitTimestampSecond=Tn;_n.prototype.visitTimestampMillisecond=Tn;_n.prototype.visitTimestampMicrosecond=Tn;_n.prototype.visitTimestampNanosecond=Tn;_n.prototype.visitTime=Tn;_n.prototype.visitTimeSecond=Tn;_n.prototype.visitTimeMillisecond=Tn;_n.prototype.visitTimeMicrosecond=Tn;_n.prototype.visitTimeNanosecond=Tn;_n.prototype.visitDecimal=Tn;_n.prototype.visitList=Tn;_n.prototype.visitStruct=Tn;_n.prototype.visitUnion=Tn;_n.prototype.visitDenseUnion=Tn;_n.prototype.visitSparseUnion=Tn;_n.prototype.visitDictionary=Tn;_n.prototype.visitInterval=Tn;_n.prototype.visitIntervalDayTime=Tn;_n.prototype.visitIntervalYearMonth=Tn;_n.prototype.visitDuration=Tn;_n.prototype.visitDurationSecond=Tn;_n.prototype.visitDurationMillisecond=Tn;_n.prototype.visitDurationMicrosecond=Tn;_n.prototype.visitDurationNanosecond=Tn;_n.prototype.visitFixedSizeList=Tn;_n.prototype.visitMap=Tn;const dse=new _n,B$t=(e,t)=>e+t;class Db extends rr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===yn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+M0.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+M0.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const j$t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),U$t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),z$t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=M0.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},V$t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=M0.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},H$t=(e,t)=>e.type.mode===Tc.Dense?V9e(e,t):H9e(e,t),V9e=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+M0.visit(t[s],r[i])},H9e=({children:e},t)=>4+M0.visitMany(e,e.map(()=>t)).reduce(B$t,0);Db.prototype.visitUtf8=j$t;Db.prototype.visitBinary=U$t;Db.prototype.visitList=z$t;Db.prototype.visitFixedSizeList=V$t;Db.prototype.visitUnion=H$t;Db.prototype.visitDenseUnion=V9e;Db.prototype.visitSparseUnion=H9e;const M0=new Db;var q9e;const W9e={},G9e={};class ei{constructor(t){var n,r,i;const s=t[0]instanceof ei?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Ti)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=W9e[o.typeId],f=s[0];this.isValid=d=>fse(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,G9e[o.typeId]),this._offsets=F9e(s);break}this.data=s,this.type=o,this.stride=jp(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return M9e(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${fe[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return dse.visit(this)}concat(...t){return new ei(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new ei(O9e(this,t,n,({data:r,_offsets:i},s,o)=>B9e(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case fe.Int:case fe.Float:case fe.Decimal:case fe.Time:case fe.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new ei(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return nr.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(nr.isDictionary(this.type)){const t=new Q9(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ei(n)}return new Q9(this)}unmemoize(){if(nr.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new ei(n)}return this}}q9e=Symbol.toStringTag;ei[q9e]=(e=>{e.type=nr.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(fe).map(n=>fe[n]).filter(n=>typeof n=="number"&&n!==fe.NONE);for(const n of t){const r=Sc.getVisitFnByTypeId(n),i=wd.getVisitFnByTypeId(n),s=X9.getVisitFnByTypeId(n),o=M0.getVisitFnByTypeId(n);W9e[n]={get:r,set:i,indexOf:s,byteLength:o},G9e[n]=Object.create(e,{isValid:{value:RT(fse)},get:{value:RT(Sc.getVisitFnByTypeId(n))},set:{value:j9e(wd.getVisitFnByTypeId(n))},indexOf:{value:U9e(X9.getVisitFnByTypeId(n))},getByteLength:{value:RT(M0.getVisitFnByTypeId(n))}})}return"Vector"})(ei.prototype);class Q9 extends ei{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new Q9(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new ei(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function q$t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${W$t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function W$t(e){return typeof e!="bigint"?Jw(e):`${Jw(e)}n`}const sq=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,G$t=(e,t=0)=>e.length>=t?e.subarray(0,t):H9(new e.constructor(t),e,0);class RF{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?sq(r*1,this.BYTES_PER_ELEMENT):sq(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=sq(t*this.stride,this.BYTES_PER_ELEMENT);const n=G$t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=H9(new this.ArrayType(t),this.buffer)}}RF.prototype.offset=0;class WR extends RF{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class Y9e extends WR{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class K9e extends WR{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Oc=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=jp(t),this._nulls=new Y9e,n&&n.length>0&&(this._isValid=q$t(n))}toVector(){return new ei([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),_u({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Oc.prototype.length=1;Oc.prototype.stride=1;Oc.prototype.children=null;Oc.prototype.finished=!1;Oc.prototype.nullValues=null;Oc.prototype._isValid=()=>!0;class g1 extends Oc{constructor(t){super(t),this._values=new WR(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class NF extends Oc{constructor(t){super(t),this._pendingLength=0,this._offsets=new K9e}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof IF?n[Eh].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class FX{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const oq=2,Xp=4,Zm=4,Ui=4,by=new Int32Array(2),r_e=new Float32Array(by.buffer),i_e=new Float64Array(by.buffer),YP=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var BX;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(BX||(BX={}));let J9=class X9e{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new X9e(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return by[0]=this.readInt32(t),r_e[0]}readFloat64(t){return by[YP?0:1]=this.readInt32(t),by[YP?1:0]=this.readInt32(t+4),i_e[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){r_e[0]=n,this.writeInt32(t,by[0])}writeFloat64(t,n){i_e[0]=n,this.writeInt32(t,by[YP?0:1]),this.writeInt32(t+4,by[YP?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Xp+Zm)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Zm;n++)t+=String.fromCharCode(this.readInt8(this.position_+Xp+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Xp;const i=this.bytes_.subarray(t,t+r);return n===BX.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Xp}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Zm)throw new Error("FlatBuffers: file identifier must be length "+Zm);for(let n=0;n<Zm;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Xp+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},Q9e=class J9e{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=J9.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=J9e.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=J9.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Xp,0),this.writeInt32(this.offset()-t+Xp)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*oq;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=oq;l<s;l+=oq)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Ui:0;if(n){const s=n;if(this.prep(this.minalign,Xp+Zm+i),s.length!=Zm)throw new TypeError("FlatBuffers: file identifier must be length "+Zm);for(let o=Zm-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Xp+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Xp,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Bo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Bo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Ui),(n||new Bo).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Bo.startKeyValue(t),Bo.addKey(t,n),Bo.addValue(t,r),Bo.endKeyValue(t)}}var NS;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(NS||(NS={}));var PS;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(PS||(PS={}));var Z9;(function(e){e[e.DenseArray=0]="DenseArray"})(Z9||(Z9={}));class Qc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Qc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Ui),(n||new Qc).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Qc.startInt(t),Qc.addBitWidth(t,n),Qc.addIsSigned(t,r),Qc.endInt(t)}}class eg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new eg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Ui),(n||new eg).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Qc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Z9.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,Z9.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class cw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new cw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Ui),(n||new cw).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return cw.startBinary(t),cw.endBinary(t)}}class fw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new fw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Ui),(n||new fw).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return fw.startBool(t),fw.endBool(t)}}var eL;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(eL||(eL={}));let oO=class SE{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new SE).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Ui),(n||new SE).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):eL.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,eL.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return SE.startDate(t),SE.addUnit(t,n),SE.endDate(t)}};class Kl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Kl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Ui),(n||new Kl).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Kl.startDecimal(t),Kl.addPrecision(t,n),Kl.addScale(t,r),Kl.addBitWidth(t,i),Kl.endDecimal(t)}}var Bv;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Bv||(Bv={}));class Qp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Qp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Ui),(n||new Qp).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bv.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Bv.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Qp.startDuration(t),Qp.addUnit(t,n),Qp.endDuration(t)}}class Jp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Jp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Ui),(n||new Jp).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Jp.startFixedSizeBinary(t),Jp.addByteWidth(t,n),Jp.endFixedSizeBinary(t)}}class Zp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Zp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Ui),(n||new Zp).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Zp.startFixedSizeList(t),Zp.addListSize(t,n),Zp.endFixedSizeList(t)}}var tL;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(tL||(tL={}));class e0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new e0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Ui),(n||new e0).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):tL.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,tL.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return e0.startFloatingPoint(t),e0.addPrecision(t,n),e0.endFloatingPoint(t)}}var nL;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(nL||(nL={}));class t0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new t0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Ui),(n||new t0).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):nL.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,nL.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return t0.startInterval(t),t0.addUnit(t,n),t0.endInterval(t)}}class dw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new dw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Ui),(n||new dw).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return dw.startList(t),dw.endList(t)}}let aO=class AE{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new AE).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Ui),(n||new AE).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return AE.startMap(t),AE.addKeysSorted(t,n),AE.endMap(t)}};class hw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new hw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Ui),(n||new hw).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return hw.startNull(t),hw.endNull(t)}}class pw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new pw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Ui),(n||new pw).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return pw.startStruct_(t),pw.endStruct_(t)}}let VI=class O_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new O_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Ui),(n||new O_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bv.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Bv.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return O_.startTime(t),O_.addUnit(t,n),O_.addBitWidth(t,r),O_.endTime(t)}},HI=class $_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new $_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Ui),(n||new $_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bv.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Bv.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return $_.startTimestamp(t),$_.addUnit(t,n),$_.addTimezone(t,r),$_.endTimestamp(t)}};var rL;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(rL||(rL={}));let L_=class M_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new M_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Ui),(n||new M_).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rL.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,rL.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return M_.startUnion(t),M_.addMode(t,n),M_.addTypeIds(t,r),M_.endUnion(t)}};class mw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new mw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Ui),(n||new mw).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return mw.startUtf8(t),mw.endUtf8(t)}}var _s;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(_s||(_s={}));let Qf=class uO{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new uO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Ui),(n||new uO).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):_s.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new eg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new uO).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Bo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,_s.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Fp=class Bm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Bm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Ui),(n||new Bm).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):PS.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Qf).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Bo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,PS.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Bm.startSchema(t),Bm.addEndianness(t,n),Bm.addFields(t,r),Bm.addCustomMetadata(t,i),Bm.addFeatures(t,s),Bm.endSchema(t)}};class Wc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Wc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Ui),(n||new Wc).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):NS.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Fp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new FX).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new FX).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Bo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,NS.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class vi{constructor(t=[],n,r,i=ll.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=UX(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new vi(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new vi(n,this.metadata)}assign(...t){const n=t[0]instanceof vi?t[0]:Array.isArray(t[0])?new vi(t[0]):new vi(t),r=[...this.fields],i=KP(KP(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:KP(KP(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=UX(s,new Map);return new vi([...r,...s],i,new Map([...this.dictionaries,...o]))}}vi.prototype.fields=null;vi.prototype.metadata=null;vi.prototype.dictionaries=null;let Mi=class jX{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new jX(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],jX.new(n,r,i,s)}};Mi.prototype.type=null;Mi.prototype.name=null;Mi.prototype.nullable=null;Mi.prototype.metadata=null;function KP(e,t){return new Map([...e||new Map,...t||new Map])}function UX(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(nr.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&UX(s.children,t)}return t}var Y$t=Q9e,K$t=J9;class zX{static decode(t){t=new K$t(Si(t));const n=Wc.getRootAsFooter(t),r=vi.decode(n.schema(),new Map,n.version());return new X$t(r,n)}static encode(t){const n=new Y$t,r=vi.encode(n,t.schema);Wc.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())jv.encode(n,o);const i=n.endVector();Wc.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())jv.encode(n,o);const s=n.endVector();return Wc.startFooter(n),Wc.addSchema(n,r),Wc.addVersion(n,ll.V5),Wc.addRecordBatches(n,i),Wc.addDictionaries(n,s),Wc.finishFooterBuffer(n,Wc.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=ll.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class X$t extends zX{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return jv.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return jv.decode(n)}return null}}class jv{static decode(t){return new jv(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return FX.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Yh(r),this.bodyLength=Yh(n)}}const XP=Object.freeze({done:!0,value:void 0});class Z9e{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Q$t extends Z9e{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Xm(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(XP);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Qbe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Qbe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Xm(this,void 0,void 0,function*(){return yield this.abort(t),XP})}return(t){return Xm(this,void 0,void 0,function*(){return yield this.close(),XP})}read(t){return Xm(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Xm(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(XP)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class aq extends Q$t{write(t){if((t=Si(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?OX(this.toUint8Array(!0)):this.toUint8Array(!1).then(OX)}toUint8Array(t=!1){return t?O0(this._values)[0]:Xm(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=E4(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return O0(o,a)[0]})}}class eLe extends NF{constructor(t){super(t),this._values=new RF(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Si(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class J$t extends Oc{constructor(t){super(t),this._values=new Y9e}setValue(t,n){this._values.set(t,+n)}}class PF extends g1{}PF.prototype._setValue=s9e;class tLe extends PF{}tLe.prototype._setValue=qie;class nLe extends PF{}nLe.prototype._setValue=Wie;class rLe extends g1{}rLe.prototype._setValue=u9e;class Z$t extends Oc{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Fv(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=iL({type:this.type.indices,nullValues:n}),this.dictionary=iL({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class iLe extends g1{}iLe.prototype._setValue=i9e;class e9t extends Oc{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new RS(this.type.listSize,new Mi(n,t.type,!0)),r}}class DF extends g1{setValue(t,n){this._values.set(t,n)}}class t9t extends DF{setValue(t,n){super.setValue(t,t9e(n))}}class n9t extends DF{}class r9t extends DF{}class OF extends g1{}OF.prototype._setValue=f9e;class sLe extends OF{}sLe.prototype._setValue=tse;class oLe extends OF{}oLe.prototype._setValue=nse;class XA extends g1{}XA.prototype._setValue=d9e;class aLe extends XA{}aLe.prototype._setValue=rse;class uLe extends XA{}uLe.prototype._setValue=ise;class lLe extends XA{}lLe.prototype._setValue=sse;class cLe extends XA{}cLe.prototype._setValue=ose;class y1 extends g1{setValue(t,n){this._values.set(t,n)}}class i9t extends y1{}class s9t extends y1{}class o9t extends y1{}class a9t extends y1{}class u9t extends y1{}class l9t extends y1{}class c9t extends y1{}class f9t extends y1{}class d9t extends NF{constructor(t){super(t),this._offsets=new K9e}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new kS(new Mi(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class h9t extends NF{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new m6(new Mi(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class p9t extends Oc{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class m9t extends Oc{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Tu([...this.type.children,new Mi(n,t.type,!0)]),r}}class QA extends g1{}QA.prototype._setValue=o9e;class fLe extends QA{}fLe.prototype._setValue=Gie;class dLe extends QA{}dLe.prototype._setValue=Yie;class hLe extends QA{}hLe.prototype._setValue=Kie;class pLe extends QA{}pLe.prototype._setValue=Xie;class JA extends g1{}JA.prototype._setValue=a9e;class mLe extends JA{}mLe.prototype._setValue=Qie;class gLe extends JA{}gLe.prototype._setValue=Jie;class yLe extends JA{}yLe.prototype._setValue=Zie;class vLe extends JA{}vLe.prototype._setValue=ese;class hse extends Oc{constructor(t){super(t),this._typeIds=new WR(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Mi(n,t.type)];return this.type=new p6(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class g9t extends hse{}class y9t extends hse{constructor(t){super(t),this._offsets=new WR(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class bLe extends NF{constructor(t){super(t),this._values=new RF(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Rie(n))}_flushPending(t,n){}}bLe.prototype._flushPending=eLe.prototype._flushPending;class v9t extends rr{visitNull(){return p9t}visitBool(){return J$t}visitInt(){return y1}visitInt8(){return i9t}visitInt16(){return s9t}visitInt32(){return o9t}visitInt64(){return a9t}visitUint8(){return u9t}visitUint16(){return l9t}visitUint32(){return c9t}visitUint64(){return f9t}visitFloat(){return DF}visitFloat16(){return t9t}visitFloat32(){return n9t}visitFloat64(){return r9t}visitUtf8(){return bLe}visitBinary(){return eLe}visitFixedSizeBinary(){return iLe}visitDate(){return PF}visitDateDay(){return tLe}visitDateMillisecond(){return nLe}visitTimestamp(){return QA}visitTimestampSecond(){return fLe}visitTimestampMillisecond(){return dLe}visitTimestampMicrosecond(){return hLe}visitTimestampNanosecond(){return pLe}visitTime(){return JA}visitTimeSecond(){return mLe}visitTimeMillisecond(){return gLe}visitTimeMicrosecond(){return yLe}visitTimeNanosecond(){return vLe}visitDecimal(){return rLe}visitList(){return d9t}visitStruct(){return m9t}visitUnion(){return hse}visitDenseUnion(){return y9t}visitSparseUnion(){return g9t}visitDictionary(){return Z$t}visitInterval(){return OF}visitIntervalDayTime(){return sLe}visitIntervalYearMonth(){return oLe}visitDuration(){return XA}visitDurationSecond(){return aLe}visitDurationMillisecond(){return uLe}visitDurationMicrosecond(){return lLe}visistDurationNanosecond(){return cLe}visitFixedSizeList(){return e9t}visitMap(){return h9t}}const b9t=new v9t;class wn extends rr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function kl(e,t){return t instanceof e.constructor}function GR(e,t){return e===t||kl(e,t)}function v1(e,t){return e===t||kl(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function $F(e,t){return e===t||kl(e,t)&&e.precision===t.precision}function _9t(e,t){return e===t||kl(e,t)&&e.byteWidth===t.byteWidth}function pse(e,t){return e===t||kl(e,t)&&e.unit===t.unit}function YR(e,t){return e===t||kl(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function KR(e,t){return e===t||kl(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function w9t(e,t){return e===t||kl(e,t)&&e.children.length===t.children.length&&Uv.compareManyFields(e.children,t.children)}function x9t(e,t){return e===t||kl(e,t)&&e.children.length===t.children.length&&Uv.compareManyFields(e.children,t.children)}function mse(e,t){return e===t||kl(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Uv.compareManyFields(e.children,t.children)}function E9t(e,t){return e===t||kl(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Uv.visit(e.indices,t.indices)&&Uv.visit(e.dictionary,t.dictionary)}function gse(e,t){return e===t||kl(e,t)&&e.unit===t.unit}function XR(e,t){return e===t||kl(e,t)&&e.unit===t.unit}function T9t(e,t){return e===t||kl(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Uv.compareManyFields(e.children,t.children)}function S9t(e,t){return e===t||kl(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Uv.compareManyFields(e.children,t.children)}wn.prototype.visitNull=GR;wn.prototype.visitBool=GR;wn.prototype.visitInt=v1;wn.prototype.visitInt8=v1;wn.prototype.visitInt16=v1;wn.prototype.visitInt32=v1;wn.prototype.visitInt64=v1;wn.prototype.visitUint8=v1;wn.prototype.visitUint16=v1;wn.prototype.visitUint32=v1;wn.prototype.visitUint64=v1;wn.prototype.visitFloat=$F;wn.prototype.visitFloat16=$F;wn.prototype.visitFloat32=$F;wn.prototype.visitFloat64=$F;wn.prototype.visitUtf8=GR;wn.prototype.visitBinary=GR;wn.prototype.visitFixedSizeBinary=_9t;wn.prototype.visitDate=pse;wn.prototype.visitDateDay=pse;wn.prototype.visitDateMillisecond=pse;wn.prototype.visitTimestamp=YR;wn.prototype.visitTimestampSecond=YR;wn.prototype.visitTimestampMillisecond=YR;wn.prototype.visitTimestampMicrosecond=YR;wn.prototype.visitTimestampNanosecond=YR;wn.prototype.visitTime=KR;wn.prototype.visitTimeSecond=KR;wn.prototype.visitTimeMillisecond=KR;wn.prototype.visitTimeMicrosecond=KR;wn.prototype.visitTimeNanosecond=KR;wn.prototype.visitDecimal=GR;wn.prototype.visitList=w9t;wn.prototype.visitStruct=x9t;wn.prototype.visitUnion=mse;wn.prototype.visitDenseUnion=mse;wn.prototype.visitSparseUnion=mse;wn.prototype.visitDictionary=E9t;wn.prototype.visitInterval=gse;wn.prototype.visitIntervalDayTime=gse;wn.prototype.visitIntervalYearMonth=gse;wn.prototype.visitDuration=XR;wn.prototype.visitDurationSecond=XR;wn.prototype.visitDurationMillisecond=XR;wn.prototype.visitDurationMicrosecond=XR;wn.prototype.visitDurationNanosecond=XR;wn.prototype.visitFixedSizeList=T9t;wn.prototype.visitMap=S9t;const Uv=new wn;function VX(e,t){return Uv.compareSchemas(e,t)}function iL(e){const t=e.type,n=new(b9t.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(iL(Object.assign(Object.assign({},l),{type:u})))}}return n}function uq(e,t){return A9t(e,t.map(n=>n.data.concat()))}function A9t(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=C9t(n,o,c,t,i),o>0&&(r[s++]=_u({type:new Tu(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Jc(e,f))]}function C9t(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:_u({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var _Le;class Zl{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new vi([]),this._offsets=[0],this;let i,s;t[0]instanceof vi&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Jc)return[u];if(u instanceof Zl)return u.batches;if(u instanceof Ti){if(u.type instanceof Tu)return[new Jc(new vi(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new ei([u[h]])),f=new vi(l.map((h,p)=>new Mi(String(h),c[p].type))),[,d]=uq(f,c);return d.length===0?[new Jc(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new vi([]),!(i instanceof vi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Jc))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!VX(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??F9e(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=M9e(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?dse.visit(new ei(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Zl(n,r.map(i=>new Jc(n,i)))}slice(t,n){const r=this.schema;[t,n]=O9e({length:this.numRows},t,n);const i=B9e(this.data,this._offsets,t,n);return new Zl(r,i.map(s=>new Jc(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=_u({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new ei(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new ei([_u({type:new Yg,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=uq(r,a)}return new Zl(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Zl(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Zl(...uq(s,o))}}_Le=Symbol.toStringTag;Zl[_Le]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=RT(fse),e.get=RT(Sc.getVisitFn(fe.Struct)),e.set=j9e(wd.getVisitFn(fe.Struct)),e.indexOf=U9e(X9.getVisitFn(fe.Struct)),e.getByteLength=RT(M0.getVisitFn(fe.Struct)),"Table"))(Zl.prototype);var wLe;let Jc=class qI{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof vi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=_u({nullCount:0,type:new Tu(this.schema.fields),children:this.schema.fields.map(n=>_u({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Ti))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=s_e(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Mi.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new vi(r),a=_u({type:new Tu(r),length:s,children:i,nullCount:0});[this.schema,this.data]=s_e(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=xLe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Sc.visit(this.data,t)}set(t,n){return wd.visit(this.data,t,n)}indexOf(t,n){return X9.visit(this.data,t,n)}getByteLength(t){return M0.visit(this.data,t)}[Symbol.iterator](){return dse.visit(new ei([this.data]))}toArray(){return[...this]}concat(...t){return new Zl(this.schema,[this,...t])}slice(t,n){const[r]=new ei([this.data]).slice(t,n).data;return new qI(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new ei([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new ei([_u({type:new Yg,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new vi(s,new Map(this.schema.metadata)),i=_u({type:new Tu(s),children:o})}return new qI(r,i)}select(t){const n=this.schema.select(t),r=new Tu(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new qI(n,_u({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=_u({type:new Tu(n.fields),length:this.numRows,children:r});return new qI(n,i)}};wLe=Symbol.toStringTag;Jc[wLe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Jc.prototype);function s_e(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:_u({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),_u({type:new Tu(i),length:n,children:s})]}function xLe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])xLe(a.children,l==null?void 0:l.children,n);if(nr.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class I9t extends Jc{constructor(t){const n=t.fields.map(i=>_u({type:i.type})),r=_u({type:new Tu(t.fields),nullCount:0,children:n});super(t,r)}}var sL;(function(e){e[e.BUFFER=0]="BUFFER"})(sL||(sL={}));var oL;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(oL||(oL={}));class _y{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new _y).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Ui),(n||new _y).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):oL.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):sL.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,oL.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,sL.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return _y.startBodyCompression(t),_y.addCodec(t,n),_y.addMethod(t,r),_y.endBodyCompression(t)}}let ELe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},TLe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},zm=class HX{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new HX).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Ui),(n||new HX).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new TLe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ELe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new _y).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},CE=class qX{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new qX).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Ui),(n||new qX).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new zm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var aL;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(aL||(aL={}));let Y1=class Np{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Np).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Ui),(n||new Np).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):NS.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):aL.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Bo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,NS.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,aL.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Np.startMessage(t),Np.addVersion(t,n),Np.addHeaderType(t,r),Np.addHeader(t,i),Np.addBodyLength(t,s),Np.addCustomMetadata(t,o),Np.endMessage(t)}};class k9t extends rr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return hw.startNull(n),hw.endNull(n)}visitInt(t,n){return Qc.startInt(n),Qc.addBitWidth(n,t.bitWidth),Qc.addIsSigned(n,t.isSigned),Qc.endInt(n)}visitFloat(t,n){return e0.startFloatingPoint(n),e0.addPrecision(n,t.precision),e0.endFloatingPoint(n)}visitBinary(t,n){return cw.startBinary(n),cw.endBinary(n)}visitBool(t,n){return fw.startBool(n),fw.endBool(n)}visitUtf8(t,n){return mw.startUtf8(n),mw.endUtf8(n)}visitDecimal(t,n){return Kl.startDecimal(n),Kl.addScale(n,t.scale),Kl.addPrecision(n,t.precision),Kl.addBitWidth(n,t.bitWidth),Kl.endDecimal(n)}visitDate(t,n){return oO.startDate(n),oO.addUnit(n,t.unit),oO.endDate(n)}visitTime(t,n){return VI.startTime(n),VI.addUnit(n,t.unit),VI.addBitWidth(n,t.bitWidth),VI.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return HI.startTimestamp(n),HI.addUnit(n,t.unit),r!==void 0&&HI.addTimezone(n,r),HI.endTimestamp(n)}visitInterval(t,n){return t0.startInterval(n),t0.addUnit(n,t.unit),t0.endInterval(n)}visitDuration(t,n){return Qp.startDuration(n),Qp.addUnit(n,t.unit),Qp.endDuration(n)}visitList(t,n){return dw.startList(n),dw.endList(n)}visitStruct(t,n){return pw.startStruct_(n),pw.endStruct_(n)}visitUnion(t,n){L_.startTypeIdsVector(n,t.typeIds.length);const r=L_.createTypeIdsVector(n,t.typeIds);return L_.startUnion(n),L_.addMode(n,t.mode),L_.addTypeIds(n,r),L_.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return eg.startDictionaryEncoding(n),eg.addId(n,BigInt(t.id)),eg.addIsOrdered(n,t.isOrdered),r!==void 0&&eg.addIndexType(n,r),eg.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Jp.startFixedSizeBinary(n),Jp.addByteWidth(n,t.byteWidth),Jp.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Zp.startFixedSizeList(n),Zp.addListSize(n,t.listSize),Zp.endFixedSizeList(n)}visitMap(t,n){return aO.startMap(n),aO.addKeysSorted(n,t.keysSorted),aO.endMap(n)}}const lq=new k9t;function R9t(e,t=new Map){return new vi(P9t(e,t),lO(e.metadata),t)}function SLe(e){return new Tf(e.count,ALe(e.columns),CLe(e.columns))}function N9t(e){return new F0(SLe(e.data),e.id,e.isDelta)}function P9t(e,t){return(e.fields||[]).filter(Boolean).map(n=>Mi.fromJSON(n,t))}function o_e(e,t){return(e.children||[]).filter(Boolean).map(n=>Mi.fromJSON(n,t))}function ALe(e){return(e||[]).reduce((t,n)=>[...t,new zv(n.count,D9t(n.VALIDITY)),...ALe(n.children)],[])}function CLe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new a0(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new a0(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new a0(t.length,i.OFFSET.length)),i.DATA&&t.push(new a0(t.length,i.DATA.length)),t=CLe(i.children,t)}return t}function D9t(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function O9t(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=u_e(e,o_e(e,t)),i=new Mi(e.name,o,e.nullable,lO(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?a_e(r):new Lv,a=new Fv(t.get(n),r,n,s.isOrdered),i=new Mi(e.name,a,e.nullable,lO(e.metadata))):(r=(r=s.indexType)?a_e(r):new Lv,t.set(n,o=u_e(e,o_e(e,t))),a=new Fv(o,r,n,s.isOrdered),i=new Mi(e.name,a,e.nullable,lO(e.metadata))),i||null}function lO(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function a_e(e){return new Tl(e.isSigned,e.bitWidth)}function u_e(e,t){const n=e.type.name;switch(n){case"NONE":return new Yg;case"null":return new Yg;case"binary":return new d6;case"utf8":return new AS;case"bool":return new h6;case"list":return new kS((t||[])[0]);case"struct":return new Tu(t||[]);case"struct_":return new Tu(t||[])}switch(n){case"int":{const r=e.type;return new Tl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Mv(Ha[r.precision])}case"decimal":{const r=e.type;return new q9(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new CS($0[r.unit])}case"time":{const r=e.type;return new Kg(yn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new W9(yn[r.unit],r.timezone)}case"interval":{const r=e.type;return new IS(L0[r.unit])}case"duration":{const r=e.type;return new G9(yn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new p6(Tc[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new Y9(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new RS(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new m6((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var $9t=Q9e,L9t=J9;class n0{static fromJSON(t,n){const r=new n0(0,ll.V5,n);return r._createHeader=M9t(t,n),r}static decode(t){t=new L9t(Si(t));const n=Y1.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new n0(r,i,s);return o._createHeader=F9t(n,s),o}static encode(t){const n=new $9t;let r=-1;return t.isSchema()?r=vi.encode(n,t.header()):t.isRecordBatch()?r=Tf.encode(n,t.header()):t.isDictionaryBatch()&&(r=F0.encode(n,t.header())),Y1.startMessage(n),Y1.addVersion(n,ll.V5),Y1.addHeader(n,r),Y1.addHeaderType(n,t.headerType),Y1.addBodyLength(n,BigInt(t.bodyLength)),Y1.finishMessageBuffer(n,Y1.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof vi)return new n0(0,ll.V5,la.Schema,t);if(t instanceof Tf)return new n0(n,ll.V5,la.RecordBatch,t);if(t instanceof F0)return new n0(n,ll.V5,la.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===la.Schema}isRecordBatch(){return this.headerType===la.RecordBatch}isDictionaryBatch(){return this.headerType===la.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Yh(t)}}class Tf{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Yh(t)}}class F0{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Yh(n)}}class a0{constructor(t,n){this.offset=Yh(t),this.length=Yh(n)}}class zv{constructor(t,n){this.length=Yh(t),this.nullCount=Yh(n)}}function M9t(e,t){return()=>{switch(t){case la.Schema:return vi.fromJSON(e);case la.RecordBatch:return Tf.fromJSON(e);case la.DictionaryBatch:return F0.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${la[t]}, type: ${t} }`)}}function F9t(e,t){return()=>{switch(t){case la.Schema:return vi.decode(e.header(new Fp),new Map,e.version());case la.RecordBatch:return Tf.decode(e.header(new zm),e.version());case la.DictionaryBatch:return F0.decode(e.header(new CE),e.version())}throw new Error(`Unrecognized Message type: { name: ${la[t]}, type: ${t} }`)}}Mi.encode=K9t;Mi.decode=G9t;Mi.fromJSON=O9t;vi.encode=Y9t;vi.decode=B9t;vi.fromJSON=R9t;Tf.encode=X9t;Tf.decode=j9t;Tf.fromJSON=SLe;F0.encode=Q9t;F0.decode=U9t;F0.fromJSON=N9t;zv.encode=J9t;zv.decode=V9t;a0.encode=Z9t;a0.decode=z9t;function B9t(e,t=new Map,n=ll.V5){const r=W9t(e,t);return new vi(r,cO(e),t,n)}function j9t(e,t=ll.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Tf(e.length(),H9t(e),q9t(e,t))}function U9t(e,t=ll.V5){return new F0(Tf.decode(e.data(),t),e.id(),e.isDelta())}function z9t(e){return new a0(e.offset(),e.length())}function V9t(e){return new zv(e.length(),e.nullCount())}function H9t(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=zv.decode(n));return t}function q9t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<ll.V4&&(r.bb_pos+=8*(i+1)),n[++s]=a0.decode(r));return n}function W9t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Mi.decode(r,t));return n}function l_e(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Mi.decode(r,t));return n}function G9t(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=f_e(e,l_e(e,t)),r=new Mi(e.name(),i,e.nullable(),cO(e))):t.has(n=Yh(a.id()))?(s=(s=a.indexType())?c_e(s):new Lv,o=new Fv(t.get(n),s,n,a.isOrdered()),r=new Mi(e.name(),o,e.nullable(),cO(e))):(s=(s=a.indexType())?c_e(s):new Lv,t.set(n,i=f_e(e,l_e(e,t))),o=new Fv(i,s,n,a.isOrdered()),r=new Mi(e.name(),o,e.nullable(),cO(e))),r||null}function cO(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function c_e(e){return new Tl(e.isSigned(),e.bitWidth())}function f_e(e,t){const n=e.typeType();switch(n){case _s.NONE:return new Yg;case _s.Null:return new Yg;case _s.Binary:return new d6;case _s.Utf8:return new AS;case _s.Bool:return new h6;case _s.List:return new kS((t||[])[0]);case _s.Struct_:return new Tu(t||[])}switch(n){case _s.Int:{const r=e.type(new Qc);return new Tl(r.isSigned(),r.bitWidth())}case _s.FloatingPoint:{const r=e.type(new e0);return new Mv(r.precision())}case _s.Decimal:{const r=e.type(new Kl);return new q9(r.scale(),r.precision(),r.bitWidth())}case _s.Date:{const r=e.type(new oO);return new CS(r.unit())}case _s.Time:{const r=e.type(new VI);return new Kg(r.unit(),r.bitWidth())}case _s.Timestamp:{const r=e.type(new HI);return new W9(r.unit(),r.timezone())}case _s.Interval:{const r=e.type(new t0);return new IS(r.unit())}case _s.Duration:{const r=e.type(new Qp);return new G9(r.unit())}case _s.Union:{const r=e.type(new L_);return new p6(r.mode(),r.typeIdsArray()||[],t||[])}case _s.FixedSizeBinary:{const r=e.type(new Jp);return new Y9(r.byteWidth())}case _s.FixedSizeList:{const r=e.type(new Zp);return new RS(r.listSize(),(t||[])[0])}case _s.Map:{const r=e.type(new aO);return new m6((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${_s[n]}" (${n})`)}function Y9t(e,t){const n=t.fields.map(s=>Mi.encode(e,s));Fp.startFieldsVector(e,n.length);const r=Fp.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Fp.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Bo.startKeyValue(e),Bo.addKey(e,a),Bo.addValue(e,u),Bo.endKeyValue(e)})):-1;return Fp.startSchema(e),Fp.addFields(e,r),Fp.addEndianness(e,eLt?PS.Little:PS.Big),i!==-1&&Fp.addCustomMetadata(e,i),Fp.endSchema(e)}function K9t(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;nr.isDictionary(s)?(o=s.dictionary.typeId,i=lq.visit(s,e),r=lq.visit(s.dictionary,e)):r=lq.visit(s,e);const a=(s.children||[]).map(c=>Mi.encode(e,c)),u=Qf.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Qf.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Bo.startKeyValue(e),Bo.addKey(e,d),Bo.addValue(e,h),Bo.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Qf.startField(e),Qf.addType(e,r),Qf.addTypeType(e,o),Qf.addChildren(e,u),Qf.addNullable(e,!!t.nullable),n!==-1&&Qf.addName(e,n),i!==-1&&Qf.addDictionary(e,i),l!==-1&&Qf.addCustomMetadata(e,l),Qf.endField(e)}function X9t(e,t){const n=t.nodes||[],r=t.buffers||[];zm.startNodesVector(e,n.length);for(const o of n.slice().reverse())zv.encode(e,o);const i=e.endVector();zm.startBuffersVector(e,r.length);for(const o of r.slice().reverse())a0.encode(e,o);const s=e.endVector();return zm.startRecordBatch(e),zm.addLength(e,BigInt(t.length)),zm.addNodes(e,i),zm.addBuffers(e,s),zm.endRecordBatch(e)}function Q9t(e,t){const n=Tf.encode(e,t.data);return CE.startDictionaryBatch(e),CE.addId(e,BigInt(t.id)),CE.addIsDelta(e,t.isDelta),CE.addData(e,n),CE.endDictionaryBatch(e)}function J9t(e,t){return TLe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function Z9t(e,t){return ELe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const eLt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),WX="ARROW1",yse=new Uint8Array(WX.length);for(let e=0;e<WX.length;e+=1)yse[e]=WX.codePointAt(e);yse.length;class fo extends rr{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Jc?s.data.children:s.data),r=new fo;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof ei)return this.visitMany(t.data),this;const{type:n}=t;if(!nr.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(nr.isUnion(n))this.nodes.push(new zv(r,0));else{const{nullCount:i}=t;nr.isNull(n)||Fh.call(this,i<=0?new Uint8Array(0):K9(t.offset,r,t.nullBitmap)),this.nodes.push(new zv(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Fh(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new a0(this._byteLength,t)),this._byteLength+=t,this}function tLt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Fh.call(this,i),n.mode===Tc.Sparse)return GX.call(this,e);if(n.mode===Tc.Dense){if(e.offset<=0)return Fh.call(this,s),GX.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Fh.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function nLt(e){let t;return e.nullCount>=e.length?Fh.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Fh.call(this,K9(e.offset,e.length,t)):Fh.call(this,L9e(e.values))}function b1(e){return Fh.call(this,e.values.subarray(0,e.length*e.stride))}function ILe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Fh.call(this,R$e(-i,t+1,r)),Fh.call(this,n.subarray(i,i+o)),this}function vse(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Fh.call(this,R$e(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function GX(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}fo.prototype.visitBool=nLt;fo.prototype.visitInt=b1;fo.prototype.visitFloat=b1;fo.prototype.visitUtf8=ILe;fo.prototype.visitBinary=ILe;fo.prototype.visitFixedSizeBinary=b1;fo.prototype.visitDate=b1;fo.prototype.visitTimestamp=b1;fo.prototype.visitTime=b1;fo.prototype.visitDecimal=b1;fo.prototype.visitList=vse;fo.prototype.visitStruct=GX;fo.prototype.visitUnion=tLt;fo.prototype.visitInterval=b1;fo.prototype.visitDuration=b1;fo.prototype.visitFixedSizeList=vse;fo.prototype.visitMap=vse;class kLe extends Z9e{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new aq,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Nb(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return AF(t)?t.then(n=>this.writeAll(n)):CF(t)?xse(this,t):wse(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof aq?this._sink=t:(this._sink=new aq,t&&uOt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&lOt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!VX(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Zl&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Jc&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!VX(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Jc?t instanceof I9t||this._writeRecordBatch(t):t instanceof Zl?this.writeAll(t.batches):Nie(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=n0.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===la.RecordBatch?this._recordBatchBlocks.push(new jv(a,t.bodyLength,this._position)):t.headerType===la.DictionaryBatch&&this._dictionaryBlocks.push(new jv(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Si(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(n0.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(yse)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=fo.assemble(t),o=new Tf(t.numRows,r,i),a=n0.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=fo.assemble(new ei([t])),u=new Tf(t.length,s,o),l=new F0(u,n,r),c=n0.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class bse extends kLe{static writeAll(t,n){const r=new bse(n);return AF(t)?t.then(i=>r.writeAll(i)):CF(t)?xse(r,t):wse(r,t)}}class _se extends kLe{static writeAll(t){const n=new _se;return AF(t)?t.then(r=>n.writeAll(r)):CF(t)?xse(n,t):wse(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=zX.encode(new zX(t,ll.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function wse(e,t){let n=t;t instanceof Zl&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function xse(e,t){var n,r,i,s,o,a,u;return Xm(this,void 0,void 0,function*(){try{for(n=!0,r=E4(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function rLt(e,t="stream"){return(t==="stream"?bse:_se).writeAll(e).toUint8Array(!0)}function Ese(e,t=1){return(e*t+63&-64||64)/t}function Vv(e,t,n=e.BYTES_PER_ELEMENT){return new e(Ese(t,n))}function Tse(e){return e instanceof Ti?e:new Ti(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function iLt(e){return new ei([Tse(e)])}const Sse=new TextEncoder;function sLt(e,t,n){const r=Sse.encode(n);return e.set(r,t),r.length}function oLt(e,t,n){return Sse.encodeInto(n,e.subarray(t)).written}const aLt=Sse.encodeInto?oLt:sLt;function d_e(e,t){const n=Vv(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function uLt(e,t){const n=Vv(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function lLt(e,t){const n=Vv(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function cLt(e,t){const n=Vv(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function fLt(e){const t=iL({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function dLt(e,t,n){const r=Vv(Int32Array,t+1),i=Vv(Uint8Array,3*n);let s=0;return{set(o,a){s+=aLt(i,s,o),r[a+1]=s},data:()=>{const o=Ese(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function hLt(e,t){const n=[],r=Vv(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:pLt(e.dictionary,n,o)})}}function pLt(e,t,n){const r=dLt(e,t.length,n);return t.forEach(r.set),iLt(r.data())}function mLt(e,t){const n=Vv(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function gLt(e,t,n=!0){let r;switch(e.typeId){case fe.Int:r=e.bitWidth<64?d_e:null;break;case fe.Float:r=e.precision>0?d_e:null;break;case fe.Dictionary:r=e.dictionary.typeId===fe.Utf8&&e.indices.typeId===fe.Int&&e.indices.bitWidth<64?hLt:null;break;case fe.Bool:r=uLt;break;case fe.Date:r=e.unit?cLt:lLt;break}return r==null?fLt(e):n?mLt(r(e,t),t):r(e,t)}function yLt(e,t){const n=e.length,r=Ese(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),Tse({type:t,length:n,buffers:[null,i]})}function RLe(e,t,n,r,i=!0){const s=gLt(r,e,i);return t(n,s.set),Tse(s.data())}function Ase(e){if(e instanceof nr||e==null)return e;switch(e){case fe.Binary:return new d6;case fe.Bool:return new h6;case fe.DateDay:return new TOt;case fe.DateMillisecond:case fe.Date:return new SOt;case fe.Dictionary:return new Fv(new AS,new Lv);case fe.Float16:return new J$e;case fe.Float32:return new Uie;case fe.Float64:case fe.Float:return new zie;case fe.Int8:return new Oie;case fe.Int16:return new $ie;case fe.Int32:case fe.Int:return new Lv;case fe.Int64:return new Lie;case fe.IntervalDayTime:return new ROt;case fe.Interval:case fe.IntervalYearMonth:return new NOt;case fe.Null:return new Yg;case fe.TimeMicrosecond:return new IOt;case fe.TimeMillisecond:case fe.Time:return new COt;case fe.TimeNanosecond:return new kOt;case fe.TimeSecond:return new AOt;case fe.Uint8:return new Mie;case fe.Uint16:return new Fie;case fe.Uint32:return new Bie;case fe.Uint64:return new jie;case fe.Utf8:return new AS;default:Jn(`Unsupported type code: ${D0(e)}. Use a data type constructor instead?`)}}function vLt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function NLe(e,t){const n=YX();return e(t,n.add),n}function YX(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Gg(t))++e.dates,vLt(t)&&++e.utcdays;else if(lw(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=YX());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=YX())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return Ase(bLt(e))}};return e}function bLt(e){const t=e.count-e.nulls;if(t===0)return fe.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?fe.Float64:n<128?fe.Int8:n<32768?fe.Int16:fe.Int32:n>=2**32?fe.Float64:n<256?fe.Uint8:n<65536?fe.Uint16:fe.Uint32}else{if(e.nums===t)return fe.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?fe.Int64:Jn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?fe.Uint64:Jn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return fe.Bool;if(e.utcdays===t)return fe.DateDay;if(e.dates===t)return fe.DateMillisecond;if(e.arrays===t){const n=Mi.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new RS(e.minlen,n):new kS(n)}else if(e.structs===t){const n=e.struct_prof;return new Tu(Object.keys(n).map(r=>Mi.new(r,n[r].type(),!0)))}else{if(e.strings>0)return fe.Dictionary;Jn("Type inference failure")}}}}function _Lt(e,t,n,r,i,s=!0){if(i=Ase(i),!i){const o=NLe(r,t);s=o.nulls>0,i=o.type()}return RLe(n,r,t,i,s)}function wLt(e,t,n,r,i,s=!0){i=Ase(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=xLt(o);if(u&&a&&h_e(u.type,i))return u;const l=o.data;if(HR(l)){const c=ELt(l);if(a&&c&&h_e(c,i))return yLt(l,c);i=i||c,s=!1}if(!i){const c=NLe(r,o);s=c.nulls>0,i=c.type()}return RLe(n,r,o,i,s)}function xLt(e){return e instanceof ei?e:e.vector instanceof ei?e.vector:null}function ELt(e){const n={Float32Array:Uie,Float64Array:zie,Int8Array:Oie,Int16Array:$ie,Int32Array:Lv,Uint8Array:Mie,Uint16Array:Fie,Uint32Array:Bie,BigInt64Array:Lie,BigUint64Array:jie}[e.constructor.name];return n?new n:null}function h_e(e,t){return!e||!t?!0:e.compareTo(t)}function TLt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function SLt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&lw(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const ALt=()=>Jn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function CLt(){try{return Zl}catch{ALt()}}function PLe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=ILt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Jn("Column length mismatch"),a[l]=c});const u=CLt();return new u(a)}function ILt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=ps(n)?n(e):Zr(n)?n:null;if(Zr(e))return{dataFrom:_Lt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:TLt(e,r,i)};if(kLt(e))return{dataFrom:wLt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:SLt(e,r,i)};Jn("Unsupported input data type")}function kLt(e){return e&&ps(e.reify)}function RLt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return rLt(PLe(e,r),n)}function NLt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function PLt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Gg(u))++i,NLt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function LF(e,t){return ps(t)?t(e):t||e.columnNames()}function DLe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=PLt(DLt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function DLt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function Cse(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function OLt(e,t={}){const n=LF(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Gg(l)?TF(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return Cse(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function OLe(e,t={}){if(ps(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Gg(e))return t.utc?TF(e):n$e(e);{const r=JSON.stringify(e,(s,o)=>HR(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function MF(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function $Lt(e,t={}){const n=LF(e,t.columns),{align:r,format:i}=DLe(e,n,t),s=LLt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(OLe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return Cse(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function LLt(e){return MF(e.style,t=>ps(t)?t:()=>t)}function MLt(e,t=!0,n=!1){return e===void 0||e?t:n}const FLt=e=>Gg(e)?TF(e,!0):e;function BLt(e,t={}){const n=MLt(t.schema),r=t.format||{},i=LF(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||FLt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function jLt(e,t={}){const n=LF(e,t.columns),{align:r,format:i}=DLe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return Cse(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(OLe(u,i[l]))+"|"}}),a+`
`}function $Le(e,t){for(const[n,r]of SF(t))e.set(n,r);return e}function ULt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Xg(e,t,n=new Map){return t=El(t)?e.columnName(t):t,Ja(t)?n.set(t,t):Zr(t)?t.forEach(r=>Xg(e,r,n)):ps(t)?Xg(e,t(e),n):Lu(t)?$Le(n,t):Jn(`Invalid column selection: ${D0(t)}`),n}function FF(e,t){return e.toObject=t,e}function LLe(e){return Zr(e)?e.map(LLe):e&&e.toObject?e.toObject():e}function DS(){return FF(e=>e.columnNames(),()=>({all:[]}))}function MLe(...e){return e=e.flat(),FF(t=>{const n=Xg(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:LLe(e)}))}function zLt(e,t){return FF(n=>{let r=El(e)?e:n.columnIndex(e),i=El(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function VLt(e){return Ja(e)&&(e=RegExp(ULt(e))),FF(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function HLt(e){return HR(e.data)?e.data.constructor:Array}class tg extends aDt{static from(t,n){return new tg(cDt(t,n),n)}static new(t,n){if(t instanceof tg)return t;const r={},i=[];for(const[s,o]of SF(t))r[s]=o,i.push(s);return new tg(r,n||i)}constructor(t,n,r,i,s,o){MF(t,lDt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new tg(t||this._data,n||(t?null:this._names),o,i!==void 0?i:BDt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Df(r).groupby(r.groups());return t.forEach(s=>{s=tg.new(s),s.numRows()!==n&&Jn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Jn(`Unrecognized column: ${t}`)}object(t=0){return p_e(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Xg(this,t.columns||DS()),o=C$e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),UDt(this,u,a,n)}return a}*[Symbol.iterator](){const t=p_e(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(HLt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=jDt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return PLe(this,t)}toArrowBuffer(t){return RLt(this,t)}toCSV(t){return OLt(this,t)}toHTML(t){return $Lt(this,t)}toJSON(t){return BLt(this,t)}toMarkdown(t){return jLt(this,t)}}function p_e(e){let t=e._builder;if(!t){const n=C$e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class qLt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Ur(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=WLt[e.type];s&&s(e,t,n)}const QP=(e,t,n)=>{Ur(e.argument,t,n,e)},cq=(e,t,n)=>{Ur(e.left,t,n,e),Ur(e.right,t,n,e)},m_e=(e,t,n)=>{Ur(e.test,t,n,e),Ur(e.consequent,t,n,e),e.alternate&&Ur(e.alternate,t,n,e)},fq=(e,t,n)=>{Bp(e.params,t,n,e),Ur(e.body,t,n,e)},g_e=(e,t,n)=>{Ur(e.callee,t,n,e),Bp(e.arguments,t,n,e)},Bp=(e,t,n,r)=>{e.forEach(i=>Ur(i,t,n,r))},WLt={TemplateLiteral:(e,t,n)=>{Bp(e.expressions,t,n,e),Bp(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Ur(e.object,t,n,e),Ur(e.property,t,n,e)},CallExpression:g_e,NewExpression:g_e,ArrayExpression:(e,t,n)=>{Bp(e.elements,t,n,e)},AssignmentExpression:cq,AwaitExpression:QP,BinaryExpression:cq,LogicalExpression:cq,UnaryExpression:QP,UpdateExpression:QP,ConditionalExpression:m_e,ObjectExpression:(e,t,n)=>{Bp(e.properties,t,n,e)},Property:(e,t,n)=>{Ur(e.key,t,n,e),Ur(e.value,t,n,e)},ArrowFunctionExpression:fq,FunctionExpression:fq,FunctionDeclaration:fq,VariableDeclaration:(e,t,n)=>{Bp(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Ur(e.id,t,n,e),Ur(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Ur(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Bp(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Ur(e.expression,t,n,e)},IfStatement:m_e,ForStatement:(e,t,n)=>{Ur(e.init,t,n,e),Ur(e.test,t,n,e),Ur(e.update,t,n,e),Ur(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Ur(e.test,t,n,e),Ur(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Ur(e.body,t,n,e),Ur(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Ur(e.discriminant,t,n,e),Bp(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Ur(e.test,t,n,e),Bp(e.consequent,t,n,e)},ReturnStatement:QP,Program:(e,t,n)=>{Ur(e.body[0],t,n,e)}};function FLe(e){delete e.start,delete e.end,delete e.optional}function y_e(e){FLe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function GLt(e){return Ur(e,null,{Column:y_e,Constant:y_e,Default:FLe}),e}function Uo(e,t){return t&&t.type===e}function YLt(e){return Uo(HDt,e)||Uo(VDt,e)}function KLt(e){return ps(e)?e:()=>e}const XLt="Escaped functions are not valid as rollup or pivot values.";function QLt(e,t,n){e.aggronly&&Jn(XLt);const r="(row,data)=>fn("+A$e(e.table.columnNames())+",$)";return{escape:kie.escape(r,KLt(t.expr),n)}}var JLt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],BLe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],ZLt="-----------------------------------------------------------------------------------------------------------------------------------------------------",jLe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",dq={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},hq="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",e7t={5:hq,"5module":hq+" export import",6:hq+" const class extends export import super"},t7t=/^in(stanceof)?$/,n7t=new RegExp("["+jLe+"]"),r7t=new RegExp("["+jLe+ZLt+"]");function KX(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Qg(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&n7t.test(String.fromCharCode(e)):t===!1?!1:KX(e,BLe)}function OS(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&r7t.test(String.fromCharCode(e)):t===!1?!1:KX(e,BLe)||KX(e,JLt)}var Yr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Hf(e,t){return new Yr(e,{beforeExpr:!0,binop:t})}var qf={beforeExpr:!0},Ul={startsExpr:!0},Ise={};function Nr(e,t){return t===void 0&&(t={}),t.keyword=e,Ise[e]=new Yr(e,t)}var te={num:new Yr("num",Ul),regexp:new Yr("regexp",Ul),string:new Yr("string",Ul),name:new Yr("name",Ul),privateId:new Yr("privateId",Ul),eof:new Yr("eof"),bracketL:new Yr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Yr("]"),braceL:new Yr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Yr("}"),parenL:new Yr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Yr(")"),comma:new Yr(",",qf),semi:new Yr(";",qf),colon:new Yr(":",qf),dot:new Yr("."),question:new Yr("?",qf),questionDot:new Yr("?."),arrow:new Yr("=>",qf),template:new Yr("template"),invalidTemplate:new Yr("invalidTemplate"),ellipsis:new Yr("...",qf),backQuote:new Yr("`",Ul),dollarBraceL:new Yr("${",{beforeExpr:!0,startsExpr:!0}),eq:new Yr("=",{beforeExpr:!0,isAssign:!0}),assign:new Yr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Yr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Yr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Hf("||",1),logicalAND:Hf("&&",2),bitwiseOR:Hf("|",3),bitwiseXOR:Hf("^",4),bitwiseAND:Hf("&",5),equality:Hf("==/!=/===/!==",6),relational:Hf("</>/<=/>=",7),bitShift:Hf("<</>>/>>>",8),plusMin:new Yr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Hf("%",10),star:Hf("*",10),slash:Hf("/",10),starstar:new Yr("**",{beforeExpr:!0}),coalesce:Hf("??",1),_break:Nr("break"),_case:Nr("case",qf),_catch:Nr("catch"),_continue:Nr("continue"),_debugger:Nr("debugger"),_default:Nr("default",qf),_do:Nr("do",{isLoop:!0,beforeExpr:!0}),_else:Nr("else",qf),_finally:Nr("finally"),_for:Nr("for",{isLoop:!0}),_function:Nr("function",Ul),_if:Nr("if"),_return:Nr("return",qf),_switch:Nr("switch"),_throw:Nr("throw",qf),_try:Nr("try"),_var:Nr("var"),_const:Nr("const"),_while:Nr("while",{isLoop:!0}),_with:Nr("with"),_new:Nr("new",{beforeExpr:!0,startsExpr:!0}),_this:Nr("this",Ul),_super:Nr("super",Ul),_class:Nr("class",Ul),_extends:Nr("extends",qf),_export:Nr("export"),_import:Nr("import",Ul),_null:Nr("null",Ul),_true:Nr("true",Ul),_false:Nr("false",Ul),_in:Nr("in",{beforeExpr:!0,binop:7}),_instanceof:Nr("instanceof",{beforeExpr:!0,binop:7}),_typeof:Nr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Nr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Nr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},$d=/\r\n?|\n|\u2028|\u2029/,i7t=new RegExp($d.source,"g");function ZA(e){return e===10||e===13||e===8232||e===8233}function ULe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(ZA(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var zLe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,sd=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,VLe=Object.prototype,s7t=VLe.hasOwnProperty,o7t=VLe.toString,QR=Object.hasOwn||function(e,t){return s7t.call(e,t)},v_e=Array.isArray||function(e){return o7t.call(e)==="[object Array]"},b_e=Object.create(null);function jy(e){return b_e[e]||(b_e[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Hv(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var a7t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,g6=function(t,n){this.line=t,this.column=n};g6.prototype.offset=function(t){return new g6(this.line,this.column+t)};var BF=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function HLe(e,t){for(var n=1,r=0;;){var i=ULe(e,r,t);if(i<0)return new g6(n,t-r);++n,r=i}}var XX={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},__e=!1;function u7t(e){var t={};for(var n in XX)t[n]=e&&QR(e,n)?e[n]:XX[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!__e&&typeof console=="object"&&console.warn&&(__e=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),v_e(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return v_e(t.onComment)&&(t.onComment=l7t(t,t.onComment)),t}function l7t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new BF(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var y6=1,eC=2,kse=4,qLe=8,WLe=16,GLe=32,Rse=64,YLe=128,JR=256,Nse=y6|eC|JR;function Pse(e,t){return eC|(e?kse:0)|(t?qLe:0)}var uL=0,Dse=1,_1=2,KLe=3,XLe=4,QLe=5,Xo=function(t,n,r){this.options=t=u7t(t),this.sourceFile=t.sourceFile,this.keywords=jy(e7t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=dq[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=jy(i);var s=(i?i+" ":"")+dq.strict;this.reservedWordsStrict=jy(s),this.reservedWordsStrictBind=jy(s+" "+dq.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split($d).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=te.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(y6),this.regexpState=null,this.privateNameStack=[]},em={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Xo.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};em.inFunction.get=function(){return(this.currentVarScope().flags&eC)>0};em.inGenerator.get=function(){return(this.currentVarScope().flags&qLe)>0&&!this.currentVarScope().inClassFieldInit};em.inAsync.get=function(){return(this.currentVarScope().flags&kse)>0&&!this.currentVarScope().inClassFieldInit};em.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&JR)return!1;if(t.flags&eC)return(t.flags&kse)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};em.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Rse)>0||n||this.options.allowSuperOutsideMethod};em.allowDirectSuper.get=function(){return(this.currentThisScope().flags&YLe)>0};em.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};em.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(eC|JR))>0||n};em.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&JR)>0};Xo.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Xo.parse=function(t,n){return new this(n,t).parse()};Xo.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Xo.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Xo.prototype,em);var Rl=Xo.prototype,c7t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Rl.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){sd.lastIndex=e,e+=sd.exec(this.input)[0].length;var t=c7t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){sd.lastIndex=e+t[0].length;var n=sd.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||$d.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,sd.lastIndex=e,e+=sd.exec(this.input)[0].length,this.input[e]===";"&&e++}};Rl.eat=function(e){return this.type===e?(this.next(),!0):!1};Rl.isContextual=function(e){return this.type===te.name&&this.value===e&&!this.containsEsc};Rl.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Rl.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Rl.canInsertSemicolon=function(){return this.type===te.eof||this.type===te.braceR||$d.test(this.input.slice(this.lastTokEnd,this.start))};Rl.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Rl.semicolon=function(){!this.eat(te.semi)&&!this.insertSemicolon()&&this.unexpected()};Rl.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Rl.expect=function(e){this.eat(e)||this.unexpected()};Rl.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var jF=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Rl.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Rl.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Rl.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Rl.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var en=Xo.prototype;en.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==te.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Ose={kind:"loop"},f7t={kind:"switch"};en.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;sd.lastIndex=this.pos;var t=sd.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Qg(r,!0)){for(var i=n+1;OS(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!t7t.test(s))return!0}return!1};en.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;sd.lastIndex=this.pos;var e=sd.exec(this.input),t=this.pos+e[0].length,n;return!$d.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(OS(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};en.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=te._var,s="let"),r){case te._break:case te._continue:return this.parseBreakContinueStatement(i,r.keyword);case te._debugger:return this.parseDebuggerStatement(i);case te._do:return this.parseDoStatement(i);case te._for:return this.parseForStatement(i);case te._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case te._class:return e&&this.unexpected(),this.parseClass(i,!0);case te._if:return this.parseIfStatement(i);case te._return:return this.parseReturnStatement(i);case te._switch:return this.parseSwitchStatement(i);case te._throw:return this.parseThrowStatement(i);case te._try:return this.parseTryStatement(i);case te._const:case te._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case te._while:return this.parseWhileStatement(i);case te._with:return this.parseWithStatement(i);case te.braceL:return this.parseBlock(!0,i);case te.semi:return this.parseEmptyStatement(i);case te._export:case te._import:if(this.options.ecmaVersion>10&&r===te._import){sd.lastIndex=this.pos;var o=sd.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===te._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===te.name&&c.type==="Identifier"&&this.eat(te.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};en.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(te.semi)||this.insertSemicolon()?e.label=null:this.type!==te.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};en.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};en.parseDoStatement=function(e){return this.next(),this.labels.push(Ose),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(te._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(te.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};en.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Ose),this.enterScope(0),this.expect(te.parenL),this.type===te.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===te._var||this.type===te._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===te._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new jF,u=this.parseExpression(t>-1?"await":!0,a);return this.type===te._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===te._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};en.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,z4|(n?0:QX),!1,t)};en.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(te._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};en.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(te.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};en.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(te.braceL),this.labels.push(f7t),this.enterScope(0);for(var t,n=!1;this.type!==te.braceR;)if(this.type===te._case||this.type===te._default){var r=this.type===te._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(te.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};en.parseThrowStatement=function(e){return this.next(),$d.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var d7t=[];en.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?GLe:0),this.checkLValPattern(e,t?XLe:_1),this.expect(te.parenR),e};en.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===te._catch){var t=this.startNode();this.next(),this.eat(te.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(te._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};en.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};en.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Ose),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};en.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};en.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};en.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===te._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};en.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};en.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(te.braceL),e&&this.enterScope(0);this.type!==te.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};en.parseFor=function(e,t){return e.init=t,this.expect(te.semi),e.test=this.type===te.semi?null:this.parseExpression(),this.expect(te.semi),e.update=this.type===te.parenR?null:this.parseExpression(),this.expect(te.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};en.parseForIn=function(e,t){var n=this.type===te._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(te.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};en.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(te.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===te._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(te.comma))break}return e};en.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Dse:_1,!1)};var z4=1,QX=2,JLe=4;en.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===te.star&&t&QX&&this.unexpected(),e.generator=this.eat(te.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&z4&&(e.id=t&JLe&&this.type!==te.name?null:this.parseIdent(),e.id&&!(t&QX)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Dse:_1:KLe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Pse(e.async,e.generator)),t&z4||(e.id=this.type===te.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&z4?"FunctionDeclaration":"FunctionExpression")};en.parseFunctionParams=function(e){this.expect(te.parenL),e.params=this.parseBindingList(te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};en.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(te.braceL);this.type!==te.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&h7t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};en.parseClassElement=function(e){if(this.eat(te.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(te.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===te.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===te.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(te.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===te.parenL||o!=="method"||i||s){var l=!n.static&&lL(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};en.isClassElementNameStart=function(){return this.type===te.name||this.type===te.privateId||this.type===te.num||this.type===te.string||this.type===te.bracketL||this.type.keyword};en.parseClassElementName=function(e){this.type===te.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};en.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&lL(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};en.parseClassField=function(e){if(lL(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&lL(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(te.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};en.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(JR|Rse);this.type!==te.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};en.parseClassId=function(e,t){this.type===te.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,_1,!1)):(t===!0&&this.unexpected(),e.id=null)};en.parseClassSuper=function(e){e.superClass=this.eat(te._extends)?this.parseExprSubscripts(null,!1):null};en.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};en.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];QR(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function h7t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function lL(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}en.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==te.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};en.parseExport=function(e,t){if(this.next(),this.eat(te.star))return this.parseExportAllDeclaration(e,t);if(this.eat(te._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==te.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};en.parseExportDeclaration=function(e){return this.parseStatement(null)};en.parseExportDefaultDeclaration=function(){var e;if(this.type===te._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,z4|JLe,!1,e)}else if(this.type===te._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};en.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),QR(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};en.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};en.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};en.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};en.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};en.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(te.braceL);!this.eat(te.braceR);){if(n)n=!1;else if(this.expect(te.comma),this.afterTrailingComma(te.braceR))break;t.push(this.parseExportSpecifier(e))}return t};en.parseImport=function(e){return this.next(),this.type===te.string?(e.specifiers=d7t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===te.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};en.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,_1),this.finishNode(e,"ImportSpecifier")};en.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,_1),this.finishNode(e,"ImportDefaultSpecifier")};en.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,_1),this.finishNode(e,"ImportNamespaceSpecifier")};en.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===te.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(te.comma)))return e;if(this.type===te.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(te.braceL);!this.eat(te.braceR);){if(t)t=!1;else if(this.expect(te.comma),this.afterTrailingComma(te.braceR))break;e.push(this.parseImportSpecifier())}return e};en.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===te.string){var e=this.parseLiteral(this.value);return a7t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};en.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};en.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Ld=Xo.prototype;Ld.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Ld.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Ld.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Ld.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==te.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Ld.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case te.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(te.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case te.braceL:return this.parseObj(!0)}return this.parseIdent()};Ld.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(te.comma),t&&this.type===te.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===te.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Ld.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Ld.parseBindingListItem=function(e){return e};Ld.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(te.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Ld.checkLValSimple=function(e,t,n){t===void 0&&(t=uL);var r=t!==uL;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===_1&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(QR(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==QLe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Ld.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=uL),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Ld.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=uL),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var rh=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},As={b_stat:new rh("{",!1),b_expr:new rh("{",!0),b_tmpl:new rh("${",!1),p_stat:new rh("(",!1),p_expr:new rh("(",!0),q_tmpl:new rh("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new rh("function",!1),f_expr:new rh("function",!0),f_expr_gen:new rh("function",!0,!1,null,!0),f_gen:new rh("function",!1,!1,null,!0)},tC=Xo.prototype;tC.initialContext=function(){return[As.b_stat]};tC.curContext=function(){return this.context[this.context.length-1]};tC.braceIsBlock=function(e){var t=this.curContext();return t===As.f_expr||t===As.f_stat?!0:e===te.colon&&(t===As.b_stat||t===As.b_expr)?!t.isExpr:e===te._return||e===te.name&&this.exprAllowed?$d.test(this.input.slice(this.lastTokEnd,this.start)):e===te._else||e===te.semi||e===te.eof||e===te.parenR||e===te.arrow?!0:e===te.braceL?t===As.b_stat:e===te._var||e===te._const||e===te.name?!1:!this.exprAllowed};tC.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};tC.updateContext=function(e){var t,n=this.type;n.keyword&&e===te.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};tC.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};te.parenR.updateContext=te.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===As.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};te.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?As.b_stat:As.b_expr),this.exprAllowed=!0};te.dollarBraceL.updateContext=function(){this.context.push(As.b_tmpl),this.exprAllowed=!0};te.parenL.updateContext=function(e){var t=e===te._if||e===te._for||e===te._with||e===te._while;this.context.push(t?As.p_stat:As.p_expr),this.exprAllowed=!0};te.incDec.updateContext=function(){};te._function.updateContext=te._class.updateContext=function(e){e.beforeExpr&&e!==te._else&&!(e===te.semi&&this.curContext()!==As.p_stat)&&!(e===te._return&&$d.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===te.colon||e===te.braceL)&&this.curContext()===As.b_stat)?this.context.push(As.f_expr):this.context.push(As.f_stat),this.exprAllowed=!1};te.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};te.backQuote.updateContext=function(){this.curContext()===As.q_tmpl?this.context.pop():this.context.push(As.q_tmpl),this.exprAllowed=!1};te.star.updateContext=function(e){if(e===te._function){var t=this.context.length-1;this.context[t]===As.f_expr?this.context[t]=As.f_expr_gen:this.context[t]=As.f_gen}this.exprAllowed=!0};te.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==te.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Dn=Xo.prototype;Dn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Dn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===te.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(te.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Dn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new jF,r=!0);var a=this.start,u=this.startLoc;(this.type===te.parenL||this.type===te.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===te.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===te.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Dn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(te.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(te.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Dn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Dn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==te._in)&&s>r){var o=this.type===te.logicalOR||this.type===te.logicalAND,a=this.type===te.coalesce;a&&(s=te.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===te.coalesce||a&&(this.type===te.logicalOR||this.type===te.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Dn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Dn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===te.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&ZLe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===te.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==te._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(te.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function ZLe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&ZLe(e.expression)}Dn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Dn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Dn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(te.arrow)};Dn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Dn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(te.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(te.bracketL);if(l||u&&this.type!==te.parenL&&this.type!==te.backQuote||this.eat(te.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(te.bracketR)):this.type===te.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(te.parenL)){var f=new jF,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(te.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===te.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Dn.parseExprAtom=function(e,t,n){this.type===te.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case te._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===te.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==te.dot&&this.type!==te.bracketL&&this.type!==te.parenL&&this.unexpected(),this.finishNode(r,"Super");case te._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case te.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(te._function))return this.overrideContext(As.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(te.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===te.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(te.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case te.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case te.num:case te.string:return this.parseLiteral(this.value);case te._null:case te._true:case te._false:return r=this.startNode(),r.value=this.type===te._null?null:this.type===te._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case te.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case te.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(te.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case te.braceL:return this.overrideContext(As.b_expr),this.parseObj(!1,e);case te._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case te._class:return this.parseClass(this.startNode(),!1);case te._new:return this.parseNew();case te.backQuote:return this.parseTemplate();case te._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Dn.parseExprAtomDefault=function(){this.unexpected()};Dn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===te.parenL&&!e)return this.parseDynamicImport(t);if(this.type===te.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Dn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(te.parenR)){var t=this.start;this.eat(te.comma)&&this.eat(te.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Dn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Dn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Dn.parseParenExpression=function(){this.expect(te.parenL);var e=this.parseExpression();return this.expect(te.parenR),e};Dn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Dn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new jF,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==te.parenR;)if(l?l=!1:this.expect(te.comma),s&&this.afterTrailingComma(te.parenR,!0)){c=!0;break}else if(this.type===te.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(te.parenR),e&&this.shouldParseArrow(u)&&this.eat(te.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Dn.parseParenItem=function(e){return e};Dn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var p7t=[];Dn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===te.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(te.parenL)?e.arguments=this.parseExprList(te.parenR,this.options.ecmaVersion>=8,!1):e.arguments=p7t,this.finishNode(e,"NewExpression")};Dn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===te.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===te.backQuote,this.finishNode(n,"TemplateElement")};Dn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===te.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(te.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(te.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Dn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===te.name||this.type===te.num||this.type===te.string||this.type===te.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===te.star)&&!$d.test(this.input.slice(this.lastTokEnd,this.start))};Dn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(te.braceR);){if(r)r=!1;else if(this.expect(te.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(te.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Dn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(te.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===te.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(te.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(te.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Dn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Dn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===te.colon&&this.unexpected(),this.eat(te.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===te.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==te.comma&&this.type!==te.braceR&&this.type!==te.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===te.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Dn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(te.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(te.bracketR),e.key;e.computed=!1}return e.key=this.type===te.num||this.type===te.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Dn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Dn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Pse(t,r.generator)|Rse|(n?YLe:0)),this.expect(te.parenL),r.params=this.parseBindingList(te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Dn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(Pse(n,!1)|WLe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Dn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==te.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,QLe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Dn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Dn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,Dse,t?null:n)}};Dn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(te.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===te.comma?o=null:this.type===te.ellipsis?(o=this.parseSpread(r),r&&this.type===te.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Dn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Dn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Dn.parseIdentNode=function(){var e=this.startNode();return this.type===te.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=te.name):this.unexpected(),e};Dn.parsePrivateIdent=function(){var e=this.startNode();return this.type===te.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Dn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===te.semi||this.canInsertSemicolon()||this.type!==te.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(te.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Dn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var cL=Xo.prototype;cL.raise=function(e,t){var n=HLe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};cL.raiseRecoverable=cL.raise;cL.curPosition=function(){if(this.options.locations)return new g6(this.curLine,this.pos-this.lineStart)};var Ob=Xo.prototype,m7t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Ob.enterScope=function(e){this.scopeStack.push(new m7t(e))};Ob.exitScope=function(){this.scopeStack.pop()};Ob.treatFunctionsAsVarInScope=function(e){return e.flags&eC||!this.inModule&&e.flags&y6};Ob.declareName=function(e,t,n){var r=!1;if(t===_1){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&y6&&delete this.undefinedExports[e]}else if(t===XLe){var s=this.currentScope();s.lexical.push(e)}else if(t===KLe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&GLe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&y6&&delete this.undefinedExports[e],u.flags&Nse)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Ob.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Ob.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Ob.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Nse)return t}};Ob.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Nse&&!(t.flags&WLe))return t}};var UF=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new BF(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},ZR=Xo.prototype;ZR.startNode=function(){return new UF(this,this.start,this.startLoc)};ZR.startNodeAt=function(e,t){return new UF(this,e,t)};function e7e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}ZR.finishNode=function(e,t){return e7e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};ZR.finishNodeAt=function(e,t,n,r){return e7e.call(this,e,t,n,r)};ZR.copyNode=function(e){var t=new UF(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var t7e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",n7e=t7e+" Extended_Pictographic",r7e=n7e,i7e=r7e+" EBase EComp EMod EPres ExtPict",s7e=i7e,g7t=s7e,y7t={9:t7e,10:n7e,11:r7e,12:i7e,13:s7e,14:g7t},v7t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",b7t={9:"",10:"",11:"",12:"",13:"",14:v7t},w_e="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",o7e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",a7e=o7e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",u7e=a7e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",l7e=u7e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",c7e=l7e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",_7t=c7e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",w7t={9:o7e,10:a7e,11:u7e,12:l7e,13:c7e,14:_7t},f7e={};function x7t(e){var t=f7e[e]={binary:jy(y7t[e]+" "+w_e),binaryOfStrings:jy(b7t[e]),nonBinary:{General_Category:jy(w_e),Script:jy(w7t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var pq=0,x_e=[9,10,11,12,13,14];pq<x_e.length;pq+=1){var E7t=x_e[pq];x7t(E7t)}var Wt=Xo.prototype,tm=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=f7e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};tm.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};tm.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};tm.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};tm.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};tm.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};tm.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};tm.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};tm.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};tm.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Wt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Wt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Wt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Wt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Wt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Wt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Wt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Wt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Wt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Wt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Wt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Wt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Wt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Wt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Wt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Wt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Wt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return d7e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function d7e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Wt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!d7e(n);)e.advance();return e.pos!==t};Wt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Wt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Wt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Wt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Hv(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Hv(e.lastIntValue);return!0}return!1};Wt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),T7t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function T7t(e){return Qg(e,!0)||e===36||e===95}Wt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),S7t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function S7t(e){return OS(e,!0)||e===36||e===95||e===8204||e===8205}Wt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Wt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Wt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Wt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Wt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Wt.regexp_eatZero=function(e){return e.current()===48&&!zF(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Wt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Wt.regexp_eatControlLetter=function(e){var t=e.current();return h7e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function h7e(e){return e>=65&&e<=90||e>=97&&e<=122}Wt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&A7t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function A7t(e){return e>=0&&e<=1114111}Wt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Wt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var p7e=0,Jg=1,ud=2;Wt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(C7t(t))return e.lastIntValue=-1,e.advance(),Jg;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===ud&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return p7e};function C7t(e){return e===100||e===68||e===115||e===83||e===119||e===87}Wt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Jg}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return p7e};Wt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){QR(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Wt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Jg;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return ud;e.raise("Invalid property name")};Wt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";m7e(t=e.current());)e.lastStringValue+=Hv(t),e.advance();return e.lastStringValue!==""};function m7e(e){return h7e(e)||e===95}Wt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";I7t(t=e.current());)e.lastStringValue+=Hv(t),e.advance();return e.lastStringValue!==""};function I7t(e){return m7e(e)||zF(e)}Wt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Wt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===ud&&e.raise("Negated character class may contain strings"),!0}return!1};Wt.regexp_classContents=function(e){return e.current()===93?Jg:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Jg)};Wt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Wt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||v7e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Wt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Wt.regexp_classSetExpression=function(e){var t=Jg,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===ud&&(t=ud);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==ud&&(t=Jg);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===ud&&(t=ud)}};Wt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Wt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Jg:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Wt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===ud&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Wt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Wt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===ud&&(t=ud);return t};Wt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Jg:ud};Wt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&k7t(n)||R7t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function k7t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function R7t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Wt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return N7t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function N7t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Wt.regexp_eatClassControlLetter=function(e){var t=e.current();return zF(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Wt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Wt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;zF(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function zF(e){return e>=48&&e<=57}Wt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;g7e(n=e.current());)e.lastIntValue=16*e.lastIntValue+y7e(n),e.advance();return e.pos!==t};function g7e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function y7e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Wt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Wt.regexp_eatOctalDigit=function(e){var t=e.current();return v7e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function v7e(e){return e>=48&&e<=55}Wt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!g7e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+y7e(i),e.advance()}return!0};var $se=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new BF(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Tr=Xo.prototype;Tr.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new $se(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Tr.getToken=function(){return this.next(),new $se(this)};typeof Symbol<"u"&&(Tr[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===te.eof,value:t}}}});Tr.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(te.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Tr.readToken=function(e){return Qg(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Tr.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Tr.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=ULe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Tr.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!ZA(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Tr.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&zLe.test(String.fromCharCode(e)))++this.pos;else break e}}};Tr.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Tr.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(te.ellipsis)):(++this.pos,this.finishToken(te.dot))};Tr.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(te.assign,2):this.finishOp(te.slash,1)};Tr.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?te.star:te.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=te.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(te.assign,n+1):this.finishOp(r,n)};Tr.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(te.assign,3)}return this.finishOp(e===124?te.logicalOR:te.logicalAND,2)}return t===61?this.finishOp(te.assign,2):this.finishOp(e===124?te.bitwiseOR:te.bitwiseAND,1)};Tr.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(te.assign,2):this.finishOp(te.bitwiseXOR,1)};Tr.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||$d.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(te.incDec,2):t===61?this.finishOp(te.assign,2):this.finishOp(te.plusMin,1)};Tr.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(te.assign,n+1):this.finishOp(te.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(te.relational,n))};Tr.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(te.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(te.arrow)):this.finishOp(e===61?te.eq:te.prefix,1)};Tr.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(te.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(te.assign,3)}return this.finishOp(te.coalesce,2)}}return this.finishOp(te.question,1)};Tr.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Qg(t,!0)||t===92))return this.finishToken(te.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Hv(t)+"'")};Tr.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(te.parenL);case 41:return++this.pos,this.finishToken(te.parenR);case 59:return++this.pos,this.finishToken(te.semi);case 44:return++this.pos,this.finishToken(te.comma);case 91:return++this.pos,this.finishToken(te.bracketL);case 93:return++this.pos,this.finishToken(te.bracketR);case 123:return++this.pos,this.finishToken(te.braceL);case 125:return++this.pos,this.finishToken(te.braceR);case 58:return++this.pos,this.finishToken(te.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(te.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(te.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Hv(e)+"'")};Tr.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Tr.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if($d.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new tm(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(te.regexp,{pattern:i,flags:o,value:u})};Tr.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function P7t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function b7e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Tr.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=b7e(this.input.slice(t,this.pos)),++this.pos):Qg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(te.num,n)};Tr.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=b7e(this.input.slice(t,this.pos));return++this.pos,Qg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(te.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Qg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=P7t(this.input.slice(t,this.pos),n);return this.finishToken(te.num,s)};Tr.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Tr.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(ZA(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(te.string,t)};var _7e={};Tr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===_7e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Tr.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw _7e;this.raise(e,t)};Tr.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===te.template||this.type===te.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(te.dollarBraceL)):(++this.pos,this.finishToken(te.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(te.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(ZA(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Tr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(te.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Tr.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Hv(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return ZA(t)?"":String.fromCharCode(t)}};Tr.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Tr.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(OS(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Qg:OS)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Hv(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Tr.readWord=function(){var e=this.readWord1(),t=te.name;return this.keywords.test(e)&&(t=Ise[e]),this.finishToken(t,e)};var D7t="8.11.3";Xo.acorn={Parser:Xo,version:D7t,defaultOptions:XX,Position:g6,SourceLocation:BF,getLineInfo:HLe,Node:UF,TokenType:Yr,tokTypes:te,keywordTypes:Ise,TokContext:rh,tokContexts:As,isIdentifierChar:OS,isIdentifierStart:Qg,Token:$se,isNewLine:ZA,lineBreak:$d,lineBreakG:i7t,nonASCIIwhitespace:zLe};function O7t(e,t){return Xo.parse(e,t)}const Lse={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},$7t={ecmaVersion:11},E_e="$",L7t="d",M7t="d1",F7t="d2",La=e=>(t,n)=>n.error(t,e+" not allowed"),B7t=La("Aggregate function"),j7t=La("Window function"),U7t="Invalid argument",Mse="Invalid column reference",z7t=Mse+" (must be input to an aggregate function)",w7e="Invalid function call",V7t="Invalid member expression",H7t="Invalid operator parameter",q7t="Invalid param reference",W7t="Invalid variable reference",G7t="Variable not accessible in operator call",Y7t="Unsupported variable declaration",K7t="Unsupported destructuring pattern",x7e="Table expressions do not support closures",E7e="Use aq.escape(fn) to use a function as-is (including closures)",X7t="use table.params({ name: value }) to define dynamic parameters",Q7t="use aq.addFunction(name, fn) to add new op functions",J7t=`
Note: ${x7e}. ${E7e}, or ${X7t}.`,T7e=`
Note: ${x7e}. ${E7e}, or ${Q7t}.`,Z7t=`The ${T$e} method is not valid in multi-table expressions.`;function eMt(e,t){const n=tMt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,YLt(r)?(rMt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=M7t),e.scope.add(e.tuple2=F7t),e.scope.add(e.$param=E_e)):(e.scope.add(e.tuple=L7t),e.scope.add(e.$param=E_e)),Ur(r,e,Fse),e.root}function tMt(e){try{const t=e.field?nMt(e):Zr(e)?D0(e):e;return O7t(`expr=(${t})`,$7t).body[0].expression.right}catch{Jn(`Expression parse error: ${e+""}`)}}function nMt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const Fse={FunctionDeclaration:La("Function definitions"),ForStatement:La("For loops"),ForOfStatement:La("For-of loops"),ForInStatement:La("For-in loops"),WhileStatement:La("While loops"),DoWhileStatement:La("Do-while loops"),AwaitExpression:La("Await expressions"),ArrowFunctionExpression:La("Function definitions"),AssignmentExpression:La("Assignments"),FunctionExpression:La("Function definitions"),NewExpression:La('Use of "new"'),UpdateExpression:La("Update expressions"),VariableDeclarator(e,t){eQ(e.id,t)},Identifier(e,t,n){C7e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,W7t,J7t)},CallExpression(e,t){const n=S7e(e.callee),r=w$e(n)||x$e(n);if(r){if((t.join||t.aggregate===!1)&&Cie(n)&&B7t(e,t),(t.join||t.window===!1)&&Iie(n)&&j7t(e,t),t.$op=1,t.ast)ZX(e,n,t),e.arguments.forEach(i=>Ur(i,t,JX));else{const i=t.op(iMt(t,r,n,e.arguments));Object.assign(e,{type:g$e,name:i.id})}return t.$op=0,!1}else _$e(n)?ZX(e,n,t):t.error(e,w7e,T7e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Uo(fv,r))return;const{name:s}=r;if(A7e(e)&&Uo(fv,i)&&Gh(Lse,i.name)){R7e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return T_e(e,o,t,I7e,n);if(s===t.$param)return T_e(e,o,t,oMt);t.paramsRef.has(s)?v6(e,t.paramsRef.get(s)):t.columnRef.has(s)?k7e(r,s,t,e):Gh(t.params,s)&&v6(r,s)}};function T_e(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Uo(YA,s))a=s.value;else try{Ur(s,n,Fse,e),a=n.param(s)}catch{n.error(e,V7t)}return r(e,a,t,n,i),!1}const JX={...Fse,VariableDeclarator:La("Variable declaration in operator call"),Identifier(e,t,n){C7e(e,t,n)&&t.error(e,G7t)},CallExpression(e,t){const n=S7e(e.callee);_$e(n)?ZX(e,n,t):t.error(e,w7e,T7e)}};function rMt(e,t){e.generator&&La("Generator functions")(e,t),e.async&&La("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(N3(t,n[0],"tuple1",i(1)),r>1&&N3(t,n[1],"tuple2",i(2)),r>2&&N3(t,n[2],"$param",s)):(N3(t,n[0],"tuple",i(0)),r>1&&N3(t,n[1],"$param",s))),t.root=e.body}function N3(e,t,n,r){Uo(fv,t)?(e.scope.add(t.name),e[n]=t.name):Uo(p$e,t)&&t.properties.forEach(i=>{const s=Uo(fv,i.key)?i.key.name:Uo(YA,i.key)?i.key.value:e.error(i,U7t);Uo(fv,i.value)||e.error(i.value,K7t),r(i.value.name,s)})}function iMt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Ur(u,e,JX),i.push(e.field(u))):l<a?(Ur(u,e,JX),s.push(e.param(u))):e.error(u,H7t)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function S7e(e){return Uo(fv,e)?e.name:Uo(h$e,e)?A7e(e)?sMt(e.property.name):e.property.name:null}function A7e(e){return Uo(fv,e.object)&&e.object.name==="Math"}function sMt(e){return e==="max"?"greatest":e==="min"?"least":e}function C7e(e,t,n){const{name:r}=e;if(!(Uo(h$e,n)&&n.property===e)){if(!(Uo(m$e,n)&&n.key===e))if(t.paramsRef.has(r))v6(e,t.paramsRef.get(r));else if(t.columnRef.has(r))k7e(e,r,t,n);else if(Gh(t.params,r))v6(e,r);else if(Gh(Lse,r))R7e(e,r);else return!0}}function I7e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,Mse),r.aggronly&&!r.$op&&r.error(e,z7t),E$e(e,t,n,o,i)}function k7e(e,t,n,r){const[i,s]=n.columnRef.get(t);I7e(e,i,s,n,r)}function oMt(e,t,n,r){r.params&&!Gh(r.params,t)&&r.error(e,q7t),v6(e,t)}function v6(e,t){e.type=KDt,e.name=t}function R7e(e,t){e.type=WDt,e.name=t,e.raw=Lse[t]}function ZX(e,t,n){if(t===T$e){const r=n.table;r||n.error(e,Z7t),S$e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=El(s)?r.columnName(s):s;return r.column(o)||n.error(i,Mse),o}):r.columnNames())}else e.callee={type:YDt,name:t}}function eQ(e,t){Uo(fv,e)?t.scope.add(e.name):Uo(zDt,e)?e.elements.forEach(n=>eQ(n,t)):Uo(p$e,e)?e.properties.forEach(n=>eQ(n.value,t)):t.error(e.id,Y7t)}const aMt={[qR]:1,[g$e]:1};function Ac(e,t={}){const n=t.generate||z9,r=t.compiler||kie,i=lMt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=uMt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Uo(YA,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?GLt(g):f(n(g),i));u.push(y),aMt[g.type]&&y!==g&&Lu(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);Jn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of SF(e))d.value(m+"",g.escape?QLt(d,g,i):eMt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function uMt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function lMt(e){return(e.table?mq(e.table):e.join?{...mq(e.join[1]),...mq(e.join[0])}:{})||{}}function mq(e){return e&&ps(e.params)?e.params():{}}const N7e="Expr",ih="ExprList",P7e="ExprNumber",WI="ExprObject",JE="JoinKeys",fL="JoinValues",Jf="Options",Bse="OrderKeys",fy="SelectionList",H_="TableRef",ZE="TableRefList",cMt="Descending",fMt="Query",dMt="Selection",hMt="Verb",pMt="Window";function VF(e,t){return e&&e.expr?new S_e({...e,...t}):new S_e(t,e)}class S_e{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...ps(this.expr)?{func:!0}:{}}}}function mMt(e){return VF(e,{desc:!0})}function Zw(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return VF(e,t?{expr:t,...r}:r)}function gMt(e,t,n){return VF(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function yMt(e){const t=n=>n;return t.toString=()=>e,t}function A_e(e,t){return t=t&&ps(t.query)?t.query():t,t&&ps(t.evaluate)?t.evaluate(null,e):e(t)}function D7e(e){return Lu(e)&&(Zr(e.all)||Zr(e.matches)||Zr(e.not)||Zr(e.range))}function b6(e){return e&&ps(e.toObject)?e.toObject():ps(e)?{expr:String(e),func:!0}:Zr(e)?e.map(b6):Lu(e)?MF(e,t=>b6(t)):e}function jse(e){return Zr(e)?e.map(jse):Lu(e)?Zr(e.verbs)?zse.from(e):Zr(e.all)?DS():Zr(e.range)?zLt(...e.range):Zr(e.match)?VLt(RegExp(...e.match)):Zr(e.not)?MLe(e.not.map(b6)):vMt(e):e}function vMt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=Zw(n):e.func===!0&&(t=n=yMt(n)),Lu(e.window)){const{frame:r,peers:i}=e.window;t=n=gMt(n,r,i)}e.desc===!0&&(t=mMt(n))}return e===t?MF(e,r=>jse(r)):t}function bMt(e){return Zr(e)?e.map(_Mt):e}function _Mt(e){const t=[];return Ec(e).forEach(n=>{El(n)?t.push(n):Ja(n)?t.push(Zw(n,null)):Lu(n)&&n.expr||ps(n)?t.push(n):Jn(`Invalid key value: ${n+""}`)}),t}function wMt(e){return Zr(e)?e.map(xMt):e}function xMt(e,t){return t<2?Ec(e):e}function EMt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Lu(r)&&!ps(r))for(const i in r)t.push(r[i]);else n=El(r)?r:Ja(r)?Zw(n):ps(r)?n:Jn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const TMt={[N7e]:M7e,[ih]:$S,[P7e]:RMt,[WI]:qv,[JE]:NMt,[fL]:PMt,[Bse]:$S,[fy]:IMt};function SMt(e,t,n){return t===H_?C_e(e):t===ZE?e.map(C_e):O7e(b6(e),t,n)}function O7e(e,t,n){return t===Jf?e&&AMt(e,n):TMt[t](e)}function AMt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?O7e(i,t[r]):i}return n}function CMt(e,t){return Ac({expr:e},{...t,ast:!0}).exprs[0]}function Use(e){return{type:qR,name:e}}function $7e(e){return{type:qR,index:e}}function qv(e,t){if(Ja(e))return CMt(e,t);if(e.expr){let n;if(e.field===!0?n=Use(e.expr):e.func===!0&&(n=qv(e.expr,t)),n)return e.desc&&(n={type:cMt,expr:n}),e.window&&(n={type:pMt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...qv(e[n],t),as:n}))}function L7e(e){const t=dMt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:$S(e.not)}:e.range?{type:t,operator:"range",arguments:$S(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Jn("Invalid input")}function IMt(e){return Ec(e).map(kMt).flat()}function kMt(e){return D7e(e)?L7e(e):El(e)?$7e(e):Ja(e)?Use(e):Lu(e)?Object.keys(e).map(t=>({type:qR,name:t,as:e[t]})):Jn("Invalid input")}function M7e(e){return D7e(e)?L7e(e):El(e)?$7e(e):Ja(e)?Use(e):Lu(e)?qv(e):Jn("Invalid input")}function $S(e){return Ec(e).map(M7e).flat()}function RMt(e){return El(e)?e:qv(e)}function NMt(e){return Zr(e)?e.map($S):qv(e,{join:!0})}function PMt(e){return Zr(e)?e.map((t,n)=>n<2?$S(t):qv(t,{join:!0})):qv(e,{join:!0})}function C_e(e){return e&&ps(e.toAST)?e.toAST():e}class F7e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===JE?bMt(a):o===fL?wMt(a):o===Bse?EMt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=tQ[t.verb],r=(n.schema||[]).map(({name:i})=>jse(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===H_?A_e(n,o):s===ZE?o.map(a=>A_e(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=b6(this[n])}),t}toAST(){const t={type:hMt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=SMt(this[n],r,i)}),t}}function Di(e,t){return Object.assign((...n)=>new F7e(e,t,n),{schema:t})}const tQ={count:Di("count",[{name:"options",type:Jf}]),derive:Di("derive",[{name:"values",type:WI},{name:"options",type:Jf,props:{before:fy,after:fy}}]),filter:Di("filter",[{name:"criteria",type:WI}]),groupby:Di("groupby",[{name:"keys",type:ih}]),orderby:Di("orderby",[{name:"keys",type:Bse}]),relocate:Di("relocate",[{name:"columns",type:fy},{name:"options",type:Jf,props:{before:fy,after:fy}}]),rename:Di("rename",[{name:"columns",type:fy}]),rollup:Di("rollup",[{name:"values",type:WI}]),sample:Di("sample",[{name:"size",type:P7e},{name:"options",type:Jf,props:{weight:N7e}}]),select:Di("select",[{name:"columns",type:fy}]),ungroup:Di("ungroup"),unorder:Di("unorder"),reify:Di("reify"),dedupe:Di("dedupe",[{name:"keys",type:ih,default:[]}]),impute:Di("impute",[{name:"values",type:WI},{name:"options",type:Jf,props:{expand:ih}}]),fold:Di("fold",[{name:"values",type:ih},{name:"options",type:Jf}]),pivot:Di("pivot",[{name:"keys",type:ih},{name:"values",type:ih},{name:"options",type:Jf}]),spread:Di("spread",[{name:"values",type:ih},{name:"options",type:Jf}]),unroll:Di("unroll",[{name:"values",type:ih},{name:"options",type:Jf,props:{drop:ih}}]),lookup:Di("lookup",[{name:"table",type:H_},{name:"on",type:JE},{name:"values",type:ih}]),join:Di("join",[{name:"table",type:H_},{name:"on",type:JE},{name:"values",type:fL},{name:"options",type:Jf}]),cross:Di("cross",[{name:"table",type:H_},{name:"values",type:fL},{name:"options",type:Jf}]),semijoin:Di("semijoin",[{name:"table",type:H_},{name:"on",type:JE}]),antijoin:Di("antijoin",[{name:"table",type:H_},{name:"on",type:JE}]),concat:Di("concat",[{name:"tables",type:ZE}]),union:Di("union",[{name:"tables",type:ZE}]),intersect:Di("intersect",[{name:"tables",type:ZE}]),except:Di("except",[{name:"tables",type:ZE}])};let zse=class B7e extends e$e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new B7e(t.map(F7e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return I_e(this,"toObject")}toJSON(){return this.toObject()}toAST(){return I_e(this,"toAST",{type:fMt})}};function I_e(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function DMt(e,t){return new zse(e._verbs.concat(t),e._params,e._table)}for(const e in tQ){const t=tQ[e];zse.prototype["__"+e]=function(n,...r){return DMt(n,t(...r))}}function nC(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function OMt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function Vse(e,t){const n=Df();return t.forEach((r,i)=>{const s=Ja(r)?r:i;if(s){const o=e.column(i)||Jn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function j7e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Jn("relocate requires a before or after option."),i&&s&&Jn("relocate accepts only one of the before or after options."),t=Xg(e,t);const o=[...Xg(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),Vse(e,u)}function e5(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function Hse(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $Mt(e,t=0,n=e.length){let r=n?e[t++]:Kr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function LMt(e,t=0,n=e.length){let r=n?e[t++]:Kr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function JP(e){return l6(e)?e:+e}function MMt(e,t){const n=e.length;if(!n)return Kr;if((t=+t)<=0||n<2)return JP(e[0]);if(t>=1)return JP(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=JP(e[i]);return l6(s)?s:s+(JP(e[i+1])-s)*(r-i)}class FMt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:$Mt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:LMt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(Hse)),MMt(this._sorted,t)}}const dL=(e,t,n)=>nC(t,"{"+e5(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function BMt(e,t){const{ops:n,output:r}=jMt(e,t),i=e[0].fields,s=i.length,o=s===0?qse:s===1?UMt:s===2?zMt:Jn("Unsupported field count: "+s);return new o(i,n,r,t)}function jMt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=w$e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class qse extends qLt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new FMt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class UMt extends qse{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=dL(n,s,"add"),this._rem=dL(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,kh(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,kh(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class zMt extends qse{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=dL(n,s,"add"),this._rem=dL(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,kh(i)&&kh(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,kh(i)&&kh(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Gx(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=rC(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function rC(e,t,n){if(!t.length)return n;const r=U7e(t),i=e.groups(),s=i?i.size:1;return n=n||EF(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=V7e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=z7e(e,o);o.write(a,n,0)}),n}function U7e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(BMt(r[i],t));return n}function z7e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function V7e(e,t,n){const{keys:r,size:i}=n,s=EF(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function H7e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function q7e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const k_e=q7e(Hse);function VMt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?nC(["w","r","k"],"{"+e5(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i.map(b=>b.init());for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=k_e.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=k_e.right(o,o[p.i1-1])));for(let x=0;x<d;++x){const S=i[x],A=a[x];for(let C=b;C<p.i0;++C)S.rem(A,s[C],e);for(let C=w;C<p.i1;++C)S.add(A,s[C],e);S.write(A,u,l)}return h(p,u,l),u}};return p}const HMt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),qMt=e=>!!e.peers;function WMt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=x$e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function GMt(e,t,n,r={},i){const s=e.data(),o=YMt(i,s),a=o.length,u=nC(["r","d","op"],"{"+e5(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=KMt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function YMt(e,t){const n={};return e.forEach(r=>{const i=HMt(r),s=qMt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});Cie(r.name)?a.push(r):u.push(WMt(r))}),Object.values(n).map(r=>VMt(t,r.frame,r.peers,r.winOps,U7e(r.aggOps,r.frame[0]!=null?-1:1)))}function KMt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function XMt(e){return Iie(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function Wse(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Df(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=QMt(r),c=e.isGrouped()?e.groups().size:1,f=rC(e,u,EF(r.length,()=>Array(c)));return l.length?GMt(e,a,n,f,l):JMt(e,a,n,f),e.create(o)}function QMt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(XMt(s)?n:t).push(s)}return[t,n]}function JMt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function ZMt(e,t,n={}){const r=Wse(e,Ac(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:j7e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function eFt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const ZP=2147483648,tFt=4294967295;class W7e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&ZP>>>t}set(t){this._bits[t>>5]|=ZP>>>t}clear(t){this._bits[t>>5]&=~(ZP>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&tFt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=ZP>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function nFt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new W7e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function rFt(e,t){const n=Ac({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=Wse(e,n,{drop:!0}).column("p");r=s=>i[s]}return nFt(e,r)}function G7e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Gx(e,r,n),l=Df(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const x=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(x))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,x)=>{for(let S=0;S<g;++S)d[S].length=m+x,d[S].fill(f[S].get(w),m,m+x)},b=p?(w,x)=>{for(let S=0;S<x;++S)p[w+S]=S}:()=>{};if(y===1){const w=u[0],x=h[0];e.scan((S,A)=>{const C=Ec(w(S,A)),N=Math.min(C.length,s);v(S,N);for(let k=0;k<N;++k)x[m+k]=C[k];b(m,N),m+=N})}else e.scan((w,x)=>{let S=0;const A=u.map(C=>{const N=Ec(C(w,x));return S=Math.min(Math.max(S,N.length),s),N});v(w,S);for(let C=0;C<y;++C){const N=h[C],k=A[C];for(let D=0;D<S;++D)N[m+D]=k[D]}b(m,S),m+=S});return e.create(l.new())}function iFt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Gx(e,r,n);return G7e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Kh(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=El(o)?t.columnName(o):o,Ja(o)?i.set(o,Zw(o)):ps(o)?Xg(t,o).forEach(s):Lu(o)?$Le(i,o):Jn(`Invalid ${e} value: ${o+""}`)};return Ec(n).forEach(s),r.preparse&&r.preparse(i),Ac(i,{table:t,...r})}function sFt(e,t,n){return iFt(e,Kh("fold",e,t),n)}function R_e(e,t,n,r){const i=n&&n.length;return oFt(i?aFt(e,n,r):e,t,i)}function oFt(e,{names:t,exprs:n,ops:r},i){const s=Gx(e,r,n),o=i?null:Df(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=kh(p)?p:d(h)})}),i?e:e.create(o)}function aFt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=V9(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Df(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=V9(o.map((p,m)=>g=>g[m])),h=nC("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),N_e(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else N_e(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function N_e(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function Gse(e,{names:t,exprs:n,ops:r}){const i=Df(),s=e.groups();return s&&H7e(i,s),uFt(t,n,s,rC(e,r),i),e.create(i.new())}function uFt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function lFt(e,t,n={}){if(t=Ac(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Jn(`Invalid impute column ${D0(r)}`)),n.expand){const r={preparse:cFt,aggronly:!0},i=Kh("impute",e,n.expand,r),s=Gse(e.ungroup(),i);return R_e(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return R_e(e,t)}function cFt(e){e.forEach((t,n)=>t.field?e.set(n,l$e(t+"")):0)}function fFt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function Y7e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function dFt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function hFt(e,t){const n=["i","a","j","b"];return nC(n,"{"+e5(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function pFt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Df(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=hFt(g,y);if((Zr(n)?gFt:mFt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function mFt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function gFt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(S,A,C,N)=>e(C,N,S,A));const w=dFt(v,m,g),x=p.length;for(let S=0;S<x;++S){const A=p[S],C=w.get(d(A,f));if(C){const N=C.length;for(let k=0;k<N;++k){const D=C[k];b(A,f,v[D],m),y[D]=1}h[S]=1}}}function hL(e,t,n){const r=new Map;Ec(n).forEach((s,o)=>{s=El(s)?t.columnName(s):s,Ja(s)?r.set(o,Zw(s)):ps(s)||Lu(s)&&s.expr?r.set(o,s):Jn(`Invalid ${e} key value: ${s+""}`)});const i=Ac(r,{table:t,aggregate:!1,window:!1});return V9(i.exprs,!0)}function yFt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function Yse(e,t,n){if(n)Ja(n)?n=[n,n]:Zr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=yFt(e.columnNames(),t.columnNames());r.length||Jn("Natural join requires shared column names."),n=[r,r]}return n}function K7e(e,t,n,r){return n.length!==r.length&&Jn("Mismatched number of join keys"),[hL("join",e,n),hL("join",t,r)]}const vFt={aggregate:!1,window:!1},bFt={...vFt,index:1};function P_e(e,t,n,r,i={}){n=Yse(e,t,n);const s={join:[e,t]};let o;if(Zr(n)){const[a,u]=n.map(Ec);o=K7e(e,t,a,u),r||(r=_Ft(e,a,u,i))}else o=Ac({on:n},s).exprs[0],r||(r=[DS(),DS()]);return pFt(e,t,o,wFt(e,t,r,s,i&&i.suffix),i)}function _Ft(e,t,n,r){const i=[];t.forEach((o,a)=>Ja(o)&&o===n[a]?i.push(o):0);const s=MLe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${D0(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,DS()]:[DS(),s]}function wFt(e,t,n,r,i=[]){if(Zr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Kh("join",e,n[0],r)),u--&&(o=Kh("join",t,n[1],bFt)),u--&&(a=Ac(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&D_e(s.names,l,i[0]||"_1"),i[1]!==""&&D_e(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Ac(n,r)}function D_e(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function xFt(e,t,n,r={}){const i=new W7e(e.totalRows());return(Zr(n)?EFt:TFt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function EFt(e,t,n,[r,i]){const s=Y7e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function TFt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function O_e(e,t,n,r){n=Yse(e,t,n);const i=Zr(n)?K7e(e,t,...n.map(Ec)):Ac({on:n},{join:[e,t]}).exprs[0];return xFt(e,t,i,r)}function SFt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Df(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(Kr)));const l=Y7e(t,r),c=nC(["lr","rr","data"],"{"+e5(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Gx(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function AFt(e,t,n,r){return n=Yse(e,t,n),SFt(e,t,[hL("lookup",e,n[0]),hL("lookup",t,n[1])],Kh("lookup",t,r))}const nQ=(e,t)=>e??t;function CFt(e,t,n,r={}){const{keys:i,keyColumn:s}=IFt(e,t,r),o=nQ(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>rC(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(kFt(n,a,e.groups(),u))}function IFt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=nQ(n.sort,!0),s=nQ(n.keySeparator,"_"),o=Gx(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=rC(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function kFt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Df(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&H7e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function RFt(e,t,n,r){return CFt(e,Kh("fold",e,t),Kh("fold",e,n,{preparse:NFt,aggronly:!0}),r)}function NFt(e){e.forEach((t,n)=>t.field?e.set(n,o$e(t+"")):0)}function PFt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),Vse(e,Xg(e,t,n))}function $_e(e,t){return Gse(e,Ac(t,{table:e,aggronly:!0,window:!1}))}function DFt(e,t,n,r){return(t?r?$Ft:OFt:r?MFt:LFt)(e.length,e,n,r)}function OFt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*GA()|0];return t}function $Ft(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=q7e(Hse).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*GA())];return t}function LFt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*GA();s<e&&(t[s|0]=n[i])}return t}function MFt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(GA())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function FFt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=GA()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function BFt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):DFt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&FFt(u),e.reify(u)}function jFt(e,t,n={}){return BFt(e,UFt(e,t),zFt(e,n.weight),n)}const X7e=e=>t=>e.get(t)||0;function UFt(e,t){return El(t)?()=>t:X7e(Gse(e,Ac({size:t},{table:e,window:!1})).column("size"))}function zFt(e,t){return t==null?null:(t=El(t)?e.columnName(t):t,X7e(Ja(t)?e.column(t):Wse(e,Ac({w:t},{table:e}),{drop:!0}).column("w")))}function VFt(e,t){return Vse(e,Xg(e,t))}function HFt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Gx(e,r,n),l=Df(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=qFt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function qFt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Ec(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(Kr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function WFt(e,t,n){return HFt(e,Kh("spread",e,t),n)}function GFt(e,t){return e.concat(t).dedupe()}function YFt(e,t,n){return G7e(e,Kh("unroll",e,t),n&&n.drop?{...n,drop:Kh("unroll",e,n.drop).names}:n)}function KFt(e,t){return e.create({groups:XFt(e,t)})}function XFt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Gx(e,r,n);const o=V9(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function QFt(e,t){return KFt(e,Kh("groupby",e,t))}function JFt(e,t){return e.create({order:t})}const ZFt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function eBt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Ac(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([z9(p,{index:"a",op:o}),z9(p,{index:"b",op:a})])},window:!1}),l=rC(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=ZFt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function tBt(e,t){return JFt(e,nBt(e,t))}function nBt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Lu(o)&&!ps(o))for(const a in o)i(o[a]);else i(El(o)?Zw(s,e.columnName(o)):Ja(o)?Zw(s):ps(o)?s:Jn(`Invalid orderby field: ${s+""}`))}),eBt(e,r)}function rBt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Df();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>Kr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function iBt(e,t){const n=Df(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?V7e(e,t,r):[z7e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function sBt(e){return e.isGrouped()?e.create({groups:null}):e}function oBt(e){return e.isOrdered()?e.create({order:null}):e}const aBt={__antijoin:(e,t,n)=>O_e(e,t,n,{anti:!0}),__count:(e,t={})=>$_e(e,{[t.as||"count"]:a$e()}),__cross:(e,t,n,r)=>P_e(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:rBt,__dedupe:OMt,__derive:ZMt,__except:eFt,__filter:rFt,__fold:sFt,__impute:lFt,__intersect:fFt,__join:P_e,__lookup:AFt,__pivot:RFt,__relocate:j7e,__rename:PFt,__rollup:$_e,__sample:jFt,__select:VFt,__semijoin:O_e,__spread:WFt,__union:GFt,__unroll:YFt,__groupby:QFt,__orderby:tBt,__ungroup:sBt,__unorder:oBt,__reduce:iBt};Object.assign(tg.prototype,aBt);function Q7e(e,t){return tg.from(e,t)}function NT(e){return VF(e,{escape:!0,toString(){Jn("Escaped values can not be serialized.")}})}tg.prototype;var uBt="Expected a function",L_e=NaN,lBt="[object Symbol]",cBt=/^\s+|\s+$/g,fBt=/^[-+]0x[0-9a-f]+$/i,dBt=/^0b[01]+$/i,hBt=/^0o[0-7]+$/i,pBt=parseInt,mBt=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,gBt=typeof self=="object"&&self&&self.Object===Object&&self,yBt=mBt||gBt||Function("return this")(),vBt=Object.prototype,bBt=vBt.toString,_Bt=Math.max,wBt=Math.min,gq=function(){return yBt.Date.now()};function xBt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(uBt);t=M_e(t)||0,rQ(n)&&(c=!!n.leading,f="maxWait"in n,s=f?_Bt(M_e(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var A=r,C=i;return r=i=void 0,l=S,o=e.apply(C,A),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var A=S-u,C=S-l,N=t-A;return f?wBt(N,s-C):N}function g(S){var A=S-u,C=S-l;return u===void 0||A>=t||A<0||f&&C>=s}function y(){var S=gq();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(gq())}function x(){var S=gq(),A=g(S);if(r=arguments,i=this,u=S,A){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return x.cancel=b,x.flush=w,x}function rQ(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function EBt(e){return!!e&&typeof e=="object"}function TBt(e){return typeof e=="symbol"||EBt(e)&&bBt.call(e)==lBt}function M_e(e){if(typeof e=="number")return e;if(TBt(e))return L_e;if(rQ(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=rQ(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(cBt,"");var n=dBt.test(e);return n||hBt.test(e)?pBt(e.slice(2),n?2:8):fBt.test(e)?L_e:+e}var SBt=xBt;const uh=Rf(SBt);function J7e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=R.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=R.useMemo(()=>Cb(".2s"),[]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(Ko,{children:E.jsx(bi,{gap:3,children:E.jsx(Ue,{size:"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>E.jsxs("g",{transform:`translate(${n}, ${a})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),E.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const ABt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:J7e},Symbol.toStringTag,{value:"Module"})),yq=15;function Z7e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=R.useState([0,0]),[l,c]=R.useState(!1);return R.useEffect(()=>{const f=cr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<yq&&Math.abs(t(g[r.y])-p[1])<yq);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),E.jsx("circle",{style:{cursor:l?"pointer":"default"},r:yq,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const CBt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:Z7e},Symbol.toStringTag,{value:"Module"})),ys={top:15,left:100,right:15,bottom:70};function iQ({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=cf(),[c]=cf(),[f]=cf(),[d,h]=R.useState(!0),p=R.useMemo(()=>l-ys.left-ys.right,[l]),m=R.useMemo(()=>u-ys.top-ys.bottom,[u]),g=R.useMemo(()=>{const k=Array.from(new Set(s.map(D=>D[i.category])));return kb(hF).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=R.useMemo(()=>{const k=s.map(H=>+H[i.x]).filter(H=>H!==null),[D,L]=Wk(k),O=s.map(H=>+H[i.y]).filter(H=>H!==null),[B,q]=Wk(O);return{xMin:D,xMax:L,yMin:B,yMax:q}},[s,i.x,i.y]),x=R.useMemo(()=>{const k=b-y;return p<=0?null:i.dataType==="date"?Zre([ys.left,p+ys.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):xa([ys.left,p+ys.left]).domain([y-k/10,b+k/10]).nice()},[i.dataType,p,b,y]),S=R.useMemo(()=>{const k=w-v;return m<=0?null:xa([m+ys.top,ys.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),A=R.useMemo(()=>{if(!x||!S)return()=>null;if(r==="Axis Selection"){const k=$8e().extent([[ys.left,ys.top+m-5],[ys.left+p,ys.top+m+5]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[L.selection[0],null],[L.selection[1],null]],x,S,L.mode)}),D=L8e().extent([[ys.left-5,ys.top],[ys.left+5,ys.top+m]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[null,L.selection[0]],[null,L.selection[1]]],x,S,L.mode)});return c.current&&f.current&&(cr(f.current).call(D),cr(c.current).call(k),t.hasBrush||(cr(f.current).call(D.move,[S(w),S(v)]),cr(c.current).call(k.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),S(w)],[x(new Date("2015-12-31")),S(v)]],x,S,"drag"))),()=>{cr(f.current).call(D.move,[S(w),S(v)]),cr(c.current).call(k.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),S(w)],[x(new Date("2015-12-31")),S(v)]],x,S,"clear")}}if(r==="Rectangular Selection"){const k=M8e().extent([[ys.left,ys.top],[ys.left+p,ys.top+m]]).on("brush",D=>{D.sourceEvent!==void 0&&n([[D.selection[0][0],D.selection[0][1]],[D.selection[1][0],D.selection[1][1]]],x,S,D.mode)}).on("end",D=>{D.selection===null&&D.sourceEvent!==void 0&&(cr(a.current).call(k.move,null),e(null))});return cr(a.current).call(k),()=>{cr(a.current).call(k.move,null),n([[null,null],[null,null]],x,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[x(y),S(w)],[x(b),S(v)]],x,S,null),()=>n([[x(y),S(w)],[x(b),S(v)]],x,S,"clear")):r==="Paintbrush Selection"?()=>n([[x(y),S(w)],[x(b),S(v)]],x,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,x,w,v,S]),C=R.useMemo(()=>o.length===0?null:new Set(o),[o]),N=R.useMemo(()=>!x||!S?null:s.map((k,D)=>{if(k[i.x]===null||k[i.y]===null)return null;const L=i.dataType==="date"?x(new Date(k[i.x])):x(k[i.x]);return E.jsx("circle",{opacity:C&&!C.has(k[i.ids])?.3:1,r:3,fill:C&&!C.has(k[i.ids])?"lightgray":g(k[i.category]),cx:L,cy:S(k[i.y])},D)}),[C,g,s,i.category,i.dataType,i.ids,i.x,i.y,x,S]);return R.useEffect(()=>{r==="Axis Selection"&&t8e(".handle").style("fill","darkgrey")},[t,r]),E.jsxs($i,{children:[E.jsxs(bi,{children:[E.jsx(on,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),A==null||A()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?E.jsx(AM,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),E.jsxs(bi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[E.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[x&&S?E.jsxs("g",{children:[E.jsx(J7e,{yScale:S,label:i.y,horizontalPosition:ys.left,xRange:x.range()}),E.jsx(Tie,{xScale:x,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+ys.top,label:i.x,ticks:x.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:x(k)}))})]}):null,N,E.jsx("g",{id:"brushXRef",ref:c}),E.jsx("g",{id:"brushYRef",ref:f}),x&&S&&r==="Paintbrush Selection"?E.jsx(Z7e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:x,yScale:S}):null]}),r==="Slider Selection"&&x&&S?E.jsxs($i,{style:{flexGrow:1},gap:50,children:[E.jsxs($i,{gap:0,children:[E.jsx(Ue,{children:i.x}),E.jsx(aS,{minRange:1,label:null,min:x.domain()[0],max:x.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[x(k[0]),t.y1],[x(k[1]),t.y2]],x,S,"drag")},style:{width:"300px"},marks:x.ticks(5).map(k=>({value:k,label:k})),value:[x.invert(t.x1),x.invert(t.x2)]})]}),E.jsxs($i,{gap:0,children:[E.jsx(Ue,{children:i.y}),E.jsx(aS,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:k=>{n([[t.x1,S(k[1])],[t.x2,S(k[0])]],x,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(k=>({value:k,label:k})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const IBt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:iQ,default:iQ},Symbol.toStringTag,{value:"Module"}));function F_e({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=R.useState(null),[s,o]=R.useState(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]});R.useEffect(()=>{o(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]})},[n]);const[a,u]=R.useState(null);R.useEffect(()=>{U8e(`./data/${e.dataset}.csv`).then(y=>{u(y)})},[e]);const l=R.useMemo(()=>a?Q7e(a):null,[a]),{actions:c,trrack:f}=R.useMemo(()=>{const y=Wx.create(),v=y.register("brush",(A,C)=>(A.all={brush:C},A)),b=y.register("brushMove",(A,C)=>(A.all={brush:C},A)),w=y.register("brushResize",(A,C)=>(A.all={brush:C},A)),x=y.register("brushClear",(A,C)=>(A.all={brush:C},A)),S=VR({registry:y,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:v,brushMove:b,brushResize:w,clearBrush:x},trrack:S}},[]),d=R.useCallback((y,v)=>{y==="drag"?f.apply("Move Brush",c.brushMove(v)):y==="handle"&&f.apply("Brush",c.brush(v))},[c,f]),h=R.useMemo(()=>uh(d,100,{maxWait:100}),[d]),p=R.useCallback((y,v,b,w,x)=>{if(!v||!b)return;const S=v.invert(y[0][0]||s.x1),A=v.invert(y[1][0]||s.x2),C=b.invert(y[1][1]||s.y2),N=b.invert(y[0][1]||s.y1);let k=null;if(w==="clear")k=l;else if(x){const L=new Set(x);k=l.filter(NT(O=>L.has(O[e.ids])))}else e.brushType==="Axis Selection"?k=l.filter(NT(L=>new Date(L[e.x])>=new Date(S)&&new Date(L[e.x])<=new Date(A)&&L[e.y]>=C&&L[e.y]<=N)):k=l.filter(NT(L=>L[e.x]>=S&&L[e.x]<=A&&L[e.y]>=C&&L[e.y]<=N));const D={x1:y[0][0]||(s==null?void 0:s.x1)||0,x2:y[1][0]||(s==null?void 0:s.x2)||0,y1:y[0][1]||(s==null?void 0:s.y1)||0,y2:y[1][1]||(s==null?void 0:s.y2)||0,hasBrush:w!=="clear",ids:w!=="clear"?k==null?void 0:k.array("id"):[]};o(D),w==="drag"||w==="handle"?h(w,D):w==="clear"&&f.apply("Clear Brush",c.clearBrush(D)),i(k),t({status:!0,provenanceGraph:f.graph.backend,answers:{}})},[s,l,e,f,t,h,c]),m=R.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():l?l==null?void 0:l.groupby(e.category).count():null,[r,l,e.category]),g=R.useCallback(y=>{i(y)},[]);return a?E.jsxs($i,{gap:"xs",children:[E.jsx(iQ,{brushedPoints:s==null?void 0:s.ids,data:a,params:e,brushType:e.brushType,setBrushedSpace:p,brushState:s,setFilteredTable:g}),E.jsx(DX,{data:a,parameters:e,barsTable:m})]}):E.jsx(Pc,{})}const kBt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:F_e,default:F_e},Symbol.toStringTag,{value:"Module"})),RBt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function eMe({data:e,xScale:t,yScale:n,height:r}){return E.jsx("g",{children:e.map((i,s)=>E.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const NBt=Object.freeze(Object.defineProperty({__proto__:null,Bars:eMe},Symbol.toStringTag,{value:"Module"}));function Kse({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=R.useMemo(()=>{const o=xa().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsxs("g",{transform:`translate(0,${a})`,children:[E.jsx("line",{x2:`${r}`,stroke:"currentColor"}),E.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const PBt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:Kse},Symbol.toStringTag,{value:"Module"}));function tMe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=R.useMemo(()=>{const o=zA().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsx("g",{transform:`translate(${a}, 10)`,children:E.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const DBt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:tMe},Symbol.toStringTag,{value:"Module"})),OBt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function $Bt({parameters:e}){const[n,r]=WA(OBt),i=zA().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=xa().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return E.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:E.jsx("svg",{width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[E.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:E.jsx(tMe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),E.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:E.jsx(Kse,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),E.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:E.jsx(eMe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const LBt=Object.freeze(Object.defineProperty({__proto__:null,default:$Bt},Symbol.toStringTag,{value:"Module"}));function nMe({data:e}){return E.jsx("g",{children:e.map(({bubble:t},n)=>E.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const MBt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:nMe},Symbol.toStringTag,{value:"Module"}));function Xse({positions:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const FBt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:Xse},Symbol.toStringTag,{value:"Module"})),BBt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},jBt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=BDe().size([t-10,n-10]).padding(1.5),o=iF(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},UBt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function zBt({parameters:e}){const[t,n]=WA(BBt),r=jBt(e,n.width,n.height),i=UBt(r,e.selectedIndices);return E.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:E.jsx("svg",{width:n.width,height:n.height,children:E.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[E.jsx(nMe,{data:r}),E.jsx(Xse,{positions:i})]})})})}const VBt=Object.freeze(Object.defineProperty({__proto__:null,default:zBt},Symbol.toStringTag,{value:"Module"}));function rMe({arcs:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const HBt=Object.freeze(Object.defineProperty({__proto__:null,Slices:rMe},Symbol.toStringTag,{value:"Module"}));function iMe({positions:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("g",{transform:`translate(${t.centroid()})`,children:E.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const qBt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:iMe},Symbol.toStringTag,{value:"Module"})),WBt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},GBt=UNt().value(e=>e.value),P3=150;function YBt({parameters:e}){const[t,n]=WA(WBt),r=GBt(e.data),i=r.map(o=>pX().innerRadius(0).outerRadius(P3).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>pX().outerRadius(P3+10).innerRadius(P3+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return E.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:E.jsx("svg",{width:n.width,height:n.height,children:E.jsxs("g",{transform:`translate(${[n.marginLeft+P3,n.marginTop+P3].join(",")})`,children:[E.jsx(rMe,{arcs:i}),E.jsx(iMe,{positions:s})]})})})}const KBt=Object.freeze(Object.defineProperty({__proto__:null,default:YBt},Symbol.toStringTag,{value:"Module"}));function sMe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=R.useMemo(()=>{const o=xa().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsxs("g",{transform:`translate(${a}, 0)`,children:[E.jsx("line",{y2:`${r}`,stroke:"currentColor"}),E.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const XBt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:sMe},Symbol.toStringTag,{value:"Module"}));function oMe({data:e,barWidth:t,yScale:n}){return E.jsx("g",{children:e.map((r,i)=>E.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const QBt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:oMe},Symbol.toStringTag,{value:"Module"})),JBt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function ZBt({parameters:e}){const[n,r]=WA(JBt),i=zA().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=xa().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return lPt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return E.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:E.jsx("svg",{width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[E.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:E.jsx(sMe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),E.jsx("g",{transform:"translate(0, 0)",children:E.jsx(Kse,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),E.jsxs("g",{transform:"translate(0, 0)",children:[E.jsx(oMe,{data:c,barWidth:f,yScale:s}),E.jsx(Xse,{positions:d})]})]})})})}const ejt=Object.freeze(Object.defineProperty({__proto__:null,default:ZBt},Symbol.toStringTag,{value:"Module"}));function B_e({rankings:e}){return E.jsx("div",{style:{fontFamily:"sans-serif"},children:E.jsx("div",{children:e.map((t,n)=>E.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function tjt({parameters:e,setAnswer:t}){const n=Od(),[r,i]=R.useState(""),{goToNextStep:s,isNextDisabled:o}=SPe(),a=R.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=R.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=R.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=R.useCallback(()=>{o||s()},[o,s]);R.useEffect(()=>{const h=Zat([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),E.jsxs("div",{children:[E.jsxs(nf,{children:[E.jsxs(nf.Col,{span:2,children:[E.jsx(B_e,{rankings:a==="r1"?e.data.r1:e.data.r2}),E.jsx(on,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?E.jsx(fge,{}):"Select this ranking"}),l&&r&&E.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),E.jsxs(nf.Col,{span:2,children:[E.jsx(B_e,{rankings:a==="r1"?e.data.r2:e.data.r1}),E.jsx(on,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?E.jsx(fge,{}):"Select this ranking"}),l&&r&&E.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&E.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const njt=Object.freeze(Object.defineProperty({__proto__:null,default:tjt},Symbol.toStringTag,{value:"Module"})),rjt=R.createContext(null);function Su(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let t5=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const e8={decode:function(e,t){return Su(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function aMe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(aMe(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function j_e(e,t,n){const r=aMe(e,t||{});return n==null||n.appendChild(r),r}var ijt=Object.freeze({__proto__:null,createElement:j_e,default:j_e});const sjt={fetchBlob:function(e,t,n){return Su(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){Su(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>Su(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>Su(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class ojt extends t5{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Su(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}let sQ=class oQ extends t5{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=x=>{if(x.preventDefault(),x.stopPropagation(),u&&Date.now()-m<a)return;const S=x.clientX,A=x.clientY,C=S-d,N=A-h;if(p||Math.abs(C)>s||Math.abs(N)>s){const k=t.getBoundingClientRect(),{left:D,top:L}=k;p||(r==null||r(d-D,h-L),p=!0),n(C,N,S-D,A-L),d=S,h=A}},y=x=>{if(p){const S=x.clientX,A=x.clientY,C=t.getBoundingClientRect(),{left:N,top:k}=C;i==null||i(S-N,A-k)}l()},v=x=>{x.relatedTarget&&x.relatedTarget!==document.documentElement||y(x)},b=x=>{p&&(x.stopPropagation(),x.preventDefault())},w=x=>{p&&x.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",b,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",w),setTimeout(()=>{document.removeEventListener("click",b,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,b=0;for(let w=0;w<=a;w++){const x=Math.round(w*m);if(x>y){const C=Math.round(v*c*i),N=C+Math.round(b*c*i)||1;let k=c-C;n.barAlign==="top"?k=0:n.barAlign==="bottom"&&(k=l-N),r[g](y*(d+h),k,d,N,p),y=x,v=0,b=0}const S=Math.abs(s[w]||0),A=Math.abs(o[w]||0);S>v&&(v=S),A>b&&(b=A)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(oQ.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);c%y!=0&&(c=Math.floor(c/y)*y)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const y=g*c,v=Math.min(l-y,c);if(v<=0)return;const b=t.map(w=>{const x=Math.floor(y/l*w.length),S=Math.floor((y+v)/l*w.length);return w.slice(x,S)});this.renderSingleCanvas(b,n,v,i,y,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:y}=this.scrollContainer,v=Math.floor(y/l*h);Object.keys(f).length>oQ.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(v-1),d(v),d(v+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return Su(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return Su(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};sQ.MAX_CANVAS_WIDTH=8e3,sQ.MAX_NODES=10;class ajt extends t5{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class U_e extends t5{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Su(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Su(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return Su(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const ujt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class _6 extends ojt{static create(t){return new _6(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new U_e:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},ujt,t),this.timer=new ajt;const r=n?void 0:this.getMediaElement();this.renderer=new sQ(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=e8.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=e8.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return Su(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield sjt.fetchBlob(t,u,a)}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof U_e&&(a.duration=o)}if(r)this.decodedData=e8.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield e8.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return Su(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return Su(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return Su(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Su(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}_6.BasePlugin=class extends t5{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},_6.dom=ijt;function ljt(e){return _6.create(e)}function cjt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const z_e=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),fjt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:z_e(i),enabled:z_e(s)}};function V_e(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=cjt(i)}return n}function djt({container:e,plugins:t=[],onMount:n,...r}){const i=R.useRef(!1),[s,o]=R.useState({}),a=R.useRef([]),[u,l]=R.useState(null);return R.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=V_e(s,t);a.current=Object.keys(f);const d=ljt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),R.useEffect(()=>{if(u){const c=V_e(s,t),{disabled:f,enabled:d}=fjt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function uMe({children:e,plugins:t=[],onMount:n,...r}){const i=djt({plugins:t,onMount:n,...r});return ni.createElement(rjt.Provider,{value:i},e)}const lMe=({id:e="waveform",children:t})=>ni.createElement("div",{id:e},t);function vq(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let cMe=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},hjt=class extends cMe{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class pjt extends cMe{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const mjt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Qse extends hjt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new pjt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new Qse(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const y=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),y)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return vq(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return vq(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||mjt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return vq(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function fMe({width:e=70,height:t=36}){const n=R.useRef(null),r=R.useRef(null),[i,s]=R.useState(!1);R.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(Qse.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=R.useCallback(a=>{n.current=a,s(!0)},[]);return E.jsx(ke,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:E.jsx(uMe,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:E.jsx(lMe,{id:"waveform",height:t})})})}function H_e({setAnswer:e}){return R.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,s=i.createMediaStreamSource(n),o=i.createAnalyser();o.minDecibels=-45,s.connect(o);const a=o.frequencyBinCount,u=new Uint8Array(a);let l=!1;const c=()=>{if(!l){o.getByteFrequencyData(u);for(let f=0;f<a;f+=1)u[f]>0&&(l=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),E.jsx(Ko,{style:{height:"70%",width:"100%"},children:E.jsxs($i,{children:[E.jsx(Ue,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),E.jsx(Ue,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),E.jsx(Ue,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),E.jsx(Ko,{children:E.jsx(fMe,{height:200,width:400})})]})})}const gjt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:H_e,default:H_e},Symbol.toStringTag,{value:"Module"}));function yjt(){return E.jsx("div",{children:"test react file"})}const vjt=Object.freeze(Object.defineProperty({__proto__:null,default:yjt},Symbol.toStringTag,{value:"Module"}));function bjt({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=R.useRef(null),o=10,a=R.useCallback(u=>{const l=cr("#Circle"),c=cr("#click_svg"),f=q$(u,c.node()),d=[+l.attr("cx"),+l.attr("cy")],h=`${Math.round(Math.sqrt((f[0]-d[0])**2+(f[1]-d[1])**2))}px`;t({status:!0,answers:{[n]:h}})},[t,n]);return E.jsx("div",{className:"Chart__wrapper",ref:s,onClick:a,style:{height:"650px"},children:E.jsx("svg",{id:"click_svg",width:400,height:400,children:E.jsx("circle",{id:"Circle",cx:r,cy:i,r:o,stroke:"black",strokeWidth:"2",fill:"white"})})})}const _jt=Object.freeze(Object.defineProperty({__proto__:null,default:bjt},Symbol.toStringTag,{value:"Module"}));function Jse({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=R.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=R.useCallback(c=>(s?BR("%B"):Cb(".2s"))(c),[s]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:E.jsx(Ko,{children:E.jsx(bi,{gap:3,children:E.jsx(Ue,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?E.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>E.jsxs("g",{transform:`translate(${f}, ${n})`,children:[E.jsx("line",{y2:"6",stroke:"currentColor"}),o?E.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,E.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:E.jsx(Ko,{children:E.jsx(us,{withinPortal:!0,label:c,children:E.jsx(Ue,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const wjt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:Jse},Symbol.toStringTag,{value:"Module"}));function dMe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=R.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(Ko,{children:E.jsx(bi,{gap:3,children:E.jsx(Ue,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>E.jsxs("g",{transform:`translate(${n}, ${l})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),s?E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,E.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:E.jsx("foreignObject",{width:a,height:20,children:E.jsx(bi,{style:{width:"100%",height:"100%"},justify:"right",children:E.jsx(Ue,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const xjt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:dMe},Symbol.toStringTag,{value:"Module"})),Wf={top:15,left:100,right:50,bottom:50};function aQ({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=cf(),o=R.useMemo(()=>s-Wf.left-Wf.right,[s]),a=R.useMemo(()=>i-Wf.top-Wf.bottom,[i]),u=R.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return kb(hF).domain(d)},[n,t.category]),l=R.useMemo(()=>e?xa([Wf.left,o+Wf.left]).domain([0,xg(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=R.useMemo(()=>e?zA([Wf.top,a+Wf.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=R.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:E.jsxs("g",{children:[E.jsx("rect",{x:Wf.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Wf.left},h),E.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?E.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E.jsx(Jse,{xScale:l,yRange:c.range(),vertPosition:a+Wf.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?E.jsx(dMe,{yScale:c,horizontalPosition:Wf.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):E.jsx(Pc,{})}const Ejt=Object.freeze(Object.defineProperty({__proto__:null,Bar:aQ,default:aQ},Symbol.toStringTag,{value:"Module"}));function hMe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=R.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=R.useMemo(()=>Cb(".2s"),[]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(Ko,{children:E.jsx(bi,{gap:3,children:E.jsx(Ue,{size:"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>E.jsxs("g",{transform:`translate(${n}, ${a})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),E.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const Tjt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:hMe},Symbol.toStringTag,{value:"Module"})),bq=15;function pMe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=R.useState([0,0]),[l,c]=R.useState(!1);return R.useEffect(()=>{const f=cr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<bq&&Math.abs(t(g[r.y])-p[1])<bq);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),E.jsx("circle",{style:{cursor:l?"pointer":"default"},r:bq,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const Sjt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:pMe},Symbol.toStringTag,{value:"Module"})),vs={top:15,left:100,right:15,bottom:70};function uQ({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=cf(),[c]=cf(),[f]=cf(),[d,h]=R.useState(!0),p=R.useMemo(()=>l-vs.left-vs.right,[l]),m=R.useMemo(()=>u-vs.top-vs.bottom,[u]),g=R.useMemo(()=>{const k=Array.from(new Set(s.map(D=>D[i.category])));return kb(hF).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=R.useMemo(()=>{const k=s.map(H=>+H[i.x]).filter(H=>H!==null),[D,L]=Wk(k),O=s.map(H=>+H[i.y]).filter(H=>H!==null),[B,q]=Wk(O);return{xMin:D,xMax:L,yMin:B,yMax:q}},[s,i.x,i.y]),x=R.useMemo(()=>{const k=b-y;return p<=0?null:i.dataType==="date"?Zre([vs.left,p+vs.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):xa([vs.left,p+vs.left]).domain([y-k/10,b+k/10]).nice()},[i.dataType,p,b,y]),S=R.useMemo(()=>{const k=w-v;return m<=0?null:xa([m+vs.top,vs.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),A=R.useMemo(()=>{if(!x||!S)return()=>null;if(r==="Axis Selection"){const k=$8e().extent([[vs.left,vs.top+m-5],[vs.left+p,vs.top+m+5]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[L.selection[0],null],[L.selection[1],null]],x,S,L.mode)}),D=L8e().extent([[vs.left-5,vs.top],[vs.left+5,vs.top+m]]).on("brush end",L=>{L.sourceEvent!==void 0&&n([[null,L.selection[0]],[null,L.selection[1]]],x,S,L.mode)});return c.current&&f.current&&(cr(f.current).call(D),cr(c.current).call(k),t.hasBrush||(cr(f.current).call(D.move,[S(w),S(v)]),cr(c.current).call(k.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),S(w)],[x(new Date("2015-12-31")),S(v)]],x,S,"drag"))),()=>{cr(f.current).call(D.move,[S(w),S(v)]),cr(c.current).call(k.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),S(w)],[x(new Date("2015-12-31")),S(v)]],x,S,"clear")}}if(r==="Rectangular Selection"){const k=M8e().extent([[vs.left,vs.top],[vs.left+p,vs.top+m]]).on("brush",D=>{D.sourceEvent!==void 0&&n([[D.selection[0][0],D.selection[0][1]],[D.selection[1][0],D.selection[1][1]]],x,S,D.mode)}).on("end",D=>{D.selection===null&&D.sourceEvent!==void 0&&(cr(a.current).call(k.move,null),e(null))});return cr(a.current).call(k),()=>{cr(a.current).call(k.move,null),n([[null,null],[null,null]],x,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[x(y),S(w)],[x(b),S(v)]],x,S,null),()=>n([[x(y),S(w)],[x(b),S(v)]],x,S,"clear")):r==="Paintbrush Selection"?()=>n([[x(y),S(w)],[x(b),S(v)]],x,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,x,w,v,S]),C=R.useMemo(()=>o.length===0?null:new Set(o),[o]),N=R.useMemo(()=>!x||!S?null:s.map((k,D)=>{if(k[i.x]===null||k[i.y]===null)return null;const L=i.dataType==="date"?x(new Date(k[i.x])):x(k[i.x]);return E.jsx("circle",{opacity:C&&!C.has(k[i.ids])?.3:1,r:3,fill:C&&!C.has(k[i.ids])?"lightgray":g(k[i.category]),cx:L,cy:S(k[i.y])},D)}),[C,g,s,i.category,i.dataType,i.ids,i.x,i.y,x,S]);return R.useEffect(()=>{r==="Axis Selection"&&t8e(".handle").style("fill","darkgrey")},[t,r]),E.jsxs($i,{children:[E.jsxs(bi,{children:[E.jsx(on,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),A==null||A()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?E.jsx(AM,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),E.jsxs(bi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[E.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[x&&S?E.jsxs("g",{children:[E.jsx(hMe,{yScale:S,label:i.y,horizontalPosition:vs.left,xRange:x.range()}),E.jsx(Jse,{xScale:x,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+vs.top,label:i.x,ticks:x.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:x(k)}))})]}):null,N,E.jsx("g",{id:"brushXRef",ref:c}),E.jsx("g",{id:"brushYRef",ref:f}),x&&S&&r==="Paintbrush Selection"?E.jsx(pMe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:x,yScale:S}):null]}),r==="Slider Selection"&&x&&S?E.jsxs($i,{style:{flexGrow:1},gap:50,children:[E.jsxs($i,{gap:0,children:[E.jsx(Ue,{children:i.x}),E.jsx(aS,{minRange:1,label:null,min:x.domain()[0],max:x.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[x(k[0]),t.y1],[x(k[1]),t.y2]],x,S,"drag")},style:{width:"300px"},marks:x.ticks(5).map(k=>({value:k,label:k})),value:[x.invert(t.x1),x.invert(t.x2)]})]}),E.jsxs($i,{gap:0,children:[E.jsx(Ue,{children:i.y}),E.jsx(aS,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:k=>{n([[t.x1,S(k[1])],[t.x2,S(k[0])]],x,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(k=>({value:k,label:k})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const Ajt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:uQ,default:uQ},Symbol.toStringTag,{value:"Module"}));function q_e({parameters:e,setAnswer:t}){const[n,r]=R.useState(null),[i,s]=R.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=R.useState(null);R.useEffect(()=>{U8e(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=R.useMemo(()=>o?Q7e(o):null,[o]),{actions:l,trrack:c}=R.useMemo(()=>{const g=Wx.create(),y=g.register("brush",(S,A)=>(S.all={brush:A},S)),v=g.register("brushMove",(S,A)=>(S.all={brush:A},S)),b=g.register("brushResize",(S,A)=>(S.all={brush:A},S)),w=g.register("brushClear",(S,A)=>(S.all={brush:A},S)),x=VR({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:x}},[]),f=R.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=R.useMemo(()=>uh(f,100,{maxWait:100}),[f]),h=R.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const x=y.invert(g[0][0]||i.x1),S=y.invert(g[1][0]||i.x2),A=v.invert(g[1][1]||i.y2),C=v.invert(g[0][1]||i.y1);let N=null;if(b==="clear")N=u;else if(w){const D=new Set(w);N=u.filter(NT(L=>D.has(L[e.ids])))}else e.brushType==="Axis Selection"?N=u.filter(NT(D=>new Date(D[e.x])>=new Date(x)&&new Date(D[e.x])<=new Date(S)&&D[e.y]>=A&&D[e.y]<=C)):N=u.filter(NT(D=>D[e.x]>=x&&D[e.x]<=S&&D[e.y]>=A&&D[e.y]<=C));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?N==null?void 0:N.array("id"):[]};s(k),b==="drag"||b==="handle"?d(b,k):b==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(N),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=R.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=R.useCallback(g=>{r(g)},[]);return o?E.jsxs($i,{gap:"xs",children:[E.jsx(uQ,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),E.jsx(aQ,{data:o,parameters:e,barsTable:p})]}):E.jsx(Pc,{})}const Cjt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:q_e,default:q_e},Symbol.toStringTag,{value:"Module"})),Ijt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),kjt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),mMe=R.createContext(null);function gMe({width:e,height:t,margin:n,xDomain:r,yDomain:i,children:s}){const o=R.useMemo(()=>{const a=xa().domain(r).range([n.left,e-n.right]),u=xa().domain(i).range([t-n.bottom,n.top]);return{xScale:a,yScale:u,width:e,height:t,margin:n}},[e,t,n,r,i]);return E.jsx(mMe.Provider,{value:o,children:s})}function Yx(){const e=R.useContext(mMe);if(!e)throw new Error("useScales must be used within a ScalesProvider");return e}const Rjt=Object.freeze(Object.defineProperty({__proto__:null,ScalesProvider:gMe,useScales:Yx},Symbol.toStringTag,{value:"Module"}));function yMe({data:e,strokeColor:t="currentColor",strokeWidth:n=2}){const{xScale:r,yScale:i}=Yx();if(!(e!=null&&e.length)||!r||!i)return null;const s=gF().x(o=>r(o.x)).y(o=>i(o.y)).defined(o=>!Number.isNaN(o.x)&&!Number.isNaN(o.y));return E.jsx("path",{d:s(e)||"",fill:"none",stroke:t,strokeWidth:n,"data-source":"Line"})}const Njt=Object.freeze(Object.defineProperty({__proto__:null,Line:yMe},Symbol.toStringTag,{value:"Module"}));function vMe({position:e}){return e?E.jsx("circle",{cx:e.x,cy:e.y,r:10,fill:"#666",stroke:"none",opacity:.8,pointerEvents:"none"}):null}const Pjt=Object.freeze(Object.defineProperty({__proto__:null,default:vMe},Symbol.toStringTag,{value:"Module"}));function bMe({point:e}){const{xScale:t,yScale:n}=Yx();return e?E.jsx("circle",{cx:t(e.x),cy:n(e.y),r:4,fill:"#ff0000",pointerEvents:"none","data-source":"ClickMarker"}):null}const Djt=Object.freeze(Object.defineProperty({__proto__:null,default:bMe},Symbol.toStringTag,{value:"Module"}));function _Me({point:e}){const{xScale:t,yScale:n}=Yx();if(!e)return null;const r=e.pixelX!==void 0?e.pixelX:t(e.x),i=e.pixelY!==void 0?e.pixelY:n(e.y);return E.jsx("circle",{cx:r,cy:i,r:5,fill:"#2563eb",stroke:"#ffffff",strokeWidth:1.5,opacity:.8,pointerEvents:"none","data-source":"NearestPointMarker"})}const Ojt=Object.freeze(Object.defineProperty({__proto__:null,default:_Me},Symbol.toStringTag,{value:"Module"}));function wMe({xValue:e,yValue:t,tangentLine:n}){const{xScale:r,yScale:i,width:s,height:o,margin:a}=Yx(),u=()=>e==null?null:E.jsx("line",{x1:r(e),x2:r(e),y1:a.top,y2:o-a.bottom,stroke:"#666",strokeWidth:1,strokeDasharray:"4","data-source":"Guidelines-vertical"}),l=()=>t==null?null:E.jsx("line",{x1:a.left,x2:s-a.right,y1:i(t),y2:i(t),stroke:"#666",strokeWidth:1,strokeDasharray:"4","data-source":"Guidelines-horizontal"}),c=()=>{if(!n)return null;const f=(r.domain()[1]-r.domain()[0])*.2,d=n.point.x-f,h=n.point.y-f*n.slope,p=n.point.x+f,m=n.point.y+f*n.slope;return E.jsx("line",{x1:r(d),y1:i(h),x2:r(p),y2:i(m),stroke:"#666",strokeWidth:1,strokeDasharray:"4","data-source":"Guidelines-tangent"})};return E.jsxs("g",{children:[u(),l(),c()]})}const $jt=Object.freeze(Object.defineProperty({__proto__:null,default:wMe},Symbol.toStringTag,{value:"Module"}));function xMe({distributionData:e,showPDF:t=!0,isTraining:n=!1,strokeColor:r="#2563eb",strokeWidth:i=2,axisLabels:s,selectedPoint:o,nearestPoint:a,guidelines:u,cursor:l,children:c,onClick:f,onMouseMove:d,onMouseLeave:h}){const{xScale:p,yScale:m,width:g,height:y,margin:v}=Yx(),b=R.useRef(null),w=R.useRef(null),x=R.useMemo(()=>{if(!(e!=null&&e.xVals)||!(e!=null&&e.pdfVals)||!(e!=null&&e.cdfVals))return[];const A=t?e.pdfVals:e.cdfVals;return e.xVals.map((C,N)=>({x:C,y:A[N]}))},[e,t]);R.useEffect(()=>{!p||!m||!b.current||!w.current||(b.current&&cr(b.current).call(vre(p)).attr("transform",`translate(0,${y-v.bottom})`).selectAll("text").style("font-size","12px"),w.current&&cr(w.current).call(bre(m)).attr("transform",`translate(${v.left},0)`).selectAll("text").style("font-size","12px"))},[p,m,v,y]);const S=R.useMemo(()=>s?E.jsxs(E.Fragment,{children:[s.x&&E.jsx("text",{x:g/2,y:y-5,textAnchor:"middle",style:{fontSize:"12px",fill:"#666"},children:s.x}),s.y&&E.jsx("text",{x:-y/2,y:15,textAnchor:"middle",transform:"rotate(-90)",style:{fontSize:"12px",fill:"#666"},children:s.y})]}):null,[s,g,y]);return E.jsx("svg",{width:g,height:y,style:{cursor:"none"},onClick:f,onMouseMove:d,onMouseLeave:h,children:E.jsxs("g",{children:[E.jsx(yMe,{data:x,strokeColor:r,strokeWidth:i}),E.jsx("g",{ref:b}),E.jsx("g",{ref:w}),S,l&&E.jsx(vMe,{position:{x:l.x,y:l.y}}),(l==null?void 0:l.isNearCurve)&&a&&E.jsx(_Me,{point:a}),o&&E.jsx(bMe,{point:o}),n&&u&&E.jsx(wMe,{xValue:u.x,yValue:u.y,tangentLine:u.tangentLine}),c]})})}const Ljt=Object.freeze(Object.defineProperty({__proto__:null,default:xMe},Symbol.toStringTag,{value:"Module"}));var EMe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Jt,function(){var n=function(r,i){var s=Array.prototype.concat,o=Array.prototype.slice,a=Object.prototype.toString;function u(v,b){var w=v>b?v:b;return r.pow(10,17-~~(r.log(w>0?w:-w)*r.LOG10E))}var l=Array.isArray||function(b){return a.call(b)==="[object Array]"};function c(v){return a.call(v)==="[object Function]"}function f(v){return typeof v=="number"?v-v===0:!1}function d(v){return s.apply([],v)}function h(){return new h._init(arguments)}h.fn=h.prototype,h._init=function(b){if(l(b[0]))if(l(b[0][0])){c(b[1])&&(b[0]=h.map(b[0],b[1]));for(var w=0;w<b[0].length;w++)this[w]=b[0][w];this.length=b[0].length}else this[0]=c(b[1])?h.map(b[0],b[1]):b[0],this.length=1;else if(f(b[0]))this[0]=h.seq.apply(null,b),this.length=1;else{if(b[0]instanceof h)return h(b[0].toArray());this[0]=[],this.length=1}return this},h._init.prototype=h.prototype,h._init.constructor=h,h.utils={calcRdx:u,isArray:l,isFunction:c,isNumber:f,toVector:d},h._random_fn=r.random,h.setRandom=function(b){if(typeof b!="function")throw new TypeError("fn is not a function");h._random_fn=b},h.extend=function(b){var w,x;if(arguments.length===1){for(x in b)h[x]=b[x];return this}for(w=1;w<arguments.length;w++)for(x in arguments[w])b[x]=arguments[w][x];return b},h.rows=function(b){return b.length||1},h.cols=function(b){return b[0].length||1},h.dimensions=function(b){return{rows:h.rows(b),cols:h.cols(b)}},h.row=function(b,w){return l(w)?w.map(function(x){return h.row(b,x)}):b[w]},h.rowa=function(b,w){return h.row(b,w)},h.col=function(b,w){if(l(w)){var x=h.arange(b.length).map(function(){return new Array(w.length)});return w.forEach(function(C,N){h.arange(b.length).forEach(function(k){x[k][N]=b[k][C]})}),x}for(var S=new Array(b.length),A=0;A<b.length;A++)S[A]=[b[A][w]];return S},h.cola=function(b,w){return h.col(b,w).map(function(x){return x[0]})},h.diag=function(b){for(var w=h.rows(b),x=new Array(w),S=0;S<w;S++)x[S]=[b[S][S]];return x},h.antidiag=function(b){for(var w=h.rows(b)-1,x=new Array(w),S=0;w>=0;w--,S++)x[S]=[b[S][w]];return x},h.transpose=function(b){var w=[],x,S,A,C,N;for(l(b[0])||(b=[b]),S=b.length,A=b[0].length,N=0;N<A;N++){for(x=new Array(S),C=0;C<S;C++)x[C]=b[C][N];w.push(x)}return w.length===1?w[0]:w},h.map=function(b,w,x){var S,A,C,N,k;for(l(b[0])||(b=[b]),A=b.length,C=b[0].length,N=x?b:new Array(A),S=0;S<A;S++)for(N[S]||(N[S]=new Array(C)),k=0;k<C;k++)N[S][k]=w(b[S][k],S,k);return N.length===1?N[0]:N},h.cumreduce=function(b,w,x){var S,A,C,N,k;for(l(b[0])||(b=[b]),A=b.length,C=b[0].length,N=x?b:new Array(A),S=0;S<A;S++)for(N[S]||(N[S]=new Array(C)),C>0&&(N[S][0]=b[S][0]),k=1;k<C;k++)N[S][k]=w(N[S][k-1],b[S][k]);return N.length===1?N[0]:N},h.alter=function(b,w){return h.map(b,w,!0)},h.create=function(b,w,x){var S=new Array(b),A,C;for(c(w)&&(x=w,w=b),A=0;A<b;A++)for(S[A]=new Array(w),C=0;C<w;C++)S[A][C]=x(A,C);return S};function p(){return 0}h.zeros=function(b,w){return f(w)||(w=b),h.create(b,w,p)};function m(){return 1}h.ones=function(b,w){return f(w)||(w=b),h.create(b,w,m)},h.rand=function(b,w){return f(w)||(w=b),h.create(b,w,h._random_fn)};function g(v,b){return v===b?1:0}h.identity=function(b,w){return f(w)||(w=b),h.create(b,w,g)},h.symmetric=function(b){var w=b.length,x,S;if(b.length!==b[0].length)return!1;for(x=0;x<w;x++)for(S=0;S<w;S++)if(b[S][x]!==b[x][S])return!1;return!0},h.clear=function(b){return h.alter(b,p)},h.seq=function(b,w,x,S){c(S)||(S=!1);var A=[],C=u(b,w),N=(w*C-b*C)/((x-1)*C),k=b,D;for(D=0;k<=w&&D<x;D++,k=(b*C+N*C*D)/C)A.push(S?S(k,D):k);return A},h.arange=function(b,w,x){var S=[],A;if(x=x||1,w===i&&(w=b,b=0),b===w||x===0)return[];if(b<w&&x<0)return[];if(b>w&&x>0)return[];if(x>0)for(A=b;A<w;A+=x)S.push(A);else for(A=b;A>w;A+=x)S.push(A);return S},h.slice=function(){function v(w,x,S,A){var C,N=[],k=w.length;if(x===i&&S===i&&A===i)return h.copy(w);if(x=x||0,S=S||w.length,x=x>=0?x:k+x,S=S>=0?S:k+S,A=A||1,x===S||A===0)return[];if(x<S&&A<0)return[];if(x>S&&A>0)return[];if(A>0)for(C=x;C<S;C+=A)N.push(w[C]);else for(C=x;C>S;C+=A)N.push(w[C]);return N}function b(w,x){var S,A;if(x=x||{},f(x.row)){if(f(x.col))return w[x.row][x.col];var C=h.rowa(w,x.row);return S=x.col||{},v(C,S.start,S.end,S.step)}if(f(x.col)){var N=h.cola(w,x.col);return A=x.row||{},v(N,A.start,A.end,A.step)}A=x.row||{},S=x.col||{};var k=v(w,A.start,A.end,A.step);return k.map(function(D){return v(D,S.start,S.end,S.step)})}return b}(),h.sliceAssign=function(b,w,x){var S,A;if(f(w.row)){if(f(w.col))return b[w.row][w.col]=x;w.col=w.col||{},w.col.start=w.col.start||0,w.col.end=w.col.end||b[0].length,w.col.step=w.col.step||1,S=h.arange(w.col.start,r.min(b.length,w.col.end),w.col.step);var C=w.row;return S.forEach(function(k,D){b[C][k]=x[D]}),b}if(f(w.col)){w.row=w.row||{},w.row.start=w.row.start||0,w.row.end=w.row.end||b.length,w.row.step=w.row.step||1,A=h.arange(w.row.start,r.min(b[0].length,w.row.end),w.row.step);var N=w.col;return A.forEach(function(k,D){b[k][N]=x[D]}),b}return x[0].length===i&&(x=[x]),w.row.start=w.row.start||0,w.row.end=w.row.end||b.length,w.row.step=w.row.step||1,w.col.start=w.col.start||0,w.col.end=w.col.end||b[0].length,w.col.step=w.col.step||1,A=h.arange(w.row.start,r.min(b.length,w.row.end),w.row.step),S=h.arange(w.col.start,r.min(b[0].length,w.col.end),w.col.step),A.forEach(function(k,D){S.forEach(function(L,O){b[k][L]=x[D][O]})}),b},h.diagonal=function(b){var w=h.zeros(b.length,b.length);return b.forEach(function(x,S){w[S][S]=x}),w},h.copy=function(b){return b.map(function(w){return f(w)?w:w.map(function(x){return x})})};var y=h.prototype;return y.length=0,y.push=Array.prototype.push,y.sort=Array.prototype.sort,y.splice=Array.prototype.splice,y.slice=Array.prototype.slice,y.toArray=function(){return this.length>1?o.call(this):o.call(this)[0]},y.map=function(b,w){return h(h.map(this,b,w))},y.cumreduce=function(b,w){return h(h.cumreduce(this,b,w))},y.alter=function(b){return h.alter(this,b),this},function(v){for(var b=0;b<v.length;b++)(function(w){y[w]=function(x){var S=this,A;return x?(setTimeout(function(){x.call(S,y[w].call(S))}),this):(A=h[w](this),l(A)?h(A):A)}})(v[b])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(v){for(var b=0;b<v.length;b++)(function(w){y[w]=function(x,S){var A=this;return S?(setTimeout(function(){S.call(A,y[w].call(A,x))}),this):h(h[w](this,x))}})(v[b])}("row col".split(" ")),function(v){for(var b=0;b<v.length;b++)(function(w){y[w]=function(){return h(h[w].apply(null,arguments))}})(v[b])}("create zeros ones rand identity".split(" ")),h}(Math);return function(r,i){var s=r.utils.isFunction;function o(l,c){return l-c}function a(l,c,f){return i.max(c,i.min(l,f))}r.sum=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d];return f},r.sumsqrd=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d]*c[d];return f},r.sumsqerr=function(c){for(var f=r.mean(c),d=0,h=c.length,p;--h>=0;)p=c[h]-f,d+=p*p;return d},r.sumrow=function(c){for(var f=0,d=c.length;--d>=0;)f+=c[d];return f},r.product=function(c){for(var f=1,d=c.length;--d>=0;)f*=c[d];return f},r.min=function(c){for(var f=c[0],d=0;++d<c.length;)c[d]<f&&(f=c[d]);return f},r.max=function(c){for(var f=c[0],d=0;++d<c.length;)c[d]>f&&(f=c[d]);return f},r.unique=function(c){for(var f={},d=[],h=0;h<c.length;h++)f[c[h]]||(f[c[h]]=!0,d.push(c[h]));return d},r.mean=function(c){return r.sum(c)/c.length},r.meansqerr=function(c){return r.sumsqerr(c)/c.length},r.geomean=function(c){var f=c.map(i.log),d=r.mean(f);return i.exp(d)},r.median=function(c){var f=c.length,d=c.slice().sort(o);return f&1?d[f/2|0]:(d[f/2-1]+d[f/2])/2},r.cumsum=function(c){return r.cumreduce(c,function(f,d){return f+d})},r.cumprod=function(c){return r.cumreduce(c,function(f,d){return f*d})},r.diff=function(c){var f=[],d=c.length,h;for(h=1;h<d;h++)f.push(c[h]-c[h-1]);return f},r.rank=function(l){var c,f=[],d={};for(c=0;c<l.length;c++){var h=l[c];d[h]?d[h]++:(d[h]=1,f.push(h))}var p=f.sort(o),m={},g=1;for(c=0;c<p.length;c++){var h=p[c],y=d[h],v=g,b=g+y-1,w=(v+b)/2;m[h]=w,g+=y}return l.map(function(x){return m[x]})},r.mode=function(c){var f=c.length,d=c.slice().sort(o),h=1,p=0,m=0,g=[],y;for(y=0;y<f;y++)d[y]===d[y+1]?h++:(h>p?(g=[d[y]],p=h,m=0):h===p&&(g.push(d[y]),m++),h=1);return m===0?g[0]:g},r.range=function(c){return r.max(c)-r.min(c)},r.variance=function(c,f){return r.sumsqerr(c)/(c.length-(f?1:0))},r.pooledvariance=function(c){var f=c.reduce(function(h,p){return h+r.sumsqerr(p)},0),d=c.reduce(function(h,p){return h+p.length},0);return f/(d-c.length)},r.deviation=function(l){for(var c=r.mean(l),f=l.length,d=new Array(f),h=0;h<f;h++)d[h]=l[h]-c;return d},r.stdev=function(c,f){return i.sqrt(r.variance(c,f))},r.pooledstdev=function(c){return i.sqrt(r.pooledvariance(c))},r.meandev=function(c){for(var f=r.mean(c),d=[],h=c.length-1;h>=0;h--)d.push(i.abs(c[h]-f));return r.mean(d)},r.meddev=function(c){for(var f=r.median(c),d=[],h=c.length-1;h>=0;h--)d.push(i.abs(c[h]-f));return r.median(d)},r.coeffvar=function(c){return r.stdev(c)/r.mean(c)},r.quartiles=function(c){var f=c.length,d=c.slice().sort(o);return[d[i.round(f/4)-1],d[i.round(f/2)-1],d[i.round(f*3/4)-1]]},r.quantiles=function(c,f,d,h){var p=c.slice().sort(o),m=[f.length],g=c.length,y,v,b,w,x,S;for(typeof d>"u"&&(d=3/8),typeof h>"u"&&(h=3/8),y=0;y<f.length;y++)v=f[y],b=d+v*(1-d-h),w=g*v+b,x=i.floor(a(w,1,g-1)),S=a(w-x,0,1),m[y]=(1-S)*p[x-1]+S*p[x];return m},r.percentile=function(c,f,d){var h=c.slice().sort(o),p=f*(h.length+(d?1:-1))+(d?0:1),m=parseInt(p),g=p-m;return m+1<h.length?h[m-1]+g*(h[m]-h[m-1]):h[m-1]},r.percentileOfScore=function(c,f,d){var h=0,p=c.length,m=!1,g,y;for(d==="strict"&&(m=!0),y=0;y<p;y++)g=c[y],(m&&g<f||!m&&g<=f)&&h++;return h/p},r.histogram=function(c,f){f=f||4;var d=r.min(c),h=(r.max(c)-d)/f,p=c.length,m=[],g;for(g=0;g<f;g++)m[g]=0;for(g=0;g<p;g++)m[i.min(i.floor((c[g]-d)/h),f-1)]+=1;return m},r.covariance=function(c,f){var d=r.mean(c),h=r.mean(f),p=c.length,m=new Array(p),g;for(g=0;g<p;g++)m[g]=(c[g]-d)*(f[g]-h);return r.sum(m)/(p-1)},r.corrcoeff=function(c,f){return r.covariance(c,f)/r.stdev(c,1)/r.stdev(f,1)},r.spearmancoeff=function(l,c){return l=r.rank(l),c=r.rank(c),r.corrcoeff(l,c)},r.stanMoment=function(c,f){for(var d=r.mean(c),h=r.stdev(c),p=c.length,m=0,g=0;g<p;g++)m+=i.pow((c[g]-d)/h,f);return m/c.length},r.skewness=function(c){return r.stanMoment(c,3)},r.kurtosis=function(c){return r.stanMoment(c,4)-3};var u=r.prototype;(function(l){for(var c=0;c<l.length;c++)(function(f){u[f]=function(d,h){var p=[],m=0,g=this;if(s(d)&&(h=d,d=!1),h)return setTimeout(function(){h.call(g,u[f].call(g,d))}),this;if(this.length>1){for(g=d===!0?this:this.transpose();m<g.length;m++)p[m]=r[f](g[m]);return p}return r[f](this[0],d)}})(l[c])})("cumsum cumprod".split(" ")),function(l){for(var c=0;c<l.length;c++)(function(f){u[f]=function(d,h){var p=[],m=0,g=this;if(s(d)&&(h=d,d=!1),h)return setTimeout(function(){h.call(g,u[f].call(g,d))}),this;if(this.length>1){for(f!=="sumrow"&&(g=d===!0?this:this.transpose());m<g.length;m++)p[m]=r[f](g[m]);return d===!0?r[f](r.utils.toVector(p)):p}return r[f](this[0],d)}})(l[c])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(l){for(var c=0;c<l.length;c++)(function(f){u[f]=function(){var d=[],h=0,p=this,m=Array.prototype.slice.call(arguments),g;if(s(m[m.length-1])){g=m[m.length-1];var y=m.slice(0,m.length-1);return setTimeout(function(){g.call(p,u[f].apply(p,y))}),this}else{g=void 0;var v=function(w){return r[f].apply(p,[w].concat(m))}}if(this.length>1){for(p=p.transpose();h<p.length;h++)d[h]=v(p[h]);return d}return v(this[0])}})(l[c])}("quantiles percentileOfScore".split(" "))}(n,Math),function(r,i){r.gammaln=function(o){var a=0,u=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],l=1.000000000190015,c,f,d;for(d=(f=c=o)+5.5,d-=(c+.5)*i.log(d);a<6;a++)l+=u[a]/++f;return i.log(2.5066282746310007*l/c)-d},r.loggam=function(o){var a,u,l,c,f,d,h,p=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(a=o,h=0,o==1||o==2)return 0;for(o<=7&&(h=i.floor(7-o),a=o+h),u=1/(a*a),l=2*i.PI,f=p[9],d=8;d>=0;d--)f*=u,f+=p[d];if(c=f/a+.5*i.log(l)+(a-.5)*i.log(a)-a,o<=7)for(d=1;d<=h;d++)c-=i.log(a-1),a-=1;return c},r.gammafn=function(o){var a=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],u=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],l=!1,c=0,f=0,d=0,h=o,p,m,g,y;if(o>171.6243769536076)return 1/0;if(h<=0)if(y=h%1+36e-17,y)l=(h&1?-1:1)*i.PI/i.sin(i.PI*y),h=1-h;else return 1/0;for(g=h,h<1?m=h++:m=(h-=c=(h|0)-1)-1,p=0;p<8;++p)d=(d+a[p])*m,f=f*m+u[p];if(y=d/f+1,g<h)y/=g;else if(g>h)for(p=0;p<c;++p)y*=h,h++;return l&&(y=l/y),y},r.gammap=function(o,a){return r.lowRegGamma(o,a)*r.gammafn(o)},r.lowRegGamma=function(o,a){var u=r.gammaln(o),l=o,c=1/o,f=c,d=a+1-o,h=1/1e-30,p=1/d,m=p,g=1,y=-~(i.log(o>=1?o:1/o)*8.5+o*.4+17),v;if(a<0||o<=0)return NaN;if(a<o+1){for(;g<=y;g++)c+=f*=a/++l;return c*i.exp(-a+o*i.log(a)-u)}for(;g<=y;g++)v=-g*(g-o),d+=2,p=v*p+d,h=d+v/h,p=1/p,m*=p*h;return 1-m*i.exp(-a+o*i.log(a)-u)},r.factorialln=function(o){return o<0?NaN:r.gammaln(o+1)},r.factorial=function(o){return o<0?NaN:r.gammafn(o+1)},r.combination=function(o,a){return o>170||a>170?i.exp(r.combinationln(o,a)):r.factorial(o)/r.factorial(a)/r.factorial(o-a)},r.combinationln=function(o,a){return r.factorialln(o)-r.factorialln(a)-r.factorialln(o-a)},r.permutation=function(o,a){return r.factorial(o)/r.factorial(o-a)},r.betafn=function(o,a){if(!(o<=0||a<=0))return o+a>170?i.exp(r.betaln(o,a)):r.gammafn(o)*r.gammafn(a)/r.gammafn(o+a)},r.betaln=function(o,a){return r.gammaln(o)+r.gammaln(a)-r.gammaln(o+a)},r.betacf=function(o,a,u){var l=1e-30,c=1,f=a+u,d=a+1,h=a-1,p=1,m=1-f*o/d,g,y,v,b;for(i.abs(m)<l&&(m=l),m=1/m,b=m;c<=100&&(g=2*c,y=c*(u-c)*o/((h+g)*(a+g)),m=1+y*m,i.abs(m)<l&&(m=l),p=1+y/p,i.abs(p)<l&&(p=l),m=1/m,b*=m*p,y=-(a+c)*(f+c)*o/((a+g)*(d+g)),m=1+y*m,i.abs(m)<l&&(m=l),p=1+y/p,i.abs(p)<l&&(p=l),m=1/m,v=m*p,b*=v,!(i.abs(v-1)<3e-7));c++);return b},r.gammapinv=function(o,a){var u=0,l=a-1,c=1e-8,f=r.gammaln(a),d,h,p,m,g,y,v;if(o>=1)return i.max(100,a+100*i.sqrt(a));if(o<=0)return 0;for(a>1?(y=i.log(l),v=i.exp(l*(y-1)-f),g=o<.5?o:1-o,p=i.sqrt(-2*i.log(g)),d=(2.30753+p*.27061)/(1+p*(.99229+p*.04481))-p,o<.5&&(d=-d),d=i.max(.001,a*i.pow(1-1/(9*a)-d/(3*i.sqrt(a)),3))):(p=1-a*(.253+a*.12),o<p?d=i.pow(o/p,1/a):d=1-i.log(1-(o-p)/(1-p)));u<12;u++){if(d<=0)return 0;if(h=r.lowRegGamma(a,d)-o,a>1?p=v*i.exp(-(d-l)+l*(i.log(d)-y)):p=i.exp(-d+l*i.log(d)-f),m=h/p,d-=p=m/(1-.5*i.min(1,m*((a-1)/d-1))),d<=0&&(d=.5*(d+p)),i.abs(p)<c*d)break}return d},r.erf=function(o){var a=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],u=a.length-1,l=!1,c=0,f=0,d,h,p,m;for(o<0&&(o=-o,l=!0),d=2/(2+o),h=4*d-2;u>0;u--)p=c,c=h*c-f+a[u],f=p;return m=d*i.exp(-o*o+.5*(a[0]+h*c)-f),l?m-1:1-m},r.erfc=function(o){return 1-r.erf(o)},r.erfcinv=function(o){var a=0,u,l,c,f;if(o>=2)return-100;if(o<=0)return 100;for(f=o<1?o:2-o,c=i.sqrt(-2*i.log(f/2)),u=-.70711*((2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c);a<2;a++)l=r.erfc(u)-f,u+=l/(1.1283791670955126*i.exp(-u*u)-u*l);return o<1?u:-u},r.ibetainv=function(o,a,u){var l=1e-8,c=a-1,f=u-1,d=0,h,p,m,g,y,v,b,w,x,S,A;if(o<=0)return 0;if(o>=1)return 1;for(a>=1&&u>=1?(m=o<.5?o:1-o,g=i.sqrt(-2*i.log(m)),b=(2.30753+g*.27061)/(1+g*(.99229+g*.04481))-g,o<.5&&(b=-b),w=(b*b-3)/6,x=2/(1/(2*a-1)+1/(2*u-1)),S=b*i.sqrt(w+x)/x-(1/(2*u-1)-1/(2*a-1))*(w+5/6-2/(3*x)),b=a/(a+u*i.exp(2*S))):(h=i.log(a/(a+u)),p=i.log(u/(a+u)),g=i.exp(a*h)/a,y=i.exp(u*p)/u,S=g+y,o<g/S?b=i.pow(a*S*o,1/a):b=1-i.pow(u*S*(1-o),1/u)),A=-r.gammaln(a)-r.gammaln(u)+r.gammaln(a+u);d<10;d++){if(b===0||b===1)return b;if(v=r.ibeta(b,a,u)-o,g=i.exp(c*i.log(b)+f*i.log(1-b)+A),y=v/g,b-=g=y/(1-.5*i.min(1,y*(c/b-f/(1-b)))),b<=0&&(b=.5*(b+g)),b>=1&&(b=.5*(b+g+1)),i.abs(g)<l*b&&d>0)break}return b},r.ibeta=function(o,a,u){var l=o===0||o===1?0:i.exp(r.gammaln(a+u)-r.gammaln(a)-r.gammaln(u)+a*i.log(o)+u*i.log(1-o));return o<0||o>1?!1:o<(a+1)/(a+u+2)?l*r.betacf(o,a,u)/a:1-l*r.betacf(1-o,u,a)/u},r.randn=function(o,a){var u,l,c,f,d;if(a||(a=o),o)return r.create(o,a,function(){return r.randn()});do u=r._random_fn(),l=1.7156*(r._random_fn()-.5),c=u-.449871,f=i.abs(l)+.386595,d=c*c+f*(.196*f-.25472*c);while(d>.27597&&(d>.27846||l*l>-4*i.log(u)*u*u));return l/u},r.randg=function(o,a,u){var l=o,c,f,d,h,p,m;if(u||(u=a),o||(o=1),a)return m=r.zeros(a,u),m.alter(function(){return r.randg(o)}),m;o<1&&(o+=1),c=o-1/3,f=1/i.sqrt(9*c);do{do p=r.randn(),h=1+f*p;while(h<=0);h=h*h*h,d=r._random_fn()}while(d>1-.331*i.pow(p,4)&&i.log(d)>.5*p*p+c*(1-h+i.log(h)));if(o==l)return c*h;do d=r._random_fn();while(d===0);return i.pow(d,1/l)*c*h},function(s){for(var o=0;o<s.length;o++)(function(a){r.fn[a]=function(){return r(r.map(this,function(u){return r[a](u)}))}})(s[o])}("gammaln gammafn factorial factorialln".split(" ")),function(s){for(var o=0;o<s.length;o++)(function(a){r.fn[a]=function(){return r(r[a].apply(null,arguments))}})(s[o])}("randn".split(" "))}(n,Math),function(r,i){(function(l){for(var c=0;c<l.length;c++)(function(f){r[f]=function d(h,p,m){return this instanceof d?(this._a=h,this._b=p,this._c=m,this):new d(h,p,m)},r.fn[f]=function(d,h,p){var m=r[f](d,h,p);return m.data=this,m},r[f].prototype.sample=function(d){var h=this._a,p=this._b,m=this._c;return d?r.alter(d,function(){return r[f].sample(h,p,m)}):r[f].sample(h,p,m)},function(d){for(var h=0;h<d.length;h++)(function(p){r[f].prototype[p]=function(m){var g=this._a,y=this._b,v=this._c;return!m&&m!==0&&(m=this.data),typeof m!="number"?r.fn.map.call(m,function(b){return r[f][p](b,g,y,v)}):r[f][p](m,g,y,v)}})(d[h])}("pdf cdf inv".split(" ")),function(d){for(var h=0;h<d.length;h++)(function(p){r[f].prototype[p]=function(){return r[f][p](this._a,this._b,this._c)}})(d[h])}("mean median mode variance".split(" "))})(l[c])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),r.extend(r.beta,{pdf:function(c,f,d){return c>1||c<0?0:f==1&&d==1?1:f<512&&d<512?i.pow(c,f-1)*i.pow(1-c,d-1)/r.betafn(f,d):i.exp((f-1)*i.log(c)+(d-1)*i.log(1-c)-r.betaln(f,d))},cdf:function(c,f,d){return c>1||c<0?(c>1)*1:r.ibeta(c,f,d)},inv:function(c,f,d){return r.ibetainv(c,f,d)},mean:function(c,f){return c/(c+f)},median:function(c,f){return r.ibetainv(.5,c,f)},mode:function(c,f){return(c-1)/(c+f-2)},sample:function(c,f){var d=r.randg(c);return d/(d+r.randg(f))},variance:function(c,f){return c*f/(i.pow(c+f,2)*(c+f+1))}}),r.extend(r.centralF,{pdf:function(c,f,d){var h,p,m;return c<0?0:f<=2?c===0&&f<2?1/0:c===0&&f===2?1:1/r.betafn(f/2,d/2)*i.pow(f/d,f/2)*i.pow(c,f/2-1)*i.pow(1+f/d*c,-(f+d)/2):(h=f*c/(d+c*f),p=d/(d+c*f),m=f*p/2,m*r.binomial.pdf((f-2)/2,(f+d-2)/2,h))},cdf:function(c,f,d){return c<0?0:r.ibeta(f*c/(f*c+d),f/2,d/2)},inv:function(c,f,d){return d/(f*(1/r.ibetainv(c,f/2,d/2)-1))},mean:function(c,f){return f>2?f/(f-2):void 0},mode:function(c,f){return c>2?f*(c-2)/(c*(f+2)):void 0},sample:function(c,f){var d=r.randg(c/2)*2,h=r.randg(f/2)*2;return d/c/(h/f)},variance:function(c,f){if(!(f<=4))return 2*f*f*(c+f-2)/(c*(f-2)*(f-2)*(f-4))}}),r.extend(r.cauchy,{pdf:function(c,f,d){return d<0?0:d/(i.pow(c-f,2)+i.pow(d,2))/i.PI},cdf:function(c,f,d){return i.atan((c-f)/d)/i.PI+.5},inv:function(l,c,f){return c+f*i.tan(i.PI*(l-.5))},median:function(c){return c},mode:function(c){return c},sample:function(c,f){return r.randn()*i.sqrt(1/(2*r.randg(.5)))*f+c}}),r.extend(r.chisquare,{pdf:function(c,f){return c<0?0:c===0&&f===2?.5:i.exp((f/2-1)*i.log(c)-c/2-f/2*i.log(2)-r.gammaln(f/2))},cdf:function(c,f){return c<0?0:r.lowRegGamma(f/2,c/2)},inv:function(l,c){return 2*r.gammapinv(l,.5*c)},mean:function(l){return l},median:function(c){return c*i.pow(1-2/(9*c),3)},mode:function(c){return c-2>0?c-2:0},sample:function(c){return r.randg(c/2)*2},variance:function(c){return 2*c}}),r.extend(r.exponential,{pdf:function(c,f){return c<0?0:f*i.exp(-f*c)},cdf:function(c,f){return c<0?0:1-i.exp(-f*c)},inv:function(l,c){return-i.log(1-l)/c},mean:function(l){return 1/l},median:function(l){return 1/l*i.log(2)},mode:function(){return 0},sample:function(c){return-1/c*i.log(r._random_fn())},variance:function(l){return i.pow(l,-2)}}),r.extend(r.gamma,{pdf:function(c,f,d){return c<0?0:c===0&&f===1?1/d:i.exp((f-1)*i.log(c)-c/d-r.gammaln(f)-f*i.log(d))},cdf:function(c,f,d){return c<0?0:r.lowRegGamma(f,c/d)},inv:function(l,c,f){return r.gammapinv(l,c)*f},mean:function(l,c){return l*c},mode:function(c,f){if(c>1)return(c-1)*f},sample:function(c,f){return r.randg(c)*f},variance:function(c,f){return c*f*f}}),r.extend(r.invgamma,{pdf:function(c,f,d){return c<=0?0:i.exp(-(f+1)*i.log(c)-d/c-r.gammaln(f)+f*i.log(d))},cdf:function(c,f,d){return c<=0?0:1-r.lowRegGamma(f,d/c)},inv:function(l,c,f){return f/r.gammapinv(1-l,c)},mean:function(l,c){return l>1?c/(l-1):void 0},mode:function(c,f){return f/(c+1)},sample:function(c,f){return f/r.randg(c)},variance:function(c,f){if(!(c<=2))return f*f/((c-1)*(c-1)*(c-2))}}),r.extend(r.kumaraswamy,{pdf:function(c,f,d){return c===0&&f===1?d:c===1&&d===1?f:i.exp(i.log(f)+i.log(d)+(f-1)*i.log(c)+(d-1)*i.log(1-i.pow(c,f)))},cdf:function(c,f,d){return c<0?0:c>1?1:1-i.pow(1-i.pow(c,f),d)},inv:function(c,f,d){return i.pow(1-i.pow(1-c,1/d),1/f)},mean:function(l,c){return c*r.gammafn(1+1/l)*r.gammafn(c)/r.gammafn(1+1/l+c)},median:function(c,f){return i.pow(1-i.pow(2,-1/f),1/c)},mode:function(c,f){if(c>=1&&f>=1&&c!==1&&f!==1)return i.pow((c-1)/(c*f-1),1/c)},variance:function(){throw new Error("variance not yet implemented")}}),r.extend(r.lognormal,{pdf:function(c,f,d){return c<=0?0:i.exp(-i.log(c)-.5*i.log(2*i.PI)-i.log(d)-i.pow(i.log(c)-f,2)/(2*d*d))},cdf:function(c,f,d){return c<0?0:.5+.5*r.erf((i.log(c)-f)/i.sqrt(2*d*d))},inv:function(l,c,f){return i.exp(-1.4142135623730951*f*r.erfcinv(2*l)+c)},mean:function(c,f){return i.exp(c+f*f/2)},median:function(c){return i.exp(c)},mode:function(c,f){return i.exp(c-f*f)},sample:function(c,f){return i.exp(r.randn()*f+c)},variance:function(c,f){return(i.exp(f*f)-1)*i.exp(2*c+f*f)}}),r.extend(r.noncentralt,{pdf:function(c,f,d){var h=1e-14;return i.abs(d)<h?r.studentt.pdf(c,f):i.abs(c)<h?i.exp(r.gammaln((f+1)/2)-d*d/2-.5*i.log(i.PI*f)-r.gammaln(f/2)):f/c*(r.noncentralt.cdf(c*i.sqrt(1+2/f),f+2,d)-r.noncentralt.cdf(c,f,d))},cdf:function(c,f,d){var h=1e-14,p=200;if(i.abs(d)<h)return r.studentt.cdf(c,f);var m=!1;c<0&&(m=!0,d=-d);for(var g=r.normal.cdf(-d,0,1),y=h+1,v=y,b=c*c/(c*c+f),w=0,x=i.exp(-d*d/2),S=i.exp(-d*d/2-.5*i.log(2)-r.gammaln(3/2))*d;w<p||v>h||y>h;)v=y,w>0&&(x*=d*d/(2*w),S*=d*d/(2*(w+1/2))),y=x*r.beta.cdf(b,w+.5,f/2)+S*r.beta.cdf(b,w+1,f/2),g+=.5*y,w++;return m?1-g:g}}),r.extend(r.normal,{pdf:function(c,f,d){return i.exp(-.5*i.log(2*i.PI)-i.log(d)-i.pow(c-f,2)/(2*d*d))},cdf:function(c,f,d){return .5*(1+r.erf((c-f)/i.sqrt(2*d*d)))},inv:function(l,c,f){return-1.4142135623730951*f*r.erfcinv(2*l)+c},mean:function(l){return l},median:function(c){return c},mode:function(l){return l},sample:function(c,f){return r.randn()*f+c},variance:function(l,c){return c*c}}),r.extend(r.pareto,{pdf:function(c,f,d){return c<f?0:d*i.pow(f,d)/i.pow(c,d+1)},cdf:function(c,f,d){return c<f?0:1-i.pow(f/c,d)},inv:function(c,f,d){return f/i.pow(1-c,1/d)},mean:function(c,f){if(!(f<=1))return f*i.pow(c,f)/(f-1)},median:function(c,f){return c*(f*i.SQRT2)},mode:function(c){return c},variance:function(l,c){if(!(c<=2))return l*l*c/(i.pow(c-1,2)*(c-2))}}),r.extend(r.studentt,{pdf:function(c,f){return f=f>1e100?1e100:f,1/(i.sqrt(f)*r.betafn(.5,f/2))*i.pow(1+c*c/f,-((f+1)/2))},cdf:function(c,f){var d=f/2;return r.ibeta((c+i.sqrt(c*c+f))/(2*i.sqrt(c*c+f)),d,d)},inv:function(l,c){var f=r.ibetainv(2*i.min(l,1-l),.5*c,.5);return f=i.sqrt(c*(1-f)/f),l>.5?f:-f},mean:function(c){return c>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(c){return r.randn()*i.sqrt(c/(2*r.randg(c/2)))},variance:function(c){return c>2?c/(c-2):c>1?1/0:void 0}}),r.extend(r.weibull,{pdf:function(c,f,d){return c<0||f<0||d<0?0:d/f*i.pow(c/f,d-1)*i.exp(-i.pow(c/f,d))},cdf:function(c,f,d){return c<0?0:1-i.exp(-i.pow(c/f,d))},inv:function(l,c,f){return c*i.pow(-i.log(1-l),1/f)},mean:function(l,c){return l*r.gammafn(1+1/c)},median:function(c,f){return c*i.pow(i.log(2),1/f)},mode:function(c,f){return f<=1?0:c*i.pow((f-1)/f,1/f)},sample:function(c,f){return c*i.pow(-i.log(r._random_fn()),1/f)},variance:function(c,f){return c*c*r.gammafn(1+2/f)-i.pow(r.weibull.mean(c,f),2)}}),r.extend(r.uniform,{pdf:function(c,f,d){return c<f||c>d?0:1/(d-f)},cdf:function(c,f,d){return c<f?0:c<d?(c-f)/(d-f):1},inv:function(l,c,f){return c+l*(f-c)},mean:function(c,f){return .5*(c+f)},median:function(c,f){return r.mean(c,f)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(c,f){return c/2+f/2+(f/2-c/2)*(2*r._random_fn()-1)},variance:function(c,f){return i.pow(f-c,2)/12}});function s(l,c,f,d){for(var h=0,p=1,m=1,g=1,y=0,v=0,b;i.abs((m-v)/m)>d;)v=m,b=-(c+y)*(c+f+y)*l/(c+2*y)/(c+2*y+1),h=m+b*h,p=g+b*p,y=y+1,b=y*(f-y)*l/(c+2*y-1)/(c+2*y),m=h+b*m,g=p+b*g,h=h/g,p=p/g,m=m/g,g=1;return m/c}r.extend(r.binomial,{pdf:function(c,f,d){return d===0||d===1?f*d===c?1:0:r.combination(f,c)*i.pow(d,c)*i.pow(1-d,f-c)},cdf:function(c,f,d){var h,p=1e-10;if(c<0)return 0;if(c>=f)return 1;if(d<0||d>1||f<=0)return NaN;c=i.floor(c);var m=d,g=c+1,y=f-c,v=g+y,b=i.exp(r.gammaln(v)-r.gammaln(y)-r.gammaln(g)+g*i.log(m)+y*i.log(1-m));return m<(g+1)/(v+2)?h=b*s(m,g,y,p):h=1-b*s(1-m,y,g,p),i.round((1-h)*(1/p))/(1/p)}}),r.extend(r.negbin,{pdf:function(c,f,d){return c!==c>>>0?!1:c<0?0:r.combination(c+f-1,f-1)*i.pow(1-d,c)*i.pow(d,f)},cdf:function(c,f,d){var h=0,p=0;if(c<0)return 0;for(;p<=c;p++)h+=r.negbin.pdf(p,f,d);return h}}),r.extend(r.hypgeom,{pdf:function(c,f,d,h){if(c!==c|0)return!1;if(c<0||c<d-(f-h))return 0;if(c>h||c>d)return 0;if(d*2>f)return h*2>f?r.hypgeom.pdf(f-d-h+c,f,f-d,f-h):r.hypgeom.pdf(h-c,f,f-d,h);if(h*2>f)return r.hypgeom.pdf(d-c,f,d,f-h);if(d<h)return r.hypgeom.pdf(c,f,h,d);for(var p=1,m=0,g=0;g<c;g++){for(;p>1&&m<h;)p*=1-d/(f-m),m++;p*=(h-g)*(d-g)/((g+1)*(f-d-h+g+1))}for(;m<h;m++)p*=1-d/(f-m);return i.min(1,i.max(0,p))},cdf:function(c,f,d,h){if(c<0||c<d-(f-h))return 0;if(c>=h||c>=d)return 1;if(d*2>f)return h*2>f?r.hypgeom.cdf(f-d-h+c,f,f-d,f-h):1-r.hypgeom.cdf(h-c-1,f,f-d,h);if(h*2>f)return 1-r.hypgeom.cdf(d-c-1,f,d,f-h);if(d<h)return r.hypgeom.cdf(c,f,h,d);for(var p=1,m=1,g=0,y=0;y<c;y++){for(;p>1&&g<h;){var v=1-d/(f-g);m*=v,p*=v,g++}m*=(h-y)*(d-y)/((y+1)*(f-d-h+y+1)),p+=m}for(;g<h;g++)p*=1-d/(f-g);return i.min(1,i.max(0,p))}}),r.extend(r.poisson,{pdf:function(c,f){return f<0||c%1!==0||c<0?0:i.pow(f,c)*i.exp(-f)/r.factorial(c)},cdf:function(c,f){var d=[],h=0;if(c<0)return 0;for(;h<=c;h++)d.push(r.poisson.pdf(h,f));return r.sum(d)},mean:function(l){return l},variance:function(l){return l},sampleSmall:function(c){var f=1,d=0,h=i.exp(-c);do d++,f*=r._random_fn();while(f>h);return d-1},sampleLarge:function(c){var f=c,d,h,p,m,g,y,v,b,w,x;for(m=i.sqrt(f),g=i.log(f),v=.931+2.53*m,y=-.059+.02483*v,b=1.1239+1.1328/(v-3.4),w=.9277-3.6224/(v-2);;){if(h=i.random()-.5,p=i.random(),x=.5-i.abs(h),d=i.floor((2*y/x+v)*h+f+.43),x>=.07&&p<=w)return d;if(!(d<0||x<.013&&p>x)&&i.log(p)+i.log(b)-i.log(y/(x*x)+v)<=-f+d*g-r.loggam(d+1))return d}},sample:function(c){return c<10?this.sampleSmall(c):this.sampleLarge(c)}}),r.extend(r.triangular,{pdf:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<f||c>d?0:c<h?2*(c-f)/((d-f)*(h-f)):c===h?2/(d-f):2*(d-c)/((d-f)*(d-h))},cdf:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<=f?0:c>=d?1:c<=h?i.pow(c-f,2)/((d-f)*(h-f)):1-i.pow(d-c,2)/((d-f)*(d-h))},inv:function(c,f,d,h){return d<=f||h<f||h>d?NaN:c<=(h-f)/(d-f)?f+(d-f)*i.sqrt(c*((h-f)/(d-f))):f+(d-f)*(1-i.sqrt((1-c)*(1-(h-f)/(d-f))))},mean:function(c,f,d){return(c+f+d)/3},median:function(c,f,d){if(d<=(c+f)/2)return f-i.sqrt((f-c)*(f-d))/i.sqrt(2);if(d>(c+f)/2)return c+i.sqrt((f-c)*(d-c))/i.sqrt(2)},mode:function(c,f,d){return d},sample:function(c,f,d){var h=r._random_fn();return h<(d-c)/(f-c)?c+i.sqrt(h*(f-c)*(d-c)):f-i.sqrt((1-h)*(f-c)*(f-d))},variance:function(c,f,d){return(c*c+f*f+d*d-c*f-c*d-f*d)/18}}),r.extend(r.arcsine,{pdf:function(c,f,d){return d<=f?NaN:c<=f||c>=d?0:2/i.PI*i.pow(i.pow(d-f,2)-i.pow(2*c-f-d,2),-.5)},cdf:function(c,f,d){return c<f?0:c<d?2/i.PI*i.asin(i.sqrt((c-f)/(d-f))):1},inv:function(l,c,f){return c+(.5-.5*i.cos(i.PI*l))*(f-c)},mean:function(c,f){return f<=c?NaN:(c+f)/2},median:function(c,f){return f<=c?NaN:(c+f)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(c,f){return(c+f)/2+(f-c)/2*i.sin(2*i.PI*r.uniform.sample(0,1))},variance:function(c,f){return f<=c?NaN:i.pow(f-c,2)/8}});function o(l){return l/i.abs(l)}r.extend(r.laplace,{pdf:function(c,f,d){return d<=0?0:i.exp(-i.abs(c-f)/d)/(2*d)},cdf:function(c,f,d){return d<=0?0:c<f?.5*i.exp((c-f)/d):1-.5*i.exp(-(c-f)/d)},mean:function(l){return l},median:function(l){return l},mode:function(l){return l},variance:function(l,c){return 2*c*c},sample:function(c,f){var d=r._random_fn()-.5;return c-f*o(d)*i.log(1-2*i.abs(d))}});function a(l,c,f){var d=12,h=6,p=-30,m=-50,g=60,y=8,v=3,b=2,w=3,x=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],S=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],A=l*.5;if(A>=y)return 1;var C=2*r.normal.cdf(A,0,1,1,0)-1;C>=i.exp(m/f)?C=i.pow(C,f):C=0;var N;l>v?N=b:N=w;for(var k=A,D=(y-A)/N,L=k+D,O=0,B=f-1,q=1;q<=N;q++){for(var H=0,G=.5*(L+k),K=.5*(L-k),J=1;J<=d;J++){var F,j;h<J?(F=d-J+1,j=x[F-1]):(F=J,j=-x[F-1]);var W=K*j,M=G+W,V=M*M;if(V>g)break;var Q=2*r.normal.cdf(M,0,1,1,0),se=2*r.normal.cdf(M,l,1,1,0),be=Q*.5-se*.5;be>=i.exp(p/B)&&(be=S[F-1]*i.exp(-(.5*V))*i.pow(be,B),H+=be)}H*=2*K*f/i.sqrt(2*i.PI),O+=H,k=L,L+=D}return C+=O,C<=i.exp(p/c)?0:(C=i.pow(C,c),C>=1?1:C)}function u(l,c,f){var d=.322232421088,h=.099348462606,p=-1,m=.588581570495,g=-.342242088547,y=.531103462366,v=-.204231210125,b=.10353775285,w=-453642210148e-16,x=.0038560700634,S=.8832,A=.2368,C=1.208,N=1.4142,k=120,D=.5-.5*l,L=i.sqrt(i.log(1/(D*D))),O=L+((((L*w+v)*L+g)*L+p)*L+d)/((((L*x+b)*L+y)*L+m)*L+h);f<k&&(O+=(O*O*O+O)/f/4);var B=S-A*O;return f<k&&(B+=-1.214/f+C*O/f),O*(B*i.log(c-1)+N)}r.extend(r.tukey,{cdf:function(c,f,d){var h=1,p=f,m=16,g=8,y=-30,v=1e-14,b=100,w=800,x=5e3,S=25e3,A=1,C=.5,N=.25,k=.125,D=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],L=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(c<=0)return 0;if(d<2||h<1||p<2)return NaN;if(!Number.isFinite(c))return 1;if(d>S)return a(c,h,p);var O=d*.5,B=O*i.log(d)-d*i.log(2)-r.gammaln(O),q=O-1,H=d*.25,G;d<=b?G=A:d<=w?G=C:d<=x?G=N:G=k,B+=i.log(G);for(var K=0,J=1;J<=50;J++){for(var F=0,j=(2*J-1)*G,W=1;W<=m;W++){var M,V;g<W?(M=W-g-1,V=B+q*i.log(j+D[M]*G)-(D[M]*G+j)*H):(M=W-1,V=B+q*i.log(j-D[M]*G)+(D[M]*G-j)*H);var Q;if(V>=y){g<W?Q=c*i.sqrt((D[M]*G+j)*.5):Q=c*i.sqrt((-(D[M]*G)+j)*.5);var se=a(Q,h,p),be=se*L[M]*i.exp(V);F+=be}}if(J*G>=1&&F<=v)break;K+=F}if(F>v)throw new Error("tukey.cdf failed to converge");return K>1&&(K=1),K},inv:function(l,c,f){var d=1,h=c,p=1e-4,m=50;if(f<2||d<1||h<2)return NaN;if(l<0||l>1)return NaN;if(l===0)return 0;if(l===1)return 1/0;var g=u(l,h,f),y=r.tukey.cdf(g,c,f)-l,v;y>0?v=i.max(0,g-1):v=g+1;for(var b=r.tukey.cdf(v,c,f)-l,w,x=1;x<m;x++){w=v-b*(v-g)/(b-y),y=b,g=v,w<0&&(w=0,b=-l),b=r.tukey.cdf(w,c,f)-l,v=w;var S=i.abs(v-g);if(S<p)return w}throw new Error("tukey.inv failed to converge")}})}(n,Math),function(r,i){var s=Array.prototype.push,o=r.utils.isArray;function a(u){return o(u)||u instanceof r}r.extend({add:function(l,c){return a(c)?(a(c[0])||(c=[c]),r.map(l,function(f,d,h){return f+c[d][h]})):r.map(l,function(f){return f+c})},subtract:function(l,c){return a(c)?(a(c[0])||(c=[c]),r.map(l,function(f,d,h){return f-c[d][h]||0})):r.map(l,function(f){return f-c})},divide:function(l,c){return a(c)?(a(c[0])||(c=[c]),r.multiply(l,r.inv(c))):r.map(l,function(f){return f/c})},multiply:function(l,c){var f,d,h,p,m,g,y,v;if(l.length===void 0&&c.length===void 0)return l*c;if(m=l.length,g=l[0].length,y=r.zeros(m,h=a(c)?c[0].length:g),v=0,a(c)){for(;v<h;v++)for(f=0;f<m;f++){for(p=0,d=0;d<g;d++)p+=l[f][d]*c[d][v];y[f][v]=p}return m===1&&v===1?y[0][0]:y}return r.map(l,function(b){return b*c})},outer:function(l,c){return r.multiply(l.map(function(f){return[f]}),[c])},dot:function(l,c){a(l[0])||(l=[l]),a(c[0])||(c=[c]);for(var f=l[0].length===1&&l.length!==1?r.transpose(l):l,d=c[0].length===1&&c.length!==1?r.transpose(c):c,h=[],p=0,m=f.length,g=f[0].length,y,v;p<m;p++){for(h[p]=[],y=0,v=0;v<g;v++)y+=f[p][v]*d[p][v];h[p]=y}return h.length===1?h[0]:h},pow:function(l,c){return r.map(l,function(f){return i.pow(f,c)})},exp:function(l){return r.map(l,function(c){return i.exp(c)})},log:function(l){return r.map(l,function(c){return i.log(c)})},abs:function(l){return r.map(l,function(c){return i.abs(c)})},norm:function(l,c){var f=0,d=0;for(isNaN(c)&&(c=2),a(l[0])&&(l=l[0]);d<l.length;d++)f+=i.pow(i.abs(l[d]),c);return i.pow(f,1/c)},angle:function(l,c){return i.acos(r.dot(l,c)/(r.norm(l)*r.norm(c)))},aug:function(l,c){var f=[],d;for(d=0;d<l.length;d++)f.push(l[d].slice());for(d=0;d<f.length;d++)s.apply(f[d],c[d]);return f},inv:function(l){for(var c=l.length,f=l[0].length,d=r.identity(c,f),h=r.gauss_jordan(l,d),p=[],m=0,g;m<c;m++)for(p[m]=[],g=f;g<h[0].length;g++)p[m][g-f]=h[m][g];return p},det:function u(l){if(l.length===2)return l[0][0]*l[1][1]-l[0][1]*l[1][0];for(var c=0,f=0;f<l.length;f++){for(var d=[],h=1;h<l.length;h++){d[h-1]=[];for(var p=0;p<l.length;p++)p<f?d[h-1][p]=l[h][p]:p>f&&(d[h-1][p-1]=l[h][p])}var m=f%2?-1:1;c+=u(d)*l[0][f]*m}return c},gauss_elimination:function(l,c){var f=0,d=0,h=l.length,p=l[0].length,m=1,g=0,y=[],v,b,w,x;for(l=r.aug(l,c),v=l[0].length,f=0;f<h;f++){for(b=l[f][f],d=f,x=f+1;x<p;x++)b<i.abs(l[x][f])&&(b=l[x][f],d=x);if(d!=f)for(x=0;x<v;x++)w=l[f][x],l[f][x]=l[d][x],l[d][x]=w;for(d=f+1;d<h;d++)for(m=l[d][f]/l[f][f],x=f;x<v;x++)l[d][x]=l[d][x]-m*l[f][x]}for(f=h-1;f>=0;f--){for(g=0,d=f+1;d<=h-1;d++)g=g+y[d]*l[f][d];y[f]=(l[f][v-1]-g)/l[f][f]}return y},gauss_jordan:function(l,c){var f=r.aug(l,c),d=f.length,h=f[0].length,p=0,m,g,y;for(g=0;g<d;g++){var v=g;for(y=g+1;y<d;y++)i.abs(f[y][g])>i.abs(f[v][g])&&(v=y);var b=f[g];for(f[g]=f[v],f[v]=b,y=g+1;y<d;y++)for(p=f[y][g]/f[g][g],m=g;m<h;m++)f[y][m]-=f[g][m]*p}for(g=d-1;g>=0;g--){for(p=f[g][g],y=0;y<g;y++)for(m=h-1;m>g-1;m--)f[y][m]-=f[g][m]*f[y][g]/p;for(f[g][g]/=p,m=d;m<h;m++)f[g][m]/=p}return f},triaUpSolve:function(l,c){var f=l[0].length,d=r.zeros(1,f)[0],h,p=!1;return c[0].length!=null&&(c=c.map(function(m){return m[0]}),p=!0),r.arange(f-1,-1,-1).forEach(function(m){h=r.arange(m+1,f).map(function(g){return d[g]*l[m][g]}),d[m]=(c[m]-r.sum(h))/l[m][m]}),p?d.map(function(m){return[m]}):d},triaLowSolve:function(l,c){var f=l[0].length,d=r.zeros(1,f)[0],h,p=!1;return c[0].length!=null&&(c=c.map(function(m){return m[0]}),p=!0),r.arange(f).forEach(function(m){h=r.arange(m).map(function(g){return l[m][g]*d[g]}),d[m]=(c[m]-r.sum(h))/l[m][m]}),p?d.map(function(m){return[m]}):d},lu:function(l){var c=l.length,f=r.identity(c),d=r.zeros(l.length,l[0].length),h;return r.arange(c).forEach(function(p){d[0][p]=l[0][p]}),r.arange(1,c).forEach(function(p){r.arange(p).forEach(function(m){h=r.arange(m).map(function(g){return f[p][g]*d[g][m]}),f[p][m]=(l[p][m]-r.sum(h))/d[m][m]}),r.arange(p,c).forEach(function(m){h=r.arange(p).map(function(g){return f[p][g]*d[g][m]}),d[p][m]=l[h.length][m]-r.sum(h)})}),[f,d]},cholesky:function(l){var c=l.length,f=r.zeros(l.length,l[0].length),d;return r.arange(c).forEach(function(h){d=r.arange(h).map(function(p){return i.pow(f[h][p],2)}),f[h][h]=i.sqrt(l[h][h]-r.sum(d)),r.arange(h+1,c).forEach(function(p){d=r.arange(h).map(function(m){return f[h][m]*f[p][m]}),f[p][h]=(l[h][p]-r.sum(d))/f[h][h]})}),f},gauss_jacobi:function(l,c,f,d){for(var h=0,p=0,m=l.length,g=[],y=[],v=[],b,w,x,S;h<m;h++)for(g[h]=[],y[h]=[],v[h]=[],p=0;p<m;p++)h>p?(g[h][p]=l[h][p],y[h][p]=v[h][p]=0):h<p?(y[h][p]=l[h][p],g[h][p]=v[h][p]=0):(v[h][p]=l[h][p],g[h][p]=y[h][p]=0);for(x=r.multiply(r.multiply(r.inv(v),r.add(g,y)),-1),w=r.multiply(r.inv(v),c),b=f,S=r.add(r.multiply(x,f),w),h=2;i.abs(r.norm(r.subtract(S,b)))>d;)b=S,S=r.add(r.multiply(x,b),w),h++;return S},gauss_seidel:function(l,c,f,d){for(var h=0,p=l.length,m=[],g=[],y=[],v,b,w,x,S;h<p;h++)for(m[h]=[],g[h]=[],y[h]=[],v=0;v<p;v++)h>v?(m[h][v]=l[h][v],g[h][v]=y[h][v]=0):h<v?(g[h][v]=l[h][v],m[h][v]=y[h][v]=0):(y[h][v]=l[h][v],m[h][v]=g[h][v]=0);for(x=r.multiply(r.multiply(r.inv(r.add(y,m)),g),-1),w=r.multiply(r.inv(r.add(y,m)),c),b=f,S=r.add(r.multiply(x,f),w),h=2;i.abs(r.norm(r.subtract(S,b)))>d;)b=S,S=r.add(r.multiply(x,b),w),h=h+1;return S},SOR:function(l,c,f,d,h){for(var p=0,m=l.length,g=[],y=[],v=[],b,w,x,S,A;p<m;p++)for(g[p]=[],y[p]=[],v[p]=[],b=0;b<m;b++)p>b?(g[p][b]=l[p][b],y[p][b]=v[p][b]=0):p<b?(y[p][b]=l[p][b],g[p][b]=v[p][b]=0):(v[p][b]=l[p][b],g[p][b]=y[p][b]=0);for(S=r.multiply(r.inv(r.add(v,r.multiply(g,h))),r.subtract(r.multiply(v,1-h),r.multiply(y,h))),x=r.multiply(r.multiply(r.inv(r.add(v,r.multiply(g,h))),c),h),w=f,A=r.add(r.multiply(S,f),x),p=2;i.abs(r.norm(r.subtract(A,w)))>d;)w=A,A=r.add(r.multiply(S,w),x),p++;return A},householder:function(l){for(var c=l.length,f=l[0].length,d=0,h=[],p=[],m,g,y,v,b;d<c-1;d++){for(m=0,v=d+1;v<f;v++)m+=l[v][d]*l[v][d];for(b=l[d+1][d]>0?-1:1,m=b*i.sqrt(m),g=i.sqrt((m*m-l[d+1][d]*m)/2),h=r.zeros(c,1),h[d+1][0]=(l[d+1][d]-m)/(2*g),y=d+2;y<c;y++)h[y][0]=l[y][d]/(2*g);p=r.subtract(r.identity(c,f),r.multiply(r.multiply(h,r.transpose(h)),2)),l=r.multiply(p,r.multiply(l,p))}return l},QR:function(){var u=r.sum,l=r.arange;function c(f){var d=f.length,h=f[0].length,p=r.zeros(h,h);f=r.copy(f);var m,g,y;for(g=0;g<h;g++){for(p[g][g]=i.sqrt(u(l(d).map(function(v){return f[v][g]*f[v][g]}))),m=0;m<d;m++)f[m][g]=f[m][g]/p[g][g];for(y=g+1;y<h;y++)for(p[g][y]=u(l(d).map(function(v){return f[v][g]*f[v][y]})),m=0;m<d;m++)f[m][y]=f[m][y]-f[m][g]*p[g][y]}return[f,p]}return c}(),lstsq:function(){function u(c){c=r.copy(c);var f=c.length,d=r.identity(f);return r.arange(f-1,-1,-1).forEach(function(h){r.sliceAssign(d,{row:h},r.divide(r.slice(d,{row:h}),c[h][h])),r.sliceAssign(c,{row:h},r.divide(r.slice(c,{row:h}),c[h][h])),r.arange(h).forEach(function(p){var m=r.multiply(c[p][h],-1),g=r.slice(c,{row:p}),y=r.multiply(r.slice(c,{row:h}),m);r.sliceAssign(c,{row:p},r.add(g,y));var v=r.slice(d,{row:p}),b=r.multiply(r.slice(d,{row:h}),m);r.sliceAssign(d,{row:p},r.add(v,b))})}),d}function l(c,f){var d=!1;f[0].length===void 0&&(f=f.map(function(S){return[S]}),d=!0);var h=r.QR(c),p=h[0],m=h[1],g=c[0].length,y=r.slice(p,{col:{end:g}}),v=r.slice(m,{row:{end:g}}),b=u(v),w=r.transpose(y);w[0].length===void 0&&(w=[w]);var x=r.multiply(r.multiply(b,w),f);return x.length===void 0&&(x=[[x]]),d?x.map(function(S){return S[0]}):x}return l}(),jacobi:function(l){for(var c=1,f=l.length,d=r.identity(f,f),h=[],p,m,g,y,v,b,w,x;c===1;){for(b=l[0][1],y=0,v=1,m=0;m<f;m++)for(g=0;g<f;g++)m!=g&&b<i.abs(l[m][g])&&(b=i.abs(l[m][g]),y=m,v=g);for(l[y][y]===l[v][v]?w=l[y][v]>0?i.PI/4:-i.PI/4:w=i.atan(2*l[y][v]/(l[y][y]-l[v][v]))/2,x=r.identity(f,f),x[y][y]=i.cos(w),x[y][v]=-i.sin(w),x[v][y]=i.sin(w),x[v][v]=i.cos(w),d=r.multiply(d,x),p=r.multiply(r.multiply(r.inv(x),l),x),l=p,c=0,m=1;m<f;m++)for(g=1;g<f;g++)m!=g&&i.abs(l[m][g])>.001&&(c=1)}for(m=0;m<f;m++)h.push(l[m][m]);return[d,h]},rungekutta:function(l,c,f,d,h,p){var m,g,y,v,b;if(p===2)for(;d<=f;)m=c*l(d,h),g=c*l(d+c,h+m),y=h+(m+g)/2,h=y,d=d+c;if(p===4)for(;d<=f;)m=c*l(d,h),g=c*l(d+c/2,h+m/2),v=c*l(d+c/2,h+g/2),b=c*l(d+c,h+v),y=h+(m+2*g+2*v+b)/6,h=y,d=d+c;return h},romberg:function(l,c,f,d){for(var h=0,p=(f-c)/2,m=[],g=[],y=[],v,b,w,x,S;h<d/2;){for(S=l(c),w=c,x=0;w<=f;w=w+p,x++)m[x]=w;for(v=m.length,w=1;w<v-1;w++)S+=(w%2!==0?4:2)*l(m[w]);S=p/3*(S+l(f)),y[h]=S,p/=2,h++}for(b=y.length,v=1;b!==1;){for(w=0;w<b-1;w++)g[w]=(i.pow(4,v)*y[w+1]-y[w])/(i.pow(4,v)-1);b=g.length,y=g,g=[],v++}return y},richardson:function(l,c,f,d){function h(A,C){for(var N=0,k=A.length,D;N<k;N++)A[N]===C&&(D=N);return D}for(var p=i.abs(f-l[h(l,f)+1]),m=0,g=[],y=[],v,b,w,x,S;d>=p;)v=h(l,f+d),b=h(l,f),g[m]=(c[v]-2*c[b]+c[2*b-v])/(d*d),d/=2,m++;for(x=g.length,w=1;x!=1;){for(S=0;S<x-1;S++)y[S]=(i.pow(4,w)*g[S+1]-g[S])/(i.pow(4,w)-1);x=y.length,g=y,y=[],w++}return g},simpson:function(l,c,f,d){for(var h=(f-c)/d,p=l(c),m=[],g=c,y=0,v=1,b;g<=f;g=g+h,y++)m[y]=g;for(b=m.length;v<b-1;v++)p+=(v%2!==0?4:2)*l(m[v]);return h/3*(p+l(f))},hermite:function(l,c,f,d){for(var h=l.length,p=0,m=0,g=[],y=[],v=[],b=[],w;m<h;m++){for(g[m]=1,w=0;w<h;w++)m!=w&&(g[m]*=(d-l[w])/(l[m]-l[w]));for(y[m]=0,w=0;w<h;w++)m!=w&&(y[m]+=1/(l[m]-l[w]));v[m]=(1-2*(d-l[m])*y[m])*(g[m]*g[m]),b[m]=(d-l[m])*(g[m]*g[m]),p+=v[m]*c[m]+b[m]*f[m]}return p},lagrange:function(l,c,f){for(var d=0,h=0,p,m,g=l.length;h<g;h++){for(m=c[h],p=0;p<g;p++)h!=p&&(m*=(f-l[p])/(l[h]-l[p]));d+=m}return d},cubic_spline:function(l,c,f){for(var d=l.length,h=0,p,m=[],g=[],y=[],v=[],b=[],w=[],x=[];h<d-1;h++)b[h]=l[h+1]-l[h];for(y[0]=0,h=1;h<d-1;h++)y[h]=3/b[h]*(c[h+1]-c[h])-3/b[h-1]*(c[h]-c[h-1]);for(h=1;h<d-1;h++)m[h]=[],g[h]=[],m[h][h-1]=b[h-1],m[h][h]=2*(b[h-1]+b[h]),m[h][h+1]=b[h],g[h][0]=y[h];for(v=r.multiply(r.inv(m),g),p=0;p<d-1;p++)w[p]=(c[p+1]-c[p])/b[p]-b[p]*(v[p+1][0]+2*v[p][0])/3,x[p]=(v[p+1][0]-v[p][0])/(3*b[p]);for(p=0;p<d&&!(l[p]>f);p++);return p-=1,c[p]+(f-l[p])*w[p]+r.sq(f-l[p])*v[p]+(f-l[p])*r.sq(f-l[p])*x[p]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(l){var c=l.length,f=l[0].length,d=0,h,p,m=[],g=[],y=[],v=[],b=[],w=[],x=[],S=[],A=[],C=[];for(d=0;d<c;d++)m[d]=r.sum(l[d])/f;for(d=0;d<f;d++)for(x[d]=[],h=0;h<c;h++)x[d][h]=l[h][d]-m[h];for(x=r.transpose(x),d=0;d<c;d++)for(S[d]=[],h=0;h<c;h++)S[d][h]=r.dot([x[d]],[x[h]])/(f-1);for(y=r.jacobi(S),A=y[0],g=y[1],C=r.transpose(A),d=0;d<g.length;d++)for(h=d;h<g.length;h++)g[d]<g[h]&&(p=g[d],g[d]=g[h],g[h]=p,v=C[d],C[d]=C[h],C[h]=v);for(w=r.transpose(x),d=0;d<c;d++)for(b[d]=[],h=0;h<w.length;h++)b[d][h]=r.dot([C[d]],[w[h]]);return[l,g,C,b]}}),function(u){for(var l=0;l<u.length;l++)(function(c){r.fn[c]=function(f,d){var h=this;return d?(setTimeout(function(){d.call(h,r.fn[c].call(h,f))},15),this):typeof r[c](this,f)=="number"?r[c](this,f):r(r[c](this,f))}})(u[l])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(n,Math),function(r,i){var s=[].slice,o=r.utils.isNumber,a=r.utils.isArray;r.extend({zscore:function(){var c=s.call(arguments);return o(c[1])?(c[0]-c[1])/c[2]:(c[0]-r.mean(c[1]))/r.stdev(c[1],c[2])},ztest:function(){var c=s.call(arguments),f;return a(c[1])?(f=r.zscore(c[0],c[1],c[3]),c[2]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2):c.length>2?(f=r.zscore(c[0],c[1],c[2]),c[3]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2):(f=c[0],c[1]===1?r.normal.cdf(-i.abs(f),0,1):r.normal.cdf(-i.abs(f),0,1)*2)}}),r.extend(r.fn,{zscore:function(c,f){return(c-this.mean())/this.stdev(f)},ztest:function(c,f,d){var h=i.abs(this.zscore(c,d));return f===1?r.normal.cdf(-h,0,1):r.normal.cdf(-h,0,1)*2}}),r.extend({tscore:function(){var c=s.call(arguments);return c.length===4?(c[0]-c[1])/(c[2]/i.sqrt(c[3])):(c[0]-r.mean(c[1]))/(r.stdev(c[1],!0)/i.sqrt(c[1].length))},ttest:function(){var c=s.call(arguments),f;return c.length===5?(f=i.abs(r.tscore(c[0],c[1],c[2],c[3])),c[4]===1?r.studentt.cdf(-f,c[3]-1):r.studentt.cdf(-f,c[3]-1)*2):o(c[1])?(f=i.abs(c[0]),c[2]==1?r.studentt.cdf(-f,c[1]-1):r.studentt.cdf(-f,c[1]-1)*2):(f=i.abs(r.tscore(c[0],c[1])),c[2]==1?r.studentt.cdf(-f,c[1].length-1):r.studentt.cdf(-f,c[1].length-1)*2)}}),r.extend(r.fn,{tscore:function(c){return(c-this.mean())/(this.stdev(!0)/i.sqrt(this.cols()))},ttest:function(c,f){return f===1?1-r.studentt.cdf(i.abs(this.tscore(c)),this.cols()-1):r.studentt.cdf(-i.abs(this.tscore(c)),this.cols()-1)*2}}),r.extend({anovafscore:function(){var c=s.call(arguments),f,d,h,p,m,g,y,v;if(c.length===1){for(m=new Array(c[0].length),y=0;y<c[0].length;y++)m[y]=c[0][y];c=m}for(d=new Array,y=0;y<c.length;y++)d=d.concat(c[y]);for(h=r.mean(d),f=0,y=0;y<c.length;y++)f=f+c[y].length*i.pow(r.mean(c[y])-h,2);for(f/=c.length-1,g=0,y=0;y<c.length;y++)for(p=r.mean(c[y]),v=0;v<c[y].length;v++)g+=i.pow(c[y][v]-p,2);return g/=d.length-c.length,f/g},anovaftest:function(){var c=s.call(arguments),f,d,h,p;if(o(c[0]))return 1-r.centralF.cdf(c[0],c[1],c[2]);var m=r.anovafscore(c);for(f=c.length-1,h=0,p=0;p<c.length;p++)h=h+c[p].length;return d=h-f-1,1-r.centralF.cdf(m,f,d)},ftest:function(c,f,d){return 1-r.centralF.cdf(c,f,d)}}),r.extend(r.fn,{anovafscore:function(){return r.anovafscore(this.toArray())},anovaftes:function(){var c=0,f;for(f=0;f<this.length;f++)c=c+this[f].length;return r.ftest(this.anovafscore(),this.length-1,c-this.length)}}),r.extend({qscore:function(){var c=s.call(arguments),f,d,h,p,m;return o(c[0])?(f=c[0],d=c[1],h=c[2],p=c[3],m=c[4]):(f=r.mean(c[0]),d=r.mean(c[1]),h=c[0].length,p=c[1].length,m=c[2]),i.abs(f-d)/(m*i.sqrt((1/h+1/p)/2))},qtest:function(){var c=s.call(arguments),f;c.length===3?(f=c[0],c=c.slice(1)):c.length===7?(f=r.qscore(c[0],c[1],c[2],c[3],c[4]),c=c.slice(5)):(f=r.qscore(c[0],c[1],c[2]),c=c.slice(3));var d=c[0],h=c[1];return 1-r.tukey.cdf(f,h,d-h)},tukeyhsd:function(c){for(var f=r.pooledstdev(c),d=c.map(function(v){return r.mean(v)}),h=c.reduce(function(v,b){return v+b.length},0),p=[],m=0;m<c.length;++m)for(var g=m+1;g<c.length;++g){var y=r.qtest(d[m],d[g],c[m].length,c[g].length,f,h,c.length);p.push([[m,g],y])}return p}}),r.extend({normalci:function(){var c=s.call(arguments),f=new Array(2),d;return c.length===4?d=i.abs(r.normal.inv(c[1]/2,0,1)*c[2]/i.sqrt(c[3])):d=i.abs(r.normal.inv(c[1]/2,0,1)*r.stdev(c[2])/i.sqrt(c[2].length)),f[0]=c[0]-d,f[1]=c[0]+d,f},tci:function(){var c=s.call(arguments),f=new Array(2),d;return c.length===4?d=i.abs(r.studentt.inv(c[1]/2,c[3]-1)*c[2]/i.sqrt(c[3])):d=i.abs(r.studentt.inv(c[1]/2,c[2].length-1)*r.stdev(c[2],!0)/i.sqrt(c[2].length)),f[0]=c[0]-d,f[1]=c[0]+d,f},significant:function(c,f){return c<f}}),r.extend(r.fn,{normalci:function(c,f){return r.normalci(c,f,this.toArray())},tci:function(c,f){return r.tci(c,f,this.toArray())}});function u(l,c,f,d){if(l>1||f>1||l<=0||f<=0)throw new Error("Proportions should be greater than 0 and less than 1");var h=(l*c+f*d)/(c+d),p=i.sqrt(h*(1-h)*(1/c+1/d));return(l-f)/p}r.extend(r.fn,{oneSidedDifferenceOfProportions:function(c,f,d,h){var p=u(c,f,d,h);return r.ztest(p,1)},twoSidedDifferenceOfProportions:function(c,f,d,h){var p=u(c,f,d,h);return r.ztest(p,2)}})}(n,Math),n.models=function(){function r(u){var l=u[0].length,c=n.arange(l).map(function(f){var d=n.arange(l).filter(function(h){return h!==f});return i(n.col(u,f).map(function(h){return h[0]}),n.col(u,d))});return c}function i(u,l){var c=u.length,f=l[0].length-1,d=c-f-1,h=n.lstsq(l,u),p=n.multiply(l,h.map(function(x){return[x]})).map(function(x){return x[0]}),m=n.subtract(u,p),g=n.mean(u),y=n.sum(p.map(function(x){return Math.pow(x-g,2)})),v=n.sum(u.map(function(x,S){return Math.pow(x-p[S],2)})),b=y+v,w=y/b;return{exog:l,endog:u,nobs:c,df_model:f,df_resid:d,coef:h,predict:p,resid:m,ybar:g,SST:b,SSE:y,SSR:v,R2:w}}function s(u){var l=r(u.exog),c=Math.sqrt(u.SSR/u.df_resid),f=l.map(function(g){var y=g.SST,v=g.R2;return c/Math.sqrt(y*(1-v))}),d=u.coef.map(function(g,y){return(g-0)/f[y]}),h=d.map(function(g){var y=n.studentt.cdf(g,u.df_resid);return(y>.5?1-y:y)*2}),p=n.studentt.inv(.975,u.df_resid),m=u.coef.map(function(g,y){var v=p*f[y];return[g-v,g+v]});return{se:f,t:d,p:h,sigmaHat:c,interval95:m}}function o(u){var l=u.R2/u.df_model/((1-u.R2)/u.df_resid),c=function(d,h,p){return n.beta.cdf(d/(p/h+d),h/2,p/2)},f=1-c(l,u.df_model,u.df_resid);return{F_statistic:l,pvalue:f}}function a(u,l){var c=i(u,l),f=s(c),d=o(c),h=1-(1-c.R2)*((c.nobs-1)/c.df_resid);return c.t=f,c.f=d,c.adjust_R2=h,c}return{ols:a}}(),n.extend({buildxmatrix:function(){for(var i=new Array(arguments.length),s=0;s<arguments.length;s++){var o=[1];i[s]=o.concat(arguments[s])}return n(i)},builddxmatrix:function(){for(var i=new Array(arguments[0].length),s=0;s<arguments[0].length;s++){var o=[1];i[s]=o.concat(arguments[0][s])}return n(i)},buildjxmatrix:function(i){for(var s=new Array(i.length),o=0;o<i.length;o++)s[o]=i[o];return n.builddxmatrix(s)},buildymatrix:function(i){return n(i).transpose()},buildjymatrix:function(i){return i.transpose()},matrixmult:function(i,s){var o,a,u,l,c;if(i.cols()==s.rows()){if(s.rows()>1){for(l=[],o=0;o<i.rows();o++)for(l[o]=[],a=0;a<s.cols();a++){for(c=0,u=0;u<i.cols();u++)c+=i.toArray()[o][u]*s.toArray()[u][a];l[o][a]=c}return n(l)}for(l=[],o=0;o<i.rows();o++)for(l[o]=[],a=0;a<s.cols();a++){for(c=0,u=0;u<i.cols();u++)c+=i.toArray()[o][u]*s.toArray()[a];l[o][a]=c}return n(l)}},regress:function(i,s){var o=n.xtranspxinv(i),a=i.transpose(),u=n.matrixmult(n(o),a);return n.matrixmult(u,s)},regresst:function(i,s,o){var a=n.regress(i,s),u={};u.anova={};var l=n.jMatYBar(i,a);u.yBar=l;var c=s.mean();u.anova.residuals=n.residuals(s,l),u.anova.ssr=n.ssr(l,c),u.anova.msr=u.anova.ssr/(i[0].length-1),u.anova.sse=n.sse(s,l),u.anova.mse=u.anova.sse/(s.length-(i[0].length-1)-1),u.anova.sst=n.sst(s,c),u.anova.mst=u.anova.sst/(s.length-1),u.anova.r2=1-u.anova.sse/u.anova.sst,u.anova.r2<0&&(u.anova.r2=0),u.anova.fratio=u.anova.msr/u.anova.mse,u.anova.pvalue=n.anovaftest(u.anova.fratio,i[0].length-1,s.length-(i[0].length-1)-1),u.anova.rmse=Math.sqrt(u.anova.mse),u.anova.r2adj=1-u.anova.mse/u.anova.mst,u.anova.r2adj<0&&(u.anova.r2adj=0),u.stats=new Array(i[0].length);for(var f=n.xtranspxinv(i),d,h,p,m=0;m<a.length;m++)d=Math.sqrt(u.anova.mse*Math.abs(f[m][m])),h=Math.abs(a[m]/d),p=n.ttest(h,s.length-i[0].length-1,o),u.stats[m]=[a[m],d,h,p];return u.regress=a,u},xtranspx:function(i){return n.matrixmult(i.transpose(),i)},xtranspxinv:function(i){var s=n.matrixmult(i.transpose(),i),o=n.inv(s);return o},jMatYBar:function(i,s){var o=n.matrixmult(i,s);return new n(o)},residuals:function(i,s){return n.matrixsubtract(i,s)},ssr:function(i,s){for(var o=0,a=0;a<i.length;a++)o+=Math.pow(i[a]-s,2);return o},sse:function(i,s){for(var o=0,a=0;a<i.length;a++)o+=Math.pow(i[a]-s[a],2);return o},sst:function(i,s){for(var o=0,a=0;a<i.length;a++)o+=Math.pow(i[a]-s,2);return o},matrixsubtract:function(i,s){for(var o=new Array(i.length),a=0;a<i.length;a++){o[a]=new Array(i[a].length);for(var u=0;u<i[a].length;u++)o[a][u]=i[a][u]-s[a][u]}return n(o)}}),n.jStat=n,n})})(EMe);var Mjt=EMe.exports;const lQ=Rf(Mjt);function pL(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t;if(r<=0)throw new Error("Scale parameter omega must be positive");if(i<=0)throw new Error("Degrees of freedom nu must be positive");if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(s))throw new Error("All parameters must be finite");const o=(e-n)/r,a=lQ.studentt.pdf(o,i),u=s*o*Math.sqrt((i+1)/(i+o*o)),l=lQ.studentt.cdf(u,i+1);return 2/r*a*l}function TMe(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t;if(r<=0)throw new Error("Scale parameter omega must be positive");if(i<=0)throw new Error("Degrees of freedom nu must be positive");if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(s))throw new Error("All parameters must be finite");if(!Number.isFinite(e))return e>0?1:0;if(Math.abs(s)<1e-10){const d=(e-n)/r;return lQ.studentt.cdf(d,i)}if(Math.abs(e-n)<1e-10)return .5;const o=(e-n)/r;if(o<-100)return 0;if(o>100)return 1;const a=Math.min(n-10*r,e-.1),u=1e3,l=(e-a)/u;let c=0,f=pL(a,t);for(let d=1;d<=u;d+=1){const h=a+d*l,p=pL(h,t);c+=(f+p)*.5*l,f=p}return Math.max(0,Math.min(1,c))}function SMe(e,t=[-5,5],n=.01){const{xi:r,omega:i,nu:s,alpha:o}=e;if(i<=0||s<=0)throw new Error("Scale parameter omega and degrees of freedom nu must be positive");const a=[],u=Math.floor(t[0]/n)*n,l=Math.ceil(t[1]/n)*n;for(let d=u;d<=l;d+=n){const h=Number(d.toFixed(10));a.push(h)}const c=a.map(d=>{try{return pL(d,e)}catch(h){return console.warn(`Error calculating PDF at x=${d}:`,h),0}}),f=a.map(d=>{try{return TMe(d,e)}catch(h){console.warn(`Error calculating CDF at x=${d}:`,h);const p=(d-r)/i;return p<0?.5*(1+Math.tanh(p)):.5+.5*(1-Math.exp(-p))}});return{xVals:a,pdfVals:c,cdfVals:f}}function Fjt(e,t){let n=0,r=e.xVals.length-1;const i=e.xVals.findIndex(u=>Math.abs(u-t)<1e-10);if(i>=0)return{pdf:e.pdfVals[i],cdf:e.cdfVals[i]};for(;n<=r;){const u=Math.floor((n+r)/2);e.xVals[u]<t?n=u+1:r=u-1}if(r=Math.max(0,r),n=Math.min(e.xVals.length-1,n),r>=n)return{pdf:e.pdfVals[n],cdf:e.cdfVals[n]};const s=(t-e.xVals[r])/(e.xVals[n]-e.xVals[r]),o=e.pdfVals[r]*(1-s)+e.pdfVals[n]*s,a=e.cdfVals[r]*(1-s)+e.cdfVals[n]*s;return{pdf:o,cdf:a}}const Bjt=Object.freeze(Object.defineProperty({__proto__:null,findDistributionValue:Fjt,generateDistributionData:SMe,skewTCDF:TMe,skewTPDF:pL},Symbol.toStringTag,{value:"Module"}));function AMe({distributionData:e,showPDF:t,xScale:n,yScale:r,setSelectedPoint:i,setNearestPoint:s,setCursor:o,setAnswer:a,curveProximityThreshold:u=50}){const l=R.useCallback((p,m)=>{if(!e)return null;const g=t?e.pdfVals:e.cdfVals,y=n.invert(p);r.invert(m);const v=Lh(k=>k).left,b=v(e.xVals,y);if(b<=0)return{x:e.xVals[0],y:g[0]};if(b>=e.xVals.length){const k=e.xVals.length-1;return{x:e.xVals[k],y:g[k]}}const w=e.xVals[b-1],x=e.xVals[b],S=g[b-1],A=g[b];return Math.abs(y-w)>Math.abs(y-x)?{x,y:A}:{x:w,y:S}},[e,t,n,r]),c=R.useCallback((p,m)=>{const g=l(p,m);if(!g)return!1;const y=n(g.x),v=r(g.y);return Math.sqrt((p-y)**2+(m-v)**2)<u},[u,l,n,r]),f=R.useCallback(p=>{if(!e)return;const g=p.currentTarget.getBoundingClientRect(),y=p.clientX-g.left,v=p.clientY-g.top,b=c(y,v);if(o({x:y,y:v,isNearCurve:b}),b){const w=l(y,v);s(w)}else s(null)},[e,o,c,l,s]),d=R.useCallback(p=>{if(!e)return;const g=p.currentTarget.getBoundingClientRect(),y=p.clientX-g.left,v=p.clientY-g.top;if(c(y,v)){const w=l(y,v);w?(i(w),a({status:!0,answers:{"location-x":w.x,"location-y":w.y}})):a({status:!1,answers:{"location-x":null,"location-y":null}})}},[e,l,i,a,c]);return{handleMouseLeave:R.useCallback(()=>{o(null),s(null)},[o,s]),handleClick:d,handleMouseMove:f,findClosestPoint:l,isCursorNearCurve:c}}const jjt=Object.freeze(Object.defineProperty({__proto__:null,useChartInteractions:AMe},Symbol.toStringTag,{value:"Module"})),_q={height:450,width:600,margin:{top:15,right:15,left:50,bottom:40}};function Ujt(){return{xi:Number((Math.random()*8-4).toFixed(3)),omega:Number((.3+Math.random()*1.2).toFixed(3)),nu:3+Math.floor(Math.random()*27),alpha:Number((Math.random()*10-5).toFixed(3))}}function zjt({distributionData:e,showPDF:t,training:n,taskType:r,cursor:i,setCursor:s,selectedPoint:o,setSelectedPoint:a,setAnswer:u,currentParams:l}){const{xScale:c,yScale:f}=Yx(),[d,h]=R.useState(null),{handleMouseMove:p,handleClick:m,handleMouseLeave:g,findClosestPoint:y}=AMe({distributionData:e,showPDF:t,xScale:c,yScale:f,setSelectedPoint:a,setCursor:s,setNearestPoint:h,setAnswer:b=>{u({status:b.status,answers:{...b.answers,currentParams:l}})}}),v=R.useMemo(()=>{if(!n)return{x:null,y:null,tangentLine:null};if(!o&&(!i||!i.isNearCurve))return{x:null,y:null,tangentLine:null};const b=i!=null&&i.isNearCurve?d:o;if(!b)return{x:null,y:null,tangentLine:null};const w=Lh(x=>x).left(e.xVals,b.x);switch(r){case"pdf_median":return b?(w>0&&w<e.pdfVals.length-1&&(e.pdfVals[w+1]-e.pdfVals[w-1])/(e.xVals[w+1]-e.xVals[w-1]),{x:b.x,y:null,tangentLine:null}):{x:null,y:null,tangentLine:null};case"pdf_mode":return{x:null,y:b.y,tangentLine:null};case"cdf_median":return{x:null,y:.5,tangentLine:null};case"cdf_mode":return{x:null,y:null,tangentLine:{point:b,slope:(e.cdfVals[w+1]-e.cdfVals[w-1])/(e.xVals[w+1]-e.xVals[w-1])}};default:return{x:null,y:null,tangentLine:null}}},[i,o,n,r,e,d]);return E.jsx(xMe,{distributionData:e,isTraining:n,showPDF:t,onClick:m,onMouseMove:p,onMouseLeave:g,cursor:i,selectedPoint:o,nearestPoint:d,guidelines:v,axisLabels:{x:"Value",y:t?"Density":"Cumulative Probability"}})}function Vjt({parameters:e,setAnswer:t}){const{params:n,showPDF:r,training:i,taskType:s}=e,[o,a]=R.useState(()=>n||Ujt()),[u,l]=R.useState(null),[c,f]=R.useState(null),[d,h]=R.useState(null),p=R.useMemo(()=>SMe(o),[o]);R.useMemo(()=>[p.xVals[0],p.xVals[p.xVals.length-1]],[p]);const m=R.useCallback(()=>{f(null),t({status:!1,answers:{"param-xi":o.xi,"param-omega":o.omega,"param-nu":o.nu,"param-alpha":o.alpha}})},[t,o]),g=R.useCallback(y=>{h(y.answers);const v={...y.answers,"param-xi":o.xi,"param-omega":o.omega,"param-nu":o.nu,"param-alpha":o.alpha};t({status:y.status,answers:v})},[t,o]);return R.useEffect(()=>{t({status:!1,answers:{"param-xi":o.xi,"param-omega":o.omega,"param-nu":o.nu,"param-alpha":o.alpha}})},[o,t]),E.jsx(yl,{p:"md",children:E.jsxs("div",{className:"mt-4",children:[E.jsx(gMe,{width:_q.width,height:_q.height,margin:_q.margin,xDomain:[-5,5],yDomain:[0,1],children:E.jsx(zjt,{distributionData:p,showPDF:r,training:i,taskType:s,cursor:u,setCursor:l,selectedPoint:c,setSelectedPoint:f,setAnswer:g,currentParams:o})}),E.jsx(on,{onClick:m,mt:"md",children:"Clear Point"}),E.jsx(ba,{h:"xl"}),E.jsxs(Ue,{size:"md",c:"dimmed",children:["Debug - Random Parameters: xi=",o.xi.toFixed(2),", omega=",o.omega.toFixed(2),", nu=",o.nu,", alpha=",o.alpha.toFixed(2)]})]})})}const Hjt=Object.freeze(Object.defineProperty({__proto__:null,default:Vjt},Symbol.toStringTag,{value:"Module"}));var CMe=(e=>(e.PDF_MEDIAN="pdf_median",e.PDF_MODE="pdf_mode",e.CDF_MEDIAN="cdf_median",e.CDF_MODE="cdf_mode",e))(CMe||{});const qjt=Object.freeze(Object.defineProperty({__proto__:null,TaskType:CMe},Symbol.toStringTag,{value:"Module"})),Wjt=e=>e*Math.PI/180;function Gjt({parameters:e,setAnswer:t}){var w;const n=R.useRef(null),r=R.useRef(null),i=R.useRef(null),{blindspotAngle:s}=e,o=Vr(x=>x.answers),a=Number((w=o.calibration_3.answer)==null?void 0:w.pixelsPerMM),[u,l]=R.useState([]),[c,f]=R.useState(!1),[d,h]=R.useState(null),[p,m]=R.useState(5),g=R.useCallback(x=>{if(!x.length||!a||!r.current)return;const S=x.reduce((D,L)=>D+L,0)/x.length,C=r.current.getBoundingClientRect().left,k=Math.abs(S-C)/a/Math.tan(Wjt(s));h(k),f(!1)},[s,a]),y=()=>{n.current&&(n.current.style.left="740px")},v=R.useCallback(()=>{if(!n.current||!r.current||!a||u.length>=5)return;f(!0);let x=!1,S=0;const A=1e3,C=N=>{if(!n.current)return;if(x){N-S>=A&&(x=!1,n.current.style.left="740px"),i.current=requestAnimationFrame(C);return}const D=parseInt(n.current.style.left||"740",10)-2;D<=0?(x=!0,S=N):n.current.style.left=`${D}px`,i.current=requestAnimationFrame(C)};i.current=requestAnimationFrame(C)},[u,a]),b=()=>{i.current&&cancelAnimationFrame(i.current),f(!1)};return R.useEffect(()=>{d!==null&&u.length===5&&t({status:!0,answers:{"dist-calibration-MM":d,"dist-calibration-CM":d/10,"ball-positions":JSON.stringify(u)}})},[d,u,t]),R.useEffect(()=>{const x=S=>{if(S.code==="Space"){if(S.preventDefault(),!c)v();else if(n.current){b();const C=n.current.getBoundingClientRect().left;l(N=>{const k=[...N,C];return k.length>=5&&g(k),k}),m(N=>N-1),y()}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[c,v,g]),R.useEffect(()=>(h(null),f(!1),l([]),m(5),y(),()=>{h(null),f(!1),l([]),m(5)}),[]),R.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]),a?E.jsx(yl,{size:"md",children:E.jsxs($i,{gap:"md",children:[E.jsx(Ue,{children:"Now we will quickly measure how far away you are sitting. "}),E.jsxs($i,{gap:"xs",children:[E.jsxs(ao,{children:[E.jsxs(ao.Item,{children:["Put your left hand on the ",E.jsx("b",{children:"space bar"}),"."]}),E.jsx(ao.Item,{children:"Cover your right eye with your right hand."}),E.jsx(ao.Item,{children:"Using your left eye, focus on the black square. Keep your focus on the black square."}),E.jsxs(ao.Item,{children:["The ",E.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"red ball"})," will disappear as it moves from right to left. Press the space bar as soon as the ball disappears."]})]}),E.jsx(Ue,{ta:"center",children:u.length>=5?"All measurements completed!":"Press the space bar when you are ready to begin."})]}),E.jsxs("div",{style:{position:"relative",width:"900px",height:"100px",backgroundColor:"#ffffff"},children:[E.jsx("div",{ref:n,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(255, 0, 0)",borderRadius:"30px",left:"740px"}}),E.jsx("div",{ref:r,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(0, 0, 0)",left:"870px"}})]}),E.jsxs(Ue,{ta:"center",children:["Remaining measurements: ",5-u.length]}),d&&E.jsxs($i,{gap:"xs",children:[E.jsx(Ue,{fw:700,size:"lg",children:"Viewing Distance Results"}),E.jsxs(Ue,{children:["Estimated Viewing Distance: ",(d/10).toFixed(1)," cm"]}),E.jsxs(Ue,{children:["Number of measurements: ",u.length]})]})]})}):E.jsx("div",{children:"Please complete card calibration first."})}const Yjt=Object.freeze(Object.defineProperty({__proto__:null,default:Gjt},Symbol.toStringTag,{value:"Module"})),Kjt="/vis-decode/assets/costco_card-B3j7PHjO.png";function Xjt({parameters:e,setAnswer:t,itemWidthMM:n=85.6,itemHeightMM:r=53.98,fixedCorner:i="top-left"}){const[s,o]=R.useState(300),[a,u]=R.useState(null),[l,c]=R.useState(!1),[f,d]=R.useState({min:100,max:500}),{taskid:h}=e,p=R.useRef(null),m=R.useRef(null),g=r/n;R.useEffect(()=>{const S=()=>{const A=window.innerWidth;d({min:Math.round(A*.1),max:Math.round(A*.8)})};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const y=S=>Math.round(S*g),v=S=>S/n,b=S=>{o(S)},w=()=>{if(!p.current)return;const S=v(s);u(S),t({status:!0,answers:{[h]:S}}),c(!0)},x=()=>({position:"relative",width:"100%",height:`${y(f.max)}px`,display:"flex",justifyContent:i.includes("right")?"flex-end":"flex-start",alignItems:i.includes("bottom")?"flex-end":"flex-start"});return E.jsx(yl,{size:"md",children:E.jsxs($i,{gap:"lg",children:[E.jsx(Ue,{size:"md",children:" Drag the slider until the image is the same size as a credit card held up to the screen."}),E.jsx(Ue,{size:"md",children:" You can use any card this is the same size as a credit card, like a membership card or driver's license."}),E.jsx(Ue,{size:"md",children:" If you do not have access to a real card, you can use a ruler to measure the image width to 3.37 inches or 85.6mm. "}),E.jsx(Ue,{size:"md",children:" Once you are finished, click 'Confirm Size' and then 'Next'. "}),E.jsx(on,{onClick:w,size:"lg",variant:"transparent",children:"Confirm Size"}),E.jsx(_b,{min:f.min,max:f.max,value:s,label:null,onChange:b,styles:{root:{width:"100%"},track:{cursor:"pointer"},thumb:{cursor:"grab"},bar:{cursor:"pointer"}}}),E.jsx("div",{ref:m,style:x(),children:E.jsx("div",{ref:p,style:{width:`${s}px`,height:`${y(s)}px`,overflow:"hidden"},children:E.jsx("img",{src:Kjt,alt:"Credit Card",style:{width:"100%",height:"100%",objectFit:"contain"}})})}),l&&E.jsxs("div",{style:{textAlign:"center",color:"green"},children:["Calibration Complete - Pixels per MM: ",a==null?void 0:a.toFixed(2)]})]})})}const Qjt=Object.freeze(Object.defineProperty({__proto__:null,default:Xjt},Symbol.toStringTag,{value:"Module"})),Jjt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function Zjt(e){const t=Vr(r=>r.answers);return R.useMemo(()=>{const r=e.map(s=>Object.keys(t).filter(o=>{const a=o.split("_");return a.slice(0,a.length-1).join("_")===s})).flat(),i={};return r.forEach(s=>{s&&(Object.keys(t[s].answer).length>0?i[s]=t[s].answer:i[s]=null)}),i},[t,e])}const IMe=R.createContext(null);function Zse({width:e,height:t,margin:n,xDomain:r,yDomain:i,children:s}){const o=R.useMemo(()=>{const a=xa().domain(r).range([n.left,e-n.right]),u=xa().domain(i).range([t-n.bottom,n.top]);return{xScale:a,yScale:u,width:e,height:t,margin:n}},[e,t,n,r,i]);return E.jsx(IMe.Provider,{value:o,children:s})}function Kx(){const e=R.useContext(IMe);if(!e)throw new Error("useScales must be used within a ScalesProvider");return e}const eUt=Object.freeze(Object.defineProperty({__proto__:null,ScalesProvider:Zse,useScales:Kx},Symbol.toStringTag,{value:"Module"}));function cQ({value:e,min:t,max:n,onChange:r,onChangeEnd:i}){const[s,o]=R.useState(!1),a=u=>{o(!0),i(u)};return E.jsx(_b,{value:s?e:0,onChange:r,onChangeEnd:a,min:t,max:n,step:.01,label:u=>u.toFixed(2),styles:{root:{width:"100%"},track:{width:"100%",backgroundColor:"#e9ecef"},bar:{backgroundColor:"#e9ecef"},thumb:{display:s?"block":"none"}},"data-source":"block-5-sliders"})}const tUt=Object.freeze(Object.defineProperty({__proto__:null,default:cQ},Symbol.toStringTag,{value:"Module"})),wq={margin:{top:15,right:15,bottom:40,left:50},height:450,width:600};function nUt({xSliderValue:e,setXSliderValue:t,ySliderValue:n,setYSliderValue:r,setAnswer:i,axisLabels:s,children:o}){const{xScale:a,yScale:u,width:l,height:c,margin:f}=Kx(),d=R.useRef(null),h=R.useRef(null);R.useEffect(()=>{d.current&&cr(d.current).call(vre(a)).attr("transform",`translate(0,${c-f.bottom})`).selectAll("text").style("font-size","12px").style("stroke-width","2px"),h.current&&cr(h.current).call(bre(u)).attr("transform",`translate(${f.left},0)`).selectAll("text").style("font-size","12px").style("stroke-width","2px")},[a,u,f,c]);const p=R.useCallback(b=>{t(b)},[t]),m=R.useCallback(b=>{r(b)},[r]),g=R.useCallback(b=>{i({status:!0,answers:{"x-slider":b,"y-slider":n??0}})},[i,n]),y=R.useCallback(b=>{i({status:!0,answers:{"x-slider":e??0,"y-slider":b}})},[i,e]),v=R.useMemo(()=>s?E.jsxs(E.Fragment,{children:[s.x&&E.jsx("text",{x:l/2,y:c-5,textAnchor:"middle",style:{fontSize:"12px",fill:"#666"},children:s.x}),s.y&&E.jsx("text",{x:-c/2,y:15,textAnchor:"middle",transform:"rotate(-90)",style:{fontSize:"12px",fill:"#666"},children:s.y})]}):null,[s,l,c]);return E.jsxs(E.Fragment,{children:[E.jsx(ba,{}),E.jsx(Ue,{size:"md",children:" X Slider "}),E.jsx(cQ,{min:-5,max:5,value:e??0,onChange:p,onChangeEnd:g}),E.jsx(Ue,{size:"md",children:" Y Slider "}),E.jsx(cQ,{min:0,max:1,value:n??0,onChange:m,onChangeEnd:y}),E.jsx(ba,{}),E.jsxs("svg",{width:l,height:c,children:[E.jsx("g",{ref:d}),E.jsx("g",{ref:h}),v,e!==void 0&&E.jsx("circle",{cx:a(e),cy:u(0),r:5,fill:"blue",fillOpacity:.6,stroke:"white",strokeWidth:1.5,pointerEvents:"none"}),n!==void 0&&E.jsx("circle",{cx:a(-5),cy:u(n),r:5,fill:"green",stroke:"white",strokeWidth:1.5,fillOpacity:.6,pointerEvents:"none"}),o]})]})}function rUt({parameters:e,setAnswer:t}){const n=Zjt(["task1_test_1","task1_test_2","task1_test_3"]);console.log(n);const[r,i]=R.useState(0),[s,o]=R.useState(0);return E.jsx($i,{children:E.jsx(Zse,{width:wq.width,height:wq.height,margin:wq.margin,xDomain:[-5,5],yDomain:[0,1],children:E.jsx(nUt,{xSliderValue:r,ySliderValue:s,setXSliderValue:i,setYSliderValue:o,setAnswer:t,axisLabels:{x:"X Axis",y:"Y Axis"}})})})}const iUt=Object.freeze(Object.defineProperty({__proto__:null,default:rUt},Symbol.toStringTag,{value:"Module"}));function kMe({data:e,strokeColor:t="currentColor",strokeWidth:n=2}){const{xScale:r,yScale:i}=Kx(),s=gF().x(o=>r(o.x)).y(o=>i(o.y));return E.jsx("path",{d:s(e)||"",fill:"none",stroke:t,strokeWidth:n,"data-source":"Line"})}const sUt=Object.freeze(Object.defineProperty({__proto__:null,default:kMe},Symbol.toStringTag,{value:"Module"}));function RMe({point:e}){const{xScale:t,yScale:n}=Kx();return e?E.jsx("circle",{cx:t(e.x),cy:n(e.y),r:4,fill:"#ff0000",pointerEvents:"none","data-source":"ClickMarker"}):null}const oUt=Object.freeze(Object.defineProperty({__proto__:null,default:RMe},Symbol.toStringTag,{value:"Module"}));function NMe({xValue:e,yValue:t,tangentLine:n}){const{xScale:r,yScale:i,width:s,height:o,margin:a}=Kx(),u=()=>e==null?null:E.jsx("line",{x1:r(e),x2:r(e),y1:a.top,y2:o-a.bottom,stroke:"#666",strokeWidth:1.5,strokeDasharray:"4","data-source":"Guidelines-vertical"}),l=()=>t==null?null:E.jsx("line",{x1:a.left,x2:s-a.right,y1:i(t),y2:i(t),stroke:"#666",strokeWidth:1.5,strokeDasharray:"4","data-source":"Guidelines-horizontal"}),c=()=>{if(!n)return null;const f=(r.domain()[1]-r.domain()[0])*.2,d=n.point.x-f,h=n.point.y-f*n.slope,p=n.point.x+f,m=n.point.y+f*n.slope;return E.jsx("line",{x1:r(d),y1:i(h),x2:r(p),y2:i(m),stroke:"#666",strokeWidth:1.5,strokeDasharray:"4","data-source":"Guidelines-tangent"})};return E.jsxs("g",{children:[u(),l(),c()]})}const aUt=Object.freeze(Object.defineProperty({__proto__:null,default:NMe},Symbol.toStringTag,{value:"Module"}));function PMe({distributionData:e,showPDF:t=!0,strokeColor:n="#2563eb",strokeWidth:r=2,isTraining:i=!1,axisLabels:s,selectedPoint:o,guidelines:a,children:u}){const{xScale:l,yScale:c,width:f,height:d,margin:h}=Kx(),p=R.useRef(null),m=R.useRef(null),g=R.useMemo(()=>{const v=t?e.pdfVals:e.cdfVals;return e.xVals.map((b,w)=>({x:b,y:v[w]}))},[e,t]);R.useEffect(()=>{p.current&&cr(p.current).call(vre(l)).attr("transform",`translate(0,${d-h.bottom})`).selectAll("text").style("font-size","12px").style("stroke-width","2px"),m.current&&cr(m.current).call(bre(c)).attr("transform",`translate(${h.left},0)`).selectAll("text").style("font-size","12px").style("stroke-width","2px")},[l,c,h,d]);const y=R.useMemo(()=>s?E.jsxs(E.Fragment,{children:[s.x&&E.jsx("text",{x:f/2,y:d-5,textAnchor:"middle",style:{fontSize:"12px",fill:"#666"},children:s.x}),s.y&&E.jsx("text",{x:-d/2,y:15,textAnchor:"middle",transform:"rotate(-90)",style:{fontSize:"12px",fill:"#666"},children:s.y})]}):null,[s,f,d]);return E.jsxs("svg",{width:f,height:d,children:[E.jsx(kMe,{data:g,strokeColor:n,strokeWidth:r}),E.jsx("g",{ref:p}),E.jsx("g",{ref:m}),y,o&&E.jsx(RMe,{point:o}),i&&a&&E.jsx(NMe,{xValue:a.x,yValue:a.y,tangentLine:a.tangentLine}),u]})}const uUt=Object.freeze(Object.defineProperty({__proto__:null,default:PMe},Symbol.toStringTag,{value:"Module"}));/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lUt=typeof Object.defineProperty=="function"?Object.defineProperty:null,cUt=lUt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fUt=cUt;function dUt(){try{return fUt({},"x",{}),!0}catch{return!1}}var hUt=dUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pUt=Object.defineProperty,mUt=pUt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gUt(e){return typeof e=="number"}var DMe=gUt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yUt(e){return e[0]==="-"}function W_e(e){var t="",n;for(n=0;n<e;n++)t+="0";return t}function vUt(e,t,n){var r=!1,i=t-e.length;return i<0||(yUt(e)&&(r=!0,e=e.substr(1)),e=n?e+W_e(i):W_e(i)+e,r&&(e="-"+e)),e}var OMe=vUt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bUt=DMe,G_e=OMe,_Ut=String.prototype.toLowerCase,Y_e=String.prototype.toUpperCase;function wUt(e){var t,n,r;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;case"d":case"i":case"u":default:t=10;break}if(n=e.arg,r=parseInt(n,10),!isFinite(r)){if(!bUt(n))throw new Error("invalid integer. Value: "+n);r=0}return r<0&&(e.specifier==="u"||t!==10)&&(r=4294967295+r+1),r<0?(n=(-r).toString(t),e.precision&&(n=G_e(n,e.precision,e.padRight)),n="-"+n):(n=r.toString(t),!r&&!e.precision?n="":e.precision&&(n=G_e(n,e.precision,e.padRight)),e.sign&&(n=e.sign+n)),t===16&&(e.alternate&&(n="0x"+n),n=e.specifier===Y_e.call(e.specifier)?Y_e.call(n):_Ut.call(n)),t===8&&e.alternate&&n.charAt(0)!=="0"&&(n="0"+n),n}var xUt=wUt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EUt(e){return typeof e=="string"}var TUt=EUt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SUt=DMe,AUt=Math.abs,CUt=String.prototype.toLowerCase,K_e=String.prototype.toUpperCase,c_=String.prototype.replace,IUt=/e\+(\d)$/,kUt=/e-(\d)$/,RUt=/^(\d+)$/,NUt=/^(\d+)e/,PUt=/\.0$/,DUt=/\.0*e/,OUt=/(\..*[^0])0*e/;function $Ut(e){var t,n,r=parseFloat(e.arg);if(!isFinite(r)){if(!SUt(e.arg))throw new Error("invalid floating-point number. Value: "+n);r=e.arg}switch(e.specifier){case"e":case"E":n=r.toExponential(e.precision);break;case"f":case"F":n=r.toFixed(e.precision);break;case"g":case"G":AUt(r)<1e-4?(t=e.precision,t>0&&(t-=1),n=r.toExponential(t)):n=r.toPrecision(e.precision),e.alternate||(n=c_.call(n,OUt,"$1e"),n=c_.call(n,DUt,"e"),n=c_.call(n,PUt,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return n=c_.call(n,IUt,"e+0$1"),n=c_.call(n,kUt,"e-0$1"),e.alternate&&(n=c_.call(n,RUt,"$1."),n=c_.call(n,NUt,"$1.e")),r>=0&&e.sign&&(n=e.sign+n),n=e.specifier===K_e.call(e.specifier)?K_e.call(n):CUt.call(n),n}var LUt=$Ut;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function X_e(e){var t="",n;for(n=0;n<e;n++)t+=" ";return t}function MUt(e,t,n){var r=t-e.length;return r<0||(e=n?e+X_e(r):X_e(r)+e),e}var FUt=MUt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BUt=xUt,jUt=TUt,UUt=LUt,zUt=FUt,VUt=OMe,HUt=String.fromCharCode,qUt=Array.isArray;function t8(e){return e!==e}function WUt(e){var t={};return t.specifier=e.specifier,t.precision=e.precision===void 0?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function GUt(e){var t,n,r,i,s,o,a,u,l;if(!qUt(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(o="",a=1,u=0;u<e.length;u++)if(r=e[u],jUt(r))o+=r;else{if(t=r.precision!==void 0,r=WUt(r),!r.specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+u+"`. Value: `"+r+"`.");for(r.mapping&&(a=r.mapping),n=r.flags,l=0;l<n.length;l++)switch(i=n.charAt(l),i){case" ":r.sign=" ";break;case"+":r.sign="+";break;case"-":r.padRight=!0,r.padZeros=!1;break;case"0":r.padZeros=n.indexOf("-")<0;break;case"#":r.alternate=!0;break;default:throw new Error("invalid flag: "+i)}if(r.width==="*"){if(r.width=parseInt(arguments[a],10),a+=1,t8(r.width))throw new TypeError("the argument for * width at position "+a+" is not a number. Value: `"+r.width+"`.");r.width<0&&(r.padRight=!0,r.width=-r.width)}if(t&&r.precision==="*"){if(r.precision=parseInt(arguments[a],10),a+=1,t8(r.precision))throw new TypeError("the argument for * precision at position "+a+" is not a number. Value: `"+r.precision+"`.");r.precision<0&&(r.precision=1,t=!1)}switch(r.arg=arguments[a],r.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(r.padZeros=!1),r.arg=BUt(r);break;case"s":r.maxWidth=t?r.precision:-1,r.arg=String(r.arg);break;case"c":if(!t8(r.arg)){if(s=parseInt(r.arg,10),s<0||s>127)throw new Error("invalid character code. Value: "+r.arg);r.arg=t8(s)?String(r.arg):HUt(s)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(r.precision=6),r.arg=UUt(r);break;default:throw new Error("invalid specifier: "+r.specifier)}r.maxWidth>=0&&r.arg.length>r.maxWidth&&(r.arg=r.arg.substring(0,r.maxWidth)),r.padZeros?r.arg=VUt(r.arg,r.width||r.precision,r.padRight):r.width&&(r.arg=zUt(r.arg,r.width,r.padRight)),o+=r.arg||"",a+=1}return o}var YUt=GUt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KUt=YUt,XUt=KUt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n8=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function QUt(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return e[4]==="."&&e[5]===void 0&&(t.precision="1"),t}function JUt(e){var t,n,r,i;for(n=[],i=0,r=n8.exec(e);r;)t=e.slice(i,n8.lastIndex-r[0].length),t.length&&n.push(t),n.push(QUt(r)),i=n8.lastIndex,r=n8.exec(e);return t=e.slice(i),t.length&&n.push(t),n}var ZUt=JUt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ezt=ZUt,tzt=ezt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nzt(e){return typeof e=="string"}var rzt=nzt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var izt=XUt,szt=tzt,ozt=rzt;function $Me(e){var t,n;if(!ozt(e))throw new TypeError($Me("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=[szt(e)],n=1;n<arguments.length;n++)t.push(arguments[n]);return izt.apply(null,t)}var azt=$Me;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uzt=azt,lzt=uzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q_e=lzt,iC=Object.prototype,J_e=iC.toString,Z_e=iC.__defineGetter__,ewe=iC.__defineSetter__,czt=iC.__lookupGetter__,fzt=iC.__lookupSetter__;function dzt(e,t,n){var r,i,s,o;if(typeof e!="object"||e===null||J_e.call(e)==="[object Array]")throw new TypeError(Q_e("invalid argument. First argument must be an object. Value: `%s`.",e));if(typeof n!="object"||n===null||J_e.call(n)==="[object Array]")throw new TypeError(Q_e("invalid argument. Property descriptor must be an object. Value: `%s`.",n));if(i="value"in n,i&&(czt.call(e,t)||fzt.call(e,t)?(r=e.__proto__,e.__proto__=iC,delete e[t],e[t]=n.value,e.__proto__=r):e[t]=n.value),s="get"in n,o="set"in n,i&&(s||o))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return s&&Z_e&&Z_e.call(e,t,n.get),o&&ewe&&ewe.call(e,t,n.set),e}var hzt=dzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pzt=hUt,mzt=mUt,gzt=hzt,fQ;pzt()?fQ=mzt:fQ=gzt;var yzt=fQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vzt=yzt;function bzt(e,t,n){vzt(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})}var _zt=bzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wzt=_zt,HF=wzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xzt(e){return e!==e}var Ezt=xzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tzt=Ezt,ts=Tzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Szt(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}var Azt=Szt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Czt=Azt,Izt=Czt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kzt=Izt,Rzt=kzt();function Nzt(){return Rzt&&typeof Symbol.toStringTag=="symbol"}var Pzt=Nzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dzt=Pzt,Ozt=Dzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $zt=Object.prototype.toString,LMe=$zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Lzt=LMe;function Mzt(e){return Lzt.call(e)}var Fzt=Mzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bzt=Object.prototype.hasOwnProperty;function jzt(e,t){return e==null?!1:Bzt.call(e,t)}var Uzt=jzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zzt=Uzt,Vzt=zzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hzt=typeof Symbol=="function"?Symbol:void 0,qzt=Hzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wzt=qzt,Gzt=Wzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var twe=Gzt,Yzt=typeof twe=="function"?twe.toStringTag:"",Kzt=Yzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xzt=Vzt,D3=Kzt,xq=LMe;function Qzt(e){var t,n,r;if(e==null)return xq.call(e);n=e[D3],t=Xzt(e,D3);try{e[D3]=void 0}catch{return xq.call(e)}return r=xq.call(e),t?e[D3]=n:delete e[D3],r}var Jzt=Qzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zzt=Ozt,eVt=Fzt,tVt=Jzt,dQ;Zzt()?dQ=tVt:dQ=eVt;var qF=dQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nVt=qF,rVt=typeof Uint32Array=="function";function iVt(e){return rVt&&e instanceof Uint32Array||nVt(e)==="[object Uint32Array]"}var sVt=iVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oVt=sVt,aVt=oVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uVt=4294967295,lVt=uVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cVt=typeof Uint32Array=="function"?Uint32Array:null,fVt=cVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dVt=aVt,Eq=lVt,nwe=fVt;function hVt(){var e,t;if(typeof nwe!="function")return!1;try{t=[1,3.14,-3.14,Eq+1,Eq+2],t=new nwe(t),e=dVt(t)&&t[0]===1&&t[1]===3&&t[2]===Eq-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var pVt=hVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mVt=pVt,gVt=mVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yVt=typeof Uint32Array=="function"?Uint32Array:void 0,vVt=yVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bVt(){throw new Error("not implemented")}var _Vt=bVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wVt=gVt,xVt=vVt,EVt=_Vt,hQ;wVt()?hQ=xVt:hQ=EVt;var sC=hQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TVt=qF,SVt=typeof Float64Array=="function";function AVt(e){return SVt&&e instanceof Float64Array||TVt(e)==="[object Float64Array]"}var CVt=AVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IVt=CVt,kVt=IVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RVt=typeof Float64Array=="function"?Float64Array:null,NVt=RVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PVt=kVt,rwe=NVt;function DVt(){var e,t;if(typeof rwe!="function")return!1;try{t=new rwe([1,3.14,-3.14,NaN]),e=PVt(t)&&t[0]===1&&t[1]===3.14&&t[2]===-3.14&&t[3]!==t[3]}catch{e=!1}return e}var OVt=DVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Vt=OVt,LVt=$Vt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MVt=typeof Float64Array=="function"?Float64Array:void 0,FVt=MVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BVt(){throw new Error("not implemented")}var jVt=BVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UVt=LVt,zVt=FVt,VVt=jVt,pQ;UVt()?pQ=zVt:pQ=VVt;var oC=pQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HVt=qF,qVt=typeof Uint8Array=="function";function WVt(e){return qVt&&e instanceof Uint8Array||HVt(e)==="[object Uint8Array]"}var GVt=WVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YVt=GVt,KVt=YVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XVt=255,QVt=XVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JVt=typeof Uint8Array=="function"?Uint8Array:null,ZVt=JVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eHt=KVt,Tq=QVt,iwe=ZVt;function tHt(){var e,t;if(typeof iwe!="function")return!1;try{t=[1,3.14,-3.14,Tq+1,Tq+2],t=new iwe(t),e=eHt(t)&&t[0]===1&&t[1]===3&&t[2]===Tq-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var nHt=tHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rHt=nHt,iHt=rHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sHt=typeof Uint8Array=="function"?Uint8Array:void 0,oHt=sHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aHt(){throw new Error("not implemented")}var uHt=aHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lHt=iHt,cHt=oHt,fHt=uHt,mQ;lHt()?mQ=cHt:mQ=fHt;var dHt=mQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hHt=qF,pHt=typeof Uint16Array=="function";function mHt(e){return pHt&&e instanceof Uint16Array||hHt(e)==="[object Uint16Array]"}var gHt=mHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yHt=gHt,vHt=yHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bHt=65535,_Ht=bHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wHt=typeof Uint16Array=="function"?Uint16Array:null,xHt=wHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EHt=vHt,Sq=_Ht,swe=xHt;function THt(){var e,t;if(typeof swe!="function")return!1;try{t=[1,3.14,-3.14,Sq+1,Sq+2],t=new swe(t),e=EHt(t)&&t[0]===1&&t[1]===3&&t[2]===Sq-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var SHt=THt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AHt=SHt,CHt=AHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IHt=typeof Uint16Array=="function"?Uint16Array:void 0,kHt=IHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RHt(){throw new Error("not implemented")}var NHt=RHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PHt=CHt,DHt=kHt,OHt=NHt,gQ;PHt()?gQ=DHt:gQ=OHt;var $Ht=gQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LHt=dHt,MHt=$Ht,FHt={uint16:MHt,uint8:LHt},BHt=FHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var owe=BHt,MMe;function jHt(){var e,t;return e=new owe.uint16(1),e[0]=4660,t=new owe.uint8(e.buffer),t[0]===52}MMe=jHt();var UHt=MMe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zHt=UHt,aC=zHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VHt=aC,yQ;VHt===!0?yQ=1:yQ=0;var HHt=yQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qHt=sC,WHt=oC,GHt=HHt,FMe=new WHt(1),YHt=new qHt(FMe.buffer);function KHt(e){return FMe[0]=e,YHt[GHt]}var XHt=KHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QHt=XHt,Nl=QHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JHt=aC,vQ;JHt===!0?vQ=1:vQ=0;var ZHt=vQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eqt=sC,tqt=oC,nqt=ZHt,bQ=new tqt(1),rqt=new eqt(bQ.buffer);function iqt(e,t){return bQ[0]=e,rqt[nqt]=t>>>0,bQ[0]}var sqt=iqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oqt=sqt,Xx=oqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aqt=aC,BMe,_Q,wQ;aqt===!0?(_Q=1,wQ=0):(_Q=0,wQ=1);BMe={HIGH:_Q,LOW:wQ};var uqt=BMe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lqt=sC,cqt=oC,jMe=uqt,UMe=new cqt(1),awe=new lqt(UMe.buffer),fqt=jMe.HIGH,dqt=jMe.LOW;function hqt(e,t){return awe[fqt]=e,awe[dqt]=t,UMe[0]}var pqt=hqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mqt=pqt,WF=mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gqt=Number.POSITIVE_INFINITY,ks=gqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yqt=Number;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vqt=yqt,bqt=vqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _qt=bqt,wqt=_qt.NEGATIVE_INFINITY,Za=wqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xqt=1023,w1=xqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Eqt=.34657359027997264,Tqt=Eqt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Sqt(e){return e===0?-.03333333333333313:-.03333333333333313+e*(.0015873015872548146+e*(-793650757867488e-19+e*(4008217827329362e-21+e*-20109921818362437e-23)))}var Aqt=Sqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_expm1.c} and [FreeBSD]{@link https://svnweb.freebsd.org/base/release/12.2.0/lib/msun/src/s_expm1.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var Cqt=ts,uwe=Nl,Aq=Xx,Iqt=WF,lwe=ks,kqt=Za,cwe=w1,Rqt=Tqt,Nqt=Aqt,Pqt=709.782712893384,Cq=.6931471803691238,fwe=19082149292705877e-26,dwe=1.4426950408889634,Dqt=38.816242111356935,Oqt=1.0397207708399179;function $qt(e){var t,n,r,i,s,o,a,u,l,c,f,d,h;if(e===lwe||Cqt(e))return e;if(e===kqt)return-1;if(e===0)return e;if(e<0?(r=!0,u=-e):(r=!1,u=e),u>=Dqt){if(r)return-1;if(u>=Pqt)return lwe}if(o=uwe(u)|0,u>Rqt)u<Oqt?r?(i=e+Cq,s=-19082149292705877e-26,h=-1):(i=e-Cq,s=fwe,h=1):(r?h=dwe*e-.5:h=dwe*e+.5,h|=0,f=h,i=e-f*Cq,s=f*fwe),e=i-s,c=i-e-s;else{if(o<1016070144)return e;h=0}return t=.5*e,l=e*t,a=1+l*Nqt(l),f=3-a*t,d=l*((a-f)/(6-e*f)),h===0?e-(e*d-l):(n=Iqt(cwe+h<<20,0),d=e*(d-c)-c,d-=l,h===-1?.5*(e-d)-.5:h===1?e<-.25?-2*(d-(e+.5)):1+2*(e-d):h<=-2||h>56?(u=1-(d-e),h===1024?(i=uwe(u)+(h<<20)|0,u=Aq(u,i)):u*=n,u-1):(f=1,h<20?(i=1072693248-(2097152>>h)|0,f=Aq(f,i),u=f-(d-e)):(i=cwe-h<<20|0,f=Aq(f,i),u=e-(d+f),u+=1),u*=n,u))}var Lqt=$qt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mqt=Lqt,GF=Mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fqt=Math.floor,Bqt=Fqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jqt=Bqt,lp=jqt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Uqt(e){return e===0?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+e*.14798198605116586)))))}var zqt=Uqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_log1p.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var Vqt=ts,hwe=Nl,pwe=Xx,Hqt=ks,qqt=Za,mwe=w1,Wqt=zqt,Iq=.6931471803691238,kq=19082149292705877e-26,Gqt=.41421356237309503,Yqt=-.2928932188134525,Kqt=1862645149230957e-24,Xqt=5551115123125783e-32,Qqt=9007199254740992,Jqt=.6666666666666666;function Zqt(e){var t,n,r,i,s,o,a,u,l,c;if(e<-1||Vqt(e))return NaN;if(e===-1)return qqt;if(e===Hqt||e===0)return e;if(e<0?r=-e:r=e,c=1,r<Gqt){if(r<Kqt)return r<Xqt?e:e-e*e*.5;e>Yqt&&(c=0,i=e,n=1)}return c!==0&&(r<Qqt?(l=1+e,n=hwe(l),c=(n>>20)-mwe,c>0?s=1-(l-e):s=e-(l-1),s/=l):(l=e,n=hwe(l),c=(n>>20)-mwe,s=0),n&=1048575,n<434334?l=pwe(l,n|1072693248):(c+=1,l=pwe(l,n|1071644672),n=1048576-n>>2),i=l-1),t=.5*i*i,n===0?i===0?(s+=c*kq,c*Iq+s):(u=t*(1-Jqt*i),c*Iq-(u-(c*kq+s)-i)):(o=i/(2+i),a=o*o,u=a*Wqt(a),c===0?i-(t-o*(t+u)):c*Iq-(t-(o*(t+u)+(c*kq+s))-i))}var eWt=Zqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tWt=eWt,x1=tWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nWt=Math.sqrt,rWt=nWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iWt=rWt,cp=iWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sWt=.7853981633974483,oWt=sWt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aWt(e){var t,n,r;return e===0?.16666666666666713:(e<0?t=-e:t=e,t<=1?(n=-8.198089802484825+e*(19.562619833175948+e*(-16.262479672107002+e*(5.444622390564711+e*(-.6019598008014124+e*.004253011369004428)))),r=-49.18853881490881+e*(139.51056146574857+e*(-147.1791292232726+e*(70.49610280856842+e*(-14.740913729888538+e*1))))):(e=1/e,n=.004253011369004428+e*(-.6019598008014124+e*(5.444622390564711+e*(-16.262479672107002+e*(19.562619833175948+e*-8.198089802484825)))),r=1+e*(-14.740913729888538+e*(70.49610280856842+e*(-147.1791292232726+e*(139.51056146574857+e*-49.18853881490881))))),n/r)}var uWt=aWt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lWt(e){var t,n,r;return e===0?.08333333333333809:(e<0?t=-e:t=e,t<=1?(n=28.536655482610616+e*(-25.56901049652825+e*(6.968710824104713+e*(-.5634242780008963+e*.002967721961301243))),r=342.43986579130785+e*(-383.8770957603691+e*(147.0656354026815+e*(-21.947795316429207+e*1)))):(e=1/e,n=.002967721961301243+e*(-.5634242780008963+e*(6.968710824104713+e*(-25.56901049652825+e*28.536655482610616))),r=1+e*(-21.947795316429207+e*(147.0656354026815+e*(-383.8770957603691+e*342.43986579130785)))),n/r)}var cWt=lWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var fWt=ts,dWt=cp,gwe=oWt,hWt=uWt,pWt=cWt,mWt=6123233995736766e-32;function gWt(e){var t,n,r,i,s;if(fWt(e))return NaN;if(e>0?r=e:(t=!0,r=-e),r>1)return NaN;if(r>.625)n=1-r,i=n*pWt(n),n=dWt(n+n),s=gwe-n,n=n*i-mWt,s-=n,s+=gwe;else{if(r<1e-8)return e;n=r*r,s=n*hWt(n),s=r*s+r}return t?-s:s}var yWt=gWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vWt=yWt,bWt=vWt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Wt(e){return Math.abs(e)}var wWt=_Wt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xWt=wWt,ns=xWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EWt=Math.ceil,TWt=EWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SWt=TWt,AWt=SWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CWt=lp,IWt=AWt;function kWt(e){return e<0?IWt(e):CWt(e)}var RWt=kWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NWt=RWt,eoe=NWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PWt=1023,DWt=PWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OWt=-1023,$Wt=OWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LWt=-1074,MWt=LWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FWt=ks,BWt=Za;function jWt(e){return e===FWt||e===BWt}var UWt=jWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zWt=UWt,Qx=zWt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VWt=2147483648,HWt=VWt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qWt=2147483647,E1=qWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WWt=aC,zMe,xQ,EQ;WWt===!0?(xQ=1,EQ=0):(xQ=0,EQ=1);zMe={HIGH:xQ,LOW:EQ};var GWt=zMe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YWt=sC,KWt=oC,VMe=GWt,HMe=new KWt(1),ywe=new YWt(HMe.buffer),XWt=VMe.HIGH,QWt=VMe.LOW;function JWt(e,t,n,r){return HMe[0]=e,t[r]=ywe[XWt],t[r+n]=ywe[QWt],t}var qMe=JWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZWt=qMe;function eGt(e){return ZWt(e,[0,0],1,0)}var tGt=eGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nGt=HF,WMe=tGt,rGt=qMe;nGt(WMe,"assign",rGt);var YF=WMe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iGt=HWt,sGt=E1,oGt=YF,aGt=Nl,uGt=WF,Rq=[0,0];function lGt(e,t){var n,r;return oGt.assign(e,Rq,1,0),n=Rq[0],n&=sGt,r=aGt(t),r&=iGt,n|=r,uGt(n,Rq[1])}var cGt=lGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fGt=cGt,KF=fGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dGt=22250738585072014e-324,n5=dGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hGt=n5,pGt=Qx,mGt=ts,gGt=ns,yGt=4503599627370496;function vGt(e,t,n,r){return mGt(e)||pGt(e)?(t[r]=e,t[r+n]=0,t):e!==0&&gGt(e)<hGt?(t[r]=e*yGt,t[r+n]=-52,t):(t[r]=e,t[r+n]=0,t)}var GMe=vGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bGt=GMe;function _Gt(e){return bGt(e,[0,0],1,0)}var wGt=_Gt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xGt=HF,YMe=wGt,EGt=GMe;xGt(YMe,"assign",EGt);var TGt=YMe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SGt=2146435072,toe=SGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AGt=Nl,CGt=toe,IGt=w1;function kGt(e){var t=AGt(e);return t=(t&CGt)>>>20,t-IGt|0}var RGt=kGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NGt=RGt,PGt=NGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DGt=ks,OGt=Za,$Gt=w1,LGt=DWt,MGt=$Wt,FGt=MWt,BGt=ts,jGt=Qx,UGt=KF,zGt=TGt.assign,VGt=PGt,HGt=YF,qGt=WF,WGt=2220446049250313e-31,GGt=2148532223,Nq=[0,0],Pq=[0,0];function YGt(e,t){var n,r;return t===0||e===0||BGt(e)||jGt(e)?e:(zGt(e,Nq,1,0),e=Nq[0],t+=Nq[1],t+=VGt(e),t<FGt?UGt(0,e):t>LGt?e<0?OGt:DGt:(t<=MGt?(t+=52,r=WGt):r=1,HGt.assign(e,Pq,1,0),n=Pq[0],n&=GGt,n|=t+$Gt<<20,r*qGt(n,Pq[1])))}var KGt=YGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XGt=KGt,XF=XGt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QGt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var JGt=QGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyrights, licenses, and long comment were part of the original implementation available as part of [Go]{@link https://github.com/golang/go/blob/cb07765045aed5104a3df31507564ac99e6ddce8/src/math/exp.go}, which in turn was based on an implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (c) 2009 The Go Authors. All rights reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions are
* met:
*
*    * Redistributions of source code must retain the above copyright
* notice, this list of conditions and the following disclaimer.
*    * Redistributions in binary form must reproduce the above
* copyright notice, this list of conditions and the following disclaimer
* in the documentation and/or other materials provided with the
* distribution.
*    * Neither the name of Google Inc. nor the names of its
* contributors may be used to endorse or promote products derived from
* this software without specific prior written permission.
*
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
* "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
* A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
* LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
* DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
* THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
* (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
* OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
* ```
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var ZGt=XF,eYt=JGt;function tYt(e,t,n){var r,i,s,o;return r=e-t,i=r*r,s=r-i*eYt(i),o=1-(t-r*s/(2-s)-e),ZGt(o,n)}var nYt=tYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyrights, licenses, and long comment were part of the original implementation available as part of [Go]{@link https://github.com/golang/go/blob/cb07765045aed5104a3df31507564ac99e6ddce8/src/math/exp.go}, which in turn was based on an implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (c) 2009 The Go Authors. All rights reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions are
* met:
*
*    * Redistributions of source code must retain the above copyright
* notice, this list of conditions and the following disclaimer.
*    * Redistributions in binary form must reproduce the above
* copyright notice, this list of conditions and the following disclaimer
* in the documentation and/or other materials provided with the
* distribution.
*    * Neither the name of Google Inc. nor the names of its
* contributors may be used to endorse or promote products derived from
* this software without specific prior written permission.
*
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
* "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
* A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
* LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
* DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
* THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
* (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
* OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
* ```
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var rYt=ts,vwe=eoe,iYt=Za,bwe=ks,sYt=nYt,oYt=.6931471803691238,aYt=19082149292705877e-26,_we=1.4426950408889634,uYt=709.782712893384,lYt=-745.1332191019411,cYt=1/(1<<28),fYt=-3725290298461914e-24;function dYt(e){var t,n,r;return rYt(e)||e===bwe?e:e===iYt?0:e>uYt?bwe:e<lYt?0:e>fYt&&e<cYt?1+e:(e<0?r=vwe(_we*e-.5):r=vwe(_we*e+.5),t=e-r*oYt,n=r*aYt,sYt(t,n,r))}var hYt=dYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pYt=hYt,eu=pYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mYt=lp;function gYt(e){return mYt(e)===e}var yYt=gYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vYt=yYt,nm=vYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bYt=nm;function _Yt(e){return bYt(e/2)}var wYt=_Yt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xYt=wYt,KMe=xYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wwe=KMe;function EYt(e){return e>0?wwe(e-1):wwe(e+1)}var TYt=EYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SYt=TYt,noe=SYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AYt=aC,TQ;AYt===!0?TQ=0:TQ=1;var CYt=TQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IYt=sC,kYt=oC,RYt=CYt,SQ=new kYt(1),NYt=new IYt(SQ.buffer);function PYt(e,t){return SQ[0]=e,NYt[RYt]=t>>>0,SQ[0]}var DYt=PYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OYt=DYt,T1=OYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Yt(e){return e|0}var LYt=$Yt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MYt=LYt,QF=MYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var xwe=noe,FYt=KF,BYt=Za,r8=ks;function jYt(e,t){return t===BYt?r8:t===r8?0:t>0?xwe(t)?e:0:xwe(t)?FYt(r8,e):r8}var UYt=jYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var zYt=E1,VYt=Nl,HYt=1072693247,i8=1e300,s8=1e-300;function qYt(e,t){var n,r;return r=VYt(e),n=r&zYt,n<=HYt?t<0?i8*i8:s8*s8:t>0?i8*i8:s8*s8}var WYt=qYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GYt=ns,Ewe=ks;function YYt(e,t){return e===-1?(e-e)/(e-e):e===1?1:GYt(e)<1==(t===Ewe)?0:Ewe}var KYt=YYt;/**
* @license Apache-2.0
*
* Copyright (c) 2024 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XYt(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var QYt=XYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var JYt=Nl,o8=T1,Twe=Xx,ZYt=w1,eKt=QYt,tKt=1048575,Swe=1048576,nKt=1072693248,rKt=536870912,iKt=524288,sKt=20,oKt=9007199254740992,aKt=.9617966939259756,uKt=.9617967009544373,lKt=-7028461650952758e-24,cKt=[1,1.5],fKt=[0,.5849624872207642],dKt=[0,1350039202129749e-23];function hKt(e,t,n){var r,i,s,o,a,u,l,c,f,d,h,p,m,g,y,v,b,w,x,S,A,C;return S=0,n<Swe&&(t*=oKt,S-=53,n=JYt(t)),S+=(n>>sKt)-ZYt|0,A=n&tKt|0,n=A|nKt|0,A<=235662?C=0:A<767610?C=1:(C=0,S+=1,n-=Swe),t=Twe(t,n),c=cKt[C],w=t-c,x=1/(t+c),i=w*x,o=o8(i,0),r=(n>>1|rKt)+iKt,r+=C<<18,u=Twe(0,r),l=t-(u-c),a=x*(w-o*u-o*l),s=i*i,b=s*s*eKt(s),b+=a*(o+i),s=o*o,u=3+s+b,u=o8(u,0),l=b-(u-3-s),w=o*u,x=a*u+l*i,d=w+x,d=o8(d,0),h=x-(d-w),p=uKt*d,m=lKt*d+h*aKt+dKt[C],f=fKt[C],v=S,g=p+m+f+v,g=o8(g,0),y=m-(g-v-f-p),e[0]=g,e[1]=y,e}var pKt=hKt;/**
* @license Apache-2.0
*
* Copyright (c) 2024 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mKt(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var gKt=mKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var yKt=T1,vKt=gKt,bKt=1.4426950408889634,_Kt=1.4426950216293335,wKt=19259629911266175e-24;function xKt(e,t){var n,r,i,s,o,a;return i=t-1,s=i*i*vKt(i),o=_Kt*i,a=i*wKt-s*bKt,r=o+a,r=yKt(r,0),n=a-(r-o),e[0]=r,e[1]=n,e}var EKt=xKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TKt=.6931471805599453,XMe=TKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SKt=1048575,roe=SKt;/**
* @license Apache-2.0
*
* Copyright (c) 2024 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AKt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var CKt=AKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var IKt=Nl,Awe=Xx,kKt=T1,RKt=QF,NKt=XF,PKt=XMe,Cwe=w1,Iwe=E1,kwe=roe,DKt=CKt,Rwe=1048576,OKt=1071644672,O3=20,$Kt=.6931471824645996,LKt=-1904654299957768e-24;function MKt(e,t,n){var r,i,s,o,a,u,l,c,f,d,h;return d=e&Iwe|0,h=(d>>O3)-Cwe|0,f=0,d>OKt&&(f=e+(Rwe>>h+1)>>>0,h=((f&Iwe)>>O3)-Cwe|0,r=(f&~(kwe>>h))>>>0,s=Awe(0,r),f=(f&kwe|Rwe)>>O3-h>>>0,e<0&&(f=-f),t-=s),s=n+t,s=kKt(s,0),a=s*$Kt,u=(n-(s-t))*PKt+s*LKt,c=a+u,l=u-(c-a),s=c*c,i=c-s*DKt(s),o=c*i/(i-2)-(l+c*l),c=1-(o-c),e=IKt(c),e=RKt(e),e+=f<<O3>>>0,e>>O3<=0?c=NKt(c,f):c=Awe(c,e),c}var FKt=MKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var Nwe=ts,Pwe=noe,Dwe=Qx,BKt=nm,Owe=cp,jKt=ns,Dq=YF,UKt=T1,$we=QF,zKt=Za,VKt=ks,Oq=E1,HKt=UYt,qKt=WYt,WKt=KYt,GKt=pKt,YKt=EKt,KKt=FKt,XKt=1072693247,QKt=1105199104,JKt=1139802112,Lwe=1083179008,ZKt=1072693248,eXt=1083231232,tXt=3230714880,Mwe=31,K1=1e300,X1=1e-300,nXt=8008566259537294e-32,Nm=[0,0],Fwe=[0,0];function QMe(e,t){var n,r,i,s,o,a,u,l,c,f,d,h,p,m,g,y;if(Nwe(e)||Nwe(t))return NaN;if(Dq.assign(t,Nm,1,0),a=Nm[0],u=Nm[1],u===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return Owe(e);if(t===-.5)return 1/Owe(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(Dwe(t))return WKt(e,t)}if(Dq.assign(e,Nm,1,0),s=Nm[0],o=Nm[1],o===0){if(s===0)return HKt(e,t);if(e===1)return 1;if(e===-1&&Pwe(t))return-1;if(Dwe(e))return e===zKt?QMe(-0,-t):t<0?0:VKt}if(e<0&&BKt(t)===!1)return(e-e)/(e-e);if(i=jKt(e),n=s&Oq|0,r=a&Oq|0,l=s>>>Mwe|0,c=a>>>Mwe|0,l&&Pwe(t)?l=-1:l=1,r>QKt){if(r>JKt)return qKt(e,t);if(n<XKt)return c===1?l*K1*K1:l*X1*X1;if(n>ZKt)return c===0?l*K1*K1:l*X1*X1;p=YKt(Fwe,i)}else p=GKt(Fwe,i,n);if(f=UKt(t,0),h=(t-f)*p[0]+t*p[1],d=f*p[0],m=h+d,Dq.assign(m,Nm,1,0),g=$we(Nm[0]),y=$we(Nm[1]),g>=Lwe){if(g-Lwe|y||h+nXt>m-d)return l*K1*K1}else if((g&Oq)>=eXt&&(g-tXt|y||h<=m-d))return l*X1*X1;return m=KKt(g,d,h),l*m}var rXt=QMe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iXt=rXt,Pl=iXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sXt=2.718281828459045,uC=sXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oXt=2220446049250313e-31,S1=oXt;/**
* @license Apache-2.0
*
* Copyright (c) 2024 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aXt(e){var t,n,r;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(n=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),r=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,n=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),r=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),n/r)}var uXt=aXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{http://www.boost.org/doc/libs/1_85_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Bwe=ts,lXt=x1,cXt=cp,fXt=ns,dXt=eu,$q=Pl,hXt=uC,Lq=S1,Mq=uXt,Fq=10.900511;function pXt(e,t){var n,r,i,s,o,a,u;return Bwe(e)||Bwe(t)?NaN:e<0||t<0?NaN:t===1?1/e:e===1?1/t:(u=e+t,u<Lq?(o=u/e,o/=t,o):u===e&&t<Lq?1/t:u===t&&e<Lq?1/e:(e<t&&(a=t,t=e,e=a),r=e+Fq-.5,i=t+Fq-.5,s=u+Fq-.5,o=Mq(e)*(Mq(t)/Mq(u)),n=e-.5-t,fXt(t*n)<s*100&&e>100?o*=dXt(n*lXt(-t/s)):o*=$q(r/s,n),s>1e10?o*=$q(r/s*(i/s),t):o*=$q(r*i/(s*s),t),o*=cXt(hXt/i),o))}var mXt=pXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gXt=mXt,JMe=gXt;const Uy=Rf(JMe);/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yXt=ks;function vXt(e){return e===0&&1/e===yXt}var bXt=vXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Xt=bXt,ZMe=_Xt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wXt=ZMe,jwe=ts,Bq=ks;function xXt(e,t){return jwe(e)||jwe(t)?NaN:e===Bq||t===Bq?Bq:e===t&&e===0?wXt(e)?e:t:e>t?e:t}var EXt=xXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TXt=EXt,ioe=TXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SXt=Za;function AXt(e){return e===0&&1/e===SXt}var CXt=AXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IXt=CXt,JF=IXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kXt=JF,Uwe=ts,jq=Za;function RXt(e,t){return Uwe(e)||Uwe(t)?NaN:e===jq||t===jq?jq:e===t&&e===0?kXt(e)?e:t:e<t?e:t}var NXt=RXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PXt=NXt,r5=PXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DXt=17976931348623157e292,eFe=DXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OXt=2147483647,$Xt=OXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LXt=1.5707963267948966,MXt=LXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FXt=3.141592653589793,Jx=FXt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BXt(e){return e===0?.0416666666666666:.0416666666666666+e*(-.001388888888887411+e*2480158728947673e-20)}var jXt=BXt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UXt(e){return e===0?-27557314351390663e-23:-27557314351390663e-23+e*(2087572321298175e-24+e*-11359647557788195e-27)}var zXt=UXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/12.2.0/lib/msun/src/k_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var VXt=jXt,HXt=zXt;function qXt(e,t){var n,r,i,s;return s=e*e,i=s*s,r=s*VXt(s),r+=i*i*HXt(s),n=.5*s,i=1-n,i+(1-i-n+(s*r-e*t))}var WXt=qXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GXt=WXt,tFe=GXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var zwe=-.16666666666666632,YXt=.00833333333332249,KXt=-.0001984126982985795,XXt=27557313707070068e-22,QXt=-25050760253406863e-24,JXt=158969099521155e-24;function ZXt(e,t){var n,r,i,s;return s=e*e,i=s*s,n=YXt+s*(KXt+s*XXt)+s*i*(QXt+s*JXt),r=s*e,t===0?e+r*(zwe+s*n):e-(s*(.5*t-r*n)-t-r*zwe)}var eQt=ZXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tQt=eQt,nFe=tQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nQt=aC,AQ;nQt===!0?AQ=0:AQ=1;var rQt=AQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iQt=sC,sQt=oC,oQt=rQt,rFe=new sQt(1),aQt=new iQt(rFe.buffer);function uQt(e){return rFe[0]=e,aQt[oQt]}var lQt=uQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cQt=lQt,fQt=cQt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dQt(e,t){var n,r;for(n=[],r=0;r<t;r++)n.push(e);return n}var hQt=dQt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pQt=hQt,mQt=pQt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gQt=mQt;function yQt(e){return gQt(0,e)}var vQt=yQt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bQt=vQt,_Qt=bQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var wQt=lp,a8=XF,ZF=_Qt,iFe=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],xQt=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],Uq=16777216,zq=5960464477539063e-23,u8=ZF(20),Vwe=ZF(20),l8=ZF(20),Ra=ZF(20);function sFe(e,t,n,r,i,s,o,a,u){var l,c,f,d,h,p,m,g,y;for(d=s,y=r[n],g=n,h=0;g>0;h++)c=zq*y|0,Ra[h]=y-Uq*c|0,y=r[g-1]+c,g-=1;if(y=a8(y,i),y-=8*wQt(y*.125),m=y|0,y-=m,f=0,i>0?(h=Ra[n-1]>>24-i,m+=h,Ra[n-1]-=h<<24-i,f=Ra[n-1]>>23-i):i===0?f=Ra[n-1]>>23:y>=.5&&(f=2),f>0){for(m+=1,l=0,h=0;h<n;h++)g=Ra[h],l===0?g!==0&&(l=1,Ra[h]=16777216-g):Ra[h]=16777215-g;if(i>0)switch(i){case 1:Ra[n-1]&=8388607;break;case 2:Ra[n-1]&=4194303;break}f===2&&(y=1-y,l!==0&&(y-=a8(1,i)))}if(y===0){for(g=0,h=n-1;h>=s;h--)g|=Ra[h];if(g===0){for(p=1;Ra[s-p]===0;p++);for(h=n+1;h<=n+p;h++){for(u[a+h]=iFe[o+h],c=0,g=0;g<=a;g++)c+=e[g]*u[a+(h-g)];r[h]=c}return n+=p,sFe(e,t,n,r,i,s,o,a,u)}}if(y===0)for(n-=1,i-=24;Ra[n]===0;)n-=1,i-=24;else y=a8(y,-i),y>=Uq?(c=zq*y|0,Ra[n]=y-Uq*c|0,n+=1,i+=24,Ra[n]=c):Ra[n]=y|0;for(c=a8(1,i),h=n;h>=0;h--)r[h]=c*Ra[h],c*=zq;for(h=n;h>=0;h--){for(c=0,p=0;p<=d&&p<=n-h;p++)c+=xQt[p]*r[h+p];l8[n-h]=c}for(c=0,h=n;h>=0;h--)c+=l8[h];for(f===0?t[0]=c:t[0]=-c,c=l8[0]-c,h=1;h<=n;h++)c+=l8[h];return f===0?t[1]=c:t[1]=-c,m&7}function EQt(e,t,n,r){var i,s,o,a,u,l,c,f,d;for(s=4,a=r-1,o=(n-3)/24|0,o<0&&(o=0),l=n-24*(o+1),f=o-a,d=a+s,c=0;c<=d;c++)f<0?u8[c]=0:u8[c]=iFe[f],f+=1;for(c=0;c<=s;c++){for(i=0,f=0;f<=a;f++)i+=e[f]*u8[a+(c-f)];Vwe[c]=i}return u=s,sFe(e,t,u,Vwe,l,s,o,a,u8)}var TQt=EQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SQt=Math.round,AQt=SQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CQt=AQt,IQt=CQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var kQt=IQt,Hwe=Nl,RQt=.6366197723675814,NQt=1.5707963267341256,PQt=6077100506506192e-26,DQt=6077100506303966e-26,OQt=20222662487959506e-37,$Qt=20222662487111665e-37,LQt=84784276603689e-45,qwe=2047;function MQt(e,t,n){var r,i,s,o,a,u,l;return i=kQt(e*RQt),o=e-i*NQt,a=i*PQt,l=t>>20|0,n[0]=o-a,r=Hwe(n[0]),u=l-(r>>20&qwe),u>16&&(s=o,a=i*DQt,o=s-a,a=i*OQt-(s-o-a),n[0]=o-a,r=Hwe(n[0]),u=l-(r>>20&qwe),u>49&&(s=o,a=i*$Qt,o=s-a,a=i*LQt-(s-o-a),n[0]=o-a)),n[1]=o-n[0]-a,i}var FQt=MQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
*
* Optimized by Bruce D. Evans.
* ```
*/var BQt=E1,jQt=toe,UQt=roe,zQt=Nl,VQt=fQt,HQt=WF,qQt=TQt,c8=FQt,WQt=0,GQt=16777216,Q1=1.5707963267341256,gw=6077100506506192e-26,f8=2*gw,d8=3*gw,h8=4*gw,YQt=598523,KQt=1072243195,XQt=1073928572,QQt=1074752122,JQt=1074977148,ZQt=1075183036,eJt=1075388923,tJt=1075594811,nJt=1094263291,$3=[0,0,0],L3=[0,0];function rJt(e,t){var n,r,i,s,o,a,u,l;if(i=zQt(e),s=i&BQt|0,s<=KQt)return t[0]=e,t[1]=0,0;if(s<=QQt)return(s&UQt)===YQt?c8(e,s,t):s<=XQt?e>0?(l=e-Q1,t[0]=l-gw,t[1]=l-t[0]-gw,1):(l=e+Q1,t[0]=l+gw,t[1]=l-t[0]+gw,-1):e>0?(l=e-2*Q1,t[0]=l-f8,t[1]=l-t[0]-f8,2):(l=e+2*Q1,t[0]=l+f8,t[1]=l-t[0]+f8,-2);if(s<=tJt)return s<=ZQt?s===JQt?c8(e,s,t):e>0?(l=e-3*Q1,t[0]=l-d8,t[1]=l-t[0]-d8,3):(l=e+3*Q1,t[0]=l+d8,t[1]=l-t[0]+d8,-3):s===eJt?c8(e,s,t):e>0?(l=e-4*Q1,t[0]=l-h8,t[1]=l-t[0]-h8,4):(l=e+4*Q1,t[0]=l+h8,t[1]=l-t[0]+h8,-4);if(s<nJt)return c8(e,s,t);if(s>=jQt)return t[0]=NaN,t[1]=NaN,0;for(n=VQt(e),r=(s>>20)-1046,l=HQt(s-(r<<20|0),n),a=0;a<2;a++)$3[a]=l|0,l=(l-$3[a])*GQt;for($3[2]=l,o=3;$3[o-1]===WQt;)o-=1;return u=qQt($3,L3,r,o),e<0?(t[0]=-L3[0],t[1]=-L3[1],-u):(t[0]=L3[0],t[1]=L3[1],u)}var iJt=rJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sJt=iJt,oFe=sJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var oJt=E1,aJt=toe,uJt=Nl,Wwe=tFe,Vq=nFe,lJt=oFe,cJt=1072243195,fJt=1045430272,Pm=[0,0];function dJt(e){var t,n;if(t=uJt(e),t&=oJt,t<=cJt)return t<fJt?e:Vq(e,0);if(t>=aJt)return NaN;switch(n=lJt(e,Pm),n&3){case 0:return Vq(Pm[0],Pm[1]);case 1:return Wwe(Pm[0],Pm[1]);case 2:return-Vq(Pm[0],Pm[1]);default:return-Wwe(Pm[0],Pm[1])}}var hJt=dJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pJt=hJt,eB=pJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mJt=2.5066282746310007,tB=mJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gwe=KMe;function gJt(e){return e>0?Gwe(e-1):Gwe(e+1)}var yJt=gJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vJt=yJt,aFe=vJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var Ywe=aFe,bJt=KF,_Jt=Za,p8=ks;function wJt(e,t){return t===_Jt?p8:t===p8?0:t>0?Ywe(t)?e:0:Ywe(t)?bJt(p8,e):p8}var xJt=wJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var EJt=E1,TJt=Nl,SJt=1072693247,m8=1e300,g8=1e-300;function AJt(e,t){var n,r;return r=TJt(e),n=r&EJt,n<=SJt?t<0?m8*m8:g8*g8:t>0?m8*m8:g8*g8}var CJt=AJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IJt=ns,Kwe=ks;function kJt(e,t){return e===-1?(e-e)/(e-e):e===1?1:IJt(e)<1==(t===Kwe)?0:Kwe}var RJt=kJt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NJt(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var PJt=NJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var DJt=Nl,y8=T1,Xwe=Xx,OJt=w1,$Jt=PJt,LJt=1048575,Qwe=1048576,MJt=1072693248,FJt=536870912,BJt=524288,jJt=20,UJt=9007199254740992,zJt=.9617966939259756,VJt=.9617967009544373,HJt=-7028461650952758e-24,qJt=[1,1.5],WJt=[0,.5849624872207642],GJt=[0,1350039202129749e-23];function YJt(e,t,n){var r,i,s,o,a,u,l,c,f,d,h,p,m,g,y,v,b,w,x,S,A,C;return S=0,n<Qwe&&(t*=UJt,S-=53,n=DJt(t)),S+=(n>>jJt)-OJt|0,A=n&LJt|0,n=A|MJt|0,A<=235662?C=0:A<767610?C=1:(C=0,S+=1,n-=Qwe),t=Xwe(t,n),c=qJt[C],w=t-c,x=1/(t+c),i=w*x,o=y8(i,0),r=(n>>1|FJt)+BJt,r+=C<<18,u=Xwe(0,r),l=t-(u-c),a=x*(w-o*u-o*l),s=i*i,b=s*s*$Jt(s),b+=a*(o+i),s=o*o,u=3+s+b,u=y8(u,0),l=b-(u-3-s),w=o*u,x=a*u+l*i,d=w+x,d=y8(d,0),h=x-(d-w),p=VJt*d,m=HJt*d+h*zJt+GJt[C],f=WJt[C],v=S,g=p+m+f+v,g=y8(g,0),y=m-(g-v-f-p),e[0]=g,e[1]=y,e}var KJt=YJt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XJt(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var QJt=XJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var JJt=T1,ZJt=QJt,eZt=1.4426950408889634,tZt=1.4426950216293335,nZt=19259629911266175e-24;function rZt(e,t){var n,r,i,s,o,a;return i=t-1,s=i*i*ZJt(i),o=tZt*i,a=i*nZt-s*eZt,r=o+a,r=JJt(r,0),n=a-(r-o),e[0]=r,e[1]=n,e}var iZt=rZt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sZt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var oZt=sZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var aZt=Nl,Jwe=Xx,uZt=T1,lZt=QF,cZt=XF,fZt=XMe,Zwe=w1,exe=E1,txe=roe,dZt=oZt,nxe=1048576,hZt=1071644672,M3=20,pZt=.6931471824645996,mZt=-1904654299957768e-24;function gZt(e,t,n){var r,i,s,o,a,u,l,c,f,d,h;return d=e&exe|0,h=(d>>M3)-Zwe|0,f=0,d>hZt&&(f=e+(nxe>>h+1)>>>0,h=((f&exe)>>M3)-Zwe|0,r=(f&~(txe>>h))>>>0,s=Jwe(0,r),f=(f&txe|nxe)>>M3-h>>>0,e<0&&(f=-f),t-=s),s=n+t,s=uZt(s,0),a=s*pZt,u=(n-(s-t))*fZt+s*mZt,c=a+u,l=u-(c-a),s=c*c,i=c-s*dZt(s),o=c*i/(i-2)-(l+c*l),c=1-(o-c),e=aZt(c),e=lZt(e),e+=f<<M3>>>0,e>>M3<=0?c=cZt(c,f):c=Jwe(c,e),c}var yZt=gZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var rxe=ts,ixe=aFe,sxe=Qx,vZt=nm,oxe=cp,bZt=ns,Hq=YF,_Zt=T1,axe=QF,wZt=Za,xZt=ks,qq=E1,EZt=xJt,TZt=CJt,SZt=RJt,AZt=KJt,CZt=iZt,IZt=yZt,kZt=1072693247,RZt=1105199104,NZt=1139802112,uxe=1083179008,PZt=1072693248,DZt=1083231232,OZt=3230714880,lxe=31,J1=1e300,Z1=1e-300,$Zt=8008566259537294e-32,Dm=[0,0],cxe=[0,0];function uFe(e,t){var n,r,i,s,o,a,u,l,c,f,d,h,p,m,g,y;if(rxe(e)||rxe(t))return NaN;if(Hq.assign(t,Dm,1,0),a=Dm[0],u=Dm[1],u===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return oxe(e);if(t===-.5)return 1/oxe(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(sxe(t))return SZt(e,t)}if(Hq.assign(e,Dm,1,0),s=Dm[0],o=Dm[1],o===0){if(s===0)return EZt(e,t);if(e===1)return 1;if(e===-1&&ixe(t))return-1;if(sxe(e))return e===wZt?uFe(-0,-t):t<0?0:xZt}if(e<0&&vZt(t)===!1)return(e-e)/(e-e);if(i=bZt(e),n=s&qq|0,r=a&qq|0,l=s>>>lxe|0,c=a>>>lxe|0,l&&ixe(t)?l=-1:l=1,r>RZt){if(r>NZt)return TZt(e,t);if(n<kZt)return c===1?l*J1*J1:l*Z1*Z1;if(n>PZt)return c===0?l*J1*J1:l*Z1*Z1;p=CZt(cxe,i)}else p=AZt(cxe,i,n);if(f=_Zt(t,0),h=(t-f)*p[0]+t*p[1],d=f*p[0],m=h+d,Hq.assign(m,Dm,1,0),g=axe(Dm[0]),y=axe(Dm[1]),g>=uxe){if(g-uxe|y||h+$Zt>m-d)return l*J1*J1}else if((g&qq)>=DZt&&(g-OZt|y||h<=m-d))return l*Z1*Z1;return m=IZt(g,d,h),l*m}var LZt=uFe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MZt=LZt,FZt=MZt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BZt(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var jZt=BZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var UZt=tB,fxe=FZt,zZt=eu,VZt=jZt,HZt=143.01608;function qZt(e){var t,n,r;return t=1/e,t=1+t*VZt(t),n=zZt(e),e>HZt?(r=fxe(e,.5*e-.25),n=r*(r/n)):n=fxe(e,e-.5)/n,UZt*n*t}var WZt=qZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GZt=.5772156649015329,soe=GZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var YZt=soe;function KZt(e,t){return t/((1+YZt*e)*e)}var XZt=KZt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QZt(e){var t,n,r;return e===0?1:(e<0?t=-e:t=e,t<=1?(n=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),r=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,n=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),r=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),n/r)}var JZt=QZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var ZZt=ts,een=nm,ten=JF,dxe=ns,nen=lp,ren=eB,hxe=ks,pxe=Za,mxe=Jx,gxe=WZt,yxe=XZt,ien=JZt;function sen(e){var t,n,r,i;if(een(e)&&e<0||e===pxe||ZZt(e))return NaN;if(e===0)return ten(e)?pxe:hxe;if(e>171.61447887182297)return hxe;if(e<-170.5674972726612)return 0;if(n=dxe(e),n>33)return e>=0?gxe(e):(r=nen(n),r&1?t=1:t=-1,i=n-r,i>.5&&(r+=1,i=n-r),i=n*ren(mxe*i),t*mxe/(dxe(i)*gxe(n)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return yxe(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return yxe(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*ien(e))}var oen=sen;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aen=oen,i5=aen;const uen=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var len=ts,cen=nm,fen=i5,den=ks,hen=uen,pen=170;function men(e){return len(e)?NaN:cen(e)?e<0?NaN:e<=pen?hen[e]:den:fen(e+1)}var gen=men;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yen=gen,ven=yen;/**
* @license Apache-2.0
*
* Copyright (c) 2024 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ben(e){var t,n,r;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(n=3847467039331777e-5+e*(3685766504351951e-5+e*(1588920245372942e-5+e*(4059208354298835e-6+e*(6805476611834733e-7+e*(7823975500312005e-8+e*(6246580776401795e-9+e*(341986.3488721347+e*(12287.194511824551+e*(261.61404416416684+e*2.5066282746310007))))))))),r=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,n=2.5066282746310007+e*(261.61404416416684+e*(12287.194511824551+e*(341986.3488721347+e*(6246580776401795e-9+e*(7823975500312005e-8+e*(6805476611834733e-7+e*(4059208354298835e-6+e*(1588920245372942e-5+e*(3685766504351951e-5+e*3847467039331777e-5))))))))),r=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),n/r)}var _en=ben;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var wen=_en,xen=wen;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Een=xen,Ten=Een;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sen=10.900511,s5=Sen;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var vxe=Ten,Aen=i5,bxe=x1,_xe=ns,wxe=eu,xxe=Pl,Cen=S1,Ien=uC,ken=s5,Exe=170,Ren=4269068009004705e289;function lFe(e,t){var n,r,i;return e<Cen?t>Exe?(r=lFe(t,Exe-t),r*=e,r*=Ren,1/r):1/(e*Aen(e+t)):(i=e+ken-.5,e+t===e?_xe(t)<10?n=wxe((.5-e)*bxe(t/i)):n=1:(_xe(t)<10?n=wxe((.5-e)*bxe(t/i)):n=xxe(i/(i+t),e-.5),n*=vxe(e)/vxe(e+t)),n*=xxe(Ien/(i+t),t),n)}var Nen=lFe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Pen=ns,Txe=lp,Sxe=i5,Axe=ven,Den=Nen,Cxe=170;function Oen(e,t){var n,r,i;if(e<=0||e+t<=0)return Sxe(e)/Sxe(e+t);if(r=Txe(t),r===t){if(i=Txe(e),i===e&&e<=Cxe&&e+t<=Cxe)return Axe(i-1)/Axe(r+i-1);if(Pen(t)<20){if(t===0)return 1;if(t<0){for(e-=1,n=e,t+=1;t!==0;)e-=1,n*=e,t+=1;return n}for(n=1/e,t-=1;t!==0;)e+=1,n/=e,t-=1;return n}}return Den(e,t)}var $en=Oen;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Len=$en,Men=Len;/**
* @license Apache-2.0
*
* Copyright (c) 2024 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fen=170,Ben=Fen;const jen=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uen=ts,zen=nm,Ven=i5,Hen=ks,qen=Ben,Wen=jen;function Gen(e){return Uen(e)?NaN:zen(e)?e<0?NaN:e<=qen?Wen[e]:Hen:Ven(e+1)}var Yen=Gen;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ken=Yen,Xen=Ken;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Qen(e){return e===0?.3999999999940942:.3999999999940942+e*(.22222198432149784+e*.15313837699209373)}var Jen=Qen;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Zen(e){return e===0?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+e*.14798198605116586))}var etn=Zen;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_log.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var Ixe=Nl,ttn=Xx,ntn=ts,rtn=w1,itn=Za,stn=Jen,otn=etn,v8=.6931471803691238,b8=19082149292705877e-26,atn=0x40000000000000,utn=.3333333333333333,kxe=1048575,ltn=2146435072,ctn=1048576,ftn=1072693248;function dtn(e){var t,n,r,i,s,o,a,u,l,c,f,d;return e===0?itn:ntn(e)||e<0?NaN:(n=Ixe(e),s=0,n<ctn&&(s-=54,e*=atn,n=Ixe(e)),n>=ltn?e+e:(s+=(n>>20)-rtn|0,n&=kxe,u=n+614244&1048576|0,e=ttn(e,n|u^ftn),s+=u>>20|0,a=e-1,(kxe&2+n)<3?a===0?s===0?0:s*v8+s*b8:(o=a*a*(.5-utn*a),s===0?a-o:s*v8-(o-s*b8-a)):(c=a/(2+a),d=c*c,u=n-398458|0,f=d*d,l=440401-n|0,i=f*stn(f),r=d*otn(f),u|=l,o=r+i,u>0?(t=.5*a*a,s===0?a-(t-c*(t+o)):s*v8-(t-(c*(t+o)+s*b8)-a)):s===0?a-c*(a-o):s*v8-(c*(a-o)-s*b8-a))))}var htn=dtn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ptn=htn,Md=ptn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var mtn=Nl,Wq=tFe,Rxe=nFe,gtn=oFe,Om=[0,0],ytn=2147483647,vtn=1072243195,btn=1044381696,_tn=2146435072;function wtn(e){var t,n;if(t=mtn(e),t&=ytn,t<=vtn)return t<btn?1:Wq(e,0);if(t>=_tn)return NaN;switch(n=gtn(e,Om),n&3){case 0:return Wq(Om[0],Om[1]);case 1:return-Rxe(Om[0],Om[1]);case 2:return-Wq(Om[0],Om[1]);default:return Rxe(Om[0],Om[1])}}var xtn=wtn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Etn=xtn,Ttn=Etn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Stn=ts,Atn=Qx,Nxe=Ttn,Gq=eB,Ctn=ns,F3=KF,B3=Jx;function Itn(e){var t,n;return Stn(e)?NaN:Atn(e)?NaN:(n=e%2,t=Ctn(n),t===0||t===1?F3(0,n):t<.25?Gq(B3*n):t<.75?(t=.5-t,F3(Nxe(B3*t),n)):t<1.25?(n=F3(1,n)-n,Gq(B3*n)):t<1.75?(t-=1.5,-F3(Nxe(B3*t),n)):(n-=F3(2,n),Gq(B3*n)))}var ktn=Itn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rtn=ktn,Ntn=Rtn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ptn(e){return e===0?.06735230105312927:.06735230105312927+e*(.007385550860814029+e*(.0011927076318336207+e*(.00022086279071390839+e*25214456545125733e-21)))}var Dtn=Ptn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Otn(e){return e===0?.020580808432516733:.020580808432516733+e*(.0028905138367341563+e*(.0005100697921535113+e*(.00010801156724758394+e*44864094961891516e-21)))}var $tn=Otn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ltn(e){return e===0?1.3920053346762105:1.3920053346762105+e*(.7219355475671381+e*(.17193386563280308+e*(.01864591917156529+e*(.0007779424963818936+e*7326684307446256e-21))))}var Mtn=Ltn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ftn(e){return e===0?.21498241596060885:.21498241596060885+e*(.325778796408931+e*(.14635047265246445+e*(.02664227030336386+e*(.0018402845140733772+e*3194753265841009e-20))))}var Btn=Ftn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jtn(e){return e===0?-.032788541075985965:-.032788541075985965+e*(.006100538702462913+e*(-.0014034646998923284+e*.00031563207090362595))}var Utn=jtn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ztn(e){return e===0?.01797067508118204:.01797067508118204+e*(-.0036845201678113826+e*(.000881081882437654+e*-.00031275416837512086))}var Vtn=ztn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Htn(e){return e===0?-.010314224129834144:-.010314224129834144+e*(.0022596478090061247+e*(-.0005385953053567405+e*.0003355291926355191))}var qtn=Htn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Wtn(e){return e===0?.6328270640250934:.6328270640250934+e*(1.4549225013723477+e*(.9777175279633727+e*(.22896372806469245+e*.013381091853678766)))}var Gtn=Wtn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ytn(e){return e===0?2.4559779371304113:2.4559779371304113+e*(2.128489763798934+e*(.7692851504566728+e*(.10422264559336913+e*.003217092422824239)))}var Ktn=Ytn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Xtn(e){return e===0?.08333333333333297:.08333333333333297+e*(-.0027777777772877554+e*(.0007936505586430196+e*(-.00059518755745034+e*(.0008363399189962821+e*-.0016309293409657527))))}var Qtn=Xtn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_lgamma_r.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var Jtn=ts,Ztn=Qx,enn=ns,tE=Md,tnn=eoe,nnn=Ntn,rnn=Jx,Yq=ks,inn=Dtn,snn=$tn,onn=Mtn,ann=Btn,unn=Utn,lnn=Vtn,cnn=qtn,fnn=Gtn,dnn=Ktn,hnn=Qtn,pnn=.07721566490153287,mnn=.3224670334241136,gnn=1,ynn=-.07721566490153287,vnn=.48383612272381005,bnn=-.1475877229945939,_nn=.06462494023913339,wnn=-.07721566490153287,xnn=1,Enn=.4189385332046727,_8=1.4616321449683622,Tnn=4503599627370496,Snn=0x400000000000000,Ann=8470329472543003e-37,Pxe=1.4616321449683622,Cnn=-.12148629053584961,Inn=-3638676997039505e-33;function knn(e){var t,n,r,i,s,o,a,u,l,c,f,d,h;if(Jtn(e)||Ztn(e))return e;if(e===0)return Yq;if(e<0?(t=!0,e=-e):t=!1,e<Ann)return-tE(e);if(t){if(e>=Tnn||(l=nnn(e),l===0))return Yq;n=tE(rnn/enn(l*e))}if(e===1||e===2)return 0;if(e<2)switch(e<=.9?(h=-tE(e),e>=_8-1+.27?(f=1-e,r=0):e>=_8-1-.27?(f=e-(Pxe-1),r=1):(f=e,r=2)):(h=0,e>=_8+.27?(f=2-e,r=0):e>=_8-.27?(f=e-Pxe,r=1):(f=e-1,r=2)),r){case 0:d=f*f,o=pnn+d*inn(d),s=d*(mnn+d*snn(d)),a=f*o+s,h+=a-.5*f;break;case 1:d=f*f,c=d*f,o=vnn+c*unn(c),s=bnn+c*lnn(c),i=_nn+c*cnn(c),a=d*o-(Inn-c*(s+f*i)),h+=Cnn+a;break;case 2:o=f*(wnn+f*fnn(f)),s=xnn+f*dnn(f),h+=-.5*f+o/s;break}else if(e<8)switch(r=tnn(e),f=e-r,a=f*(ynn+f*ann(f)),u=gnn+f*onn(f),h=.5*f+a/u,d=1,r){case 7:d*=f+6;case 6:d*=f+5;case 5:d*=f+4;case 4:d*=f+3;case 3:d*=f+2,h+=tE(d)}else e<Snn?(l=tE(e),d=1/e,f=d*d,c=Enn+d*hnn(f),h=(e-.5)*(l-1)+c):h=e*(tE(e)-1);return t&&(h=n-h),h}var Rnn=knn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nnn=Rnn,ooe=Nnn;/**
* @license Apache-2.0
*
* Copyright (c) 2024 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pnn(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var Dnn=Pnn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var Onn=tB,Dxe=Pl,$nn=eu,Lnn=Dnn,Mnn=143.01608;function Fnn(e){var t,n,r;return t=1/e,t=1+t*Lnn(t),n=$nn(e),e>Mnn?(r=Dxe(e,.5*e-.25),n=r*(r/n)):n=Dxe(e,e-.5)/n,Onn*n*t}var Bnn=Fnn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var jnn=soe;function Unn(e,t){return t/((1+jnn*e)*e)}var znn=Unn;/**
* @license Apache-2.0
*
* Copyright (c) 2024 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vnn(e){var t,n,r;return e===0?1:(e<0?t=-e:t=e,t<=1?(n=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),r=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,n=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),r=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),n/r)}var Hnn=Vnn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var qnn=ts,Wnn=nm,Gnn=JF,Oxe=ns,Ynn=lp,Knn=eB,$xe=ks,Lxe=Za,Mxe=Jx,Fxe=Bnn,Bxe=znn,Xnn=Hnn;function Qnn(e){var t,n,r,i;if(Wnn(e)&&e<0||e===Lxe||qnn(e))return NaN;if(e===0)return Gnn(e)?Lxe:$xe;if(e>171.61447887182297)return $xe;if(e<-170.5674972726612)return 0;if(n=Oxe(e),n>33)return e>=0?Fxe(e):(r=Ynn(n),r&1?t=1:t=-1,i=n-r,i>.5&&(r+=1,i=n-r),i=n*Knn(Mxe*i),t*Mxe/(Oxe(i)*Fxe(n)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return Bxe(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return Bxe(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*Xnn(e))}var Jnn=Qnn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Znn=Jnn,cFe=Znn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ern=14901161193847656e-24,trn=ern;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nrn=709.782712893384,Zx=nrn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rrn=eu;function irn(e,t){var n,r,i,s;if(i=rrn(-t),r=i,r!==0)for(n=r,s=1;s<e;++s)n/=s,n*=t,r+=n;return r}var srn=irn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function orn(e){return e===0?-.3250421072470015:-.3250421072470015+e*(-.02848174957559851+e*(-.005770270296489442+e*-23763016656650163e-21))}var arn=orn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function urn(e){return e===0?.39791722395915535:.39791722395915535+e*(.0650222499887673+e*(.005081306281875766+e*(.00013249473800432164+e*-3960228278775368e-21)))}var lrn=urn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function crn(e){return e===0?.41485611868374833:.41485611868374833+e*(-.3722078760357013+e*(.31834661990116175+e*(-.11089469428239668+e*(.035478304325618236+e*-.002166375594868791))))}var frn=crn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function drn(e){return e===0?.10642088040084423:.10642088040084423+e*(.540397917702171+e*(.07182865441419627+e*(.12617121980876164+e*(.01363708391202905+e*.011984499846799107))))}var hrn=drn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function prn(e){return e===0?-.6938585727071818:-.6938585727071818+e*(-10.558626225323291+e*(-62.375332450326006+e*(-162.39666946257347+e*(-184.60509290671104+e*(-81.2874355063066+e*-9.814329344169145)))))}var mrn=prn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function grn(e){return e===0?19.651271667439257:19.651271667439257+e*(137.65775414351904+e*(434.56587747522923+e*(645.3872717332679+e*(429.00814002756783+e*(108.63500554177944+e*(6.570249770319282+e*-.0604244152148581))))))}var yrn=grn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vrn(e){return e===0?-.799283237680523:-.799283237680523+e*(-17.757954917754752+e*(-160.63638485582192+e*(-637.5664433683896+e*(-1025.0951316110772+e*-483.5191916086514))))}var brn=vrn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _rn(e){return e===0?30.33806074348246:30.33806074348246+e*(325.7925129965739+e*(1536.729586084437+e*(3199.8582195085955+e*(2553.0504064331644+e*(474.52854120695537+e*-22.44095244658582)))))}var wrn=_rn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_erf.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var xrn=ts,jxe=eu,Ern=T1,Trn=ks,Srn=Za,Arn=arn,Crn=lrn,Irn=frn,krn=hrn,Rrn=mrn,Nrn=yrn,Prn=brn,Drn=wrn,w8=1e-300,Orn=13877787807814457e-33,Uxe=.8450629115104675,$rn=.12837916709551256,Lrn=1,Mrn=-.0023621185607526594,Frn=1,Brn=-.009864944034847148,jrn=1,Urn=-.0098649429247001,zrn=1;function Vrn(e){var t,n,r,i,s,o,a,u;if(xrn(e))return NaN;if(e===Trn)return 0;if(e===Srn)return 2;if(e===0)return 1;if(e<0?(t=!0,n=-e):(t=!1,n=e),n<.84375)return n<Orn?1-e:(r=e*e,i=$rn+r*Arn(r),s=Lrn+r*Crn(r),o=i/s,e<.25?1-(e+e*o):(i=e*o,i+=e-.5,.5-i));if(n<1.25)return s=n-1,a=Mrn+s*Irn(s),u=Frn+s*krn(s),t?1+Uxe+a/u:1-Uxe-a/u;if(n<28){if(s=1/(n*n),n<2.857142857142857)i=Brn+s*Rrn(s),s=jrn+s*Nrn(s);else{if(e<-6)return 2-w8;i=Urn+s*Prn(s),s=zrn+s*Drn(s)}return r=Ern(n,0),i=jxe(-(r*r)-.5625)*jxe((r-n)*(r+n)+i/s),t?2-i/n:i/n}return t?2-w8:w8*w8}var Hrn=Vrn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qrn=Hrn,fFe=qrn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Wrn=fFe,zxe=cp,Grn=eu,Yrn=Jx;function Krn(e,t){var n,r,i,s,o;if(s=Wrn(zxe(t)),s!==0&&e>1){for(r=Grn(-t)/zxe(Yrn*t),r*=t,n=.5,r/=n,i=r,o=2;o<e;++o)r/=o-n,r*=t,i+=r;s+=i}return s}var Xrn=Krn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qrn=-708.3964185322641,lC=Qrn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var nE=eu,x8=Pl,Jrn=Md,Vxe=Zx,Hxe=lC;function Zrn(e,t){var n,r;return r=e*Jrn(t),t>=1?r<Vxe&&-t>Hxe?n=x8(t,e)*nE(-t):e>=1?n=x8(t/nE(t/e),e):n=nE(r-t):r>Hxe?n=x8(t,e)*nE(-t):t/e<Vxe?n=x8(t/nE(t/e),e):n=nE(r-t),n}var ein=Zrn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tin(e,t){var n,r;if(r=e.length,r<2||t===0)return r===0?0:e[0];for(r-=1,n=e[r]*t+e[r-1],r-=2;r>=0;)n=n*t+e[r],r-=1;return n}var dFe=tin;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nin=Function,rin=nin;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iin=rin,sin=iin;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oin=sin,ain=dFe;function uin(e){var t,n,r,i;if(e.length>500)return s;if(t="return function evalpoly(x){",n=e.length,n===0)t+="return 0.0;";else if(n===1)t+="return "+e[0]+";";else{for(t+="if(x===0.0){return "+e[0]+";}",t+="return "+e[0],r=n-1,i=1;i<n;i++)t+="+x*",i<r&&(t+="("),t+=e[i];for(i=0;i<r-1;i++)t+=")";t+=";"}return t+="}",t+="//# sourceURL=evalpoly.factory.js",new oin(t)();function s(o){return ain(e,o)}}var lin=uin;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cin=HF,hFe=dFe,fin=lin;cin(hFe,"factory",fin);var din=hFe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hin=eval,pin=hin;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var min=pin;function gin(){var e;try{min('"use strict"; (function* () {})'),e=!0}catch{e=!1}return e}var yin=gin;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vin=yin,pFe=vin;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E8=ns,bin=S1,_in=1e6;function win(e,t){var n,r,i,s,o,a;if(a={},arguments.length>1&&(a=t),r=a.tolerance||bin,s=a.maxTerms||_in,o=a.initialValue||0,n=typeof e.next=="function",n===!0){for(i of e)if(o+=i,E8(r*o)>=E8(i)||--s===0)break}else do i=e(),o+=i;while(E8(r*o)<E8(i)&&--s);return o}var xin=win;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qxe=ns,Ein=S1,Tin=1e6;function Sin(e,t){var n,r,i,s,o;o={},arguments.length>1&&(o=t),n=o.tolerance||Ein,i=o.maxTerms||Tin,s=o.initialValue||0;do r=e(),s+=r;while(qxe(n*s)<qxe(r)&&--i);return s}var Ain=Sin;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cin=pFe,Iin=xin,kin=Ain,CQ;Cin()?CQ=Iin:CQ=kin;var nB=CQ;/**
* @license Apache-2.0
*
* Copyright (c) 2023 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link https://www.boost.org/doc/libs/1_83_0/boost/math/special_functions/log1p.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2005-2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
*/function Rin(e){var t=-e,n=-1,r=0;return i;function i(){return n*=t,r+=1,n/r}}var Nin=Rin;/**
* @license Apache-2.0
*
* Copyright (c) 2023 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link https://www.boost.org/doc/libs/1_83_0/boost/math/special_functions/log1p.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2005-2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Pin=ns,Din=Md,Oin=S1,$in=nB,Lin=Nin;function Min(e){var t,n;return e<=-1?NaN:(n=Pin(e),n>.95?Din(1+e)-e:n<Oin?-e*e/2:(t={initialValue:-e},$in(Lin(e),t)))}var Fin=Min;/**
* @license Apache-2.0
*
* Copyright (c) 2023 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bin=Fin,jin=Bin;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uin=6.283185307179586,zin=Uin;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vin(e){return e===0?-.3333333333333333:-.3333333333333333+e*(.08333333333333333+e*(-.014814814814814815+e*(.0011574074074074073+e*(.0003527336860670194+e*(-.0001787551440329218+e*(3919263178522438e-20+e*(-21854485106799924e-22+e*(-185406221071516e-20+e*(8296711340953087e-22+e*(-17665952736826078e-23+e*(6707853543401498e-24+e*(10261809784240309e-24+e*(-4382036018453353e-24+e*914769958223679e-24)))))))))))))}var Hin=Vin;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qin(e){return e===0?-.001851851851851852:-.001851851851851852+e*(-.003472222222222222+e*(.0026455026455026454+e*(-.0009902263374485596+e*(.00020576131687242798+e*(-4018775720164609e-22+e*(-18098550334489977e-21+e*(764916091608111e-20+e*(-16120900894563446e-22+e*(4647127802807434e-24+e*(1378633446915721e-22+e*(-5752545603517705e-23+e*11951628599778148e-24)))))))))))}var Win=qin;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Gin(e){return e===0?.004133597883597883:.004133597883597883+e*(-.0026813271604938273+e*(.0007716049382716049+e*(20093878600823047e-22+e*(-.00010736653226365161+e*(52923448829120125e-21+e*(-12760635188618728e-21+e*(3423578734096138e-23+e*(13721957309062932e-22+e*(-6298992138380055e-22+e*14280614206064242e-23)))))))))}var Yin=Gin;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Kin(e){return e===0?.0006494341563786008:.0006494341563786008+e*(.00022947209362139917+e*(-.0004691894943952557+e*(.00026772063206283885+e*(-7561801671883977e-20+e*(-2396505113867297e-22+e*(11082654115347302e-21+e*(-56749528269915965e-22+e*14230900732435883e-22)))))))}var Xin=Kin;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Qin(e){return e===0?-.0008618882909167117:-.0008618882909167117+e*(.0007840392217200666+e*(-.0002990724803031902+e*(-14638452578843418e-22+e*(6641498215465122e-20+e*(-3968365047179435e-20+e*11375726970678419e-21)))))}var Jin=Qin;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Zin(e){return e===0?-.00033679855336635813:-.00033679855336635813+e*(-6972813758365858e-20+e*(.0002772753244959392+e*(-.00019932570516188847+e*(6797780477937208e-20+e*(1419062920643967e-22+e*(-13594048189768693e-21+e*(8018470256334202e-21+e*-2291481176508095e-21)))))))}var esn=Zin;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tsn(e){return e===0?.0005313079364639922:.0005313079364639922+e*(-.0005921664373536939+e*(.0002708782096718045+e*(7902353232660328e-22+e*(-8153969367561969e-20+e*(561168275310625e-19+e*-18329116582843375e-21)))))}var nsn=tsn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rsn(e){return e===0?.00034436760689237765:.00034436760689237765+e*(5171790908260592e-20+e*(-.00033493161081142234+e*(.0002812695154763237+e*-.00010976582244684731)))}var isn=rsn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ssn(e){return e===0?-.0006526239185953094:-.0006526239185953094+e*(.0008394987206720873+e*-.000438297098541721)}var osn=ssn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var asn=din,usn=jin,lsn=fFe,Kq=cp,csn=eu,fsn=zin,dsn=Hin,hsn=Win,psn=Yin,msn=Xin,gsn=Jin,ysn=esn,vsn=nsn,bsn=isn,_sn=osn,Zd=[0,0,0,0,0,0,0,0,0,0];function wsn(e,t){var n,r,i,s,o;return r=(t-e)/e,i=-usn(r),s=e*i,o=Kq(2*i),t<e&&(o=-o),Zd[0]=dsn(o),Zd[1]=hsn(o),Zd[2]=psn(o),Zd[3]=msn(o),Zd[4]=gsn(o),Zd[5]=ysn(o),Zd[6]=vsn(o),Zd[7]=bsn(o),Zd[8]=_sn(o),Zd[9]=-.0005967612901927463,n=asn(Zd,1/e),n*=csn(-s)/Kq(fsn*e),t<e&&(n=-n),n+=lsn(Kq(s))/2,n}var xsn=wsn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function Esn(e,t){var n=1,r=e,i=t;return s;function s(){var o=n;return r+=1,n*=i/r,o}}var Tsn=Esn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Ssn=nB,Asn=Tsn;function Csn(e,t,n){var r,i;return n=n||0,i=Asn(e,t),r=Ssn(i,{initialValue:n}),r}var Isn=Csn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ksn(e){var t,n,r;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(n=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),r=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,n=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),r=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),n/r)}var Rsn=ksn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Nsn=Rsn,Psn=Nsn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dsn=Psn,rB=Dsn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Osn=rB,$sn=ooe,Lsn=cFe,Msn=x1,Fsn=cp,Bsn=ns,ey=eu,j3=Pl,Xq=ioe,Qq=r5,Wxe=Md,T8=Zx,U3=lC,Jq=s5,jsn=uC;function Usn(e,t){var n,r,i,s,o,a,u;return i=e+Jq-.5,u=(t-e-Jq+.5)/i,e<1?t<=U3?ey(e*Wxe(t)-t-$sn(e)):j3(t,e)*ey(-t)/Lsn(e):(Bsn(u*u*e)<=100&&e>150?(n=e*(Msn(u)-u)+t*(.5-Jq)/i,n=ey(n)):(s=e*Wxe(t/i),o=e-t,Qq(s,o)<=U3||Xq(s,o)>=T8?(r=o/e,Qq(s,o)/2>U3&&Xq(s,o)/2<T8?(a=j3(t/i,e/2)*ey(o/2),n=a*a):Qq(s,o)/4>U3&&Xq(s,o)/4<T8&&t>e?(a=j3(t/i,e/4)*ey(o/4),n=a*a,n*=n):r>U3&&r<T8?n=j3(t*ey(r)/i,e):n=ey(s+o)):n=j3(t/i,e)*ey(o)),n*=Fsn(i/jsn)/Osn(e),n)}var zsn=Usn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_85_0/boost/math/special_functions/powm1.hpp}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Zq=ts,Vsn=Qx,Gxe=ns,Hsn=GF,qsn=Md,Wsn=Pl,Gsn=eoe;function Ysn(e,t){var n,r;if(Zq(e)||Zq(t))return NaN;if(t===0)return 0;if(e===0)return-1;if(e<0&&t%2===0&&(e=-e),e>0){if((Gxe(t*(e-1))<.5||Gxe(t)<.2)&&(r=qsn(e)*t,r<.5))return Hsn(r)}else if(Gsn(t)!==t)return NaN;return n=Wsn(e,t)-1,Vsn(n)||Zq(n)?NaN:n}var Ksn=Ysn;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xsn=Ksn,Qsn=Xsn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Jsn(e){var t,n,r;return e===0?-.01803556856784494:(e<0?t=-e:t=e,t<=1?(n=-.01803556856784494+e*(.02512664961998968+e*(.049410315156753225+e*(.0172491608709614+e*(-.0002594535632054381+e*(-.0005410098692152044+e*(-3245886498259485e-20+e*0)))))),r=1+e*(1.962029871977952+e*(1.4801966942423133+e*(.5413914320717209+e*(.09885042511280101+e*(.008213096746488934+e*(.00022493629192211576+e*-22335276320861708e-23))))))):(e=1/e,n=0+e*(-3245886498259485e-20+e*(-.0005410098692152044+e*(-.0002594535632054381+e*(.0172491608709614+e*(.049410315156753225+e*(.02512664961998968+e*-.01803556856784494)))))),r=-22335276320861708e-23+e*(.00022493629192211576+e*(.008213096746488934+e*(.09885042511280101+e*(.5413914320717209+e*(1.4801966942423133+e*(1.962029871977952+e*1))))))),n/r)}var Zsn=Jsn;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eon(e){var t,n,r;return e===0?.04906224540690395:(e<0?t=-e:t=e,t<=1?(n=.04906224540690395+e*(-.09691175301595212+e*(-.4149833583594954+e*(-.4065671242119384+e*(-.1584135863906922+e*(-.024014982064857155+e*-.0010034668769627955))))),r=1+e*(3.0234982984646304+e*(3.4873958536072385+e*(1.9141558827442668+e*(.5071377386143635+e*(.05770397226904519+e*.001957681026011072)))))):(e=1/e,n=-.0010034668769627955+e*(-.024014982064857155+e*(-.1584135863906922+e*(-.4065671242119384+e*(-.4149833583594954+e*(-.09691175301595212+e*.04906224540690395))))),r=.001957681026011072+e*(.05770397226904519+e*(.5071377386143635+e*(1.9141558827442668+e*(3.4873958536072385+e*(3.0234982984646304+e*1)))))),n/r)}var ton=eon;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function non(e){var t,n,r;return e===0?-.029232972183027003:(e<0?t=-e:t=e,t<=1?(n=-.029232972183027003+e*(.14421626775719232+e*(-.14244039073863127+e*(.05428096940550536+e*(-.008505359768683364+e*(.0004311713426792973+e*0))))),r=1+e*(-1.5016935605448505+e*(.846973248876495+e*(-.22009515181499575+e*(.02558279715597587+e*(-.0010066679553914337+e*-8271935218912905e-22)))))):(e=1/e,n=0+e*(.0004311713426792973+e*(-.008505359768683364+e*(.05428096940550536+e*(-.14244039073863127+e*(.14421626775719232+e*-.029232972183027003))))),r=-8271935218912905e-22+e*(-.0010066679553914337+e*(.02558279715597587+e*(-.22009515181499575+e*(.846973248876495+e*(-1.5016935605448505+e*1)))))),n/r)}var ron=non;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/lgamma_small.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var eW=Md,ion=S1,son=Zsn,oon=ton,aon=ron,uon=.15896368026733398,lon=.5281534194946289,con=.45201730728149414;function fon(e,t,n){var r,i,s,o;if(e<ion)return-eW(e);if(t===0||n===0)return 0;if(i=0,e>2){if(e>=3){do e-=1,n-=1,i+=eW(e);while(e>=3);n=e-2}return s=n*(e+1),o=son(n),i+=s*uon+s*o,i}return e<1&&(i+=-eW(e),n=t,t=e,e+=1),e<=1.5?(s=oon(t),r=t*n,i+=r*lon+r*s,i):(s=n*t,o=aon(-n),i+=s*con+s*o,i)}var don=fon;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Yxe=i5,Kxe=GF,hon=x1,pon=ts,Xxe=don;function mon(e){return pon(e)?NaN:e<0?e<-.5?Yxe(1+e)-1:Kxe(-hon(e)+Xxe(e+2,e+1,e)):e<2?Kxe(Xxe(e+1,e,e-1)):Yxe(1+e)-1}var gon=mon;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yon=gon,von=yon;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function bon(e,t){var n,r,i,s;return n=-t,t=-t,r=e+1,i=1,o;function o(){return s=n/r,n*=t,i+=1,n/=i,r+=1,s}}var _on=bon;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var won=Qsn,xon=nB,Eon=von,Ton=_on;function Son(e,t,n){var r,i,s,o,a;return i=Eon(e),s=(i+1)/e,o=won(t,e),i-=o,i/=e,a=Ton(e,t),o+=1,r=n?s:0,i=-o*xon(a,{initialValue:(r-i)/o}),n&&(i=-i),[i,s]}var Aon=Son;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Con=11754943508222875e-54,mFe=Con;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mL=ns,r0=mFe,Ion=S1,kon=1e6;function Ron(e,t,n){var r,i,s,o,a,u,l;if(r=typeof e.next=="function",l=r?e.next().value:e(),o=l[1],s=l[0],o===0&&(o=r0),a=o,u=0,r===!0)do l=e.next().value,l&&(u=l[1]+l[0]*u,u===0&&(u=r0),a=l[1]+l[0]/a,a===0&&(a=r0),u=1/u,i=a*u,o*=i);while(mL(i-1)>t&&--n);else do l=e(),l&&(u=l[1]+l[0]*u,u===0&&(u=r0),a=l[1]+l[0]/a,a===0&&(a=r0),u=1/u,i=a*u,o*=i);while(l&&mL(i-1)>t&&--n);return s/o}function Non(e,t,n){var r,i,s,o,a,u;if(r=typeof e.next=="function",u=r?e.next().value:e(),s=u[1],s===0&&(s=r0),o=s,a=0,r===!0)do u=e.next().value,u&&(a=u[1]+u[0]*a,a===0&&(a=r0),o=u[1]+u[0]/o,o===0&&(o=r0),a=1/a,i=o*a,s*=i);while(u&&mL(i-1)>t&&--n);else do u=e(),u&&(a=u[1]+u[0]*a,a===0&&(a=r0),o=u[1]+u[0]/o,o===0&&(o=r0),a=1/a,i=o*a,s*=i);while(u&&mL(i-1)>t&&--n);return s}function Pon(e,t){var n,r,i;return r={},arguments.length>1&&(r=t),n=r.maxIter||kon,i=r.tolerance||Ion,r.keep?Non(e,i,n):Ron(e,i,n)}var Don=Pon;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gFe=ns,Oon=S1,PT=mFe,$on=1e6;function Lon(e,t,n){var r,i,s,o,a,u;u=e(),a=u[1],i=u[0],a===0&&(a=PT),s=a,o=0;do u=e(),u&&(o=u[1]+u[0]*o,o===0&&(o=PT),s=u[1]+u[0]/s,s===0&&(s=PT),o=1/o,r=s*o,a*=r);while(u&&gFe(r-1)>t&&--n);return i/a}function Mon(e,t,n){var r,i,s,o,a;a=e(),o=a[1],o===0&&(o=PT),i=o,s=0;do a=e(),a&&(s=a[1]+a[0]*s,s===0&&(s=PT),i=a[1]+a[0]/i,i===0&&(i=PT),s=1/s,r=i*s,o*=r);while(a&&gFe(r-1)>t&&--n);return o}function Fon(e,t){var n,r,i;return r={},arguments.length>1&&(r=t),i=r.tolerance||Oon,n=r.maxIter||$on,r.keep?Mon(e,i,n):Lon(e,i,n)}var Bon=Fon;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jon=pFe,Uon=Don,zon=Bon,IQ;jon()?IQ=Uon:IQ=zon;var yFe=IQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function Von(e,t){var n=t-e+1,r=e,i=0;return s;function s(){return i+=1,n+=2,[i*(r-i),n]}}var Hon=Von;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var qon=yFe,Won=Hon;function Gon(e,t){var n=Won(e,t);return 1/(t-e+1+qon(n))}var Yon=Gon;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Kon=ooe,Xon=lp,z3=cFe,Qxe=ns,Qon=eu,Jxe=Pl,eh=Md,Jon=trn,Zxe=eFe,Zon=tB,e2e=Zx,ean=ks,tan=srn,nan=Xrn,t2e=ein,ran=xsn,tW=Isn,n2e=zsn,ian=Aon,r2e=Yon,san=170;function vFe(e,t,n,r){var i,s,o,a,u,l,c,f,d,h,p,m,g,y,v;if(e<0||t<=0)return NaN;if(s=n===void 0?!0:n,f=r,d=0,t>=san&&!s)return f&&t*4<e?(d=t*eh(e)-e,d+=eh(r2e(t,e))):!f&&t>4*e?(d=t*eh(e)-e,a=0,d+=eh(tW(t,e,a)/t)):(d=vFe(t,e,!0,f),d===0?f?(d=1+1/(12*t)+1/(288*t*t),d=eh(d)-t+(t-.5)*eh(t),d+=eh(Zon)):(d=t*eh(e)-e,a=0,d+=eh(tW(t,e,a)/t)):d=eh(d)+Kon(t)),d>e2e?ean:Qon(d);switch(c=t<30&&t<=e+1&&e<e2e,c?(y=Xon(t),h=y===t,u=h?!1:Qxe(y-t)===.5):h=u=!1,h&&e>.6?(f=!f,o=0):u&&e>.2?(f=!f,o=1):e<Jon&&t>1?o=6:e<.5?-.4/eh(e)<t?o=2:o=3:e<1.1?e*.75<t?o=2:o=3:(l=!1,s&&t>20&&(p=Qxe((e-t)/t),t>200?20/t>p*p&&(l=!0):p<.4&&(l=!0)),l?o=5:e-1/(3*e)<t?o=2:(o=4,f=!f)),o){case 0:d=tan(t,e),s===!1&&(d*=z3(t));break;case 1:d=nan(t,e),s===!1&&(d*=z3(t));break;case 2:d=s?n2e(t,e):t2e(t,e),d!==0&&(a=0,i=!1,f&&(a=s?1:z3(t),s||d>=1||Zxe*d>a?(a/=d,s||t<1||Zxe/t>a?(a*=-t,i=!0):a=0):a=0)),d*=tW(t,e,a)/t,i&&(f=!1,d=-d);break;case 3:f=!f,g=ian(t,e,f),d=g[0],v=g[1],f=!1,s&&(d/=v);break;case 4:d=s?n2e(t,e):t2e(t,e),d!==0&&(d*=r2e(t,e));break;case 5:d=ran(t,e),e>=t&&(f=!f);break;case 6:d=s?Jxe(e,t)/z3(t+1):Jxe(e,t)/t,d*=1-t*e/(t+1);break}return s&&d>1&&(d=1),f&&(m=s?1:z3(t),d=m-d),d}var oan=vFe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aan=oan,uan=aan;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rE=eu,S8=Pl,lan=Md,i2e=Zx,s2e=lC;function can(e,t){var n,r;return r=e*lan(t),t>=1?r<i2e&&-t>s2e?n=S8(t,e)*rE(-t):e>=1?n=S8(t/rE(t/e),e):n=rE(r-t):r>s2e?n=S8(t,e)*rE(-t):t/e<i2e?n=S8(t/rE(t/e),e):n=rE(r-t),n}var fan=can;/**
* @license Apache-2.0
*
* Copyright (c) 2024 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dan(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var han=dan;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var pan=tB,o2e=Pl,man=eu,gan=han,yan=143.01608;function van(e){var t,n,r;return t=1/e,t=1+t*gan(t),n=man(e),e>yan?(r=o2e(e,.5*e-.25),n=r*(r/n)):n=o2e(e,e-.5)/n,pan*n*t}var ban=van;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var _an=soe;function wan(e,t){return t/((1+_an*e)*e)}var xan=wan;/**
* @license Apache-2.0
*
* Copyright (c) 2024 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ean(e){var t,n,r;return e===0?1:(e<0?t=-e:t=e,t<=1?(n=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),r=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,n=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),r=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),n/r)}var Tan=Ean;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var San=ts,Aan=nm,Can=JF,a2e=ns,Ian=lp,kan=eB,u2e=ks,l2e=Za,c2e=Jx,f2e=ban,d2e=xan,Ran=Tan;function Nan(e){var t,n,r,i;if(Aan(e)&&e<0||e===l2e||San(e))return NaN;if(e===0)return Can(e)?l2e:u2e;if(e>171.61447887182297)return u2e;if(e<-170.5674972726612)return 0;if(n=a2e(e),n>33)return e>=0?f2e(e):(r=Ian(n),r&1?t=1:t=-1,i=n-r,i>.5&&(r+=1,i=n-r),i=n*kan(c2e*i),t*c2e/(a2e(i)*f2e(n)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return d2e(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return d2e(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*Ran(e))}var Pan=Nan;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dan=Pan,Oan=Dan;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var $an=rB,Lan=ooe,Man=Oan,Fan=x1,Ban=cp,jan=ns,ty=eu,V3=Pl,nW=ioe,rW=r5,h2e=Md,A8=Zx,H3=lC,iW=s5,Uan=uC;function zan(e,t){var n,r,i,s,o,a,u;return i=e+iW-.5,u=(t-e-iW+.5)/i,e<1?t<=H3?ty(e*h2e(t)-t-Lan(e)):V3(t,e)*ty(-t)/Man(e):(jan(u*u*e)<=100&&e>150?(n=e*(Fan(u)-u)+t*(.5-iW)/i,n=ty(n)):(s=e*h2e(t/i),o=e-t,rW(s,o)<=H3||nW(s,o)>=A8?(r=o/e,rW(s,o)/2>H3&&nW(s,o)/2<A8?(a=V3(t/i,e/2)*ty(o/2),n=a*a):rW(s,o)/4>H3&&nW(s,o)/4<A8&&t>e?(a=V3(t/i,e/4)*ty(o/4),n=a*a,n*=n):r>H3&&r<A8?n=V3(t*ty(r)/i,e):n=ty(s+o)):n=V3(t/i,e)*ty(o)),n*=Ban(i/Uan)/$an(e),n)}var Van=zan;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Han=Men,p2e=Xen,qan=uan,Wan=x1,C8=ns,m2e=Pl,Gan=Md,Yan=n5,g2e=S1,Kan=fan,Xan=Van,ny=new Array(30);function Qan(e,t,n,r,i,s,o){var a,u,l,c,f,d,h,p,m,g,y,v,b,w,x,S,A,C;if(d=t-1,A=e+d/2,r<.35?g=Wan(-r):g=Gan(n),C=-A*g,v=Xan(t,C),v<=Yan)return i;for(o?(a=v/Han(e,t),a/=m2e(A,t)):a=Kan(t,C)/m2e(A,t),a*=s,ny[0]=1,b=qan(C,t,!0,!0),b/=v,c=i+a*b,l=1,h=g/2,h*=h,p=1,y=4*A*A,f=t,x=1;x<ny.length;++x){for(l+=2,ny[x]=0,m=t-x,u=3,w=1;w<x;++w)m=w*t-x,ny[x]+=m*ny[x-w]/p2e(u),u+=2;if(ny[x]/=x,ny[x]+=d/p2e(l),b=(f*(f+1)*b+(C+f+1)*p)/y,p*=h,f+=2,S=a*ny[x]*b,c+=S,S>1){if(C8(S)<C8(g2e*c))break}else if(C8(S/g2e)<C8(c))break}return c}var Jan=Qan;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function Zan(e,t,n){var r,i;if(n===0)return 1;for(r=1,i=0;i<n;i++)r*=(e+i)/(t+i);return r}var eun=Zan;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tun=ZMe,y2e=ts,sW=ks;function nun(e,t){return y2e(e)||y2e(t)?NaN:e===sW||t===sW?sW:e===t&&e===0?tun(e)?e:t:e>t?e:t}var run=nun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iun=run,sun=iun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v2e=ns,oun=sun;function aun(e,t){return oun(v2e(e),v2e(t))}var uun=aun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lun=uun,cun=lun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var b2e=ns,fun=r5;function dun(e,t){return fun(b2e(e),b2e(t))}var hun=dun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pun=hun,mun=pun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var oW=rB,gun=cun,yun=mun,_2e=GF,ry=x1,w2e=cp,I8=ns,Ap=eu,Cp=Pl,vun=r5,Gf=Md,Ip=Zx,iE=lC,aW=s5,bun=uC;function _un(e,t,n,r,i){var s,o,a,u,l,c,f,d,h,p,m,g,y,v;if(!i)return Cp(n,e)*Cp(r,t);if(y=e+t,u=e+aW-.5,l=t+aW-.5,c=y+aW-.5,s=oW(y),s/=oW(e)*oW(t),s*=w2e(l/bun),s*=w2e(u/c),f=(n*t-r*u)/u,d=(r*e-n*l)/l,yun(f,d)<.2)if(f*d>0||vun(e,t)<1)I8(f)<.1?s*=Ap(e*ry(f)):s*=Cp(n*c/u,e),I8(d)<.1?s*=Ap(t*ry(d)):s*=Cp(r*c/l,t);else if(gun(f,d)<.5)o=e<t,a=t/e,o&&a*d<.1||!o&&f/a>.1?(h=_2e(a*ry(d)),h=f+h+h*f,h=e*ry(h),s*=Ap(h)):(h=_2e(ry(f)/a),h=d+h+h*d,h=t*ry(h),s*=Ap(h));else if(I8(f)<I8(d))if(v=e*ry(f)+t*Gf(r*c/l),v<=iE||v>=Ip){if(v+=Gf(s),v>=Ip)return NaN;s=Ap(v)}else s*=Ap(v);else if(v=t*ry(d)+e*Gf(n*c/u),v<=iE||v>=Ip){if(v+=Gf(s),v>=Ip)return NaN;s=Ap(v)}else s*=Ap(v);else if(m=n*c/u,g=r*c/l,f=e*Gf(m),d=t*Gf(g),f>=Ip||f<=iE||d>=Ip||d<=iE)if(e<t)if(p=Cp(g,t/e),h=e*(Gf(m)+Gf(p)),h<Ip&&h>iE)s*=Cp(p*m,e);else{if(d+=f+Gf(s),d>=Ip)return NaN;s=Ap(d)}else if(p=Cp(m,e/t),h=(Gf(p)+Gf(g))*t,h<Ip&&h>iE)s*=Cp(p*g,t);else{if(d+=f+Gf(s),d>=Ip)return NaN;s=Ap(d)}else s*=Cp(m,e)*Cp(g,t);return s}var aoe=_un;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var wun=yFe,xun=aoe,Eun={keep:!0,maxIter:1e3};function Tun(e,t,n,r){var i=0;return s;function s(){var o,a,u;return a=(e+i-1)*(e+t+i-1)*i*(t-i)*n*n,o=e+2*i-1,a/=o*o,u=i,u+=i*(t-i)*n/(e+2*i-1),u+=(e+i)*(e*r-t*n+1+i*(2-n))/(e+2*i+1),i+=1,[a,u]}}function Sun(e,t,n,r,i,s){var o,a,u;return o=xun(e,t,n,r,i),s&&(s[1]=o),o===0?o:(u=Tun(e,t,n,r),a=wun(u,Eun),o/a)}var Aun=Sun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cun=9007199254740991,Iun=Cun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kun=2147483647,Run=kun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nun(e,t){var n=0,r;if(e===0)return t;if(t===0)return e;for(;!(e&1)&&!(t&1);)e>>>=1,t>>>=1,n+=1;for(;!(e&1);)e>>>=1;for(;t;){for(;!(t&1);)t>>>=1;e>t&&(r=t,t=e,e=r),t-=e}return e<<n}var Pun=Nun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dun(e,t){var n=1,r;if(e===0)return t;if(t===0)return e;for(;e%2===0&&t%2===0;)e/=2,t/=2,n*=2;for(;e%2===0;)e/=2;for(;t;){for(;t%2===0;)t/=2;e>t&&(r=t,t=e,e=r),t-=e}return n*e}var Oun=Dun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x2e=ts,E2e=nm,T2e=ks,S2e=Za,A2e=Run,$un=Pun,Lun=Oun;function Mun(e,t){return x2e(e)||x2e(t)?NaN:e===T2e||t===T2e||e===S2e||t===S2e?NaN:E2e(e)&&E2e(t)?(e<0&&(e=-e),t<0&&(t=-t),e<=A2e&&t<=A2e?$un(e,t):Lun(e,t)):NaN}var Fun=Mun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bun=Fun,jun=Bun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uun=Iun,zun=ks,C2e=nm,I2e=ts,Vun=noe,Hun=lp,qun=jun;function kQ(e,t){var n,r,i,s,o,a,u;if(I2e(e)||I2e(t))return NaN;if(!C2e(e)||!C2e(t))return NaN;if(t<0||(r=1,e<0&&(e=-e+t-1,Vun(t)&&(r*=-1)),t>e))return 0;if(t===0||t===e)return r;if(t===1||t===e-1)return r*e;for(e-t<t&&(t=e-t),u=Hun(Uun/e),n=1,o=1;o<=t&&!(n>u);o++)n*=e,n/=o,e-=1;return o>t?r*n:(i=kQ(e,t-o+1),i===zun?r*i:(s=kQ(t,t-o+1),a=qun(i,s),i/=a,s/=a,n/=s,r*n*i))}var Wun=kQ;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gun=Wun,Yun=Gun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var k2e=Yun,f_=lp,q3=Pl,Kun=n5;function Xun(e,t,n,r){var i,s,o,a,u;if(s=q3(n,e),s>Kun)for(a=s,u=f_(e-1);u>t;u--)a*=(u+1)*r/((e-u)*n),s+=a;else if(o=f_(e*n),o<=t+1&&(o=f_(t+2)),s=q3(n,o)*q3(r,e-o),s*=k2e(f_(e),f_(o)),s===0)for(u=o-1;u>t;u--)s+=q3(n,u)*q3(r,e-u),s*=k2e(f_(e),f_(u));else{for(a=s,i=s,u=o-1;u>t;u--)a*=(u+1)*r/((e-u)*n),s+=a;for(a=i,u=o+1;u<=e;u++)a*=(e-u+1)*n/(u*r),s+=a}return s}var Qun=Xun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Jun=aoe;function Zun(e,t,n,r,i,s,o){var a,u,l,c;if(a=Jun(e,t,n,r,s),o&&(o[1]=a),a/=e,a===0)return a;for(l=1,u=1,c=0;c<i-1;++c)u*=(e+t+c)*n/(e+c+1),l+=u;return a*=l,a}var eln=Zun;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var uW=rB,tln=nB,nln=x1,rln=cp,lW=eu,k8=Pl,W3=Md,iln=n5,R2e=Zx,N2e=lC,cW=s5,sln=uC,P2e={maxTerms:100};function oln(e,t,n,r){var i=1-t,s=1;return o;function o(){var a=r/e;return e+=1,r*=i*n/s,s+=1,i+=1,a}}function aln(e,t,n,r,i,s,o){var a,u,l,c,f,d,h,p;return i?(h=e+t,u=e+cW-.5,l=t+cW-.5,c=h+cW-.5,a=uW(h)/(uW(e)*uW(t)),f=W3(c/l)*(t-.5),d=W3(n*c/u)*e,f>N2e&&f<R2e&&d>N2e&&d<R2e?(e*t<l*10?a*=lW((t-.5)*nln(e/l)):a*=k8(c/l,t-.5),a*=k8(n*c/u,e),a*=rln(u/sln),s&&(s[1]=a*k8(o,t))):(a=W3(a)+f+d+(W3(u)-1)/2,s&&(s[1]=lW(a+t*W3(o))),a=lW(a))):a=k8(n,e),a<iln?r:(p=oln(e,t,n,a),P2e.initialValue=r,tln(p,P2e))}var uln=aln,lln=ts,cln=GF,R8=lp,D2e=x1,O2e=bWt,Yf=JMe,fW=cp,fln=eu,G3=Pl,dln=ioe,$2e=r5,N8=eFe,L2e=n5,hln=$Xt,pln=MXt,bFe=Jx,iy=Jan,dW=eun,mln=aoe,M2e=Aun,gln=Qun,Y3=eln,kp=uln,yln=1/bFe;function vln(e,t,n,r,i,s,o,a){var u,l,c,f,d,h,p,m,g,y,v,b;if(b=1-e,p=a,m=a+o,s[m]=-1,lln(e)||e<0||e>1)return s[p]=NaN,s[m]=NaN,s;if(r){if(t<0||n<0)return s[p]=NaN,s[m]=NaN,s;if(t===0){if(n===0)return s[p]=NaN,s[m]=NaN,s;if(n>0)return s[p]=i?0:1,s}else if(n===0&&t>0)return s[p]=i?1:0,s}else if(t<=0||n<=0)return s[p]=NaN,s[m]=NaN,s;return e===0?(t===1?s[m]=1:s[m]=t<1?N8/2:L2e*2,i?(s[p]=r?1:Yf(t,n),s):(s[p]=0,s)):e===1?(n===1?s[m]=1:s[m]=n<1?N8/2:L2e*2,i?s[p]=0:s[p]=r?1:Yf(t,n),s):t===.5&&n===.5?(s[m]=yln*fW(b*e),v=O2e(fW(i?b:e)),v/=pln,r||(v*=bFe),s[p]=v,s):(t===1&&(h=n,n=t,t=h,h=b,b=e,e=h,i=!i),n===1?t===1?(s[p]=i?b:e,s[m]=1,s):(s[m]=t*G3(e,t-1),b<.5?v=i?-cln(t*D2e(-b)):fln(t*D2e(-b)):v=i?-(G3(e,t)-1):G3(e,t),r||(v/=t),s[p]=v,s):($2e(t,n)<=1?(e>.5&&(h=n,n=t,t=h,h=b,b=e,e=h,i=!i),dln(t,n)<=1?t>=$2e(.2,n)||G3(e,t)<=.9?i?(c=-(r?1:Yf(t,n)),i=!1,c=-kp(t,n,e,c,r,s,b)):c=kp(t,n,e,0,r,s,b):(h=n,n=t,t=h,h=b,b=e,e=h,i=!i,b>=.3?i?(c=-(r?1:Yf(t,n)),i=!1,c=-kp(t,n,e,c,r,s,b)):c=kp(t,n,e,0,r,s,b):(r?l=1:l=dW(t+n,t,20),c=Y3(t,n,e,b,20,r,s),i?(c-=r?1:Yf(t,n),i=!1,c=-iy(t+20,n,e,b,c,l,r)):c=iy(t+20,n,e,b,c,l,r))):n<=1||e<.1&&G3(n*e,t)<=.7?i?(c=-(r?1:Yf(t,n)),i=!1,c=-kp(t,n,e,c,r,s,b)):c=kp(t,n,e,0,r,s,b):(h=n,n=t,t=h,h=b,b=e,e=h,i=!i,b>=.3?i?(c=-(r?1:Yf(t,n)),i=!1,c=-kp(t,n,e,c,r,s,b)):c=kp(t,n,e,0,r,s,b):t>=15?i?(c=-(r?1:Yf(t,n)),i=!1,c=-iy(t,n,e,b,c,1,r)):c=iy(t,n,e,b,0,1,r):(r?l=1:l=dW(t+n,t,20),c=Y3(t,n,e,b,20,r,s),i?(c-=r?1:Yf(t,n),i=!1,c=-iy(t+20,n,e,b,c,l,r)):c=iy(t+20,n,e,b,c,l,r)))):(t<n?u=t-(t+n)*e:u=(t+n)*b-n,u<0&&(h=n,n=t,t=h,h=b,b=e,e=h,i=!i),n<40?R8(t)===t&&R8(n)===n&&t<hln-100?(g=t-1,y=n+g,c=gln(y,g,e,b),r||(c*=Yf(t,n))):n*e<=.7?i?(c=-(r?1:Yf(t,n)),i=!1,c=-kp(t,n,e,c,r,s,b)):c=kp(t,n,e,0,r,s,b):t>15?(y=R8(n),y===n&&(y-=1),f=n-y,r?l=1:l=dW(t+f,f,y),c=Y3(f,t,b,e,y,r),c=iy(t,f,e,b,c,1,r),c/=l):r?(y=R8(n),f=n-y,f<=0&&(y-=1,f+=1),c=Y3(f,t,b,e,y,r),c+=Y3(t,f,e,b,20,r),i&&(c-=1),c=iy(t+20,f,e,b,c,1,r),i&&(c=-c,i=!1)):c=M2e(t,n,e,b,r,s):c=M2e(t,n,e,b,r,s)),s[m]<0&&(s[m]=mln(t,n,e,b,!0)),d=b*e,s[m]!==0&&(N8*d<s[m]?s[m]=N8/2:s[m]/=d),s[p]=i?(r?1:Yf(t,n))-c:c,s))}var _Fe=vln;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bln=_Fe;function _ln(e,t,n,r,i){return bln(e,t,n,r,i,[0,0],1,0)}var wln=_ln;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xln=HF,wFe=wln,Eln=_Fe;xln(wFe,"assign",Eln);var Tln=wFe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sln=Tln.assign;function Aln(e,t,n,r,i){var s=[0,0];return r=r!==!1,i=i===!0,Sln(e,t,n,r,i,s,1,0),s[0]}var Cln=Aln;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Iln=Cln,kln=Iln;const F2e=Rf(kln);function Rln(e){return e>=0?1:-1}function xFe(e,t){const{mu:n,sigma:r,lambda:i,p:s,q:o}=t,a=Uy(1/s,o),u=o**(-1/s)*((3*i**2+1)*(Uy(3/s,o-2/s)/a)-4*i**2*(Uy(2/s,o-1/s)/a)**2)**(-1/2),l=2*u*r*i*o**(1/s)*Uy(2/s,o-1/s)/a,c=2*u*r*o**(1/s)*a,f=(1+Math.abs(e-n+l)**s/(o*(u*r)**s*(1+i*Rln(e-n+l))**s))**(o+1/s);return s/(c*f)}function EFe(e,t){const{mu:n,sigma:r,lambda:i,p:s,q:o}=t,a=Uy(1/s,o),u=o**(-1/s)*Math.sqrt(1/((3*i**2+1)*(Uy(3/s,o-2/s)/a)-4*i**2*(Uy(2/s,o-1/s)/a)**2)),l=2*u*r*i*o**(1/s)*Uy(2/s,o-1/s)/a,c=e-n+l;let f;if(c>=0){const d=c**s/((u*r)**s*(1+i)**s*o);f=.5+.5*F2e(o,1/s,o/(o+d))}else{const d=(-c)**s/((u*r)**s*(1-i)**s*o);f=.5-.5*F2e(o,1/s,o/(o+d))}return f}function TFe(e,t=[-5,5],n=.01){const{mu:r,sigma:i,lambda:s,p:o,q:a}=e;if(s<-1||s>1)throw new Error("lambda should be bewteen -1 and 1");if(o<=0||a<=0)throw new Error("p and/or q should be positive values");if(i<=0)throw new Error("sigma should be positive");const u=[],l=Math.floor(t[0]/n)*n,c=Math.ceil(t[1]/n)*n;for(let h=l;h<=c;h+=n){const p=Number(h.toFixed(10));u.push(p)}const f=u.map(h=>{try{return xFe(h,e)}catch(p){return console.warn(`Error calculating PDF at x=${h}:`,p),0}}),d=u.map(h=>{try{return EFe(h,e)}catch(p){return console.warn(`Error calculating CDF at x=${h}:`,p),0}});return{xVals:u,pdfVals:f,cdfVals:d}}const Nln=Object.freeze(Object.defineProperty({__proto__:null,generateDistributionData:TFe,skewGeneralizedTCDF:EFe,skewGeneralizedTPDF:xFe},Symbol.toStringTag,{value:"Module"}));function SFe({value:e,onChange:t,onChangeEnd:n,distributionData:r,width:i="100%"}){var u;if(!((u=r==null?void 0:r.xVals)!=null&&u.length))return null;const[s,o]=R.useState(!1),a=l=>{o(!0),n(l)};return E.jsx("div",{style:{width:i},children:E.jsx(_b,{value:s?e:-5,onChange:t,onChangeEnd:a,min:r.xVals[0],max:r.xVals[r.xVals.length-1],step:.01,label:l=>l.toFixed(2),styles:{root:{width:"100%"},track:{width:"100%",backgroundColor:"#e9ecef"},bar:{backgroundColor:"#e9ecef"},thumb:{display:s?"block":"none"}},"data-source":"slider-check"})})}const Pln=Object.freeze(Object.defineProperty({__proto__:null,default:SFe},Symbol.toStringTag,{value:"Module"})),DT={margin:{top:15,right:15,bottom:40,left:50},height:450,width:600};function Dln(){return{mu:Number((Math.random()*4-2).toFixed(3)),sigma:Number((.5+Math.random()*1.5).toFixed(3)),lambda:Number((Math.random()*2-1).toFixed(3)),p:Number((2+Math.random()*8).toFixed(3)),q:Number((2+Math.random()*8).toFixed(3))}}function Oln({sliderValue:e,setSliderValue:t,distributionData:n,showPDF:r,training:i,taskType:s,currentParams:o,setAnswer:a}){const u=Kx(),l=R.useMemo(()=>{if(e===void 0||i===!1)return null;const h=Lh(p=>p).left(n.xVals,e);switch(s){case"pdf_median":return{x:e,y:null,tangentLine:null};case"pdf_mode":return{x:null,y:Math.max(...n.pdfVals),tangentLine:null};case"cdf_median":return{x:null,y:.5,tangentLine:null};case"cdf_mode":{const p={x:e,y:n.cdfVals[h]},m=n.pdfVals[h];return{x:null,y:null,tangentLine:{point:p,slope:m}}}default:return null}},[e,i,s,n]),c=R.useMemo(()=>{if(e===void 0||!n)return null;const h=Lh(m=>m).left(n.xVals,e),p=r?n.pdfVals:n.cdfVals;return{x:n.xVals[h],y:p[h]}},[e,n,r]),f=R.useCallback(h=>{t(h)},[t]),d=R.useCallback(h=>{const p=Lh(b=>b).left(n.xVals,h),m=r?n.pdfVals:n.cdfVals,g={x:n.xVals[p],y:m[p]},y=u.xScale(g.x),v=u.yScale(g.y);a({status:!0,answers:{"location-x":g.x,"location-y":g.y,"pixel-x":y,"pixel-y":v,"param-mu":o.mu,"param-sigma":o.sigma,"param-lambda":o.lambda,"param-p":o.p,"param-q":o.q}})},[n,r,a,o,u]);return E.jsxs(E.Fragment,{children:[E.jsx(SFe,{value:e??0,onChange:f,onChangeEnd:d,distributionData:n,width:DT.width-DT.margin.left-DT.margin.right}),E.jsx(ba,{h:"lg"}),E.jsx(PMe,{distributionData:n,showPDF:r,isTraining:i,selectedPoint:c,guidelines:l,axisLabels:{x:"Value",y:r?"Density":"Cumulative Probability"}})]})}function $ln({parameters:e,setAnswer:t}){const{params:n,showPDF:r,training:i,taskType:s}=e,[o,a]=R.useState(),[u,l]=R.useState(()=>n||Dln()),c=R.useMemo(()=>TFe(u),[u]);return R.useEffect(()=>{(!n||Object.keys(n).length===0)&&t({status:!0,answers:{"location-x":null,"location-y":null,"pixel-x":null,"pixel-y":null,"param-mu":u.mu,"param-sigma":u.sigma,"param-lambda":u.lambda,"param-p":u.p,"param-q":u.q}})},[n,t,u]),c?E.jsx(yl,{p:"md",children:E.jsxs("div",{className:"mt-4",children:[E.jsx(Zse,{width:DT.width,height:DT.height,margin:DT.margin,xDomain:[-5,5],yDomain:[0,1],children:E.jsx(Oln,{sliderValue:o,setSliderValue:a,distributionData:c,showPDF:r||!1,training:i||!1,taskType:s||"pdf_median",currentParams:u,setAnswer:t})}),E.jsx(ba,{h:"xl"}),E.jsxs(Ue,{size:"md",c:"dimmed",children:["Debug - Random Parameters: mu=",u.mu.toFixed(2),", sigma=",u.sigma.toFixed(2),", lambda=",u.lambda,", p=",u.p.toFixed(2),", q=",u.q.toFixed(2)]})]})}):null}const Lln=Object.freeze(Object.defineProperty({__proto__:null,default:$ln},Symbol.toStringTag,{value:"Module"}));var AFe=(e=>(e.PDF_MEDIAN="pdf_median",e.PDF_MODE="pdf_mode",e.CDF_MEDIAN="cdf_median",e.CDF_MODE="cdf_mode",e))(AFe||{});const Mln=Object.freeze(Object.defineProperty({__proto__:null,TaskType:AFe},Symbol.toStringTag,{value:"Module"})),Fln=e=>e*Math.PI/180;function Bln({parameters:e,setAnswer:t}){var w;const n=R.useRef(null),r=R.useRef(null),i=R.useRef(null),{blindspotAngle:s}=e,o=Vr(x=>x.answers),a=Number((w=o.calibration_3.answer)==null?void 0:w.pixelsPerMM),[u,l]=R.useState([]),[c,f]=R.useState(!1),[d,h]=R.useState(null),[p,m]=R.useState(5),g=R.useCallback(x=>{if(!x.length||!a||!r.current)return;const S=x.reduce((D,L)=>D+L,0)/x.length,C=r.current.getBoundingClientRect().left,k=Math.abs(S-C)/a/Math.tan(Fln(s));h(k),f(!1)},[s,a]),y=R.useCallback(()=>{n.current&&(n.current.style.left="740px")},[]),v=R.useCallback(()=>{if(!n.current||!r.current||!a||u.length>=5)return;f(!0);let x=!1,S=0;const A=1e3,C=N=>{if(!n.current)return;if(x){N-S>=A&&(x=!1,n.current.style.left="740px"),i.current=requestAnimationFrame(C);return}const D=parseInt(n.current.style.left||"740",10)-2;D<=0?(x=!0,S=N):n.current.style.left=`${D}px`,i.current=requestAnimationFrame(C)};i.current=requestAnimationFrame(C)},[u,a]),b=()=>{i.current&&cancelAnimationFrame(i.current),f(!1)};return R.useEffect(()=>{d!==null&&u.length===5&&t({status:!0,answers:{"dist-calibration-MM":d,"dist-calibration-CM":d/10,"ball-positions":JSON.stringify(u)}})},[d,u,t]),R.useEffect(()=>{const x=S=>{if(S.code==="Space"){if(S.preventDefault(),!c)v();else if(n.current){b();const C=n.current.getBoundingClientRect().left;l(N=>{const k=[...N,C];return k.length>=5&&g(k),k}),m(N=>N-1),y()}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[c,g,v,y]),R.useEffect(()=>(h(null),f(!1),l([]),m(5),y(),()=>{h(null),f(!1),l([]),m(5)}),[y]),R.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]),a?E.jsx(yl,{size:"md",children:E.jsxs($i,{gap:"md",children:[E.jsx(Ue,{children:"Now we will quickly measure how far away you are sitting. "}),E.jsxs($i,{gap:"xs",children:[E.jsxs(ao,{children:[E.jsxs(ao.Item,{children:["Put your left hand on the ",E.jsx("b",{children:"space bar"}),"."]}),E.jsx(ao.Item,{children:"Cover your right eye with your right hand."}),E.jsx(ao.Item,{children:"Using your left eye, focus on the black square. Keep your focus on the black square."}),E.jsxs(ao.Item,{children:["The ",E.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"red ball"})," will disappear as it moves from right to left. Press the space bar as soon as the ball disappears."]})]}),E.jsx(Ue,{ta:"center",children:u.length>=5?"All measurements completed!":"Press the space bar when you are ready to begin."})]}),E.jsxs("div",{style:{position:"relative",width:"900px",height:"100px",backgroundColor:"#ffffff"},children:[E.jsx("div",{ref:n,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(255, 0, 0)",borderRadius:"30px",left:"740px"}}),E.jsx("div",{ref:r,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(0, 0, 0)",left:"870px"}})]}),E.jsxs(Ue,{ta:"center",children:["Remaining measurements: ",5-u.length]}),d&&E.jsxs($i,{gap:"xs",children:[E.jsx(Ue,{fw:700,size:"lg",children:"Viewing Distance Results"}),E.jsxs(Ue,{children:["Estimated Viewing Distance: ",(d/10).toFixed(1)," cm"]}),E.jsxs(Ue,{children:["Number of measurements: ",u.length]})]})]})}):E.jsx("div",{children:"Please complete card calibration first."})}const jln=Object.freeze(Object.defineProperty({__proto__:null,default:Bln},Symbol.toStringTag,{value:"Module"})),Uln="/vis-decode/assets/costco_card-B3j7PHjO.png";function zln({parameters:e,setAnswer:t,itemWidthMM:n=85,itemHeightMM:r=54}){const[i,s]=R.useState(300),[o,a]=R.useState(null),[u,l]=R.useState(!1),[c,f]=R.useState({min:100,max:500}),{taskid:d}=e,h=R.useRef(null),p=r/n;R.useEffect(()=>{const b=()=>{const w=window.innerWidth;f({min:Math.round(w*.1),max:Math.round(w*.8)})};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const m=b=>Math.round(b*p),g=b=>b/n,y=b=>{s(b)},v=()=>{if(!h.current)return;const b=g(i);a(b),t({status:!0,answers:{[d]:b}}),l(!0)};return E.jsx(yl,{size:"md",children:E.jsxs($i,{gap:"lg",children:[E.jsx(Ue,{size:"md",children:" Drag the slider until the image is the same size as a credit card held up to the screen."}),E.jsx(Ue,{size:"md",children:" You can use any card this is the same size as a credit card, like a membership card or driver's license."}),E.jsx(Ue,{size:"md",children:" If you do not have access to a real card, you can use a ruler to measure the image width to 3.37 inches or 85.6mm. "}),E.jsx(Ue,{size:"md",children:" Once you are finished, click 'Confirm Size' and then 'Next'. "}),E.jsx(on,{onClick:v,size:"lg",variant:"transparent",children:"Confirm Size"}),E.jsx(_b,{min:c.min,max:c.max,value:i,label:null,onChange:y,styles:{root:{width:"100%"},track:{cursor:"pointer"},thumb:{cursor:"grab"},bar:{cursor:"pointer"}}}),E.jsx("div",{ref:h,style:{width:`${i}px`,height:`${m(i)}px`,margin:"20px auto",overflow:"hidden"},children:E.jsx("img",{src:Uln,alt:"Credit Card",style:{width:"100%",height:"100%",objectFit:"contain"}})}),u&&E.jsxs("div",{style:{textAlign:"center",color:"green"},children:["Calibration Complete - Pixels per MM: ",o==null?void 0:o.toFixed(2)]})]})})}const Vln=Object.freeze(Object.defineProperty({__proto__:null,default:zln},Symbol.toStringTag,{value:"Module"}));function Hln({position:e,isNearCurve:t}){return e?E.jsx("circle",{cx:e.x,cy:e.y,r:t?5:20,fill:t?"#2563eb":"#666",stroke:t?"#2563eb":"#666",strokeWidth:1,opacity:.8,pointerEvents:"none","data-source":"Cursor"}):null}const qln=Object.freeze(Object.defineProperty({__proto__:null,default:Hln},Symbol.toStringTag,{value:"Module"}));class Wln extends ni.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?E.jsx(Ue,{children:this.state.error.toString()}):this.props.children}}const B2e=Object.assign({"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":nDt,"../public/example-brush-interactions/assets/Bar.tsx":sDt,"../public/example-brush-interactions/assets/BrushPlot.tsx":kBt,"../public/example-brush-interactions/assets/Paintbrush.tsx":CBt,"../public/example-brush-interactions/assets/Scatter.tsx":IBt,"../public/example-brush-interactions/assets/XAxisBar.tsx":rDt,"../public/example-brush-interactions/assets/YAxis.tsx":ABt,"../public/example-brush-interactions/assets/YAxisBar.tsx":iDt,"../public/example-brush-interactions/assets/types.ts":RBt,"../public/example-cleveland/assets/BarChart.tsx":LBt,"../public/example-cleveland/assets/BubbleChart.tsx":VBt,"../public/example-cleveland/assets/PieChart.tsx":KBt,"../public/example-cleveland/assets/StackedBarChart.tsx":ejt,"../public/example-cleveland/assets/chartcomponents/Bars.tsx":NBt,"../public/example-cleveland/assets/chartcomponents/Bubbles.tsx":MBt,"../public/example-cleveland/assets/chartcomponents/DotMarks.tsx":FBt,"../public/example-cleveland/assets/chartcomponents/NumericAxisH.tsx":XBt,"../public/example-cleveland/assets/chartcomponents/NumericAxisV.tsx":PBt,"../public/example-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":DBt,"../public/example-cleveland/assets/chartcomponents/Slices.tsx":HBt,"../public/example-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":qBt,"../public/example-cleveland/assets/chartcomponents/StackedBars.tsx":QBt,"../public/example-cleveland/assets/hooks/useChartDimensions.tsx":Z8t,"../public/example-fairness-jnd/assets/FairnessJND.tsx":njt,"../public/libraries/mic-check/assets/AudioTest.tsx":gjt,"../public/libraries/test/assets/test.tsx":vjt,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":_jt,"../public/tutorial/react-and-randomization/assets/Bar.tsx":Ejt,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":Cjt,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":Sjt,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":Ajt,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":wjt,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":Tjt,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":xjt,"../public/tutorial/react-and-randomization/assets/some.tsx":Ijt,"../public/tutorial/react-and-randomization/assets/types.ts":kjt,"../public/vis-decode-click/assets/Plot.tsx":Ljt,"../public/vis-decode-click/assets/Stimuli.tsx":Hjt,"../public/vis-decode-click/assets/TaskTypes.ts":qjt,"../public/vis-decode-click/assets/ViewingDistanceCalibration.tsx":Yjt,"../public/vis-decode-click/assets/VirtualChinrestCalibration.tsx":Qjt,"../public/vis-decode-click/assets/chartComponents/ClickMarker.tsx":Djt,"../public/vis-decode-click/assets/chartComponents/Cursor.tsx":Pjt,"../public/vis-decode-click/assets/chartComponents/Guidelines.tsx":$jt,"../public/vis-decode-click/assets/chartComponents/Line.tsx":Njt,"../public/vis-decode-click/assets/chartComponents/NearestPointMarker.tsx":Ojt,"../public/vis-decode-click/assets/chartComponents/ScalesContext.tsx":Rjt,"../public/vis-decode-click/assets/dataGeneration/jstat.d.ts":Jjt,"../public/vis-decode-click/assets/dataGeneration/jstatDistributionCalculations.ts":Bjt,"../public/vis-decode-click/assets/hooks/useChartInteractions.tsx":jjt,"../public/vis-decode-slider/assets/Block5.tsx":iUt,"../public/vis-decode-slider/assets/Plot.tsx":uUt,"../public/vis-decode-slider/assets/Stimuli.tsx":Lln,"../public/vis-decode-slider/assets/TaskTypes.ts":Mln,"../public/vis-decode-slider/assets/ViewingDistanceCalibration.tsx":jln,"../public/vis-decode-slider/assets/VirtualChinrestCalibration.tsx":Vln,"../public/vis-decode-slider/assets/chartComponents/Block5Slider.tsx":tUt,"../public/vis-decode-slider/assets/chartComponents/ClickMarker.tsx":oUt,"../public/vis-decode-slider/assets/chartComponents/Cursor.tsx":qln,"../public/vis-decode-slider/assets/chartComponents/DistributionSlider.tsx":Pln,"../public/vis-decode-slider/assets/chartComponents/Guidelines.tsx":aUt,"../public/vis-decode-slider/assets/chartComponents/Line.tsx":sUt,"../public/vis-decode-slider/assets/chartComponents/ScalesContext.tsx":eUt,"../public/vis-decode-slider/assets/dataGeneration/DistributionCalculations.tsx":Nln});function Gln({currentConfig:e,provState:t}){const n=Dd(),r=Od(),i=`../public/${e.path}`,s=i in B2e?B2e[i].default:null,o=Dc(),{updateResponseBlockValidation:a,setIframeAnswers:u}=bl(),l=R.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return E.jsx(R.Suspense,{fallback:E.jsx("div",{children:"Loading..."}),children:s?E.jsx(Wln,{children:E.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):E.jsx(Iv,{path:e.path})})}function Yln({currentConfig:e}){const[t,n]=R.useState(""),[r,i]=R.useState(!0);return R.useEffect(()=>{async function s(){const o=await yre(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?E.jsx($u,{text:t}):E.jsx(Iv,{path:e.path})}function cC(e){return e.baseComponent!==void 0}function CFe(){const e=Dd(),{setAlertModal:t}=bl(),n=Dc();R.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var j2e=Object.prototype.hasOwnProperty;function U2e(e,t,n){for(n of e.keys())if(V4(n,t))return n}function V4(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&V4(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=U2e(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=U2e(t,i),!i)||!V4(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(j2e.call(e,n)&&++r&&!j2e.call(t,n)||!(n in t)||!V4(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Kln(e){var t=R.useRef(e),n=R.useRef(0);return V4(e,t.current)||(t.current=e,n.current+=1),R.useMemo(function(){return t.current},[n.current])}function Xln(e,t){return R.useEffect(e,Kln(t))}const gL=(e,t=null)=>{const[n,r]=R.useState("idle"),[i,s]=R.useState(null),[o,a]=R.useState(null),u=R.useRef(),l=R.useRef(!1);R.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=R.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return Xln(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function IFe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const Qln="_root_1spq0_1",Jln="_description_1spq0_9",Zln="_title_1spq0_10",ecn="_closeButton_1spq0_14",tcn={root:Qln,description:Jln,title:Zln,closeButton:ecn},w6=e=>{const{title:t,message:n,color:r}=e;$x.show({title:t,message:n,position:"top-center",classNames:tcn,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},z2e=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],kFe=["participantId","trialId","trialOrder","responseId"];function uoe(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function ncn(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(Wh(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=cC(u)&&u.baseComponent&&n.baseComponents?pre({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=IFe(s);return Object.entries(s.answer).map(([h,p])=>{var y,v;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(b=>b.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const b=(v=(y=l.correctAnswer)==null?void 0:y.find(w=>w.id===h))==null?void 0:v.answer;m.correctAnswer=typeof b=="object"?JSON.stringify(b):b}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function rcn(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...kFe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await ncn(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function icn({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=R.useState([...z2e].filter(p=>p!=="meta")),a=yo(),{value:u,status:l,error:c}=gL(rcn,[s,r,a.storageEngine,i]),f=R.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);uoe(p,n)},[n,u]),d=R.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),w6({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=R.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return E.jsxs(Ks,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[E.jsx(lne,{searchable:!0,nothingFoundMessage:"Property not found",data:[...z2e],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:E.jsx(E1t,{}),variant:"filled"}),E.jsx(ba,{h:"md"}),E.jsxs(ke,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?E.jsxs(ln,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[E.jsx(ln.Thead,{children:E.jsx(ln.Tr,{children:u.header.map(p=>E.jsx(ln.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:E.jsxs(qt,{direction:"row",justify:"space-between",align:"center",children:[p,!kFe.includes(p)&&E.jsx(Px,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:E.jsx(Mne,{size:16})})]})},p))})}),E.jsx(ln.Tbody,{children:u.rows.slice(0,5).map((p,m)=>E.jsx(ln.Tr,{children:u.header.map(g=>E.jsx(ln.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):l==="error"&&c?E.jsx(bg,{variant:"light",children:c.message}):null,E.jsx(vf,{visible:l==="pending"||l==="idle"})]}),E.jsx(ba,{h:"sm"}),E.jsx(qt,{justify:"center",fz:"sm",c:"dimmed",children:E.jsx(Ue,{children:h})}),E.jsx(ba,{h:"md"}),E.jsxs(bi,{justify:"right",children:[E.jsx(on,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),E.jsx(on,{leftSection:E.jsx(_5e,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&E.jsx(on,{onClick:d,children:E.jsx(h1t,{})})]})]})}function scn(){const e=zg(),{storageEngine:t}=yo(),n=Vr(b=>b.answers),r=BA(),[i,s]=R.useState(!1);R.useEffect(()=>{if(r){s(!0);return}const b=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(b))},1e3)},[]),CFe();const[o,a]=R.useState(),[u,l]=R.useState(""),c=e.studyMetadata.title.replace(" ","_");R.useEffect(()=>{async function b(){if(t){const w=await t.getCurrentParticipantId(),x=await t.getParticipantData();l(w),a(x)}}b()},[t]);const f=R.useCallback(async()=>{uoe(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=R.useState(Math.floor(h/1e3));R.useEffect(()=>{if(i){const b=setInterval(()=>{m(w=>w-1)},1e3);return p<=0?(d&&f(),clearInterval(b),()=>clearInterval(b)):()=>clearInterval(b)}return()=>{}},[d,i,p,f]);const g=Ux(),[y,v]=R.useState(!1);return R.useEffect(()=>{(async()=>{if(t){const w=await t.getModes(g);v(w.dataCollectionEnabled)}})()},[t,g]),E.jsx(Ko,{style:{height:"100%"},children:E.jsx(qt,{direction:"column",children:i||!y?E.jsx(Ue,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?E.jsx($u,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):E.jsxs(E.Fragment,{children:[E.jsx(Ue,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),E.jsx(ba,{h:"lg"}),E.jsx(Ko,{children:E.jsx(Pc,{color:"blue"})})]})})})}function ocn(){return E.jsx(Ue,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function acn(){return E.jsx(Ue,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const V2e={};function RQ(e,t){e===void 0&&(e=V2e),t===void 0&&(t=V2e);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var ucn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lcn=Object.prototype.hasOwnProperty;function NQ(e,t){return lcn.call(e,t)}function PQ(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)NQ(e,i)&&r.push(i);return r}function of(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function DQ(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function F_(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function RFe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function OQ(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(OQ(e[t]))return!0}else if(typeof e=="object"){for(var r=PQ(e),i=r.length,s=0;s<i;s++)if(OQ(e[r[s]]))return!0}}return!1}function H2e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var NFe=function(e){ucn(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,H2e(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=H2e(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Us=NFe,ccn=of,eT={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=yL(n,this.path);r&&(r=of(r));var i=Cw(n,{op:"remove",path:this.from}).removed;return Cw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=yL(n,this.from);return Cw(n,{op:"add",path:this.path,value:of(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:x6(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},fcn={add:function(e,t,n){return DQ(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:eT.move,copy:eT.copy,test:eT.test,_get:eT._get};function yL(e,t){if(t=="")return e;var n={op:"_get",path:t};return Cw(e,n),n.value}function Cw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):vL(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=yL(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=x6(e,t.value),o.test===!1)throw new Us("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Us("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=of(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=vL;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=RFe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!DQ(h))throw new Us("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);DQ(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Us("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=fcn[t.op].call(t,l,h,e);if(o.test===!1)throw new Us("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=eT[t.op].call(t,l,h,e);if(o.test===!1)throw new Us("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Us("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function iB(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Us("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=of(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Cw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function dcn(e,t,n){var r=Cw(e,t);if(r.test===!1)throw new Us("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function vL(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Us("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(eT[e.op]){if(typeof e.path!="string")throw new Us("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Us('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Us("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Us("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&OQ(e.value))throw new Us("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Us("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Us("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=PFe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Us("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Us("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function PFe(e,t,n){try{if(!Array.isArray(e))throw new Us("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)iB(of(t),of(e),n||!0);else{n=n||vL;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Us)return i;throw i}}function x6(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!x6(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!x6(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const hcn=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Us,_areEquals:x6,applyOperation:Cw,applyPatch:iB,applyReducer:dcn,deepClone:ccn,getValueByPointer:yL,validate:PFe,validator:vL},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var loe=new WeakMap,pcn=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),mcn=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function gcn(e){return loe.get(e)}function ycn(e,t){return e.observers.get(t)}function vcn(e,t){e.observers.delete(t.callback)}function bcn(e,t){t.unobserve()}function _cn(e,t){var n=[],r,i=gcn(e);if(!i)i=new pcn(e),loe.set(e,i);else{var s=ycn(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=of(e),t){r.callback=t,r.next=null;var o=function(){$Q(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){$Q(r),clearTimeout(r.next),vcn(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new mcn(t,r)),r}function $Q(e,t){t===void 0&&(t=!1);var n=loe.get(e.object);coe(n.value,e.object,e.patches,"",t),e.patches.length&&iB(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function coe(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=PQ(t),o=PQ(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(NQ(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?coe(c,f,n,r+"/"+F_(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+F_(l),value:of(c)}),n.push({op:"replace",path:r+"/"+F_(l),value:of(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+F_(l),value:of(c)}),n.push({op:"remove",path:r+"/"+F_(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!NQ(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+F_(l),value:of(t[l])})}}}function wcn(e,t,n){n===void 0&&(n=!1);var r=[];return coe(e,t,r,"",n),r}const xcn=Object.freeze(Object.defineProperty({__proto__:null,compare:wcn,generate:$Q,observe:_cn,unobserve:bcn},Symbol.toStringTag,{value:"Module"}));Object.assign({},hcn,xcn,{JsonPatchError:NFe,deepClone:of,escapePathComponent:F_,unescapePathComponent:RFe});var Ecn=/("(?:[^\\"]|\\.)*")|[:,]/g,Tcn=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,x;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(Ecn,function(S,A){return A||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",x=o(a[h],y,p.length+(f===g-1?0:1)),x!==void 0&&d.push(p+x);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const hW=Rf(Tcn);function $c(e,t,n){return e.fields=t||[],e.fname=n,e}function Xs(e){return e==null?null:e.fname}function Ru(e){return e==null?null:e.fields}function DFe(e){return e.length===1?Scn(e[0]):Acn(e)}const Scn=e=>function(t){return t[e]},Acn=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Ke(e){throw Error(e)}function rm(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Ke("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Ke("Access path missing closing bracket: "+e),r&&Ke("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function xd(e,t,n){const r=rm(e);return e=r.length===1?r[0]:e,$c((n&&n.get||DFe)(r),[e],t||e)}const o5=xd("id"),Mu=$c(e=>e,[],"identity"),Ny=$c(()=>0,[],"zero"),fC=$c(()=>1,[],"one"),Ed=$c(()=>!0,[],"true"),dy=$c(()=>!1,[],"false");function Ccn(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const OFe=0,foe=1,doe=2,$Fe=3,LFe=4;function hoe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ccn,r=e||OFe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=foe&&n(t||"error","ERROR",arguments),this},warn(){return r>=doe&&n(t||"warn","WARN",arguments),this},info(){return r>=$Fe&&n(t||"log","INFO",arguments),this},debug(){return r>=LFe&&n(t||"log","DEBUG",arguments),this}}}var Qe=Array.isArray;function Ot(e){return e===Object(e)}const q2e=e=>e!=="__proto__";function dC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=Icn(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;hC(r,s,i[s],o)}return r},{})}function hC(e,t,n,r){if(!q2e(t))return;let i,s;if(Ot(n)&&!Qe(n)){s=Ot(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?hC(s,i,n[i]):q2e(i)&&(s[i]=n[i])}else e[t]=n}function Icn(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Mr(e){return e[e.length-1]}function Cu(e){return e==null||e===""?null:+e}const MFe=e=>t=>e*Math.exp(t),FFe=e=>t=>Math.log(e*t),BFe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),jFe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,bL=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function sB(e,t,n,r){const i=n(e[0]),s=n(Mr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function UFe(e,t){return sB(e,t,Cu,Mu)}function zFe(e,t){var n=Math.sign(e[0]);return sB(e,t,FFe(n),MFe(n))}function VFe(e,t,n){return sB(e,t,bL(n),bL(1/n))}function HFe(e,t,n){return sB(e,t,BFe(n),jFe(n))}function oB(e,t,n,r,i){const s=r(e[0]),o=r(Mr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function poe(e,t,n){return oB(e,t,n,Cu,Mu)}function moe(e,t,n){const r=Math.sign(e[0]);return oB(e,t,n,FFe(r),MFe(r))}function _L(e,t,n,r){return oB(e,t,n,bL(r),bL(1/r))}function goe(e,t,n,r){return oB(e,t,n,BFe(r),jFe(r))}function qFe(e){return 1+~~(new Date(e).getMonth()/3)}function WFe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Pt(e){return e!=null?Qe(e)?e:[e]:[]}function GFe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Yn(e){return typeof e=="function"}const kcn="descending";function yoe(e,t,n){n=n||{},t=Pt(t)||[];const r=[],i=[],s={},o=n.comparator||Rcn;return Pt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===kcn?-1:1),i.push(a=Yn(a)?a:xd(a,null,n)),(Ru(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:$c(o(i,r),Object.keys(s))}const aB=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Rcn=(e,t)=>e.length===1?Ncn(e[0],t[0]):Pcn(e,t,e.length),Ncn=(e,t)=>function(n,r){return aB(e(n),e(r))*t},Pcn=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=aB(s(r),s(i));return o*t[a]});function Fu(e){return Yn(e)?e:()=>e}function voe(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Gn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function B0(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function YFe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const Dcn=Object.prototype.hasOwnProperty;function sn(e,t){return Dcn.call(e,t)}const P8={};function pC(e){let t={},n;function r(s){return sn(t,s)&&t[s]!==P8}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===P8&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=P8),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==P8&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function KFe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Mr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function At(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Gn(r,n)}function tT(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function $b(e){return typeof e=="boolean"}function dv(e){return Object.prototype.toString.call(e)==="[object Date]"}function XFe(e){return e&&Yn(e[Symbol.iterator])}function Qr(e){return typeof e=="number"}function QFe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Dt(e){return typeof e=="string"}function boe(e,t,n){e&&(e=t?Pt(e).map(a=>a.replace(/\\(.)/g,"$1")):Pt(e));const r=e&&e.length,i=n&&n.get||DFe,s=a=>i(t?[a]:rm(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return $c(o,e,"key")}function JFe(e,t){const n=e[0],r=Mr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Ocn=1e4;function ZFe(e){e=+e||Ocn;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>sn(t,o)||sn(n,o),get:o=>sn(t,o)?t[o]:sn(n,o)?s(o,n[o]):void 0,set:(o,a)=>sn(t,o)?t[o]=a:s(o,a)}}function eBe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function GI(e,t){let n="";for(;--t>=0;)n+=e;return n}function tBe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?GI(i,o)+s:r==="center"?GI(i,~~(o/2))+s+GI(i,Math.ceil(o/2)):s+GI(i,o)}function a5(e){return e&&Mr(e)-e[0]||0}function Et(e){return Qe(e)?"["+e.map(Et)+"]":Ot(e)||Dt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function _oe(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const $cn=e=>Qr(e)||dv(e)?e:Date.parse(e);function woe(e,t){return t=t||$cn,e==null||e===""?null:t(e)}function xoe(e){return e==null||e===""?null:e+""}function Xh(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function nBe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function wy(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Lcn(e){return e}function Mcn(e){if(e==null)return Lcn;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Fcn(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Bcn(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return W2e(e,n)})}:W2e(e,t)}function W2e(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=rBe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function rBe(e,t){var n=Mcn(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Fcn(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function jcn(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function Ucn(e){return rBe(e,zcn.apply(this,arguments))}function zcn(e,t,n){var r,i,s;if(arguments.length>1)r=Vcn(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:jcn(e,r)}}function Vcn(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const qa="year",Cc="quarter",Nu="month",Ho="week",Ic="date",Au="day",j0="dayofyear",Sf="hours",Af="minutes",Td="seconds",Qh="milliseconds",Eoe=[qa,Cc,Nu,Ho,Ic,Au,j0,Sf,Af,Td,Qh],pW=Eoe.reduce((e,t,n)=>(e[t]=1+n,e),{});function Toe(e){const t=Pt(e).slice(),n={};return t.length||Ke("Missing time unit."),t.forEach(i=>{sn(pW,i)?n[i]=1:Ke(`Invalid time unit: ${i}.`)}),(n[Ho]||n[Au]?1:0)+(n[Cc]||n[Nu]||n[Ic]?1:0)+(n[j0]?1:0)>1&&Ke(`Incompatible time units: ${e}`),t.sort((i,s)=>pW[i]-pW[s]),t}const Hcn={[qa]:"%Y ",[Cc]:"Q%q ",[Nu]:"%b ",[Ic]:"%d ",[Ho]:"W%U ",[Au]:"%a ",[j0]:"%j ",[Sf]:"%H:00",[Af]:"00:%M",[Td]:":%S",[Qh]:".%L",[`${qa}-${Nu}`]:"%Y-%m ",[`${qa}-${Nu}-${Ic}`]:"%Y-%m-%d ",[`${Sf}-${Af}`]:"%H:%M"};function iBe(e,t){const n=Gn({},Hcn,t),r=Toe(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const q_=new Date;function Soe(e){return q_.setFullYear(e),q_.setMonth(0),q_.setDate(1),q_.setHours(0,0,0,0),q_}function sBe(e){return aBe(new Date(e))}function oBe(e){return LQ(new Date(e))}function aBe(e){return Tg.count(Soe(e.getFullYear())-1,e)}function LQ(e){return VA.count(Soe(e.getFullYear())-1,e)}function MQ(e){return Soe(e).getDay()}function qcn(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function uBe(e){return cBe(new Date(e))}function lBe(e){return FQ(new Date(e))}function cBe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lv.count(t-1,e)}function FQ(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return HA.count(t-1,e)}function BQ(e){return q_.setTime(Date.UTC(e,0,1)),q_.getUTCDay()}function Wcn(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function fBe(e,t,n,r,i){const s=t||1,o=Mr(e),a=(y,v,b)=>(b=b||y,Gcn(n[b],r[b],y===o&&s,v)),u=new Date,l=Xh(e),c=l[qa]?a(qa):Fu(2012),f=l[Nu]?a(Nu):l[Cc]?a(Cc):Ny,d=l[Ho]&&l[Au]?a(Au,1,Ho+Au):l[Ho]?a(Ho,1):l[Au]?a(Au,1):l[Ic]?a(Ic,1):l[j0]?a(j0,1):fC,h=l[Sf]?a(Sf):Ny,p=l[Af]?a(Af):Ny,m=l[Td]?a(Td):Ny,g=l[Qh]?a(Qh):Ny;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function Gcn(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function LS(e,t,n){return t+e*7-(n+6)%7}const Ycn={[qa]:e=>e.getFullYear(),[Cc]:e=>Math.floor(e.getMonth()/3),[Nu]:e=>e.getMonth(),[Ic]:e=>e.getDate(),[Sf]:e=>e.getHours(),[Af]:e=>e.getMinutes(),[Td]:e=>e.getSeconds(),[Qh]:e=>e.getMilliseconds(),[j0]:e=>aBe(e),[Ho]:e=>LQ(e),[Ho+Au]:(e,t)=>LS(LQ(e),e.getDay(),MQ(t)),[Au]:(e,t)=>LS(1,e.getDay(),MQ(t))},Kcn={[Cc]:e=>3*e,[Ho]:(e,t)=>LS(e,0,MQ(t))};function dBe(e,t){return fBe(e,t||1,Ycn,Kcn,qcn)}const Xcn={[qa]:e=>e.getUTCFullYear(),[Cc]:e=>Math.floor(e.getUTCMonth()/3),[Nu]:e=>e.getUTCMonth(),[Ic]:e=>e.getUTCDate(),[Sf]:e=>e.getUTCHours(),[Af]:e=>e.getUTCMinutes(),[Td]:e=>e.getUTCSeconds(),[Qh]:e=>e.getUTCMilliseconds(),[j0]:e=>cBe(e),[Ho]:e=>FQ(e),[Au]:(e,t)=>LS(1,e.getUTCDay(),BQ(t)),[Ho+Au]:(e,t)=>LS(FQ(e),e.getUTCDay(),BQ(t))},Qcn={[Cc]:e=>3*e,[Ho]:(e,t)=>LS(e,0,BQ(t))};function hBe(e,t){return fBe(e,t||1,Xcn,Qcn,Wcn)}const Jcn={[qa]:N0,[Cc]:n6.every(3),[Nu]:n6,[Ho]:VA,[Ic]:Tg,[Au]:Tg,[j0]:Tg,[Sf]:lF,[Af]:aF,[Td]:fg,[Qh]:bS},Zcn={[qa]:P0,[Cc]:r6.every(3),[Nu]:r6,[Ho]:HA,[Ic]:lv,[Au]:lv,[j0]:lv,[Sf]:cF,[Af]:uF,[Td]:fg,[Qh]:bS};function mC(e){return Jcn[e]}function gC(e){return Zcn[e]}function pBe(e,t,n){return e?e.offset(t,n):void 0}function mBe(e,t,n){return pBe(mC(e),t,n)}function gBe(e,t,n){return pBe(gC(e),t,n)}function yBe(e,t,n,r){return e?e.range(t,n,r):void 0}function vBe(e,t,n,r){return yBe(mC(e),t,n,r)}function bBe(e,t,n,r){return yBe(gC(e),t,n,r)}const YI=1e3,KI=YI*60,XI=KI*60,uB=XI*24,efn=uB*7,G2e=uB*30,jQ=uB*365,_Be=[qa,Nu,Ic,Sf,Af,Td,Qh],QI=_Be.slice(0,-1),JI=QI.slice(0,-1),ZI=JI.slice(0,-1),tfn=ZI.slice(0,-1),nfn=[qa,Ho],Y2e=[qa,Nu],wBe=[qa],K3=[[QI,1,YI],[QI,5,5*YI],[QI,15,15*YI],[QI,30,30*YI],[JI,1,KI],[JI,5,5*KI],[JI,15,15*KI],[JI,30,30*KI],[ZI,1,XI],[ZI,3,3*XI],[ZI,6,6*XI],[ZI,12,12*XI],[tfn,1,uB],[nfn,1,efn],[Y2e,1,G2e],[Y2e,3,3*G2e],[wBe,1,jQ]];function xBe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(a5(t))/n;let i=Lh(a=>a[2]).right(K3,r),s,o;return i===K3.length?(s=wBe,o=Rv(t[0]/jQ,t[1]/jQ,n)):i?(i=K3[r/K3[i-1][2]<K3[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=_Be,o=Math.max(Rv(t[0],t[1],n),1)),{units:s,step:o}}function e4(e){const t={};return n=>t[n]||(t[n]=e(n))}function rfn(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=ifn(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function ifn(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function EBe(e){const t=e4(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Ww(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return rfn(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Ww(o??",f");const a=Rv(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=W8e(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=G8e(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=q8e(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let UQ;TBe();function TBe(){return UQ=EBe({format:Cb,formatPrefix:Fre})}function SBe(e){return EBe(H8e(e))}function wL(e){return arguments.length?UQ=SBe(e):UQ}function K2e(e,t,n){n=n||{},Ot(n)||Ke(`Invalid time multi-format specifier: ${n}`);const r=t(Td),i=t(Af),s=t(Sf),o=t(Ic),a=t(Ho),u=t(Nu),l=t(Cc),c=t(qa),f=e(n[Qh]||".%L"),d=e(n[Td]||":%S"),h=e(n[Af]||"%I:%M"),p=e(n[Sf]||"%I %p"),m=e(n[Ic]||n[Au]||"%a %d"),g=e(n[Ho]||"%b %d"),y=e(n[Nu]||"%B"),v=e(n[Cc]||"%B"),b=e(n[qa]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function ABe(e){const t=e4(e.format),n=e4(e.utcFormat);return{timeFormat:r=>Dt(r)?t(r):K2e(t,mC,r),utcFormat:r=>Dt(r)?n(r):K2e(n,gC,r),timeParse:e4(e.parse),utcParse:e4(e.utcParse)}}let zQ;CBe();function CBe(){return zQ=ABe({format:Qre,parse:oOe,utcFormat:BR,utcParse:aOe})}function IBe(e){return ABe(tOe(e))}function E6(e){return arguments.length?zQ=IBe(e):zQ}const VQ=(e,t)=>Gn({},e,t);function kBe(e,t){const n=e?SBe(e):wL(),r=t?IBe(t):E6();return VQ(n,r)}function Aoe(e,t){const n=arguments.length;return n&&n!==2&&Ke("defaultLocale expects either zero or two arguments."),n?VQ(wL(e),E6(t)):VQ(wL(),E6())}function sfn(){return TBe(),CBe(),Aoe()}const ofn=/^(data:|([A-Za-z]+:)?\/\/)/,afn=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ufn=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,X2e="file://";function lfn(e,t){return n=>({options:n||{},sanitize:ffn,load:cfn,fileAccess:!1,file:dfn(t),http:pfn(e)})}async function cfn(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function ffn(e,t){t=Gn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=afn.test(e.replace(ufn,""));(e==null||typeof e!="string"||!a)&&Ke("Sanitize failure, invalid URI: "+Et(e));const u=ofn.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(X2e))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(X2e.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function dfn(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):hfn}async function hfn(){Ke("No file system access.")}function pfn(e){return e?async function(t,n){const r=Gn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Yn(s[i])?s[i]():s.text():Ke(s.status+""+s.statusText)}:mfn}async function mfn(){Ke("No HTTP fetch method available.")}const gfn=e=>e!=null&&e===e,yfn=e=>e==="true"||e==="false"||e===!0||e===!1,vfn=e=>!Number.isNaN(Date.parse(e)),RBe=e=>!Number.isNaN(+e)&&!(e instanceof Date),bfn=e=>RBe(e)&&Number.isInteger(+e),HQ={boolean:_oe,integer:Cu,number:Cu,date:woe,string:xoe,unknown:Mu},D8=[yfn,bfn,RBe,vfn],_fn=["boolean","integer","number","date"];function NBe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=D8.length,i=D8.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&gfn(u)&&!D8[a](u)&&(i[a]=0,++o,o===D8.length))return"string";return _fn[i.reduce((s,o)=>s===0?o:s,0)-1]}function PBe(e,t){return t.reduce((n,r)=>(n[r]=NBe(e,r),n),{})}function Q2e(e){const t=function(n,r){const i={delimiter:e};return Coe(n,r?Gn(r,i):i)};return t.responseType="text",t}function Coe(e,t){return t.header&&(e=t.header.map(Et).join(t.delimiter)+`
`+e),j8e(t.delimiter).parse(e+"")}Coe.responseType="text";function wfn(e){return typeof Buffer=="function"&&Yn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Ioe(e,t){const n=t&&t.property?xd(t.property):Mu;return Ot(e)&&!wfn(e)?xfn(n(e),t):n(JSON.parse(e))}Ioe.responseType="json";function xfn(e,t){return!Qe(e)&&XFe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Efn={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function DBe(e,t){let n,r,i,s;return e=Ioe(e,t),t&&t.feature?(n=Bcn,i=t.feature):t&&t.mesh?(n=Ucn,i=t.mesh,s=Efn[t.filter]):Ke("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Ke("Invalid TopoJSON object: "+i),r&&r.features||[r]}DBe.responseType="json";const fO={dsv:Coe,csv:Q2e(","),tsv:Q2e("	"),json:Ioe,topojson:DBe};function koe(e,t){return arguments.length>1?(fO[e]=t,this):sn(fO,e)?fO[e]:null}function OBe(e){const t=koe(e);return t&&t.responseType||"text"}function $Be(e,t,n,r){t=t||{};const i=koe(t.type||"json");return i||Ke("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Tfn(e,t.parse,n,r),sn(e,"columns")&&delete e.columns,e}function Tfn(e,t,n,r){if(!e.length)return;const i=E6();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=PBe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!HQ[p])throw Error("Illegal format pattern: "+h+":"+p);return HQ[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const lB=lfn(typeof fetch<"u"&&fetch,null);function cB(e){const t=e||Mu,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function dO(e,t){try{await t(e)}catch(n){e.error(n)}}const LBe=Symbol("vega_id");let Sfn=1;function fB(e){return!!(e&&nn(e))}function nn(e){return e[LBe]}function MBe(e,t){return e[LBe]=t,e}function pi(e){const t=e===Object(e)?e:{data:e};return nn(t)?t:MBe(t,Sfn++)}function Roe(e){return dB(e,pi({}))}function dB(e,t){for(const n in e)t[n]=e[n];return t}function FBe(e,t){return MBe(t,nn(e))}function e2(e,t){return e?t?(n,r)=>e(n,r)||nn(t(n))-nn(t(r)):(n,r)=>e(n,r)||nn(n)-nn(r):null}function BBe(e){return e&&e.constructor===t2}function t2(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:t2,insert(a){const u=Pt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Yn(a)?r:t,l=Pt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Fu(l)};return Yn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Yn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[nn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[nn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[nn(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=nn(m),l[g]?l[g]=1:a.add.push(pi(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[nn(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[nn(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[nn(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[nn(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[nn(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const hO="_:mod:_";function hB(){Object.defineProperty(this,hO,{writable:!0,value:{}})}hB.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[hO];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Qe(n)?1+n.length:-1),i},modified(e,t){const n=this[hO];if(arguments.length){if(Qe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[hO]={},this}};let Afn=0;const Cfn="pulse",Ifn=new hB,kfn=1,Rfn=2;function Wi(e,t,n,r){this.id=++Afn,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function J2e(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Wi.prototype={targets(){return this._targets||(this._targets=cB(o5))},set(e){return this.value!==e?(this.value=e,1):0},skip:J2e(kfn),modified:J2e(Rfn),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new hB,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Wi?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===Cfn)Pt(a).forEach(f=>{f instanceof Wi?f!==this&&(f.targets().add(this),s.push(f)):Ke("Pulse parameters must be operator instances.")}),this.source=a;else if(Qe(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||Ifn,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Nfn(e,t,n,r){let i=1,s;return e instanceof Wi?s=e:e&&e.prototype instanceof Wi?s=new e:Yn(e)?s=new Wi(null,e):(i=0,s=new Wi(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function Pfn(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let Dfn=0;function pB(e,t,n){this.id=++Dfn,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function hy(e,t,n){return new pB(e,t,n)}pB.prototype={_filter:Ed,_apply:Mu,targets(){return this._targets||(this._targets=cB(o5))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=hy(e);return this.targets().add(t),t},apply(e){const t=hy(null,e);return this.targets().add(t),t},merge(){const e=hy();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=hy();return this.targets().add(hy(null,null,voe(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(hy(null,null,()=>n=!0)),t.targets().add(hy(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ed,this._targets=null}};function Ofn(e,t,n,r){const i=this,s=hy(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Pt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function $fn(e,t){const n=this.locale();return $Be(e,t,n.timeParse,n.utcParse)}function Lfn(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Mfn(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:OBe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Ffn(e,t,n){const r=this,i=r._pending||Bfn(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Ed).insert(s.data||[])),i.done(),s}function Bfn(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const jfn={skip:!0};function Ufn(e,t,n,r,i){return(e instanceof Wi?Vfn:zfn)(this,e,t,n,r,i),this}function zfn(e,t,n,r,i,s){const o=Gn({},s,jfn);let a,u;Yn(n)||(n=Fu(n)),r===void 0?a=l=>e.touch(n(l)):Yn(r)?(u=new Wi(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;BBe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function Vfn(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Wi(null,Hfn(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Hfn(e,t){return t=Yn(t)?t:Fu(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function qfn(e){e.rank=++this._rank}function Wfn(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Ke("Cycle detected in dataflow graph.")}const xL={},Up=1,xy=2,Vm=4,Gfn=Up|xy,Z2e=Up|Vm,sE=Up|xy|Vm,eEe=8,X3=16,tEe=32,nEe=64;function hv(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function mW(e,t){const n=[];return wy(e,t,r=>n.push(r)),n}function rEe(e,t){const n={};return e.visit(t,r=>{n[nn(r)]=1}),r=>n[nn(r)]?null:r}function O8(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}hv.prototype={StopPropagation:xL,ADD:Up,REM:xy,MOD:Vm,ADD_REM:Gfn,ADD_MOD:Z2e,ALL:sE,REFLOW:eEe,SOURCE:X3,NO_SOURCE:tEe,NO_FIELDS:nEe,fork(e){return new hv(this.dataflow).init(this,e)},clone(){const e=this.fork(sE);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(sE|X3)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new hv(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&nEe)&&(n.fields=e.fields),t&Up?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&xy?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Vm?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&tEe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||sE;return t&Up&&this.add.length||t&xy&&this.rem.length||t&Vm&&this.mod.length},reflow(e){if(e)return this.fork(sE).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Vm,rEe(this,Up))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Qe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Qe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Up&&(n.addF=O8(n.addF,t)),e&xy&&(n.remF=O8(n.remF,t)),e&Vm&&(n.modF=O8(n.modF,t)),e&X3&&(n.srcF=O8(n.srcF,t)),n},materialize(e){e=e||sE;const t=this;return e&Up&&t.addF&&(t.add=mW(t.add,t.addF),t.addF=null),e&xy&&t.remF&&(t.rem=mW(t.rem,t.remF),t.remF=null),e&Vm&&t.modF&&(t.mod=mW(t.mod,t.modF),t.modF=null),e&X3&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&X3)return wy(n.source,n.srcF,r),n;e&Up&&wy(n.add,n.addF,r),e&xy&&wy(n.rem,n.remF,r),e&Vm&&wy(n.mod,n.modF,r);const i=n.source;if(e&eEe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?wy(i,rEe(n,Z2e),r):wy(i,n.srcF,r))}return n}};function Noe(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}At(Noe,hv,{fork(e){const t=new hv(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Qe(e)?e.some(r=>n[r]):n[e]:0},filter(){Ke("MultiPulse does not support filtering.")},materialize(){Ke("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Yfn(e,t,n){const r=this,i=[];if(r._pulse)return jBe(r);if(r._pending&&await r._pending,t&&await dO(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new hv(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=cB(o5);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=xL),u!==xL&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await dO(r,c[f].callback)}return n&&await dO(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Kfn(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Xfn(e,t,n){return this._pulse?jBe(this):(this.evaluate(e,t,n),this)}function Qfn(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function jBe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Jfn(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Zfn(e,t){const n=e.source,r=this._clock;return n&&Qe(n)?new Noe(this,r,n.map(i=>i.pulse),t):this._input[e.id]||edn(this._pulse,n&&n.pulse)}function edn(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==xL&&(e.source=t.source),e)}const Poe={skip:!1,force:!1};function tdn(e,t){const n=t||Poe;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function ndn(e,t,n){const r=n||Poe;return(e.set(t)||r.force)&&this.touch(e,r),this}function rdn(e,t,n){this.touch(e,n||Poe);const r=new hv(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function idn(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),UBe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,sdn(t,0,e)):r=n,r}}}function UBe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function sdn(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,UBe(e,r,t,n)}function OT(){this.logger(hoe()),this.logLevel(foe),this._clock=0,this._rank=0,this._locale=Aoe();try{this._loader=lB()}catch{}this._touched=cB(o5),this._input={},this._pulse=null,this._heap=idn((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Q3(e){return function(){return this._log[e].apply(this,arguments)}}OT.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Q3("error"),warn:Q3("warn"),info:Q3("info"),debug:Q3("debug"),logLevel:Q3("level"),cleanThreshold:1e4,add:Nfn,connect:Pfn,rank:qfn,rerank:Wfn,pulse:rdn,touch:tdn,update:ndn,changeset:t2,ingest:Lfn,parse:$fn,preload:Ffn,request:Mfn,events:Ofn,on:Ufn,evaluate:Yfn,run:Xfn,runAsync:Kfn,runAfter:Qfn,_enqueue:Jfn,_getPulse:Zfn};function He(e,t){Wi.call(this,e,null,t)}At(He,Wi,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const MS={};function zBe(e){const t=VBe(e);return t&&t.Definition||null}function VBe(e){return e=e&&e.toLowerCase(),sn(MS,e)?MS[e]:null}function*HBe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Doe(e,t,n){const r=Float64Array.from(HBe(e,n));return r.sort(wg),t.map(i=>FPe(r,i))}function Ooe(e,t){return Doe(e,[.25,.5,.75],t)}function $oe(e,t){const n=e.length,r=vAt(e,t),i=Ooe(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function qBe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Sd=Math.random;function odn(e){Sd=e}function WBe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(HBe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Sd()*s)];c[l]=a/s}return c.sort(wg),[CK(c,n/2),CK(c,1-n/2)]}function GBe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?adn(s,t+t/4):s}function adn(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function udn(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function ldn(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Sd())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const YBe=Math.sqrt(2*Math.PI),cdn=Math.SQRT2;let J3=NaN;function mB(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(J3===J3)n=J3,J3=NaN;else{do n=Sd()*2-1,r=Sd()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,J3=r*s}return e+n*t}function Loe(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*YBe)}function gB(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function yB(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*cdn*fdn(2*e-1)}function fdn(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Moe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>mB(n,r),pdf:s=>Loe(s,n,r),cdf:s=>gB(s,n,r),icdf:s=>yB(s,n,r)};return i.mean(e).stdev(t)}function Foe(e,t){const n=Moe();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=$oe(e)),i):t},sample(){return e[~~(Sd()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Boe(e,t){return e=e||0,t=t??1,Math.exp(e+mB()*t)}function joe(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*YBe*e)}function Uoe(e,t,n){return gB(Math.log(e),t,n)}function zoe(e,t,n){return Math.exp(yB(e,t,n))}function KBe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Boe(n,r),pdf:s=>joe(s,n,r),cdf:s=>Uoe(s,n,r),icdf:s=>zoe(s,n,r)};return i.mean(e).stdev(t)}function XBe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Sd();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Voe(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Sd()}function Hoe(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function qoe(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Woe(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function QBe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Voe(n,r),pdf:s=>Hoe(s,n,r),cdf:s=>qoe(s,n,r),icdf:s=>Woe(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Goe(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function u5(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function vB(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function l5(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function yC(e,t,n,r,i){let s=0,o=0;return l5(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Yoe(e,t,n){let r=0,i=0,s=0,o=0,a=0;l5(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=u5(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:yC(e,t,n,i,l)}}function JBe(e,t,n){let r=0,i=0,s=0,o=0,a=0;l5(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=u5(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:yC(e,t,n,i,l)}}function ZBe(e,t,n){const[r,i,s,o]=vB(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;l5(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=u5(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:yC(e,t,n,o,y)}}function eje(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;l5(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=u5(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:yC(e,t,n,a,c)}}function Koe(e,t,n){const[r,i,s,o]=vB(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,x=-b*u,S=A=>(A=A-s,b*A*A+w*A+x+o);return{coef:[x-w*s+b*s*s+o,w-2*b*s,b],predict:S,rSquared:yC(e,t,n,o,S)}}function tje(e,t,n,r){if(r===0)return Goe(e,t,n);if(r===1)return Yoe(e,t,n);if(r===2)return Koe(e,t,n);const[i,s,o,a]=vB(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=hdn(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:ddn(f,y,-o,a),predict:v,rSquared:yC(e,t,n,a,v)}}function ddn(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function hdn(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const iEe=2,sEe=1e-12;function nje(e,t,n,r){const[i,s,o,a]=vB(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=iEe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let x=0,S=0,A=0,C=0,N=0;const k=1/Math.abs(i[w]-y||1);for(let O=v;O<=b;++O){const B=i[O],q=s[O],H=pdn(Math.abs(y-B)*k)*d[O],G=B*H;x+=H,S+=G,A+=q*H,C+=q*G,N+=B*G}const[D,L]=u5(S/x,A/x,C/x,N/x);c[g]=D+L*y,f[g]=Math.abs(s[g]-c[g]),mdn(i,g+1,p)}if(h===iEe)break;const m=BPe(f);if(Math.abs(m)<sEe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?sEe:(v=1-y*y)*v}return gdn(i,c,o,a)}function pdn(e){return(e=1-e*e*e)*e*e}function mdn(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function gdn(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const ydn=.5*Math.PI/180;function bB(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=vdn(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&bdn(f,m,d,h,p)>ydn?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function vdn(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function bdn(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function _dn(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function qQ(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:_dn(e)}function rje(e,t,n){return n||e+(t?"_"+t:"")}const gW=()=>{},wdn={init:gW,add:gW,rem:gW,idx:0},T6={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},c5=Object.keys(T6).filter(e=>e!=="__count__");function xdn(e,t){return(n,r)=>Gn({name:e,aggregate_param:r,out:n||e},wdn,t)}[...c5,"__count__"].forEach(e=>{T6[e]=xdn(e,T6[e])});function ije(e,t,n){return T6[e](n,t)}function sje(e,t){return e.idx-t.idx}function Edn(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=T6[i]())})};return e.forEach(n),Object.values(t).sort(sje)}function Tdn(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Sdn(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Adn(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Cdn(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function oje(e,t){const n=t||Mu,r=Edn(e),i=e.slice().sort(sje);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Tdn,s.prototype.add=Sdn,s.prototype.rem=Adn,s.prototype.set=Cdn,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Xoe(e){this._key=e?xd(e):nn,this.reset()}const tu=Xoe.prototype;tu.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};tu.add=function(e){this._add.push(e)};tu.rem=function(e){this._rem.push(e)};tu.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};tu.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",sn(n,s)||(n[s]=1,++i);return i};tu.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=YFe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};tu.argmin=function(e){return this.extent(e)[0]||{}};tu.argmax=function(e){return this.extent(e)[1]||{}};tu.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};tu.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};tu.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Ooe(this.values(),e),this._get=e),this._q};tu.q1=function(e){return this.quartile(e)[0]};tu.q2=function(e){return this.quartile(e)[1]};tu.q3=function(e){return this.quartile(e)[2]};tu.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=WBe(this.values(),1e3,.05,e),this._get=e),this._ci};tu.ci0=function(e){return this.ci(e)[0]};tu.ci1=function(e){return this.ci(e)[1]};function Wv(e){He.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Wv.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:c5},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};At(Wv,He,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=Pt(Ru(v)),w=b.length;let x=0,S;for(;x<w;++x)r[S=b[x]]||(r[S]=1,t.push(S))}this._dims=Pt(e.groupby),this._dnames=this._dims.map(v=>{const b=Xs(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:qQ(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Ke("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Ke("Null aggregate field specified."),m=Xs(f),g=rje(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(ije(d,h,g))}return this._measures=this._measures.map(v=>oje(v,v.field)),Object.create(null)},cellkey:qQ(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Xoe),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?FBe(t.tuple,s):pi(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Idn=1e-14;function Qoe(e){He.call(this,null,e)}Qoe.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};At(Qoe,He,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Ru(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=qBe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=Cu(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(Idn+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=$c(u,Ru(t),e.name||"bin_"+Xs(t))}});function aje(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?eBe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Joe(e){He.call(this,[],e)}Joe.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};At(Joe,He,{transform(e,t){const n=t.fork(t.ALL),r=aje(nn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(e2(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function uje(e){Wi.call(this,null,kdn,e)}At(uje,Wi);function kdn(e){return this.value&&!e.modified()?this.value:yoe(e.fields,e.orders)}function Zoe(e){He.call(this,null,e)}Zoe.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Rdn(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}At(Zoe,He,{transform(e,t){const n=f=>d=>{for(var h=Rdn(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=pi({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function eae(e){He.call(this,null,e)}eae.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};At(eae,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=Ndn(a,i,s,e.filter||Ed)):n.mod=a,n.source=this.value,n.modifies(r)}});function Ndn(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(pi(s)),s={},s[t]=l);return i}const oEe={kde:Foe,mixture:XBe,normal:Moe,lognormal:KBe,uniform:QBe},Pdn="distributions",aEe="function",Ddn="field";function lje(e,t){const n=e[aEe];sn(oEe,n)||Ke("Unknown distribution function: "+n);const r=oEe[n]();for(const i in e)i===Ddn?r.data((e.from||t()).map(e[i])):i===Pdn?r[i](e[i].map(s=>lje(s,t))):typeof r[i]===aEe&&r[i](e[i]);return r}function tae(e){He.call(this,null,e)}const cje=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Odn={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:cje},{name:"weights",type:"number",array:!0}]};tae.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:cje.concat(Odn)},{name:"as",type:"string",array:!0,default:["value","density"]}]};At(tae,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=lje(e.distribution,$dn(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Ke("Invalid density method: "+o),!e.extent&&!r.data&&Ke("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||B0(r.data()),l=bB(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],pi(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function $dn(e){return()=>e.materialize(e.SOURCE).source}function fje(e,t){return e?e.map((n,r)=>t[r]||Xs(n)):null}function nae(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const dje="bin";function rae(e){He.call(this,null,e)}rae.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:dje}]};const Ldn=(e,t)=>a5(B0(e,t))/30;At(rae,He,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=nae(t.source,e.groupby,Mu),i=e.smooth||!1,s=e.field,o=e.step||Ldn(n,s),a=e2((p,m)=>s(p)-s(m)),u=e.as||dje,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of GBe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function hje(e){Wi.call(this,null,Mdn,e),this.modified(!0)}At(hje,Wi);function Mdn(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:$c(n=>t(n,e),Ru(t),Xs(t))}function iae(e){He.call(this,[void 0,void 0],e)}iae.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};At(iae,He,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Cu(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Xs(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function sae(e,t){Wi.call(this,e),this.parent=t,this.count=0}At(sae,Wi,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function _B(e){He.call(this,{},e),this._keys=pC();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}At(_B,He,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=sn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new sae(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=nn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(nn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=nn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(nn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=nn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function pje(e){Wi.call(this,null,Fdn,e)}At(pje,Wi);function Fdn(e){return this.value&&!e.modified()?this.value:Qe(e.name)?Pt(e.name).map(t=>xd(t)):xd(e.name,e.as)}function oae(e){He.call(this,pC(),e)}oae.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};At(oae,He,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=nn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(nn(f),1)});function c(f){const d=nn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function aae(e){He.call(this,[],e)}aae.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};At(aae,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=fje(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=Roe(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function uae(e){He.call(this,[],e)}uae.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};At(uae,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Xs),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=Roe(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function lae(e){He.call(this,null,e)}lae.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};At(lae,He,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function mje(e){He.call(this,[],e)}At(mje,He,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=pi(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const $8={value:"value",median:BPe,mean:TAt,min:AK,max:xg},Bdn=[];function cae(e){He.call(this,[],e)}cae.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function jdn(e){var t=e.method||$8.value,n;if($8[t]==null)Ke("Unrecognized imputation method: "+t);else return t===$8.value?(n=e.value!==void 0?e.value:0,()=>n):$8[t]}function Udn(e){const t=e.field;return n=>n?t(n):NaN}At(cae,He,{transform(e,t){var n=t.fork(t.ALL),r=jdn(e),i=Udn(e),s=Xs(e.field),o=Xs(e.key),a=(e.groupby||[]).map(Xs),u=zdn(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,x;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],x={_impute:!0},y=0,w=p.length;y<w;++y)x[a[y]]=p[y];x[o]=m,x[s]=Number.isNaN(h)?h=r(d,i):h,l.push(pi(x))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function zdn(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):Bdn)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function fae(e){Wv.call(this,e)}fae.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:c5},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};At(fae,Wv,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Gn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function dae(e){He.call(this,null,e)}dae.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};At(dae,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=nae(r,e.groupby,e.field),s=(e.groupby||[]).map(Xs),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Ke("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=B0(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Foe(h,o)[a],m=e.counts?h.length:1,g=c||B0(h);bB(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(pi(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function gje(e){Wi.call(this,null,Vdn,e)}At(gje,Wi);function Vdn(e){return this.value&&!e.modified()?this.value:boe(e.fields,e.flat)}function yje(e){He.call(this,[],e),this._pending=null}At(yje,He,{transform(e,t){const n=t.dataflow;return this._pending?yW(this,t,this._pending):Hdn(e)?t.StopPropagation:e.values?yW(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Pt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>yW(this,t,Pt(r.data)))}});function Hdn(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function yW(e,t,n){n.forEach(pi);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function hae(e){He.call(this,{},e)}hae.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};At(hae,He,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Ke('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Ke('The "as" parameter has too few output field names.'),c=c||i.map(Xs),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Ke("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function vje(e){Wi.call(this,null,qdn,e)}At(vje,Wi);function qdn(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function bje(e){Wi.call(this,null,Wdn,e)}At(bje,Wi);function Wdn(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function _je(e){He.call(this,null,e)}At(_je,He,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function pae(e){Wv.call(this,e)}pae.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:c5,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};At(pae,Wv,{_transform:Wv.prototype.transform,transform(e,t){return this._transform(Gdn(e,t),t)}});function Gdn(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Ru(n).concat(Ru(r)),o=Kdn(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>Ydn(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function Ydn(e,t,n,r){return $c(i=>t(i)===e?n(i):NaN,r,e+"")}function Kdn(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(aB),t?i.slice(0,t):i}function wje(e){_B.call(this,e)}At(wje,_B,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(nn(s),n,t,s);return(e.modified("field")||r&&t.modified(Ru(r)))&&Ke("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(pi(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function mae(e){He.call(this,null,e)}mae.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};At(mae,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=fje(e.fields,e.as||[]),s=r?(a,u)=>Xdn(a,u,r,i):dB;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=nn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,pi({}));o[nn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[nn(a)]))}),n}});function Xdn(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function xje(e){He.call(this,null,e)}At(xje,He,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function gae(e){He.call(this,null,e)}gae.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Qdn=1e-14;At(gae,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=nae(i,e.groupby,e.field),o=(e.groupby||[]).map(Xs),a=[],u=e.step||.01,l=e.probs||ac(u/2,1-Qdn,u),c=l.length;return s.forEach(f=>{const d=Doe(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(pi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function Eje(e){He.call(this,null,e)}At(Eje,He,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=nn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Roe(i);r[nn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[nn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function yae(e){He.call(this,[],e),this.count=0}yae.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};At(yae,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[nn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Sd()),d<o.length&&d>=u&&(f=o[d],s[nn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=nn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[nn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[nn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[nn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[nn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[nn(c)])),this.count=a,this.value=n.source=o,n}});function vae(e){He.call(this,null,e)}vae.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};At(vae,He,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=ac(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,pi(s)}),n.add=t.add.concat(this.value),n}});function Tje(e){He.call(this,null,e),this.modified(!0)}At(Tje,He,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function bae(e){He.call(this,null,e)}const Sje=["unit0","unit1"];bae.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Eoe,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Sje}]};At(bae,He,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?gC:mC)(s.unit).offset,a=e.as||Sje,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Ru(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:xBe({extent:e.extent||B0(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Toe(r),o=this.value||{},a=(n?hBe:dBe)(s,i);return a.unit=Mr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function Aje(e){He.call(this,pC(),e)}At(Aje,He,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function Cje(e){He.call(this,null,e)}At(Cje,He,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(e2(e.sort)):t.source).map(e.field))}});function Jdn(e,t,n,r){const i=S6[e](t,n);return{init:i.init||Ny,update:function(s,o){o[r]=i.next(s)}}}const S6={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=S6.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Ke("ntile num must be greater than zero.");const n=S6.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Ke("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Zdn(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Zdn(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const ehn=Object.keys(S6);function Ije(e){const t=Pt(e.ops),n=Pt(e.fields),r=Pt(e.params),i=Pt(e.aggregate_params),s=Pt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Pt(Ru(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Xs(g),w=rje(p,b,s[m]);if(h(g),o.push(w),sn(S6,p))a.push(Jdn(p,g,y,w));else{if(g==null&&p!=="count"&&Ke("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let x=l[b];x||(x=l[b]=[],x.field=g,f.push(x)),x.push(ije(p,v,w))}}),(c.length||f.length)&&(this.cell=thn(f,c,d)),this.inputs=Object.keys(u)}const kje=Ije.prototype;kje.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};kje.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function thn(e,t,n){e=e.map(u=>oje(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Xoe;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function _ae(e){He.call(this,{},e),this._mlen=0,this._mods=[]}_ae.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ehn.concat(c5)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};At(_ae,He,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=e2(e.sort),i=qQ(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new Ije(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)nhn(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=aje(nn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function nhn(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?Lh(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Fu(-1)};t.init();for(let f=0;f<u;++f)rhn(c,o,f,u),s&&ihn(c,l),t.update(c,a[f])}function rhn(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function ihn(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const shn=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Wv,bin:Qoe,collect:Joe,compare:uje,countpattern:Zoe,cross:eae,density:tae,dotbin:rae,expression:hje,extent:iae,facet:_B,field:pje,filter:oae,flatten:aae,fold:uae,formula:lae,generate:mje,impute:cae,joinaggregate:fae,kde:dae,key:gje,load:yje,lookup:hae,multiextent:vje,multivalues:bje,params:_je,pivot:pae,prefacet:wje,project:mae,proxy:xje,quantile:gae,relay:Eje,sample:yae,sequence:vae,sieve:Tje,subflow:sae,timeunit:bae,tupleindex:Aje,values:Cje,window:_ae},Symbol.toStringTag,{value:"Module"}));function pv(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const ohn=()=>typeof Image<"u"?Image:null;function wae(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const ahn="identity",FS="linear",Zg="log",f5="pow",d5="sqrt",wB="symlog",ex="time",tx="utc",w0="sequential",vC="diverging",BS="quantile",xB="quantize",EB="threshold",xae="ordinal",WQ="point",Rje="band",Eae="bin-ordinal",Zo="continuous",h5="discrete",p5="discretizing",Fd="interpolating",Tae="temporal";function uhn(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function lhn(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Sae(){const e=kb().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=wae(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=ac(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,kv(h,m)-1),v=m===g?y:kv(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Sae().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function Nje(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Nje(t())},e}function chn(){return Nje(Sae().paddingInner(1))}var fhn=Array.prototype.map;function dhn(e){return fhn.call(e,Cu)}const hhn=Array.prototype.slice;function Pje(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(kv(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=dhn(r),n):e.slice()},n.range=function(r){return arguments.length?(t=hhn.call(r),n):t.slice()},n.tickFormat=function(r,i){return qDe(e[0],Mr(e),r??10,i)},n.copy=function(){return Pje().domain(n.domain()).range(n.range())},n}const EL=new Map,Dje=Symbol("vega_scale");function Oje(e){return e[Dje]=!0,e}function phn(e){return e&&e[Dje]===!0}function mhn(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?uhn(s):s.invertExtent?lhn(s):void 0),s.type=e,Oje(s)};return r.metadata=Xh(Pt(n)),r}function ii(e,t,n){return arguments.length>1?(EL.set(e,mhn(e,t,n)),this):$je(e)?EL.get(e):void 0}ii(ahn,WDe);ii(FS,xa,Zo);ii(Zg,YDe,[Zo,Zg]);ii(f5,Kre,Zo);ii(d5,r5t,Zo);ii(wB,KDe,Zo);ii(ex,Zre,[Zo,Tae]);ii(tx,vNt,[Zo,Tae]);ii(w0,eie,[Zo,Fd]);ii(`${w0}-${FS}`,eie,[Zo,Fd]);ii(`${w0}-${Zg}`,uOe,[Zo,Fd,Zg]);ii(`${w0}-${f5}`,tie,[Zo,Fd]);ii(`${w0}-${d5}`,bNt,[Zo,Fd]);ii(`${w0}-${wB}`,lOe,[Zo,Fd]);ii(`${vC}-${FS}`,cOe,[Zo,Fd]);ii(`${vC}-${Zg}`,fOe,[Zo,Fd,Zg]);ii(`${vC}-${f5}`,nie,[Zo,Fd]);ii(`${vC}-${d5}`,_Nt,[Zo,Fd]);ii(`${vC}-${wB}`,dOe,[Zo,Fd]);ii(BS,XDe,[p5,BS]);ii(xB,QDe,p5);ii(EB,JDe,p5);ii(Eae,Pje,[h5,p5]);ii(xae,kb,h5);ii(Rje,Sae,h5);ii(WQ,chn,h5);function $je(e){return EL.has(e)}function n2(e,t){const n=EL.get(e);return n&&n.metadata[t]}function Aae(e){return n2(e,Zo)}function jS(e){return n2(e,h5)}function GQ(e){return n2(e,p5)}function Lje(e){return n2(e,Zg)}function ghn(e){return n2(e,Tae)}function Mje(e){return n2(e,Fd)}function Fje(e){return n2(e,BS)}const yhn=["clamp","base","constant","exponent"];function Bje(e,t){const n=t[0],r=Mr(t)-n;return function(i){return e(n+i*r)}}function TB(e,t,n){return Ire(Cae(t||"rgb",n),e)}function jje(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function Uje(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Fu(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=ii(s)().domain([t,n]).range([0,1]),yhn.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Cae(e,t){const n=eIt[vhn(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function vhn(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const bhn={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},_hn={accent:xNt,category10:wNt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:ENt,observable10:TNt,paired:SNt,pastel1:ANt,pastel2:CNt,set1:INt,set2:kNt,set3:RNt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function zje(e){if(Qe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function Vje(e,t){for(const n in e)Iae(n,t(e[n]))}const uEe={};Vje(_hn,zje);Vje(bhn,e=>TB(zje(e)));function Iae(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(uEe[e]=t,this):uEe[e]}const pO="symbol",whn="discrete",xhn="gradient",Ehn=e=>Qe(e)?e.map(t=>String(t)):String(e),Thn=(e,t)=>e[1]-t[1],Shn=(e,t)=>t[1]-e[1];function kae(e,t,n){let r;return Qr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(a5(e.domain())/n||1)+1))),Ot(t)&&(r=t.step,t=t.interval),Dt(t)&&(t=e.type===ex?mC(t):e.type==tx?gC(t):Ke("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function Hje(e,t,n){let r=e.range(),i=r[0],s=Mr(r),o=Thn;if(i>s&&(r=s,s=i,i=r,o=Shn),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Mr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Rae(e,t){return e.bins?Hje(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function qje(e,t,n,r,i,s){const o=t.type;let a=Ehn;if(o===ex||i===ex)a=e.timeFormat(r);else if(o===tx||i===tx)a=e.utcFormat(r);else if(Lje(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=Wje(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function Wje(e,t,n){const r=Rae(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const YQ={[BS]:"quantiles",[xB]:"thresholds",[EB]:"domain"},Gje={[BS]:"quantiles",[xB]:"domain"};function Yje(e,t){return e.bins?Ihn(e.bins):e.type===Zg?Wje(e,t,!0):YQ[e.type]?Chn(e[YQ[e.type]]()):Rae(e,t)}function Ahn(e,t,n){const r=t[Gje[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Chn(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Ihn(e){const t=e.slice(0,-1);return t.max=Mr(e),t}const khn=e=>YQ[e.type]||e.bins;function Kje(e,t,n,r,i,s,o){const a=Gje[t.type]&&s!==ex&&s!==tx?Ahn(e,t,i):qje(e,t,n,i,s,o);return r===pO&&khn(t)?Rhn(a):r===whn?Nhn(a):Phn(a)}const Rhn=e=>(t,n,r)=>{const i=lEe(r[n+1],lEe(r.max,1/0)),s=cEe(t,e),o=cEe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},lEe=(e,t)=>e??t,Nhn=e=>(t,n)=>n?e(t):null,Phn=e=>t=>e(t),cEe=(e,t)=>Number.isFinite(e)?t(e):null;function Dhn(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Mr(t),s=i-r;if(e.type===EB){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Ohn(e,t,n,r){const i=r||t.type;return Dt(n)&&ghn(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===ex?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===tx?e.utcFormat("%A, %d %B %Y, %X UTC"):Kje(e,t,5,null,n,r,!0)}function Xje(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Ohn(e,t,n.format,n.formatType);if(GQ(t.type)){const s=Yje(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(jS(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Mr(s))}`}}let Qje=0;function $hn(){Qje=0}const TL="p_";function Nae(e){return e&&e.gradient}function Jje(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?TL:"";return i||(i=e.id="gradient_"+Qje++,r==="radial"?(e.x1=Rp(e.x1,.5),e.y1=Rp(e.y1,.5),e.r1=Rp(e.r1,0),e.x2=Rp(e.x2,.5),e.y2=Rp(e.y2,.5),e.r2=Rp(e.r2,.5),s=TL):(e.x1=Rp(e.x1,0),e.y1=Rp(e.y1,0),e.x2=Rp(e.x2,1),e.y2=Rp(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Rp(e,t){return e??t}function Zje(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const fEe={basis:{curve:HNt},"basis-closed":{curve:qNt},"basis-open":{curve:WNt},bundle:{curve:GNt,tension:"beta",value:.85},cardinal:{curve:YNt,tension:"tension",value:0},"cardinal-open":{curve:XNt,tension:"tension",value:0},"cardinal-closed":{curve:KNt,tension:"tension",value:0},"catmull-rom":{curve:QNt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:JNt,tension:"alpha",value:.5},"catmull-rom-open":{curve:ZNt,tension:"alpha",value:.5},linear:{curve:rie},"linear-closed":{curve:ePt},monotone:{horizontal:nPt,vertical:tPt},natural:{curve:rPt},step:{curve:iPt},"step-after":{curve:oPt},"step-before":{curve:sPt}};function Pae(e,t,n){var r=sn(fEe,e)&&fEe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Lhn={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Mhn=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Fhn=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Bhn=/^((\s+,?\s*)|(,\s*))/,jhn=/^[01]/;function US(e){const t=[];return(e.match(Mhn)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Lhn[s],a=Uhn(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function Uhn(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?jhn:Fhn,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(Bhn);u!==null&&(i+=u[0].length)}return r}const Gv=Math.PI/180,zhn=1e-14,W_=Math.PI/2,i0=Math.PI*2,oE=Math.sqrt(3)/2;var vW={},bW={},eUe=[].join;function Vhn(e,t,n,r,i,s,o,a,u){const l=eUe.call(arguments);if(vW[l])return vW[l];const c=o*Gv,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,x=v*a+b*u,S=g*e+y*t,A=v*e+b*t;let N=1/((S-w)*(S-w)+(A-x)*(A-x))-.25;N<0&&(N=0);let k=Math.sqrt(N);s==i&&(k=-k);const D=.5*(w+S)-k*(A-x),L=.5*(x+A)+k*(S-w),O=Math.atan2(x-L,w-D);let q=Math.atan2(A-L,S-D)-O;q<0&&s===1?q+=i0:q>0&&s===0&&(q-=i0);const H=Math.ceil(Math.abs(q/(W_+.001))),G=[];for(let K=0;K<H;++K){const J=O+K*q/H,F=O+(K+1)*q/H;G[K]=[D,L,J,F,n,r,f,d]}return vW[l]=G}function Hhn(e){const t=eUe.call(e);if(bW[t])return bW[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),x=n+p-w*m,S=r+m+w*p,A=n+g,C=r+y,N=A+w*y,k=C-w*g;return bW[t]=[c*x+f*S,d*x+h*S,c*N+f*k,d*N+h*k,c*A+f*C,d*A+h*C]}const Kf=["l",0,0,0,0,0,0,0];function qhn(e,t,n){const r=Kf[0]=e[0];if(r==="a"||r==="A")Kf[1]=t*e[1],Kf[2]=n*e[2],Kf[3]=e[3],Kf[4]=e[4],Kf[5]=e[5],Kf[6]=t*e[6],Kf[7]=n*e[7];else if(r==="h"||r==="H")Kf[1]=t*e[1];else if(r==="v"||r==="V")Kf[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Kf[i]=(i%2==1?t:n)*e[i];return Kf}function A6(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=qhn(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":dEe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":dEe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function dEe(e,t,n,r){const i=Vhn(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Hhn(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const hEe=.5773502691896257,pEe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,i0)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=oE*n,i=r-n*hEe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=oE*n,i=r-n*hEe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=oE*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=oE*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=oE*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=oE*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function tUe(e){return sn(pEe,e)?pEe[e]:Whn(e)}var _W={};function Whn(e){if(!sn(_W,e)){const t=US(e);_W[e]={draw:function(n,r){A6(n,t,0,0,Math.sqrt(r)/2)}}}return _W[e]}const sy=.448084975506;function Ghn(e){return e.x}function Yhn(e){return e.y}function Khn(e){return e.width}function Xhn(e){return e.height}function $m(e){return typeof e=="function"?e:()=>+e}function L8(e,t,n){return Math.max(t,Math.min(e,n))}function nUe(){var e=Ghn,t=Yhn,n=Khn,r=Xhn,i=$m(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=L8(+i.call(this,c),0,v),w=L8(+s.call(this,c),0,v),x=L8(+o.call(this,c),0,v),S=L8(+a.call(this,c),0,v);if(u||(u=h=eF()),b<=0&&w<=0&&x<=0&&S<=0)u.rect(p,m,g,y);else{var A=p+g,C=m+y;u.moveTo(p+b,m),u.lineTo(A-w,m),u.bezierCurveTo(A-sy*w,m,A,m+sy*w,A,m+w),u.lineTo(A,C-S),u.bezierCurveTo(A,C-sy*S,A-sy*S,C,A-S,C),u.lineTo(p+x,C),u.bezierCurveTo(p+sy*x,C,p,C-sy*x,p,C-x),u.lineTo(p,m+b),u.bezierCurveTo(p,m+sy*b,p+sy*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=$m(c),l):e},l.y=function(c){return arguments.length?(t=$m(c),l):t},l.width=function(c){return arguments.length?(n=$m(c),l):n},l.height=function(c){return arguments.length?(r=$m(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=$m(c),s=f!=null?$m(f):i,a=d!=null?$m(d):i,o=h!=null?$m(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function rUe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,i0);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=eF()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function m5(e,t){return e??t}const g5=e=>e.x||0,y5=e=>e.y||0,Qhn=e=>e.width||0,Jhn=e=>e.height||0,Zhn=e=>(e.x||0)+(e.width||0),epn=e=>(e.y||0)+(e.height||0),tpn=e=>e.startAngle||0,npn=e=>e.endAngle||0,rpn=e=>e.padAngle||0,ipn=e=>e.innerRadius||0,spn=e=>e.outerRadius||0,opn=e=>e.cornerRadius||0,apn=e=>m5(e.cornerRadiusTopLeft,e.cornerRadius)||0,upn=e=>m5(e.cornerRadiusTopRight,e.cornerRadius)||0,lpn=e=>m5(e.cornerRadiusBottomRight,e.cornerRadius)||0,cpn=e=>m5(e.cornerRadiusBottomLeft,e.cornerRadius)||0,fpn=e=>m5(e.size,64),dpn=e=>e.size||1,SB=e=>e.defined!==!1,hpn=e=>tUe(e.shape||"circle"),ppn=pX().startAngle(tpn).endAngle(npn).padAngle(rpn).innerRadius(ipn).outerRadius(spn).cornerRadius(opn),mpn=gOe().x(g5).y1(y5).y0(epn).defined(SB),gpn=gOe().y(y5).x1(g5).x0(Zhn).defined(SB),ypn=gF().x(g5).y(y5).defined(SB),vpn=nUe().x(g5).y(y5).width(Qhn).height(Jhn).cornerRadius(apn,upn,lpn,cpn),bpn=VNt().type(hpn).size(fpn),_pn=rUe().x(g5).y(y5).defined(SB).size(dpn);function Dae(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function wpn(e,t){return ppn.context(e)(t)}function xpn(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?gpn:mpn).curve(Pae(r,n.orient,n.tension)).context(e)(t)}function Epn(e,t){const n=t[0],r=n.interpolate||"linear";return ypn.curve(Pae(r,n.orient,n.tension)).context(e)(t)}function bC(e,t,n,r){return vpn.context(e)(t,n,r)}function Tpn(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Spn(e,t){return bpn.context(e)(t)}function Apn(e,t){return _pn.context(e)(t)}var iUe=1;function sUe(){iUe=1}function Oae(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+iUe++),o=i.clipping[s]||(i.clipping[s]={id:s});return Yn(r)?o.path=r(null):Dae(n)?o.path=bC(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Io(e){this.clear(),e&&this.union(e)}Io.prototype={clone(){return new Io(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function AB(e){this.mark=e,this.bounds=this.bounds||new Io}function CB(e){AB.call(this,e),this.items=this.items||[]}At(CB,AB);class oUe{constructor(t){this._pending=0,this._loader=t||lB()}pending(){return this._pending}sanitizeURL(t){const n=this;return mEe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(Z3(n),r)).catch(()=>(Z3(n),null))}loadImage(t){const n=this,r=ohn();return mEe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=sn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>Z3(n),o.onerror=()=>Z3(n),o.src=s,o}).catch(i=>(Z3(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function mEe(e){e._pending+=1}function Z3(e){e._pending-=1}function A1(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Cpn(t,r):0))}return e}function Cpn(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Ipn=i0-1e-8;let IB,mO,gO,yw,KQ,yO,XQ,QQ;const zy=(e,t)=>IB.add(e,t),vO=(e,t)=>zy(mO=e,gO=t),gEe=e=>zy(e,IB.y1),yEe=e=>zy(IB.x1,e),G_=(e,t)=>KQ*e+XQ*t,Y_=(e,t)=>yO*e+QQ*t,wW=(e,t)=>zy(G_(e,t),Y_(e,t)),xW=(e,t)=>vO(G_(e,t),Y_(e,t));function v5(e,t){return IB=e,t?(yw=t*Gv,KQ=QQ=Math.cos(yw),yO=Math.sin(yw),XQ=-yO):(KQ=QQ=1,yw=yO=XQ=0),kpn}const kpn={beginPath(){},closePath(){},moveTo:xW,lineTo:xW,rect(e,t,n,r){yw?(wW(e+n,t),wW(e+n,t+r),wW(e,t+r),xW(e,t)):(zy(e+n,t+r),vO(e,t))},quadraticCurveTo(e,t,n,r){const i=G_(e,t),s=Y_(e,t),o=G_(n,r),a=Y_(n,r);vEe(mO,i,o,gEe),vEe(gO,s,a,yEe),vO(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=G_(e,t),a=Y_(e,t),u=G_(n,r),l=Y_(n,r),c=G_(i,s),f=Y_(i,s);bEe(mO,o,u,c,gEe),bEe(gO,a,l,f,yEe),vO(c,f)},arc(e,t,n,r,i,s){if(r+=yw,i+=yw,mO=n*Math.cos(i)+e,gO=n*Math.sin(i)+t,Math.abs(i-r)>Ipn)zy(e-n,t-n),zy(e+n,t+n);else{const o=l=>zy(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%i0,r<0&&(r+=i0),i=i%i0,i<0&&(i+=i0),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=i0,a=r-r%W_,u=0;u<4&&a>i;++u,a-=W_)o(a);else for(a=r-r%W_+W_,u=0;u<4&&a<i;++u,a=a+W_)o(a)}}};function vEe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function bEe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>zhn?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(_Ee(u,e,t,n,r)),0<l&&l<1&&i(_Ee(l,e,t,n,r))}function _Ee(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var mv=(mv=pv(1,1))?mv.getContext("2d"):null;const JQ=new Io;function $ae(e){return function(t,n){if(!mv)return!0;e(mv,t),JQ.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=JQ;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(mv.isPointInPath(u,a))return!0;return!1}}function Lae(e,t){return t.contains(e.x||0,e.y||0)}function aUe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(JQ.set(n,r,n+i,r+s))}function uUe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return nT(t,n,r,i,s)}function nT(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function zS(e,t){e.globalCompositeOperation=t.blend||"source-over"}function sh(e,t){return e??t}function wEe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Rpn(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+sh(t.x1,.5)*r,n.y1+sh(t.y1,.5)*i,Math.max(r,i)*sh(t.r1,0),n.x1+sh(t.x2,.5)*r,n.y1+sh(t.y2,.5)*i,Math.max(r,i)*sh(t.r2,.5));else{const o=sh(t.x1,0),a=sh(t.y1,0),u=sh(t.x2,1),l=sh(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=pv(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=wEe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return wEe(s,t.stops)}function lUe(e,t,n){return Nae(n)?Rpn(e,n,t.bounds):n}function SL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=lUe(e,t,t.fill),!0):!1}var Npn=[];function VS(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=lUe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Npn),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Ppn(e,t){return e.zindex-t.zindex||e.index-t.index}function Mae(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Ppn)}function Jh(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Mae(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function AL(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Mae(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Fae(e){return function(t,n,r){Jh(n,i=>{(!r||r.intersects(i.bounds))&&cUe(e,t,i,i)})}}function Dpn(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&cUe(e,t,n.items[0],n.items)}}function cUe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(zS(t,n),n.fill&&SL(t,n,i)&&t.fill(),n.stroke&&VS(t,n,i)&&t.stroke()))}function kB(e){return e=e||Ed,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,AL(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function b5(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Bae(e){return kB(b5(e))}function Iw(e,t){return"translate("+e+","+t+")"}function jae(e){return"rotate("+e+")"}function Opn(e,t){return"scale("+e+","+t+")"}function fUe(e){return Iw(e.x||0,e.y||0)}function $pn(e){return Iw(e.x||0,e.y||0)+(e.angle?" "+jae(e.angle):"")}function Lpn(e){return Iw(e.x||0,e.y||0)+(e.angle?" "+jae(e.angle):"")+(e.scaleX||e.scaleY?" "+Opn(e.scaleX||1,e.scaleY||1):"")}function Uae(e,t,n){function r(o,a){o("transform",$pn(a)),o("d",t(null,a))}function i(o,a){return t(v5(o,a.angle),a),A1(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Gv),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Fae(s),pick:Bae(s),isect:n||$ae(s)}}var Mpn=Uae("arc",wpn);function Fpn(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Bpn(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function jpn(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function zae(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(v5(u),c),A1(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=b5(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Dpn(s),pick:a,isect:Lae,tip:n}}var Upn=zae("area",xpn,Fpn);function zpn(e,t){var n=t.clip;e.save(),Yn(n)?(e.beginPath(),n(e),e.clip()):dUe(e,t.group)}function dUe(e,t){e.beginPath(),Dae(t)?bC(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function hUe(e){const t=sh(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Vpn(e,t){e("transform",fUe(t))}function pUe(e,t){const n=hUe(t);e("d",bC(null,t,n,n))}function Hpn(e,t){e("class","background"),e("aria-hidden",!0),pUe(e,t)}function qpn(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?pUe(e,t):e("d","")}function Wpn(e,t,n){const r=t.clip?Oae(n,t,t):null;e("clip-path",r)}function Gpn(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),A1(e,t),e.translate(t.x||0,t.y||0)}function C6(e,t,n,r){const i=hUe(t);e.beginPath(),bC(e,t,(n||0)+i,(r||0)+i)}const Ypn=b5(C6),Kpn=b5(C6,!1),Xpn=b5(C6,!0);function Qpn(e,t,n,r){Jh(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(C6(e,i,s,o),zS(e,i),i.fill&&SL(e,i,u)&&e.fill(),i.stroke&&!a&&VS(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&dUe(e,i),n&&n.translate(-s,-o),Jh(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(C6(e,i,s,o),zS(e,i),VS(e,i,u)&&e.stroke())})}function Jpn(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return AL(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Dae(u)&&!Xpn(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&Kpn(e,u,o,a)?(e.restore(),u):(l=AL(u,v=>Zpn(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&Ypn(e,u,o,a)&&(l=u),e.restore(),l||null)})}function Zpn(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var e0n={type:"group",tag:"g",nested:!1,attr:Vpn,bound:Gpn,draw:Qpn,pick:Jpn,isect:aUe,content:Wpn,background:Hpn,foreground:qpn},I6={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Vae(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Hae(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function qae(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function RB(e,t){return e==="center"?t/2:e==="right"?t:0}function NB(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function t0n(e,t,n){const r=Vae(t,n),i=Hae(t,r),s=qae(t,r),o=(t.x||0)-RB(t.align,i),a=(t.y||0)-NB(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,I6["xmlns:xlink"],"xlink:href"),e("transform",Iw(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function n0n(e,t){const n=t.image,r=Hae(t,n),i=qae(t,n),s=(t.x||0)-RB(t.align,r),o=(t.y||0)-NB(t.baseline,i);return e.set(s,o,s+r,o+i)}function r0n(e,t,n){Jh(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Vae(r,this);let s=Hae(r,i),o=qae(r,i);if(s===0||o===0)return;let a=(r.x||0)-RB(r.align,s),u=(r.y||0)-NB(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(zS(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var i0n={type:"image",tag:"image",nested:!1,attr:t0n,bound:n0n,draw:r0n,pick:kB(),isect:Ed,get:Vae,xOffset:RB,yOffset:NB},s0n=zae("line",Epn,Bpn);function o0n(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Lpn(t)),e("d",t.path)}function bO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Gv,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=US(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),A6(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):A6(e,u,r,i,s,o)}function a0n(e,t){return bO(v5(e,t.angle),t)?e.set(0,0,0,0):A1(e,t,!0)}var u0n={type:"path",tag:"path",nested:!1,attr:o0n,bound:a0n,draw:Fae(bO),pick:Bae(bO),isect:$ae(bO)};function l0n(e,t){e("d",bC(null,t))}function c0n(e,t){var n,r;return A1(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function xEe(e,t){e.beginPath(),bC(e,t)}var f0n={type:"rect",tag:"path",nested:!1,attr:l0n,bound:c0n,draw:Fae(xEe),pick:Bae(xEe),isect:aUe};function d0n(e,t){e("transform",fUe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function h0n(e,t){var n,r;return A1(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function mUe(e,t,n){var r,i,s,o;return t.stroke&&VS(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function p0n(e,t,n){Jh(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&mUe(e,r,i)&&(zS(e,r),e.stroke())}})}function m0n(e,t,n,r){return e.isPointInStroke?mUe(e,t,1)&&e.isPointInStroke(n,r):!1}var g0n={type:"rule",tag:"line",nested:!1,attr:d0n,bound:h0n,draw:p0n,pick:kB(m0n),isect:uUe},y0n=Uae("shape",Tpn),v0n=Uae("symbol",Spn,Lae);const EEe=ZFe();var ff={height:im,measureWidth:Wae,estimateWidth:CL,width:CL,canvas:gUe};gUe(!0);function gUe(e){ff.width=e&&mv?Wae:CL}function CL(e,t){return yUe(Kv(e,t),im(e))}function yUe(e,t){return~~(.8*e.length*t)}function Wae(e,t){return im(e)<=0||!(t=Kv(e,t))?0:vUe(t,PB(e))}function vUe(e,t){const n=`(${t}) ${e}`;let r=EEe.get(n);return r===void 0&&(mv.font=t,r=mv.measureText(e).width,EEe.set(n,r)),r}function im(e){return e.fontSize!=null?+e.fontSize||0:11}function Yv(e){return e.lineHeight!=null?e.lineHeight:im(e)+2}function b0n(e){return Qe(e)?e.length>1?e:e[0]:e}function _5(e){return b0n(e.lineBreak&&e.text&&!Qe(e.text)?e.text.split(e.lineBreak):e.text)}function Gae(e){const t=_5(e);return(Qe(t)?t.length-1:0)*Yv(e)}function Kv(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?w0n(e,n):n}function _0n(e){if(ff.width===Wae){const t=PB(e);return n=>vUe(n,t)}else if(ff.width===CL){const t=im(e);return n=>yUe(n,t)}else return t=>ff.width(e,t)}function w0n(e,t){var n=+e.limit,r=_0n(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function w5(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function PB(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+im(e)+"px "+w5(e,t)}function Yae(e){var t=e.baseline,n=im(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Yv(e):t==="line-bottom"?.29*n-.5*Yv(e):0)}const x0n={left:"start",center:"middle",right:"end"},H4=new Io;function DB(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-W_,t+=r*Math.cos(i),n+=r*Math.sin(i)),H4.x1=t,H4.y1=n,H4}function E0n(e,t){var n=t.dx||0,r=(t.dy||0)+Yae(t),i=DB(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",x0n[t.align]||"start"),a?(u=Iw(s,o)+" "+jae(a),(n||r)&&(u+=" "+Iw(n,r))):u=Iw(s+n,o+r),e("transform",u)}function Kae(e,t,n){var r=ff.height(t),i=t.align,s=DB(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Yae(t)-Math.round(.8*r),c=_5(t),f;if(Qe(c)?(r+=Yv(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,ff.width(t,h)),0)):f=ff.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Gv,o,a);else if(n===2)return e.rotatedPoints(t.angle*Gv,o,a);return e}function T0n(e,t,n){Jh(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=PB(r),e.textAlign=r.align||"left",s=DB(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Gv),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Yae(r),c=_5(r),zS(e,r),Qe(c))for(l=Yv(r),u=0;u<c.length;++u)f=Kv(r,c[u]),r.fill&&SL(e,r,i)&&e.fillText(f,o,a),r.stroke&&VS(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Kv(r,c),r.fill&&SL(e,r,i)&&e.fillText(f,o,a),r.stroke&&VS(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function S0n(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=DB(t),a=o.x1,u=o.y1,l=Kae(H4,t,1),c=-t.angle*Gv,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function A0n(e,t){const n=Kae(H4,e,2);return nT(t,n[0],n[1],n[2],n[3])||nT(t,n[0],n[1],n[4],n[5])||nT(t,n[4],n[5],n[6],n[7])||nT(t,n[2],n[3],n[6],n[7])}var C0n={type:"text",tag:"text",nested:!1,attr:E0n,bound:Kae,draw:T0n,pick:kB(S0n),isect:A0n},I0n=zae("trail",Apn,jpn),Cf={arc:Mpn,area:Upn,group:e0n,image:i0n,line:s0n,path:u0n,rect:f0n,rule:g0n,shape:y0n,symbol:v0n,text:C0n,trail:I0n};function ZQ(e,t,n){var r=Cf[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Io),e,n)}var TEe={mark:null};function bUe(e,t,n){var r=Cf[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(TEe.mark=e,l=TEe),c=ZQ(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Io,o)for(a=0,u=s.length;a<u;++a)t.union(ZQ(s[a],i,n));return e.bounds=t}const k0n=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function _Ue(e,t){return JSON.stringify(e,k0n,t)}function wUe(e){const t=typeof e=="string"?JSON.parse(e):e;return xUe(t)}function xUe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&xUe(n[i]);return t&&bUe(e),e}class EUe{constructor(t){arguments.length?this.root=wUe(t):(this.root=SEe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new CB(this.root)])}toJSON(t){return _Ue(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=SEe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function SEe(e,t){const n={bounds:new Io,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Vy(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Xae(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function zo(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Vy(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function od(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function TUe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function OB(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function R0n(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Cf[i.marktype]).tip){for(o=OB(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Qae=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||lB(),this._tooltip=n||N0n}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Vy(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=R0n(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function N0n(e,t,n,r){e.element().setAttribute("title",r||"")}class x5{constructor(t){this._el=null,this._bgcolor=null,this._loader=new oUe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const P0n="keydown",D0n="keypress",O0n="keyup",SUe="dragenter",_O="dragleave",AUe="dragover",eJ="pointerdown",$0n="pointerup",IL="pointermove",wO="pointerout",CUe="pointerover",tJ="mousedown",L0n="mouseup",IUe="mousemove",kL="mouseout",kUe="mouseover",RL="click",M0n="dblclick",F0n="wheel",RUe="mousewheel",NL="touchstart",PL="touchmove",DL="touchend",B0n=[P0n,D0n,O0n,SUe,_O,AUe,eJ,$0n,IL,wO,CUe,tJ,L0n,IUe,kL,kUe,RL,M0n,F0n,RUe,NL,PL,DL],nJ=IL,q4=kL,rJ=RL;class E5 extends Qae{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=B0n,this.pointermove=CEe([IL,IUe],[CUe,kUe],[wO,kL]),this.dragover=CEe([AUe],[SUe],[_O]),this.pointerout=IEe([wO,kL]),this.dragleave=IEe([_O])}initialize(t,n,r){return this._canvas=t&&Xae(t,"canvas"),[RL,tJ,eJ,IL,wO,_O].forEach(i=>AEe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(RUe,t)}pointerdown(t){this._down=this._active,this.fire(eJ,t)}mousedown(t){this._down=this._active,this.fire(tJ,t)}click(t){this._down===this._active&&(this.fire(RL,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(NL,t,!0)}touchmove(t){this.fire(PL,t,!0)}touchend(t){this.fire(DL,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===rJ&&i&&i.href?this.handleHref(n,i,i.href):(t===nJ||t===q4)&&this.handleTooltip(n,i,t!==q4),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(AEe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=OB(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Cf[t.marktype].pick.call(this,o,t,n,r,i,s)}}const j0n=e=>e===NL||e===PL||e===DL?[NL,PL,DL]:[e];function AEe(e,t){j0n(t).forEach(n=>U0n(e,n))}function U0n(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function t4(e,t,n){t.forEach(r=>e.fire(r,n))}function CEe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?t4(this,e,r):((!i||!i.exit)&&t4(this,n,r),this._active=s,t4(this,t,r),t4(this,e,r))}}function IEe(e){return function(t){t4(this,e,t),this._active=null}}function z0n(){return typeof window<"u"&&window.devicePixelRatio||1}function V0n(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?z0n():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class OL extends x5{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Io,this._tempb=new Io}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:pv(1,1,this._options.type),t&&this._canvas&&(od(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)V0n(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Ke("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=H0n(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):q0n(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Cf[n.marktype];n.clip&&zpn(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const H0n=(e,t,n)=>new Io().set(0,0,t,n).translate(-e[0],-e[1]);function q0n(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class NUe extends Qae{constructor(t,n){super(t,n);const r=this;r._hrefHandler=EW(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=EW(r,(i,s)=>{r.handleTooltip(i,s,i.type!==q4)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(rJ,this._hrefHandler),i.removeEventListener(nJ,this._tooltipHandler),i.removeEventListener(q4,this._tooltipHandler)),this._svg=i=t&&Xae(t,"svg"),i&&(i.addEventListener(rJ,this._hrefHandler),i.addEventListener(nJ,this._tooltipHandler),i.addEventListener(q4,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:EW(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const EW=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},PUe="aria-hidden",Jae="aria-label",Zae="role",eue="aria-roledescription",DUe="graphics-object",tue="graphics-symbol",OUe=(e,t,n)=>({[Zae]:e,[eue]:t,[Jae]:n||void 0}),W0n=Xh(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),kEe={axis:{desc:"axis",caption:K0n},legend:{desc:"legend",caption:X0n},"title-text":{desc:"title",caption:e=>`Title text '${NEe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${NEe(e)}'`}},REe={ariaRole:Zae,ariaRoleDescription:eue,description:Jae};function $Ue(e,t){const n=t.aria===!1;if(e(PUe,n||void 0),n||t.description==null)for(const r in REe)e(REe[r],void 0);else{const r=t.mark.marktype;e(Jae,t.description),e(Zae,t.ariaRole||(r==="group"?DUe:tue)),e(eue,t.ariaRoleDescription||`${r} mark`)}}function LUe(e){return e.aria===!1?{[PUe]:!0}:W0n[e.role]?null:kEe[e.role]?Y0n(e,kEe[e.role]):G0n(e)}function G0n(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return OUe(n?DUe:tue,`${t} mark container`,e.description)}function Y0n(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return OUe(t.role||tue,t.desc,n.description||r(n))}catch{return null}}function NEe(e){return Pt(e.text).join(" ")}function K0n(e){const t=e.datum,n=e.orient,r=t.title?MUe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${jS(a)?"discrete":a} scale with ${Xje(o,s,e)}`}function X0n(e){const t=e.datum,n=t.title?MUe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return J0n(r)+(n?` titled '${n}'`:"")+` for ${Q0n(s)} with ${Xje(u,a,e)}`}function MUe(e){try{return Pt(Mr(e.items).items[0].text).join(" ")}catch{return null}}function Q0n(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Mr(e)}function J0n(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const FUe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Z0n=e=>FUe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function nue(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${Z0n(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=FUe(u),a),toString:()=>e};return a}const BUe=e=>jUe(nue(),e)+"";function jUe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):jUe(e,r)}return e.close()}const $L={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},LL={blend:"mix-blend-mode"},UUe={fill:"none","stroke-miterlimit":10},eI=0,PEe="http://www.w3.org/2000/xmlns/",jo=I6.xmlns;class rue extends x5{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=zo(t,0,"svg",jo),this._svg.setAttributeNS(PEe,"xmlns",jo),this._svg.setAttributeNS(PEe,"xmlns:xlink",I6["xmlns:xlink"]),this._svg.setAttribute("version",I6.version),this._svg.setAttribute("class","marks"),od(t,1),this._root=zo(this._svg,eI,"g",jo),Hy(this._root,UUe),od(this._svg,eI+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Hy(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=zo(t,eI,"rect",jo),Hy(r,{width:this._width,height:this._height,fill:n}));const i=BUe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),od(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Cf[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,DEe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,DEe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Cf[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=OEe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return od(c,0),n._svg;c.setAttribute("class",TUe(n));const f=LUe(n);for(const m in f)el(c,m,f[m]);l||el(c,"pointer-events",u),el(c,"clip-path",n.clip?Oae(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=OEe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&nmn(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Jh(n,p),od(c,h),c}_update(t,n,r){dg=n,bu=n.__values__,$Ue(W4,r),t.attr(W4,r,this);const i=imn[t.type];i&&i.call(this,t,n,r),dg&&this.style(dg,r)}style(t,n){if(n!=null){for(const r in $L){let i=r==="font"?w5(n):n[r];if(i===bu[r])continue;const s=$L[r];i==null?t.removeAttribute(s):(Nae(i)&&(i=Jje(i,this._defs.gradient,zUe())),t.setAttribute(s,i+"")),bu[r]=i}for(const r in LL)xO(t,LL[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=zo(t,eI+1,"defs",jo)),i=emn(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=zo(t,eI+1,"defs",jo)),i=tmn(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):od(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function DEe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function emn(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=zo(e,n++,"pattern",jo);Hy(o,{id:TL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=zo(o,0,"rect",jo),Hy(o,{width:1,height:1,fill:`url(${zUe()}#${t.id})`}),e=zo(e,n++,"radialGradient",jo),Hy(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=zo(e,n++,"linearGradient",jo),Hy(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=zo(e,r,"stop",jo),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return od(e,r),n}function tmn(e,t,n){let r;return e=zo(e,n,"clipPath",jo),e.setAttribute("id",t.id),t.path?(r=zo(e,0,"path",jo),r.setAttribute("d",t.path)):(r=zo(e,0,"rect",jo),Hy(r,{x:0,y:0,width:t.width,height:t.height})),od(e,1),n+1}function nmn(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Jh(n,o=>{i=e.mark(t,o,i,r),++s}),od(t,1+s)}function OEe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Vy(o,r,jo),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Vy(o,"path",jo);s.appendChild(a),a.__data__=e;const u=Vy(o,"g",jo);s.appendChild(u),u.__data__=e;const l=Vy(o,"path",jo);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||rmn(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function rmn(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let dg=null,bu=null;const imn={group(e,t,n){const r=dg=t.childNodes[2];bu=r.__values__,e.foreground(W4,n,this),bu=t.__values__,dg=t.childNodes[1],e.content(W4,n,this);const i=dg=t.childNodes[0];e.background(W4,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==bu.events&&(el(r,"pointer-events",s),el(i,"pointer-events",s),bu.events=s),n.strokeForeground&&n.stroke){const o=n.fill;el(r,"display",null),this.style(i,n),el(i,"stroke",null),o&&(n.fill=null),bu=r.__values__,this.style(r,n),o&&(n.fill=o),dg=null}else el(r,"display","none")},image(e,t,n){n.smooth===!1?(xO(t,"image-rendering","optimizeSpeed"),xO(t,"image-rendering","pixelated")):xO(t,"image-rendering",null)},text(e,t,n){const r=_5(n);let i,s,o,a;Qe(r)?(s=r.map(u=>Kv(n,u)),i=s.join(`
`),i!==bu.text&&(od(t,0),o=t.ownerDocument,a=Yv(n),s.forEach((u,l)=>{const c=Vy(o,"tspan",jo);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),bu.text=i)):(s=Kv(n,r),s!==bu.text&&(t.textContent=s,bu.text=s)),el(t,"font-family",w5(n)),el(t,"font-size",im(n)+"px"),el(t,"font-style",n.fontStyle),el(t,"font-variant",n.fontVariant),el(t,"font-weight",n.fontWeight)}};function W4(e,t,n){t!==bu[e]&&(n?smn(dg,e,t,n):el(dg,e,t),bu[e]=t)}function xO(e,t,n){n!==bu[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),bu[t]=n)}function Hy(e,t){for(const n in t)el(e,n,t[n])}function el(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function smn(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function zUe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class VUe extends x5{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=nue();n.open("svg",Gn({},I6,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",UUe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Cf[n.marktype],i=r.tag,s=[$Ue,r.attr];t.open("g",{class:TUe(n),"clip-path":n.clip?Oae(this,n,n.group):null},LUe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=_5(a);if(Qe(l)){const c={x:0,dy:Yv(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Kv(a,l[f])).close()}else t.text(Kv(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Jh(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Jh(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&omn(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:TL+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function omn(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=w5(t),e["font-size"]=im(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in $L){let a=t[o];const u=$L[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Nae(a)&&(a=Jje(a,i.gradient,"")),e[u]=a)}for(const o in LL){const a=t[o];a!=null&&(s=s||[],s.push(`${LL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const ph={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function amn(e){ph.svgMarkTypes=e.svgMarkTypes??["text"],ph.svgOnTop=e.svgOnTop??!0,ph.debug=e.debug??!1}class iJ extends x5{constructor(t){super(t),this._svgRenderer=new rue(t),this._canvasRenderer=new OL(t)}initialize(t,n,r,i,s){this._root_el=zo(t,0,"div");const o=zo(this._root_el,0,"div"),a=zo(this._root_el,1,"div");return this._root_el.style.position="relative",ph.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=ph.svgOnTop?a:o,this._canvasEl=ph.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return ph.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!ph.svgMarkTypes.includes(s));this._svgRenderer.render(t,ph.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return ph.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class HUe extends E5{constructor(t,n){super(t,n)}initialize(t,n,r){const i=zo(zo(t,0,"div"),ph.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const qUe="canvas",WUe="hybrid",GUe="png",YUe="svg",KUe="none",qy={Canvas:qUe,PNG:GUe,SVG:YUe,Hybrid:WUe,None:KUe},nx={};nx[qUe]=nx[GUe]={renderer:OL,headless:OL,handler:E5};nx[YUe]={renderer:rue,headless:VUe,handler:NUe};nx[WUe]={renderer:iJ,headless:iJ,handler:HUe};nx[KUe]={};function $B(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(nx[e]=t,this):nx[e]}function XUe(e,t,n){const r=[],i=new Io().union(t),s=e.marktype;return s?QUe(e,i,n,r):s==="group"?JUe(e,i,n,r):Ke("Intersect scene must be mark node or group item.")}function QUe(e,t,n,r){if(umn(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)JUe(i[a],t,n,r);else for(const u=Cf[s].isect;a<o;++a){const l=i[a];ZUe(l,t,u)&&r.push(l)}}return r}function umn(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function JUe(e,t,n,r){n&&n(e.mark)&&ZUe(e,t,Cf.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)QUe(i[u],t,n,r);t.translate(o,a)}return r}function ZUe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const TW=new Io;function eze(e){const t=e.clip;if(Yn(t))t(v5(TW.clear()));else if(t)TW.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(TW)}const lmn=1e-9;function iue(e,t,n){return e===t?!0:n==="path"?tze(e,t):e instanceof Date&&t instanceof Date?+e==+t:Qr(e)&&Qr(t)?Math.abs(e-t)<=lmn:!e||!t||!Ot(e)&&!Ot(t)?e==t:cmn(e,t)}function tze(e,t){return iue(US(e),US(t))}function cmn(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!iue(e[i],t[i],i))return!1;return typeof e==typeof t}function fmn(){sUe(),$hn()}const HS="top",Th="left",Rh="right",Xv="bottom",dmn="top-left",hmn="top-right",pmn="bottom-left",mmn="bottom-right",sue="start",sJ="middle",il="end",gmn="x",ymn="y",LB="group",oue="axis",aue="title",vmn="frame",bmn="scope",uue="legend",nze="row-header",rze="row-footer",ize="row-title",sze="column-header",oze="column-footer",aze="column-title",_mn="padding",wmn="symbol",uze="fit",lze="fit-x",cze="fit-y",xmn="pad",lue="none",M8="all",oJ="each",cue="flush",Wy="column",Gy="row";function fze(e){He.call(this,null,e)}At(fze,He,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Cf[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=F8(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===LB||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(F8(l,o))),r.role){case oue:case uue:case aue:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(F8(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(F8(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return eze(r),t.modifies("bounds")}});function F8(e,t,n){return t(e.bounds.clear(),e,n)}const $Ee=":vega_identifier:";function fue(e){He.call(this,0,e)}fue.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};At(fue,He,{transform(e,t){const n=Emn(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Emn(e){return e._signals[$Ee]||(e._signals[$Ee]=e.add(0))}function dze(e){He.call(this,null,e)}At(dze,He,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Tmn(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===LB?CB:AB;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Tmn(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function hze(e){He.call(this,null,e)}const LEe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!pze(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},pze=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),MEe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(pze(i,s=e[n].bounds,t))return!0},Smn=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Amn=(e,t,n)=>{var r=e.range(),i=new Io;return t===HS||t===Xv?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},FEe=e=>(e.forEach(t=>t.opacity=1),e),BEe=(e,t)=>e.reflow(t.modified()).modifies("opacity");At(hze,He,{transform(e,t){const n=LEe[e.method]||LEe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(FEe(i),t=BEe(t,e)),t;if(i=i.filter(Smn),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=FEe(i),t=BEe(t,e),s.length>=3&&MEe(s,r)){do s=n(s,r);while(s.length>=3&&MEe(s,r));s.length<3&&!Mr(i).opacity&&(s.length>1&&(Mr(s).opacity=0),Mr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Amn(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function mze(e){He.call(this,null,e)}At(mze,He,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const yu=new Io;function rT(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Cmn(e){var t=e.items[0].orient;return t===Th||t===Rh}function Imn(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function kmn(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=Imn(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Gae(p),v=0,b=0,w,x;switch(yu.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case HS:v=f||0,b=-c,x=Math.max(d,Math.min(h,-g.y1)),g.add(0,-x).add(l,0),p&&B8(e,p,x,m,y,0,-1,g);break;case Th:v=-c,b=f||0,x=Math.max(d,Math.min(h,-g.x1)),g.add(-x,0).add(0,l),p&&B8(e,p,x,m,y,1,-1,g);break;case Rh:v=n+c,b=f||0,x=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(x,l),p&&B8(e,p,x,m,y,1,1,g);break;case Xv:v=f||0,b=r+c,x=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,x),p&&B8(e,p,x,m,0,0,1,g);break;default:v=i.x,b=i.y}return A1(g.translate(v,b),i),rT(i,"x",v+o)|rT(i,"y",b+o)&&(i.bounds=yu,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function B8(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const jEe=(e,t)=>Math.floor(Math.min(e,t)),UEe=(e,t)=>Math.ceil(Math.max(e,t));function Rmn(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===LB)switch(i.role){case oue:case uue:case aue:break;case nze:o.rowheaders.push(...s);break;case rze:o.rowfooters.push(...s);break;case sze:o.colheaders.push(...s);break;case oze:o.colfooters.push(...s);break;case ize:o.rowtitle=s[0];break;case aze:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function Nmn(e){return new Io().set(0,0,e.width||0,e.height||0)}function Pmn(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function ws(e,t,n){const r=Ot(e)?e[t]:e;return r??(n!==void 0?n:0)}function zEe(e){return e<0?Math.ceil(-e):0}function gze(e,t,n){var r=!n.nodirty,i=n.bounds===cue?Nmn:Pmn,s=yu.set(0,0,0,0),o=ws(n.align,Wy),a=ws(n.align,Gy),u=ws(n.padding,Wy),l=ws(n.padding,Gy),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),x=Array(d),S,A,C,N,k,D,L,O,B,q,H;for(A=0;A<c;++A)p[A]=0;for(A=0;A<f;++A)y[A]=0;for(A=0;A<d;++A)D=t[A],k=x[A]=i(D),D.x=D.x||0,b[A]=0,D.y=D.y||0,w[A]=0,C=A%c,N=~~(A/c),m=Math.max(m,L=Math.ceil(k.x2)),v=Math.max(v,O=Math.ceil(k.y2)),p[C]=Math.max(p[C],L),y[N]=Math.max(y[N],O),h[A]=u+zEe(k.x1),g[A]=l+zEe(k.y1),r&&e.dirty(t[A]);for(A=0;A<d;++A)A%c===0&&(h[A]=0),A<c&&(g[A]=0);if(o===oJ)for(C=1;C<c;++C){for(H=0,A=C;A<d;A+=c)H<h[A]&&(H=h[A]);for(A=C;A<d;A+=c)h[A]=H+p[C-1]}else if(o===M8){for(H=0,A=0;A<d;++A)A%c&&H<h[A]&&(H=h[A]);for(A=0;A<d;++A)A%c&&(h[A]=H+m)}else for(o=!1,C=1;C<c;++C)for(A=C;A<d;A+=c)h[A]+=p[C-1];if(a===oJ)for(N=1;N<f;++N){for(H=0,A=N*c,S=A+c;A<S;++A)H<g[A]&&(H=g[A]);for(A=N*c;A<S;++A)g[A]=H+y[N-1]}else if(a===M8){for(H=0,A=c;A<d;++A)H<g[A]&&(H=g[A]);for(A=c;A<d;++A)g[A]=H+v}else for(a=!1,N=1;N<f;++N)for(A=N*c,S=A+c;A<S;++A)g[A]+=y[N-1];for(B=0,A=0;A<d;++A)B=h[A]+(A%c?B:0),b[A]+=B-t[A].x;for(C=0;C<c;++C)for(q=0,A=C;A<d;A+=c)q+=g[A],w[A]+=q-t[A].y;if(o&&ws(n.center,Wy)&&f>1)for(A=0;A<d;++A)k=o===M8?m:p[A%c],B=k-x[A].x2-t[A].x-b[A],B>0&&(b[A]+=B/2);if(a&&ws(n.center,Gy)&&c!==1)for(A=0;A<d;++A)k=a===M8?v:y[~~(A/c)],q=k-x[A].y2-t[A].y-w[A],q>0&&(w[A]+=q/2);for(A=0;A<d;++A)s.union(x[A].translate(b[A],w[A]));switch(B=ws(n.anchor,gmn),q=ws(n.anchor,ymn),ws(n.anchor,Wy)){case il:B-=s.width();break;case sJ:B-=s.width()/2}switch(ws(n.anchor,Gy)){case il:q-=s.height();break;case sJ:q-=s.height()/2}for(B=Math.round(B),q=Math.round(q),s.clear(),A=0;A<d;++A)t[A].mark.bounds.clear();for(A=0;A<d;++A)D=t[A],D.x+=b[A]+=B,D.y+=w[A]+=q,s.union(D.mark.bounds.union(D.bounds.translate(b[A],w[A]))),r&&e.dirty(D);return s}function Dmn(e,t,n){var r=Rmn(t),i=r.marks,s=n.bounds===cue?Omn:$mn,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=gze(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=ws(n.headerBand,Gy,null),c=j8(e,r.rowheaders,i,a,u,-ws(o,"rowHeader"),jEe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=ws(n.headerBand,Wy,null),f=j8(e,r.colheaders,i,a,a,-ws(o,"columnHeader"),jEe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=ws(n.footerBand,Gy,null),d=j8(e,r.rowfooters,i,a,u,ws(o,"rowFooter"),UEe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=ws(n.footerBand,Wy,null),h=j8(e,r.colfooters,i,a,a,ws(o,"columnFooter"),UEe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=ws(n.titleAnchor,Gy),g=ws(o,"rowTitle"),g=p===il?d+g:c-g,m=ws(n.titleBand,Gy,.5),VEe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=ws(n.titleAnchor,Wy),g=ws(o,"columnTitle"),g=p===il?h+g:f-g,m=ws(n.titleBand,Wy,.5),VEe(e,r.coltitle,g,1,y,m))}function Omn(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function $mn(e,t){return e.bounds[t]}function j8(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,x,S,A,C,N;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(S=t[v],x=S.mark.bounds,b=y;b>=0&&(A=n[b])==null;b-=d);a?(C=h==null?A.x:Math.round(A.bounds.x1+h*A.bounds.width()),N=m):(C=m,N=h==null?A.y:Math.round(A.bounds.y1+h*A.bounds.height())),x.union(S.bounds.translate(C-(S.x||0),N-(S.y||0))),S.x=C,S.y=N,e.dirty(S),g=o(g,x[l])}return g}function VEe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Lmn(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Mmn(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Fmn(e,t,n,r,i,s,o){const a=Lmn(n,t),u=Mmn(e,a("offset",0)),l=a("anchor",sue),c=l===il?1:l===sJ?.5:0,f={align:oJ,bounds:a("bounds",cue),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Th:f.anchor={x:Math.floor(r.x1)-u,column:il,y:c*(o||r.height()+2*r.y1),row:l};break;case Rh:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case HS:f.anchor={y:Math.floor(i.y1)-u,row:il,x:c*(s||i.width()+2*i.x1),column:l};break;case Xv:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case dmn:f.anchor={x:u,y:u};break;case hmn:f.anchor={x:s-u,y:u,column:il};break;case pmn:f.anchor={x:u,y:o-u,row:il};break;case mmn:f.anchor={x:s-u,y:o-u,column:il,row:il};break}return f}function Bmn(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Umn(e,n,n.items[0].items[0]),s=jmn(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===wmn&&zmn(n.items[0].items[0].items[0].items),i!==lue&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,A1(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function jmn(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Umn(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&tI(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Th:i+=Math.ceil(o.bounds.width())+u;break;case Rh:case Xv:break;default:s+=o.bounds.height()+u}switch((i||s)&&tI(e,n,i,s),o.orient){case Th:c+=aE(t,n,o,a,1,1);break;case Rh:l+=aE(t,n,o,il,0,0)+u,c+=aE(t,n,o,a,1,1);break;case Xv:l+=aE(t,n,o,a,0,0),c+=aE(t,n,o,il,-1,0,1)+u;break;default:l+=aE(t,n,o,a,0,0)}(l||c)&&tI(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(tI(e,n,-l,0),tI(e,o,-l,0))}}function aE(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Gae(n);return Math.round(r===sue?f:r===il?d-h:.5*(c-h))}function tI(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function zmn(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Vmn(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Th||a===Rh?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==LB?a===Th?(p=i.y2,h=i.y1):a===Rh?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Th&&(p=r,h=0),b=u===sue?p:u===il?h:(p+h)/2,d&&d.text){switch(a){case HS:case Xv:v=f.bounds.height()+c;break;case Th:y=f.bounds.width()+c;break;case Rh:y=-f.bounds.width()-c;break}yu.clear().union(d.bounds),yu.translate(y-(d.x||0),v-(d.y||0)),rT(d,"x",y)|rT(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(yu),d.mark.bounds.clear().union(yu),e.dirty(d)),yu.clear().union(d.bounds)}else yu.clear();switch(yu.union(f.bounds),a){case HS:m=b,g=i.y1-yu.height()-l;break;case Th:m=i.x1-yu.width()-l,g=b;break;case Rh:m=i.x2+yu.width()+l,g=b;break;case Xv:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return rT(s,"x",m)|rT(s,"y",g)&&(yu.translate(m,g),e.dirty(s),s.bounds.clear().union(yu),t.bounds.clear().union(yu),e.dirty(s)),s.bounds}function yze(e){He.call(this,null,e)}At(yze,He,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Dmn(n,r,e.layout),qmn(n,r,e)}),Hmn(e.mark.group)?t.reflow():t}});function Hmn(e){return e&&e.mark.role!=="legend-entry"}function qmn(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Io().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case oue:h=Cmn(f)?a:u,h.union(kmn(e,f,i,s));break;case aue:c=f;break;case uue:l.push(Bmn(e,f));break;case vmn:case bmn:case nze:case rze:case ize:case sze:case oze:case aze:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Rh,d!==lue&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];gze(e,v,Fmn(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===uze||n.autosize.type===lze||n.autosize.type===cze))switch(y.orient){case Th:case Rh:o.add(v.x1,0).add(v.x2,0);break;case HS:case Xv:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(Vmn(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),Wmn(e,t,o,n)}function Wmn(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===_mn){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===lue?(l=0,f=0,u=o,c=a):s===uze?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===lze?(u=Math.max(0,o-l-d),a=c+f+h):s===cze?(o=u+l+d,c=Math.max(0,a-f-h)):s===xmn&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const Gmn=Object.freeze(Object.defineProperty({__proto__:null,bound:fze,identifier:fue,mark:dze,overlap:hze,render:mze,viewlayout:yze},Symbol.toStringTag,{value:"Module"}));function vze(e){He.call(this,null,e)}At(vze,He,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=kae(s,o,e.minstep),u=e.format||qje(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?Hje(s,e.values,a):Rae(s,a);return i&&(r.rem=i),i=l.map((c,f)=>pi({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(pi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function bze(e){He.call(this,null,e)}function Ymn(){return pi({})}function Kmn(e){const t=pC().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}At(bze,He,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Ymn,s=e.key||nn,o=this.value;return Qe(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Ke("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Kmn(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function _ze(e){He.call(this,null,e)}At(_ze,He,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Qe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||dy,u=i.enter||dy,l=i.exit||dy,c=(s&&!o?i[s]:a)||dy;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==dy&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==dy&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==dy){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function wze(e){He.call(this,[],e)}At(wze,He,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||pO,o=e.scale,a=+e.limit,u=kae(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===pO,c=e.format||Kje(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||Yje(o,u),d,h,p,m,g;return i&&(r.rem=i),s===pO?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,Yn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Fu(m=p||8),i=i.map((y,v)=>pi({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(pi({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===xhn?(d=o.domain(),h=Uje(o,d[0],Mr(d)),f.length<3&&!e.values&&d[0]!==Mr(d)&&(f=[d[0],Mr(d)]),i=f.map((y,v)=>pi({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=Dhn(o),i=f.map((y,v)=>pi({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Xmn=e=>e.source.x,Qmn=e=>e.source.y,Jmn=e=>e.target.x,Zmn=e=>e.target.y;function due(e){He.call(this,{},e)}due.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};At(due,He,{transform(e,t){var n=e.sourceX||Xmn,r=e.sourceY||Qmn,i=e.targetX||Jmn,s=e.targetY||Zmn,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=HEe.get(u+"-"+a)||HEe.get(u);return l||Ke("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const xze=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,egn=(e,t,n,r)=>xze(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Eze=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},tgn=(e,t,n,r)=>Eze(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Tze=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},ngn=(e,t,n,r)=>Tze(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),rgn=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,ign=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,sgn=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},ogn=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},agn=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},ugn=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},HEe=pC({line:xze,"line-radial":egn,arc:Eze,"arc-radial":tgn,curve:Tze,"curve-radial":ngn,"orthogonal-horizontal":rgn,"orthogonal-vertical":ign,"orthogonal-radial":sgn,"diagonal-horizontal":ogn,"diagonal-vertical":agn,"diagonal-radial":ugn});function hue(e){He.call(this,null,e)}hue.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};At(hue,He,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||fC,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/UPe(l),h=ac(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const lgn=5;function cgn(e){const t=e.type;return!e.bins&&(t===FS||t===f5||t===d5)}function Sze(e){return Aae(e)&&e!==w0}const fgn=Xh(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Aze(e){He.call(this,null,e),this.modified(!0)}At(Aze,He,{transform(e,t){var n=t.dataflow,r=this.value,i=dgn(e);(!r||i!==r.type)&&(this.value=r=ii(i)());for(i in e)if(!fgn[i]){if(i==="padding"&&Sze(r.type))continue;Yn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return vgn(r,e,ygn(r,e,pgn(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function dgn(e){var t=e.type,n="",r;return t===w0?w0+"-"+FS:(hgn(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?w0+"-":r===3?vC+"-":""),(n+t||FS).toLowerCase())}function hgn(e){const t=e.type;return Aae(t)&&t!==ex&&t!==tx&&(e.scheme||e.range&&e.range.length&&e.range.every(Dt))}function pgn(e,t,n){const r=mgn(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&cgn(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return Sze(s)&&t.padding&&i[0]!==Mr(i)&&(i=ggn(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(Cze(s,i,n)),s===xae&&e.unknown(t.domainImplicit?fX:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&kae(e,t.nice)||null),i.length}function mgn(e,t,n){return t?(e.domain(Cze(e.type,t,n)),t.length):-1}function ggn(e,t,n,r,i,s){var o=Math.abs(Mr(n)-n[0]),a=o/(o-2*r),u=e===Zg?moe(t,null,a):e===d5?_L(t,null,a,.5):e===f5?_L(t,null,a,i||1):e===wB?goe(t,null,a,s||1):poe(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function Cze(e,t,n){if(Lje(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Et(t))}return t}function ygn(e,t,n){let r=t.bins;if(r&&!Qe(r)){const i=e.domain(),s=i[0],o=Mr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Ke("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=ac(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Eae&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function vgn(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=bgn(r,t,n);else if(t.scheme&&(s=_gn(r,t,n),Yn(s))){if(e.interpolator)return e.interpolator(s);Ke(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&Mje(r))return e.interpolator(TB(aJ(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Cae(t.interpolate,t.interpolateGamma)):Yn(e.round)?e.round(i):Yn(e.rangeRound)&&e.interpolate(i?DR:p1),s&&e.range(aJ(s,t.reverse))}function bgn(e,t,n){e!==Rje&&e!==WQ&&Ke("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===WQ?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*wae(n,i,r)]}function _gn(e,t,n){var r=t.schemeExtent,i,s;return Qe(t.scheme)?s=TB(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Iae(i),s||Ke(`Unrecognized scheme name: ${t.scheme}`)),n=e===EB?n+1:e===Eae?n-1:e===BS||e===xB?+t.schemeCount||lgn:n,Mje(e)?qEe(s,r,t.reverse):Yn(s)?jje(qEe(s,r),n):e===xae?s:s.slice(0,n)}function qEe(e,t,n){return Yn(e)&&(t||n)?Bje(e,aJ(t||[0,1],n)):e}function aJ(e,t){return t?e.slice().reverse():e}function Ize(e){He.call(this,null,e)}At(Ize,He,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e2(e.sort)),this.modified(n),t}});const WEe="zero",kze="center",Rze="normalize",Nze=["y0","y1"];function pue(e){He.call(this,null,e)}pue.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:WEe,values:[WEe,kze,Rze]},{name:"as",type:"string",array:!0,length:2,default:Nze}]};At(pue,He,{transform(e,t){var n=e.as||Nze,r=n[0],i=n[1],s=e2(e.sort),o=e.field||fC,a=e.offset===kze?wgn:e.offset===Rze?xgn:Egn,u,l,c,f;for(u=Tgn(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function wgn(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function xgn(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function Egn(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function Tgn(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const Sgn=Object.freeze(Object.defineProperty({__proto__:null,axisticks:vze,datajoin:bze,encode:_ze,legendentries:wze,linkpath:due,pie:hue,scale:Aze,sortitems:Ize,stack:pue},Symbol.toStringTag,{value:"Module"}));var Agn=Math.abs,uJ=Math.cos,ML=Math.sin,Cgn=1e-6,Pze=Math.PI,lJ=Pze/2,GEe=Ign(2);function YEe(e){return e>1?lJ:e<-1?-lJ:Math.asin(e)}function Ign(e){return e>0?Math.sqrt(e):0}function kgn(e,t){var n=e*ML(t),r=30,i;do t-=i=(t+ML(t)-n)/(1+uJ(t));while(Agn(i)>Cgn&&--r>0);return t/2}function Rgn(e,t,n){function r(i,s){return[e*i*uJ(s=kgn(n,s)),t*ML(s)]}return r.invert=function(i,s){return s=YEe(s/t),[i/(e*uJ(s)),YEe((2*s+ML(2*s))/n)]},r}var Ngn=Rgn(GEe/lJ,GEe,Pze);function Pgn(){return Z0(Ngn).scale(169.529)}const Dgn=xDe(),cJ=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Ogn(e,t){return function n(){const r=t();return r.type=e,r.path=xDe().projection(r),r.copy=r.copy||function(){const i=n();return cJ.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},Oje(r)}}function mue(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(FL[e]=Ogn(e,t),this):FL[e]||null}function Dze(e){return e&&e.path||Dgn}const FL={albers:TDe,albersusa:R6t,azimuthalequalarea:N6t,azimuthalequidistant:P6t,conicconformal:$6t,conicequalarea:w9,conicequidistant:F6t,equalEarth:j6t,equirectangular:L6t,gnomonic:U6t,identity:z6t,mercator:D6t,mollweide:Pgn,naturalEarth1:V6t,orthographic:H6t,stereographic:q6t,transversemercator:W6t};for(const e in FL)mue(e,FL[e]);function $gn(){}const Lm=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Oze(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),Lgn(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(Mgn((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Lm[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,Lm[m|g<<1].forEach(b);for(Lm[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Lm[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Lm[m|g<<1|y<<2|v<<3].forEach(b);Lm[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,Lm[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Lm[y<<2|v<<3].forEach(b);Lm[y<<3].forEach(b);function b(w){var x=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],A=o(x),C=o(S),N,k;(N=d[A])?(k=f[C])?(delete d[N.end],delete f[k.start],N===k?(N.ring.push(S),c(N.ring)):f[N.start]=d[k.end]={start:N.start,end:k.end,ring:N.ring.concat(k.ring)}):(delete d[N.end],N.ring.push(S),d[N.end=C]=N):(N=f[C])?(k=d[A])?(delete f[N.start],delete d[k.end],N===k?(N.ring.push(S),c(N.ring)):f[k.start]=d[N.end]={start:k.start,end:N.end,ring:k.ring.concat(N.ring)}):(delete f[N.start],N.ring.unshift(x),f[N.start=A]=N):f[A]=d[C]={start:A,end:C,ring:[x,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Ke("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:$gn,r):n===a},r}function Lgn(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Mgn(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Fgn(e,t[n]))return i;return 0}function Fgn(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Bgn(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Bgn(e,t,n){var r;return jgn(e,t,n)&&Ugn(e[r=+(e[0]===t[0])],n[r],t[r])}function jgn(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Ugn(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function $ze(e,t,n){return function(r){var i=B0(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?Rv(s,o,e):a/(e+1);return ac(s+u,o,u)}}function gue(e){He.call(this,null,e)}gue.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};At(gue,He,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Mu,s=Oze().smooth(e.smooth!==!1),o=e.thresholds||zgn(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Qe(o)?o:o(c.values));Vgn(f,c,l,e),f.forEach(d=>{u.push(dB(l,pi(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function zgn(e,t,n){const r=$ze(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>xg(t(i).values)))}function Vgn(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Yn(i)&&(i=i(n,r)),Yn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Qr(i)?i:i[0])||1,a=(Qr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(Lze(t,o,a,u,l))}function Lze(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function KEe(e,t,n){const r=e>=0?e:$oe(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function SW(e){return Yn(e)?e:Fu(+e)}function Mze(){var e=u=>u[0],t=u=>u[1],n=fC,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=KEe(r[0],u,e)>>o,f=KEe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const x=d+(+e(w)>>o),S=h+(+t(w)>>o);x>=0&&x<p&&S>=0&&S<m&&(g[x+S*p]+=+n(w))}),c>0&&f>0?(uE(p,m,g,y,c),lE(p,m,y,g,f),uE(p,m,g,y,c),lE(p,m,y,g,f),uE(p,m,g,y,c),lE(p,m,y,g,f)):c>0?(uE(p,m,g,y,c),uE(p,m,y,g,c),uE(p,m,g,y,c),v=y):f>0&&(lE(p,m,g,y,f),lE(p,m,y,g,f),lE(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/UPe(v);for(let w=0,x=p*m;w<x;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=SW(u),a):e},a.y=function(u){return arguments.length?(t=SW(u),a):t},a.weight=function(u){return arguments.length?(n=SW(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Ke("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Ke("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Pt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Ke("invalid bandwidth"),r=u,a):r},a}function uE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function lE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function yue(e){He.call(this,null,e)}yue.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Hgn=["x","y","weight","size","cellSize","bandwidth"];function Fze(e,t){return Hgn.forEach(n=>t[n]!=null?e[n](t[n]):0),e}At(yue,He,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=qgn(r,e.groupby),s=(e.groupby||[]).map(Xs),o=Fze(Mze(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>pi(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function qgn(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function vue(e){He.call(this,null,e)}vue.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};At(vue,He,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=Oze().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||$ze(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=Fze(Mze(),e)(i,!0),u=Lze(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Qe(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(pi),n}});const fJ="Feature",bue="FeatureCollection",Wgn="MultiPoint";function _ue(e){He.call(this,null,e)}_ue.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};At(_ue,He,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Mu,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Ru(a))||s&&t.modified(Ru(s))||o&&t.modified(Ru(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:fJ,geometry:{type:Wgn,coordinates:r}})),this.value={type:bue,features:n}}});function wue(e){He.call(this,null,e)}wue.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};At(wue,He,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Mu,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=Dze(e.projection),n.materialize().reflow()):o=i===Mu||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Ggn(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function Ggn(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function xue(e){He.call(this,null,e)}xue.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};At(xue,He,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Eue(e){He.call(this,null,e)}Eue.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};At(Eue,He,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=Ygn(Dze(e.projection),e.field||xd("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function Ygn(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Tue(e){He.call(this,[],e),this.generator=l6t()}Tue.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};At(Tue,He,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Yn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(FBe(n[0],i)):t.add.push(pi(i)),n[0]=i,t}});function Sue(e){He.call(this,null,e)}Sue.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};At(Sue,He,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Mu,s=Xgn(e.opacity,e),o=Kgn(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?xg(n.map(l=>xg(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Gn({},l,u);r||(f.$max=xg(c.values||[])),l[a]=Qgn(c,f,o.dep?o:Fu(o(f)),s.dep?s:Fu(s(f)))}),t.reflow(!0).modifies(a)}});function Kgn(e,t){let n;return Yn(e)?(n=r=>Nv(e(r,t)),n.dep=Bze(e)):n=Fu(Nv(e||"#888")),n}function Xgn(e,t){let n;return Yn(e)?(n=r=>e(r,t),n.dep=Bze(e)):e?n=Fu(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function Bze(e){if(!Yn(e))return!1;const t=Xh(Ru(e));return t.$x||t.$y||t.$value||t.$max}function Qgn(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Ny,d=pv(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function jze(e){He.call(this,null,e),this.modified(!0)}At(jze,He,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Zgn(e.type),cJ.forEach(r=>{e[r]!=null&&XEe(n,r,e[r])})):cJ.forEach(r=>{e.modified(r)&&XEe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Jgn(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Jgn(e,t){const n=e1n(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Zgn(e){const t=mue((e||"mercator").toLowerCase());return t||Ke("Unrecognized projection type: "+e),t()}function XEe(e,t,n){Yn(e[t])&&e[t](n)}function e1n(e){return e=Pt(e),e.length===1?e[0]:{type:bue,features:e.reduce((t,n)=>t.concat(t1n(n)),[])}}function t1n(e){return e.type===bue?e.features:Pt(e).filter(t=>t!=null).map(t=>t.type===fJ?t:{type:fJ,geometry:t})}const n1n=Object.freeze(Object.defineProperty({__proto__:null,contour:vue,geojson:_ue,geopath:wue,geopoint:xue,geoshape:Eue,graticule:Tue,heatmap:Sue,isocontour:gue,kde2d:yue,projection:jze},Symbol.toStringTag,{value:"Module"})),QEe={center:Z4t,collide:vkt,nbody:kkt,link:_kt,x:Rkt,y:Nkt},n4="forces",dJ=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],r1n=["static","iterations"],Uze=["x","y","vx","vy"];function Aue(e){He.call(this,null,e)}Aue.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Uze}]};At(Aue,He,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(dJ),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&zze(n,e,0,t)):(this.value=n=s1n(t.source,e),n.on("tick",i1n(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(r1n)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==n4||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Uze)}});function i1n(e,t){return()=>e.touch(t).run()}function s1n(e,t){const n=Ikt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),zze(n,t,!0).on("end",()=>s=!0)}function zze(e,t,n,r){var i=Pt(t.forces),s,o,a,u;for(s=0,o=dJ.length;s<o;++s)a=dJ[s],a!==n4&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=n4+s,a=n||t.modified(n4,s)?a1n(i[s]):r&&o1n(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(n4+s,null);return e.numForces=i.length,e}function o1n(e,t){var n,r;for(n in e)if(Yn(r=e[n])&&t.modified(Ru(r)))return 1;return 0}function a1n(e){var t,n;sn(QEe,e.force)||Ke("Unrecognized force: "+e.force),t=QEe[e.force]();for(n in e)Yn(t[n])&&u1n(t[n],e[n],e);return t}function u1n(e,t,n){e(Yn(t)?r=>t(r,n):t)}const l1n=Object.freeze(Object.defineProperty({__proto__:null,force:Aue},Symbol.toStringTag,{value:"Module"}));function hJ(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Cue(e){He.call(this,null,e)}Cue.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const c1n=e=>e.values;At(Cue,He,{transform(e,t){t.source||Ke("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&fB(o.data)&&i.rem.push(o.data)}),this.value=s=iF({values:Pt(e.keys).reduce((o,a)=>(o.key(a),o),f1n()).entries(i.source)},c1n),n&&s.each(o=>{o.children&&(o=pi(o.data),i.add.push(o),i.source.push(o))}),hJ(s,nn,nn)),i.source.root=s,i}});function f1n(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function C1(e){He.call(this,null,e)}const d1n=(e,t)=>e.parent===t.parent?1:2;At(C1,He,{transform(e,t){(!t.source||!t.source.root)&&Ke(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(e2(e.sort,o=>o.data)),h1n(n,this.params,e),n.separation&&n.separation(e.separation!==!1?d1n:fC);try{this.value=n(i)}catch(o){Ke(o)}return i.each(o=>p1n(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function h1n(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function p1n(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const pJ=["x","y","r","depth","children"];function Iue(e){C1.call(this,e)}Iue.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:pJ.length,default:pJ}]};At(Iue,C1,{layout:BDe,params:["radius","size","padding"],fields:pJ});const mJ=["x0","y0","x1","y1","depth","children"];function kue(e){C1.call(this,e)}kue.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:mJ.length,default:mJ}]};At(kue,C1,{layout:NRt,params:["size","round","padding"],fields:mJ});function Rue(e){He.call(this,null,e)}Rue.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};At(Rue,He,{transform(e,t){t.source||Ke("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?hJ(jve().id(e.key).parentId(e.parentKey)(i.source),e.key,Ed):hJ(jve()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const JEe={tidy:URt,cluster:eRt},gJ=["x","y","depth","children"];function Nue(e){C1.call(this,e)}Nue.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:gJ.length,default:gJ}]};At(Nue,C1,{layout(e){const t=e||"tidy";if(sn(JEe,t))return JEe[t]();Ke("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:gJ});function Pue(e){He.call(this,[],e)}Pue.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};At(Pue,He,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Ke("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[nn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[nn(a)]&&s[nn(u)]&&i.add.push(pi({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[nn(o)]=1),n.forEach(o=>{(s[nn(o.source)]||s[nn(o.target)])&&i.mod.push(o)})),i}});const ZEe={binary:VRt,dice:MR,slice:sF,slicedice:HRt,squarify:VDe,resquarify:qRt},yJ=["x0","y0","x1","y1","depth","children"];function Due(e){C1.call(this,e)}Due.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:yJ.length,default:yJ}]};At(Due,C1,{layout(){const e=zRt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{sn(ZEe,t)?e.tile(ZEe[t]):Ke("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:yJ});const m1n=Object.freeze(Object.defineProperty({__proto__:null,nest:Cue,pack:Iue,partition:kue,stratify:Rue,tree:Nue,treelinks:Pue,treemap:Due},Symbol.toStringTag,{value:"Module"})),AW=4278190080;function g1n(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function y1n(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=pv(s,o).getContext("2d"),l=pv(s,o).getContext("2d"),c=a&&pv(s,o).getContext("2d");n.forEach(C=>EO(u,C,!1)),EO(l,t,!1),a&&EO(c,t,!0);const f=CW(u,s,o),d=CW(l,s,o),h=a&&CW(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,x,S,A;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,x=f[w]&AW,A=d[w]&AW,S=a&&h[w]&AW,(x||S||A)&&(v=e(g),b=e(y),!i&&(x||A)&&p.set(v,b),a&&(x||S)&&m.set(v,b));return[p,m]}function CW(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function EO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>EO(e,s.items,n))}):Cf[r].draw(e,{items:n?t.map(v1n):t})}function v1n(e){const t=dB(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Mm=5,Ju=31,k6=32,Ey=new Uint32Array(k6+1),vh=new Uint32Array(k6+1);vh[0]=0;Ey[0]=~vh[0];for(let e=1;e<=k6;++e)vh[e]=vh[e-1]<<1|1,Ey[e]=~vh[e];function b1n(e,t){const n=new Uint32Array(~~((e*t+k6)/k6));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Mm]&1<<(a&Ju)},set:(s,o)=>{const a=o*e+s;r(a>>>Mm,1<<(a&Ju))},clear:(s,o)=>{const a=o*e+s;i(a>>>Mm,~(1<<(a&Ju)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Mm,h=f>>>Mm,d===h){if(n[d]&Ey[c&Ju]&vh[(f&Ju)+1])return!0}else{if(n[d]&Ey[c&Ju]||n[h]&vh[(f&Ju)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Mm,d=c>>>Mm,f===d)r(f,Ey[l&Ju]&vh[(c&Ju)+1]);else for(r(f,Ey[l&Ju]),r(d,vh[(c&Ju)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Mm,d=c>>>Mm,f===d)i(f,vh[l&Ju]|Ey[(c&Ju)+1]);else for(i(f,vh[l&Ju]),i(d,Ey[(c&Ju)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function _1n(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>b1n(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function w1n(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=ff.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function BL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Yy(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function x1n(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!BL(p,m,d,h,i,s)&&!Yy(e,p,m,h,d,g,o,a)&&!Yy(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,Yy(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ff.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,x,S,A,C,N,k,D,L,O,B,q,H,G,K;for(let J=0;J<f;++J){for(v=c[J].x,w=c[J].y,b=c[J].x2===void 0?v:c[J].x2,x=c[J].y2===void 0?w:c[J].y2,v>b&&(K=v,v=b,b=K),w>x&&(K=w,w=x,x=K),k=e(v),L=e(b),D=~~((k+L)/2),O=e(w),q=e(x),B=~~((O+q)/2),C=D;C>=k;--C)for(N=B;N>=O;--N)G=u(C,N,p,h,d),G&&([l.x,l.y,p,m]=G);for(C=D;C<=L;++C)for(N=B;N<=q;++N)G=u(C,N,p,h,d),G&&([l.x,l.y,p,m]=G);!m&&!n&&(H=Math.abs(b-v+x-w),S=(v+b)/2,A=(w+x)/2,H>=y&&!BL(S,A,h,d,i,s)&&!Yy(e,S,A,d,h,d,o,null)&&(y=H,l.x=S,l.y=A,g=!0))}return m||g?(S=h/2,A=d/2,o.setRange(e(l.x-S),e(l.y-A),e(l.x+S),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const E1n=[-1,-1,1,1],T1n=[-1,1,-1,1];function S1n(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ff.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,x,S,A,C,N,k,D,L,O,B;for(let q=0;q<f;++q){for(b=c[q].x,x=c[q].y,w=c[q].x2===void 0?b:c[q].x2,S=c[q].y2===void 0?x:c[q].y2,p.push([e((b+w)/2),e((x+S)/2)]);p.length;)if([N,k]=p.pop(),!(o.get(N,k)||a.get(N,k)||u.get(N,k))){u.set(N,k);for(let H=0;H<4;++H)A=N+E1n[H],C=k+T1n[H],u.outOfBounds(A,C,A,C)||p.push([A,C]);if(A=e.invert(N),C=e.invert(k),D=m,L=s,!BL(A,C,h,d,i,s)&&!Yy(e,A,C,d,h,D,o,a)&&!Yy(e,A,C,d,h,d,o,null)){for(;L-D>=1;)O=(D+L)/2,Yy(e,A,C,d,h,O,o,a)?L=O:D=O;D>m&&(l.x=A,l.y=C,m=D,g=!0)}}!g&&!n&&(B=Math.abs(w-b+S-x),A=(b+w)/2,C=(x+S)/2,B>=v&&!BL(A,C,h,d,i,s)&&!Yy(e,A,C,d,h,d,o,null)&&(v=B,l.x=A,l.y=C,y=!0))}return g||y?(A=h/2,C=d/2,o.setRange(e(l.x-A),e(l.y-C),e(l.x+A),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const A1n=["right","center","left"],C1n=["bottom","middle","top"];function I1n(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,x,S,A,C,N,k,D;for(let L=0;L<u;++L){if(h=(n[L]&3)-1,p=(n[L]>>>2&3)-1,m=h===0&&p===0||r[L]<0,g=h&&p?Math.SQRT1_2:1,y=r[L]<0?-1:1,v=c[1+h]+r[L]*h*g,A=c[4+p]+y*f*p/2+r[L]*p*g,w=A-f/2,x=A+f/2,C=e(v),k=e(w),D=e(x),!d)if(eTe(C,C,k,D,o,a,v,v,w,x,c,m))d=ff.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,b=S+d/2,C=e(v),N=e(b),eTe(C,N,k,D,o,a,v,b,w,x,c,m))return l.x=h?h*y<0?b:v:S,l.y=p?p*y<0?x:w:A,l.align=A1n[h*y+1],l.baseline=C1n[p*y+1],o.setRange(C,k,N,D),!0}return!1}}function eTe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const IW=0,kW=4,RW=8,NW=0,PW=1,DW=2,k1n={"top-left":IW+NW,top:IW+PW,"top-right":IW+DW,left:kW+NW,middle:kW+PW,right:kW+DW,"bottom-left":RW+NW,bottom:RW+PW,"bottom-right":RW+DW},R1n={naive:w1n,"reduced-search":x1n,floodfill:S1n};function N1n(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=P1n(r,f),h=D1n(i,f),p=O1n(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=$1n(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,x=-1;const S=e.map(k=>{const D=v?ff.width(k,k.text):void 0;return w=Math.max(w,D),x=Math.max(x,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:D}});l=l===null||l===1/0?Math.max(w,x)+Math.max(...r):l;const A=_1n(t[0],t[1],l);let C;if(!b){n&&S.sort((L,O)=>n(L.datum,O.datum));let k=!1;for(let L=0;L<h.length&&!k;++L)k=h[L]===5||d[L]<0;const D=(p&&o||g)&&e.map(L=>L.datum);C=s.length||D?y1n(A,D||[],s,k,g):g1n(A,o&&S)}const N=g?R1n[c](A,C,o,u):I1n(A,C,h,d);return S.forEach(k=>k.opacity=+N(k)),S}function P1n(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function D1n(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=k1n[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function O1n(e){return e&&e.mark&&e.mark.marktype}function $1n(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const vJ=["x","y","opacity","align","baseline"],Vze=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Oue(e){He.call(this,null,e)}Oue.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Vze},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:vJ.length,default:vJ}]};At(Oue,He,{transform(e,t){function n(s){const o=e[s];return Yn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Ke("Size parameter should be specified as a [width, height] array.");const i=e.as||vJ;return N1n(t.materialize(t.SOURCE).source||[],e.size,e.sort,Pt(e.offset==null?1:e.offset),Pt(e.anchor||Vze),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const L1n=Object.freeze(Object.defineProperty({__proto__:null,label:Oue},Symbol.toStringTag,{value:"Module"}));function Hze(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function $ue(e){He.call(this,null,e)}$ue.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};At($ue,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Hze(r,e.groupby),s=(e.groupby||[]).map(Xs),o=s.length,a=e.as||[Xs(e.x),Xs(e.y)],u=[];i.forEach(l=>{nje(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(pi(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const bJ={constant:Goe,linear:Yoe,log:JBe,exp:ZBe,pow:eje,quad:Koe,poly:tje},M1n=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Lue(e){He.call(this,null,e)}Lue.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(bJ)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};At(Lue,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Hze(r,e.groupby),s=(e.groupby||[]).map(Xs),o=e.method||"linear",a=e.order==null?3:e.order,u=M1n(o,a),l=e.as||[Xs(e.x),Xs(e.y)],c=bJ[o],f=[];let d=e.extent;sn(bJ,o)||Ke("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(pi({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||B0(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(pi(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):bB(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const F1n=Object.freeze(Object.defineProperty({__proto__:null,loess:$ue,regression:Lue},Symbol.toStringTag,{value:"Module"}));function Mue(e){He.call(this,null,e)}Mue.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const B1n=[-1e5,-1e5,1e5,1e5];At(Mue,He,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:B1n;const s=this.value=Ore.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!U1n(u)?j1n(u):null}return t.reflow(e.modified()).modifies(n)}});function j1n(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function U1n(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const z1n=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Mue},Symbol.toStringTag,{value:"Module"}));var OW=Math.PI/180,r4=64,TO=2048;function V1n(){var e=[256,256],t,n,r,i,s,o,a,u=qze,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(pv()),m=K1n((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,A)=>A.size-S.size);++v<y;){var x=w[v];x.x=e[0]*(c()+.5)>>1,x.y=e[1]*(c()+.5)>>1,H1n(p,x,w,v),x.hasText&&h(m,x,g)&&(b.push(x),g?W1n(g,x):g=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=e[0]>>1,x.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(r4<<5)/m,p.height=TO/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),x=c()<.5?1:-1,S=-x,A,C,N;(A=w(S+=x))&&(C=~~A[0],N=~~A[1],!(Math.min(Math.abs(C),Math.abs(N))>=b));)if(m.x=y+C,m.y=v+N,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!q1n(m,p,e[0]))&&(!g||G1n(m,g))){for(var k=m.sprite,D=m.width>>5,L=e[0]>>5,O=m.x-(D<<4),B=O&127,q=32-B,H=m.y1-m.y0,G=(m.y+m.y0)*L+(O>>5),K,J=0;J<H;J++){K=0;for(var F=0;F<=D;F++)p[G+F]|=K<<q|(F<D?(K=k[J*D+F])>>>B:0);G+=L}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=d_(p),f):n},f.fontStyle=function(p){return arguments.length?(i=d_(p),f):i},f.fontWeight=function(p){return arguments.length?(s=d_(p),f):s},f.rotate=function(p){return arguments.length?(o=d_(p),f):o},f.text=function(p){return arguments.length?(t=d_(p),f):t},f.spiral=function(p){return arguments.length?(u=X1n[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=d_(p),f):r},f.padding=function(p){return arguments.length?(a=d_(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function H1n(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(r4<<5)/s,TO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*OW),g=Math.cos(t.rotate*OW),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=r4<<5&&(o=0,a+=u,u=0),a+d>=TO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*OW),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var x=i.getImageData(0,0,(r4<<5)/s,TO/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var A=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var N=f*p+(h>>5),k=x[(a+p)*(r4<<5)+(o+h)<<2]?1<<31-h%32:0;S[N]|=k,A|=k}A?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function q1n(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function W1n(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function G1n(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function qze(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Y1n(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function K1n(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function d_(e){return typeof e=="function"?e:function(){return e}}var X1n={archimedean:qze,rectangular:Y1n};const Wze=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Q1n=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Fue(e){He.call(this,V1n(),e)}Fue.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Wze}]};At(Fue,He,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Ke("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return Yn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Q1n.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||Wze;let a=e.fontSize||14,u;if(Yn(a)?u=e.fontSizeRange:a=Fu(a),u){const p=a,m=ii("sqrt")().domain(B0(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Sd).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const J1n=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Fue},Symbol.toStringTag,{value:"Module"})),Z1n=e=>new Uint8Array(e),eyn=e=>new Uint16Array(e),G4=e=>new Uint32Array(e);function tyn(){let e=8,t=[],n=G4(0),r=U8(0,e),i=U8(0,e);return{data:()=>t,seen:()=>n=nyn(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=U8(s,e,r),i=U8(s,e))}}}function nyn(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function U8(e,t,n){const r=(t<257?Z1n:t<65537?eyn:G4)(e);return n&&r.set(n),r}function tTe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function nTe(){let e=G4(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=G4(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=ryn(h,d),c)p=t,m=e,t=Array(c+f),e=G4(c+f),iyn(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[gAt(u,a[0],0,l),kv(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function ryn(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),bAt(e,t)}function iyn(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Bue(e){He.call(this,tyn(),e),this._indices=null,this._dims=null}Bue.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};At(Bue,He,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=nTe()),s.push(tTe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,x,S,A;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,x=0,S=v.length;x<S;++x)w[v[x]._index]=1;for(x=0;x<h;++x)A=r[x],(!o[x]||e.modified("fields",x)||t.modified(A.fields))&&(y=A.fname,(m=p[y])||(s[y]=g=nTe(),p[y]=m=g.insert(A,t.source,0)),o[x]=tTe(g,x,i[x]).onAdd(m,u));for(x=0,S=a.data().length;x<S;++x)b[x]||(l[x]!==u[x]?f.push(x):w[x]&&u[x]!==c&&d.push(x));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function jue(e){He.call(this,null,e)}jue.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};At(jue,He,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const syn=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Bue,resolvefilter:jue},Symbol.toStringTag,{value:"Module"})),oyn="RawCode",rx="Literal",ayn="Property",uyn="Identifier",lyn="ArrayExpression",cyn="BinaryExpression",Gze="CallExpression",fyn="ConditionalExpression",dyn="LogicalExpression",hyn="MemberExpression",pyn="ObjectExpression",myn="UnaryExpression";function fp(e){this.type=e}fp.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=gyn(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function gyn(e){switch(e.type){case lyn:return e.elements;case cyn:case dyn:return[e.left,e.right];case Gze:return[e.callee].concat(e.arguments);case fyn:return[e.test,e.consequent,e.alternate];case hyn:return[e.object,e.property];case pyn:return e.properties;case ayn:return[e.key,e.value];case myn:return[e.argument];case uyn:case rx:case oyn:default:return[]}}var sm,Gt,Ge,Pu,Ai,MB=1,T5=2,ix=3,Lb=4,FB=5,r2=6,Xl=7,S5=8,yyn=9;sm={};sm[MB]="Boolean";sm[T5]="<end>";sm[ix]="Identifier";sm[Lb]="Keyword";sm[FB]="Null";sm[r2]="Numeric";sm[Xl]="Punctuator";sm[S5]="String";sm[yyn]="RegularExpression";var vyn="ArrayExpression",byn="BinaryExpression",_yn="CallExpression",wyn="ConditionalExpression",Yze="Identifier",xyn="Literal",Eyn="LogicalExpression",Tyn="MemberExpression",Syn="ObjectExpression",Ayn="Property",Cyn="UnaryExpression",ma="Unexpected token %0",Iyn="Unexpected number",kyn="Unexpected string",Ryn="Unexpected identifier",Nyn="Unexpected reserved word",Pyn="Unexpected end of input",_J="Invalid regular expression",$W="Invalid regular expression: missing /",Kze="Octal literals are not allowed in strict mode.",Dyn="Duplicate data property in object literal not allowed in strict mode",za="ILLEGAL",R6="Disabled.",Oyn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),$yn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function BB(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ym(e){return e>=48&&e<=57}function Uue(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Y4(e){return"01234567".indexOf(e)>=0}function Lyn(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function N6(e){return e===10||e===13||e===8232||e===8233}function A5(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Oyn.test(String.fromCharCode(e))}function jL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&$yn.test(String.fromCharCode(e))}const Myn={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Xze(){for(;Ge<Pu;){const e=Gt.charCodeAt(Ge);if(Lyn(e)||N6(e))++Ge;else break}}function wJ(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Ge<Pu&&Uue(Gt[Ge])?(r=Gt[Ge++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ti({},ma,za);return String.fromCharCode(i)}function Fyn(){var e,t,n,r;for(e=Gt[Ge],t=0,e==="}"&&ti({},ma,za);Ge<Pu&&(e=Gt[Ge++],!!Uue(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ti({},ma,za),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Qze(){var e,t;for(e=Gt.charCodeAt(Ge++),t=String.fromCharCode(e),e===92&&(Gt.charCodeAt(Ge)!==117&&ti({},ma,za),++Ge,e=wJ("u"),(!e||e==="\\"||!A5(e.charCodeAt(0)))&&ti({},ma,za),t=e);Ge<Pu&&(e=Gt.charCodeAt(Ge),!!jL(e));)++Ge,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Gt.charCodeAt(Ge)!==117&&ti({},ma,za),++Ge,e=wJ("u"),(!e||e==="\\"||!jL(e.charCodeAt(0)))&&ti({},ma,za),t+=e);return t}function Byn(){var e,t;for(e=Ge++;Ge<Pu;){if(t=Gt.charCodeAt(Ge),t===92)return Ge=e,Qze();if(jL(t))++Ge;else break}return Gt.slice(e,Ge)}function jyn(){var e,t,n;return e=Ge,t=Gt.charCodeAt(Ge)===92?Qze():Byn(),t.length===1?n=ix:Myn.hasOwnProperty(t)?n=Lb:t==="null"?n=FB:t==="true"||t==="false"?n=MB:n=ix,{type:n,value:t,start:e,end:Ge}}function LW(){var e=Ge,t=Gt.charCodeAt(Ge),n,r=Gt[Ge],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ge,{type:Xl,value:String.fromCharCode(t),start:e,end:Ge};default:if(n=Gt.charCodeAt(Ge+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ge+=2,{type:Xl,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Ge};case 33:case 61:return Ge+=2,Gt.charCodeAt(Ge)===61&&++Ge,{type:Xl,value:Gt.slice(e,Ge),start:e,end:Ge}}}if(o=Gt.substr(Ge,4),o===">>>=")return Ge+=4,{type:Xl,value:o,start:e,end:Ge};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Ge+=3,{type:Xl,value:s,start:e,end:Ge};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Ge+=2,{type:Xl,value:i,start:e,end:Ge};if(i==="//"&&ti({},ma,za),"<>=!+-*%&|^/".indexOf(r)>=0)return++Ge,{type:Xl,value:r,start:e,end:Ge};ti({},ma,za)}function Uyn(e){let t="";for(;Ge<Pu&&Uue(Gt[Ge]);)t+=Gt[Ge++];return t.length===0&&ti({},ma,za),A5(Gt.charCodeAt(Ge))&&ti({},ma,za),{type:r2,value:parseInt("0x"+t,16),start:e,end:Ge}}function zyn(e){let t="0"+Gt[Ge++];for(;Ge<Pu&&Y4(Gt[Ge]);)t+=Gt[Ge++];return(A5(Gt.charCodeAt(Ge))||Ym(Gt.charCodeAt(Ge)))&&ti({},ma,za),{type:r2,value:parseInt(t,8),octal:!0,start:e,end:Ge}}function rTe(){var e,t,n;if(n=Gt[Ge],BB(Ym(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Ge,e="",n!=="."){if(e=Gt[Ge++],n=Gt[Ge],e==="0"){if(n==="x"||n==="X")return++Ge,Uyn(t);if(Y4(n))return zyn(t);n&&Ym(n.charCodeAt(0))&&ti({},ma,za)}for(;Ym(Gt.charCodeAt(Ge));)e+=Gt[Ge++];n=Gt[Ge]}if(n==="."){for(e+=Gt[Ge++];Ym(Gt.charCodeAt(Ge));)e+=Gt[Ge++];n=Gt[Ge]}if(n==="e"||n==="E")if(e+=Gt[Ge++],n=Gt[Ge],(n==="+"||n==="-")&&(e+=Gt[Ge++]),Ym(Gt.charCodeAt(Ge)))for(;Ym(Gt.charCodeAt(Ge));)e+=Gt[Ge++];else ti({},ma,za);return A5(Gt.charCodeAt(Ge))&&ti({},ma,za),{type:r2,value:parseFloat(e),start:t,end:Ge}}function Vyn(){var e="",t,n,r,i,s=!1;for(t=Gt[Ge],BB(t==="'"||t==='"',"String literal must starts with a quote"),n=Ge,++Ge;Ge<Pu;)if(r=Gt[Ge++],r===t){t="";break}else if(r==="\\")if(r=Gt[Ge++],!r||!N6(r.charCodeAt(0)))switch(r){case"u":case"x":Gt[Ge]==="{"?(++Ge,e+=Fyn()):e+=wJ(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Y4(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Ge<Pu&&Y4(Gt[Ge])&&(s=!0,i=i*8+"01234567".indexOf(Gt[Ge++]),"0123".indexOf(r)>=0&&Ge<Pu&&Y4(Gt[Ge])&&(i=i*8+"01234567".indexOf(Gt[Ge++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Gt[Ge]===`
`&&++Ge;else{if(N6(r.charCodeAt(0)))break;e+=r}return t!==""&&ti({},ma,za),{type:S5,value:e,octal:s,start:n,end:Ge}}function Hyn(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ti({},_J)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ti({},_J)}try{return new RegExp(e,t)}catch{return null}}function qyn(){var e,t,n,r,i;for(e=Gt[Ge],BB(e==="/","Regular expression literal must start with a slash"),t=Gt[Ge++],n=!1,r=!1;Ge<Pu;)if(e=Gt[Ge++],t+=e,e==="\\")e=Gt[Ge++],N6(e.charCodeAt(0))&&ti({},$W),t+=e;else if(N6(e.charCodeAt(0)))ti({},$W);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ti({},$W),i=t.substr(1,t.length-2),{value:i,literal:t}}function Wyn(){var e,t,n;for(t="",n="";Ge<Pu&&(e=Gt[Ge],!!jL(e.charCodeAt(0)));)++Ge,e==="\\"&&Ge<Pu?ti({},ma,za):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ti({},_J,n),{value:n,literal:t}}function Gyn(){var e,t,n,r;return Ai=null,Xze(),e=Ge,t=qyn(),n=Wyn(),r=Hyn(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ge}}function Yyn(e){return e.type===ix||e.type===Lb||e.type===MB||e.type===FB}function Jze(){if(Xze(),Ge>=Pu)return{type:T5,start:Ge,end:Ge};const e=Gt.charCodeAt(Ge);return A5(e)?jyn():e===40||e===41||e===59?LW():e===39||e===34?Vyn():e===46?Ym(Gt.charCodeAt(Ge+1))?rTe():LW():Ym(e)?rTe():LW()}function tc(){const e=Ai;return Ge=e.end,Ai=Jze(),Ge=e.end,e}function Zze(){const e=Ge;Ai=Jze(),Ge=e}function Kyn(e){const t=new fp(vyn);return t.elements=e,t}function iTe(e,t,n){const r=new fp(e==="||"||e==="&&"?Eyn:byn);return r.operator=e,r.left=t,r.right=n,r}function Xyn(e,t){const n=new fp(_yn);return n.callee=e,n.arguments=t,n}function Qyn(e,t,n){const r=new fp(wyn);return r.test=e,r.consequent=t,r.alternate=n,r}function zue(e){const t=new fp(Yze);return t.name=e,t}function i4(e){const t=new fp(xyn);return t.value=e.value,t.raw=Gt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function sTe(e,t,n){const r=new fp(Tyn);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Jyn(e){const t=new fp(Syn);return t.properties=e,t}function oTe(e,t,n){const r=new fp(Ayn);return r.key=t,r.value=n,r.kind=e,r}function Zyn(e,t){const n=new fp(Cyn);return n.operator=e,n.argument=t,n.prefix=!0,n}function ti(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(BB(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Ge,n.description=i,n}function jB(e){e.type===T5&&ti(e,Pyn),e.type===r2&&ti(e,Iyn),e.type===S5&&ti(e,kyn),e.type===ix&&ti(e,Ryn),e.type===Lb&&ti(e,Nyn),ti(e,ma,e.value)}function Du(e){const t=tc();(t.type!==Xl||t.value!==e)&&jB(t)}function ls(e){return Ai.type===Xl&&Ai.value===e}function MW(e){return Ai.type===Lb&&Ai.value===e}function evn(){const e=[];for(Ge=Ai.start,Du("[");!ls("]");)ls(",")?(tc(),e.push(null)):(e.push(sx()),ls("]")||Du(","));return tc(),Kyn(e)}function aTe(){Ge=Ai.start;const e=tc();return e.type===S5||e.type===r2?(e.octal&&ti(e,Kze),i4(e)):zue(e.value)}function tvn(){var e,t,n,r;if(Ge=Ai.start,e=Ai,e.type===ix)return n=aTe(),Du(":"),r=sx(),oTe("init",n,r);if(e.type===T5||e.type===Xl)jB(e);else return t=aTe(),Du(":"),r=sx(),oTe("init",t,r)}function nvn(){var e=[],t,n,r,i={},s=String;for(Ge=Ai.start,Du("{");!ls("}");)t=tvn(),t.key.type===Yze?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ti({},Dyn):i[r]=!0,e.push(t),ls("}")||Du(",");return Du("}"),Jyn(e)}function rvn(){Du("(");const e=Vue();return Du(")"),e}const ivn={if:1};function svn(){var e,t,n;if(ls("("))return rvn();if(ls("["))return evn();if(ls("{"))return nvn();if(e=Ai.type,Ge=Ai.start,e===ix||ivn[Ai.value])n=zue(tc().value);else if(e===S5||e===r2)Ai.octal&&ti(Ai,Kze),n=i4(tc());else{if(e===Lb)throw new Error(R6);e===MB?(t=tc(),t.value=t.value==="true",n=i4(t)):e===FB?(t=tc(),t.value=null,n=i4(t)):ls("/")||ls("/=")?(n=i4(Gyn()),Zze()):jB(tc())}return n}function ovn(){const e=[];if(Du("("),!ls(")"))for(;Ge<Pu&&(e.push(sx()),!ls(")"));)Du(",");return Du(")"),e}function avn(){Ge=Ai.start;const e=tc();return Yyn(e)||jB(e),zue(e.value)}function uvn(){return Du("."),avn()}function lvn(){Du("[");const e=Vue();return Du("]"),e}function cvn(){var e,t,n;for(e=svn();;)if(ls("."))n=uvn(),e=sTe(".",e,n);else if(ls("("))t=ovn(),e=Xyn(e,t);else if(ls("["))n=lvn(),e=sTe("[",e,n);else break;return e}function uTe(){const e=cvn();if(Ai.type===Xl&&(ls("++")||ls("--")))throw new Error(R6);return e}function SO(){var e,t;if(Ai.type!==Xl&&Ai.type!==Lb)t=uTe();else{if(ls("++")||ls("--"))throw new Error(R6);if(ls("+")||ls("-")||ls("~")||ls("!"))e=tc(),t=SO(),t=Zyn(e.value,t);else{if(MW("delete")||MW("void")||MW("typeof"))throw new Error(R6);t=uTe()}}return t}function lTe(e){let t=0;if(e.type!==Xl&&e.type!==Lb)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function fvn(){var e,t,n,r,i,s,o,a,u,l;if(e=Ai,u=SO(),r=Ai,i=lTe(r),i===0)return u;for(r.prec=i,tc(),t=[e,Ai],o=SO(),s=[u,r,o];(i=lTe(Ai))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=iTe(a,u,o),s.push(n);r=tc(),r.prec=i,s.push(r),t.push(Ai),n=SO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=iTe(s[l-1].value,s[l-2],n),l-=2;return n}function sx(){var e,t,n;return e=fvn(),ls("?")&&(tc(),t=sx(),Du(":"),n=sx(),e=Qyn(e,t,n)),e}function Vue(){const e=sx();if(ls(","))throw new Error(R6);return e}function Hue(e){Gt=e,Ge=0,Pu=Gt.length,Ai=null,Zze();const t=Vue();if(Ai.type!==T5)throw new Error("Unexpect token after expression.");return t}var eVe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function tVe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Ke("Missing arguments to clamp function."),o.length>3&&Ke("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Ke("Missing arguments to if function."),o.length>3&&Ke("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function dvn(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function nVe(e){e=e||{};const t=e.allowed?Xh(e.allowed):{},n=e.forbidden?Xh(e.forbidden):{},r=e.constants||eVe,i=(e.functions||tVe)(f),s=e.globalvar,o=e.fieldvar,a=Yn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Dt(p))return p;const m=d[p.type];return m==null&&Ke("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:sn(n,m)?Ke("Illegal identifier: "+m):sn(r,m)?r[m]:sn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[dvn(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Ke("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=sn(i,m)&&i[m];return y||Ke("Unrecognized function: "+m),Yn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const cTe=Symbol("vega_selection_getter");function rVe(e){return(!e.getter||!e.getter[cTe])&&(e.getter=xd(e.field),e.getter[cTe]=!0),e.getter}const que="intersect",fTe="union",hvn="vlMulti",pvn="vlPoint",dTe="or",mvn="and",Vp="_vgsid_",P6=xd(Vp),gvn="E",yvn="R",vvn="R-E",bvn="R-LE",_vn="R-RE",UL="index:unit";function hTe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=rVe(a)(e),dv(o)&&(o=Cu(o)),dv(r[s])&&(r[s]=Cu(r[s])),Qe(r[s])&&dv(r[s][0])&&(r[s]=r[s].map(Cu)),a.type===gvn){if(Qe(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===yvn){if(!tT(o,r[s]))return!1}else if(a.type===_vn){if(!tT(o,r[s],!0,!1))return!1}else if(a.type===vvn){if(!tT(o,r[s],!1,!1))return!1}else if(a.type===bvn&&!tT(o,r[s],!1,!0))return!1;return!0}function wvn(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[UL]&&r[UL].value:void 0,o=n===que,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=hTe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=hTe(t,l),o^h)return h;return a&&o}const iVe=Lh(P6),xvn=iVe.left,Evn=iVe.right;function Tvn(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[UL]&&r[UL].value:void 0,o=n===que,a=P6(t),u=xvn(i,a);if(u===i.length||P6(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(Evn(i,a)-u<s.size)return!1}return!0}function Svn(e,t){return e.map(n=>Gn(t.fields?{values:t.fields.map(r=>rVe(r)(n.datum))}:{[Vp]:P6(n.datum)},t))}function Avn(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,x,S;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(x=0,S=c.length;x<S;++x)h=c[x],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=FW[`${y}_union`],m[d]=v(g,Pt(f[x]));n&&(g=a[d]||(a[d]=[]),g.push(Pt(f).reduce((A,C,N)=>(A[c[N].field]=C,A),{})))}else h=Vp,p=P6(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Vp]:p}));if(t=t||fTe,o[Vp]?o[Vp]=FW[`${Vp}_${t}`](...Object.values(o[Vp])):Object.keys(o).forEach(A=>{o[A]=Object.keys(o[A]).map(C=>o[A][C]).reduce((C,N)=>C===void 0?N:FW[`${u[A]}_${t}`](C,N))}),s=Object.keys(a),n&&s.length){const A=r?pvn:hvn;o[A]=t===fTe?{[dTe]:s.reduce((C,N)=>(C.push(...a[N]),C),[])}:{[mvn]:s.map(C=>({[dTe]:a[C]}))}}return o}var FW={[`${Vp}_union`]:IAt,[`${Vp}_intersect`]:AAt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Cu(t[0]),r=Cu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Cu(t[0]),r=Cu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const Cvn=":",Ivn="@";function Wue(e,t,n,r){t[0].type!==rx&&Ke("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Mr(t).value,o="unit",a=Ivn+o,u=Cvn+i;s===que&&!sn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),sn(r,u)||(r[u]=n.getData(i).tuplesRef())}function sVe(e){const t=this.context.data[e];return t?t.values.value:[]}function kvn(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Rvn(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Ed).insert(t)),1}function Nvn(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const C5=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},Pvn=C5("format"),oVe=C5("timeFormat"),Dvn=C5("utcFormat"),Ovn=C5("timeParse"),$vn=C5("utcParse"),z8=new Date(2e3,0,1);function UB(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(z8.setYear(2e3),z8.setMonth(e),z8.setDate(t),oVe.call(this,z8,n))}function Lvn(e){return UB.call(this,e,1,"%B")}function Mvn(e){return UB.call(this,e,1,"%b")}function Fvn(e){return UB.call(this,0,2+e,"%A")}function Bvn(e){return UB.call(this,0,2+e,"%a")}const jvn=":",Uvn="@",xJ="%",aVe="$";function Gue(e,t,n,r){t[0].type!==rx&&Ke("First argument to data functions must be a string literal.");const i=t[0].value,s=jvn+i;if(!sn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function zvn(e,t,n,r){t[0].type!==rx&&Ke("First argument to indata must be a string literal."),t[1].type!==rx&&Ke("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Uvn+s;sn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function ml(e,t,n,r){if(t[0].type===rx)pTe(n,r,t[0].value);else for(e in n.scales)pTe(n,r,e)}function pTe(e,t,n){const r=xJ+n;if(!sn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function om(e,t){if(Yn(e))return e;if(Dt(e)){const n=t.scales[e];return n&&phn(n.value)?n.value:void 0}}function Vvn(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=ml,n._range=ml,n._scale=ml;const r=i=>"_["+(i.type===rx?Et(xJ+i.value):Et(xJ)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Yue(e,t){return function(n,r,i){if(n){const s=om(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Hvn=Yue("area",zkt),qvn=Yue("bounds",Wkt),Wvn=Yue("centroid",Jkt);function Gvn(e,t){const n=om(e,(t||this).context);return n&&n.scale()}function Yvn(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Kue(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Kvn(){return Kue(this.context.dataflow,"warn",arguments)}function Xvn(){return Kue(this.context.dataflow,"info",arguments)}function Qvn(){return Kue(this.context.dataflow,"debug",arguments)}function BW(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function EJ(e){const t=Nv(e),n=BW(t.r),r=BW(t.g),i=BW(t.b);return .2126*n+.7152*r+.0722*i}function Jvn(e,t){const n=EJ(e),r=EJ(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Zvn(){const e=[].slice.call(arguments);return e.unshift({}),Gn(...e)}function uVe(e,t){return e===t||e!==e&&t!==t?!0:Qe(e)?Qe(t)&&e.length===t.length?ebn(e,t):!1:Ot(e)&&Ot(t)?lVe(e,t):!1}function ebn(e,t){for(let n=0,r=e.length;n<r;++n)if(!uVe(e[n],t[n]))return!1;return!0}function lVe(e,t){for(const n in e)if(!uVe(e[n],t[n]))return!1;return!0}function mTe(e){return t=>lVe(e,t)}function tbn(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Ed:Qe(n)||fB(n)?n:mTe(n),c.remove(f)),t&&c.insert(t),r&&(f=mTe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function nbn(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function rbn(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const gTe={};function ibn(e,t){const n=gTe[t]||(gTe[t]=xd(t));return Qe(e)?e.map(n):n(e)}function Xue(e){return Qe(e)||ArrayBuffer.isView(e)?e:null}function Que(e){return Xue(e)||(Dt(e)?e:null)}function sbn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xue(e).join(...n)}function obn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Que(e).indexOf(...n)}function abn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Que(e).lastIndexOf(...n)}function ubn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Que(e).slice(...n)}function lbn(e,t,n){return Yn(n)&&Ke("Function argument passed to replace."),String(e).replace(t,n)}function cbn(e){return Xue(e).slice().reverse()}function fbn(e,t,n){return wae(e||0,t||0,n||0)}function dbn(e,t){const n=om(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function hbn(e,t){const n=om(e,(t||this).context);return n?n.copy():void 0}function pbn(e,t){const n=om(e,(t||this).context);return n?n.domain():[]}function mbn(e,t,n){const r=om(e,(n||this).context);return r?Qe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function gbn(e,t){const n=om(e,(t||this).context);return n&&n.range?n.range():[]}function ybn(e,t,n){const r=om(e,(n||this).context);return r?r(t):void 0}function vbn(e,t,n,r,i){e=om(e,(i||this).context);const s=Zje(t,n);let o=e.domain(),a=o[0],u=Mr(o),l=Mu;return u-a?l=Uje(e,a,u):e=(e.interpolator?ii("sequential")().interpolator(e.interpolator()):ii("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Mr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function bbn(e,t,n){const r=om(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function _bn(e){let t=null;return function(n){return n?A6(n,t=t||US(e)):e}}const cVe=e=>e.data;function fVe(e,t){const n=sVe.call(t,e);return n.root&&n.root.lookup||{}}function wbn(e,t,n){const r=fVe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(cVe):void 0}function xbn(e,t){const n=fVe(e,this)[t];return n?n.ancestors().map(cVe):void 0}const dVe=()=>typeof window<"u"&&window||null;function Ebn(){const e=dVe();return e?e.screen:{}}function Tbn(){const e=dVe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Sbn(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function hVe(e,t,n){if(!e)return[];const[r,i]=e,s=new Io().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return XUe(o,s,Abn(t))}function Abn(e){let t=null;if(e){const n=Pt(e.marktype),r=Pt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Cbn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Ibn(e){return Pt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function kbn(e,t,n){const{x:r,y:i,mark:s}=n,o=new Io().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),hVe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Rbn(u.x,u.y,t))}function Rbn(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const D6={random(){return Sd()},cumulativeNormal:gB,cumulativeLogNormal:Uoe,cumulativeUniform:qoe,densityNormal:Loe,densityLogNormal:joe,densityUniform:Hoe,quantileNormal:yB,quantileLogNormal:zoe,quantileUniform:Woe,sampleNormal:mB,sampleLogNormal:Boe,sampleUniform:Voe,isArray:Qe,isBoolean:$b,isDate:dv,isDefined(e){return e!==void 0},isNumber:Qr,isObject:Ot,isRegExp:QFe,isString:Dt,isTuple:fB,isValid(e){return e!=null&&e===e},toBoolean:_oe,toDate(e){return woe(e)},toNumber:Cu,toString:xoe,indexof:obn,join:sbn,lastindexof:abn,replace:lbn,reverse:cbn,slice:ubn,flush:KFe,lerp:JFe,merge:Zvn,pad:tBe,peek:Mr,pluck:ibn,span:a5,inrange:tT,truncate:nBe,rgb:Nv,lab:K$,hcl:X$,hsl:G$,luminance:EJ,contrast:Jvn,sequence:ac,format:Pvn,utcFormat:Dvn,utcParse:$vn,utcOffset:gBe,utcSequence:bBe,timeFormat:oVe,timeParse:Ovn,timeOffset:mBe,timeSequence:vBe,timeUnitSpecifier:iBe,monthFormat:Lvn,monthAbbrevFormat:Mvn,dayFormat:Fvn,dayAbbrevFormat:Bvn,quarter:qFe,utcquarter:WFe,week:oBe,utcweek:lBe,dayofyear:sBe,utcdayofyear:uBe,warn:Kvn,info:Xvn,debug:Qvn,extent(e){return B0(e)},inScope:Yvn,intersect:hVe,clampRange:GFe,pinchDistance:nbn,pinchAngle:rbn,screen:Ebn,containerSize:Sbn,windowSize:Tbn,bandspace:fbn,setdata:Rvn,pathShape:_bn,panLinear:UFe,panLog:zFe,panPow:VFe,panSymlog:HFe,zoomLinear:poe,zoomLog:moe,zoomPow:_L,zoomSymlog:goe,encode:Nvn,modify:tbn,lassoAppend:Cbn,lassoPath:Ibn,intersectLasso:kbn},Nbn=["view","item","group","xy","x","y"],Pbn="event.vega.",pVe="this.",Jue={},mVe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Et(aVe+e)}]`,functions:Dbn,constants:eVe,visitors:Jue},gVe=nVe(mVe);function Dbn(e){const t=tVe(e);Nbn.forEach(n=>t[n]=Pbn+n);for(const n in D6)t[n]=pVe+n;return Gn(t,Vvn(e,D6,Jue)),t}function vo(e,t,n){return arguments.length===1?D6[e]:(D6[e]=t,n&&(Jue[e]=n),gVe.functions[e]=pVe+e,this)}vo("bandwidth",dbn,ml);vo("copy",hbn,ml);vo("domain",pbn,ml);vo("range",gbn,ml);vo("invert",mbn,ml);vo("scale",ybn,ml);vo("gradient",vbn,ml);vo("geoArea",Hvn,ml);vo("geoBounds",qvn,ml);vo("geoCentroid",Wvn,ml);vo("geoShape",bbn,ml);vo("geoScale",Gvn,ml);vo("indata",kvn,zvn);vo("data",sVe,Gue);vo("treePath",wbn,Gue);vo("treeAncestors",xbn,Gue);vo("vlSelectionTest",wvn,Wue);vo("vlSelectionIdTest",Tvn,Wue);vo("vlSelectionResolve",Avn,Wue);vo("vlSelectionTuples",Svn);function U0(e,t){const n={};let r;try{e=Dt(e)?e:Et(e)+"",r=Hue(e)}catch{Ke("Expression parse error: "+e)}r.visit(s=>{if(s.type!==Gze)return;const o=s.callee.name,a=mVe.visitors[o];a&&a(o,s.arguments,t,n)});const i=gVe(r);return i.globals.forEach(s=>{const o=aVe+s;!sn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Gn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Obn(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const $bn=Xh(["rule"]),yTe=Xh(["group","image","rect"]);function Lbn(e,t){let n="";return $bn[t]||(e.x2&&(e.x?(yTe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(yTe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Zue(e){return(e+"").toLowerCase()}function Mbn(e){return Zue(e)==="operator"}function Fbn(e){return Zue(e)==="collect"}function nI(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Bbn(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var jbn={operator:(e,t)=>nI(e,["_"],t.code),parameter:(e,t)=>nI(e,["datum","_"],t.code),event:(e,t)=>nI(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return nI(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Et(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Lbn(r,n),i+="return m;",nI(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Et).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Bbn(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Ubn(e){const t=this;Mbn(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function zbn(e){const t=this;if(e.params){const n=t.get(e.id);n||Ke("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Vbn(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Qe(i)?i.map(s=>vTe(s,n,t)):vTe(i,n,t)}return t}function vTe(e,t,n){if(!e||!Ot(e))return e;for(let r=0,i=bTe.length,s;r<i;++r)if(s=bTe[r],sn(e,s.key))return s.parse(e,t,n);return e}var bTe=[{key:"$ref",parse:Hbn},{key:"$key",parse:Wbn},{key:"$expr",parse:qbn},{key:"$field",parse:Gbn},{key:"$encode",parse:Kbn},{key:"$compare",parse:Ybn},{key:"$context",parse:Xbn},{key:"$subflow",parse:Qbn},{key:"$tupleid",parse:Jbn}];function Hbn(e,t){return t.get(e.$ref)||Ke("Operator not defined: "+e.$ref)}function qbn(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=$c(t.parameterExpression(e.$expr),e.$fields))}function Wbn(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=boe(e.$key,e.$flat,t.expr.codegen))}function Gbn(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=xd(e.$field,e.$name,t.expr.codegen))}function Ybn(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Pt(e.$compare).map(i=>i&&i.$tupleid?nn:i);return t.fn[n]||(t.fn[n]=yoe(r,e.$order,t.expr.codegen))}function Kbn(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=$c(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Xbn(e,t){return t}function Qbn(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function Jbn(){return nn}function Zbn(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Ke("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function e_n(e){var t=this,n=Ot(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Ke("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const t_n={skip:!0};function n_n(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function r_n(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],t_n)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Ed).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function yVe(e,t,n,r){return new vVe(e,t,n,r)}function vVe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||jbn,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function _Te(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}vVe.prototype=_Te.prototype={fork(){const e=new _Te(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Fbn(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Zue(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Obn,parseOperator:Ubn,parseOperatorParameters:zbn,parseParameters:Vbn,parseStream:Zbn,parseUpdate:e_n,getState:n_n,setState:r_n};function i_n(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),bVe(t,e.description()))}function bVe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function s_n(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const jW="default";function o_n(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:jW,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Dt(i)?i:i.user:jW,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Dt(r)||(i=r.item,r=r.user),TJ(e,r&&r!==jW?r:i||r),i},{cursor:t})}function TJ(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function zL(e,t){var n=e._runtime.data;return sn(n,t)||Ke("Unrecognized data set: "+t),n[t]}function a_n(e,t){return arguments.length<2?zL(this,e).values.value:zB.call(this,e,t2().remove(Ed).insert(t))}function zB(e,t){BBe(t)||Ke("Second argument to changes must be a changeset.");const n=zL(this,e);return n.modified=!0,this.pulse(n.input,t)}function u_n(e,t){return zB.call(this,e,t2().insert(t))}function l_n(e,t){return zB.call(this,e,t2().remove(t))}function _Ve(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function wVe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function VB(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function c_n(e){var t=VB(e),n=_Ve(e),r=wVe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function f_n(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=VB(e),o=t.changedTouches?t.changedTouches[0]:t,s=OB(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=d_n(e,n,s),t}function d_n(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Dt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Fu(e),item:Fu(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const wTe="view",h_n="timer",p_n="window",m_n={trap:!1};function g_n(e){const t=Gn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Qe(r[s])&&(r[s]=Xh(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function xVe(e,t,n,r){e._eventListeners.push({type:n,sources:Pt(t),handler:r})}function y_n(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function V8(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ot(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function v_n(e,t,n){var r=this,i=new pB(n),s=function(l,c){r.runAsync(null,()=>{e===wTe&&y_n(r,t)&&l.preventDefault(),i.receive(f_n(r,l,c))})},o;if(e===h_n)V8(r,"timer",t)&&r.timer(s,t);else if(e===wTe)V8(r,"view",t)&&r.addEventListener(t,s,m_n);else if(e===p_n?V8(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&V8(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);xVe(r,o,t,s)}return i}function xTe(e){return e.item}function ETe(e){return e.item.mark.source}function TTe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function b_n(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",xTe),ETe,TTe(e)),this.on(this.events("view","pointerout",xTe),ETe,TTe(t)),this}function __n(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function df(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const w_n="vega-bind",x_n="vega-bind-name",E_n="vega-bind-radio";function T_n(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=voe(r.debounce,i.update))),(r.input==null&&r.element?S_n:C_n)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function S_n(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),xVe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(A_n(i))}}function A_n(e){return typeof Event<"u"?new Event(e):{type:e}}function C_n(e,t,n,r){const i=r.signal(n.signal),s=df("div",{class:w_n}),o=n.input==="radio"?s:s.appendChild(df("label"));o.appendChild(df("span",{class:x_n},n.name||n.signal)),t.appendChild(s);let a=I_n;switch(n.input){case"checkbox":a=k_n;break;case"select":a=R_n;break;case"radio":a=N_n;break;case"range":a=P_n;break}a(e,o,n,i)}function I_n(e,t,n,r){const i=df("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function k_n(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=df("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function R_n(e,t,n,r){const i=df("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};VL(o,r)&&(u.selected=!0),i.appendChild(df("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(VL(n.options[a],o)){i.selectedIndex=a;return}}}function N_n(e,t,n,r){const i=df("span",{class:E_n}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};VL(o,r)&&(u.checked=!0);const l=df("input",u);l.addEventListener("change",()=>e.update(o));const c=df("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)VL(a[l].value,o)&&(a[l].checked=!0)}}function P_n(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Rv(s,i,100),a=df("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=df("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function VL(e,t){return e===t||e+""==t+""}function EVe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,_Ve(e),wVe(e),VB(e),i,s).background(e.background())}function ele(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function D_n(e,t,n,r){const i=new r(e.loader(),ele(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,VB(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function O_n(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=$B(r);e=n._el=e?UW(n,e,!0):null,i_n(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||E5,a=e?s.renderer:s.headless;return n._renderer=a?EVe(n,n._renderer,e,a):null,n._handler=D_n(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=UW(n,t,!0):e.appendChild(df("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=UW(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{T_n(n,u.element||t,u)})),n}function UW(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const rI=e=>+e||0,$_n=e=>({top:e,bottom:e,left:e,right:e});function STe(e){return Ot(e)?{top:rI(e.top),bottom:rI(e.bottom),left:rI(e.left),right:rI(e.right)}:$_n(rI(e))}async function tle(e,t,n,r){const i=$B(t),s=i&&i.headless;return s||Ke("Unrecognized renderer type: "+t),await e.runAsync(),EVe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function L_n(e,t){e!==qy.Canvas&&e!==qy.SVG&&e!==qy.PNG&&Ke("Unrecognized image type: "+e);const n=await tle(this,e,t);return e===qy.SVG?M_n(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function M_n(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function F_n(e,t){return(await tle(this,qy.Canvas,e,t)).canvas()}async function B_n(e){return(await tle(this,qy.SVG,e)).svg()}function j_n(e,t,n){return yVe(e,MS,D6,n).parse(t)}function U_n(e){var t=this._runtime.scales;return sn(t,e)||Ke("Unrecognized scale or projection: "+e),t[e].value}var TVe="width",SVe="height",nle="padding",ATe={skip:!0};function AVe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===nle?r.left+r.right:0)}function CVe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===nle?r.top+r.bottom:0)}function z_n(e){var t=e._signals,n=t[TVe],r=t[SVe],i=t[nle];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=AVe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=CVe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function V_n(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(TVe,n,ATe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(SVe,r,ATe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function H_n(e){return this._runtime.getState(e||{data:q_n,signals:W_n,recurse:!0})}function q_n(e,t){return t.modified&&Qe(t.input.value)&&!e.startsWith("_:vega:_")}function W_n(e,t){return!(e==="parent"||t instanceof MS.proxy)}function G_n(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Y_n(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(sIt(n,t))}function K_n(e,t,n,r){const i=e.element();i&&i.setAttribute("title",X_n(r))}function X_n(e){return e==null?"":Qe(e)?IVe(e):Ot(e)&&!dv(e)?Q_n(e):e+""}function Q_n(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Qe(n)?IVe(n):kVe(n))}).join(`
`)}function IVe(e){return"["+e.map(kVe).join(", ")+"]"}function kVe(e){return Qe(e)?"[]":Ot(e)&&!dv(e)?"{}":e}function J_n(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function RVe(e,t){const n=this;if(t=t||{},OT.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Gn({},e.locale,t.locale);n.locale(kBe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||qy.Canvas,n._scenegraph=new EUe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||K_n,n._redraw=!0,n._handler=new E5().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=g_n(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=j_n(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Gn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=AVe(n,n._width),n._viewHeight=CVe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,z_n(n),s_n(n),o_n(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function H8(e,t){return sn(e._signals,t)?e._signals[t]:Ke("Unrecognized signal name: "+Et(t))}function NVe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function CTe(e,t,n,r){let i=NVe(n,r);return i||(i=ele(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function ITe(e,t,n){const r=NVe(t,n);return r&&t._targets.remove(r),e}At(RVe,OT,{async evaluate(e,t,n){if(await OT.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,c_n(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&dO(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&bVe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=H8(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",STe(e)):STe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?($B(e)||Ke("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(OT.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(H8(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:V_n,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=ele(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return CTe(this,e,H8(this,e),t)},removeSignalListener(e,t){return ITe(this,H8(this,e),t)},addDataListener(e,t){return CTe(this,e,zL(this,e).values,t)},removeDataListener(e,t){return ITe(this,zL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=TJ(this,null);this._globalCursor=!!e,t&&TJ(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Y_n,events:v_n,finalize:__n,hover:b_n,data:a_n,change:zB,insert:u_n,remove:l_n,scale:U_n,initialize:O_n,toImageURL:L_n,toCanvas:F_n,toSVG:B_n,getState:H_n,setState:G_n,_watchPixelRatio:J_n});const Z_n="view",HL="[",qL="]",PVe="{",DVe="}",ewn=":",OVe=",",twn="@",nwn=">",rwn=/[[\]{}]/,iwn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let $Ve,LVe;function Mb(e,t,n){return $Ve=t||Z_n,LVe=n||iwn,MVe(e.trim()).map(SJ)}function swn(e){return LVe[e]}function K4(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function MVe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=K4(e,i,OVe,HL+PVe,qL+DVe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function SJ(e){return e[0]==="["?own(e):awn(e)}function own(e){const t=e.length;let n=1,r;if(n=K4(e,n,qL,HL,qL),n===t)throw"Empty between selector: "+e;if(r=MVe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==nwn)throw"Expected '>' after between selector: "+e;r=r.map(SJ);const i=SJ(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function awn(e){const t={source:$Ve},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===DVe){if(a=e.lastIndexOf(PVe),a>=0){try{r=uwn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===twn&&(i=++a),u=K4(e,a,ewn),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=K4(e,a,HL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=K4(e,a,qL),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==HL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||rwn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):swn(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function uwn(e){const t=e.split(OVe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function lwn(e){return Ot(e)?e:{type:e||"pad"}}const iI=e=>+e||0,cwn=e=>({top:e,bottom:e,left:e,right:e});function fwn(e){return Ot(e)?e.signal?e:{top:iI(e.top),bottom:iI(e.bottom),left:iI(e.left),right:iI(e.right)}:cwn(iI(e))}const ga=e=>Ot(e)&&!Qe(e)?Gn({},e):{value:e};function kTe(e,t,n,r){return n!=null?(Ot(n)&&!Qe(n)||Qe(n)&&n.length&&Ot(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Ka(e,t,n){for(const r in t)kTe(e,r,t[r]);for(const r in n)kTe(e,r,n[r],"update")}function _C(e,t,n){for(const r in t)n&&sn(n,r)||(e[r]=Gn(e[r]||{},t[r]));return e}function IE(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const rle="mark",ile="frame",sle="scope",dwn="axis",hwn="axis-domain",pwn="axis-grid",mwn="axis-label",gwn="axis-tick",ywn="axis-title",vwn="legend",bwn="legend-band",_wn="legend-entry",wwn="legend-gradient",FVe="legend-label",xwn="legend-symbol",Ewn="legend-title",Twn="title",Swn="title-text",Awn="title-subtitle";function Cwn(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!IE(u,e)&&zW(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===ile?i.group:n===rle?Gn({},i.mark,i[t]):null;for(u in c)l=IE(u,e)||(u==="fill"||u==="stroke")&&(IE("fill",e)||IE("stroke",e)),l||zW(s,u,c[u]);Pt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)IE(h,e)||zW(s,h,d[h])}),e=Gn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Gn(o,e.enter),a&&(e.update=Gn(a,e.update)),e}function zW(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const BVe=e=>Dt(e)?Et(e):e.signal?`(${e.signal})`:jVe(e);function HB(e){if(e.gradient!=null)return kwn(e);let t=e.signal?`(${e.signal})`:e.color?Iwn(e.color):e.field!=null?jVe(e.field):e.value!==void 0?Et(e.value):void 0;return e.scale!=null&&(t=Rwn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${AO(e.exponent)})`),e.mult!=null&&(t+=`*${AO(e.mult)}`),e.offset!=null&&(t+=`+${AO(e.offset)}`),e.round&&(t=`round(${t})`),t}const q8=(e,t,n,r)=>`(${e}(${[t,n,r].map(HB).join(",")})+'')`;function Iwn(e){return e.c?q8("hcl",e.h,e.c,e.l):e.h||e.s?q8("hsl",e.h,e.s,e.l):e.l||e.a?q8("lab",e.l,e.a,e.b):e.r||e.g||e.b?q8("rgb",e.r,e.g,e.b):null}function kwn(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Et(n));for(;t.length&&Mr(t)==null;)t.pop();return t.unshift(BVe(e.gradient)),`gradient(${t.join(",")})`}function AO(e){return Ot(e)?"("+HB(e)+")":e}function jVe(e){return UVe(Ot(e)?e:{datum:e})}function UVe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Ke("Invalid field reference: "+Et(e));return e.signal||(r=Dt(r)?rm(r).map(Et).join("]["):UVe(r)),t+"["+r+"]"}function Rwn(e,t){const n=BVe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+AO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Nwn(e){let t="";return e.forEach(n=>{const r=HB(n);t+=n.test?`(${n.test})?${r}:`:r}),Mr(t)===":"&&(t+="null"),t}function zVe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=Cwn(e,t,n,r,i.config);for(const a in e)o[a]=Pwn(e[a],t,s,i);return s}function Pwn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Own(Dwn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Dwn(e){return Qe(e)?Nwn(e):HB(e)}function Own(e,t,n,r){const i=U0(e,t);return i.$fields.forEach(s=>r[s]=1),Gn(n,i.$params),i.$expr}const $wn="outer",Lwn=["value","update","init","react","bind"];function RTe(e,t){Ke(e+' for "outer" push: '+Et(t))}function VVe(e,t){const n=e.name;if(e.push===$wn)t.signals[n]||RTe("No prior signal definition",n),Lwn.forEach(r=>{e[r]!==void 0&&RTe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function AJ(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function qB(e,t,n,r){return new AJ(e,t,n,r)}function WL(e,t){return qB("operator",e,t)}function tn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function O6(e,t){return t?{$field:e,$name:t}:{$field:e}}const CJ=O6("key");function NTe(e,t){return{$compare:e,$order:t}}function Mwn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Fwn="ascending",Bwn="descending";function jwn(e){return Ot(e)?(e.order===Bwn?"-":"+")+WB(e.op,e.field):""}function WB(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const ole="scope",IJ="view";function Wo(e){return e&&e.signal}function Uwn(e){return e&&e.expr}function CO(e){if(Wo(e))return!0;if(Ot(e)){for(const t in e)if(CO(e[t]))return!0}return!1}function mh(e,t){return e??t}function kw(e){return e&&e.signal||e}const PTe="timer";function $6(e,t){return(e.merge?Vwn:e.stream?Hwn:e.type?qwn:Ke("Invalid stream specification: "+Et(e)))(e,t)}function zwn(e){return e===ole?IJ:e||IJ}function Vwn(e,t){const n=e.merge.map(i=>$6(i,t)),r=ale({merge:n},e,t);return t.addStream(r).id}function Hwn(e,t){const n=$6(e.stream,t),r=ale({stream:n},e,t);return t.addStream(r).id}function qwn(e,t){let n;e.type===PTe?(n=t.event(PTe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(zwn(e.source),e.type);const r=ale({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function ale(e,t,n){let r=t.between;return r&&(r.length!==2&&Ke('Stream "between" parameter must have 2 entries: '+Et(t)),e.between=[$6(r[0],n),$6(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Wwn(t.marktype,t.markname,t.markrole)),t.source===ole&&r.push("inScope(event.item)"),r.length&&(e.filter=U0("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Wwn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Gwn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Ywn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Ke("Signal update missing events specification."),Dt(s)&&(s=Mb(s,t.isSubscope()?ole:IJ)),s=Pt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Xwn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Ke("Signal encode and update are mutually exclusive."),o="encode(item(),"+Et(r)+")"),i.update=Dt(o)?U0(o,t):o.expr!=null?U0(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Gwn,$params:{$value:t.signalRef(o.signal)}}:Ke("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(Gn(Kwn(u,t),i)))}function Kwn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):$6(e,t)}}function Xwn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Qwn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Ke("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=U0(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Ywn(i,t,n.id))}const zi=e=>(t,n,r)=>qB(e,n,t||void 0,r),HVe=zi("aggregate"),Jwn=zi("axisticks"),qVe=zi("bound"),dp=zi("collect"),DTe=zi("compare"),Zwn=zi("datajoin"),WVe=zi("encode"),exn=zi("expression"),txn=zi("facet"),nxn=zi("field"),rxn=zi("key"),ixn=zi("legendentries"),sxn=zi("load"),oxn=zi("mark"),axn=zi("multiextent"),uxn=zi("multivalues"),lxn=zi("overlap"),cxn=zi("params"),GVe=zi("prefacet"),fxn=zi("projection"),dxn=zi("proxy"),hxn=zi("relay"),YVe=zi("render"),pxn=zi("scale"),i2=zi("sieve"),mxn=zi("sortitems"),KVe=zi("viewlayout"),gxn=zi("values");let yxn=0;const XVe={min:"min",max:"max",count:"sum"};function vxn(e,t){const n=e.type||"linear";$je(n)||Ke("Unrecognized scale type: "+Et(n)),t.addScale(e.name,{type:n,domain:void 0})}function bxn(e,t){const n=t.getScale(e.name).params;let r;n.domain=QVe(e.domain,e,t),e.range!=null&&(n.range=ZVe(e,t,n)),e.interpolate!=null&&kxn(e.interpolate,n),e.nice!=null&&(n.nice=Ixn(e.nice,t)),e.bins!=null&&(n.bins=Cxn(e.bins,t));for(r in e)sn(n,r)||r==="name"||(n[r]=dd(e[r],t))}function dd(e,t){return Ot(e)?e.signal?t.signalRef(e.signal):Ke("Unsupported object: "+Et(e)):e}function IO(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>dd(n,t))}function GB(e){Ke("Can not find data set: "+Et(e))}function QVe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Ke("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Qe(e)?_xn:e.fields?xxn:wxn)(e,t,n)}function _xn(e,t,n){return e.map(r=>dd(r,n))}function wxn(e,t,n){const r=n.getData(e.data);return r||GB(e.data),jS(t.type)?r.valuesRef(n,e.field,JVe(e.sort,!1)):Fje(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function xxn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Dt(o)?{data:r,field:o}:Qe(o)||o.signal?Exn(o,n):o,s.push(o),s),[]);return(jS(t.type)?Txn:Fje(t.type)?Sxn:Axn)(e,n,i)}function Exn(e,t){const n="_:vega:_"+yxn++,r=dp({});if(Qe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Et(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,i2({})]),{data:n,field:"data"}}function Txn(e,t,n){const r=JVe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||GB(l.data),c.countsRef(t,l.field,r)}),a={groupby:CJ,pulse:o};r&&(i=r.op||"count",s=r.field?WB(i,r.field):"count",a.ops=[XVe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(HVe(a));const u=t.add(dp({pulse:tn(i)}));return s=t.add(gxn({field:CJ,sort:t.sortRef(r),pulse:tn(u)})),tn(s)}function JVe(e,t){return e&&(!e.field&&!e.op?Ot(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Ke("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!XVe[e.op]&&Ke("Multiple domain scales can not be sorted using "+e.op)),e}function Sxn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||GB(i.data),s.domainRef(t,i.field)});return tn(t.add(uxn({values:r})))}function Axn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||GB(i.data),s.extentRef(t,i.field)});return tn(t.add(axn({extents:r})))}function Cxn(e,t){return e.signal||Qe(e)?IO(e,t):t.objectProperty(e)}function Ixn(e,t){return e.signal?t.signalRef(e.signal):Ot(e)?{interval:dd(e.interval),step:dd(e.step)}:dd(e)}function kxn(e,t){t.interpolate=dd(e.type||e),e.gamma!=null&&(t.interpolateGamma=dd(e.gamma))}function ZVe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Dt(i)){if(r&&sn(r,i))return e=Gn({},e,{range:r[i]}),ZVe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=jS(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Ke("Unrecognized scale range value: "+Et(i))}else if(i.scheme){n.scheme=Qe(i.scheme)?IO(i.scheme,t):dd(i.scheme,t),i.extent&&(n.schemeExtent=IO(i.extent,t)),i.count&&(n.schemeCount=dd(i.count,t));return}else if(i.step){n.rangeStep=dd(i.step,t);return}else{if(jS(e.type)&&!Qe(i))return QVe(i,e,t);Qe(i)||Ke("Unsupported range type: "+Et(i))}return i.map(s=>(Qe(s)?IO:dd)(s,t))}function Rxn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=kJ(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=kJ(n[i],i,t));t.addProjection(e.name,r)}function kJ(e,t,n){return Qe(e)?e.map(r=>kJ(r,t,n)):Ot(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Ke("Unsupported parameter object: "+Et(e)):e}const hp="top",wC="left",xC="right",Qv="bottom",eHe="center",Nxn="vertical",Pxn="start",Dxn="middle",Oxn="end",RJ="index",ule="label",$xn="offset",qS="perc",Lxn="perc2",md="value",I5="guide-label",lle="guide-title",Mxn="group-title",Fxn="group-subtitle",OTe="symbol",kO="gradient",NJ="discrete",PJ="size",Bxn="shape",jxn="fill",Uxn="stroke",zxn="strokeWidth",Vxn="strokeDash",Hxn="opacity",cle=[PJ,Bxn,jxn,Uxn,zxn,Vxn,Hxn],k5={name:1,style:1,interactive:1},zr={value:0},gd={value:1},YB="group",tHe="rect",fle="rule",qxn="symbol",s2="text";function L6(e){return e.type=YB,e.interactive=e.interactive||!1,e}function Lc(e,t){const n=(r,i)=>mh(e[r],mh(t[r],i));return n.isVertical=r=>Nxn===mh(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>mh(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>mh(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>mh(e.columns,mh(t.columns,+n.isVertical(!0))),n}function nHe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Wxn(e,t,n){const r=t.config.style[n];return r&&r[e]}function KB(e,t,n){return`item.anchor === '${Pxn}' ? ${e} : item.anchor === '${Oxn}' ? ${t} : ${n}`}const dle=KB(Et(wC),Et(xC),Et(eHe));function Gxn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ot(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function rHe(e,t){return t?e?Ot(e)?Object.assign({},e,{offset:rHe(e.offset,t)}):{value:e,offset:t}:t:e}function If(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=_C(e.encode,t,k5)):e.interactive=!1,e}function Yxn(e,t,n,r){const i=Lc(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:zr,x:zr,y:zr,width:ga(f),height:ga(d)},update:Gn({},u,{opacity:gd,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:zr}};return Ka(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),If({type:tHe,role:wwn,encode:h},r)}function Kxn(e,t,n,r,i){const s=Lc(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:zr,fill:{scale:t,field:md}};p[l]={signal:h+"datum."+qS,mult:u},p[c]=zr,p[f]={signal:h+"datum."+Lxn,mult:u},p[d]=ga(a);const m={enter:p,update:Gn({},p,{opacity:gd}),exit:{opacity:zr}};return Ka(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),If({type:tHe,role:bwn,key:md,from:i,encode:m},r)}const Xxn=`datum.${qS}<=0?"${wC}":datum.${qS}>=1?"${xC}":"${eHe}"`,Qxn=`datum.${qS}<=0?"${Qv}":datum.${qS}>=1?"${hp}":"${Dxn}"`;function $Te(e,t,n,r){const i=Lc(e,t),s=i.isVertical(),o=ga(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:zr},update:c={opacity:gd,text:{field:ule}},exit:{opacity:zr}};return Ka(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:mh(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:Qxn},f="y",d="x",h="1-"):(l.align=c.align={signal:Xxn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+qS,mult:a},l[d]=c[d]=o,o.offset=mh(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+RJ}:void 0,If({type:s2,role:FVe,style:I5,key:md,from:r,encode:p,overlap:u},n)}function Jxn(e,t,n,r,i){const s=Lc(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${$xn} : datum.${PJ}`,h=l?ga(l):{field:PJ},p=`datum.${RJ}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:zr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:gd,x:y.x,y:y.y},exit:{opacity:zr}};let x=null,S=null;e.fill||(x=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Ka(g,{fill:s("symbolFillColor",x),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),cle.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:md})});const A=If({type:qxn,role:xwn,key:md,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=ga(c);C.offset=s("labelOffset"),g={enter:y={opacity:zr,x:{signal:d,offset:C},y:h},update:v={opacity:gd,text:{field:ule},x:y.x,y:y.y},exit:{opacity:zr}},Ka(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const N=If({type:s2,role:FVe,style:I5,key:md,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:zr,height:l?ga(l):zr,opacity:zr},exit:{opacity:zr},update:v={opacity:gd,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:RJ}},L6({role:sle,from:r,encode:_C(g,o,k5),marks:[A,N],name:u,interactive:a,sort:w})}function Zxn(e,t){const n=Lc(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const hle='item.orient === "left"',ple='item.orient === "right"',XB=`(${hle} || ${ple})`,e2n=`datum.vgrad && ${XB}`,t2n=KB('"top"','"bottom"','"middle"'),n2n=KB('"right"','"left"','"center"'),r2n=`datum.vgrad && ${ple} ? (${n2n}) : (${XB} && !(datum.vgrad && ${hle})) ? "left" : ${dle}`,i2n=`item._anchor || (${XB} ? "middle" : "start")`,s2n=`${e2n} ? (${hle} ? -90 : 90) : 0`,o2n=`${XB} ? (datum.vgrad ? (${ple} ? "bottom" : "top") : ${t2n}) : "top"`;function a2n(e,t,n,r){const i=Lc(e,t),s={enter:{opacity:zr},update:{opacity:gd,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:zr}};return Ka(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:i2n},angle:{signal:s2n},align:{signal:r2n},baseline:{signal:o2n},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),If({type:s2,role:Ewn,style:lle,from:r,encode:s},n)}function u2n(e,t){let n;return Ot(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+LTe(e.path)+")":e.sphere&&(n="geoShape("+LTe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function LTe(e){return Ot(e)&&e.signal?e.signal:Et(e)}function iHe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===YB?sle:t||rle}function l2n(e){return{marktype:e.type,name:e.name||void 0,role:e.role||iHe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function c2n(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function mle(e,t){const n=zBe(e.type);n||Ke("Unrecognized transform type: "+Et(e.type));const r=qB(n.type.toLowerCase(),null,sHe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function sHe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=f2n(o,t,n)}return r}function f2n(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return d2n(e,t,n);if(i===void 0){e.required&&Ke("Missing required "+Et(t.type)+" parameter: "+Et(e.name));return}else{if(r==="param")return h2n(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Wo(i)?i.map(s=>MTe(e,s,n)):MTe(e,i,n)}function MTe(e,t,n){const r=e.type;if(Wo(t))return BTe(r)?Ke("Expression references can not be signals."):VW(r)?n.fieldRef(t):jTe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||VW(r);return i&&p2n(t)?n.exprRef(t.expr,t.as):i&&m2n(t)?O6(t.field,t.as):BTe(r)?U0(t,n):g2n(r)?tn(n.getData(t).values):VW(r)?O6(t):jTe(r)?n.compareRef(t):t}}function d2n(e,t,n){return Dt(t.from)||Ke('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function h2n(e,t,n){const r=t[e.name];return e.array?(Qe(r)||Ke("Expected an array of sub-parameters. Instead: "+Et(r)),r.map(i=>FTe(e,i,n))):FTe(e,r,n)}function FTe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Ke("Unsupported parameter: "+Et(t));const s=Gn(sHe(i,t,n),i.key);return tn(n.add(cxn(s)))}const p2n=e=>e&&e.expr,m2n=e=>e&&e.field,g2n=e=>e==="data",BTe=e=>e==="expr",VW=e=>e==="field",jTe=e=>e==="compare";function y2n(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Ke("Only group marks can be faceted."),r.field!=null?o=a=RO(r,n):(e.data?a=tn(n.getData(e.data).aggregate):(s=mle(Gn({type:"aggregate",groupby:Pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=RO(r,n),o=a=tn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=tn(n.add(dp(null,[{}]))),o||(o=RO(e,n)),{key:i,pulse:o,parent:a}}function RO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:tn(t.getData(e.data).output)}function ox(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}ox.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=tn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new ox(e,s,i,r,o)};function oHe(e){return Dt(e)?e:null}function UTe(e,t,n){const r=WB(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function sI(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=jwn(s);let l=oHe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:CJ,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:tn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(qB(r,void 0,d)),o&&(t.index[i]=f),c=tn(f),l!=null&&(a[l]=c)}return c}ox.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=oHe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&UTe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:tn(r.output)},n&&n.field&&UTe(e,u,n),a=e.add(HVe(u)),o=e.add(dp({pulse:tn(a)})),o={agg:a,ref:tn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return tn(this.values)},extentRef(e,t){return sI(e,this,"extent","extent",t,!1)},domainRef(e,t){return sI(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return sI(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return sI(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return sI(e,this,"indata","tupleindex",t,!0,!0)}};function v2n(e,t,n){const r=e.from.facet,i=r.name,s=RO(r,t);let o;r.name||Ke("Facet must have a name: "+Et(r)),r.data||Ke("Facet must reference a data set: "+Et(r)),r.field?o=t.add(GVe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(txn({key:t.keyRef(r.groupby),group:tn(t.proxy(n.parent)),pulse:s})):Ke("Facet must specify groupby or field: "+Et(r));const a=t.fork(),u=a.add(dp()),l=a.add(i2({pulse:tn(u)}));a.addData(i,new ox(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function b2n(e,t,n){const r=t.add(GVe({pulse:n.pulse})),i=t.fork();i.add(i2()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function aHe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(WL()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=U0(l,t);u.update=c.$expr,u.params=c.$params}function QB(e,t){const n=iHe(e),r=e.type===YB,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===sle||n===ile,a,u,l,c,f,d,h;const p=n===rle||o||i,m=y2n(e.from,r,t);u=t.add(Zwn({key:m.key||(e.key?O6(e.key):void 0),pulse:m.pulse,clean:!r}));const g=tn(u);u=l=t.add(dp({pulse:g})),u=t.add(oxn({markdef:l2n(e),interactive:c2n(e.interactive,t),clip:u2n(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:tn(u)}));const y=tn(u);u=c=t.add(WVe(zVe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const A=mle(S,t),C=A.metadata;(C.generates||C.changes)&&Ke("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),A.params.pulse=tn(u),t.add(u=A)}),e.sort&&(u=t.add(mxn({sort:t.compareRef(e.sort),pulse:tn(u)})));const v=tn(u);(i||o)&&(o=t.add(KVe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=tn(o));const b=t.add(qVe({mark:y,pulse:d||v}));h=tn(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?v2n(e,t,m):p?b2n(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=_2n(s,h,t));const w=t.add(YVe({pulse:h})),x=t.add(i2({pulse:tn(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new ox(t,l,w,x)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Ke("Marks only support modify triggers."),aHe(S,t,f)}))}function _2n(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Wo(s)?n.signalRef(s.signal):s,method:Wo(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Wo(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return tn(n.add(lxn(o)))}function w2n(e,t){const n=t.config.legend,r=e.encode||{},i=Lc(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;cle.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Ke("Missing valid scale for legend.");const p=x2n(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=tn(t.add(dp(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=tn(t.add(ixn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===kO?(h=[Yxn(e,c,n,r.gradient),$Te(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${kw(i.gradientLength())})/100))`)):p===NJ?h=[Kxn(e,c,n,r.gradient,v),$Te(e,n,r.labels,v)]:(f=Zxn(e,n),h=[Jxn(e,n,r,v,kw(f.columns))],d.size=S2n(e,t,h[0].marks)),h=[L6({role:_wn,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(a2n(e,n,r.title,g)),QB(L6({role:vwn,from:g,encode:_C(T2n(i,e,n),s,k5),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function x2n(e,t){let n=e.type||OTe;return!e.type&&E2n(e)===1&&(e.fill||e.stroke)&&(n=Aae(t)?kO:GQ(t)?NJ:OTe),n!==kO?n:GQ(t)?NJ:kO}function E2n(e){return cle.reduce((t,n)=>t+(e[n]?1:0),0)}function T2n(e,t,n){const r={enter:{},update:{}};return Ka(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function S2n(e,t,n){const r=kw(zTe("size",e,n)),i=kw(zTe("strokeWidth",e,n)),s=kw(A2n(n[1].encode,t,I5));return U0(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function zTe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:nHe(e,n[0].encode)}function A2n(e,t,n){return nHe("fontSize",e)||Wxn("fontSize",t,n)}const C2n=`item.orient==="${wC}"?-90:item.orient==="${xC}"?90:0`;function I2n(e,t){e=Dt(e)?{text:e}:e;const n=Lc(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=tn(t.add(dp(null,[l])));return u.push(N2n(e,n,k2n(e),c)),e.subtitle&&u.push(P2n(e,n,r.subtitle,c)),QB(L6({role:Twn,from:c,encode:R2n(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function k2n(e){const t=e.encode;return t&&t.title||Gn({name:e.name,interactive:e.interactive,style:e.style},t)}function R2n(e,t){const n={enter:{},update:{}};return Ka(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:dle},angle:{signal:C2n},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),_C(n,t,k5)}function N2n(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ka(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),If({type:s2,role:Swn,style:Mxn,from:r,encode:o},n)}function P2n(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ka(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),If({type:s2,role:Awn,style:Fxn,from:r,encode:o},n)}function D2n(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(mle(r,t))}),e.on&&e.on.forEach(r=>{aHe(r,t,e.name)}),t.addDataPipeline(e.name,O2n(e,t,n))}function O2n(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Wo(e.values)||CO(e.format)?(r.push(VTe(t,e)),r.push(i=h_())):r.push(i=h_({$ingest:e.values,$format:e.format})):e.url?CO(e.url)||CO(e.format)?(r.push(VTe(t,e)),r.push(i=h_())):r.push(i=h_({$request:e.url,$format:e.format})):e.source&&(i=a=Pt(e.source).map(d=>tn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=h_()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=hxn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,h_())),i||r.push(h_()),r.push(i2({})),r}function h_(e){const t=dp({},e);return t.metadata={source:!0},t}function VTe(e,t){return sxn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const uHe=e=>e===Qv||e===hp,JB=(e,t,n)=>Wo(e)?F2n(e.signal,t,n):e===wC||e===hp?t:n,ya=(e,t,n)=>Wo(e)?L2n(e.signal,t,n):uHe(e)?t:n,Bh=(e,t,n)=>Wo(e)?M2n(e.signal,t,n):uHe(e)?n:t,lHe=(e,t,n)=>Wo(e)?B2n(e.signal,t,n):e===hp?{value:t}:{value:n},$2n=(e,t,n)=>Wo(e)?j2n(e.signal,t,n):e===xC?{value:t}:{value:n},L2n=(e,t,n)=>cHe(`${e} === '${hp}' || ${e} === '${Qv}'`,t,n),M2n=(e,t,n)=>cHe(`${e} !== '${hp}' && ${e} !== '${Qv}'`,t,n),F2n=(e,t,n)=>gle(`${e} === '${wC}' || ${e} === '${hp}'`,t,n),B2n=(e,t,n)=>gle(`${e} === '${hp}'`,t,n),j2n=(e,t,n)=>gle(`${e} === '${xC}'`,t,n),cHe=(e,t,n)=>(t=t!=null?ga(t):t,n=n!=null?ga(n):n,HTe(t)&&HTe(n)?(t=t?t.signal||Et(t.value):null,n=n?n.signal||Et(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Gn({test:e},t)].concat(n||[])),HTe=e=>e==null||Object.keys(e).length===1,gle=(e,t,n)=>({signal:`${e} ? (${iT(t)}) : (${iT(n)})`}),U2n=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${wC}' ? (${iT(r)}) : `:"")+(n!=null?`${e} === '${Qv}' ? (${iT(n)}) : `:"")+(i!=null?`${e} === '${xC}' ? (${iT(i)}) : `:"")+(t!=null?`${e} === '${hp}' ? (${iT(t)}) : `:"")+"(null)"}),iT=e=>Wo(e)?e.signal:e==null?null:Et(e),z2n=(e,t)=>t===0?0:Wo(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},$T=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function cE(e,t,n,r){let i;if(t&&sn(t,e))return t[e];if(sn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[lle][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[I5][i]}return null}function qTe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function V2n(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Wo(o)){const f=qTe([n.axisX,n.axisY]),d=qTe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=ya(o,cE(l,n.axisX,i,r),cE(l,n.axisY,i,r));u={};for(l of d)u[l]=U2n(o.signal,cE(l,n.axisTop,i,r),cE(l,n.axisBottom,i,r),cE(l,n.axisLeft,i,r),cE(l,n.axisRight,i,r))}else a=o===hp||o===Qv?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Gn({},i,a,u,s):i}function H2n(e,t,n,r){const i=Lc(e,t),s=e.orient;let o,a;const u={enter:o={opacity:zr},update:a={opacity:gd},exit:{opacity:zr}};Ka(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=WTe(e,0),c=WTe(e,1);return o.x=a.x=ya(s,l,zr),o.x2=a.x2=ya(s,c),o.y=a.y=Bh(s,l,zr),o.y2=a.y2=Bh(s,c),If({type:fle,role:hwn,from:r,encode:u},n)}function WTe(e,t){return{scale:e.scale,range:t}}function q2n(e,t,n,r,i){const s=Lc(e,t),o=e.orient,a=e.gridScale,u=JB(o,1,-1),l=W2n(e.offset,u);let c,f,d;const h={enter:c={opacity:zr},update:d={opacity:gd},exit:f={opacity:zr}};Ka(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:md,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=ya(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:Gn(m,{mult:u,offset:l});return c.x=d.x=ya(o,p,g),c.y=d.y=Bh(o,p,g),c.x2=d.x2=Bh(o,y),c.y2=d.y2=ya(o,y),f.x=ya(o,p),f.y=Bh(o,p),If({type:fle,role:pwn,key:md,from:r,encode:h},n)}function W2n(e,t){if(t!==1)if(!Ot(e))e=Wo(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Gn({},e);for(;n.mult!=null;)if(Ot(n.mult))n=n.mult=Gn({},n.mult);else return n.mult=Wo(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function G2n(e,t,n,r,i,s){const o=Lc(e,t),a=e.orient,u=JB(a,-1,1);let l,c,f;const d={enter:l={opacity:zr},update:f={opacity:gd},exit:c={opacity:zr}};Ka(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ga(i);h.mult=u;const p={scale:e.scale,field:md,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=ya(a,zr,p),f.y2=l.y2=ya(a,h),c.x=ya(a,p),f.x=l.x=Bh(a,zr,p),f.x2=l.x2=Bh(a,h),c.y=Bh(a,p),If({type:fle,role:gwn,key:md,from:r,encode:d},n)}function HW(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Y2n(e,t,n,r,i,s){const o=Lc(e,t),a=e.orient,u=e.scale,l=JB(a,-1,1),c=kw(o("labelFlush")),f=kw(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ga(i);g.mult=l,g.offset=ga(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:md,band:.5,offset:rHe(s.offset,o("labelOffset"))},v=ya(a,p?HW(u,c,'"left"','"right"','"center"'):{value:"center"},$2n(a,"left","right")),b=ya(a,lHe(a,"bottom","top"),p?HW(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=HW(u,c,`-(${f})`,f,0);p=p&&f;const x={opacity:zr,x:ya(a,y,g),y:Bh(a,y,g)},S={enter:x,update:m={opacity:gd,text:{field:ule},x:x.x,y:x.y,align:v,baseline:b},exit:{opacity:zr,x:x.x,y:x.y}};Ka(S,{dx:!d&&p?ya(a,w):null,dy:!h&&p?Bh(a,w):null}),Ka(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const A=o("labelBound");let C=o("labelOverlap");return C=C||A?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:A?{scale:u,orient:a,tolerance:A}:null}:void 0,m.align!==v&&(m.align=$T(m.align,v)),m.baseline!==b&&(m.baseline=$T(m.baseline,b)),If({type:s2,role:mwn,style:I5,key:md,from:r,encode:S,overlap:C},n)}function K2n(e,t,n,r){const i=Lc(e,t),s=e.orient,o=JB(s,-1,1);let a,u;const l={enter:a={opacity:zr,anchor:ga(i("titleAnchor",null)),align:{signal:dle}},update:u=Gn({},a,{opacity:gd,text:ga(e.title)}),exit:{opacity:zr}},c={signal:`lerp(range("${e.scale}"), ${KB(0,1,.5)})`};return u.x=ya(s,c),u.y=Bh(s,c),a.angle=ya(s,zr,z2n(o,90)),a.baseline=ya(s,lHe(s,Qv,hp),{value:Qv}),u.angle=a.angle,u.baseline=a.baseline,Ka(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),X2n(i,s,l,n),l.update.align=$T(l.update.align,a.align),l.update.angle=$T(l.update.angle,a.angle),l.update.baseline=$T(l.update.baseline,a.baseline),If({type:s2,role:ywn,style:lle,from:r,encode:l},n)}function X2n(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=$T(ga(a),n.update[u]),!1):!IE(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ga(o):ya(t,ga(o),ga(s))}function Q2n(e,t){const n=V2n(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Lc(e,n),l=Gxn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=tn(t.add(dp({},[c]))),d=tn(t.add(Jwn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(q2n(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(G2n(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Y2n(e,n,r.labels,d,p,l))),c.domain&&h.push(H2n(e,n,r.domain,f)),c.title&&h.push(K2n(e,n,r.title,f)),QB(L6({role:dwn,from:f,encode:_C(J2n(u,e),i,k5),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function J2n(e,t){const n={enter:{},update:{}};return Ka(n,{orient:e("orient"),offset:e("offset")||0,position:mh(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function fHe(e,t,n){const r=Pt(e.signals),i=Pt(e.scales);return n||r.forEach(s=>VVe(s,t)),Pt(e.projections).forEach(s=>Rxn(s,t)),i.forEach(s=>vxn(s,t)),Pt(e.data).forEach(s=>D2n(s,t)),i.forEach(s=>bxn(s,t)),(n||r).forEach(s=>Qwn(s,t)),Pt(e.axes).forEach(s=>Q2n(s,t)),Pt(e.marks).forEach(s=>QB(s,t)),Pt(e.legends).forEach(s=>w2n(s,t)),e.title&&I2n(e.title,t),t.parseLambdas(),t}const Z2n=e=>_C({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function eEn(e,t){const n=t.config,r=tn(t.root=t.add(WL())),i=tEn(e,n);i.forEach(l=>VVe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(dp()),o=t.add(WVe(zVe(Z2n(e.encode),YB,ile,e.style,t,{pulse:tn(s)}))),a=t.add(KVe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:tn(o)}));t.operators.pop(),t.pushState(tn(o),tn(a),null),fHe(e,t,i),t.operators.push(a);let u=t.add(qVe({mark:r,pulse:tn(a)}));return u=t.add(YVe({pulse:tn(u)})),u=t.add(i2({pulse:tn(u)})),t.addData("root",new ox(t,s,s,u)),t}function oI(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function tEn(e,t){const n=o=>mh(e[o],t[o]),r=[oI("background",n("background")),oI("autosize",lwn(n("autosize"))),oI("padding",fwn(n("padding"))),oI("width",n("width")||0),oI("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Pt(e.signals).forEach(o=>{sn(i,o.name)?o=Gn(i[o.name],o):r.push(o),s[o.name]=o}),Pt(t.signals).forEach(o=>{!sn(s,o.name)&&!sn(i,o.name)&&r.push(o)}),r}function dHe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function GTe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}dHe.prototype=GTe.prototype={parse(e){return fHe(e,this)},fork(){return new GTe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof AJ?tn(e):e;return this.add(dxn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(tn(this.add(i2({pulse:e})))),this._parent.push(t),this._lookup.push(n?tn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Mr(this._parent)},encode(){return Mr(this._encode)},lookup(){return Mr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Dt(e))return O6(e,t);e.signal||Ke("Unsupported field reference: "+Et(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=tn(this.add(nxn(i)))}return r},compareRef(e){let t=!1;const n=s=>Wo(s)?(t=!0,this.signalRef(s.signal)):Uwn(s)?(t=!0,this.exprRef(s.expr)):s,r=Pt(e.field).map(n),i=Pt(e.order).map(n);return t?tn(this.add(DTe({fields:r,orders:i}))):NTe(r,i)},keyRef(e,t){let n=!1;const r=s=>Wo(s)?(n=!0,tn(i[s.signal])):s,i=this.signals;return e=Pt(e).map(r),n?tn(this.add(rxn({fields:e,flat:t}))):Mwn(e,t)},sortRef(e){if(!e)return e;const t=WB(e.op,e.field),n=e.order||Fwn;return n.signal?tn(this.add(DTe({fields:t,orders:this.signalRef(n.signal)}))):NTe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return sn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Ke("Duplicate signal name: "+Et(e));const n=t instanceof AJ?t:this.add(WL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Ke("Unrecognized signal name: "+Et(e)),this.signals[e]},signalRef(e){return this.signals[e]?tn(this.signals[e]):(sn(this.lambdas,e)||(this.lambdas[e]=this.add(WL(null))),tn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=U0(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ot(e)?e:this.signalRef(e.signal||yle(e))},exprRef(e,t){const n={expr:U0(e,this)};return t&&(n.expr.$name=t),tn(this.add(exn(n)))},addBinding(e,t){this.bindings||Ke("Nested signals do not support binding: "+Et(e)),this.bindings.push(Gn({signal:e},t))},addScaleProj(e,t){sn(this.scales,e)&&Ke("Duplicate scale or projection name: "+Et(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,pxn(t))},addProjection(e,t){this.addScaleProj(e,fxn(t))},getScale(e){return this.scales[e]||Ke("Unrecognized scale name: "+Et(e)),this.scales[e]},scaleRef(e){return tn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return sn(this.data,e)&&Ke("Duplicate data set name: "+Et(e)),this.data[e]=t},getData(e){return this.data[e]||Ke("Undefined data set name: "+Et(e)),this.data[e]},addDataPipeline(e,t){return sn(this.data,e)&&Ke("Duplicate data set name: "+Et(e)),this.addData(e,ox.fromEntries(this,t))}};function yle(e){return(Qe(e)?nEn:rEn)(e)}function nEn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ot(i)?i.signal||yle(i):Et(i))}return n+"]"}function rEn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Et(r)+":"+(Ot(i)?i.signal||yle(i):Et(i));return t+"}"}function iEn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function sEn(e,t,n){return Ot(e)||Ke("Input Vega specification must be an object."),t=dC(iEn(),t,e.config),eEn(e,new dHe(t,n)).toRuntime()}var oEn="5.29.0";Gn(MS,shn,Gmn,Sgn,n1n,l1n,L1n,m1n,F1n,z1n,J1n,syn);const aEn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Io,CanvasHandler:E5,CanvasRenderer:OL,DATE:Ic,DAY:Au,DAYOFYEAR:j0,Dataflow:OT,Debug:LFe,Error:foe,EventStream:pB,Gradient:Zje,GroupItem:CB,HOURS:Sf,Handler:Qae,HybridHandler:HUe,HybridRenderer:iJ,Info:$Fe,Item:AB,MILLISECONDS:Qh,MINUTES:Af,MONTH:Nu,Marks:Cf,MultiPulse:Noe,None:OFe,Operator:Wi,Parameters:hB,Pulse:hv,QUARTER:Cc,RenderType:qy,Renderer:x5,ResourceLoader:oUe,SECONDS:Td,SVGHandler:NUe,SVGRenderer:rue,SVGStringRenderer:VUe,Scenegraph:EUe,TIME_UNITS:Eoe,Transform:He,View:RVe,WEEK:Ho,Warn:doe,YEAR:qa,accessor:$c,accessorFields:Ru,accessorName:Xs,array:Pt,ascending:aB,bandwidthNRD:$oe,bin:qBe,bootstrapCI:WBe,boundClip:eze,boundContext:v5,boundItem:ZQ,boundMark:bUe,boundStroke:A1,changeset:t2,clampRange:GFe,codegenExpression:nVe,compare:yoe,constant:Fu,cumulativeLogNormal:Uoe,cumulativeNormal:gB,cumulativeUniform:qoe,dayofyear:sBe,debounce:voe,defaultLocale:Aoe,definition:zBe,densityLogNormal:joe,densityNormal:Loe,densityUniform:Hoe,domChild:zo,domClear:od,domCreate:Vy,domFind:Xae,dotbin:GBe,error:Ke,expressionFunction:vo,extend:Gn,extent:B0,extentIndex:YFe,falsy:dy,fastmap:pC,field:xd,flush:KFe,font:PB,fontFamily:w5,fontSize:im,format:fO,formatLocale:wL,formats:koe,hasOwnProperty:sn,id:o5,identity:Mu,inferType:NBe,inferTypes:PBe,ingest:pi,inherits:At,inrange:tT,interpolate:Cae,interpolateColors:TB,interpolateRange:Bje,intersect:XUe,intersectBoxLine:nT,intersectPath:$ae,intersectPoint:Lae,intersectRule:uUe,isArray:Qe,isBoolean:$b,isDate:dv,isFunction:Yn,isIterable:XFe,isNumber:Qr,isObject:Ot,isRegExp:QFe,isString:Dt,isTuple:fB,key:boe,lerp:JFe,lineHeight:Yv,loader:lB,locale:kBe,logger:hoe,lruCache:ZFe,markup:nue,merge:eBe,mergeConfig:dC,multiLineOffset:Gae,one:fC,pad:tBe,panLinear:UFe,panLog:zFe,panPow:VFe,panSymlog:HFe,parse:sEn,parseExpression:Hue,parseSelector:Mb,path:eF,pathCurves:Pae,pathEqual:tze,pathParse:US,pathRectangle:nUe,pathRender:A6,pathSymbols:tUe,pathTrail:rUe,peek:Mr,point:OB,projection:mue,quantileLogNormal:zoe,quantileNormal:yB,quantileUniform:Woe,quantiles:Doe,quantizeInterpolator:jje,quarter:qFe,quartiles:Ooe,get random(){return Sd},randomInteger:ldn,randomKDE:Foe,randomLCG:udn,randomLogNormal:KBe,randomMixture:XBe,randomNormal:Moe,randomUniform:QBe,read:$Be,regressionConstant:Goe,regressionExp:ZBe,regressionLinear:Yoe,regressionLoess:nje,regressionLog:JBe,regressionPoly:tje,regressionPow:eje,regressionQuad:Koe,renderModule:$B,repeat:GI,resetDefaultLocale:sfn,resetSVGClipId:sUe,resetSVGDefIds:fmn,responseType:OBe,runtimeContext:yVe,sampleCurve:bB,sampleLogNormal:Boe,sampleNormal:mB,sampleUniform:Voe,scale:ii,sceneEqual:iue,sceneFromJSON:wUe,scenePickVisit:AL,sceneToJSON:_Ue,sceneVisit:Jh,sceneZOrder:Mae,scheme:Iae,serializeXML:BUe,setHybridRendererOptions:amn,setRandom:odn,span:a5,splitAccessPath:rm,stringValue:Et,textMetrics:ff,timeBin:xBe,timeFloor:dBe,timeFormatLocale:E6,timeInterval:mC,timeOffset:mBe,timeSequence:vBe,timeUnitSpecifier:iBe,timeUnits:Toe,toBoolean:_oe,toDate:woe,toNumber:Cu,toSet:Xh,toString:xoe,transform:VBe,transforms:MS,truncate:nBe,truthy:Ed,tupleid:nn,typeParsers:HQ,utcFloor:hBe,utcInterval:gC,utcOffset:gBe,utcSequence:bBe,utcdayofyear:uBe,utcquarter:WFe,utcweek:lBe,version:oEn,visitArray:wy,week:oBe,writeConfig:hC,zero:Ny,zoomLinear:poe,zoomLog:moe,zoomPow:_L,zoomSymlog:goe},Symbol.toStringTag,{value:"Module"}));function uEn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var lEn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},cEn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},fEn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const dEn=Array.prototype.slice,p_=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,dEn.call(t,1))},hEn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var pEn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:hEn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return p_("join",arguments)},indexof:function(){return p_("indexOf",arguments)},lastindexof:function(){return p_("lastIndexOf",arguments)},slice:function(){return p_("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return p_("substring",arguments,String)},split:function(){return p_("split",arguments,String)},replace:function(){return p_("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const mEn=["view","item","group","xy","x","y"],DJ=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&DJ.add(setImmediate);const gEn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:lEn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),DJ.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||pEn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>cEn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>fEn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,DJ.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function aI(e,t,n,r,i,s){const o=a=>gEn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,mEn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var yEn={operator(e,t){const n=t.ast,r=e.functions;return i=>aI(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>aI(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>aI(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return aI(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=aI(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&uEn(o,r,s),l}}};const vEn="vega-lite",bEn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',_En="5.18.1",wEn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],xEn="https://vega.github.io/vega-lite/",EEn="Vega-Lite is a concise high-level language for interactive visualization.",TEn=["vega","chart","visualization"],SEn="build/vega-lite.js",AEn="build/vega-lite.min.js",CEn="build/vega-lite.min.js",IEn="build/src/index",kEn="build/src/index.d.ts",REn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},NEn=["bin","build","src","vega-lite*","tsconfig.json"],PEn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},DEn={type:"git",url:"https://github.com/vega/vega-lite.git"},OEn="BSD-3-Clause",$En={url:"https://github.com/vega/vega-lite/issues"},LEn={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},MEn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},FEn={vega:"^5.24.0"},BEn={node:">=18"},jEn="yarn@1.22.19",UEn={name:vEn,author:bEn,version:_En,collaborators:wEn,homepage:xEn,description:EEn,keywords:TEn,main:SEn,unpkg:AEn,jsdelivr:CEn,module:IEn,types:kEn,bin:REn,files:NEn,scripts:PEn,repository:DEn,license:OEn,bugs:$En,devDependencies:LEn,dependencies:MEn,peerDependencies:FEn,engines:BEn,packageManager:jEn};function vle(e){return!!e.or}function ble(e){return!!e.and}function _le(e){return!!e.not}function NO(e,t){if(_le(e))NO(e.not,t);else if(ble(e))for(const n of e.and)NO(n,t);else if(vle(e))for(const n of e.or)NO(n,t);else t(e)}function LT(e,t){return _le(e)?{not:LT(e.not,t)}:ble(e)?{and:e.and.map(n=>LT(n,t))}:vle(e)?{or:e.or.map(n=>LT(n,t))}:t(e)}const Cn=structuredClone;function hHe(e){throw new Error(e)}function WS(e,t){const n={};for(const r of t)sn(e,r)&&(n[r]=e[r]);return n}function vc(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Bi(e)).join(",")})`};function xr(e){if(Qr(e))return e;const t=Dt(e)?e:Bi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function OJ(e){return e===!1||e===null}function Er(e,t){return e.includes(t)}function ax(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function wle(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function pHe(e,...t){for(const n of t)zEn(e,n??{});return e}function zEn(e,t){for(const n of ct(t))hC(e,n,t[n],!0)}function u0(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function VEn(e,t){const n=ct(e),r=ct(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function mHe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function xle(e,t){for(const n of e)if(t.has(n))return!0;return!1}function $J(e){const t=new Set;for(const n of e){const i=rm(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Ele(e,t){return e===void 0||t===void 0?!0:xle($J(e),$J(t))}function Fi(e){return ct(e).length===0}const ct=Object.keys,Wa=Object.values,Jv=Object.entries;function M6(e){return e===!0||e===!1}function Cs(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function X4(e,t){return _le(e)?`!(${X4(e.not,t)})`:ble(e)?`(${e.and.map(n=>X4(n,t)).join(") && (")})`:vle(e)?`(${e.or.map(n=>X4(n,t)).join(") || (")})`:t(e)}function GL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&GL(e[n],t)&&delete e[n],Fi(e)}function R5(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Tle(e,t="datum"){const n=rm(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Et).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function gHe(e,t="datum"){return`${t}[${Et(rm(e).join("."))}]`}function HEn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Ad(e){return`${rm(e).map(HEn).join("\\.")}`}function ux(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function EC(e){return`${rm(e).join(".")}`}function GS(e){return e?rm(e).length:0}function ho(...e){for(const t of e)if(t!==void 0)return t}let yHe=42;function vHe(e){const t=++yHe;return e?String(e)+t:t}function qEn(){yHe=42}function bHe(e){return _He(e)?e:`__${e}`}function _He(e){return e.startsWith("__")}function F6(e){if(e!==void 0)return(e%360+360)%360}function ZB(e){return Qr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const YTe=Object.getPrototypeOf(structuredClone({}));function af(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!af(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!af(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==YTe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==YTe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!af(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Bi(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const Sg="row",Ag="column",ej="facet",Is="x",Aa="y",pp="x2",am="y2",Fb="xOffset",TC="yOffset",mp="radius",I1="radius2",Bd="theta",k1="theta2",gp="latitude",yp="longitude",vp="latitude2",Cd="longitude2",kc="color",um="fill",lm="stroke",Rc="shape",R1="size",o2="angle",N1="opacity",Bb="fillOpacity",jb="strokeOpacity",Ub="strokeWidth",zb="strokeDash",N5="text",YS="order",P5="detail",tj="key",lx="tooltip",nj="href",rj="url",ij="description",WEn={x:1,y:1,x2:1,y2:1},wHe={theta:1,theta2:1,radius:1,radius2:1};function xHe(e){return e in wHe}const Sle={longitude:1,longitude2:1,latitude:1,latitude2:1};function EHe(e){switch(e){case gp:return"y";case vp:return"y2";case yp:return"x";case Cd:return"x2"}}function THe(e){return e in Sle}const GEn=ct(Sle),Ale={...WEn,...wHe,...Sle,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function MT(e){return e===kc||e===um||e===lm}const SHe={row:1,column:1,facet:1},hd=ct(SHe),Cle={...Ale,...SHe},YEn=ct(Cle),{order:Yzn,detail:Kzn,tooltip:Xzn,...KEn}=Cle,{row:Qzn,column:Jzn,facet:Zzn,...XEn}=KEn;function QEn(e){return!!XEn[e]}function AHe(e){return!!Cle[e]}const JEn=[pp,am,vp,Cd,k1,I1];function CHe(e){return a2(e)!==e}function a2(e){switch(e){case pp:return Is;case am:return Aa;case vp:return gp;case Cd:return yp;case k1:return Bd;case I1:return mp}return e}function Zv(e){if(xHe(e))switch(e){case Bd:return"startAngle";case k1:return"endAngle";case mp:return"outerRadius";case I1:return"innerRadius"}return e}function cm(e){switch(e){case Is:return pp;case Aa:return am;case gp:return vp;case yp:return Cd;case Bd:return k1;case mp:return I1}}function Nc(e){switch(e){case Is:case pp:return"width";case Aa:case am:return"height"}}function IHe(e){switch(e){case Is:return"xOffset";case Aa:return"yOffset";case pp:return"x2Offset";case am:return"y2Offset";case Bd:return"thetaOffset";case mp:return"radiusOffset";case k1:return"theta2Offset";case I1:return"radius2Offset"}}function Ile(e){switch(e){case Is:return"xOffset";case Aa:return"yOffset"}}function ZEn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const eTn=ct(Ale),{x:eVn,y:tVn,x2:nVn,y2:rVn,xOffset:iVn,yOffset:sVn,latitude:oVn,longitude:aVn,latitude2:uVn,longitude2:lVn,theta:cVn,theta2:fVn,radius:dVn,radius2:hVn,...kle}=Ale,tTn=ct(kle),Rle={x:1,y:1},fm=ct(Rle);function po(e){return e in Rle}const Nle={theta:1,radius:1},nTn=ct(Nle);function sj(e){return e==="width"?Is:Aa}const kHe={xOffset:1,yOffset:1};function D5(e){return e in kHe}const{text:pVn,tooltip:mVn,href:gVn,url:yVn,description:vVn,detail:bVn,key:_Vn,order:wVn,...RHe}=kle,rTn=ct(RHe);function iTn(e){return!!kle[e]}function sTn(e){switch(e){case kc:case um:case lm:case R1:case Rc:case N1:case Ub:case zb:return!0;case Bb:case jb:case o2:return!1}}const NHe={...Rle,...Nle,...kHe,...RHe},oj=ct(NHe);function P1(e){return!!NHe[e]}function oTn(e,t){return uTn(e)[t]}const PHe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:xVn,...aTn}=PHe;function uTn(e){switch(e){case kc:case um:case lm:case ij:case P5:case tj:case lx:case nj:case YS:case N1:case Bb:case jb:case Ub:case ej:case Sg:case Ag:return PHe;case Is:case Aa:case Fb:case TC:case gp:case yp:return aTn;case pp:case am:case vp:case Cd:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case R1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case zb:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Rc:return{point:"always",geoshape:"always"};case N5:return{text:"always"};case o2:return{point:"always",square:"always",text:"always"};case rj:return{image:"always"};case Bd:return{text:"always",arc:"always"};case mp:return{text:"always",arc:"always"};case k1:case I1:return{arc:"always"}}}function qW(e){switch(e){case Is:case Aa:case Bd:case mp:case Fb:case TC:case R1:case o2:case Ub:case N1:case Bb:case jb:case pp:case am:case k1:case I1:return;case ej:case Sg:case Ag:case Rc:case zb:case N5:case lx:case nj:case rj:case ij:return"discrete";case kc:case um:case lm:return"flexible";case gp:case yp:case vp:case Cd:case P5:case tj:case YS:return}}const lTn={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},cTn={count:1,min:1,max:1};function e1(e){return!!e&&!!e.argmin}function Vb(e){return!!e&&!!e.argmax}function Ple(e){return Dt(e)&&!!lTn[e]}const fTn=new Set(["count","valid","missing","distinct"]);function DHe(e){return Dt(e)&&fTn.has(e)}function dTn(e){return Dt(e)&&Er(["min","max"],e)}const hTn=new Set(["count","sum","distinct","valid","missing"]),pTn=new Set(["mean","average","median","q1","q3","min","max"]);function OHe(e){return $b(e)&&(e=vj(e,void 0)),"bin"+ct(e).map(t=>aj(e[t])?Cs(`_${t}_${Jv(e[t])}`):Cs(`_${t}_${e[t]}`)).join("")}function Zi(e){return e===!0||u2(e)&&!e.binned}function Ma(e){return e==="binned"||u2(e)&&e.binned===!0}function u2(e){return Ot(e)}function aj(e){return e==null?void 0:e.param}function KTe(e){switch(e){case Sg:case Ag:case R1:case kc:case um:case lm:case Ub:case N1:case Bb:case jb:case Rc:return 6;case zb:return 4;default:return 10}}function O5(e){return!!(e!=null&&e.expr)}function ec(e){const t=ct(e||{}),n={};for(const r of t)n[r]=Zc(e[r]);return n}function $He(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=WS(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Ty(e){return Dt(e)||Qe(e)&&Dt(e[0])}function Xt(e){return!!(e!=null&&e.signal)}function Hb(e){return!!e.step}function mTn(e){return Qe(e)?!1:"fields"in e&&!("data"in e)}function gTn(e){return Qe(e)?!1:"fields"in e&&"data"in e}function hg(e){return Qe(e)?!1:"field"in e&&"data"in e}const yTn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},vTn=ct(yTn),bTn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},LJ=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function LHe(e){const t=Qe(e.condition)?e.condition.map(XTe):XTe(e.condition);return{...Zc(e),condition:t}}function Zc(e){if(O5(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function XTe(e){if(O5(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function cs(e){if(O5(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Xt(e)?e:e!==void 0?{value:e}:void 0}function _Tn(e){return Xt(e)?e.signal:Et(e)}function QTe(e){return Xt(e)?e.signal:Et(e.value)}function Nh(e){return Xt(e)?e.signal:e==null?null:Et(e)}function wTn(e,t,n){for(const r of n){const i=t1(r,t.markDef,t.config);i!==void 0&&(e[r]=cs(i))}return e}function MHe(e){return[].concat(e.type,e.style??[])}function hi(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:t1(e,t,n,r)}function t1(e,t,n,{vgChannel:r}={}){return ho(r?YL(e,t,n.style):void 0,YL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function YL(e,t,n){return FHe(e,MHe(t),n)}function FHe(e,t,n){t=Pt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function BHe(e,t){return Pt(e).reduce((n,r)=>(n.field.push(St(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function jHe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(af(i,r))return;n.push(r)}),n}function UHe(e,t){return af(e,t)||!t?e:e?[...Pt(e),...Pt(t)].join(", "):t}function zHe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Ty(n)||Xt(n))&&(Ty(r)||Xt(r)))return{explicit:e.explicit,value:UHe(n,r)};if(Ty(n)||Xt(n))return{explicit:e.explicit,value:n};if(Ty(r)||Xt(r))return{explicit:e.explicit,value:r};if(!Ty(n)&&!Xt(n)&&!Ty(r)&&!Xt(r))return{explicit:e.explicit,value:jHe(n,r)};throw new Error("It should never reach here")}function Dle(e){return`Invalid specification ${Bi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const xTn='Autosize "fit" only works for single views and layered views.';function JTe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function ZTe(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function eSe(e){return e?`Dropping "fit-${e}" because spec has discrete ${Nc(e)}.`:'Dropping "fit" because spec has discrete size.'}function Ole(e){return`Unknown field for ${e}. Cannot calculate view size.`}function tSe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function ETn(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function TTn(e){return`The "nearest" transform is not supported for ${e} marks.`}function VHe(e){return`Selection not supported for ${e} yet.`}function STn(e){return`Cannot find a selection named "${e}".`}const ATn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",CTn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",ITn="Legend bindings are only supported for selections over an individual field or encoding channel.";function kTn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function RTn(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const NTn="The same selection must be used to override scale domains in a layered view.",PTn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function DTn(e){return`Unknown repeated value "${e}".`}function nSe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const OTn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function $Tn(e){return`Unrecognized parse "${e}".`}function rSe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const LTn="Attempt to add the same child twice.";function MTn(e){return`Ignoring an invalid transform: ${Bi(e)}.`}const FTn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function iSe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function BTn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Bi(t)} is overridden by a child projection ${Bi(n)}.`}const jTn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function UTn(e){return`${e}Offset dropped because ${e} is continuous`}function zTn(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Bi(n)}}.`}function HHe(e){return`Invalid field type "${e}".`}function VTn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function HTn(e){return`Invalid aggregation operator "${e}".`}function qHe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function qTn(e){return`Position range does not support relative band size for ${e}.`}function MJ(e,t){return`Dropping ${Bi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const WTn="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function uj(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function GTn(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function YTn(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function KTn(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function XTn(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function WW(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function QTn(e){return`The ${e} for range marks cannot be an expression`}function JTn(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function ZTn(e,t){return`Specified orient "${e}" overridden with "${t}".`}function eSn(e){return`Cannot use the scale property "${e}" with non-color channel.`}function tSn(e){return`Cannot use the relative band size with ${e} scale.`}function nSn(e){return`Using unaggregated domain with raw field has no effect (${Bi(e)}).`}function rSn(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function iSn(e){return`Unaggregated domain is currently unsupported for log scale (${Bi(e)}).`}function sSn(e){return`Cannot apply size to non-oriented mark "${e}".`}function oSn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function aSn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function WHe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function GHe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function uSn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Bi(n)} and ${Bi(r)}). Using ${Bi(n)}.`}function lSn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Bi(n)} and ${Bi(r)}). Using the union of the two domains.`}function cSn(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function fSn(e){return`Dropping sort property ${Bi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const sSe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",dSn="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",hSn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",pSn="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function mSn(e){return`Cannot stack "${e}" if there is already "${e}2".`}function gSn(e){return`Stack is applied to a non-linear scale (${e}).`}function ySn(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function KL(e,t){return`Invalid ${e}: ${Bi(t)}.`}function vSn(e){return`Dropping day from datetime ${Bi(e)} as day cannot be combined with other units.`}function bSn(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function _Sn(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function wSn(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function oSe(e){return`1D error band does not support ${e}.`}function YHe(e){return`Channel ${e} is required for "binned" bin.`}function xSn(e){return`Channel ${e} should not be used with "binned" bin.`}function ESn(e){return`Domain for ${e} is required for threshold scale.`}const KHe=hoe(doe);let KS=KHe;function TSn(e){return KS=e,KS}function SSn(){return KS=KHe,KS}function pt(...e){KS.warn(...e)}function ASn(...e){KS.debug(...e)}function l2(e){if(e&&Ot(e)){for(const t of Lle)if(t in e)return!0}return!1}const XHe=["january","february","march","april","may","june","july","august","september","october","november","december"],CSn=XHe.map(e=>e.substr(0,3)),QHe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],ISn=QHe.map(e=>e.substr(0,3));function kSn(e){if(ZB(e)&&(e=+e),Qr(e))return e>4&&pt(KL("quarter",e)),e-1;throw new Error(KL("quarter",e))}function RSn(e){if(ZB(e)&&(e=+e),Qr(e))return e-1;{const t=e.toLowerCase(),n=XHe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=CSn.indexOf(r);if(i!==-1)return i;throw new Error(KL("month",e))}}function NSn(e){if(ZB(e)&&(e=+e),Qr(e))return e%7;{const t=e.toLowerCase(),n=QHe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=ISn.indexOf(r);if(i!==-1)return i;throw new Error(KL("day",e))}}function $le(e,t){const n=[];if(t&&e.day!==void 0&&ct(e).length>1&&(pt(vSn(e)),e=Cn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?RSn(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?kSn(e.quarter):e.quarter;n.push(Qr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?NSn(e.day):e.day;n.push(Qr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function cx(e){const n=$le(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function PSn(e){const n=$le(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function DSn(e){const t=$le(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const JHe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Lle=ct(JHe);function OSn(e){return!!JHe[e]}function c2(e){return Ot(e)?e.binned:ZHe(e)}function ZHe(e){return e&&e.startsWith("binned")}function Mle(e){return e.startsWith("utc")}function $Sn(e){return e.substring(3)}const LSn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function lj(e){return Lle.filter(t=>tqe(e,t))}function eqe(e){const t=lj(e);return t[t.length-1]}function tqe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function MSn(e,t,{end:n}={end:!1}){const r=Tle(t),i=Mle(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Lle)tqe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),PSn(a)}function nqe(e){if(!e)return;const t=lj(e);return`timeUnitSpecifier(${Bi(t)}, ${Bi(LSn)})`}function FSn(e,t,n){if(!e)return;const r=nqe(e);return`${n||Mle(e)?"utc":"time"}Format(${t}, ${r})`}function _a(e){if(!e)return;let t;return Dt(e)?ZHe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ot(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Mle(t.unit)&&(t.utc=!0,t.unit=$Sn(t.unit)),t}function BSn(e){const{utc:t,...n}=_a(e);return n.unit?(t?"utc":"")+ct(n).map(r=>Cs(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+ct(n).map(r=>Cs(`_${r}_${n[r]}`)).join("")}function rqe(e,t=n=>n){const n=_a(e),r=eqe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=iqe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(cx(a))} - ${t(cx(i))}`}}const jSn={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function USn(e){return!!jSn[e]}function iqe(e,t=1){if(USn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function zSn(e){return e==null?void 0:e.param}function Fle(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Ble(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function jle(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Ule(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function zle(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Vle(e){if(e!=null&&e.field){if(Qe(e.range)&&e.range.length===2)return!0;if(Xt(e.range))return!0}return!1}function Hle(e){return!!(e!=null&&e.field)&&(Qe(e.oneOf)||Qe(e.in))}function VSn(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function sqe(e){return Hle(e)||Fle(e)||Vle(e)||Ble(e)||Ule(e)||jle(e)||zle(e)}function Pp(e,t){return bj(e,{timeUnit:t,wrapTime:!0})}function HSn(e,t){return e.map(n=>Pp(n,t))}function oqe(e,t=!0){const{field:n}=e,r=_a(e.timeUnit),{unit:i,binned:s}=r||{},o=St(e,{expr:"datum"}),a=i?`time(${s?o:MSn(i,n)})`:o;if(Fle(e))return`${a}===${Pp(e.equal,i)}`;if(Ble(e)){const u=e.lt;return`${a}<${Pp(u,i)}`}else if(Ule(e)){const u=e.gt;return`${a}>${Pp(u,i)}`}else if(jle(e)){const u=e.lte;return`${a}<=${Pp(u,i)}`}else if(zle(e)){const u=e.gte;return`${a}>=${Pp(u,i)}`}else{if(Hle(e))return`indexof([${HSn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(VSn(e))return qle(a,e.valid);if(Vle(e)){const{range:u}=e,l=Xt(u)?{signal:`${u.signal}[0]`}:u[0],c=Xt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Pp(l,i)+", "+Pp(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Pp(l,i)}`),c!==null&&f.push(`${a} <= ${Pp(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Bi(e)}`)}function qle(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function qSn(e){return sqe(e)&&e.timeUnit?{...e,timeUnit:_a(e.timeUnit)}:e}const $5={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function WSn(e){return e==="quantitative"||e==="temporal"}function aqe(e){return e==="ordinal"||e==="nominal"}const fx=$5.quantitative,Wle=$5.ordinal,XS=$5.temporal,Gle=$5.nominal,SC=$5.geojson;function GSn(e){if(e)switch(e=e.toLowerCase(),e){case"q":case fx:return"quantitative";case"t":case XS:return"temporal";case"o":case Wle:return"ordinal";case"n":case Gle:return"nominal";case SC:return"geojson"}}const bc={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},FJ={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function YSn(e,t){const n=FJ[e],r=FJ[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const KSn={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function aSe(e){return KSn[e]}const uqe=new Set(["linear","log","pow","sqrt","symlog"]),lqe=new Set([...uqe,"time","utc"]);function cqe(e){return uqe.has(e)}const fqe=new Set(["quantile","quantize","threshold"]),XSn=new Set([...lqe,...fqe,"sequential","identity"]),QSn=new Set(["ordinal","bin-ordinal","point","band"]);function Ea(e){return QSn.has(e)}function kf(e){return XSn.has(e)}function Ph(e){return lqe.has(e)}function QS(e){return fqe.has(e)}const JSn={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function ZSn(e){return!Dt(e)&&!!e.name}function dqe(e){return e==null?void 0:e.param}function eAn(e){return e==null?void 0:e.unionWith}function tAn(e){return Ot(e)&&"field"in e}const nAn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:EVn,domain:TVn,range:SVn,rangeMax:AVn,rangeMin:CVn,scheme:IVn,...rAn}=nAn,iAn=ct(rAn);function BJ(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Ph(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Ph(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Ph(e);case"nice":return Ph(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return kf(e)&&!Er(["log","time","utc","threshold","quantile"],e)}}function hqe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return MT(e)?void 0:eSn(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function sAn(e,t){return Er([Wle,Gle],t)?e===void 0||Ea(e):t===XS?Er([bc.TIME,bc.UTC,void 0],e):t===fx?cqe(e)||QS(e)||e===void 0:!0}function oAn(e,t,n=!1){if(!P1(e))return!1;switch(e){case Is:case Aa:case Fb:case TC:case Bd:case mp:return Ph(t)||t==="band"?!0:t==="point"?!n:!1;case R1:case Ub:case N1:case Bb:case jb:case o2:return Ph(t)||QS(t)||Er(["band","point","ordinal"],t);case kc:case um:case lm:return t!=="band";case zb:case Rc:return t==="ordinal"||QS(t)}}function Yle(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Xle(e);return gt(n)&&!DHe(n.aggregate)&&i&&Ph(i.get("type"))?aAn({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function aAn({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return hi("invalid",n,i)===null?[uAn(e,t),r]:r}function uAn(e,t){const n=Kle(e,!0),i=a2(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Kle(e,t=!0){return qle(Dt(e)?e:St(e,{expr:"datum"}),!t)}function lAn(e){const{datum:t}=e;return l2(t)?cx(t):`${Bi(t)}`}function Rw(e,t,n,r){const i={};if(t&&(i.scale=t),dm(e)){const{datum:s}=e;l2(s)?i.signal=cx(s):Xt(s)?i.signal=s.signal:O5(s)?i.signal=s.expr:i.value=s}else i.field=St(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function XL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Xt(o)&&0<o&&o<1?"datum":void 0,u=St(t,{expr:a,suffix:i}),l=n!==void 0?St(n,{expr:a}):St(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Xt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function cAn({scaleName:e,fieldDef:t}){const n=St(t,{expr:"datum"}),r=St(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Xle({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Ln(t)){const f=o==null?void 0:o.get("type");if(Sl(t)){c??(c=eb({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Zi(d)||c&&h&&p===XS)return a!=null&&a.impute?Rw(t,s,{binSuffix:"mid"},{offset:u}):c&&!Ea(f)?XL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Rw(t,s,B5(t,e)?{binSuffix:"range"}:{},{offset:u});if(Ma(d)){if(gt(n))return XL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});pt(YHe(e===Is?pp:am))}}return Rw(t,s,Ea(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Zh(t)){const f=t.value,d=u?{offset:u}:{};return{...Q4(e,f),...d}}}return Yn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Q4(e,t){return Er(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Er(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:cs(t)}function dx(e){return e&&e!=="number"&&e!=="time"}function pqe(e,t,n){return`${e}(${t}${n?`, ${Bi(n)}`:""})`}const fAn="  ";function Qle({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(dx(n))return Dh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=mqe(e,r,i),a=JS(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Dh({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Dh({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&gt(e)&&e.timeUnit===void 0)return Dh({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(eA(e)){const c=hAn({field:o,timeUnit:gt(e)?(u=_a(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:d2(e)&&((l=e.scale)==null?void 0:l.type)===bc.UTC});return c?{signal:c}:void 0}if(t=jJ({type:a,specifiedFormat:t,config:s,normalizeStack:i}),gt(e)&&Zi(e.bin)){const c=St(e,{expr:r,binSuffix:"end"});return{signal:L5(o,c,t,n,s)}}else return t||JS(e)==="quantitative"?{signal:`${vqe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function mqe(e,t,n){return gt(e)?n?`${St(e,{expr:t,suffix:"end"})}-${St(e,{expr:t,suffix:"start"})}`:St(e,{expr:t}):lAn(e)}function Dh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=mqe(e,r,i)),o!=="datum.value"&&gt(e)&&Zi(e.bin)){const a=St(e,{expr:r,binSuffix:"end"});return{signal:L5(o,a,t,n,s)}}return{signal:pqe(n,o,t)}}function gqe(e,t,n,r,i,s){var o;if(!(Dt(r)&&dx(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&JS(e)==="quantitative"&&(i.normalizedNumberFormatType&&ZS(e)&&e.stack==="normalize"||i.numberFormatType))){if(ZS(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return jJ({type:"quantitative",config:i,normalizeStack:!0});if(eA(e)){const a=gt(e)?(o=_a(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:dAn({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return jJ({type:t,specifiedFormat:n,config:i})}}function yqe(e,t,n){var r;if(e&&(Xt(e)||e==="number"||e==="time"))return e;if(eA(t)&&n!=="time"&&n!=="utc")return gt(t)&&((r=_a(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function jJ({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Dt(t))return t;if(e===fx)return r?n.normalizedNumberFormat:n.numberFormat}function dAn({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:nqe(t)}:r?void 0:n.timeFormat)}function vqe(e,t){return`format(${e}, "${t||""}")`}function uSe(e,t,n,r){return dx(n)?pqe(n,e,t):vqe(e,(Dt(t)?t:void 0)??r.numberFormat)}function L5(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return L5(e,t,i.numberFormat,i.numberFormatType,i);const s=uSe(e,n,r,i),o=uSe(t,n,r,i);return`${qle(e,!1)} ? "null" : ${s} + "${fAn}" + ${o}`}function hAn({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Dt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):FSn(t,e,s)}const Dl={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},bqe=Dl.arc,cj=Dl.area,fj=Dl.bar,pAn=Dl.image,dj=Dl.line,hj=Dl.point,mAn=Dl.rect,QL=Dl.rule,_qe=Dl.text,Jle=Dl.tick,gAn=Dl.trail,Zle=Dl.circle,ece=Dl.square,wqe=Dl.geoshape;function f2(e){return["line","area","trail"].includes(e)}function B6(e){return["rect","bar","image","arc"].includes(e)}const yAn=new Set(ct(Dl));function z0(e){return e.type}const vAn=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],bAn=["fill","fillOpacity"],_An=[...vAn,...bAn],wAn={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},lSe=ct(wAn),xAn={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},EAn={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},TAn={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},xqe=ct(TAn);function hx(e){return e&&e.band!=null}const SAn={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Eqe=5,AAn={binSpacing:1,continuousBandSize:Eqe,minBandSize:.25,timeUnitBandPosition:.5},CAn={binSpacing:0,continuousBandSize:Eqe,minBandSize:.25,timeUnitBandPosition:.5},IAn={thickness:1};function kAn(e){return z0(e)?e.type:e}const pj="min",RAn={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function cSe(e){return e in RAn}function Tqe(e){return!!(e!=null&&e.encoding)}function x0(e){return e&&(e.op==="count"||!!e.field)}function Sqe(e){return e&&Qe(e)}function M5(e){return"row"in e||"column"in e}function tce(e){return!!e&&"header"in e}function mj(e){return"facet"in e}function NAn(e){return e.param}function PAn(e){return e&&!Dt(e)&&"repeat"in e}function fSe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function nce(e){return"sort"in e}function eb({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Ln(e)&&e.bandPosition!==void 0)return e.bandPosition;if(gt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return t1("timeUnitBandPosition",n,r);if(Zi(s))return .5}}function Aqe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Nc(e),u=hi(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(gt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:t1("timeUnitBandSize",r,i)};if(Zi(h)&&!Ea(s))return{band:1}}if(B6(r.type))return s?Ea(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Cqe(e,t,n,r){return Zi(e.bin)||e.timeUnit&&Sl(e)&&e.type==="temporal"?eb({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Iqe(e){return e&&!!e.sort&&!e.field}function gj(e){return e&&"condition"in e}function yj(e){const t=e==null?void 0:e.condition;return!!t&&!Qe(t)&&gt(t)}function F5(e){const t=e==null?void 0:e.condition;return!!t&&!Qe(t)&&Ln(t)}function DAn(e){const t=e==null?void 0:e.condition;return!!t&&(Qe(t)||Zh(t))}function gt(e){return e&&(!!e.field||e.aggregate==="count")}function JS(e){return e==null?void 0:e.type}function dm(e){return e&&"datum"in e}function Ky(e){return Sl(e)&&!ZL(e)||JL(e)}function dSe(e){return Sl(e)&&e.type==="quantitative"&&!e.bin||JL(e)}function JL(e){return dm(e)&&Qr(e.datum)}function Ln(e){return gt(e)||dm(e)}function Sl(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Zh(e){return e&&"value"in e&&"value"in e}function d2(e){return e&&("scale"in e||"sort"in e)}function ZS(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function kqe(e){return e&&"legend"in e}function Rqe(e){return e&&("format"in e||"formatType"in e)}function OAn(e){return vc(e,["legend","axis","header","scale"])}function $An(e){return"op"in e}function St(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(MAn(e))n=bHe("count");else{let o;if(!t.nofn)if($An(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Zi(a)?(o=OHe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Vb(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):e1(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!c2(l)&&(o=BSn(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?EC(n):t.expr?gHe(n,t.expr)+s:Ad(n)+s}function ZL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return gt(e)&&!!e.bin;case"temporal":return!1}throw new Error(HHe(e.type))}function LAn(e){var t;return d2(e)&&QS((t=e.scale)==null?void 0:t.type)}function MAn(e){return e.aggregate==="count"}function FAn(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Zi(r))return`${n} (binned)`;if(i&&!c2(i)){const a=(o=_a(i))==null?void 0:o.unit;if(a)return`${n} (${lj(a).join("-")})`}else if(s)return Vb(s)?`${n} for max ${s.argmax}`:e1(s)?`${n} for min ${s.argmin}`:`${R5(s)} of ${n}`;return n}function BAn(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Vb(t))return`${i} for argmax(${t.argmax})`;if(e1(t))return`${i} for argmin(${t.argmin})`;const s=r&&!c2(r)?_a(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Zi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const Nqe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return BAn(e);default:return FAn(e,t)}};let Pqe=Nqe;function Dqe(e){Pqe=e}function jAn(){Dqe(Nqe)}function FT(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=rce(e))==null?void 0:a.title;if(!gt(e))return i??e.title;const s=e,o=r?ice(s,t):void 0;return n?ho(i,s.title,o):i??s.title??o}function rce(e){if(ZS(e)&&e.axis)return e.axis;if(kqe(e)&&e.legend)return e.legend;if(tce(e)&&e.header)return e.header}function ice(e,t){return Pqe(e,t)}function e7(e){if(Rqe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=rce(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function UAn(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(nce(e)&&Qe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Vb(n)&&!e1(n))return"quantitative";if(d2(e)&&((s=e.scale)!=null&&s.type))switch(FJ[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function V0(e){if(gt(e))return e;if(yj(e))return e.condition}function qo(e){if(Ln(e))return e;if(F5(e))return e.condition}function Oqe(e,t,n,r={}){if(Dt(e)||Qr(e)||$b(e)){const i=Dt(e)?"string":Qr(e)?"number":"boolean";return pt(zTn(t,i,e)),{value:e}}return Ln(e)?t7(e,t,n,r):F5(e)?{...e,condition:t7(e.condition,t,n,r)}:e}function t7(e,t,n,r){if(Rqe(e)){const{format:i,formatType:s,...o}=e;if(dx(s)&&!n.customFormatTypes)return pt(iSe(t)),t7(o,t,n,r)}else{const i=ZS(e)?"axis":kqe(e)?"legend":tce(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(dx(o)&&!n.customFormatTypes)return pt(iSe(t)),t7({...e,[i]:a},t,n,r)}}return gt(e)?sce(e,t,r):zAn(e)}function zAn(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Qr(n)?"quantitative":Dt(n)?"nominal":l2(n)?"temporal":void 0,{...e,type:t}}function sce(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Ple(r)&&!Vb(r)&&!e1(r)&&(pt(HTn(r)),delete a.aggregate),i&&(a.timeUnit=_a(i)),o&&(a.field=`${o}`),Zi(s)&&(a.bin=vj(s,t)),Ma(s)&&!po(t)&&pt(xSn(t)),Sl(a)){const{type:u}=a,l=GSn(u);u!==l&&(a.type=l),u!=="quantitative"&&DHe(r)&&(pt(VTn(u,r)),a.type="quantitative")}else if(!CHe(t)){const u=UAn(a,t);a.type=u}if(Sl(a)){const{compatible:u,warning:l}=VAn(a,t)||{};u===!1&&pt(l)}if(nce(a)&&Dt(a.sort)){const{sort:u}=a;if(cSe(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&cSe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(tce(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function vj(e,t){return $b(e)?{maxbins:KTe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:KTe(t)}:e}const fE={compatible:!0};function VAn(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Sg:case Ag:case ej:return ZL(e)?fE:{compatible:!1,warning:YTn(t)};case Is:case Aa:case Fb:case TC:case kc:case um:case lm:case N5:case P5:case tj:case lx:case nj:case rj:case o2:case Bd:case mp:case ij:return fE;case yp:case Cd:case gp:case vp:return n!==fx?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:fE;case N1:case Bb:case jb:case Ub:case R1:case k1:case I1:case pp:case am:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:fE;case Rc:case zb:return!ZL(e)&&!LAn(e)?{compatible:!1,warning:KTn(t)}:fE;case YS:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:fE}}function eA(e){const{formatType:t}=e7(e);return t==="time"||!t&&HAn(e)}function HAn(e){return e&&(e.type==="temporal"||gt(e)&&!!e.timeUnit)}function bj(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=_a(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return O5(e)?a=e.expr:Xt(e)?a=e.signal:l2(e)?(o=!0,a=cx(e)):(Dt(e)||Qr(e))&&o&&(a=`datetime(${Bi(e)})`,OSn(s)&&(Qr(e)&&e<1e4||Dt(e)&&isNaN(Date.parse(e)))&&(a=cx({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Bi(e)}function $qe(e,t){const{type:n}=e;return t.map(r=>{const i=gt(e)&&!c2(e.timeUnit)?e.timeUnit:void 0,s=bj(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function B5(e,t){return Zi(e.bin)?P1(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const hSe={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function j5(e){return e==null?void 0:e.condition}const Lqe=["domain","grid","labels","ticks","title"],qAn={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Mqe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},WAn={...Mqe,style:1,labelExpr:1,encoding:1};function pSe(e){return!!WAn[e]}const GAn={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Fqe=ct(GAn);function D1(e){return"mark"in e}class _j{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return D1(t)?kAn(t.mark)===this.name:!1}}function Nw(e,t){const n=e&&e[t];return n?Qe(n)?ax(n,r=>!!r.field):gt(n)||yj(n):!1}function Bqe(e,t){const n=e&&e[t];return n?Qe(n)?ax(n,r=>!!r.field):gt(n)||dm(n)||F5(n):!1}function jqe(e,t){if(po(t)){const n=e[t];if((gt(n)||dm(n))&&(aqe(n.type)||gt(n)&&n.timeUnit)){const r=Ile(t);return Bqe(e,r)}}return!1}function oce(e){return ax(YEn,t=>{if(Nw(e,t)){const n=e[t];if(Qe(n))return ax(n,r=>!!r.aggregate);{const r=V0(n);return r&&!!r.aggregate}}return!1})}function Uqe(e,t){const n=[],r=[],i=[],s=[],o={};return ace(e,(a,u)=>{if(gt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=rce(a),m=p==null?void 0:p.title;let g=St(a,{forAs:!0});const y={...m?[]:{title:FT(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Vb(c)?(v="argmax",g=St({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):e1(c)?(v="argmin",g=St({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),Sl(a)&&Zi(f)){if(r.push({bin:f,field:l,as:g}),n.push(St(a,{binSuffix:"end"})),B5(a,u)&&n.push(St(a,{binSuffix:"range"})),po(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",CHe(u)||(y.type=fx)}else if(d&&!c2(d)){i.push({timeUnit:d,field:l,as:g});const v=Sl(a)&&a.type!==XS&&"time";v&&(u===N5||u===lx?y.formatType=v:iTn(u)?y.legend={formatType:v,...y.legend}:po(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function YAn(e,t,n){const r=oTn(t,n);if(r){if(r==="binned"){const i=e[t===pp?Is:Aa];return!!(gt(i)&&gt(e[t])&&Ma(i.bin))}}else return!1;return!0}function KAn(e,t,n,r){const i={};for(const s of ct(e))AHe(s)||pt(GTn(s));for(let s of eTn){if(!e[s])continue;const o=e[s];if(D5(s)){const a=ZEn(s),u=i[a];if(gt(u)&&WSn(u.type)&&gt(o)&&!u.timeUnit){pt(UTn(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(pt(jTn),s=Bd),!YAn(e,s,t)){pt(uj(s,t));continue}if(s===R1&&t==="line"){const a=V0(e[s]);if(a!=null&&a.aggregate){pt(WTn);continue}}if(s===kc&&(n?"fill"in e:"stroke"in e)){pt(qHe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===P5||s===YS&&!Qe(o)&&!Zh(o)||s===lx&&Qe(o)){if(o){if(s===YS){const a=e[s];if(Iqe(a)){i[s]=a;continue}}i[s]=Pt(o).reduce((a,u)=>(gt(u)?a.push(sce(u,s)):pt(MJ(u,s)),a),[])}}else{if(s===lx&&o===null)i[s]=null;else if(!gt(o)&&!dm(o)&&!Zh(o)&&!gj(o)&&!Xt(o)){pt(MJ(o,s));continue}i[s]=Oqe(o,s,r)}}return i}function wj(e,t){const n={};for(const r of ct(e)){const i=Oqe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function XAn(e){const t=[];for(const n of ct(e))if(Nw(e,n)){const r=e[n],i=Pt(r);for(const s of i)gt(s)?t.push(s):yj(s)&&t.push(s.condition)}return t}function ace(e,t,n){if(e)for(const r of ct(e)){const i=e[r];if(Qe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function QAn(e,t,n,r){return e?ct(e).reduce((i,s)=>{const o=e[s];return Qe(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function zqe(e,t){return ct(t).reduce((n,r)=>{switch(r){case Is:case Aa:case nj:case ij:case rj:case pp:case am:case Fb:case TC:case Bd:case k1:case mp:case I1:case gp:case yp:case vp:case Cd:case N5:case Rc:case o2:case lx:return n;case YS:if(e==="line"||e==="trail")return n;case P5:case tj:{const i=t[r];if(Qe(i)||gt(i))for(const s of Pt(i))s.aggregate||n.push(St(s,{}));return n}case R1:if(e==="trail")return n;case kc:case um:case lm:case N1:case Bb:case jb:case zb:case Ub:{const i=V0(t[r]);return i&&!i.aggregate&&n.push(St(i,{})),n}}},[])}function JAn(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Qe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Qe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function UJ(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${uce(t)}`:"";return{field:o+t.field,type:t.type,title:Xt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=XAn(n).map(OAn);return{tooltip:[...i,...u0(s,xr)]}}function uce(e){const{title:t,field:n}=e;return ho(t,n)}function lce(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=uce(n);return Vqe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Dt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function Vqe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...z0(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...$b(e[t])?{}:e[t]}}]:[]}function Hqe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:W8(s,n),continuousAxisChannelDef2:W8(o,n),continuousAxisChannelDefError:W8(a,n),continuousAxisChannelDefError2:W8(u,n),continuousAxis:i}}function W8(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&pt(wSn(n,t)),r}else return e}function qqe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(z0(n)&&n.orient)return n.orient;if(Ky(i)){if(Ky(s)){const o=gt(i)&&i.aggregate,a=gt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return eA(s)&&!eA(i)?"horizontal":"vertical"}return"horizontal"}else{if(Ky(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const n7="boxplot",ZAn=["box","median","outliers","rule","ticks"],eCn=new _j(n7,Gqe);function Wqe(e){return Qr(e)?"tukey":e}function Gqe(e,{config:t}){e={...e,encoding:wj(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=z0(n)?n:{type:n};i&&pt(VHe("boxplot"));const u=a.extent??t.boxplot.extent,l=hi("size",a,t),c=a.invalid,f=Wqe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:x,customTooltipWithoutAggregatedField:S}=tCn(e,u,t),A=EC(m.field),{color:C,size:N,...k}=b,D=Fe=>lce(a,g,m,Fe,t.boxplot),L=D(k),O=D(b),B=(Ot(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",q=D({...k,...N?{size:N}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:B}}}}),H=UJ([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),G={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},K=f==="min-max"?H:UJ([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),J=[...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:K}),...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:K}),...L({partName:"ticks",mark:G,positionPrefix:"lower_whisker",extraEncoding:K}),...L({partName:"ticks",mark:G,positionPrefix:"upper_whisker",extraEncoding:K})],F=[...f!=="tukey"?J:[],...O({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:H}),...q({partName:"median",mark:{type:"tick",invalid:c,...Ot(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:H})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:F};const j=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,M=`(${W} - ${j})`,V=`${j} - ${u} * ${M}`,Q=`${W} + ${u} * ${M}`,se=`datum["${m.field}"]`,be={joinaggregate:Yqe(m.field),groupby:y},he={transform:[{filter:`(${V} <= ${se}) && (${se} <= ${Q})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${A}`},{op:"max",field:m.field,as:`upper_whisker_${A}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${A}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${A}`},...v],groupby:y}],layer:J},{tooltip:Ce,...De}=k,{scale:rt,axis:Re}=m,Tt=uce(m),Ze=vc(Re,["title"]),It=Vqe(a,"outliers",t.boxplot,{transform:[{filter:`(${se} < ${V}) || (${se} > ${Q})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Tt!==void 0?{title:Tt}:{},...rt!==void 0?{scale:rt}:{},...Fi(Ze)?{}:{axis:Ze}},...De,...C?{color:C}:{},...S?{tooltip:S}:{}}})[0];let mt;const Se=[...d,...h,be];return It?mt={transform:Se,layer:[It,he]}:(mt=he,mt.transform.unshift(...Se)),{...o,layer:[mt,{transform:p,layer:F}]}}function Yqe(e){const t=EC(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function tCn(e,t,n){const r=qqe(e,n7),{continuousAxisChannelDef:i,continuousAxis:s}=Hqe(e,r,n7),o=i.field,a=EC(o),u=Wqe(t),l=[...Yqe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=JAn(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=Uqe(p,n),w=r==="vertical"?"horizontal":"vertical",x=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:x,customTooltipWithoutAggregatedField:h}}const cce="errorbar",nCn=["ticks","rule"],rCn=new _j(cce,Kqe);function Kqe(e,{config:t}){e={...e,encoding:wj(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=Xqe(e,cce,t);delete s.size;const c=lce(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function iCn(e,t){const{encoding:n}=e;if(sCn(n))return{orient:qqe(e,t),inputType:"raw"};const r=oCn(n),i=aCn(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Ln(a)&&Ln(u))throw new Error(`${t} cannot have both x2 and y2`);if(Ln(a)){if(Ky(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ln(u)){if(Ky(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Ln(u)&&!Ln(a))throw new Error(`${t} cannot have xError2 without xError`);if(Ln(c)&&!Ln(l))throw new Error(`${t} cannot have yError2 without yError`);if(Ln(a)&&Ln(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ln(a)){if(Ky(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ln(l)){if(Ky(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function sCn(e){return(Ln(e.x)||Ln(e.y))&&!Ln(e.x2)&&!Ln(e.y2)&&!Ln(e.xError)&&!Ln(e.xError2)&&!Ln(e.yError)&&!Ln(e.yError2)}function oCn(e){return Ln(e.x2)||Ln(e.y2)}function aCn(e){return Ln(e.xError)||Ln(e.xError2)||Ln(e.yError)||Ln(e.yError2)}function Xqe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=z0(r)?r:{type:r};s&&pt(VHe(t));const{orient:l,inputType:c}=iCn(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=Hqe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=uCn(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:x,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:A,...C}=i,{bins:N,timeUnits:k,aggregate:D,groupby:L,encoding:O}=Uqe(C,n),B=[...D,...g],q=c!=="raw"?[]:L,H=UJ(v,f,O,b);return{transform:[...a.transform??[],...N,...k,...B.length===0?[]:[{aggregate:B,groupby:q}],...y],groupby:q,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:O,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:H}}function uCn(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&pt(_Sn(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:R5(h)},{fieldPrefix:"upper_",titlePrefix:mSe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:mSe(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:FT({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:FT({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:FT({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&pt(bSn(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:ux(ux(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function mSe(e,t,n){return`${R5(e)} ${n} ${t}`}const fce="errorband",lCn=["band","borders"],cCn=new _j(fce,Qqe);function Qqe(e,{config:t}){e={...e,encoding:wj(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=Xqe(e,fce,t),l=o,c=lce(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?pt(oSe("interpolate")):l.tension&&pt(oSe("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const Jqe={};function dce(e,t,n){const r=new _j(e,t);Jqe[e]={normalizer:r,parts:n}}function fCn(){return ct(Jqe)}dce(n7,Gqe,ZAn);dce(cce,Kqe,nCn);dce(fce,Qqe,lCn);const dCn=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Zqe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},eWe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},hCn=ct(Zqe),pCn=ct(eWe),mCn={header:1,headerRow:1,headerColumn:1,headerFacet:1},tWe=ct(mCn),nWe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],gCn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},yCn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ep="_vgsid_",vCn={point:{on:"click",fields:[ep],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function hce(e){return e==="legend"||!!(e!=null&&e.legend)}function GW(e){return hce(e)&&Ot(e)}function pce(e){return!!(e!=null&&e.select)}function rWe(e){const t=[];for(const n of e||[]){if(pce(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function bCn(e){return xj(e)||gce(e)||mce(e)}function mce(e){return"concat"in e}function xj(e){return"vconcat"in e}function gce(e){return"hconcat"in e}function iWe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function H0(e){return Ot(e)&&e.step!==void 0}function gSe(e){return e.view||e.width||e.height}const ySe=20,_Cn={align:1,bounds:1,center:1,columns:1,spacing:1},wCn=ct(_Cn);function xCn(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(mj(e)&&!M5(e.facet)||mce(e))&&(i.columns=o),xj(e)&&(i.columns=1);for(const a of wCn)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Qr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function zJ(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function r7(e,t){const n=i7(e,t);return H0(n)?n.step:sWe}function i7(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ho(n,{step:e.step})}const sWe=20,ECn={continuousWidth:200,continuousHeight:200,step:sWe},TCn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:ECn,mark:EAn,arc:{},area:{},bar:AAn,circle:{},geoshape:{},image:{},line:{},point:{},rect:CAn,rule:{color:"black"},square:{},text:{color:"black"},tick:IAn,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:JSn,projection:{},legend:gCn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:vCn,style:{},title:{},facet:{spacing:ySe},concat:{spacing:ySe},normalizedNumberFormat:".0%"},Fm=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],vSe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},bSe={blue:Fm[0],orange:Fm[1],red:Fm[2],teal:Fm[3],green:Fm[4],yellow:Fm[5],purple:Fm[6],pink:Fm[7],brown:Fm[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function SCn(e={}){return{signals:[{name:"color",value:Ot(e)?{...bSe,...e}:bSe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function ACn(e){return{signals:[{name:"fontSize",value:Ot(e)?{...vSe,...e}:vSe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function CCn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function oWe(e){const t=ct(e||{}),n={};for(const r of t){const i=e[r];n[r]=j5(i)?LHe(i):Zc(i)}return n}function ICn(e){const t=ct(e),n={};for(const r of t)n[r]=oWe(e[r]);return n}const kCn=[...xqe,...Fqe,...tWe,"background","padding","legend","lineBreak","scale","style","title","view"];function aWe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=dC({},Cn(TCn),n?CCn(n):{},t?SCn(t):{},r?ACn(r):{},s||{});i&&hC(o,"selection",i,!0);const a=vc(o,kCn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Zc(o[u]));for(const u of xqe)o[u]&&(a[u]=ec(o[u]));for(const u of Fqe)o[u]&&(a[u]=oWe(o[u]));for(const u of tWe)o[u]&&(a[u]=ec(o[u]));return o.legend&&(a.legend=ec(o.legend)),o.scale&&(a.scale=ec(o.scale)),o.style&&(a.style=ICn(o.style)),o.title&&(a.title=ec(o.title)),o.view&&(a.view=ec(o.view)),a}const RCn=new Set(["view",...yAn]),NCn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],PCn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...xAn};function DCn(e){e=Cn(e);for(const t of NCn)delete e[t];if(e.axis)for(const t in e.axis)j5(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of dCn)delete e.legend[t];if(e.mark){for(const t of lSe)delete e.mark[t];e.mark.tooltip&&Ot(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(rWe(e.params)),delete e.params);for(const t of RCn){for(const r of lSe)delete e[t][r];const n=PCn[t];if(n)for(const r of n)delete e[t][r];$Cn(e,t)}for(const t of fCn())delete e[t];OCn(e);for(const t in e)Ot(e[t])&&Fi(e[t])&&delete e[t];return Fi(e)?void 0:e}function OCn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=$He(e.title);Fi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Fi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Fi(r)?delete e.title:e.title=r}function $Cn(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Fi(s)||(e.style[n??t]=s),delete e[t]}function Ej(e){return"layer"in e}function LCn(e){return"repeat"in e}function MCn(e){return!Qe(e.repeat)&&e.repeat.layer}class yce{map(t,n){return mj(t)?this.mapFacet(t,n):LCn(t)?this.mapRepeat(t,n):gce(t)?this.mapHConcat(t,n):xj(t)?this.mapVConcat(t,n):mce(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Ej(t))return this.mapLayer(t,n);if(D1(t))return this.mapUnit(t,n);throw new Error(Dle(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const FCn={zero:1,center:1,normalize:1};function BCn(e){return e in FCn}const jCn=new Set([bqe,fj,cj,QL,hj,Zle,ece,dj,_qe,Jle]),UCn=new Set([fj,cj,bqe]);function dE(e){return gt(e)&&JS(e)==="quantitative"&&!e.bin}function _Se(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(gt(o)&&gt(a))if(dE(o)&&dE(a)){if(o.stack)return t;if(a.stack)return i;const u=gt(o)&&!!o.aggregate,l=gt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(dE(o))return t;if(dE(a))return i}else{if(dE(o))return s&&n==="vertical"?void 0:t;if(dE(a))return s&&n==="horizontal"?void 0:i}}function zCn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function uWe(e,t){var m,g;const n=z0(e)?e:{type:e},r=n.type;if(!jCn.has(r))return null;const i=_Se(t,"x",n)||_Se(t,"theta",n);if(!i)return null;const s=t[i],o=gt(s)?St(s,{}):void 0,a=zCn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=gt(y)?St(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=gt(f)?St(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=tTn.reduce((y,v)=>{if(v!=="tooltip"&&Nw(t,v)){const b=t[v];for(const w of Pt(b)){const x=V0(w);if(x.aggregate)continue;const S=St(x,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:x})}}return y},[]);let p;return s.stack!==void 0?$b(s.stack)?p=s.stack?"zero":null:p=s.stack:UCn.has(r)&&(p="zero"),!p||!BCn(p)||oce(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==bc.LINEAR&&s!=null&&s.stack&&pt(gSn(s.scale.type)),Ln(t[cm(i)])?(s.stack!==void 0&&pt(mSn(i)),null):(gt(s)&&s.aggregate&&!hTn.has(s.aggregate)&&pt(ySn(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:f2(r),stackBy:h,offset:p}))}function lWe(e,t,n){const r=ec(e),i=hi("orient",r,n);if(r.orient=WCn(r.type,t,i),i!==void 0&&i!==r.orient&&pt(ZTn(r.orient,i)),r.type==="bar"&&r.orient){const u=hi("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:SAn[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=hi("opacity",r,n),o=hi("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=HCn(r.type,t)),hi("cursor",r,n)===void 0&&(r.cursor=VCn(r,t,n)),r}function VCn(e,t,n){return t.href||e.href||hi("href",e,n)?"pointer":e.cursor}function HCn(e,t){if(Er([hj,Jle,Zle,ece],e)&&!oce(t))return .7}function qCn(e,t,{graticule:n}){if(n)return!1;const r=t1("filled",e,t),i=e.type;return ho(r,i!==hj&&i!==dj&&i!==QL)}function WCn(e,t,n){switch(e){case hj:case Zle:case ece:case _qe:case mAn:case pAn:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case fj:if(gt(r)&&(Ma(r.bin)||gt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(gt(i)&&(Ma(i.bin)||gt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(gt(r)&&r.type===fx&&!Zi(r.bin)||JL(r))&&gt(i)&&Ma(i.bin)?"horizontal":"vertical";if(!o)return(gt(i)&&i.type===fx&&!Zi(i.bin)||JL(i))&&gt(r)&&Ma(r.bin)?"vertical":"horizontal"}case QL:if(s&&!(gt(r)&&Ma(r.bin))&&o&&!(gt(i)&&Ma(i.bin)))return;case cj:if(o)return gt(i)&&Ma(i.bin)?"horizontal":"vertical";if(s)return gt(r)&&Ma(r.bin)?"vertical":"horizontal";if(e===QL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case dj:case Jle:{const a=dSe(r),u=dSe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Sl(r)&&r.type===XS,c=Sl(i)&&i.type===XS;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function GCn(e){const{point:t,line:n,...r}=e;return ct(r).length>1?r:r.type}function YCn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:vc(e[t],["point","line"])});return e}function YW(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ot(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ot(t.point)?t.point:{}:void 0}function wSe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class KCn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(D1(t)){const{mark:r,encoding:i}=t,s=z0(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!YW(s,n[s.type],i);case"area":return!!YW(s,n[s.type],i)||!!wSe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=wj(l,i),d=z0(a)?a:{type:a},h=YW(d,i[d.type],f),p=d.type==="area"&&wSe(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:GCn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:vc(f,["shape"])}],g=uWe(lWe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=vc(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...WS(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...WS(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:YCn(i)})}}function XCn(e,t){return t?M5(e)?fWe(e,t):cWe(e,t):e}function KW(e,t){return t?fWe(e,t):e}function VJ(e,t,n){const r=t[e];if(PAn(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};pt(DTn(r.repeat));return}return t}function cWe(e,t){if(e=VJ("field",e,t),e!==void 0){if(e===null)return null;if(nce(e)&&x0(e.sort)){const n=VJ("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function xSe(e,t){if(gt(e))return cWe(e,t);{const n=VJ("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function ESe(e,t){if(Ln(e)){const n=xSe(e,t);if(n)return n;if(gj(e))return{condition:e.condition}}else{if(F5(e)){const n=xSe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function fWe(e,t){const n={};for(const r in e)if(sn(e,r)){const i=e[r];if(Qe(i))n[r]=i.map(s=>ESe(s,t)).filter(s=>s);else{const s=ESe(i,t);s!==void 0&&(n[r]=s)}}return n}class QCn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(D1(t)){const{encoding:n,mark:r}=t;if(r==="line"||z0(r)&&r.type==="line")for(const i of JEn){const s=a2(i),o=n[s];if(n[i]&&(gt(o)&&!Ma(o.bin)||dm(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return pt(JTn(!!i.x2,!!i.y2)),r({...t,mark:Ot(s)?{...s,type:"rule"}:"rule"},n)}}class JCn extends yce{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[eCn,rCn,cCn,new KCn,new QCn]}map(t,n){if(D1(t)){const r=Nw(t.encoding,Sg),i=Nw(t.encoding,Ag),s=Nw(t.encoding,ej);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=KW(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return MCn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Cs(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Qe(r)&&t.columns&&(t=vc(t,["columns"]),pt(nSe("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Qe(r)&&r.row||[u?u.row:null],f=!Qe(r)&&r.column||[u?u.column:null],d=Qe(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Qe(r)?`${Cs(p)}`:(r.row?`row_${Cs(m)}`:"")+(r.column?`column_${Cs(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(vc(b,["data"]))}const h=Qe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return M5(r)&&t.columns&&(t=vc(t,["columns"]),pt(nSe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=SSe({parentProjection:o,projection:i}),l=TSe({parentEncoding:s,encoding:KW(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=KW(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&pt(XTn([...r?[Sg]:[],...i?[Ag]:[]]));const o={},a={};for(const u of[Sg,Ag]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:XCn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:TSe({parentEncoding:n,encoding:s,layer:!0}),parentProjection:SSe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function TSe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ct(e),...ct(t)]);for(const s of i){const o=t[s],a=e[s];if(Ln(o)){const u={...a,...o};r[s]=u}else F5(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Zh(a)||Xt(a)||Ln(a)||Qe(a))&&(r[s]=a)}}else r=t;return!r||Fi(r)?void 0:r}function SSe(e){const{parentProjection:t,projection:n}=e;return t&&n&&pt(BTn({parentProjection:t,projection:n})),n??t}function vce(e){return"filter"in e}function ZCn(e){return(e==null?void 0:e.stop)!==void 0}function dWe(e){return"lookup"in e}function e3n(e){return"data"in e}function t3n(e){return"param"in e}function n3n(e){return"pivot"in e}function r3n(e){return"density"in e}function i3n(e){return"quantile"in e}function s3n(e){return"regression"in e}function o3n(e){return"loess"in e}function a3n(e){return"sample"in e}function u3n(e){return"window"in e}function l3n(e){return"joinaggregate"in e}function c3n(e){return"flatten"in e}function f3n(e){return"calculate"in e}function hWe(e){return"bin"in e}function d3n(e){return"impute"in e}function h3n(e){return"timeUnit"in e}function p3n(e){return"aggregate"in e}function m3n(e){return"stack"in e}function g3n(e){return"fold"in e}function y3n(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function v3n(e){return e.map(t=>vce(t)?{filter:LT(t.filter,qSn)}:t)}class b3n extends yce{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=ASe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=ASe(t,n),t.encoding){const r={};for(const[i,s]of Jv(t.encoding))r[i]=pWe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Jv(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Wa(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function ASe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(vce(s))return{filter:HJ(s,t)};if(hWe(s)&&u2(s.bin))return{...s,bin:mWe(s.bin)};if(dWe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function pWe(e,t){var r,i;const n=Cn(e);if(gt(n)&&u2(n.bin)&&(n.bin=mWe(n.bin)),d2(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(gj(n))if(Qe(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:HJ(s,t)}});else{const{selection:s,param:o,test:a,...u}=pWe(n.condition,t);n.condition=o?n.condition:{...u,test:HJ(n.condition,t)}}return n}function mWe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function HJ(e,t){const n=r=>LT(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):LT(e.test||e.filter,r=>r.selection?n(r.selection):r)}class qJ extends yce{map(t,n){const r=n.selections??[];if(t.params&&!D1(t)){const i=[];for(const s of t.params)pce(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Dt(a)&&(a===t.name||i.includes(a))||Qe(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=qJ.prototype[e];qJ.prototype[e]=function(n,r){return t.call(this,n,_3n(n,r))}}function _3n(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function gWe(e,t){t===void 0&&(t=aWe(e.config));const n=T3n(e,t),{width:r,height:i}=e,s=S3n(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const w3n=new JCn,x3n=new b3n,E3n=new qJ;function T3n(e,t={}){const n={config:t};return E3n.map(w3n.map(x3n.map(e,n),n),n)}function CSe(e){return Dt(e)?{type:e}:e??{}}function S3n(e,t,n){let{width:r,height:i}=t;const s=D1(e)||Ej(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(pt(JTe("width")),r=void 0),i=="container"&&(pt(JTe("height")),i=void 0));const a={type:"pad",...o,...n?CSe(n.autosize):{},...CSe(e.autosize)};if(a.type==="fit"&&!s&&(pt(xTn),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&pt(ZTe("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&pt(ZTe("height")),!af(a,{type:"pad"}))return a}function A3n(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function C3n(e){return e?`fit-${sj(e)}`:"fit"}const I3n=["background","padding"];function ISe(e,t){const n={};for(const r of I3n)e&&e[r]!==void 0&&(n[r]=Zc(e[r]));return t&&(n.params=e.params),n}class O1{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new O1(Cn(this.explicit),Cn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ho(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ct(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function zp(e){return{explicit:!0,value:e}}function qc(e){return{explicit:!1,value:e}}function yWe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:Tj(t,n,r,i)}}function Tj(e,t,n,r){return e.explicit&&t.explicit&&pt(uSn(n,r,e.value,t.value)),e}function tb(e,t,n,r,i=Tj){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:af(e.value,t.value)?e:i(e,t,n,r)}class k3n extends O1{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function tA(e){return"url"in e}function j6(e){return"values"in e}function vWe(e){return"name"in e&&!tA(e)&&!j6(e)&&!gv(e)}function gv(e){return e&&(bWe(e)||_We(e)||bce(e))}function bWe(e){return"sequence"in e}function _We(e){return"sphere"in e}function bce(e){return"graticule"in e}var Es;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Es||(Es={}));function wWe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Ad(i.field),i}function px(e,t=!0,n=Mu){if(Qe(e)){const r=e.map(i=>px(i,t,n));return t?`[${r.join(", ")}]`:r}else if(l2(e))return n(t?cx(e):DSn(e));return t?n(Bi(e)):e}function R3n(e,t){for(const n of Wa(e.component.selection??{})){const r=n.name;let i=`${r}${rb}, ${n.resolve==="global"?"true":`{unit: ${Pw(e)}}`}`;for(const s of Ij)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+uIn,on:[{events:{signal:n.name+rb},update:`modify(${Et(n.name+mx)}, ${i})`}]})}return _ce(t)}function N3n(e,t){if(e.component.selection&&ct(e.component.selection).length){const n=Et(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Mb("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return _ce(t)}function P3n(e,t){let n=!1;for(const r of Wa(e.component.selection??{})){const i=r.name,s=Et(i+mx);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${BWe}(${s}, ${Et(a)}${u}`})}n=!0;for(const a of Ij)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),_ce(t)}function D3n(e,t){const n=[...t],r=Pw(e,{escape:!1});for(const i of Wa(e.component.selection??{})){const s={name:i.name+mx};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ep}}]),i.init){const a=i.project.items.map(wWe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[ep]:px(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:px(u,!1)}))}n.filter(a=>a.name===i.name+mx).length||n.push(s)}return n}function xWe(e,t){for(const n of Wa(e.component.selection??{}))for(const r of Ij)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function O3n(e,t){for(const n of e.children)Gs(n)&&(t=xWe(n,t));return t}function $3n(e,t,n,r){const i=HWe(e,t.param,t);return{signal:kf(n.get("type"))&&Qe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function _ce(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Ii{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){pt(LTn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class _c extends Ii{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${vHe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function XW(e){return e.as!==void 0}function kSe(e){return`${e}_end`}class E0 extends Ii{clone(){return new E0(null,Cn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(c2(u)){if(Gs(n)){const{mark:c,markDef:f,config:d}=n,h=eb({fieldDef:s,markDef:f,config:d});(B6(c)||h)&&(l={timeUnit:_a(u),field:a})}}else l={as:St(s,{forAs:!0}),field:a,timeUnit:u};if(Gs(n)){const{mark:c,markDef:f,config:d}=n,h=eb({fieldDef:s,markDef:f,config:d});B6(c)&&po(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[xr(l)]=l)}return i},{});return Fi(r)?null:new E0(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=_a(r),o={...i,timeUnit:s};return new E0(t,{[xr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Jv(this.timeUnits)){const s=XW(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Wa(this.timeUnits).map(t=>XW(t)?t.as:kSe(t.field)))}dependentFields(){return new Set(Wa(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${xr(this.timeUnits)}`}assemble(){const t=[];for(const n of Wa(this.timeUnits)){const{rectBandPosition:r}=n,i=_a(n.timeUnit);if(XW(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Ad(s),type:"timeunit",...a?{units:lj(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...RSe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=EWe({timeUnit:i,field:o}),u=kSe(o);t.push({type:"formula",expr:a,as:u}),t.push(...RSe([o,u],r,i))}}return t}}const Sj="offsetted_rect_start",Aj="offsetted_rect_end";function EWe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=eqe(r),{part:o,step:a}=iqe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function RSe([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:NSe([EWe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${Sj}`},{type:"formula",expr:NSe([i,s],n+.5),as:`${e}_${Aj}`}]}return[]}function NSe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const U5="_tuple_fields";class L3n{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const M3n={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new L3n),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Cs(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Cs(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Pt(n.value):null;let{fields:d,encodings:h}=Ot(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(Ot(p))for(const m of ct(p))QEn(m)?(h||(h=[])).push(m):l==="interval"?(pt(PTn),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){pt(ETn(p,m.aggregate));continue}else if(!g){pt(tSe(p));continue}if(m.timeUnit&&!c2(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[xr(y)]=y}if(!s[g]){const y=l==="interval"&&P1(p)&&kf(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===ep,THe(p)?(v.geoChannel=p,v.channel=EHe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else pt(tSe(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===ep}f&&(t.init=f.map(p=>i.items.map(m=>Ot(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Fi(o)||(i.timeUnit=new E0(null,o))},signals:(e,t,n)=>{const r=t.name+U5;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(wWe)})}},Cg={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!P1(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&pt(CTn),!s||!kf(o)){pt(ATn);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||PSe(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(BWe)>=0)i.update=`{${r.map(o=>`${Et(Ad(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Et(Ad(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!PSe(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function WJ(e,t){return`domain(${Et(e.scaleName(t))})`}function PSe(e){return e.parent&&RC(e.parent)&&!e.parent.parent}const BT="_brush",TWe="_scale_trigger",uI="geo_interval_init_tick",SWe="_init",F3n="_center",B3n={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ot(n.select)?n.select:{}};i.fields=[ep],i.encodings||(i.encodings=n.value?ct(n.value):[yp,gp]),n.select={type:"interval",...i}}if(t.translate&&!Cg.defined(t)){const i=`!event.item || event.item.mark.name !== ${Et(t.name+BT)}`;for(const s of t.events){if(!s.between){pt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Pt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+rb,s=Wa(t.project.hasChannel).filter(a=>a.channel===Is||a.channel===Aa),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(j3n(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Et(e.projectionName()),u=e.projectionName()+F3n,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=x=>e.getSizeSignalRef(x).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+SWe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Et(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Pw(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(x=>x.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:uI}]:[]],update:b}]})}else{if(!Cg.defined(t)){const l=r+TWe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Et(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=kf(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Pw(e)}, fields: ${r+U5}, values`;return n.concat({name:i,...o?{init:`{${u}: ${px(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Gs(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===uI).length||n.unshift({name:uI,value:null,on:[{events:"timer{1}",update:`${uI} === null ? {} : ${uI}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Et(t.name+mx)})`;if(Cg.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of ct(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${Pw(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=ct(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+BT}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+BT,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function j3n(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Et(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Is?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Cg.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:px(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+TWe},update:kf(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:px(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Is?0:1,h=t.name+SWe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const U3n={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+U5,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Wa(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+BT):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Pw(e)}, `;if(t.project.hasSelectionId)l+=`${ep}: ${o}[${Et(ep)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Et(e.vgField(d.channel,{}))}], ${o}[${Et(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Et(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+rb,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function AC(e,t,n,r){const i=gj(t)&&t.condition,s=r(t);if(i){const a=Pt(i).map(u=>{const l=r(u);if(NAn(u)){const{param:c,empty:f}=u;return{test:VWe(e,{param:c,empty:f}),...l}}else return{test:a7(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function wce(e,t="text"){const n=e.encoding[t];return AC(e,n,t,r=>Cj(r,e.config))}function Cj(e,t,n="datum"){if(e){if(Zh(e))return cs(e.value);if(Ln(e)){const{format:r,formatType:i}=e7(e);return Qle({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function AWe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Qe(o))return{tooltip:DSe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return AC(e,o,"tooltip",u=>{const l=Cj(u,i,a);if(l)return l;if(u===null)return;let c=hi("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Dt(c))return{value:c};if(Ot(c))return Xt(c)?c:c.content==="encoding"?DSe(n,s,i,t):{signal:a}})}}function CWe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=a2(f),h=Sl(c)?c:{...c,type:e[d].type},p=h.title||ice(h,i),m=Pt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(po(f)){const y=f==="x"?"x2":"y2",v=V0(e[y]);if(Ma(h.bin)&&v){const b=St(h,{expr:o}),w=St(v,{expr:o}),{format:x,formatType:S}=e7(h);g=L5(b,w,x,S,i),s[y]=!0}}if((po(f)||f===Bd||f===mp)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=e7(h);g=Qle({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=Cj(h,i,o).signal),a.push({channel:f,key:m,value:g})}ace(e,(c,f)=>{gt(c)?u(c,f):yj(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function DSe(e,t,n,{reactiveGeom:r}={}){const i=CWe(e,t,n,{reactiveGeom:r}),s=Jv(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function z3n(e){const{markDef:t,config:n}=e,r=hi("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...V3n(e),...H3n(e)}}function V3n(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=hi("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in bTn?{}:{ariaRoleDescription:{value:t}}}function H3n(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return AC(e,s,"description",u=>Cj(u,e.config));const o=hi("description",n,r);if(o!=null)return{description:cs(o)};if(r.aria===!1)return{};const a=CWe(t,i,r);if(!Fi(a))return{description:{signal:Jv(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function da(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=hi(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=cs(u)));const l=i[e];return AC(t,l,o??e,c=>Xle({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function IWe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??hi("filled",n,i),a=Er(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=hi(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=hi(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:cs(u)}:{},...l?{stroke:cs(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&pt(qHe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...da("color",e,{vgChannel:c,defaultValue:o?u:l}),...da("fill",e,{defaultValue:r.fill?u:void 0}),...da("stroke",e,{defaultValue:r.stroke?l:void 0})}}function q3n(e){const{encoding:t,mark:n}=e,r=t.order;return!f2(n)&&Zh(r)?AC(e,r,"zindex",i=>cs(i.value)):{}}function nA({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Xle({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:cs(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Iu(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[cm(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=nA({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=xce({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&po(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:W3n({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function W3n(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Ln(n)&&i&&t===i.fieldChannel){if(gt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return XL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Rw(n,r,{suffix:"end"},{offset:s})}return Yle(e)}function xce({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=a2(n),u=Zv(n),l=hi(n,s,o,{vgChannel:u});if(l!==void 0)return Q4(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Er([bc.LOG,bc.TIME,bc.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Nc(n)],mult:.5}}}}const G3n={left:"x",center:"xc",right:"x2"},Y3n={top:"y",middle:"yc",bottom:"y2"};function kWe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Zv(e);const i=e==="x"?"align":"baseline",s=hi(i,t,n);let o;return Xt(s)?(pt(QTn(i)),o=void 0):o=s,e==="x"?G3n[o||(r==="top"?"left":"center")]:Y3n[o||r]}function s7(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?RWe(e,t,{defaultPos:n,defaultPos2:r}):Iu(e,t,{defaultPos:n})}function RWe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=cm(e),a=Nc(e),u=K3n(t,r,o),l=u[a]?kWe(e,i,s):Zv(e);return{...Iu(e,t,{defaultPos:n,vgChannel:l}),...u}}function K3n(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=a2(n),l=Nc(n),c=Zv(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?nA({channel:n,markDef:s,encoding:r,model:e}):nA({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Nc(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=X3n({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:G8(n,s)||G8(n,{[n]:YL(n,s,a.style),[l]:YL(l,s,a.style)})||G8(n,a[i])||G8(n,a.mark)||{[c]:xce({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function X3n({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Ln(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Rw(t,s,{suffix:"start"},{offset:u}):Yle({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function G8(e,t){const n=Nc(e),r=Zv(e);if(t[r]!==void 0)return{[r]:Q4(e,t[r])};if(t[e]!==void 0)return{[r]:Q4(e,t[e])};if(t[n]){const i=t[n];if(hx(i))pt(qTn(n));else return{[n]:Q4(e,i)}}}function nb(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=cm(t),a=Nc(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??hi("size",i,n,{vgChannel:a}),p=IHe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return gt(u)&&(Zi(u.bin)||Ma(u.bin)||u.timeUnit&&!l)&&!(h&&!hx(h))&&!r[p]&&!Ea(f)?Z3n({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Ln(u)&&Ea(f)||m)&&!l?J3n(u,t,e):RWe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Q3n(e,t,n,r,i,s,o){if(hx(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=t1("minBandSize",{type:o},r);return{signal:c?`max(${Nh(c)}, ${l})`:l}}else i.band!==1&&(pt(tSn(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Xt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Hb(u)&&Qr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=ho(u,o==="bar"?l:c);if(Xt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Qr(f))return{signal:`${1-f} * ${e}`}}return{value:r7(r.view,e)-2}}function J3n(e,t,n){var N,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Nc(t),f=cm(t),d=IHe(t),h=n.scaleName(d),p=n.getScaleComponent(Ile(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=da("size",n,{vgChannel:c,defaultRef:cs(r.size)}):pt(sSn(r.type)));const y=!!g,v=Aqe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(N=l||p)==null?void 0:N.get("type"),useVlSizeChannel:m});g=g||{[c]:Q3n(c,h||u,p||l,s,v,!!e,r.type)};const b=((k=l||p)==null?void 0:k.get("type"))==="band"&&hx(v)&&!y?"top":"middle",w=kWe(t,r,s,b),x=w==="xc"||w==="yc",{offset:S,offsetType:A}=nA({channel:t,markDef:r,encoding:i,model:n,bandPosition:x?.5:0}),C=Yle({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:xce({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:x?A==="encoding"?0:.5:Xt(v)?{signal:`(1-${v})/2`}:hx(v)?(1-v.band)/2:0});if(c)return{[w]:C,...g};{const D=Zv(f),L=g[c],O=S?{...L,offset:S}:L;return{[w]:C,[D]:Qe(C)?[C[0],{...C[1],offset:O}]:{...C,offset:O}}}}function OSe(e,t,n,r,i,s,o){if(xHe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Xt(n)||Xt(i)||Xt(r)||s){const l=Nh(n),c=Nh(i),f=Nh(r),d=Nh(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Z3n({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=Aqe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=po(n)?hi("binSpacing",s,i)??0:0,m=cm(n),g=Zv(n),y=Zv(m),v=t1("minBandSize",s,i),{offset:b}=nA({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=nA({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),x=cAn({fieldDef:e,scaleName:u}),S=OSe(n,p,c,h,b,v,x),A=OSe(m,p,c,h,w??b,v,x),C=Xt(f)?{signal:`(1-${f.signal})/2`}:hx(f)?(1-f.band)/2:.5,N=eb({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Zi(e.bin)||e.timeUnit){const D=e.timeUnit&&N!==.5;return{[y]:$Se({fieldDef:e,scaleName:u,bandPosition:C,offset:A,useRectOffsetField:D}),[g]:$Se({fieldDef:e,scaleName:u,bandPosition:Xt(C)?{signal:`1-${C.signal}`}:1-C,offset:S,useRectOffsetField:D})}}else if(Ma(e.bin)){const D=Rw(e,u,{},{offset:A});if(gt(t))return{[y]:D,[g]:Rw(t,u,{},{offset:S})};if(u2(e.bin)&&e.bin.step)return{[y]:D,[g]:{signal:`scale("${u}", ${St(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}pt(YHe(m))}function $Se({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return XL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:Sj,endSuffix:Aj}:{}})}const eIn=new Set(["aria","width","height"]);function jd(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?IWe(e):{};return{...tIn(e.markDef,t),...LSe(e,"fill",n),...LSe(e,"stroke",r),...da("opacity",e),...da("fillOpacity",e),...da("strokeOpacity",e),...da("strokeWidth",e),...da("strokeDash",e),...q3n(e),...AWe(e),...wce(e,"href"),...z3n(e)}}function LSe(e,t,n){const{config:r,mark:i,markDef:s}=e;if(hi("invalid",s,r)==="hide"&&n&&!f2(i)){const a=nIn(e,{invalid:!0,channels:oj});if(a)return{[t]:[{test:a,value:null},...Pt(n)]}}return n?{[t]:n}:{}}function tIn(e,t){return vTn.reduce((n,r)=>(!eIn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=cs(e[r])),n),{})}function nIn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&kf(u)&&(s[l]=!0)}return s},{}),i=ct(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Kle(o,t)).join(` ${s} `)}}function Ece(e){const{config:t,markDef:n}=e;if(hi("invalid",n,t)){const i=rIn(e,{channels:fm});if(i)return{defined:{signal:i}}}return{}}function rIn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&kf(l)&&(s[c]=!0)}return s},{}),i=ct(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Kle(o,t)).join(` ${s} `)}}function MSe(e,t){if(t!==void 0)return{[e]:cs(t)}}const QW="voronoi",NWe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(QW)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(f2(s))return pt(TTn(s)),n;const o={name:e.getName(QW),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...AWe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(QW)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},PWe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!hce(e.bind),parse:(e,t,n)=>jWe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=NWe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Cs(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:px(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Et(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+rb)[0],o=r+U5,a=i.items.map(l=>Cs(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},o7="_toggle",DWe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+o7,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+rb,r=t.name+o7;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Pw(e)}}, `)+`${r} ? ${n} : null`}},iIn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Dt(t.clear)?Mb(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(PWe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Cs(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+rb);r(i,"null"),DWe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+o7),r(i,"false"))}return n}},OWe={defined:e=>{const t=e.resolve==="global"&&e.bind&&hce(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ep;return t&&!n&&pt(ITn),t&&n},parse:(e,t,n)=>{const r=Cn(n);if(r.select=Dt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},jWe(t,r),Ot(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=GW(t.bind)?t.bind.legend:"click",s=Dt(i)?Mb(i,"view"):Pt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=GW(t.bind)&&t.bind.legend,s=o=>a=>{const u=Cn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Cs(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+rb),o=r+U5,a=i.items.filter(d=>d.hasLegend).map(d=>Cs(`${r}_${Cs(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+o7),f=GW(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function sIn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Wa(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&OWe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const $We="_translate_anchor",LWe="_translate_delta",oIn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Cg.defined(t),s=r+$We,{x:o,y:a}=t.project.hasChannel;let u=Mb(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+BT,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?WJ(e,Is):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?WJ(e,Aa):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+LWe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&FSe(e,t,o,"width",n),a!==void 0&&FSe(e,t,a,"height",n),n}};function FSe(e,t,n,r,i){const s=t.name,o=s+$We,a=s+LWe,u=n.channel,l=Cg.defined(t),c=i.filter(x=>x.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Is?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const MWe="_zoom_anchor",FWe="_zoom_delta",aIn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Cg.defined(t),s=r+FWe,{x:o,y:a}=t.project.hasChannel,u=Et(e.scaleName(Is)),l=Et(e.scaleName(Aa));let c=Mb(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+BT,f))),n.push({name:r+MWe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&BSe(e,t,o,"width",n),a!==void 0&&BSe(e,t,a,"height",n),n}};function BSe(e,t,n,r,i){const s=t.name,o=n.channel,a=Cg.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?WJ(e,o):u.name,h=s+FWe,p=`${s}${MWe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const mx="_store",rb="_tuple",uIn="_modify",BWe="vlSelectionResolve",Ij=[U3n,B3n,M3n,DWe,PWe,Cg,OWe,iIn,oIn,aIn,NWe];function lIn(e){let t=e.parent;for(;t&&!hf(t);)t=t.parent;return t}function Pw(e,{escape:t}={escape:!0}){let n=t?Et(e.name):e.name;const r=lIn(e);if(r){const{facet:i}=r;for(const s of hd)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Et(r.vgField(s))}])`)}return n}function Tce(e){return Wa(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function jWe(e,t){(Dt(t.select)||!t.select.on)&&delete e.events,(Dt(t.select)||!t.select.clear)&&delete e.clear,(Dt(t.select)||!t.select.toggle)&&delete e.toggle}function GJ(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...GJ(e.object)),t.push(...GJ(e.property))),t)}function UWe(e){return e.object.type==="MemberExpression"?UWe(e.object):e.object.name==="datum"}function zWe(e){const t=Hue(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&UWe(r)&&n.add(GJ(r).slice(1).join("."))}),n}class CC extends Ii{clone(){return new CC(null,this.model,Cn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=a7(this.model,this.filter,this),this._dependentFields=zWe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function cIn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Cs(i.name),o=i.select,a=Dt(o)?o:o.type,u=Ot(o)?Cn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=Cn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:Dt(u.on)?Mb(u.on,"scope"):Pt(Cn(u.on))},f=Cn(i);for(const d of Ij)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function VWe(e,t,n,r="datum"){const i=Dt(t)?t:t.param,s=Cs(i),o=Et(s+mx);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Et(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function HWe(e,t,n){const r=Cs(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&pt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Et(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,pt((a.length?"Multiple ":"No ")+`matching ${Et(i)} encoding found for selection ${Et(n.param)}. Using "field": ${Et(s)}.`)):s=a[0].field}return`${o.name}[${Et(Ad(s))}]`}function fIn(e,t){for(const[n,r]of Jv(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new _c(new CC(t,e,{param:n}),i,Es.Lookup,e.component.data.outputNodeRefCounts)}}function a7(e,t,n){return X4(t,r=>Dt(r)?r:zSn(r)?VWe(e,r,n):oqe(r))}function dIn(e,t){if(e)return Qe(e)&&!Ty(e)?e.map(n=>ice(n,t)).join(", "):e}function JW(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function s4(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=qAn[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(j5(m)){const{condition:g,...y}=m,v=Pt(g),b=hSe[h];if(b){const{vgProp:w,part:x}=b,S=[...v.map(A=>{const{test:C,...N}=A;return{test:a7(null,C),...N}}),y];JW(c,x,w,S),delete c[h]}else if(b===null){const w={signal:v.map(x=>{const{test:S,...A}=x;return`${a7(null,S)} ? ${QTe(A)} : `}).join("")+QTe(y)};c[h]=w}}else if(Xt(m)){const g=hSe[h];if(g){const{vgProp:y,part:v}=g;JW(c,v,y,m),delete c[h]}}Er(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Fi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ho(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Xt(c.encode.labels.update.text)&&(p=ux(a,"datum.label",c.encode.labels.update.text.signal)),JW(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of Lqe)e.hasAxisPart(p)||delete c.encode[p];Fi(c.encode)&&delete c.encode}const h=dIn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ho(l,0)}}}}function qWe(e){const{axes:t}=e.component,n=[];for(const r of fm)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function hIn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>s4(i,"grid",t)),...r.map(i=>s4(i,"grid",t)),...n.map(i=>s4(i,"main",t)),...r.map(i=>s4(i,"main",t))].filter(i=>i)}function jSe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...ct(o),...ct(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Nh(o[c])} : ${Nh(a[c])}`};return l}return t[i]})])}function pIn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:cqe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Xt(n)?"axisOrient":`axis${R5(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:jSe(a,r,e,n),vgAxisConfig:jSe(u,r,e,n),axisConfigStyle:mIn([...u,...a],r)}}function mIn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Pt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function YJ(e,t,n,r={}){var s;const i=FHe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const USe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??gIn(n,e),gridScale:({model:e,channel:t})=>yIn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||GWe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||WWe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??bIn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??_In(t.type,n,gt(t)&&!!t.timeUnit,gt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??xIn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:EIn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=YWe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return jHe(i?[fSe(i)]:[],gt(o)?[fSe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>TIn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??SIn(n,t)};function gIn(e,t){return!Ea(e)&&gt(t)&&!Zi(t==null?void 0:t.bin)&&!Ma(t==null?void 0:t.bin)}function yIn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function vIn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Xt(s)?s:F6(s);{const{configValue:o}=YJ("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?F6(o):n===Is&&Er([Gle,Wle],e.type)&&!(gt(e)&&e.timeUnit)?270:void 0}}function KJ(e){return`(((${e.signal} % 360) + 360) % 360)`}function WWe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Xt(e)){const i=KJ(e),s=Xt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Xt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Xt(e)){const i=KJ(e),s=Xt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Xt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function GWe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Xt(e)){const o=KJ(e),a=Xt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Xt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function bIn(e,t){if(t==="x"&&Er(["quantitative","temporal"],e))return!0}function _In(e,t,n,r){if(n&&!Ot(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function wIn(e){return e==="x"?"bottom":"left"}function xIn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Ea(t)&&t!=="log"){if(gt(e)){if(Zi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Er(["month","hours","day","quarter"],(i=_a(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function EIn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(gt(t)){const{timeUnit:n}=t;if(n){const r=rqe(n);if(r)return{signal:r}}}}function YWe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return UHe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function TIn(e,t){const n=e.values;if(Qe(n))return $qe(t,n);if(Xt(n))return n}function SIn(e,t){return e==="rect"&&ZL(t)?1:0}class rA extends Ii{clone(){return new rA(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=zWe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(d2(r)&&Sqe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${oqe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new rA(t,{calculate:u,as:iA(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${xr(this.transform)}`}}function iA(e,t,n){return St(e,{prefix:t,suffix:"sort_index",...n})}function kj(e,t){return Er(["top","bottom"],t)?"column":Er(["left","right"],t)||e==="row"?"row":"column"}function sA(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ho((t||{})[e],i[e],n.header[e])}function Rj(e,t,n,r){const i={};for(const s of e){const o=sA(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Sce=["row","column"],Ace=["header","footer"];function AIn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=Rj(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=kj(t,a),l=F6(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...XWe(l,u),...KWe(u,l,s),...QWe(r,i,t,hCn,Zqe)}}}function KWe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=GWe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function XWe(e,t){const n=WWe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function CIn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Ace)if(n[i])for(const s of n[i]){const o=kIn(e,t,i,n,s);o!=null&&r.push(o)}return r}function IIn(e,t){const{sort:n}=e;return x0(n)?{field:St(n,{expr:"datum"}),order:n.order??"ascending"}:Qe(n)?{field:iA(e,t,{expr:"datum"}),order:"ascending"}:{field:St(e,{expr:"datum"}),order:n??"ascending"}}function XJ(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=Rj(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Qle({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=kj(t,a);return{text:{signal:u?ux(ux(u,"datum.label",l),"datum.value",St(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...XWe(s,c),...KWe(c,s,o),...QWe(n,e,t,pCn,eWe)}}function kIn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=Rj(["labelOrient"],o.header,a,t);(t==="row"&&!Er(["top","bottom"],f)||t==="column"&&!Er(["left","right"],f))&&(s=XJ(o,t,a))}const u=hf(e)&&!M5(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:IIn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const RIn={column:{start:0,end:1},row:{start:1,end:0}};function NIn(e,t){return RIn[t][e]}function PIn(e,t){const n={};for(const r of hd){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=Rj(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=kj(r,o),u=NIn(s,a);u!==void 0&&(n[a]=u)}}return Fi(n)?void 0:n}function QWe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=sA(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Cce(e){return[...Y8(e,"width"),...Y8(e,"height"),...Y8(e,"childWidth"),...Y8(e,"childHeight")]}function Y8(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Ea(o)&&Hb(a)){const u=e.scaleName(n);return hf(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[zSe(u,a)]:[zSe(u,a),{name:i,update:JWe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=zJ(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function zSe(e,t){const n=`${e}_step`;return Xt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function JWe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ho(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Nh(o)}, ${Nh(s)}) * ${e}_step`}function ZWe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function eGe(e,t){return ct(e).reduce((n,r)=>{const i=e[r];return{...n,...AC(t,i,r,s=>cs(s.value))}},{})}function tGe(e,t){if(hf(t))return e==="theta"?"independent":"shared";if(RC(t))return"shared";if(Oce(t))return po(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Ice(e,t){const n=e.scale[t],r=po(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&pt(cSn(t)),"independent"):e[r][t]||"shared"}const DIn={...yCn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},nGe=ct(DIn);class OIn extends O1{}const VSe={symbols:$In,gradient:LIn,labels:MIn,entries:FIn};function $In(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...wTn({},n,_An),...IWe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?rGe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===kc)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=cs(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=cs(m??1));else if(Qe(f.fill)){const g=QJ(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=cs(g))}}if(f.stroke){if(r==="stroke"||!c&&r===kc)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Qe(f.stroke)){const g=ho(QJ(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==N1){const g=gt(t)&&sGe(n,i,t);g?f.opacity=[{test:g,...cs(m??1)},cs(u.legend.unselectedOpacity)]:m&&(f.opacity=cs(m))}return f={...f,...e},Fi(f)?void 0:f}function LIn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?rGe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=cs(l)),a={...a,...e},Fi(a)?void 0:a}function MIn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=gt(t)?sGe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;dx(c)?f=Dh({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Dh({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&gt(t)&&t.timeUnit===void 0&&(f=Dh({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Fi(d)?void 0:d}function FIn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function rGe(e){return iGe(e,(t,n)=>Math.max(t,n.value))}function QJ(e){return iGe(e,(t,n)=>ho(t,n.value))}function iGe(e,t){if(DAn(e))return Pt(e.condition).reduce(t,e.value);if(Zh(e))return e.value}function sGe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Et(n.field);return r.map(s=>`(!length(data(${Et(Cs(s)+mx)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const HSe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return gqe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return yqe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??qIn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??WIn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??jIn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>FT(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(MT(n)&&Ph(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>BIn(t,e)};function BIn(e,t){const n=e.values;if(Qe(n))return $qe(t,n);if(Xt(n))return n}function jIn(e,t,n,r){if(t!=="shape"){const i=QJ(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function UIn(e){const{legend:t}=e;return ho(t.type,zIn(e))}function zIn({channel:e,timeUnit:t,scaleType:n}){if(MT(e)){if(Er(["quarter","month","day"],t))return"symbol";if(Ph(n))return"gradient"}return"symbol"}function VIn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??HIn(n,t)}function HIn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function qIn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Ph(i))return n==="horizontal"?r==="top"||r==="bottom"?qSe(t,"width",o,s):o:qSe(t,"height",u,a)}function qSe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function WIn(e){if(Er(["quantile","threshold","log","symlog"],e))return"greedy"}function oGe(e){const t=Gs(e)?GIn(e):QIn(e);return e.component.legends=t,t}function GIn(e){const{encoding:t}=e,n={};for(const r of[kc,...nWe]){const i=qo(t[r]);!i||!e.getScaleComponent(r)||r===Rc&&gt(i)&&i.type===SC||(n[r]=XIn(e,r))}return n}function YIn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function KIn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function XIn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new OIn({},YIn(e,t));sIn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=qo(i[t]),f=gt(c)?(w=_a(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=UIn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=VIn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const x of nGe){if(h==="gradient"&&x.startsWith("symbol")||h==="symbol"&&x.startsWith("gradient"))continue;const S=x in HSe?HSe[x](m):n[x];if(S!==void 0){const A=KIn(S,x,n,e.fieldDef(t));(A||s.legend[x]===void 0)&&a.set(x,S,A)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const x of["labels","legend","title","symbols","gradient","entries"]){const S=eGe(g[x]??{},e),A=x in VSe?VSe[x](S,b):S;A!==void 0&&!Fi(A)&&(v[x]={...y!=null&&y.length&&gt(c)?{name:`${Cs(c.field)}_legend_${x}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:A})}return Fi(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function QIn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){oGe(r);for(const i of ct(r.component.legends))n.legend[i]=Ice(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=aGe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ct(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function aGe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of nGe){const c=tb(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return JIn(f,d);case"title":return zHe(f,d);case"type":return i=!0,qc("symbol")}return Tj(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&GL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&GL(e.explicit,["encode","gradient"])),e}function JIn(e,t){return t.value==="circle"?t:e}function ZIn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function uGe(e){const t=e.component.legends,n={};for(const i of ct(t)){const s=e.getScaleComponent(i),o=Bi(s.get("domains"));if(n[o])for(const a of n[o])aGe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Wa(n).flat().map(i=>e4n(i,e.config)).filter(i=>i!==void 0)}function e4n(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of nWe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Xt(s.encode.labels.update.text)&&(l=ux(r,"datum.label",s.encode.labels.update.text.signal)),ZIn(s,"labels","text",{signal:l})}return s}}function t4n(e){return RC(e)||Oce(e)?n4n(e):lGe(e)}function n4n(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),lGe(e))}function lGe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Xt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Er(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const r4n=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class cGe extends O1{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function fGe(e){e.component.projection=Gs(e)?i4n(e):a4n(e)}function i4n(e){if(e.hasProjection){const t=ec(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?s4n(e):void 0,s=new cGe(e.projectionName(!0),{...ec(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function s4n(e){const t=[],{encoding:n}=e;for(const r of[[yp,gp],[Cd,vp]])(qo(n[r[0]])||qo(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Rc)&&e.typedFieldDef(Rc).type===SC&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Es.Main)),t}function o4n(e,t){const n=wle(r4n,i=>!!(!sn(e.explicit,i)&&!sn(t.explicit,i)||sn(e.explicit,i)&&sn(t.explicit,i)&&af(e.get(i),t.get(i))));if(af(e.size,t.size)){if(n)return e;if(af(e.explicit,{}))return t;if(af(t.explicit,{}))return e}return null}function a4n(e){if(e.children.length===0)return;let t;for(const r of e.children)fGe(r);const n=wle(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=o4n(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new cGe(r,t.specifiedProjection,t.size,Cn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function u4n(e,t,n,r){if(B5(t,n)){const i=Gs(e)?e.axis(n)??e.legend(n)??{}:{},s=St(t,{expr:"datum"}),o=St(t,{expr:"datum",binSuffix:"end"});return{formulaAs:St(t,{binSuffix:"range",forAs:!0}),formula:L5(s,o,i.format,i.formatType,r)}}return{}}function dGe(e,t){return`${OHe(e)}_${t}`}function l4n(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function kce(e,t,n){const r=vj(n,void 0)??{},i=dGe(r,t);return e.getName(`${i}_bins`)}function c4n(e){return"as"in e}function WSe(e,t,n){let r,i;c4n(e)?r=Dt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[St(e,{forAs:!0}),St(e,{binSuffix:"end",forAs:!0})];const s={...vj(t,void 0)},o=dGe(s,e.field),{signal:a,extentSignal:u}=l4n(n,o);if(aj(s.extent)){const c=s.extent;i=HWe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class T0 extends Ii{clone(){return new T0(null,Cn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Sl(s)&&Zi(s.bin)){const{key:a,binComponent:u}=WSe(s,s.bin,n);i[a]={...u,...i[a],...u4n(n,s,o,n.config)}}return i},{});return Fi(r)?null:new T0(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=WSe(n,n.bin,r);return new T0(t,{[i]:s})}merge(t,n){for(const r of ct(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=u0([...this.bins[r].as,...t.bins[r].as],xr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Wa(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Wa(this.bins).map(t=>t.field))}hash(){return`Bin ${xr(this.bins)}`}assemble(){return Wa(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Ad(t.field),as:r,signal:t.signal,...aj(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Ad(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:St({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function f4n(e,t,n,r){var s;const i=Gs(r)?r.encoding[cm(t)]:void 0;if(Sl(n)&&Gs(r)&&Cqe(n,i,r.markDef,r.config)){e.add(St(n,{})),e.add(St(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=eb({fieldDef:n,markDef:a,config:u});B6(o)&&l!==.5&&po(t)&&(e.add(St(n,{suffix:Sj})),e.add(St(n,{suffix:Aj}))),n.bin&&B5(n,t)&&e.add(St(n,{binSuffix:"range"}))}else if(THe(t)){const o=EHe(t);e.add(r.getName(o))}else e.add(St(n));return d2(n)&&tAn((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function d4n(e,t){for(const n of ct(t)){const r=t[n];for(const i of ct(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class jh extends Ii{clone(){return new jh(null,new Set(this.dimensions),Cn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([St(o,{forAs:!0})]);else{if(e1(u)||Vb(u)){const c=e1(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([St({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([St(o,{forAs:!0})]);P1(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([St({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([St({field:l,aggregate:"max"},{forAs:!0})]))}else f4n(s,a,o,n)}),s.size+ct(i).length===0)?null:new jh(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||St(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||St(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+ct(i).length===0?null:new jh(t,r,i)}merge(t){return mHe(this.dimensions,t.dimensions)?(d4n(this.measures,t.measures),!0):(ASn("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ct(this.measures)])}producedFields(){const t=new Set;for(const n of ct(this.measures))for(const r of ct(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${xr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of ct(this.measures))for(const o of ct(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Ad(s));return{type:"aggregate",groupby:[...this.dimensions].map(Ad),ops:t,fields:n,as:r}}}class IC extends Ii{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of hd){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[St(o),...Zi(a)?[St(o,{binSuffix:"end"})]:[]],...x0(u)?{sortField:u}:Qe(u)?{sortIndexField:iA(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of hd)this[n]&&(t+=` ${n.charAt(0)}:${xr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of hd)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of hd)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of fm){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Ea(i)&&Hb(s)){const o=Nj(this.childModel,n),a=Dce(o);a?t[n]=a:pt(Ole(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=pj,field:f}=u;s.push(f),o.push(c),a.push(St(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Sce){for(const c of Ace){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Ag,Sg])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function GSe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function h4n(e,t){const n=Tle(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=GSe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=GSe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return pt($Tn(t)),null}function p4n(e){const t={};return NO(e.filter,n=>{if(sqe(n)){let r=null;Fle(n)?r=Zc(n.equal):jle(n)?r=Zc(n.lte):Ble(n)?r=Zc(n.lt):Ule(n)?r=Zc(n.gt):zle(n)?r=Zc(n.gte):Vle(n)?r=n.range[0]:Hle(n)&&(r=(n.oneOf??n.in)[0]),r&&(l2(r)?t[n.field]="date":Qr(r)?t[n.field]="number":Dt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function m4n(e){const t={};function n(r){eA(r)?t[r.field]="date":r.type==="quantitative"&&dTn(r.aggregate)?t[r.field]="number":GS(r.field)>1?r.field in t||(t[r.field]="flatten"):d2(r)&&x0(r.sort)&&GS(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Gs(e)||hf(e))&&e.forEachFieldDef((r,i)=>{if(Sl(r))n(r);else{const s=a2(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Gs(e)){const{mark:r,markDef:i,encoding:s}=e;if(f2(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];gt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function g4n(e){const t={};if(Gs(e)&&e.component.selection)for(const n of ct(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&GS(i.field)>1&&(t[i.field]="flatten")}return t}class ku extends Ii{clone(){return new ku(null,Cn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${xr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!gv(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of ct(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:pt(rSe(a,r[a],u.value)))}for(const a of ct(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:pt(rSe(a,n[a],u)))}const s=new O1(n,r);i.copyAll(s);const o={};for(const a of ct(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return ct(o).length===0||i.parseNothing?null:new ku(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ct(this._parse)){const r=this._parse[n];GS(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(ct(this._parse))}dependentFields(){return new Set(ct(this._parse))}assembleTransforms(t=!1){return ct(this._parse).filter(n=>t?GS(n)>1:!0).map(n=>{const r=h4n(n,this._parse[n]);return r?{type:"formula",expr:r,as:EC(n)}:null}).filter(n=>n!==null)}}class ib extends Ii{clone(){return new ib(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ep])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ep}}}class z5 extends Ii{clone(){return new z5(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${xr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class V5 extends Ii{clone(){return new V5(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${xr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class gx extends Ii{constructor(t){super(null),t??(t={name:"source"});let n;if(gv(t)||(n=t.format?{...vc(t.format,["parse"])}:{}),j6(t))this._data={values:t.values};else if(tA(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Er(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else _We(t)?this._data={values:[{type:"Sphere"}]}:(vWe(t)||gv(t))&&(this._data={});this._generator=gv(t),t.name&&(this._name=t.name),n&&!Fi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var YSe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},y4n=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},o4;function Rce(e){return e instanceof gx||e instanceof z5||e instanceof V5}class Nce{constructor(){o4.set(this,void 0),YSe(this,o4,!1,"f")}setModified(){YSe(this,o4,!0,"f")}get modifiedFlag(){return y4n(this,o4,"f")}}o4=new WeakMap;class h2 extends Nce{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Pce extends Nce{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class v4n extends Pce{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ct(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class b4n extends Pce{constructor(t){super(),this.requiresSelectionId=t&&Tce(t)}run(t){t instanceof ib&&(this.requiresSelectionId&&(Rce(t.parent)||t.parent instanceof jh||t.parent instanceof ku)||(this.setModified(),t.remove()))}}class _4n extends Nce{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof E0&&(r=t.producedFields(),xle(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class w4n extends Pce{constructor(){super()}run(t){t instanceof _c&&!t.isRequired()&&(this.setModified(),t.remove())}}class x4n extends h2{run(t){if(!Rce(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ku)if(t instanceof ku)this.setModified(),t.merge(n);else{if(Ele(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class E4n extends h2{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ku);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of ct(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Fi(i)){this.setModified();const o=new ku(t,i);for(const a of n){if(a instanceof ku)for(const u of ct(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ku&&ct(a.parse).length===0&&a.remove()}}}}}class T4n extends h2{run(t){t instanceof _c||t.numChildren()>0||t instanceof IC||t instanceof gx||(this.setModified(),t.remove())}}class S4n extends h2{run(t){const n=t.children.filter(i=>i instanceof E0),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class A4n extends h2{run(t){const n=t.children.filter(i=>i instanceof jh),r={};for(const i of n){const s=xr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of ct(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class C4n extends h2{constructor(t){super(),this.model=t}run(t){const n=!(Rce(t)||t instanceof CC||t instanceof ku||t instanceof ib),r=[],i=[];for(const s of t.children)s instanceof T0&&(n&&!Ele(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof T0?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class I4n extends h2{run(t){const n=[...t.children];if(!ax(n,o=>o instanceof _c)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof _c){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof _c)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class p2 extends Ii{clone(){return new p2(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=u0(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??St(t)}hash(){return`JoinAggregateTransform ${xr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function k4n(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=St(r);return i&&t.push(i),t},[])}function R4n(e){return Qe(e)&&e.every(t=>Dt(t))&&e.length>1}class Ig extends Ii{clone(){return new Ig(null,Cn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ho(f.order,"ascending"));const l={field:a,order:u};let c;return R4n(s)?c=s:Dt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Ig(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return V0(p)}).filter(h=>!!h),c=k4n(n),f=n.encoding.order;let d;if(Qe(f)||gt(f))d=BHe(f);else{const h=Iqe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Ig(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${xr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[St(i,{binSuffix:"mid"})]:[St(i,{}),St(i,{binSuffix:"end"})]:[St(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=St(c,{expr:"datum"}),p=St(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:St(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:St(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class kC extends Ii{clone(){return new kC(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=u0(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??St(t)}hash(){return`WindowTransform ${xr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Ple(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function N4n(e){function t(n){if(!(n instanceof IC)){const r=n.clone();if(r instanceof _c){const i=ZJ+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof jh||r instanceof Ig||r instanceof kC||r instanceof p2)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function JJ(e){if(e instanceof IC)if(e.numChildren()===1&&!(e.children[0]instanceof _c)){const t=e.children[0];(t instanceof jh||t instanceof Ig||t instanceof kC||t instanceof p2)&&t.addDimensions(e.fields),t.swapWithParent(),JJ(e)}else{const t=e.model.component.data.main;hGe(t);const n=N4n(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(JJ)}function hGe(e){if(e instanceof _c&&e.type===Es.Main&&e.numChildren()===1){const t=e.children[0];t instanceof IC||(t.swapWithParent(),hGe(e))}}const ZJ="scale_",K8=5;function eZ(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!eZ(t.children))return!1}return!0}function th(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function KSe(e,t,n){let r=e.sources,i=!1;return i=th(new w4n,r)||i,i=th(new b4n(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=th(new T4n,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=th(new x4n,r)||i,i=th(new C4n(t),r)||i,i=th(new _4n,r)||i,i=th(new E4n,r)||i,i=th(new A4n,r)||i,i=th(new S4n,r)||i,i=th(new v4n,r)||i,i=th(new I4n,r)||i),e.sources=r,i}function P4n(e,t){eZ(e.sources);let n=0,r=0;for(let i=0;i<K8&&KSe(e,t,!0);i++)n++;e.sources.map(JJ);for(let i=0;i<K8&&KSe(e,t,!1);i++)r++;eZ(e.sources),Math.max(n,r)===K8&&pt(`Maximum optimization runs(${K8}) reached.`)}class ca{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ca(()=>t(n))}}function pGe(e){Gs(e)?D4n(e):O4n(e)}function D4n(e){const t=e.component.scales;for(const n of ct(t)){const r=L4n(e,n);if(t[n].setWithExplicit("domains",r),F4n(e,n),e.component.data.isFaceted){let s=e;for(;!hf(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)hg(a)&&(a.data=ZJ+a.data.replace(ZJ,""))}}}function O4n(e){for(const n of e.children)pGe(n);const t=e.component.scales;for(const n of ct(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=tb(r,o.getWithExplicit("domains"),"domains","scale",tZ);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&pt(NTn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function $4n(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=XSe(t,n);if(!i){pt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=XSe(t,n);if(i)return"unaggregated"}return e}function L4n(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=$4n(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&qo(r.x2)?qo(r.x)?tb(py(n,i,e,"x"),py(n,i,e,"x2"),"domain","scale",tZ):py(n,i,e,"x2"):t==="y"&&qo(r.y2)?qo(r.y)?tb(py(n,i,e,"y"),py(n,i,e,"y2"),"domain","scale",tZ):py(n,i,e,"y2"):py(n,i,e,t)}function M4n(e,t,n){return e.map(r=>({signal:`{data: ${bj(r,{timeUnit:n,type:t})}}`}))}function ZW(e,t,n){var i;const r=(i=_a(n))==null?void 0:i.unit;return t==="temporal"||r?M4n(e,t,r):[e]}function py(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=qo(i[r]),{type:c}=l,f=l.timeUnit;if(eAn(t)){const p=py(e,void 0,n,r),m=ZW(t.unionWith,c,f);return zp([...m,...p.value])}else{if(Xt(t))return zp([t]);if(t&&t!=="unaggregated"&&!dqe(t))return zp(ZW(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return qc([[0,1]]);const p=n.requestDataName(Es.Main);return qc([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=P1(r)&&gt(l)?B4n(n,r,e):void 0;if(dm(l)){const p=ZW([l.datum],c,f);return qc(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Es.Main),{field:m}=l;return qc([{data:p,field:St({field:m,aggregate:"min"})},{data:p,field:St({field:m,aggregate:"max"})}])}else if(Zi(h.bin)){if(Ea(e))return qc(e==="bin-ordinal"?[]:[{data:M6(d)?n.requestDataName(Es.Main):n.requestDataName(Es.Raw),field:n.vgField(r,B5(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!Ot(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Zi(p)){const m=kce(n,h.field,p);return qc([new ca(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return qc([{data:n.requestDataName(Es.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Er(["time","utc"],e)){const p=i[cm(r)];if(Cqe(h,p,s,a)){const m=n.requestDataName(Es.Main),g=eb({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=B6(o)&&g!==.5&&po(r);return qc([{data:m,field:n.vgField(r,y?{suffix:Sj}:{})},{data:m,field:n.vgField(r,{suffix:y?Aj:"end"})}])}}return qc(d?[{data:M6(d)?n.requestDataName(Es.Main):n.requestDataName(Es.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Es.Main),field:n.vgField(r)}])}function eG(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":pj),...r?{field:Ad(r)}:{},...i?{order:i}:{}}}function F4n(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=dqe(r)&&r,o=u2(i)&&aj(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function B4n(e,t,n){if(!Ea(n))return;const r=e.fieldDef(t),i=r.sort;if(Sqe(i))return{op:"min",field:iA(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(x0(i)){const a=s&&!o.has(i.field);return eG(i,a)}else if(Tqe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(e1(c)||Vb(c))return eG({field:St(l),order:u},d);if(Ple(c)||!c)return eG({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Er(["ascending",void 0],i))return!0}}function XSe(e,t){const{aggregate:n,type:r}=e;return n?Dt(n)&&!pTn.has(n)?{valid:!1,reason:rSn(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:iSn(e)}:{valid:!0}:{valid:!1,reason:nSn(e)}}function tZ(e,t,n,r){return e.explicit&&t.explicit&&pt(lSn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function j4n(e){const t=u0(e.map(o=>{if(hg(o)){const{sort:a,...u}=o;return u}return o}),xr),n=u0(e.map(o=>{if(hg(o)){const a=o.sort;return a!==void 0&&!M6(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),xr);if(t.length===0)return;if(t.length===1){const o=e[0];if(hg(o)&&n.length>0){let a=n[0];if(n.length>1){pt(sSe);const u=n.filter(l=>Ot(l)&&"op"in l&&l.op!=="min");n.every(l=>Ot(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(Ot(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=u0(n.map(o=>M6(o)||!("op"in o)||Dt(o.op)&&o.op in cTn?o:(pt(fSn(o)),!0)),xr);let i;r.length===1?i=r[0]:r.length>1&&(pt(sSe),i=!0);const s=u0(e.map(o=>hg(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Dce(e){if(hg(e)&&Dt(e.field))return e.field;if(mTn(e)){let t;for(const n of e.fields)if(hg(n)&&Dt(n.field)){if(!t)t=n.field;else if(t!==n.field)return pt(dSn),t}return pt(hSn),t}else if(gTn(e)){pt(pSn);const t=e.fields[0];return Dt(t)?t:void 0}}function Nj(e,t){const r=e.component.scales[t].get("domains").map(i=>(hg(i)&&(i.data=e.lookupDataSource(i.data)),i));return j4n(r)}function mGe(e){return RC(e)||Oce(e)?e.children.reduce((t,n)=>t.concat(mGe(n)),QSe(e)):QSe(e)}function QSe(e){return ct(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=U4n(i.range,s,n,e),h=Nj(e,n),p=a?$3n(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function U4n(e,t,n,r){if(po(n)){if(Hb(e))return{step:{signal:`${t}_step`}}}else if(Ot(e)&&hg(e))return{...e,data:r.lookupDataSource(e.data)};return e}class gGe extends O1{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:ax(this.get("domains"),t=>Qe(t)&&t.length===2&&Qr(t[0])&&t[0]<=0&&Qr(t[1])&&t[1]>=0)}}const z4n=["range","scheme"];function V4n(e){const t=e.component.scales;for(const n of oj){const r=t[n];if(!r)continue;const i=H4n(n,e);r.setWithExplicit("range",i)}}function JSe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Nc(t),o=e.getName(s);if(Ot(r)&&r.binned&&r.step!==void 0)return new ca(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Zi(r)){const a=kce(e,i,r);return new ca(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function H4n(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of z4n)if(n[f]!==void 0){const d=BJ(s,f),h=hqe(e,f);if(!d)pt(WHe(s,f,e));else if(h)pt(h);else switch(f){case"range":{const p=n.range;if(Qe(p)){if(po(e))return zp(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return ca.fromName(y,g)}return m}))}else if(Ot(p))return zp({data:t.requestDataName(Es.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return zp(p)}case"scheme":return zp(q4n(n[f]))}}const o=e===Is||e==="xOffset"?"width":"height",a=r[o];if(H0(a)){if(po(e))if(Ea(s)){const f=vGe(a,t,e);if(f)return zp({step:f})}else pt(GHe(o));else if(D5(e)){const f=e===Fb?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=bGe(a,s);if(p)return zp(p)}}}const{rangeMin:u,rangeMax:l}=n,c=W4n(e,t);return(u!==void 0||l!==void 0)&&BJ(s,"rangeMin")&&Qe(c)&&c.length===2?zp([u??c[0],l??c[1]]):qc(c)}function q4n(e){return ZSn(e)?{scheme:e.name,...vc(e,["name"])}:{scheme:e}}function yGe(e,t,n,{center:r}={}){const i=Nc(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Aa&&kf(n)?r?[ca.fromName(a=>`${o(a)}/2`,s),ca.fromName(a=>`-${o(a)}/2`,s)]:[ca.fromName(o,s),0]:r?[ca.fromName(a=>`-${o(a)}/2`,s),ca.fromName(a=>`${o(a)}/2`,s)]:[0,ca.fromName(o,s)]}function W4n(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=qo(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Is:case Aa:{if(Er(["point","band"],u)){const f=_Ge(e,n,r.view);if(H0(f))return{step:vGe(f,t,e)}}return yGe(e,t,u)}case Fb:case TC:return G4n(e,t,u);case R1:{const f=t.component.scales[e].get("zero"),d=wGe(i,f,r),h=X4n(i,n,t,r);return QS(u)?K4n(d,h,Y4n(u,r,l,e)):[d,h]}case Bd:return[0,Math.PI*2];case o2:return[0,360];case mp:return[0,new ca(()=>{const f=t.getSignalName(hf(t.parent)?"child_width":"width"),d=t.getSignalName(hf(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Ub:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case zb:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Rc:return"symbol";case kc:case um:case lm:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case N1:case Bb:case jb:return[r.scale.minOpacity,r.scale.maxOpacity]}}function vGe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Ile(n),o=r[s];if(iWe({step:e,offsetIsDiscrete:Ln(o)&&aqe(o.type)})==="offset"&&Bqe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${_Tn(f)})`}}else return e.step}function bGe(e,t){if(iWe({step:e,offsetIsDiscrete:Ea(t)})==="offset")return{step:e.step}}function G4n(e,t,n){const r=e===Fb?"x":"y",i=t.getScaleComponent(r);if(!i)return yGe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=_Ge(r,t.size,t.config.view);if(H0(l)){const c=bGe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(gt(l)&&l.timeUnit){const c=rqe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=eb({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Xt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Xt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return hHe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function _Ge(e,t,n){const r=e===Is?"width":"height",i=t[r];return i||i7(n,r)}function Y4n(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Qe(n)?n.length+1:(pt(ESn(r)),3)}}function K4n(e,t,n){const r=()=>{const i=Nh(t),s=Nh(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Xt(t)?new ca(r):{signal:r()}}function wGe(e,t,n){if(t)return Xt(t)?{signal:`${t.signal} ? 0 : ${wGe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(uj("size",e))}const ZSe=.95;function X4n(e,t,n,r){const i={x:JSe(n,"x"),y:JSe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=eAe(t,i,r.view);return Qr(s)?s-1:new ca(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=eAe(t,i,r.view);return Qr(s)?Math.pow(ZSe*s,2):new ca(()=>`pow(${ZSe} * ${s.signal}, 2)`)}}throw new Error(uj("size",e))}function eAe(e,t,n){const r=H0(e.width)?e.width.step:r7(n,"width"),i=H0(e.height)?e.height.step:r7(n,"height");return t.x||t.y?new ca(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function xGe(e,t){Gs(e)?Q4n(e,t):TGe(e,t)}function Q4n(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of ct(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=qo(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=BJ(h,t),y=hqe(a,t);if(d!==void 0&&(g?y&&pt(y):pt(WHe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":l2(u[t])||b==="temporal"||v?l.set(t,{signal:bj(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in tAe?tAe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:jqe(i,a),hasSecondaryRangeChannel:!!i[cm(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const tAe={bins:({model:e,fieldOrDatumDef:t})=>gt(t)?J4n(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Z4n(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>ekn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>tkn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>nkn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>rkn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=gt(e)?e.sort:void 0;return ikn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>skn(e,t,n,r,i,s.scale,o)};function EGe(e){Gs(e)?V4n(e):TGe(e,"range")}function TGe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?EGe(r):xGe(r,t);for(const r of ct(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=tb(i,a,t,"scale",yWe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function J4n(e,t){const n=t.bin;if(Zi(n)){const r=kce(e,t.field,n);return new ca(()=>e.getSignalName(r))}else if(Ma(n)&&u2(n)&&n.step!==void 0)return{step:n.step}}function Z4n(e,t){if(Er([kc,um,lm],e)&&t!=="nominal")return"hcl"}function ekn(e,t,n,r,i,s){var o;if(!((o=V0(s))!=null&&o.bin||Qe(n)||i!=null||r!=null||Er([bc.TIME,bc.UTC],e)))return po(t)?!0:void 0}function tkn(e,t,n,r,i,s){if(po(e)){if(Ph(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(gt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===bc.POINT)return n.pointPadding}}function nkn(e,t,n,r,i,s=!1){if(e===void 0){if(po(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:ho(o,n==="bar"?a:u)}else if(D5(t)&&r===bc.BAND)return i.offsetBandPaddingInner}}function rkn(e,t,n,r,i,s=!1){if(e===void 0){if(po(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===bc.BAND)return ho(o,Xt(r)?{signal:`${r.signal}/2`}:r/2)}else if(D5(t)){if(n===bc.POINT)return .5;if(n===bc.BAND)return i.offsetBandPaddingOuter}}}function ikn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return kf(e)&&t==="descending"?Xt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(kf(e)&&t==="descending")return!0}function skn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&kf(i)){if(Qe(n)){const u=n[0],l=n[n.length-1];if(Qr(u)&&u<=0&&Qr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!QS(i))return!0;if(!(gt(t)&&t.bin)&&Er([...fm,...nTn],e)){const{orient:u,type:l}=r;return Er(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Er(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function okn(e,t,n,r,i=!1){const s=akn(t,n,r,i),{type:o}=e;return P1(t)?o!==void 0?oAn(t,o)?gt(n)&&!sAn(o,n.type)?(pt(aSn(o,s)),s):o:(pt(oSn(t,o,s)),s):s:null}function akn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(MT(e)||qW(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&pt(WW(e,"ordinal")),"ordinal";if(po(e)||D5(e)){if(Er(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Nle)return"band";const s=n[Nc(e)];return hx(s)||ZS(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return MT(e)?"time":qW(e)==="discrete"?(pt(WW(e,"temporal")),"ordinal"):gt(t)&&t.timeUnit&&_a(t.timeUnit).utc?"utc":"time";case"quantitative":return MT(e)?gt(t)&&Zi(t.bin)?"bin-ordinal":"linear":qW(e)==="discrete"?(pt(WW(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(HHe(t.type))}function ukn(e,{ignoreRange:t}={}){SGe(e),pGe(e);for(const n of iAn)xGe(e,n);t||EGe(e)}function SGe(e){Gs(e)?e.component.scales=lkn(e):e.component.scales=fkn(e)}function lkn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of oj){const o=qo(t[s]);if(o&&n===wqe&&s===Rc&&o.type===SC)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=jqe(t,s),l=okn(a,s,o,r,u);i[s]=new gGe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const ckn=yWe((e,t)=>aSe(e)-aSe(t));function fkn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){SGe(s);for(const o of ct(s.component.scales))if((t=i.scale)[o]??(t[o]=tGe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?YSn(a.value,u.value)?r[o]=tb(a,u,"type","scale",ckn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of ct(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new gGe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class tG{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Gs(e){return(e==null?void 0:e.type)==="unit"}function hf(e){return(e==null?void 0:e.type)==="facet"}function Oce(e){return(e==null?void 0:e.type)==="concat"}function RC(e){return(e==null?void 0:e.type)==="layer"}class $ce{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=ec(a),this.name=t.name??i,this.title=Ty(t.title)?{text:t.title}:t.title?ec(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new tG,this.projectionNameMap=r?r.projectionNameMap:new tG,this.signalNameMap=r?r.signalNameMap:new tG,this.data=t.data,this.description=t.description,this.transforms=v3n(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:xCn(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:mj(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new O1,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Cn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){ukn(this)}parseProjection(){fGe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){oGe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of ct(r)){const o=r[s];o!==void 0&&(i[s]=cs(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=cs(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Fi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=PIn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of hd)t[r].title&&n.push(AIn(this,r));for(const r of Sce)n=n.concat(CIn(this,r));return n}assembleAxes(){return hIn(this.component.axes,this.config)}assembleLegends(){return uGe(this)}assembleProjections(){return t4n(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...$He(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Er(["unit","layer"],this.type)?Er(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Fi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||hf(this.parent)?mGe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Cs((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Es[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(hf(this.parent)){const n=ZWe(t),r=sj(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Ea(s)&&Hb(o)){const a=i.get("name"),u=Nj(this,r),l=Dce(u);if(l){const c=St({aggregate:"distinct",field:l},{expr:"datum"});return{signal:JWe(a,i,c)}}else return pt(Ole(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(AHe(t)&&P1(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(STn(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class AGe extends $ce{vgField(t,n={}){const r=this.fieldDef(t);if(r)return St(r,n)}reduceFieldDef(t,n){return QAn(this.getMapping(),(r,i,s)=>{const o=V0(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){ace(this.getMapping(),(r,i)=>{const s=V0(r);s&&t(s,i)},n)}}class Pj extends Ii{clone(){return new Pj(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Cn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${xr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class Dj extends Ii{clone(){return new Dj(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Cn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${xr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class U6 extends Ii{clone(){return new U6(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(hi("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=P1(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");kf(d)&&l.aggregate!=="count"&&!f2(i)&&(u[l.field]=l)}return u},{});return ct(a).length?new U6(t,a):null}dependentFields(){return new Set(ct(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${xr(this.filter)}`}assemble(){const t=ct(this.filter).reduce((n,r)=>{const i=this.filter[r],s=St(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class Oj extends Ii{clone(){return new Oj(this.parent,Cn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Cn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${xr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class $j extends Ii{clone(){return new $j(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Cn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${xr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class jT extends Ii{clone(){return new jT(null,Cn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[yp,gp],[Cd,vp]]){const s=i.map(o=>{const a=qo(n.encoding[o]);return gt(a)?a.field:dm(a)?{expr:`${a.datum}`}:Zh(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new jT(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Rc)){const i=n.typedFieldDef(Rc);i.type===SC&&(t=new jT(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Dt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${xr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class z6 extends Ii{clone(){return new z6(null,this.projection,Cn(this.fields),Cn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[yp,gp],[Cd,vp]]){const i=r.map(o=>{const a=qo(n.encoding[o]);return gt(a)?a.field:dm(a)?{expr:`${a.datum}`}:Zh(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Cd?"2":"";(i[0]||i[1])&&(t=new z6(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Dt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${xr(this.fields)} ${xr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Dw extends Ii{clone(){return new Dw(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Dw(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(gt(i)&&gt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=zqe(n.mark,r);return new Dw(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${xr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:ZCn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class Lj extends Ii{clone(){return new Lj(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Cn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${xr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class V6 extends Ii{clone(){return new V6(null,Cn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(e3n(o)){let u=kGe(o.data,s);u||(u=new gx(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new _c(u,l,Es.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(t3n(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Cs(u),u)}catch{throw new Error(kTn(u))}if(a=l.materialized,!a)throw new Error(RTn(u))}return new V6(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${xr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Pt(this.transform.as)}:{}};else{let n=this.transform.as;Dt(n)||(pt(FTn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Mj extends Ii{clone(){return new Mj(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Cn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${xr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Fj extends Ii{clone(){return new Fj(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Cn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${xr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class Bj extends Ii{clone(){return new Bj(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=u0((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${xr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class jj extends Ii{clone(){return new jj(null,Cn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${xr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function CGe(e){let t=0;function n(r,i){if(r instanceof gx&&!r.isGenerator&&!tA(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ku&&(r.parent instanceof gx&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof IC){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof z5||r instanceof V5||r instanceof U6||r instanceof CC||r instanceof rA||r instanceof z6||r instanceof jh||r instanceof V6||r instanceof kC||r instanceof p2||r instanceof $j||r instanceof Oj||r instanceof Pj||r instanceof Lj||r instanceof Mj||r instanceof Fj||r instanceof ib||r instanceof jj||r instanceof Bj||r instanceof Dj)&&i.transform.push(r.assemble()),(r instanceof T0||r instanceof E0||r instanceof Dw||r instanceof Ig||r instanceof jT)&&i.transform.push(...r.assemble()),r instanceof _c&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof _c?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof _c&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function dkn(e){const t=[],n=CGe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function hkn(e,t){const n=[],r=CGe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function pkn(e){return e==="top"||e==="left"||Xt(e)?"header":"footer"}function mkn(e){for(const t of hd)gkn(e,t);nAe(e,"x"),nAe(e,"y")}function gkn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=sA("title",null,r,t);let l=FT(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Qe(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=sA("labelOrient",a.header,r,t),f=a.header!==null?ho((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Er(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[IGe(e,t,f)]}}}function IGe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function nAe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Ice(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=pkn(a.get("orient"));o[u]??(o[u]=[IGe(e,s,!1)]);const l=s4(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function ykn(e){Lce(e),u7(e,"width"),u7(e,"height")}function vkn(e){Lce(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";u7(e,t),u7(e,n)}function Lce(e){for(const t of e.children)t.parseLayoutSize()}function u7(e,t){const n=ZWe(t),r=sj(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??tGe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=tb(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function bkn(e){const{size:t,component:n}=e;for(const r of fm){const i=Nc(r);if(t[i]){const s=t[i];n.layoutSize.set(i,H0(s)?"step":s,!0)}else{const s=_kn(e,i);n.layoutSize.set(i,s,!1)}}}function _kn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Ea(s)){const a=i7(r.view,t);return Hb(o)||H0(a)?"step":a}else return zJ(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return zJ(r.view,t);{const s=i7(r.view,t);return H0(s)?s.step:s}}}function nZ(e,t,n){return St(t,{suffix:`by_${St(e)}`,...n})}class J4 extends AGe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Uce(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!M5(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ct(t),r={};for(const i of n){if(![Sg,Ag].includes(i)){pt(uj(i,"facet"));break}const s=t[i];if(s.field===void 0){pt(MJ(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=sce(t,n);return r.header?r.header=ec(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Uj(this),this.child.parseData()}parseLayoutSize(){Lce(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),mkn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of hd)for(const r of Ace){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=sA("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=kj(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof J4))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof J4?{...this.channelHasField("column")?{encode:{update:{columns:{field:St(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof J4){if(this.child.channelHasField("column")){const i=St(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of fm){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Ea(o)&&Hb(a)){const u=Nj(this.child,i),l=Dce(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):pt(Ole(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of hd){const f=this.facet[c];if(f){u.push(St(f));const{bin:d,sort:h}=f;if(Zi(d)&&u.push(St(f,{binSuffix:"end"})),x0(h)){const{field:p,op:m=pj}=h,g=nZ(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Qe(h)){const p=iA(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?x0(r.sort)?[nZ(r,r.sort,{expr:"datum"})]:Qe(r.sort)?[iA(r,t,{expr:"datum"})]:[St(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(x0(i)?i.order:!Qe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return XJ(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Sce)if(t[s]){const o=sA("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return XJ(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=dkn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:hd.map(u=>this.facetSortFields(u)).flat(),order:hd.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(N3n(this,[]))}]}getMapping(){return this.facet}}function wkn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(x0(s.sort)){const{field:o,op:a=pj}=s.sort;e=i=new p2(e,{joinaggregate:[{op:a,field:o,as:nZ(s,s.sort,{forAs:!0})}],groupby:[St(s)]})}return i}return null}function kGe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(j6(e)&&j6(a)){if(af(e.values,a.values))return o}else if(tA(e)&&tA(a)){if(e.url===a.url)return o}else if(vWe(e)&&e.name===o.dataName)return o}}return null}function xkn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new gx({values:[]});return t.push(r),r}const n=kGe(e.data,t);if(n)return gv(e.data)||(n.data.format=pHe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new gx(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Ekn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(f3n(i))o=e=new rA(e,i),s="derived";else if(vce(i)){const a=p4n(i);o=e=ku.makeWithAncestors(e,{},a,n)??e,e=new CC(e,t,i.filter)}else if(hWe(i))o=e=T0.makeFromTransform(e,i,t),s="number";else if(h3n(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ku(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=E0.makeFromTransform(e,i);else if(p3n(i))o=e=jh.makeFromTransform(e,i),s="number",Tce(t)&&(e=new ib(e));else if(dWe(i))o=e=V6.make(e,t,i,r++),s="derived";else if(u3n(i))o=e=new kC(e,i),s="number";else if(l3n(i))o=e=new p2(e,i),s="number";else if(m3n(i))o=e=Ig.makeFromTransform(e,i),s="derived";else if(g3n(i))o=e=new $j(e,i),s="derived";else if(y3n(i))o=e=new Dj(e,i),s="derived";else if(c3n(i))o=e=new Oj(e,i),s="derived";else if(n3n(i))o=e=new Bj(e,i),s="derived";else if(a3n(i))e=new jj(e,i);else if(d3n(i))o=e=Dw.makeFromTransform(e,i),s="derived";else if(r3n(i))o=e=new Pj(e,i),s="derived";else if(i3n(i))o=e=new Mj(e,i),s="derived";else if(s3n(i))o=e=new Fj(e,i),s="derived";else if(o3n(i))o=e=new Lj(e,i),s="derived";else{pt(MTn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function Uj(e){var h;let t=xkn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(gv(i)||tA(i)||j6(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new k3n;gv(i)?(bWe(i)?t=new V5(t,i.sequence):bce(i)&&(t=new z5(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ku.makeExplicit(t,e,o)??t,t=new ib(t);const a=e.parent&&RC(e.parent);(Gs(e)||hf(e))&&a&&(t=T0.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Ekn(t,e,o));const u=g4n(e),l=m4n(e);t=ku.makeWithAncestors(t,{},{...u,...l},o)??t,Gs(e)&&(t=jT.parseAll(t,e),t=z6.parseAll(t,e)),(Gs(e)||hf(e))&&(a||(t=T0.makeFromEncoding(t,e)??t),t=E0.makeFromEncoding(t,e)??t,t=rA.parseAllForSortIndex(t,e));const c=t=rAe(Es.Raw,e,t);if(Gs(e)){const p=jh.makeFromEncoding(t,e);p&&(t=p,Tce(e)&&(t=new ib(t))),t=Dw.makeFromEncoding(t,e)??t,t=Ig.makeFromEncoding(t,e)??t}Gs(e)&&(t=U6.make(t,e)??t);const f=t=rAe(Es.Main,e,t);Gs(e)&&fIn(e,f);let d=null;if(hf(e)){const p=e.getName("facet");t=wkn(t,e.facet)??t,d=new IC(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function rAe(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new _c(n,s,e,i);return r[s]=o,o}class Tkn extends $ce{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&pt(OTn),this.children=this.getChildren(t).map((l,c)=>Uce(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=Uj(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ct(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return xj(t)?t.vconcat:gce(t)?t.hconcat:t.concat}parseLayoutSize(){vkn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Cce(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Skn(e){return e===!1||e===null}const Akn={disable:1,gridScale:1,scale:1,...Mqe,labelExpr:1,encode:1},RGe=ct(Akn);class Mce extends O1{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Mce(Cn(this.explicit),Cn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Skn(this.get(t))}hasOrientSignalRef(){return Xt(this.explicit.orient)}}function Ckn(e,t,n){const{encoding:r,config:i}=e,s=qo(r[t])??qo(r[cm(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(dx(u))return{text:Dh({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(JS(s)==="quantitative"){if(ZS(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Dh({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Dh({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(JS(s)==="temporal"&&i.timeFormatType&&gt(s)&&!s.timeUnit)return{text:Dh({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Ikn(e){return fm.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[$kn(n,e)]),t),{})}const kkn={bottom:"top",top:"bottom",left:"right",right:"left"};function Rkn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of ct(i.component.axes))n.axis[s]=Ice(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Nkn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of fm){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Xt(a)){if(r[a]>0&&!u){const l=kkn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Nkn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Pkn(i,s)}}}else return t.map(n=>n.clone());return e}function Pkn(e,t){for(const n of RGe){const r=tb(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return zHe(i,s);case"gridScale":return{explicit:i.explicit,value:ho(i.value,s.value)}}return Tj(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Dkn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Xt(n.labelAngle)?n.labelAngle:F6(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===YWe(r,i))return!0}return e===n[t]}const Okn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function $kn(e,t){var y,v;let n=t.axis(e);const r=new Mce,i=qo(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||wIn(e),u=t.getScaleComponent(e).get("type"),l=pIn(e,u,a,t.config),c=n!==void 0?!n:YJ("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=vIn(i,n,e,o.style,l),d=yqe(n.formatType,i,u),h=gqe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of RGe){const w=b in USe?USe[b](p):pSe(b)?n[b]:void 0,x=w!==void 0,S=Dkn(w,b,n,t,e);if(x&&S)r.set(b,w,S);else{const{configValue:A=void 0,configFrom:C=void 0}=pSe(b)&&b!=="values"?YJ(b,o.style,n.style,l):{},N=A!==void 0;x&&!N?r.set(b,w,S):(C!=="vgAxisConfig"||Okn.has(b)&&N||j5(A)||Xt(A))&&r.set(b,A,!1)}}const m=n.encoding??{},g=Lqe.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const x=eGe(m[w]??{},t),S=w==="labels"?Ckn(t,e,x):x;return S!==void 0&&!Fi(S)&&(b[w]={update:S}),b},{});return Fi(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Lkn({encoding:e,size:t}){for(const n of fm){const r=Nc(n);H0(t[r])&&Ky(e[n])&&(delete t[r],pt(GHe(r)))}return t}const Mkn={vgMark:"arc",encodeEntry:e=>({...jd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Iu("x",e,{defaultPos:"mid"}),...Iu("y",e,{defaultPos:"mid"}),...nb(e,"radius"),...nb(e,"theta")})},Fkn={vgMark:"area",encodeEntry:e=>({...jd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...s7("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...s7("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Ece(e)})},Bkn={vgMark:"rect",encodeEntry:e=>({...jd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...nb(e,"x"),...nb(e,"y")})},jkn={vgMark:"shape",encodeEntry:e=>({...jd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&gt(n)&&n.type===SC?{field:St(n,{expr:"datum"})}:{}}]}},Ukn={vgMark:"image",encodeEntry:e=>({...jd(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...nb(e,"x"),...nb(e,"y"),...wce(e,"url")})},zkn={vgMark:"line",encodeEntry:e=>({...jd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Iu("x",e,{defaultPos:"mid"}),...Iu("y",e,{defaultPos:"mid"}),...da("size",e,{vgChannel:"strokeWidth"}),...Ece(e)})},Vkn={vgMark:"trail",encodeEntry:e=>({...jd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Iu("x",e,{defaultPos:"mid"}),...Iu("y",e,{defaultPos:"mid"}),...da("size",e),...Ece(e)})};function Fce(e,t){const{config:n}=e;return{...jd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Iu("x",e,{defaultPos:"mid"}),...Iu("y",e,{defaultPos:"mid"}),...da("size",e),...da("angle",e),...Hkn(e,n,t)}}function Hkn(e,t,n){return n?{shape:{value:n}}:da("shape",e)}const qkn={vgMark:"symbol",encodeEntry:e=>Fce(e)},Wkn={vgMark:"symbol",encodeEntry:e=>Fce(e,"circle")},Gkn={vgMark:"symbol",encodeEntry:e=>Fce(e,"square")},Ykn={vgMark:"rect",encodeEntry:e=>({...jd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...nb(e,"x"),...nb(e,"y")})},Kkn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...jd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...s7("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...s7("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...da("size",e,{vgChannel:"strokeWidth"})}}},Xkn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...jd(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Iu("x",e,{defaultPos:"mid"}),...Iu("y",e,{defaultPos:"mid"}),...wce(e),...da("size",e,{vgChannel:"fontSize"}),...da("angle",e),...MSe("align",Qkn(e.markDef,n,t)),...MSe("baseline",Jkn(e.markDef,n,t)),...Iu("radius",e,{defaultPos:null}),...Iu("theta",e,{defaultPos:null})}}};function Qkn(e,t,n){if(hi("align",e,n)===void 0)return"center"}function Jkn(e,t,n){if(hi("baseline",e,n)===void 0)return"middle"}const Zkn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...jd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Iu("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Iu("y",e,{defaultPos:"mid",vgChannel:"yc"}),...da("size",e,{defaultValue:e6n(e),vgChannel:i}),[s]:cs(hi("thickness",n,t))}}};function e6n(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=hi("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Hb(a)&&Qr(a.step)?a.step*3/4:r7(t.view,i)*3/4}}const X8={arc:Mkn,area:Fkn,bar:Bkn,circle:Wkn,geoshape:jkn,image:Ukn,line:zkn,point:qkn,rect:Ykn,rule:Kkn,square:Gkn,text:Xkn,tick:Zkn,trail:Vkn};function t6n(e){if(Er([dj,cj,gAn],e.mark)){const t=zqe(e.mark,e.encoding);if(t.length>0)return n6n(e,t)}else if(e.mark===fj){const t=LJ.some(n=>hi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return r6n(e)}return Bce(e)}const iAe="faceted_path_";function n6n(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:iAe+e.requestDataName(Es.Main),data:e.requestDataName(Es.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Bce(e,{fromPrefix:iAe})}]}const sAe="stack_group_";function r6n(e){var l;const[t]=Bce(e,{fromPrefix:sAe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...WS(t.encode.update,["y","yc","y2","height",...LJ]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...vc(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...WS(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...vc(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of LJ){const f=t1(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=cs(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=St(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(St(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=t1(f,e.markDef,e.config);return d!==void 0?{...c,[f]:cs(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Es.Main),name:sAe+e.requestDataName(Es.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function i6n(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Qe(o)&&Zh(o)&&OJ(o.value)||!o&&OJ(hi("order",i,s)))){if((Qe(o)||gt(o))&&!n)return BHe(o,{expr:"datum"});if(f2(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(gt(l)){const c=l.sort;if(Qe(c))return{field:St(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(x0(c))return{field:St({aggregate:oce(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(Tqe(c)){const f=e.fieldDef(c.encoding);return{field:St(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:St(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Bce(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=ho(r.clip,s6n(e),o6n(e)),a=MHe(r),u=i.key,l=i6n(e),c=a6n(e),f=hi("aria",r,s),d=X8[n].postEncodingTransform?X8[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:X8[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Es.Main)},encode:{update:X8[n].encodeEntry(e)},...d?{transform:d}:{}}]}function s6n(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function o6n(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function a6n(e){if(!e.component.selection)return null;const t=ct(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ct(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class NGe extends AGe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,gSe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=z0(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=qCn(o,s,{graticule:t.data&&bce(t.data)}));const u=this.encoding=KAn(t.encoding||{},a,o.filled,s);this.markDef=lWe(o,u,s),this.size=Lkn({encoding:u,size:gSe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=uWe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>pce(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===wqe,r=t&&GEn.some(i=>Ln(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return oj.reduce((r,i)=>{const s=qo(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=ec(t);return Qe(n)&&(i.domain=n.map(Zc)),Qe(r)&&(i.range=r.map(Zc)),i}initAxes(t){return fm.reduce((n,r)=>{const i=t[r];if(Ln(i)||r===Is&&Ln(t.x2)||r===Aa&&Ln(t.y2)){const s=Ln(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=ct(t),r={};for(const i of n){const s=t[i];r[i]=j5(s)?LHe(s):Zc(s)}return r}initLegends(t){return rTn.reduce((n,r)=>{const i=qo(t[r]);if(i&&sTn(r)){const s=i.legend;n[r]=s&&ec(s)}return n},{})}parseData(){this.component.data=Uj(this)}parseLayoutSize(){bkn(this)}parseSelections(){this.component.selection=cIn(this,this.selection)}parseMarkGroup(){this.component.mark=t6n(this)}parseAxesAndHeaders(){this.component.axes=Ikn(this)}assembleSelectionTopLevelSignals(t){return P3n(this,t)}assembleSignals(){return[...qWe(this),...R3n(this,[])]}assembleSelectionData(t){return D3n(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Cce(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!RC(this.parent))&&(t=xWe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Nw(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return V0(n)}typedFieldDef(t){const n=this.fieldDef(t);return Sl(n)?n:null}}class jce extends $ce{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(Ej(a))return new jce(a,this,this.getName(`layer_${u}`),o,s);if(D1(a))return new NGe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Dle(a))})}parseData(){this.component.data=Uj(this);for(const t of this.children)t.parseData()}parseLayoutSize(){ykn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ct(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Rkn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),qWe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Cce(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return O3n(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),uGe(this))}}function Uce(e,t,n,r,i){if(mj(e))return new J4(e,t,n,i);if(Ej(e))return new jce(e,t,n,r,i);if(D1(e))return new NGe(e,t,n,r,i);if(bCn(e))return new Tkn(e,t,n,i);throw new Error(Dle(e))}function u6n(e,t={}){t.logger&&TSn(t.logger),t.fieldTitle&&Dqe(t.fieldTitle);try{const n=aWe(dC(t.config,e.config)),r=gWe(e,n),i=Uce(r,null,"",void 0,n);return i.parse(),P4n(i.component.data,i),{spec:c6n(i,l6n(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&SSn(),t.fieldTitle&&jAn()}}function l6n(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Dt(t)&&(t={type:t}),i&&s&&A3n(t.type)){if(i==="step"&&s==="step")pt(eSe()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";pt(eSe(sj(o)));const a=o==="width"?"height":"width";t.type=C3n(a)}}return{...ct(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...ISe(n,!1),...ISe(e,!0)}}function c6n(e,t,n={},r){const i=e.config?DCn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),hkn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...rWe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const f6n=UEn.version,d6n=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:GS,accessPathWithDatum:Tle,compile:u6n,contains:Er,deepEqual:af,deleteNestedProperty:GL,duplicate:Cn,entries:Jv,every:wle,fieldIntersection:Ele,flatAccessWithDatum:gHe,getFirstDefined:ho,hasIntersection:xle,hash:xr,internalField:bHe,isBoolean:M6,isEmpty:Fi,isEqual:VEn,isInternalField:_He,isNullOrFalse:OJ,isNumeric:ZB,keys:ct,logicalExpr:X4,mergeDeep:pHe,never:hHe,normalize:gWe,normalizeAngle:F6,omit:vc,pick:WS,prefixGenerator:$J,removePathFromField:EC,replaceAll:ux,replacePathInField:Ad,resetIdCounter:qEn,setEqual:mHe,some:ax,stringify:Bi,titleCase:R5,unique:u0,uniqueId:vHe,vals:Wa,varName:Cs,version:f6n},Symbol.toStringTag,{value:"Module"}));function PGe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var h6n="vega-themes",p6n="2.15.0",m6n="Themes for stylized Vega and Vega-Lite visualizations.",g6n=["vega","vega-lite","themes","style"],y6n="BSD-3-Clause",v6n={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},b6n=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],_6n="build/vega-themes.js",zce="build/vega-themes.module.js",w6n="build/vega-themes.min.js",x6n="build/vega-themes.min.js",E6n="build/vega-themes.module.d.ts",T6n={type:"git",url:"https://github.com/vega/vega-themes.git"},S6n=["src","build"],A6n={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},C6n={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},I6n={vega:"*","vega-lite":"*"},k6n={},R6n={name:h6n,version:p6n,description:m6n,keywords:g6n,license:y6n,author:v6n,contributors:b6n,main:_6n,module:zce,unpkg:w6n,jsdelivr:x6n,types:E6n,repository:T6n,files:S6n,scripts:A6n,devDependencies:C6n,peerDependencies:I6n,dependencies:k6n};const hE="#fff",oAe="#888",N6n={background:"#333",view:{stroke:oAe},title:{color:hE,subtitleColor:hE},style:{"guide-label":{fill:hE},"guide-title":{fill:hE}},axis:{domainColor:hE,gridColor:oAe,tickColor:hE}},m_="#4572a7",P6n={background:"#fff",arc:{fill:m_},area:{fill:m_},line:{stroke:m_,strokeWidth:2},path:{stroke:m_},rect:{fill:m_},shape:{stroke:m_},symbol:{fill:m_,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},g_="#30a2da",nG="#cbcbcb",D6n="#999",O6n="#333",aAe="#f0f0f0",uAe="#333",$6n={arc:{fill:g_},area:{fill:g_},axis:{domainColor:nG,grid:!0,gridColor:nG,gridWidth:1,labelColor:D6n,labelFontSize:10,titleColor:O6n,tickColor:nG,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:aAe,group:{fill:aAe},legend:{labelColor:uAe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:uAe,titleFontSize:14,titlePadding:10},line:{stroke:g_,strokeWidth:2},path:{stroke:g_,strokeWidth:.5},rect:{fill:g_},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:g_},bar:{binSpacing:2,fill:g_,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},y_="#000",L6n={group:{fill:"#e5e5e5"},arc:{fill:y_},area:{fill:y_},line:{stroke:y_},path:{stroke:y_},rect:{fill:y_},shape:{stroke:y_},symbol:{fill:y_,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},M6n=22,F6n="normal",lAe="Benton Gothic, sans-serif",cAe=11.5,B6n="normal",v_="#82c6df",rG="Benton Gothic Bold, sans-serif",fAe="normal",dAe=13,lI={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},j6n={background:"#ffffff",title:{anchor:"start",color:"#000000",font:rG,fontSize:M6n,fontWeight:F6n},arc:{fill:v_},area:{fill:v_},line:{stroke:v_,strokeWidth:2},path:{stroke:v_},rect:{fill:v_},shape:{stroke:v_},symbol:{fill:v_,size:30},axis:{labelFont:lAe,labelFontSize:cAe,labelFontWeight:B6n,titleFont:rG,titleFontSize:dAe,titleFontWeight:fAe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:lAe,labelFontSize:cAe,symbolType:"square",titleFont:rG,titleFontSize:dAe,titleFontWeight:fAe},range:{category:lI["category-6"],diverging:lI["fireandice-6"],heatmap:lI["fire-7"],ordinal:lI["fire-7"],ramp:lI["fire-7"]}},b_="#ab5787",Q8="#979797",U6n={background:"#f9f9f9",arc:{fill:b_},area:{fill:b_},line:{stroke:b_},path:{stroke:b_},rect:{fill:b_},shape:{stroke:b_},symbol:{fill:b_,size:30},axis:{domainColor:Q8,domainWidth:.5,gridWidth:.2,labelColor:Q8,tickColor:Q8,tickWidth:.2,titleColor:Q8},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},__="#3e5c69",z6n={background:"#fff",arc:{fill:__},area:{fill:__},line:{stroke:__},path:{stroke:__},rect:{fill:__},shape:{stroke:__},symbol:{fill:__},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Xf="#1696d2",hAe="#000000",V6n="#FFFFFF",J8="Lato",iG="Lato",H6n="Lato",q6n="#DEDDDD",W6n=18,cI={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},G6n={background:V6n,title:{anchor:"start",fontSize:W6n,font:J8},axisX:{domain:!0,domainColor:hAe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:iG,labelAngle:0,tickColor:hAe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:J8},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:q6n,gridWidth:1,labelFontSize:12,labelFont:iG,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:J8,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:iG,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:J8,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:cI["six-groups-cat-1"],diverging:cI["diverging-colors"],heatmap:cI["diverging-colors"],ordinal:cI["six-groups-seq"],ramp:cI["shades-blue"]},area:{fill:Xf},rect:{fill:Xf},line:{color:Xf,stroke:Xf,strokeWidth:5},trail:{color:Xf,stroke:Xf,strokeWidth:0,size:1},path:{stroke:Xf,strokeWidth:.5},point:{filled:!0},text:{font:H6n,color:Xf,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Xf,stroke:null}},arc:{fill:Xf},shape:{stroke:Xf},symbol:{fill:Xf,size:30}},w_="#3366CC",pAe="#ccc",Z8="Arial, sans-serif",Y6n={arc:{fill:w_},area:{fill:w_},path:{stroke:w_},rect:{fill:w_},shape:{stroke:w_},symbol:{stroke:w_},circle:{fill:w_},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Z8,fontSize:12},"guide-title":{font:Z8,fontSize:12},"group-title":{font:Z8,fontSize:12}},title:{font:Z8,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:pAe,tickColor:pAe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Vce=e=>e*(1/3+1),mAe=Vce(9),gAe=Vce(10),yAe=Vce(12),fI="Segoe UI",vAe="wf_standard-font, helvetica, arial, sans-serif",bAe="#252423",dI="#605E5C",_Ae="transparent",K6n="#C8C6C4",oh="#118DFF",X6n="#12239E",Q6n="#E66C37",J6n="#6B007B",Z6n="#E044A7",eRn="#744EC2",tRn="#D9B300",nRn="#D64550",DGe=oh,OGe="#DEEFFF",wAe=[OGe,DGe],rRn=[OGe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",DGe],iRn={view:{stroke:_Ae},background:_Ae,font:fI,header:{titleFont:vAe,titleFontSize:yAe,titleColor:bAe,labelFont:fI,labelFontSize:gAe,labelColor:dI},axis:{ticks:!1,grid:!1,domain:!1,labelColor:dI,labelFontSize:mAe,titleFont:vAe,titleColor:bAe,titleFontSize:yAe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:K6n,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:oh},line:{stroke:oh,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:fI,fontSize:mAe,fill:dI},arc:{fill:oh},area:{fill:oh,line:!0,opacity:.6},path:{stroke:oh},rect:{fill:oh},point:{fill:oh,filled:!0,size:75},shape:{stroke:oh},symbol:{fill:oh,strokeWidth:1.5,size:50},legend:{titleFont:fI,titleFontWeight:"bold",titleColor:dI,labelFont:fI,labelFontSize:gAe,labelColor:dI,symbolType:"circle",symbolSize:75},range:{category:[oh,X6n,Q6n,J6n,Z6n,eRn,tRn,nRn],diverging:wAe,heatmap:wAe,ordinal:rRn}},sG='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',sRn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',oG=400,eD={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},oRn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],aRn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function zj({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=eD.gridBg[e],i=eD.textPrimary[e],s=eD.textSecondary[e],o=n==="dark"?oRn:aRn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:sG,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:sRn,labelFontWeight:oG,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:eD.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:sG,fill:s,fontWeight:oG},"guide-title":{font:sG,fill:s,fontWeight:oG}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const uRn=zj({theme:"white",background:"#ffffff"}),lRn=zj({theme:"g10",background:"#f4f4f4"}),cRn=zj({theme:"g90",background:"#262626"}),fRn=zj({theme:"g100",background:"#161616"}),dRn=R6n.version,hRn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:lRn,carbong100:fRn,carbong90:cRn,carbonwhite:uRn,dark:N6n,excel:P6n,fivethirtyeight:$6n,ggplot2:L6n,googlecharts:Y6n,latimes:j6n,powerbi:iRn,quartz:U6n,urbaninstitute:G6n,version:dRn,vox:z6n},Symbol.toStringTag,{value:"Module"}));function pRn(e,t,n,r){if(Qe(e))return`[${e.map(i=>t(Dt(i)?i:xAe(i,n))).join(", ")}]`;if(Ot(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(Ot(c)&&(c=xAe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function mRn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function xAe(e,t){return JSON.stringify(e,mRn(t))}var gRn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const $Ge="vg-tooltip-element",yRn={offsetX:10,offsetY:10,id:$Ge,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:vRn,maxDepth:2,formatTooltip:pRn,baseURL:""};function vRn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function bRn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return gRn.toString().replace($Ge,e)}function _Rn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class wRn{constructor(t){this.options={...yRn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=bRn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=_Rn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var aG={};function xRn(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uG,EAe;function ERn(){return EAe||(EAe=1,uG=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),uG}var TRn=si;si.Node=yx;si.create=si;function si(e){var t=this;if(t instanceof si||(t=new si),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}si.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};si.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};si.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};si.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)ARn(this,arguments[e]);return this.length};si.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)CRn(this,arguments[e]);return this.length};si.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};si.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};si.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};si.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};si.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};si.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};si.prototype.map=function(e,t){t=t||this;for(var n=new si,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};si.prototype.mapReverse=function(e,t){t=t||this;for(var n=new si,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};si.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};si.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};si.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};si.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};si.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new si;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};si.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new si;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};si.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=SRn(this,i,n[r]);return s};si.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function SRn(e,t,n){var r=t===e.head?new yx(n,null,t,e):new yx(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function ARn(e,t){e.tail=new yx(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function CRn(e,t){e.head=new yx(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function yx(e,t,n,r){if(!(this instanceof yx))return new yx(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{ERn()(si)}catch{}const IRn=TRn,K_=Symbol("max"),Km=Symbol("length"),pE=Symbol("lengthCalculator"),Z4=Symbol("allowStale"),vw=Symbol("maxAge"),Hm=Symbol("dispose"),TAe=Symbol("noDisposeOnSet"),sa=Symbol("lruList"),lh=Symbol("cache"),LGe=Symbol("updateAgeOnGet"),lG=()=>1;class kRn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[K_]=t.max||1/0;const n=t.length||lG;if(this[pE]=typeof n!="function"?lG:n,this[Z4]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[vw]=t.maxAge||0,this[Hm]=t.dispose,this[TAe]=t.noDisposeOnSet||!1,this[LGe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[K_]=t||1/0,hI(this)}get max(){return this[K_]}set allowStale(t){this[Z4]=!!t}get allowStale(){return this[Z4]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[vw]=t,hI(this)}get maxAge(){return this[vw]}set lengthCalculator(t){typeof t!="function"&&(t=lG),t!==this[pE]&&(this[pE]=t,this[Km]=0,this[sa].forEach(n=>{n.length=this[pE](n.value,n.key),this[Km]+=n.length})),hI(this)}get lengthCalculator(){return this[pE]}get length(){return this[Km]}get itemCount(){return this[sa].length}rforEach(t,n){n=n||this;for(let r=this[sa].tail;r!==null;){const i=r.prev;SAe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[sa].head;r!==null;){const i=r.next;SAe(this,t,r,n),r=i}}keys(){return this[sa].toArray().map(t=>t.key)}values(){return this[sa].toArray().map(t=>t.value)}reset(){this[Hm]&&this[sa]&&this[sa].length&&this[sa].forEach(t=>this[Hm](t.key,t.value)),this[lh]=new Map,this[sa]=new IRn,this[Km]=0}dump(){return this[sa].map(t=>l7(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[sa]}set(t,n,r){if(r=r||this[vw],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[pE](n,t);if(this[lh].has(t)){if(s>this[K_])return UT(this,this[lh].get(t)),!1;const u=this[lh].get(t).value;return this[Hm]&&(this[TAe]||this[Hm](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Km]+=s-u.length,u.length=s,this.get(t),hI(this),!0}const o=new RRn(t,n,s,i,r);return o.length>this[K_]?(this[Hm]&&this[Hm](t,n),!1):(this[Km]+=o.length,this[sa].unshift(o),this[lh].set(t,this[sa].head),hI(this),!0)}has(t){if(!this[lh].has(t))return!1;const n=this[lh].get(t).value;return!l7(this,n)}get(t){return cG(this,t,!0)}peek(t){return cG(this,t,!1)}pop(){const t=this[sa].tail;return t?(UT(this,t),t.value):null}del(t){UT(this,this[lh].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[lh].forEach((t,n)=>cG(this,n,!1))}}const cG=(e,t,n)=>{const r=e[lh].get(t);if(r){const i=r.value;if(l7(e,i)){if(UT(e,r),!e[Z4])return}else n&&(e[LGe]&&(r.value.now=Date.now()),e[sa].unshiftNode(r));return i.value}},l7=(e,t)=>{if(!t||!t.maxAge&&!e[vw])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[vw]&&n>e[vw]},hI=e=>{if(e[Km]>e[K_])for(let t=e[sa].tail;e[Km]>e[K_]&&t!==null;){const n=t.prev;UT(e,t),t=n}},UT=(e,t)=>{if(t){const n=t.value;e[Hm]&&e[Hm](n.key,n.value),e[Km]-=n.length,e[lh].delete(n.key),e[sa].removeNode(t)}};class RRn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const SAe=(e,t,n,r)=>{let i=n.value;l7(e,i)&&(UT(e,n),e[Z4]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var NRn=kRn;const PRn=Object.freeze({loose:!0}),DRn=Object.freeze({}),ORn=e=>e?typeof e!="object"?PRn:e:DRn;var Hce=ORn,rZ={exports:{}};const $Rn="2.0.0",MGe=256,LRn=Number.MAX_SAFE_INTEGER||9007199254740991,MRn=16,FRn=MGe-6,BRn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var qce={MAX_LENGTH:MGe,MAX_SAFE_COMPONENT_LENGTH:MRn,MAX_SAFE_BUILD_LENGTH:FRn,MAX_SAFE_INTEGER:LRn,RELEASE_TYPES:BRn,SEMVER_SPEC_VERSION:$Rn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const jRn=typeof process=="object"&&aG&&aG.NODE_DEBUG&&/\bsemver\b/i.test(aG.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Vj=jRn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=qce,s=Vj;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(rZ,rZ.exports);var Wce=rZ.exports;const AAe=/^[0-9]+$/,FGe=(e,t)=>{const n=AAe.test(e),r=AAe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},URn=(e,t)=>FGe(t,e);var zRn={compareIdentifiers:FGe,rcompareIdentifiers:URn};const tD=Vj,{MAX_LENGTH:CAe,MAX_SAFE_INTEGER:nD}=qce,{safeRe:IAe,t:kAe}=Wce,VRn=Hce,{compareIdentifiers:mE}=zRn;let HRn=class Dp{constructor(t,n){if(n=VRn(n),t instanceof Dp){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>CAe)throw new TypeError(`version is longer than ${CAe} characters`);tD("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?IAe[kAe.LOOSE]:IAe[kAe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>nD||this.major<0)throw new TypeError("Invalid major version");if(this.minor>nD||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>nD||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<nD)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(tD("SemVer.compare",this.version,this.options,t),!(t instanceof Dp)){if(typeof t=="string"&&t===this.version)return 0;t=new Dp(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Dp||(t=new Dp(t,this.options)),mE(this.major,t.major)||mE(this.minor,t.minor)||mE(this.patch,t.patch)}comparePre(t){if(t instanceof Dp||(t=new Dp(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(tD("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return mE(r,i)}while(++n)}compareBuild(t){t instanceof Dp||(t=new Dp(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(tD("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return mE(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),mE(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Gce=HRn;const RAe=Gce,qRn=(e,t,n)=>new RAe(e,n).compare(new RAe(t,n));var NC=qRn;const WRn=NC,GRn=(e,t,n)=>WRn(e,t,n)===0;var YRn=GRn;const KRn=NC,XRn=(e,t,n)=>KRn(e,t,n)!==0;var QRn=XRn;const JRn=NC,ZRn=(e,t,n)=>JRn(e,t,n)>0;var e5n=ZRn;const t5n=NC,n5n=(e,t,n)=>t5n(e,t,n)>=0;var r5n=n5n;const i5n=NC,s5n=(e,t,n)=>i5n(e,t,n)<0;var o5n=s5n;const a5n=NC,u5n=(e,t,n)=>a5n(e,t,n)<=0;var l5n=u5n;const c5n=YRn,f5n=QRn,d5n=e5n,h5n=r5n,p5n=o5n,m5n=l5n,g5n=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return c5n(e,n,r);case"!=":return f5n(e,n,r);case">":return d5n(e,n,r);case">=":return h5n(e,n,r);case"<":return p5n(e,n,r);case"<=":return m5n(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var y5n=g5n,fG,NAe;function v5n(){if(NAe)return fG;NAe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}fG=t;const n=Hce,{safeRe:r,t:i}=Wce,s=y5n,o=Vj,a=Gce,u=BGe();return fG}var dG,PAe;function BGe(){if(PAe)return dG;PAe=1;class e{constructor(B,q){if(q=r(q),B instanceof e)return B.loose===!!q.loose&&B.includePrerelease===!!q.includePrerelease?B:new e(B.raw,q);if(B instanceof i)return this.raw=B.value,this.set=[[B]],this.format(),this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=B.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const H=this.set[0];if(this.set=this.set.filter(G=>!p(G[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.format()}format(){return this.range=this.set.map(B=>B.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(B){const H=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+B,G=n.get(H);if(G)return G;const K=this.options.loose,J=K?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];B=B.replace(J,D(this.options.includePrerelease)),s("hyphen replace",B),B=B.replace(a[u.COMPARATORTRIM],l),s("comparator trim",B),B=B.replace(a[u.TILDETRIM],c),s("tilde trim",B),B=B.replace(a[u.CARETTRIM],f),s("caret trim",B);let F=B.split(" ").map(V=>y(V,this.options)).join(" ").split(/\s+/).map(V=>k(V,this.options));K&&(F=F.filter(V=>(s("loose invalid filter",V,this.options),!!V.match(a[u.COMPARATORLOOSE])))),s("range list",F);const j=new Map,W=F.map(V=>new i(V,this.options));for(const V of W){if(p(V))return[V];j.set(V.value,V)}j.size>1&&j.has("")&&j.delete("");const M=[...j.values()];return n.set(H,M),M}intersects(B,q){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(H=>g(H,q)&&B.set.some(G=>g(G,q)&&H.every(K=>G.every(J=>K.intersects(J,q)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let q=0;q<this.set.length;q++)if(L(this.set[q],B,this.options))return!0;return!1}}dG=e;const t=NRn,n=new t({max:1e3}),r=Hce,i=v5n(),s=Vj,o=Gce,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Wce,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=qce,p=O=>O.value==="<0.0.0-0",m=O=>O.value==="",g=(O,B)=>{let q=!0;const H=O.slice();let G=H.pop();for(;q&&H.length;)q=H.every(K=>G.intersects(K,B)),G=H.pop();return q},y=(O,B)=>(s("comp",O,B),O=x(O,B),s("caret",O),O=b(O,B),s("tildes",O),O=A(O,B),s("xrange",O),O=N(O,B),s("stars",O),O),v=O=>!O||O.toLowerCase()==="x"||O==="*",b=(O,B)=>O.trim().split(/\s+/).map(q=>w(q,B)).join(" "),w=(O,B)=>{const q=B.loose?a[u.TILDELOOSE]:a[u.TILDE];return O.replace(q,(H,G,K,J,F)=>{s("tilde",O,H,G,K,J,F);let j;return v(G)?j="":v(K)?j=`>=${G}.0.0 <${+G+1}.0.0-0`:v(J)?j=`>=${G}.${K}.0 <${G}.${+K+1}.0-0`:F?(s("replaceTilde pr",F),j=`>=${G}.${K}.${J}-${F} <${G}.${+K+1}.0-0`):j=`>=${G}.${K}.${J} <${G}.${+K+1}.0-0`,s("tilde return",j),j})},x=(O,B)=>O.trim().split(/\s+/).map(q=>S(q,B)).join(" "),S=(O,B)=>{s("caret",O,B);const q=B.loose?a[u.CARETLOOSE]:a[u.CARET],H=B.includePrerelease?"-0":"";return O.replace(q,(G,K,J,F,j)=>{s("caret",O,G,K,J,F,j);let W;return v(K)?W="":v(J)?W=`>=${K}.0.0${H} <${+K+1}.0.0-0`:v(F)?K==="0"?W=`>=${K}.${J}.0${H} <${K}.${+J+1}.0-0`:W=`>=${K}.${J}.0${H} <${+K+1}.0.0-0`:j?(s("replaceCaret pr",j),K==="0"?J==="0"?W=`>=${K}.${J}.${F}-${j} <${K}.${J}.${+F+1}-0`:W=`>=${K}.${J}.${F}-${j} <${K}.${+J+1}.0-0`:W=`>=${K}.${J}.${F}-${j} <${+K+1}.0.0-0`):(s("no pr"),K==="0"?J==="0"?W=`>=${K}.${J}.${F}${H} <${K}.${J}.${+F+1}-0`:W=`>=${K}.${J}.${F}${H} <${K}.${+J+1}.0-0`:W=`>=${K}.${J}.${F} <${+K+1}.0.0-0`),s("caret return",W),W})},A=(O,B)=>(s("replaceXRanges",O,B),O.split(/\s+/).map(q=>C(q,B)).join(" ")),C=(O,B)=>{O=O.trim();const q=B.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return O.replace(q,(H,G,K,J,F,j)=>{s("xRange",O,H,G,K,J,F,j);const W=v(K),M=W||v(J),V=M||v(F),Q=V;return G==="="&&Q&&(G=""),j=B.includePrerelease?"-0":"",W?G===">"||G==="<"?H="<0.0.0-0":H="*":G&&Q?(M&&(J=0),F=0,G===">"?(G=">=",M?(K=+K+1,J=0,F=0):(J=+J+1,F=0)):G==="<="&&(G="<",M?K=+K+1:J=+J+1),G==="<"&&(j="-0"),H=`${G+K}.${J}.${F}${j}`):M?H=`>=${K}.0.0${j} <${+K+1}.0.0-0`:V&&(H=`>=${K}.${J}.0${j} <${K}.${+J+1}.0-0`),s("xRange return",H),H})},N=(O,B)=>(s("replaceStars",O,B),O.trim().replace(a[u.STAR],"")),k=(O,B)=>(s("replaceGTE0",O,B),O.trim().replace(a[B.includePrerelease?u.GTE0PRE:u.GTE0],"")),D=O=>(B,q,H,G,K,J,F,j,W,M,V,Q,se)=>(v(H)?q="":v(G)?q=`>=${H}.0.0${O?"-0":""}`:v(K)?q=`>=${H}.${G}.0${O?"-0":""}`:J?q=`>=${q}`:q=`>=${q}${O?"-0":""}`,v(W)?j="":v(M)?j=`<${+W+1}.0.0-0`:v(V)?j=`<${W}.${+M+1}.0-0`:Q?j=`<=${W}.${M}.${V}-${Q}`:O?j=`<${W}.${M}.${+V+1}-0`:j=`<=${j}`,`${q} ${j}`.trim()),L=(O,B,q)=>{for(let H=0;H<O.length;H++)if(!O[H].test(B))return!1;if(B.prerelease.length&&!q.includePrerelease){for(let H=0;H<O.length;H++)if(s(O[H].semver),O[H].semver!==i.ANY&&O[H].semver.prerelease.length>0){const G=O[H].semver;if(G.major===B.major&&G.minor===B.minor&&G.patch===B.patch)return!0}return!1}return!0};return dG}const b5n=BGe(),_5n=(e,t,n)=>{try{t=new b5n(t,n)}catch{return!1}return t.test(e)};var w5n=_5n,jGe=xRn(w5n);function x5n(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var E5n=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function UGe(e,...t){for(const n of t)T5n(e,n);return e}function T5n(e,t){for(const n of Object.keys(t))hC(e,n,t[n],!0)}const fh=aEn;let H6=d6n;const rD=typeof window<"u"?window:void 0;var tIe;H6===void 0&&((tIe=rD==null?void 0:rD.vl)!=null&&tIe.compile)&&(H6=rD.vl);const S5n={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},A5n={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},a4={vega:"Vega","vega-lite":"Vega-Lite"},c7={vega:fh.version,"vega-lite":H6?H6.version:"not available"},C5n={vega:e=>e,"vega-lite":(e,t)=>H6.compile(e,{config:t}).spec},I5n=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,k5n="chart-wrapper";function R5n(e){return typeof e=="function"}function DAe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${a4[r]} JSON Source`}function N5n(e,t){if(e.$schema){const n=PGe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${a4[n.library]}, but mode argument sets ${a4[t]??t}.`);const r=n.library;return jGe(c7[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${a4[r]} ${n.version}, but the current version of ${a4[r]} is v${c7[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function zGe(e){return!!(e&&"load"in e)}function OAe(e){return zGe(e)?e:fh.loader(e)}function P5n(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Dt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function D5n(e,t,n={}){let r,i;Dt(t)?(i=OAe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=P5n(r),o=s.loader;(!i||o)&&(i=OAe(n.loader??o));const a=await $Ae(s,i),u=await $Ae(n,i),l={...UGe(u,a),config:dC(u.config??{},a.config??{})};return await $5n(e,r,l,i)}async function $Ae(e,t){const n=Dt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Dt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function O5n(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function $5n(e,t,n={},r){const i=n.theme?dC(hRn[n.theme],n.config??{}):n.config,s=$b(n.actions)?n.actions:UGe({},S5n,n.actions??{}),o={...A5n,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??fh.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const x="vega-embed-style",{root:S,rootContainer:A}=O5n(c);if(!S.getElementById(x)){const C=document.createElement("style");C.id=x,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?E5n.toString():n.defaultStyle,A.appendChild(C)}}const f=N5n(t,n.mode);let d=C5n[f](t,i);if(f==="vega-lite"&&d.$schema){const x=PGe(d.$schema);jGe(c7.vega,`^${x.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${x.version}, but current version is v${c7.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const x=document.createElement("div");x.classList.add(k5n),c.appendChild(x),h=x}const p=n.patch;if(p&&(d=p instanceof Function?p(d):iB(d,p,!0,!1).newDocument),n.formatLocale&&fh.formatLocale(n.formatLocale),n.timeFormatLocale&&fh.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const x in n.expressionFunctions){const S=n.expressionFunctions[x];"fn"in S?fh.expressionFunction(x,S.fn,S.visitor):S instanceof Function&&fh.expressionFunction(x,S)}const{ast:m}=n,g=fh.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||fh.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:fh.expressionInterpreter??n.expr??yEn}:{}});if(y.addSignalListener("autosize",(x,S)=>{const{type:A}=S;A=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):A=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):A=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:x,tooltip:S}=n,A=x&&!zGe(x)?x==null?void 0:x.baseURL:void 0,C=R5n(S)?S:new wRn({baseURL:A,...S===!0?{}:S}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:x,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(x,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let x=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const A=document.createElement("details");A.title=o.CLICK_TO_VIEW_ACTIONS,c.append(A),x=A;const C=document.createElement("summary");C.innerHTML=I5n,A.append(C),b=N=>{A.contains(N.target)||A.removeAttribute("open")},document.addEventListener("click",b)}const S=document.createElement("div");if(x.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const A of["svg","png"])if(s===!0||s.export===!0||s.export[A]){const C=o[`${A.toUpperCase()}_ACTION`],N=document.createElement("a"),k=Ot(n.scaleFactor)?n.scaleFactor[A]:n.scaleFactor;N.text=C,N.href="#",N.target="_blank",N.download=`${l}.${A}`,N.addEventListener("mousedown",async function(D){D.preventDefault();const L=await y.toImageURL(A,k);this.href=L}),S.append(N)}}if(s===!0||s.source!==!1){const A=document.createElement("a");A.text=o.SOURCE_ACTION,A.href="#",A.addEventListener("click",function(C){DAe(hW(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),S.append(A)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const A=document.createElement("a");A.text=o.COMPILED_ACTION,A.href="#",A.addEventListener("click",function(C){DAe(hW(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),S.append(A)}if(s===!0||s.editor!==!1){const A=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(N){x5n(window,A,{config:i,mode:f,renderer:a,spec:hW(t)}),N.preventDefault()}),S.append(C)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function L5n(e){return!!e&&{}.toString.call(e)==="[object Function]"}function M5n(e,t,n){n&&(L5n(n)?n(e.data(t)):e.change(t,fh.changeset().remove(()=>!0).insert(n)))}function F5n(e,t){Object.keys(t).forEach(n=>{M5n(e,n,t[n])})}function VGe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const HGe=()=>{};function hG(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function B5n(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=VGe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!GD(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function LAe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function pG(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function u4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class qGe extends ni.PureComponent{constructor(){super(...arguments),u4(this,"containerRef",ni.createRef()),u4(this,"resultPromise",void 0),u4(this,"handleError",t=>{const{onError:n=HGe}=this.props;n(t,this.containerRef.current),console.warn(t)}),u4(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=VGe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=B5n(pG(this.props),pG(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!RQ(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&LAe(a,s),i&&hG(a,i)),a.run()})}else RQ(i,s)||this.modifyView(o=>{s&&LAe(o,s),i&&hG(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=pG(this.props);this.resultPromise=D5n(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;hG(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return ni.createElement("div",{ref:this.containerRef,className:t,style:n})}}u4(qGe,"propTypes",{className:Qme.string,onError:Qme.func});function iZ(){return iZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iZ.apply(this,arguments)}function sZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const j5n={};class Yce extends ni.PureComponent{constructor(){super(...arguments),sZ(this,"vegaEmbed",ni.createRef()),sZ(this,"handleNewView",t=>{this.update();const{onNewView:n=HGe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){RQ(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{F5n(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return ni.createElement(qGe,iZ({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}sZ(Yce,"defaultProps",{data:j5n});function oZ(){return oZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oZ.apply(this,arguments)}function MAe(e){return ni.createElement(Yce,oZ({},e,{mode:"vega-lite"}))}function U5n({currentConfig:e,provState:t}){const n=Dd(),r=Od(),i=Dc(),[s,o]=R.useState(null),[a,u]=R.useState(!0),{updateResponseBlockValidation:l,setIframeAnswers:c}=bl(),[f,d]=R.useState(),{actions:h,trrack:p}=R.useMemo(()=>{const b=Wx.create(),w=b.register("signal",(S,A)=>(S.event=A,S)),x=VR({registry:b,initialState:{event:{}}});return{actions:{signalAction:w},trrack:x}},[]),m=R.useCallback(({status:b,provenanceGraph:w,answers:x})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:b,values:x,provenanceGraph:w})),i(c(x))},[r,n,i,c,l]),g=R.useCallback((b,w)=>{p.apply(b,h.signalAction({key:b,value:w}))},[h,p]),y=R.useCallback((b,w)=>{const{responseId:x,response:S}=w;m({status:!0,provenanceGraph:p.graph.backend,answers:{[x]:S}})},[m,p.graph.backend]),v=R.useMemo(()=>{var w;const b=(w=s==null?void 0:s.config)==null?void 0:w.signals;return b?b.reduce((x,S)=>(S.name==="revisitAnswer"?x[S.name]=y:x[S.name]=g,x),{}):{}},[y,g,s]);return R.useEffect(()=>{async function b(){u(!0);let w;"path"in e?w=await cAt(e.path):w=e.config,w!==void 0&&o(w),u(!1)}e&&b()},[e]),R.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?E.jsx("div",{children:"Loading..."}):"path"in e&&!s?E.jsx(Iv,{path:e.path}):s?E.jsx(Yce,{spec:structuredClone(s),signalListeners:v,onNewView:b=>d(b)}):E.jsx("div",{children:"Failed to load vega config"})}function z5n(){const e=zg(),t=Dd(),n=Od()||"Notfound",r=e.components[n],{storageEngine:i}=yo(),s=R.useRef(null),[o,a]=R.useState(null),{setIsRecording:u}=bl(),l=Vr(N=>N.analysisProvState),c=BA(),f=mre(),d=Vr(N=>N.sequence),[h]=xb(),p=Vr(N=>N.participantId),m=R.useMemo(()=>h.get("participantId"),[h]);CFe();const g=Dc(),{setAlertModal:y}=bl();R.useEffect(()=>{(i==null?void 0:i.getEngine())!=="localStorage"&&g(y({show:!0,message:"There was an issue connecting to the localStorage database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[y,i,g]),R.useEffect(()=>{!e||!e.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(N=>{var k;N.stop(),(k=s.current)==null||k.stream.removeTrack(N)}),s.current.stream.getAudioTracks().forEach(N=>{var k;N.stop(),(k=s.current)==null||k.stream.removeTrack(N)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(N=>{const k=new MediaRecorder(N);s.current=k,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[v,b]=R.useState([]),w=R.useRef([]);R.useEffect(()=>{async function N(){var L;const D=((L=lre(d,t))==null?void 0:L.map(O=>O.currentBlock.id).filter(O=>O!==void 0))||[];b(D)}async function k(){const D=w.current;JSON.stringify(D)!==JSON.stringify(v)&&v.length>0&&i&&await i.addParticipantTags(v),w.current=v}N().then(k)},[t,i,d]);const x=R.useMemo(()=>{var N;return n!=="end"&&cC(r)&&e.baseComponents?pre({},(N=e.baseComponents)==null?void 0:N[r.baseComponent],r):r},[r,e]);if(n==="end")return E.jsx(scn,{});if(n==="__trainingFailed")return E.jsx(ocn,{});if(n==="__timedOut")return E.jsx(acn,{});if(n==="Notfound")return E.jsx(Iv,{email:e.uiConfig.contactEmail});if(m&&p!==m)return E.jsx(Ko,{style:{height:"80vh"},children:E.jsx(Pc,{})});const S=x.instruction||"",{instructionLocation:A}=x,C=e.uiConfig.sidebar&&(A==="sidebar"||A===void 0);return E.jsxs(E.Fragment,{children:[A==="aboveStimulus"&&E.jsx($u,{text:S}),E.jsx(U$,{status:f,config:x,location:"aboveStimulus"},`${t}-above-response-block`),E.jsxs(R.Suspense,{fallback:E.jsx("div",{children:"Loading..."}),children:[x.type==="markdown"&&E.jsx(Yln,{currentConfig:x}),x.type==="website"&&E.jsx(lAt,{currentConfig:x}),x.type==="image"&&E.jsx(dAt,{currentConfig:x}),x.type==="react-component"&&E.jsx(Gln,{currentConfig:x,provState:l}),x.type==="vega"&&E.jsx(U5n,{currentConfig:x,provState:l})]},`${t}-stimulus`),(A==="belowStimulus"||A===void 0&&!C)&&E.jsx($u,{text:S}),E.jsx(U$,{status:f,config:x,location:"belowStimulus"},`${t}-below-response-block`)]})}function WGe(e){const[t]=xb();return E.jsx(Dne,{...e,to:{pathname:e.to,search:t.toString()}})}function GGe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=GGe(o,t,n,r),r.includes(o.orderPath))break}return i}function YGe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=YGe(s,r)}}),n}function V5n(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function H5n({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Ux(),c=rp(),f=Dd(),[d,{close:h,open:p}]=qee(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?GGe(n,e,r,a.orderPath):-1,{trialId:y}=k0(),[v]=xb(),b=R.useMemo(()=>v.get("participantId"),[v]),w=y===e,x=s?f===g:f===`reviewer-${e}`,S=u?w:x,A=R.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),N=u?A:()=>c(s?b?`/${l}/${_h(g)}?participantId=${b}`:`/${l}/${_h(g)}`:`/${l}/reviewer-${e}`),k=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,D=e.includes("$")&&k&&e.includes(k)?e.split(k).at(-1):e;return E.jsxs(mc,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[E.jsx(mc.Target,{children:E.jsx(ke,{onMouseEnter:p,onMouseLeave:h,children:E.jsx(wM,{active:S,style:{lineHeight:"32px",height:"32px"},label:E.jsxs(ke,{children:[i&&E.jsx(d1t,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==D&&E.jsx(C1t,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),E.jsx(Ue,{size:"sm",span:S,fw:S?"700":void 0,display:"inline",children:D})]}),onClick:N,disabled:t})})}),m&&(m.description||m.meta)&&E.jsx(mc.Dropdown,{onMouseLeave:h,children:E.jsxs(ke,{children:[m.description&&E.jsxs(ke,{children:[E.jsx(Ue,{fw:900,display:"inline-block",mr:2,children:"Description:"}),E.jsx(Ue,{fw:400,component:"span",children:m.description})]}),m.meta&&E.jsxs(ke,{children:[E.jsx(Ue,{fw:"900",component:"span",children:"Task Meta: "}),E.jsx(Ue,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function f7({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=_g(e.components);return n&&r&&(o=V5n(_g(e.components),_g(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),E.jsx(E.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return E.jsx(H5n,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?Wh(c).length-YGe(u,c):0,d=Wh(u);return E.jsx(wM,{label:E.jsxs(ke,{style:{opacity:f>0?1:.5},children:[E.jsx(Ue,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?E.jsx(c1t,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&E.jsxs(ov,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&E.jsx(ov,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:E.jsx(ke,{style:{borderLeft:"1px solid #e9ecef"},children:E.jsx(f7,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function KGe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function FAe({text:e}){return E.jsx(us,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:E.jsx($ne,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function q5n(){const e=Vr(h=>h.sequence),t=Vr(h=>h.metadata),{toggleStudyBrowser:n}=bl(),r=zg(),i=Dc(),s=Ux(),o=f5e(`/${s}`),{storageEngine:a}=yo(),u=BA(),l=R.useMemo(()=>{let h=_g(r.sequence);return h=cre(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=R.useState("participant"),d=R.useMemo(()=>c==="allTrials"||u,[c,u]);return E.jsxs(Oi.Aside,{p:"0",children:[E.jsx(Oi.Section,{p:"md",children:E.jsxs(qt,{direction:"row",justify:"space-between",children:[E.jsx(Ue,{size:"md",fw:700,pt:3,children:"Study Browser"}),E.jsx(us,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:E.jsx(on,{variant:"light",leftSection:E.jsx(Lne,{size:14}),onClick:()=>KGe(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),E.jsx(gb,{onClick:()=>i(n()),mt:1})]})}),E.jsx(Oi.Section,{grow:!0,component:Lg,p:"md",children:E.jsxs(Pr,{value:c,onChange:f,children:[E.jsx(ke,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:E.jsxs(Pr.List,{grow:!0,children:[E.jsxs(Pr.Tab,{value:"participant",children:["Participant View",E.jsx(FAe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),E.jsxs(Pr.Tab,{value:"allTrials",disabled:u,children:["All Trials View",E.jsx(FAe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),E.jsx(Pr.Panel,{value:"participant",children:E.jsx(f7,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),E.jsx(Pr.Panel,{value:"allTrials",children:E.jsx(f7,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function W5n({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=Vr(C=>C.config),r=Vr(C=>C.metadata),i=fre(),s=Dc(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=bl(),{storageEngine:l}=yo(),c=Od(),f=Dd(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=R.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,y=n==null?void 0:n.uiConfig.withProgressBar,v=Ux(),b=f5e(`/${v}`),w=R.useRef(null),[x,S]=R.useState(!1),A=Vr(C=>C.isRecording);return R.useEffect(()=>{const C=w.current;C&&S(C.scrollWidth>C.offsetWidth)},[n]),E.jsx(Oi.Header,{p:"md",children:E.jsxs(nf,{mt:-7,align:"center",children:[E.jsx(nf.Col,{span:4,children:E.jsxs(qt,{align:"center",children:[E.jsx(bb,{w:40,src:`${vl}${g}`,alt:"Study Logo"}),E.jsx(ba,{w:"md"}),E.jsx(Ws,{ref:w,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:x?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),E.jsx(nf.Col,{span:4,children:y&&E.jsx(kA,{radius:"md",size:"lg",value:h})}),E.jsx(nf.Col,{span:4,children:E.jsxs(bi,{wrap:"nowrap",justify:"right",children:[A?E.jsxs(bi,{ml:"xl",gap:20,wrap:"nowrap",children:[E.jsx(Ue,{color:"red",children:"Recording audio"}),E.jsx(fMe,{})]}):null,!t&&E.jsx(us,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:E.jsx(ov,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&E.jsx(on,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),E.jsxs(rl,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[E.jsx(rl.Target,{children:E.jsx(Px,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:E.jsx(b1t,{})})}),E.jsxs(rl.Dropdown,{children:[e&&E.jsx(rl.Item,{leftSection:E.jsx(P1t,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),E.jsx(rl.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:E.jsx(S1t,{size:14}),children:"Contact"}),e&&E.jsx(rl.Item,{leftSection:E.jsx(Lne,{size:14}),onClick:()=>KGe(l,n,r,b),children:"Next Participant"}),e&&E.jsx(rl.Item,{leftSection:E.jsx(g5e,{size:14}),component:"a",href:`${vl}analysis/stats/${v}`,children:"Analyze & Manage"})]})]})]})})]})})}function XGe(e,t){var n;return cC(e)&&t.baseComponents?pre({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function G5n(){var u;const e=(u=zg())==null?void 0:u.uiConfig.sidebar,t=zg(),n=Od(),r=t.components[n],i=R.useMemo(()=>r?XGe(r,t):null,[r,t]),s=mre(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?E.jsxs(Oi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&E.jsx(Oi.Section,{bg:"gray.3",p:"md",children:E.jsxs(Ue,{c:"gray.9",children:[E.jsx(Ue,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),E.jsx($u,{text:o})]})}),E.jsx(Oi.Section,{p:"md",children:E.jsx(U$,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):E.jsx(Oi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:E.jsx(U$,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function Y5n(){const e=Vr(u=>u.showHelpText),t=Vr(u=>u.config),n=Dc(),{toggleShowHelpText:r}=bl(),[i,s]=R.useState(""),[o,a]=R.useState(!0);return R.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await yre(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),E.jsx(Ks,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?E.jsx($u,{text:i}):E.jsx(Iv,{path:t.uiConfig.helpTextPath})})}function K5n(){const e=Vr(o=>o.alertModal),{setAlertModal:t}=bl(),n=Dc(),[r,i]=R.useState(e.show),s=R.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return R.useEffect(()=>i(e.show),[e.show]),E.jsx(Ks,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:E.jsxs(bg,{color:"red",radius:"xs",title:"Alert",icon:E.jsx(l1t,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[E.jsx(Ue,{my:"md",children:e.message}),E.jsx(bi,{w:"100%",justify:"end",children:E.jsx(on,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const BAe=15,jAe=3;function X5n({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return E.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return E.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:E.jsx("rect",{fill:a===r?"#e15759":"#484848",x:e(u.createdOn)-jAe/2,y:n/2-BAe/2,width:jAe,height:BAe})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?E.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const UAe={left:5,top:0,right:5,bottom:0};function Q5n({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=R.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=R.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=R.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return E.jsx(X5n,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return E.jsxs("svg",{style:{width:n,height:r},children:[E.jsx("line",{stroke:"black",strokeWidth:1,x1:UAe.left,x2:n+UAe.left,y1:r/2,y2:r/2}),c]})}function J5n(e){const t=R.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return R.useLayoutEffect(()=>{t.current=e}),R.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Z5n({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=R.useRef(0),u=R.useRef(Date.now()),[l,c]=R.useState(0);R.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=J5n(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});R.useEffect(()=>{let h=null;return i&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[f,i]);const d=R.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return E.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:E.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function aZ(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const mG={left:0,top:0,right:0,bottom:0};function eNn(e,t){return t?t.getParticipantData(e):null}function tNn({setTimeString:e}){const[t]=xb(),n=R.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=yo(),i=Vr(j=>j.analysisIsPlaying),s=Vr(j=>j.analysisHasAudio),o=Vr(j=>j.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l}=bl(),c=Dc(),f=Od(),d=Dd();R.useEffect(()=>{c(a(null))},[d,a,c]);const[h,{width:p}]=cf(),[m,g]=R.useState(0),[y,v]=R.useState(null),[b,w]=R.useState(0),{value:x,status:S}=gL(eNn,[n,r]),[A,C]=iut(0,100),N=R.useRef(null),[k,D]=R.useState(!0),L=R.useRef(null),O=R.useMemo(()=>`${f}_${d}`,[f,d]);R.useEffect(()=>{var j;if(O&&x&&((j=x.answers[O])!=null&&j.provenanceGraph)){const W=Wx.create(),M=VR({registry:W,initialState:{}});x.answers[O].provenanceGraph&&(M.importObject(_g(x.answers[O].provenanceGraph)),c(l(!0)),L.current=M)}else c(l(!1))},[x,O,c,l]);const B=R.useCallback(j=>{var W;j&&(O&&x&&L.current&&(c(a(L.current.getState((W=x.answers[O].provenanceGraph)==null?void 0:W.nodes[j]))),L.current.to(j)),v(j))},[x,a,c,O]);R.useEffect(()=>{var M;if(!O||!x||!L.current||!((M=x.answers[O])!=null&&M.provenanceGraph))return;const j=x.answers[O].provenanceGraph;if(!j)return;if(!y||!j.nodes[y]){B(j.root);return}let W=j.nodes[y];for(;;)if(A<W.createdOn){if(y8t(W))break;{const V=W.parent;W=j.nodes[V]}}else if(W.children.length>0){const V=W.children[0];if(A>j.nodes[V].createdOn)W=j.nodes[V];else break}else break;W.id!==y&&B(W.id)},[B,y,x,n,A,O]);const q=R.useMemo(()=>(x==null?void 0:x.answers[O].startTime)||0,[x,O]);R.useEffect(()=>{b===0?e(""):A!==0&&e(`${aZ(A-q)} / ${aZ(b*1e3)}`)},[O,x,A,e,q,b]);const H=BA(),G=R.useRef(null),K=R.useCallback(async j=>{if(G.current=j,j&&x&&H&&O&&r)try{const W=await r.getAudio(O,n);await j.load(W),D(!1),c(u(!0)),w(j.getDuration()),g(j.getWidth()),j.seekTo(0),j.on("redrawcomplete",()=>g(j.getWidth()))}catch(W){c(u(!1));const M=x.answers[O].endTime-x.answers[O].startTime;throw w(M>-1?M/1e3:0),c(u(!1)),new Error(W)}else c(u(!1)),w(0)},[x,H,O,r,n,c,u]),J=R.useCallback((j,W)=>{C(j),G.current&&W&&setTimeout(()=>{var M;(M=G.current)==null||M.seekTo(W)})},[C,G]);R.useEffect(()=>{G.current&&(i?G.current.play():G.current.pause())},[G,i]);const F=R.useMemo(()=>{var M,V;if(!x||!((M=x.answers[O])!=null&&M.startTime)||!((V=x.answers[O])!=null&&V.endTime))return null;const j=b>0?x.answers[O].startTime+b*1e3:x.answers[O].endTime;return xa([mG.left,p+mG.left+mG.right]).domain([x.answers[O].startTime,j]).clamp(!0)},[x,O,p,b]);return R.useEffect(()=>{K(G.current)},[J,K,x,n,G]),E.jsx(bi,{wrap:"nowrap",gap:10,mx:10,children:E.jsxs($i,{ref:h,style:{width:"100%"},gap:0,children:[E.jsx(Ko,{}),x!==null&&O?E.jsxs(ke,{ref:N,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[E.jsx(uMe,{onMount:K,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:E.jsx(lMe,{id:"waveform",height:50})}),k?E.jsx(Pc,{}):null]}):null,S==="success"&&x&&F&&O&&x.answers[O].provenanceGraph?E.jsx(Q5n,{xScale:F,trialName:O,setPlayTime:J,currentNode:y,setCurrentNode:B,participantData:x,width:m||p,height:25}):null,F&&x&&(s||o)?E.jsx(Z5n,{duration:b*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:x.answers[O].startTime,width:p,xScale:F,updateTimer:J}):null]})})}function nNn(e,t){return t?t.getParticipantData(e):null}function rNn(e){return e?e.getAllParticipantsData():null}function iNn(){const[e]=xb(),t=R.useMemo(()=>e.get("participantId")||void 0,[e]),n=Od(),r=Dd(),i=rp(),{setAnalysisIsPlaying:s}=bl(),o=Dc(),a=Vr(y=>y.analysisIsPlaying),{storageEngine:u}=yo(),{value:l,status:c}=gL(nNn,[t,u]),{value:f}=gL(rNn,[u]),[d,h]=R.useMemo(()=>{if(f&&l&&t&&n){const y=f.filter(x=>x.participantConfigHash===l.participantConfigHash),v=y.findIndex(x=>x.participantId===t),b=v<y.length-1?y[v+1]:y[0],w=v>0?y[v-1]:y[y.length-1];return[[b.participantId,Wh(b.sequence).indexOf(n)],[w.participantId,Wh(w.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=R.useMemo(()=>{const y={};return f==null||f.forEach(v=>{y[v.participantConfigHash]||(y[v.participantConfigHash]=new Set),y[v.participantConfigHash].add(v.participantId)}),Object.keys(y).sort((v,b)=>v===(l==null?void 0:l.participantConfigHash)?-1:b===(l==null?void 0:l.participantConfigHash)?1:0).map(v=>({group:`Config version: ${v}`,items:[...y[v]].map(b=>({value:b,label:b,disabled:v!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,g]=R.useState("");return E.jsx(Oi.Footer,{zIndex:101,withBorder:!1,children:E.jsxs(ke,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[E.jsx(vf,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),E.jsx(tNn,{setTimeString:g}),E.jsx(Ko,{children:E.jsxs(bi,{gap:"xs",style:{height:"50px"},children:[E.jsx(Ue,{size:"sm",ff:"monospace",children:m}),E.jsx(Px,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?E.jsx(F1t,{}):E.jsx(B1t,{})}),E.jsx(Ue,{mx:"0",children:"Participant:"}),E.jsx(RA,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:y=>{i(`./${_h(0)}?participantId=${y}`,{relative:"path"})},data:p}),E.jsx(on,{onClick:()=>i(`./${_h(+r-1)}?participantId=${t}`,{relative:"path"}),children:E.jsx(lge,{})}),E.jsx(on,{onClick:()=>i(`./${_h(+r+1)}?participantId=${t}`,{relative:"path"}),children:E.jsx(cge,{})}),E.jsxs(on,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${_h(h[1])}?participantId=${h[0]}`),children:[E.jsx(lge,{}),E.jsx(dge,{})]}),E.jsxs(on,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${_h(d[1])}?participantId=${d[0]}`),children:[E.jsx(dge,{}),E.jsx(cge,{})]})]})})]})})}function sNn(){const e=R.useRef([]),t=zg(),n=t.uiConfig.windowEventDebounceTime??100,r=Vr(d=>d.showStudyBrowser),i=Vr(d=>d.analysisHasAudio),s=Vr(d=>d.analysisHasProvenance),o=Vr(d=>d.modes);R.useEffect(()=>{const d=uh(x=>{e.current.push([Date.now(),"focus",x.target instanceof HTMLElement?x.target.tagName:""])},n,{maxWait:n}),h=uh(x=>{e.current.push([Date.now(),"input",x.data??""])},n,{maxWait:n}),p=uh(x=>{e.current.push([Date.now(),"keypress",x.key])},n,{maxWait:n}),m=uh(x=>{e.current.push([Date.now(),"mousedown",[x.clientX,x.clientY]])},n,{maxWait:n}),g=uh(x=>{e.current.push([Date.now(),"mouseup",[x.clientX,x.clientY]])},n,{maxWait:n}),y=uh(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=uh(x=>{e.current.push([Date.now(),"mousemove",[x.clientX,x.clientY]])},n,{maxWait:n}),b=uh(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=uh(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",w)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=R.useMemo(()=>o,[o]),c=R.useMemo(()=>u&&r,[u,r]),f=BA();return E.jsx(TPe.Provider,{value:e,children:E.jsxs(Oi,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[E.jsx(G5n,{}),E.jsx(q5n,{}),E.jsx(W5n,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),E.jsx(Y5n,{}),E.jsx(K5n,{}),E.jsx(Oi.Main,{children:E.jsx(Ygt,{})}),f&&E.jsx(iNn,{})]})})}function oNn(e,t=!1){return typeof e=="number"?zAe(e,t):zAe(e.length,t).map(r=>r.map(i=>e[i]))}function zAe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function QGe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=QGe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function aNn(e,t){const n=_g(e);return QGe(n,t,"root")}function JGe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&JGe(s,t,i,o)})}function uNn(e){const t=[];return JGe(e,t,"",0),t}function VAe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return oNn(i.sort(()=>.5-Math.random()),!0)}function HAe(e){const n=uNn(e.sequence).map(s=>({[s]:VAe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=aNn(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=VAe(e,o))})}),i}var lNn=wPe;function cNn(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function fNn(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function dNn(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function hNn(e){return e.__COMMENTS__}function pNn(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var Hj={EOL:lNn.EOL||`
`,tryParseNumber:cNn,createComment:fNn,removeComment:dNn,getComment:hNn,forceComment:pNn},mNn="3.2.1";function gNn(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return qAe}else if(e.length===0)return qAe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return vNn(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),yNn.bind(null,n)}function yNn(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function qAe(){}function vNn(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function ZGe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}ZGe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function eYe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}eYe.description="parse hexadecimal numbers prefixed with 0x";function tYe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}tYe.description="support ISO dates";var Kce={loadDsf:gNn,std:{math:ZGe,hex:eYe,date:tYe}},bNn=function(e,t){var n=Hj,r=Kce,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(B){return B==="{"||B==="}"||B==="["||B==="]"||B===","||B===":"}function d(B){var q,H=0,G=1;for(q=s-1;q>0&&i[q]!==`
`;q--,H++);for(;q>0;q--)i[q]===`
`&&G++;throw new Error(B+" at line "+G+","+H+" >>>"+i.substr(s-H,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(B){return i.charAt(s+B)}function m(B){for(var q="",H=o;h();){if(o===H)return h(),B&&H==="'"&&o==="'"&&q.length===0?(h(),g()):q;if(o==="\\")if(h(),o==="u"){for(var G=0,K=0;K<4;K++){h();var J=o.charCodeAt(0),F;o>="0"&&o<="9"?F=J-48:o>="a"&&o<="f"?F=J-97+10:o>="A"&&o<="F"?F=J-65+10:d("Bad \\u char "+o),G=G*16+F}q+=String.fromCharCode(G)}else if(typeof a[o]=="string")q+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):q+=o}d("Bad string")}function g(){for(var B="",q=0,H=0;;){var G=p(-H-5);if(!G||G===`
`)break;H++}function K(){for(var J=H;o&&o<=" "&&o!==`
`&&J-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),K());;){if(!o)d("Bad multiline string");else if(o==="'"){if(q++,h(),q===3)return B.slice(-1)===`
`&&(B=B.slice(0,-1)),B;continue}else for(;q>0;)B+="'",q--;o===`
`?(B+=`
`,h(),K()):(o!=="\r"&&(B+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var B="",q=s,H=-1;;){if(o===":")return B?H>=0&&H!==B.length&&(s=q+H,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),B;o<=" "?o?H<0&&(H=B.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):B+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var B=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var q=o==="\r"||o===`
`||o==="";if(q||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var H=B[0];switch(H){case"f":if(B.trim()==="false")return!1;break;case"n":if(B.trim()==="null")return null;break;case"t":if(B.trim()==="true")return!0;break;default:if(H==="-"||H>="0"&&H<="9"){var G=n.tryParseNumber(B);if(G!==void 0)return G}}if(q){B=B.trim();var K=l(B);return K!==void 0?K:B}}B+=o}}function w(B,q){var H;for(B--,H=s-2;H>B&&i[H]<=" "&&i[H]!==`
`;H--);i[H]===`
`&&H--,i[H]==="\r"&&H--;var G=i.substr(B,H-B+1);for(H=0;H<G.length;H++)if(G[H]>" "){var K=G.indexOf(`
`);if(K>=0){var J=[G.substr(0,K),G.substr(K+1)];return q&&J[0].trim().length===0&&J.shift(),J}else return[G]}return[]}function x(B){function q(G,K){var J,F,j,W;switch(typeof G){case"string":G.indexOf(K)>=0&&(W=G);break;case"object":if(Object.prototype.toString.apply(G)==="[object Array]")for(J=0,j=G.length;J<j;J++)W=q(G[J],K)||W;else for(F in G)Object.prototype.hasOwnProperty.call(G,F)&&(W=q(G[F],K)||W)}return W}function H(G){var K=q(B,G);return K?"found '"+G+`' in a string value, your mistake could be with:
  > `+K+`
  (unquoted strings contain everything up to the next line!)`:""}return H("}")||H("]")}function S(){var B=[],q,H,G;try{if(u&&(q=n.createComment(B,{a:[]})),h(),H=s,v(),q&&(G=w(H,!0).join(`
`)),o==="]")return h(),q&&(q.e=[G]),B;for(;o;){if(B.push(C()),H=s,v(),o===","&&(h(),H=s,v()),q){var K=w(H);q.a.push([G||"",K[0]||""]),G=K[1]}if(o==="]")return h(),q&&(q.a[q.a.length-1][1]+=G||""),B;v()}d("End of input while parsing an array (missing ']')")}catch(J){throw J.hint=J.hint||x(B),J}}function A(B){var q="",H={},G,K,J;try{if(u&&(G=n.createComment(H,{c:{},o:[]})),B?K=1:(h(),K=s),v(),G&&(J=w(K,!0).join(`
`)),o==="}"&&!B)return G&&(G.e=[J]),h(),H;for(;o;){if(q=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),H[q]=C(),K=s,v(),o===","&&(h(),K=s,v()),G){var F=w(K);G.c[q]=[J||"",F[0]||""],J=F[1],G.o.push(q)}if(o==="}"&&!B)return h(),G&&(G.c[q][1]+=J||""),H;v()}if(B)return H;d("End of input while parsing an object (missing '}')")}catch(j){throw j.hint=j.hint||x(H),j}}function C(){switch(v(),o){case"{":return A();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function N(B,q){var H=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var G=q.join(`
`),K=w(H).join(`
`);if(K||G){var J=n.createComment(B,n.getComment(B));J.r=[G,K]}}return B}function k(){v();var B=u?w(1):null;switch(o){case"{":return N(A(),B);case"[":return N(S(),B);default:return N(C(),B)}}function D(){v();var B=u?w(1):null;switch(o){case"{":return N(A(),B);case"[":return N(S(),B)}try{return N(A(!0),B)}catch(q){c();try{return N(C(),B)}catch{throw q}}}if(typeof e!="string")throw new Error("source is not a string");var L=null,O=!0;return t&&typeof t=="object"&&(u=t.keepWsc,L=t.dsf,O=t.legacyRoot!==!1),l=r.loadDsf(L,"parse"),i=e,c(),O?D():k()},_Nn=function(e,t){var n=Hj,r=Kce,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,x="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+x+"]","g"),A=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+x+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+x+"]","g"),N=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},D=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,L="",O=0;function B(W,M){return O+=W[0].length+W[1].length-W[2]-W[3],W[0]+M+W[1]}function q(W){return W.replace(S,function(M){var V=k[M];return typeof V=="string"?B(g.esc,V):B(g.uni,("0000"+M.charCodeAt(0).toString(16)).slice(-4))})}function H(W,M,V,Q){return W?(A.lastIndex=0,N.lastIndex=0,c||V||A.test(W)||n.tryParseNumber(W,!0)!==void 0||N.test(W)?(S.lastIndex=0,C.lastIndex=0,S.test(W)?!C.test(W)&&!Q&&d?G(W,M):B(g.qstr,q(W)):B(g.qstr,W)):B(g.str,W)):B(g.qstr,"")}function G(W,M){var V,Q=W.replace(/\r/g,"").split(`
`);if(M+=o,Q.length===1)return B(g.mstr,Q[0]);var se=s+M+g.mstr[0];for(V=0;V<Q.length;V++)se+=s,Q[V]&&(se+=M+Q[V]);return se+s+M+g.mstr[1]}function K(W){return W?l||D.test(W)?(S.lastIndex=0,B(g.qkey,S.test(W)?q(W):W)):B(g.key,W):'""'}function J(W,M,V,Q){function se(Sn){return Sn&&Sn[Sn[0]==="\r"?1:0]===`
`}function be(Sn){return Sn&&!se(Sn)}function he(Sn,zn,pr){if(!Sn)return"";Sn=n.forceComment(Sn);var yr,ea=Sn.length;for(yr=0;yr<ea&&Sn[yr]<=" ";yr++);return pr&&yr>0&&(Sn=Sn.substr(yr)),yr<ea?zn+B(g.rem,Sn):Sn}var Ce=w(W);if(Ce!==void 0)return B(g.dsf,Ce);switch(typeof W){case"string":return H(W,L,M,Q);case"number":return isFinite(W)?B(g.num,String(W)):B(g.lit,"null");case"boolean":return B(g.lit,String(W));case"object":if(!W)return B(g.lit,"null");var De;a&&(De=n.getComment(W));var rt=Object.prototype.toString.apply(W)==="[object Array]",Re=L;L+=o;var Tt=s+Re,Ze=s+L,It=V||u?"":Tt,mt=[],Se,Fe=f?[]:null,st=c,yt=d,Nt=h?"":g.com[0],Je=0,xe,kt,Rt,Ee,Oe,ot,_t,jt,Un;if(rt){for(xe=0,kt=W.length;xe<kt;xe++){if(Se=xe<kt-1,De?(ot=De.a[xe]||[],_t=be(ot[1]),mt.push(he(ot[0],`
`)+Ze),Fe&&(ot[0]||ot[1]||_t)&&(Fe=null)):mt.push(Ze),O=0,Ee=W[xe],mt.push(J(Ee,De?_t:!1,!0)+(Se?h:"")),Fe){switch(typeof Ee){case"string":O=0,c=!0,d=0,Fe.push(J(Ee,!1,!0)+(Se?g.com[0]:"")),c=st,d=yt;break;case"object":if(Ee){Fe=null;break}default:Fe.push(mt[mt.length-1]+(Se?Nt:""));break}Se&&(O+=g.com[0].length-g.com[2]),Je+=O}De&&ot[1]&&mt.push(he(ot[1],_t?" ":`
`,_t))}kt===0?De&&De.e&&mt.push(he(De.e[0],`
`)+Tt):mt.push(Tt),mt.length===0?jt=B(g.arr,""):(jt=It+B(g.arr,mt.join("")),Fe&&(Un=Fe.join(" "),Un.length-Je<=f&&(jt=B(g.arr,Un))))}else{var hr=De?De.o.slice():[],Sr=[];for(Rt in W)Object.prototype.hasOwnProperty.call(W,Rt)&&hr.indexOf(Rt)<0&&Sr.push(Rt);m&&Sr.sort();var _i=hr.concat(Sr);for(xe=0,kt=_i.length;xe<kt;xe++)if(Se=xe<kt-1,Rt=_i[xe],De?(ot=De.c[Rt]||[],_t=be(ot[1]),mt.push(he(ot[0],`
`)+Ze),Fe&&(ot[0]||ot[1]||_t)&&(Fe=null)):mt.push(Ze),O=0,Ee=W[Rt],Oe=J(Ee,De&&_t),mt.push(K(Rt)+g.col[0]+(se(Oe)?"":" ")+Oe+(Se?h:"")),De&&ot[1]&&mt.push(he(ot[1],_t?" ":`
`,_t)),Fe){switch(typeof Ee){case"string":O=0,c=!0,d=0,Oe=J(Ee,!1),c=st,d=yt,Fe.push(K(Rt)+g.col[0]+" "+Oe+(Se?g.com[0]:""));break;case"object":if(Ee){Fe=null;break}default:Fe.push(mt[mt.length-1]+(Se?Nt:""));break}O+=g.col[0].length-g.col[2],Se&&(O+=g.com[0].length-g.com[2]),Je+=O}kt===0?De&&De.e&&mt.push(he(De.e[0],`
`)+Tt):mt.push(Tt),mt.length===0?jt=B(g.obj,""):(jt=It+B(g.obj,mt.join("")),Fe&&(Un=Fe.join(" "),Un.length-Je<=f&&(jt=B(g.obj,Un))))}return L=Re,jt}}w=r.loadDsf(p,"stringify");var F="",j=a?j=(n.getComment(e)||{}).r:null;return j&&j[0]&&(F=j[0]+`
`),F+=J(e,null,!0,!0),j&&(F+=j[1]||""),F},zT=Hj;function ek(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function uZ(e,t){if(!(e===null||typeof e!="object")){var n=zT.getComment(e);n&&zT.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)WAe(o.a,r,n.a[r],uZ(e[r]))&&(s=!0);!s&&n.e&&(o.e=ek(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];WAe(o.s,l,n.c[l],uZ(e[l]))&&(s=!0)}!s&&n.e&&(o.e=ek(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=ek(n.r[0],n.r[1])),s?o:void 0}}function wNn(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function xNn(e,t){var n=[];if(lZ(e,t,n,[]),n.length>0){var r=d7(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+wNn(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),d7(t,r,1)}}function WAe(e,t,n,r){var i=ek(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function tk(e,t){var n=ek(t.b,t.a);return n.path=e,n}function nk(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(tk(s,o)),nk(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(tk(u,l)),nk(l.x,t,u))});e.e&&t.push(tk(n,e.e))}}function lZ(e,t,n,r){if(e){if(t===null||typeof t!="object"){nk(e,n,r);return}var i,s=zT.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],lZ(u.x,t[i],n,l)):(n.push(tk(l,u)),nk(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],lZ(d.x,t[c],n,f))):d&&(n.push(tk(f,d)),nk(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function d7(e,t,n){var r=zT.createComment(e,zT.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=zT.forceComment(t)),r.r[n]||""}var ENn={extract:function(e){return uZ(e,!0)},merge:xNn,header:function(e,t){return d7(e,t,0)},footer:function(e,t){return d7(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var GAe=Hj,TNn=mNn,YAe=bNn,KAe=_Nn,SNn=ENn,ANn=Kce,qj={parse:YAe,stringify:KAe,endOfLine:function(){return GAe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(GAe.EOL=e)},version:TNn,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,YAe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,KAe(e,t)}},comments:SNn,dsf:ANn.std},cZ={exports:{}},nYe={},Uh={},oA={},H5={},dr={},q6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(q6);var fZ={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=q6;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(fZ);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=q6,n=fZ;var r=q6;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=fZ;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(V,Q){return this}}class o extends s{constructor(V,Q,se){super(),this.varKind=V,this.name=Q,this.rhs=se}render({es5:V,_n:Q}){const se=V?n.varKinds.var:this.varKind,be=this.rhs===void 0?"":` = ${this.rhs}`;return`${se} ${this.name}${be};`+Q}optimizeNames(V,Q){if(V[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,V,Q)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(V,Q,se){super(),this.lhs=V,this.rhs=Q,this.sideEffects=se}render({_n:V}){return`${this.lhs} = ${this.rhs};`+V}optimizeNames(V,Q){if(!(this.lhs instanceof t.Name&&!V[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,V,Q),this}get names(){const V=this.lhs instanceof t.Name?{}:{...this.lhs.names};return O(V,this.rhs)}}class u extends a{constructor(V,Q,se,be){super(V,se,be),this.op=Q}render({_n:V}){return`${this.lhs} ${this.op}= ${this.rhs};`+V}}class l extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`${this.label}:`+V}}class c extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`break${this.label?` ${this.label}`:""};`+V}}class f extends s{constructor(V){super(),this.error=V}render({_n:V}){return`throw ${this.error};`+V}get names(){return this.error.names}}class d extends s{constructor(V){super(),this.code=V}render({_n:V}){return`${this.code};`+V}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(V,Q){return this.code=B(this.code,V,Q),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(V=[]){super(),this.nodes=V}render(V){return this.nodes.reduce((Q,se)=>Q+se.render(V),"")}optimizeNodes(){const{nodes:V}=this;let Q=V.length;for(;Q--;){const se=V[Q].optimizeNodes();Array.isArray(se)?V.splice(Q,1,...se):se?V[Q]=se:V.splice(Q,1)}return V.length>0?this:void 0}optimizeNames(V,Q){const{nodes:se}=this;let be=se.length;for(;be--;){const he=se[be];he.optimizeNames(V,Q)||(q(V,he.names),se.splice(be,1))}return se.length>0?this:void 0}get names(){return this.nodes.reduce((V,Q)=>L(V,Q.names),{})}}class p extends h{render(V){return"{"+V._n+super.render(V)+"}"+V._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(V,Q){super(Q),this.condition=V}render(V){let Q=`if(${this.condition})`+super.render(V);return this.else&&(Q+="else "+this.else.render(V)),Q}optimizeNodes(){super.optimizeNodes();const V=this.condition;if(V===!0)return this.nodes;let Q=this.else;if(Q){const se=Q.optimizeNodes();Q=this.else=Array.isArray(se)?new g(se):se}if(Q)return V===!1?Q instanceof y?Q:Q.nodes:this.nodes.length?this:new y(H(V),Q instanceof y?[Q]:Q.nodes);if(!(V===!1||!this.nodes.length))return this}optimizeNames(V,Q){var se;if(this.else=(se=this.else)===null||se===void 0?void 0:se.optimizeNames(V,Q),!!(super.optimizeNames(V,Q)||this.else))return this.condition=B(this.condition,V,Q),this}get names(){const V=super.names;return O(V,this.condition),this.else&&L(V,this.else.names),V}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(V){super(),this.iteration=V}render(V){return`for(${this.iteration})`+super.render(V)}optimizeNames(V,Q){if(super.optimizeNames(V,Q))return this.iteration=B(this.iteration,V,Q),this}get names(){return L(super.names,this.iteration.names)}}class w extends v{constructor(V,Q,se,be){super(),this.varKind=V,this.name=Q,this.from=se,this.to=be}render(V){const Q=V.es5?n.varKinds.var:this.varKind,{name:se,from:be,to:he}=this;return`for(${Q} ${se}=${be}; ${se}<${he}; ${se}++)`+super.render(V)}get names(){const V=O(super.names,this.from);return O(V,this.to)}}class x extends v{constructor(V,Q,se,be){super(),this.loop=V,this.varKind=Q,this.name=se,this.iterable=be}render(V){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(V)}optimizeNames(V,Q){if(super.optimizeNames(V,Q))return this.iterable=B(this.iterable,V,Q),this}get names(){return L(super.names,this.iterable.names)}}class S extends p{constructor(V,Q,se){super(),this.name=V,this.args=Q,this.async=se}render(V){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(V)}}S.kind="func";class A extends h{render(V){return"return "+super.render(V)}}A.kind="return";class C extends p{render(V){let Q="try"+super.render(V);return this.catch&&(Q+=this.catch.render(V)),this.finally&&(Q+=this.finally.render(V)),Q}optimizeNodes(){var V,Q;return super.optimizeNodes(),(V=this.catch)===null||V===void 0||V.optimizeNodes(),(Q=this.finally)===null||Q===void 0||Q.optimizeNodes(),this}optimizeNames(V,Q){var se,be;return super.optimizeNames(V,Q),(se=this.catch)===null||se===void 0||se.optimizeNames(V,Q),(be=this.finally)===null||be===void 0||be.optimizeNames(V,Q),this}get names(){const V=super.names;return this.catch&&L(V,this.catch.names),this.finally&&L(V,this.finally.names),V}}class N extends p{constructor(V){super(),this.error=V}render(V){return`catch(${this.error})`+super.render(V)}}N.kind="catch";class k extends p{render(V){return"finally"+super.render(V)}}k.kind="finally";class D{constructor(V,Q={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Q,_n:Q.lines?`
`:""},this._extScope=V,this._scope=new n.Scope({parent:V}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(V){return this._scope.name(V)}scopeName(V){return this._extScope.name(V)}scopeValue(V,Q){const se=this._extScope.value(V,Q);return(this._values[se.prefix]||(this._values[se.prefix]=new Set)).add(se),se}getScopeValue(V,Q){return this._extScope.getValue(V,Q)}scopeRefs(V){return this._extScope.scopeRefs(V,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(V,Q,se,be){const he=this._scope.toName(Q);return se!==void 0&&be&&(this._constants[he.str]=se),this._leafNode(new o(V,he,se)),he}const(V,Q,se){return this._def(n.varKinds.const,V,Q,se)}let(V,Q,se){return this._def(n.varKinds.let,V,Q,se)}var(V,Q,se){return this._def(n.varKinds.var,V,Q,se)}assign(V,Q,se){return this._leafNode(new a(V,Q,se))}add(V,Q){return this._leafNode(new u(V,e.operators.ADD,Q))}code(V){return typeof V=="function"?V():V!==t.nil&&this._leafNode(new d(V)),this}object(...V){const Q=["{"];for(const[se,be]of V)Q.length>1&&Q.push(","),Q.push(se),(se!==be||this.opts.es5)&&(Q.push(":"),(0,t.addCodeArg)(Q,be));return Q.push("}"),new t._Code(Q)}if(V,Q,se){if(this._blockNode(new y(V)),Q&&se)this.code(Q).else().code(se).endIf();else if(Q)this.code(Q).endIf();else if(se)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(V){return this._elseNode(new y(V))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(V,Q){return this._blockNode(V),Q&&this.code(Q).endFor(),this}for(V,Q){return this._for(new b(V),Q)}forRange(V,Q,se,be,he=this.opts.es5?n.varKinds.var:n.varKinds.let){const Ce=this._scope.toName(V);return this._for(new w(he,Ce,Q,se),()=>be(Ce))}forOf(V,Q,se,be=n.varKinds.const){const he=this._scope.toName(V);if(this.opts.es5){const Ce=Q instanceof t.Name?Q:this.var("_arr",Q);return this.forRange("_i",0,(0,t._)`${Ce}.length`,De=>{this.var(he,(0,t._)`${Ce}[${De}]`),se(he)})}return this._for(new x("of",be,he,Q),()=>se(he))}forIn(V,Q,se,be=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(V,(0,t._)`Object.keys(${Q})`,se);const he=this._scope.toName(V);return this._for(new x("in",be,he,Q),()=>se(he))}endFor(){return this._endBlockNode(v)}label(V){return this._leafNode(new l(V))}break(V){return this._leafNode(new c(V))}return(V){const Q=new A;if(this._blockNode(Q),this.code(V),Q.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(A)}try(V,Q,se){if(!Q&&!se)throw new Error('CodeGen: "try" without "catch" and "finally"');const be=new C;if(this._blockNode(be),this.code(V),Q){const he=this.name("e");this._currNode=be.catch=new N(he),Q(he)}return se&&(this._currNode=be.finally=new k,this.code(se)),this._endBlockNode(N,k)}throw(V){return this._leafNode(new f(V))}block(V,Q){return this._blockStarts.push(this._nodes.length),V&&this.code(V).endBlock(Q),this}endBlock(V){const Q=this._blockStarts.pop();if(Q===void 0)throw new Error("CodeGen: not in self-balancing block");const se=this._nodes.length-Q;if(se<0||V!==void 0&&se!==V)throw new Error(`CodeGen: wrong number of nodes: ${se} vs ${V} expected`);return this._nodes.length=Q,this}func(V,Q=t.nil,se,be){return this._blockNode(new S(V,Q,se)),be&&this.code(be).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(V=1){for(;V-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(V){return this._currNode.nodes.push(V),this}_blockNode(V){this._currNode.nodes.push(V),this._nodes.push(V)}_endBlockNode(V,Q){const se=this._currNode;if(se instanceof V||Q&&se instanceof Q)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Q?`${V.kind}/${Q.kind}`:V.kind}"`)}_elseNode(V){const Q=this._currNode;if(!(Q instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=Q.else=V,this}get _root(){return this._nodes[0]}get _currNode(){const V=this._nodes;return V[V.length-1]}set _currNode(V){const Q=this._nodes;Q[Q.length-1]=V}}e.CodeGen=D;function L(M,V){for(const Q in V)M[Q]=(M[Q]||0)+(V[Q]||0);return M}function O(M,V){return V instanceof t._CodeOrName?L(M,V.names):M}function B(M,V,Q){if(M instanceof t.Name)return se(M);if(!be(M))return M;return new t._Code(M._items.reduce((he,Ce)=>(Ce instanceof t.Name&&(Ce=se(Ce)),Ce instanceof t._Code?he.push(...Ce._items):he.push(Ce),he),[]));function se(he){const Ce=Q[he.str];return Ce===void 0||V[he.str]!==1?he:(delete V[he.str],Ce)}function be(he){return he instanceof t._Code&&he._items.some(Ce=>Ce instanceof t.Name&&V[Ce.str]===1&&Q[Ce.str]!==void 0)}}function q(M,V){for(const Q in V)M[Q]=(M[Q]||0)-(V[Q]||0)}function H(M){return typeof M=="boolean"||typeof M=="number"||M===null?!M:(0,t._)`!${W(M)}`}e.not=H;const G=j(e.operators.AND);function K(...M){return M.reduce(G)}e.and=K;const J=j(e.operators.OR);function F(...M){return M.reduce(J)}e.or=F;function j(M){return(V,Q)=>V===t.nil?Q:Q===t.nil?V:(0,t._)`${W(V)} ${M} ${W(Q)}`}function W(M){return M instanceof t.Name?M:(0,t._)`(${M})`}})(dr);var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.checkStrictMode=Ft.getErrorPath=Ft.Type=Ft.useFunc=Ft.setEvaluated=Ft.evaluatedPropsToName=Ft.mergeEvaluated=Ft.eachItem=Ft.unescapeJsonPointer=Ft.escapeJsonPointer=Ft.escapeFragment=Ft.unescapeFragment=Ft.schemaRefOrVal=Ft.schemaHasRulesButRef=Ft.schemaHasRules=Ft.checkUnknownRules=Ft.alwaysValidSchema=Ft.toHash=void 0;const qi=dr,CNn=q6;function INn(e){const t={};for(const n of e)t[n]=!0;return t}Ft.toHash=INn;function kNn(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(rYe(e,t),!iYe(t,e.self.RULES.all))}Ft.alwaysValidSchema=kNn;function rYe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||aYe(e,`unknown keyword: "${s}"`)}Ft.checkUnknownRules=rYe;function iYe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Ft.schemaHasRules=iYe;function RNn(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Ft.schemaHasRulesButRef=RNn;function NNn({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,qi._)`${n}`}return(0,qi._)`${e}${t}${(0,qi.getProperty)(r)}`}Ft.schemaRefOrVal=NNn;function PNn(e){return sYe(decodeURIComponent(e))}Ft.unescapeFragment=PNn;function DNn(e){return encodeURIComponent(Xce(e))}Ft.escapeFragment=DNn;function Xce(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Ft.escapeJsonPointer=Xce;function sYe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Ft.unescapeJsonPointer=sYe;function ONn(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Ft.eachItem=ONn;function XAe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof qi.Name?(s instanceof qi.Name?e(i,s,o):t(i,s,o),o):s instanceof qi.Name?(t(i,o,s),s):n(s,o);return a===qi.Name&&!(u instanceof qi.Name)?r(i,u):u}}Ft.mergeEvaluated={props:XAe({mergeNames:(e,t,n)=>e.if((0,qi._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,qi._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,qi._)`${n} || {}`).code((0,qi._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,qi._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,qi._)`${n} || {}`),Qce(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:oYe}),items:XAe({mergeNames:(e,t,n)=>e.if((0,qi._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,qi._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,qi._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,qi._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function oYe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,qi._)`{}`);return t!==void 0&&Qce(e,n,t),n}Ft.evaluatedPropsToName=oYe;function Qce(e,t,n){Object.keys(n).forEach(r=>e.assign((0,qi._)`${t}${(0,qi.getProperty)(r)}`,!0))}Ft.setEvaluated=Qce;const QAe={};function $Nn(e,t){return e.scopeValue("func",{ref:t,code:QAe[t.code]||(QAe[t.code]=new CNn._Code(t.code))})}Ft.useFunc=$Nn;var dZ;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(dZ||(Ft.Type=dZ={}));function LNn(e,t,n){if(e instanceof qi.Name){const r=t===dZ.Num;return n?r?(0,qi._)`"[" + ${e} + "]"`:(0,qi._)`"['" + ${e} + "']"`:r?(0,qi._)`"/" + ${e}`:(0,qi._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,qi.getProperty)(e).toString():"/"+Xce(e)}Ft.getErrorPath=LNn;function aYe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Ft.checkStrictMode=aYe;var hm={};Object.defineProperty(hm,"__esModule",{value:!0});const hu=dr,MNn={data:new hu.Name("data"),valCxt:new hu.Name("valCxt"),instancePath:new hu.Name("instancePath"),parentData:new hu.Name("parentData"),parentDataProperty:new hu.Name("parentDataProperty"),rootData:new hu.Name("rootData"),dynamicAnchors:new hu.Name("dynamicAnchors"),vErrors:new hu.Name("vErrors"),errors:new hu.Name("errors"),this:new hu.Name("this"),self:new hu.Name("self"),scope:new hu.Name("scope"),json:new hu.Name("json"),jsonPos:new hu.Name("jsonPos"),jsonLen:new hu.Name("jsonLen"),jsonPart:new hu.Name("jsonPart")};hm.default=MNn;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=dr,n=Ft,r=hm;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:x,compositeRule:S,allErrors:A}=w,C=f(g,y,v);b??(S||A)?u(x,C):l(w,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:x,allErrors:S}=b,A=f(g,y,v);u(w,A),x||S||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:x}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,A=>{g.const(S,(0,t._)`${r.default.vErrors}[${A}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,x.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${x.errSchemaPath}/${y}`),x.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,x=[h(w,v),p(g,v)];return m(g,y,x),b.object(...x)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:x,schemaValue:S,it:A}=g,{opts:C,propertyName:N,topSchemaRef:k,schemaPath:D}=A;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&b.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${k}${D}`],[r.default.data,x]),N&&b.push([c.propertyName,N])}})(H5);Object.defineProperty(oA,"__esModule",{value:!0});oA.boolOrEmptySchema=oA.topBoolOrEmptySchema=void 0;const FNn=H5,BNn=dr,jNn=hm,UNn={message:"boolean schema is false"};function zNn(e){const{gen:t,schema:n,validateName:r}=e;n===!1?uYe(e,!1):typeof n=="object"&&n.$async===!0?t.return(jNn.default.data):(t.assign((0,BNn._)`${r}.errors`,null),t.return(!0))}oA.topBoolOrEmptySchema=zNn;function VNn(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),uYe(e)):n.var(t,!0)}oA.boolOrEmptySchema=VNn;function uYe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,FNn.reportError)(i,UNn,void 0,t)}var Fo={},vx={};Object.defineProperty(vx,"__esModule",{value:!0});vx.getRules=vx.isJSONType=void 0;const HNn=["string","number","integer","boolean","null","object","array"],qNn=new Set(HNn);function WNn(e){return typeof e=="string"&&qNn.has(e)}vx.isJSONType=WNn;function GNn(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}vx.getRules=GNn;var kg={};Object.defineProperty(kg,"__esModule",{value:!0});kg.shouldUseRule=kg.shouldUseGroup=kg.schemaHasRulesForType=void 0;function YNn({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&lYe(e,r)}kg.schemaHasRulesForType=YNn;function lYe(e,t){return t.rules.some(n=>cYe(e,n))}kg.shouldUseGroup=lYe;function cYe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}kg.shouldUseRule=cYe;Object.defineProperty(Fo,"__esModule",{value:!0});Fo.reportTypeError=Fo.checkDataTypes=Fo.checkDataType=Fo.coerceAndCheckDataType=Fo.getJSONTypes=Fo.getSchemaTypes=Fo.DataType=void 0;const KNn=vx,XNn=kg,QNn=H5,Xn=dr,fYe=Ft;var VT;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(VT||(Fo.DataType=VT={}));function JNn(e){const t=dYe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Fo.getSchemaTypes=JNn;function dYe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(KNn.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Fo.getJSONTypes=dYe;function ZNn(e,t){const{gen:n,data:r,opts:i}=e,s=ePn(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,XNn.schemaHasRulesForType)(e,t[0]));if(o){const a=Jce(t,r,i.strictNumbers,VT.Wrong);n.if(a,()=>{s.length?tPn(e,t,s):Zce(e)})}return o}Fo.coerceAndCheckDataType=ZNn;const hYe=new Set(["string","number","integer","boolean","null"]);function ePn(e,t){return t?e.filter(n=>hYe.has(n)||t==="array"&&n==="array"):[]}function tPn(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,Xn._)`typeof ${i}`),a=r.let("coerced",(0,Xn._)`undefined`);s.coerceTypes==="array"&&r.if((0,Xn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,Xn._)`${i}[0]`).assign(o,(0,Xn._)`typeof ${i}`).if(Jce(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,Xn._)`${a} !== undefined`);for(const l of n)(hYe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),Zce(e),r.endIf(),r.if((0,Xn._)`${a} !== undefined`,()=>{r.assign(i,a),nPn(e,a)});function u(l){switch(l){case"string":r.elseIf((0,Xn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Xn._)`"" + ${i}`).elseIf((0,Xn._)`${i} === null`).assign(a,(0,Xn._)`""`);return;case"number":r.elseIf((0,Xn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,Xn._)`+${i}`);return;case"integer":r.elseIf((0,Xn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,Xn._)`+${i}`);return;case"boolean":r.elseIf((0,Xn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,Xn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Xn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Xn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,Xn._)`[${i}]`)}}}function nPn({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,Xn._)`${t} !== undefined`,()=>e.assign((0,Xn._)`${t}[${n}]`,r))}function hZ(e,t,n,r=VT.Correct){const i=r===VT.Correct?Xn.operators.EQ:Xn.operators.NEQ;let s;switch(e){case"null":return(0,Xn._)`${t} ${i} null`;case"array":s=(0,Xn._)`Array.isArray(${t})`;break;case"object":s=(0,Xn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,Xn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,Xn._)`typeof ${t} ${i} ${e}`}return r===VT.Correct?s:(0,Xn.not)(s);function o(a=Xn.nil){return(0,Xn.and)((0,Xn._)`typeof ${t} == "number"`,a,n?(0,Xn._)`isFinite(${t})`:Xn.nil)}}Fo.checkDataType=hZ;function Jce(e,t,n,r){if(e.length===1)return hZ(e[0],t,n,r);let i;const s=(0,fYe.toHash)(e);if(s.array&&s.object){const o=(0,Xn._)`typeof ${t} != "object"`;i=s.null?o:(0,Xn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=Xn.nil;s.number&&delete s.integer;for(const o in s)i=(0,Xn.and)(i,hZ(o,t,n,r));return i}Fo.checkDataTypes=Jce;const rPn={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Xn._)`{type: ${e}}`:(0,Xn._)`{type: ${t}}`};function Zce(e){const t=iPn(e);(0,QNn.reportError)(t,rPn)}Fo.reportTypeError=Zce;function iPn(e){const{gen:t,data:n,schema:r}=e,i=(0,fYe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var Wj={};Object.defineProperty(Wj,"__esModule",{value:!0});Wj.assignDefaults=void 0;const gE=dr,sPn=Ft;function oPn(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)JAe(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>JAe(e,s,i.default))}Wj.assignDefaults=oPn;function JAe(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,gE._)`${s}${(0,gE.getProperty)(t)}`;if(i){(0,sPn.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,gE._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,gE._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,gE._)`${a} = ${(0,gE.stringify)(n)}`)}var l0={},lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.validateUnion=lr.validateArray=lr.usePattern=lr.callValidateCode=lr.schemaProperties=lr.allSchemaProperties=lr.noPropertyInData=lr.propertyInData=lr.isOwnProperty=lr.hasPropFunc=lr.reportMissingProp=lr.checkMissingProp=lr.checkReportMissingProp=void 0;const fs=dr,efe=Ft,oy=hm,aPn=Ft;function uPn(e,t){const{gen:n,data:r,it:i}=e;n.if(nfe(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,fs._)`${t}`},!0),e.error()})}lr.checkReportMissingProp=uPn;function lPn({gen:e,data:t,it:{opts:n}},r,i){return(0,fs.or)(...r.map(s=>(0,fs.and)(nfe(e,t,s,n.ownProperties),(0,fs._)`${i} = ${s}`)))}lr.checkMissingProp=lPn;function cPn(e,t){e.setParams({missingProperty:t},!0),e.error()}lr.reportMissingProp=cPn;function pYe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,fs._)`Object.prototype.hasOwnProperty`})}lr.hasPropFunc=pYe;function tfe(e,t,n){return(0,fs._)`${pYe(e)}.call(${t}, ${n})`}lr.isOwnProperty=tfe;function fPn(e,t,n,r){const i=(0,fs._)`${t}${(0,fs.getProperty)(n)} !== undefined`;return r?(0,fs._)`${i} && ${tfe(e,t,n)}`:i}lr.propertyInData=fPn;function nfe(e,t,n,r){const i=(0,fs._)`${t}${(0,fs.getProperty)(n)} === undefined`;return r?(0,fs.or)(i,(0,fs.not)(tfe(e,t,n))):i}lr.noPropertyInData=nfe;function mYe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}lr.allSchemaProperties=mYe;function dPn(e,t){return mYe(t).filter(n=>!(0,efe.alwaysValidSchema)(e,t[n]))}lr.schemaProperties=dPn;function hPn({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,fs._)`${e}, ${t}, ${r}${i}`:t,f=[[oy.default.instancePath,(0,fs.strConcat)(oy.default.instancePath,s)],[oy.default.parentData,o.parentData],[oy.default.parentDataProperty,o.parentDataProperty],[oy.default.rootData,oy.default.rootData]];o.opts.dynamicRef&&f.push([oy.default.dynamicAnchors,oy.default.dynamicAnchors]);const d=(0,fs._)`${c}, ${n.object(...f)}`;return u!==fs.nil?(0,fs._)`${a}.call(${u}, ${d})`:(0,fs._)`${a}(${d})`}lr.callValidateCode=hPn;const pPn=(0,fs._)`new RegExp`;function mPn({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,fs._)`${i.code==="new RegExp"?pPn:(0,aPn.useFunc)(e,i)}(${n}, ${r})`})}lr.usePattern=mPn;function gPn(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,fs._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:efe.Type.Num},s),t.if((0,fs.not)(s),a)})}}lr.validateArray=gPn;function yPn(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,efe.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,fs._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,fs.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}lr.validateUnion=yPn;Object.defineProperty(l0,"__esModule",{value:!0});l0.validateKeywordUsage=l0.validSchemaType=l0.funcKeywordCode=l0.macroKeywordCode=void 0;const nl=dr,X_=hm,vPn=lr,bPn=H5;function _Pn(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=gYe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:nl.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}l0.macroKeywordCode=_Pn;function wPn(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;EPn(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=gYe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&ZAe(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&ZAe(e),g(()=>xPn(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,nl._)`await `),v=>r.assign(f,!1).if((0,nl._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,nl._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,nl._)`${c}.errors`;return r.assign(y,null),m(nl.nil),y}function m(y=t.async?(0,nl._)`await `:nl.nil){const v=u.opts.passContext?X_.default.this:X_.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,nl._)`${y}${(0,vPn.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,nl.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}l0.funcKeywordCode=wPn;function ZAe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,nl._)`${r.parentData}[${r.parentDataProperty}]`))}function xPn(e,t){const{gen:n}=e;n.if((0,nl._)`Array.isArray(${t})`,()=>{n.assign(X_.default.vErrors,(0,nl._)`${X_.default.vErrors} === null ? ${t} : ${X_.default.vErrors}.concat(${t})`).assign(X_.default.errors,(0,nl._)`${X_.default.vErrors}.length`),(0,bPn.extendErrors)(e)},()=>e.error())}function EPn({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function gYe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,nl.stringify)(n)})}function TPn(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}l0.validSchemaType=TPn;function SPn({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}l0.validateKeywordUsage=SPn;var yv={};Object.defineProperty(yv,"__esModule",{value:!0});yv.extendSubschemaMode=yv.extendSubschemaData=yv.getSubschema=void 0;const s0=dr,yYe=Ft;function APn(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,s0._)`${e.schemaPath}${(0,s0.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,s0._)`${e.schemaPath}${(0,s0.getProperty)(t)}${(0,s0.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,yYe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}yv.getSubschema=APn;function CPn(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,s0._)`${t.data}${(0,s0.getProperty)(n)}`,!0);u(d),e.errorPath=(0,s0.str)`${l}${(0,yYe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,s0._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof s0.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}yv.extendSubschemaData=CPn;function IPn(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}yv.extendSubschemaMode=IPn;var Ba={},vYe={exports:{}},Xy=vYe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};PO(t,r,i,e,"",e)};Xy.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Xy.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Xy.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Xy.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function PO(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Xy.arrayKeywords)for(var d=0;d<f.length;d++)PO(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Xy.propsKeywords){if(f&&typeof f=="object")for(var h in f)PO(e,t,n,f[h],i+"/"+c+"/"+kPn(h),s,i,c,r,h)}else(c in Xy.keywords||e.allKeys&&!(c in Xy.skipKeywords))&&PO(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function kPn(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var RPn=vYe.exports;Object.defineProperty(Ba,"__esModule",{value:!0});Ba.getSchemaRefs=Ba.resolveUrl=Ba.normalizeId=Ba._getFullPath=Ba.getFullPath=Ba.inlineRef=void 0;const NPn=Ft,PPn=gre,DPn=RPn,OPn=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function $Pn(e,t=!0){return typeof e=="boolean"?!0:t===!0?!pZ(e):t?bYe(e)<=t:!1}Ba.inlineRef=$Pn;const LPn=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function pZ(e){for(const t in e){if(LPn.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(pZ)||typeof n=="object"&&pZ(n))return!0}return!1}function bYe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!OPn.has(n)&&(typeof e[n]=="object"&&(0,NPn.eachItem)(e[n],r=>t+=bYe(r)),t===1/0))return 1/0}return t}function _Ye(e,t="",n){n!==!1&&(t=HT(t));const r=e.parse(t);return wYe(e,r)}Ba.getFullPath=_Ye;function wYe(e,t){return e.serialize(t).split("#")[0]+"#"}Ba._getFullPath=wYe;const MPn=/#\/?$/;function HT(e){return e?e.replace(MPn,""):""}Ba.normalizeId=HT;function FPn(e,t,n){return n=HT(n),e.resolve(t,n)}Ba.resolveUrl=FPn;const BPn=/^[a-z_][-a-z0-9._]*$/i;function jPn(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=HT(e[n]||t),s={"":i},o=_Ye(r,i,!1),a={},u=new Set;return DPn(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=HT(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let x=this.refs[b];return typeof x=="string"&&(x=this.refs[x]),typeof x=="object"?l(f,x.schema,b):b!==HT(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!BPn.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!PPn(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ba.getSchemaRefs=jPn;Object.defineProperty(Uh,"__esModule",{value:!0});Uh.getData=Uh.KeywordCxt=Uh.validateFunctionCode=void 0;const xYe=oA,eCe=Fo,rfe=kg,h7=Fo,UPn=Wj,rk=l0,gG=yv,Zt=dr,kn=hm,zPn=Ba,Rg=Ft,pI=H5;function VPn(e){if(SYe(e)&&(AYe(e),TYe(e))){WPn(e);return}EYe(e,()=>(0,xYe.topBoolOrEmptySchema)(e))}Uh.validateFunctionCode=VPn;function EYe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Zt._)`${kn.default.data}, ${kn.default.valCxt}`,r.$async,()=>{e.code((0,Zt._)`"use strict"; ${tCe(n,i)}`),qPn(e,i),e.code(s)}):e.func(t,(0,Zt._)`${kn.default.data}, ${HPn(i)}`,r.$async,()=>e.code(tCe(n,i)).code(s))}function HPn(e){return(0,Zt._)`{${kn.default.instancePath}="", ${kn.default.parentData}, ${kn.default.parentDataProperty}, ${kn.default.rootData}=${kn.default.data}${e.dynamicRef?(0,Zt._)`, ${kn.default.dynamicAnchors}={}`:Zt.nil}}={}`}function qPn(e,t){e.if(kn.default.valCxt,()=>{e.var(kn.default.instancePath,(0,Zt._)`${kn.default.valCxt}.${kn.default.instancePath}`),e.var(kn.default.parentData,(0,Zt._)`${kn.default.valCxt}.${kn.default.parentData}`),e.var(kn.default.parentDataProperty,(0,Zt._)`${kn.default.valCxt}.${kn.default.parentDataProperty}`),e.var(kn.default.rootData,(0,Zt._)`${kn.default.valCxt}.${kn.default.rootData}`),t.dynamicRef&&e.var(kn.default.dynamicAnchors,(0,Zt._)`${kn.default.valCxt}.${kn.default.dynamicAnchors}`)},()=>{e.var(kn.default.instancePath,(0,Zt._)`""`),e.var(kn.default.parentData,(0,Zt._)`undefined`),e.var(kn.default.parentDataProperty,(0,Zt._)`undefined`),e.var(kn.default.rootData,kn.default.data),t.dynamicRef&&e.var(kn.default.dynamicAnchors,(0,Zt._)`{}`)})}function WPn(e){const{schema:t,opts:n,gen:r}=e;EYe(e,()=>{n.$comment&&t.$comment&&IYe(e),QPn(e),r.let(kn.default.vErrors,null),r.let(kn.default.errors,0),n.unevaluated&&GPn(e),CYe(e),e8n(e)})}function GPn(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Zt._)`${n}.evaluated`),t.if((0,Zt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Zt._)`${e.evaluated}.props`,(0,Zt._)`undefined`)),t.if((0,Zt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Zt._)`${e.evaluated}.items`,(0,Zt._)`undefined`))}function tCe(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Zt._)`/*# sourceURL=${n} */`:Zt.nil}function YPn(e,t){if(SYe(e)&&(AYe(e),TYe(e))){KPn(e,t);return}(0,xYe.boolOrEmptySchema)(e,t)}function TYe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function SYe(e){return typeof e.schema!="boolean"}function KPn(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&IYe(e),JPn(e),ZPn(e);const s=r.const("_errs",kn.default.errors);CYe(e,s),r.var(t,(0,Zt._)`${s} === ${kn.default.errors}`)}function AYe(e){(0,Rg.checkUnknownRules)(e),XPn(e)}function CYe(e,t){if(e.opts.jtd)return nCe(e,[],!1,t);const n=(0,eCe.getSchemaTypes)(e.schema),r=(0,eCe.coerceAndCheckDataType)(e,n);nCe(e,n,!r,t)}function XPn(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Rg.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function QPn(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Rg.checkStrictMode)(e,"default is ignored in the schema root")}function JPn(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,zPn.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function ZPn(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function IYe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Zt._)`${kn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Zt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Zt._)`${kn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function e8n(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Zt._)`${kn.default.errors} === 0`,()=>t.return(kn.default.data),()=>t.throw((0,Zt._)`new ${i}(${kn.default.vErrors})`)):(t.assign((0,Zt._)`${r}.errors`,kn.default.vErrors),s.unevaluated&&t8n(e),t.return((0,Zt._)`${kn.default.errors} === 0`))}function t8n({gen:e,evaluated:t,props:n,items:r}){n instanceof Zt.Name&&e.assign((0,Zt._)`${t}.props`,n),r instanceof Zt.Name&&e.assign((0,Zt._)`${t}.items`,r)}function nCe(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Rg.schemaHasRulesButRef)(s,c))){i.block(()=>NYe(e,"$ref",c.all.$ref.definition));return}u.jtd||n8n(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,rfe.shouldUseGroup)(s,d)&&(d.type?(i.if((0,h7.checkDataType)(d.type,o,u.strictNumbers)),rCe(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,h7.reportTypeError)(e)),i.endIf()):rCe(e,d),a||i.if((0,Zt._)`${kn.default.errors} === ${r||0}`))}}function rCe(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,UPn.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,rfe.shouldUseRule)(r,s)&&NYe(e,s.keyword,s.definition,t.type)})}function n8n(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(r8n(e,t),e.opts.allowUnionTypes||i8n(e,t),s8n(e,e.dataTypes))}function r8n(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{kYe(e.dataTypes,n)||ife(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),a8n(e,t)}}function i8n(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&ife(e,"use allowUnionTypes to allow union type keyword")}function s8n(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,rfe.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>o8n(t,o))&&ife(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function o8n(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function kYe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function a8n(e,t){const n=[];for(const r of e.dataTypes)kYe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function ife(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Rg.checkStrictMode)(e,t,e.opts.strictTypes)}class RYe{constructor(t,n,r){if((0,rk.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Rg.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",PYe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,rk.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",kn.default.errors))}result(t,n,r){this.failResult((0,Zt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Zt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Zt._)`${n} !== undefined && (${(0,Zt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?pI.reportExtraError:pI.reportError)(this,this.def.error,n)}$dataError(){(0,pI.reportError)(this,this.def.$dataError||pI.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,pI.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Zt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Zt.nil,n=Zt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Zt.or)((0,Zt._)`${i} === undefined`,n)),t!==Zt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Zt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Zt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Zt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Zt._)`${(0,h7.checkDataTypes)(u,n,s.opts.strictNumbers,h7.DataType.Wrong)}`}return Zt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Zt._)`!${u}(${n})`}return Zt.nil}}subschema(t,n){const r=(0,gG.getSubschema)(this.it,t);(0,gG.extendSubschemaData)(r,this.it,t),(0,gG.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return YPn(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Rg.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Rg.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Zt.Name)),!0}}Uh.KeywordCxt=RYe;function NYe(e,t,n,r){const i=new RYe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,rk.funcKeywordCode)(i,n):"macro"in n?(0,rk.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,rk.funcKeywordCode)(i,n)}const u8n=/^\/(?:[^~]|~0|~1)*$/,l8n=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function PYe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return kn.default.rootData;if(e[0]==="/"){if(!u8n.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=kn.default.rootData}else{const l=l8n.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Zt._)`${s}${(0,Zt.getProperty)((0,Rg.unescapeJsonPointer)(l))}`,o=(0,Zt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Uh.getData=PYe;var q5={};Object.defineProperty(q5,"__esModule",{value:!0});class c8n extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}q5.default=c8n;var PC={};Object.defineProperty(PC,"__esModule",{value:!0});const yG=Ba;class f8n extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,yG.resolveUrl)(t,n,r),this.missingSchema=(0,yG.normalizeId)((0,yG.getFullPath)(t,this.missingRef))}}PC.default=f8n;var nc={};Object.defineProperty(nc,"__esModule",{value:!0});nc.resolveSchema=nc.getCompilingSchema=nc.resolveRef=nc.compileSchema=nc.SchemaEnv=void 0;const nh=dr,d8n=q5,x_=hm,Sh=Ba,iCe=Ft,h8n=Uh;class Gj{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Sh.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}nc.SchemaEnv=Gj;function sfe(e){const t=DYe.call(this,e);if(t)return t;const n=(0,Sh.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new nh.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:d8n.default,code:(0,nh._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:x_.default.data,parentData:x_.default.parentData,parentDataProperty:x_.default.parentDataProperty,dataNames:[x_.default.data],dataPathArr:[nh.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,nh.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:nh.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,nh._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,h8n.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(x_.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${x_.default.self}`,`${x_.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof nh.Name?void 0:p,items:m instanceof nh.Name?void 0:m,dynamicProps:p instanceof nh.Name,dynamicItems:m instanceof nh.Name},h.source&&(h.source.evaluated=(0,nh.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}nc.compileSchema=sfe;function p8n(e,t,n){var r;n=(0,Sh.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=y8n.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new Gj({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=m8n.call(this,s)}nc.resolveRef=p8n;function m8n(e){return(0,Sh.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:sfe.call(this,e)}function DYe(e){for(const t of this._compilations)if(g8n(t,e))return t}nc.getCompilingSchema=DYe;function g8n(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function y8n(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||Yj.call(this,e,t)}function Yj(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Sh._getFullPath)(this.opts.uriResolver,n);let i=(0,Sh.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return vG.call(this,n,e);const s=(0,Sh.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=Yj.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:vG.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||sfe.call(this,o),s===(0,Sh.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Sh.resolveUrl)(this.opts.uriResolver,i,l)),new Gj({schema:a,schemaId:u,root:e,baseId:i})}return vG.call(this,n,o)}}nc.resolveSchema=Yj;const v8n=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function vG(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,iCe.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!v8n.has(a)&&l&&(t=(0,Sh.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,iCe.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Sh.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=Yj.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new Gj({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const b8n="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",_8n="Meta-schema for $data reference (JSON AnySchema extension proposal)",w8n="object",x8n=["$data"],E8n={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},T8n=!1,S8n={$id:b8n,description:_8n,type:w8n,required:x8n,properties:E8n,additionalProperties:T8n};var ofe={},mZ={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Jt,function(n){function r(){for(var me=arguments.length,ue=Array(me),ge=0;ge<me;ge++)ue[ge]=arguments[ge];if(ue.length>1){ue[0]=ue[0].slice(0,-1);for(var Me=ue.length-1,Le=1;Le<Me;++Le)ue[Le]=ue[Le].slice(1,-1);return ue[Me]=ue[Me].slice(1),ue.join("")}else return ue[0]}function i(me){return"(?:"+me+")"}function s(me){return me===void 0?"undefined":me===null?"null":Object.prototype.toString.call(me).split(" ").pop().split("]").shift().toLowerCase()}function o(me){return me.toUpperCase()}function a(me){return me!=null?me instanceof Array?me:typeof me.length!="number"||me.split||me.setInterval||me.call?[me]:Array.prototype.slice.call(me):[]}function u(me,ue){var ge=me;if(ue)for(var Me in ue)ge[Me]=ue[Me];return ge}function l(me){var ue="[A-Za-z]",ge="[0-9]",Me=r(ge,"[A-Fa-f]"),Le=i(i("%[EFef]"+Me+"%"+Me+Me+"%"+Me+Me)+"|"+i("%[89A-Fa-f]"+Me+"%"+Me+Me)+"|"+i("%"+Me+Me)),wt="[\\:\\/\\?\\#\\[\\]\\@]",Ut="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",dn=r(wt,Ut),Zn=me?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ur=me?"[\\uE000-\\uF8FF]":"[]",On=r(ue,ge,"[\\-\\.\\_\\~]",Zn);i(ue+r(ue,ge,"[\\+\\-\\.]")+"*"),i(i(Le+"|"+r(On,Ut,"[\\:]"))+"*");var Ar=i(i("25[0-5]")+"|"+i("2[0-4]"+ge)+"|"+i("1"+ge+ge)+"|"+i("0?[1-9]"+ge)+"|0?0?"+ge),ai=i(Ar+"\\."+Ar+"\\."+Ar+"\\."+Ar),an=i(Me+"{1,4}"),Cr=i(i(an+"\\:"+an)+"|"+ai),Jr=i(i(an+"\\:")+"{6}"+Cr),vr=i("\\:\\:"+i(an+"\\:")+"{5}"+Cr),Ni=i(i(an)+"?\\:\\:"+i(an+"\\:")+"{4}"+Cr),bo=i(i(i(an+"\\:")+"{0,1}"+an)+"?\\:\\:"+i(an+"\\:")+"{3}"+Cr),Pi=i(i(i(an+"\\:")+"{0,2}"+an)+"?\\:\\:"+i(an+"\\:")+"{2}"+Cr),ko=i(i(i(an+"\\:")+"{0,3}"+an)+"?\\:\\:"+an+"\\:"+Cr),is=i(i(i(an+"\\:")+"{0,4}"+an)+"?\\:\\:"+Cr),ss=i(i(i(an+"\\:")+"{0,5}"+an)+"?\\:\\:"+an),Ro=i(i(i(an+"\\:")+"{0,6}"+an)+"?\\:\\:"),Ca=i([Jr,vr,Ni,bo,Pi,ko,is,ss,Ro].join("|")),_o=i(i(On+"|"+Le)+"+");i("[vV]"+Me+"+\\."+r(On,Ut,"[\\:]")+"+"),i(i(Le+"|"+r(On,Ut))+"*");var Ol=i(Le+"|"+r(On,Ut,"[\\:\\@]"));return i(i(Le+"|"+r(On,Ut,"[\\@]"))+"+"),i(i(Ol+"|"+r("[\\/\\?]",ur))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ue,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",On,Ut),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",On,Ut),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",On,Ut),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",On,Ut),"g"),NOT_QUERY:new RegExp(r("[^\\%]",On,Ut,"[\\:\\@\\/\\?]",ur),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",On,Ut,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",On,Ut),"g"),UNRESERVED:new RegExp(On,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",On,dn),"g"),PCT_ENCODED:new RegExp(Le,"g"),IPV4ADDRESS:new RegExp("^("+ai+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ca+")"+i(i("\\%25|\\%(?!"+Me+"{2})")+"("+_o+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function me(ue,ge){var Me=[],Le=!0,wt=!1,Ut=void 0;try{for(var dn=ue[Symbol.iterator](),Zn;!(Le=(Zn=dn.next()).done)&&(Me.push(Zn.value),!(ge&&Me.length===ge));Le=!0);}catch(ur){wt=!0,Ut=ur}finally{try{!Le&&dn.return&&dn.return()}finally{if(wt)throw Ut}}return Me}return function(ue,ge){if(Array.isArray(ue))return ue;if(Symbol.iterator in Object(ue))return me(ue,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(me){if(Array.isArray(me)){for(var ue=0,ge=Array(me.length);ue<me.length;ue++)ge[ue]=me[ue];return ge}else return Array.from(me)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,x=128,S="-",A=/^xn--/,C=/[^\0-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=m-g,L=Math.floor,O=String.fromCharCode;function B(me){throw new RangeError(k[me])}function q(me,ue){for(var ge=[],Me=me.length;Me--;)ge[Me]=ue(me[Me]);return ge}function H(me,ue){var ge=me.split("@"),Me="";ge.length>1&&(Me=ge[0]+"@",me=ge[1]),me=me.replace(N,".");var Le=me.split("."),wt=q(Le,ue).join(".");return Me+wt}function G(me){for(var ue=[],ge=0,Me=me.length;ge<Me;){var Le=me.charCodeAt(ge++);if(Le>=55296&&Le<=56319&&ge<Me){var wt=me.charCodeAt(ge++);(wt&64512)==56320?ue.push(((Le&1023)<<10)+(wt&1023)+65536):(ue.push(Le),ge--)}else ue.push(Le)}return ue}var K=function(ue){return String.fromCodePoint.apply(String,h(ue))},J=function(ue){return ue-48<10?ue-22:ue-65<26?ue-65:ue-97<26?ue-97:m},F=function(ue,ge){return ue+22+75*(ue<26)-((ge!=0)<<5)},j=function(ue,ge,Me){var Le=0;for(ue=Me?L(ue/b):ue>>1,ue+=L(ue/ge);ue>D*y>>1;Le+=m)ue=L(ue/D);return L(Le+(D+1)*ue/(ue+v))},W=function(ue){var ge=[],Me=ue.length,Le=0,wt=x,Ut=w,dn=ue.lastIndexOf(S);dn<0&&(dn=0);for(var Zn=0;Zn<dn;++Zn)ue.charCodeAt(Zn)>=128&&B("not-basic"),ge.push(ue.charCodeAt(Zn));for(var ur=dn>0?dn+1:0;ur<Me;){for(var On=Le,Ar=1,ai=m;;ai+=m){ur>=Me&&B("invalid-input");var an=J(ue.charCodeAt(ur++));(an>=m||an>L((p-Le)/Ar))&&B("overflow"),Le+=an*Ar;var Cr=ai<=Ut?g:ai>=Ut+y?y:ai-Ut;if(an<Cr)break;var Jr=m-Cr;Ar>L(p/Jr)&&B("overflow"),Ar*=Jr}var vr=ge.length+1;Ut=j(Le-On,vr,On==0),L(Le/vr)>p-wt&&B("overflow"),wt+=L(Le/vr),Le%=vr,ge.splice(Le++,0,wt)}return String.fromCodePoint.apply(String,ge)},M=function(ue){var ge=[];ue=G(ue);var Me=ue.length,Le=x,wt=0,Ut=w,dn=!0,Zn=!1,ur=void 0;try{for(var On=ue[Symbol.iterator](),Ar;!(dn=(Ar=On.next()).done);dn=!0){var ai=Ar.value;ai<128&&ge.push(O(ai))}}catch(qe){Zn=!0,ur=qe}finally{try{!dn&&On.return&&On.return()}finally{if(Zn)throw ur}}var an=ge.length,Cr=an;for(an&&ge.push(S);Cr<Me;){var Jr=p,vr=!0,Ni=!1,bo=void 0;try{for(var Pi=ue[Symbol.iterator](),ko;!(vr=(ko=Pi.next()).done);vr=!0){var is=ko.value;is>=Le&&is<Jr&&(Jr=is)}}catch(qe){Ni=!0,bo=qe}finally{try{!vr&&Pi.return&&Pi.return()}finally{if(Ni)throw bo}}var ss=Cr+1;Jr-Le>L((p-wt)/ss)&&B("overflow"),wt+=(Jr-Le)*ss,Le=Jr;var Ro=!0,Ca=!1,_o=void 0;try{for(var Ol=ue[Symbol.iterator](),Of;!(Ro=(Of=Ol.next()).done);Ro=!0){var ee=Of.value;if(ee<Le&&++wt>p&&B("overflow"),ee==Le){for(var pe=wt,oe=m;;oe+=m){var we=oe<=Ut?g:oe>=Ut+y?y:oe-Ut;if(pe<we)break;var Ae=pe-we,_e=m-we;ge.push(O(F(we+Ae%_e,0))),pe=L(Ae/_e)}ge.push(O(F(pe,0))),Ut=j(wt,ss,Cr==an),wt=0,++Cr}}}catch(qe){Ca=!0,_o=qe}finally{try{!Ro&&Ol.return&&Ol.return()}finally{if(Ca)throw _o}}++wt,++Le}return ge.join("")},V=function(ue){return H(ue,function(ge){return A.test(ge)?W(ge.slice(4).toLowerCase()):ge})},Q=function(ue){return H(ue,function(ge){return C.test(ge)?"xn--"+M(ge):ge})},se={version:"2.1.0",ucs2:{decode:G,encode:K},decode:W,encode:M,toASCII:Q,toUnicode:V},be={};function he(me){var ue=me.charCodeAt(0),ge=void 0;return ue<16?ge="%0"+ue.toString(16).toUpperCase():ue<128?ge="%"+ue.toString(16).toUpperCase():ue<2048?ge="%"+(ue>>6|192).toString(16).toUpperCase()+"%"+(ue&63|128).toString(16).toUpperCase():ge="%"+(ue>>12|224).toString(16).toUpperCase()+"%"+(ue>>6&63|128).toString(16).toUpperCase()+"%"+(ue&63|128).toString(16).toUpperCase(),ge}function Ce(me){for(var ue="",ge=0,Me=me.length;ge<Me;){var Le=parseInt(me.substr(ge+1,2),16);if(Le<128)ue+=String.fromCharCode(Le),ge+=3;else if(Le>=194&&Le<224){if(Me-ge>=6){var wt=parseInt(me.substr(ge+4,2),16);ue+=String.fromCharCode((Le&31)<<6|wt&63)}else ue+=me.substr(ge,6);ge+=6}else if(Le>=224){if(Me-ge>=9){var Ut=parseInt(me.substr(ge+4,2),16),dn=parseInt(me.substr(ge+7,2),16);ue+=String.fromCharCode((Le&15)<<12|(Ut&63)<<6|dn&63)}else ue+=me.substr(ge,9);ge+=9}else ue+=me.substr(ge,3),ge+=3}return ue}function De(me,ue){function ge(Me){var Le=Ce(Me);return Le.match(ue.UNRESERVED)?Le:Me}return me.scheme&&(me.scheme=String(me.scheme).replace(ue.PCT_ENCODED,ge).toLowerCase().replace(ue.NOT_SCHEME,"")),me.userinfo!==void 0&&(me.userinfo=String(me.userinfo).replace(ue.PCT_ENCODED,ge).replace(ue.NOT_USERINFO,he).replace(ue.PCT_ENCODED,o)),me.host!==void 0&&(me.host=String(me.host).replace(ue.PCT_ENCODED,ge).toLowerCase().replace(ue.NOT_HOST,he).replace(ue.PCT_ENCODED,o)),me.path!==void 0&&(me.path=String(me.path).replace(ue.PCT_ENCODED,ge).replace(me.scheme?ue.NOT_PATH:ue.NOT_PATH_NOSCHEME,he).replace(ue.PCT_ENCODED,o)),me.query!==void 0&&(me.query=String(me.query).replace(ue.PCT_ENCODED,ge).replace(ue.NOT_QUERY,he).replace(ue.PCT_ENCODED,o)),me.fragment!==void 0&&(me.fragment=String(me.fragment).replace(ue.PCT_ENCODED,ge).replace(ue.NOT_FRAGMENT,he).replace(ue.PCT_ENCODED,o)),me}function rt(me){return me.replace(/^0*(.*)/,"$1")||"0"}function Re(me,ue){var ge=me.match(ue.IPV4ADDRESS)||[],Me=d(ge,2),Le=Me[1];return Le?Le.split(".").map(rt).join("."):me}function Tt(me,ue){var ge=me.match(ue.IPV6ADDRESS)||[],Me=d(ge,3),Le=Me[1],wt=Me[2];if(Le){for(var Ut=Le.toLowerCase().split("::").reverse(),dn=d(Ut,2),Zn=dn[0],ur=dn[1],On=ur?ur.split(":").map(rt):[],Ar=Zn.split(":").map(rt),ai=ue.IPV4ADDRESS.test(Ar[Ar.length-1]),an=ai?7:8,Cr=Ar.length-an,Jr=Array(an),vr=0;vr<an;++vr)Jr[vr]=On[vr]||Ar[Cr+vr]||"";ai&&(Jr[an-1]=Re(Jr[an-1],ue));var Ni=Jr.reduce(function(ss,Ro,Ca){if(!Ro||Ro==="0"){var _o=ss[ss.length-1];_o&&_o.index+_o.length===Ca?_o.length++:ss.push({index:Ca,length:1})}return ss},[]),bo=Ni.sort(function(ss,Ro){return Ro.length-ss.length})[0],Pi=void 0;if(bo&&bo.length>1){var ko=Jr.slice(0,bo.index),is=Jr.slice(bo.index+bo.length);Pi=ko.join(":")+"::"+is.join(":")}else Pi=Jr.join(":");return wt&&(Pi+="%"+wt),Pi}else return me}var Ze=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,It="".match(/(){0}/)[1]===void 0;function mt(me){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge={},Me=ue.iri!==!1?f:c;ue.reference==="suffix"&&(me=(ue.scheme?ue.scheme+":":"")+"//"+me);var Le=me.match(Ze);if(Le){It?(ge.scheme=Le[1],ge.userinfo=Le[3],ge.host=Le[4],ge.port=parseInt(Le[5],10),ge.path=Le[6]||"",ge.query=Le[7],ge.fragment=Le[8],isNaN(ge.port)&&(ge.port=Le[5])):(ge.scheme=Le[1]||void 0,ge.userinfo=me.indexOf("@")!==-1?Le[3]:void 0,ge.host=me.indexOf("//")!==-1?Le[4]:void 0,ge.port=parseInt(Le[5],10),ge.path=Le[6]||"",ge.query=me.indexOf("?")!==-1?Le[7]:void 0,ge.fragment=me.indexOf("#")!==-1?Le[8]:void 0,isNaN(ge.port)&&(ge.port=me.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Le[4]:void 0)),ge.host&&(ge.host=Tt(Re(ge.host,Me),Me)),ge.scheme===void 0&&ge.userinfo===void 0&&ge.host===void 0&&ge.port===void 0&&!ge.path&&ge.query===void 0?ge.reference="same-document":ge.scheme===void 0?ge.reference="relative":ge.fragment===void 0?ge.reference="absolute":ge.reference="uri",ue.reference&&ue.reference!=="suffix"&&ue.reference!==ge.reference&&(ge.error=ge.error||"URI is not a "+ue.reference+" reference.");var wt=be[(ue.scheme||ge.scheme||"").toLowerCase()];if(!ue.unicodeSupport&&(!wt||!wt.unicodeSupport)){if(ge.host&&(ue.domainHost||wt&&wt.domainHost))try{ge.host=se.toASCII(ge.host.replace(Me.PCT_ENCODED,Ce).toLowerCase())}catch(Ut){ge.error=ge.error||"Host's domain name can not be converted to ASCII via punycode: "+Ut}De(ge,c)}else De(ge,Me);wt&&wt.parse&&wt.parse(ge,ue)}else ge.error=ge.error||"URI can not be parsed.";return ge}function Se(me,ue){var ge=ue.iri!==!1?f:c,Me=[];return me.userinfo!==void 0&&(Me.push(me.userinfo),Me.push("@")),me.host!==void 0&&Me.push(Tt(Re(String(me.host),ge),ge).replace(ge.IPV6ADDRESS,function(Le,wt,Ut){return"["+wt+(Ut?"%25"+Ut:"")+"]"})),(typeof me.port=="number"||typeof me.port=="string")&&(Me.push(":"),Me.push(String(me.port))),Me.length?Me.join(""):void 0}var Fe=/^\.\.?\//,st=/^\/\.(\/|$)/,yt=/^\/\.\.(\/|$)/,Nt=/^\/?(?:.|\n)*?(?=\/|$)/;function Je(me){for(var ue=[];me.length;)if(me.match(Fe))me=me.replace(Fe,"");else if(me.match(st))me=me.replace(st,"/");else if(me.match(yt))me=me.replace(yt,"/"),ue.pop();else if(me==="."||me==="..")me="";else{var ge=me.match(Nt);if(ge){var Me=ge[0];me=me.slice(Me.length),ue.push(Me)}else throw new Error("Unexpected dot segment condition")}return ue.join("")}function xe(me){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=ue.iri?f:c,Me=[],Le=be[(ue.scheme||me.scheme||"").toLowerCase()];if(Le&&Le.serialize&&Le.serialize(me,ue),me.host&&!ge.IPV6ADDRESS.test(me.host)){if(ue.domainHost||Le&&Le.domainHost)try{me.host=ue.iri?se.toUnicode(me.host):se.toASCII(me.host.replace(ge.PCT_ENCODED,Ce).toLowerCase())}catch(dn){me.error=me.error||"Host's domain name can not be converted to "+(ue.iri?"Unicode":"ASCII")+" via punycode: "+dn}}De(me,ge),ue.reference!=="suffix"&&me.scheme&&(Me.push(me.scheme),Me.push(":"));var wt=Se(me,ue);if(wt!==void 0&&(ue.reference!=="suffix"&&Me.push("//"),Me.push(wt),me.path&&me.path.charAt(0)!=="/"&&Me.push("/")),me.path!==void 0){var Ut=me.path;!ue.absolutePath&&(!Le||!Le.absolutePath)&&(Ut=Je(Ut)),wt===void 0&&(Ut=Ut.replace(/^\/\//,"/%2F")),Me.push(Ut)}return me.query!==void 0&&(Me.push("?"),Me.push(me.query)),me.fragment!==void 0&&(Me.push("#"),Me.push(me.fragment)),Me.join("")}function kt(me,ue){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Me=arguments[3],Le={};return Me||(me=mt(xe(me,ge),ge),ue=mt(xe(ue,ge),ge)),ge=ge||{},!ge.tolerant&&ue.scheme?(Le.scheme=ue.scheme,Le.userinfo=ue.userinfo,Le.host=ue.host,Le.port=ue.port,Le.path=Je(ue.path||""),Le.query=ue.query):(ue.userinfo!==void 0||ue.host!==void 0||ue.port!==void 0?(Le.userinfo=ue.userinfo,Le.host=ue.host,Le.port=ue.port,Le.path=Je(ue.path||""),Le.query=ue.query):(ue.path?(ue.path.charAt(0)==="/"?Le.path=Je(ue.path):((me.userinfo!==void 0||me.host!==void 0||me.port!==void 0)&&!me.path?Le.path="/"+ue.path:me.path?Le.path=me.path.slice(0,me.path.lastIndexOf("/")+1)+ue.path:Le.path=ue.path,Le.path=Je(Le.path)),Le.query=ue.query):(Le.path=me.path,ue.query!==void 0?Le.query=ue.query:Le.query=me.query),Le.userinfo=me.userinfo,Le.host=me.host,Le.port=me.port),Le.scheme=me.scheme),Le.fragment=ue.fragment,Le}function Rt(me,ue,ge){var Me=u({scheme:"null"},ge);return xe(kt(mt(me,Me),mt(ue,Me),Me,!0),Me)}function Ee(me,ue){return typeof me=="string"?me=xe(mt(me,ue),ue):s(me)==="object"&&(me=mt(xe(me,ue),ue)),me}function Oe(me,ue,ge){return typeof me=="string"?me=xe(mt(me,ge),ge):s(me)==="object"&&(me=xe(me,ge)),typeof ue=="string"?ue=xe(mt(ue,ge),ge):s(ue)==="object"&&(ue=xe(ue,ge)),me===ue}function ot(me,ue){return me&&me.toString().replace(!ue||!ue.iri?c.ESCAPE:f.ESCAPE,he)}function _t(me,ue){return me&&me.toString().replace(!ue||!ue.iri?c.PCT_ENCODED:f.PCT_ENCODED,Ce)}var jt={scheme:"http",domainHost:!0,parse:function(ue,ge){return ue.host||(ue.error=ue.error||"HTTP URIs must have a host."),ue},serialize:function(ue,ge){var Me=String(ue.scheme).toLowerCase()==="https";return(ue.port===(Me?443:80)||ue.port==="")&&(ue.port=void 0),ue.path||(ue.path="/"),ue}},Un={scheme:"https",domainHost:jt.domainHost,parse:jt.parse,serialize:jt.serialize};function hr(me){return typeof me.secure=="boolean"?me.secure:String(me.scheme).toLowerCase()==="wss"}var Sr={scheme:"ws",domainHost:!0,parse:function(ue,ge){var Me=ue;return Me.secure=hr(Me),Me.resourceName=(Me.path||"/")+(Me.query?"?"+Me.query:""),Me.path=void 0,Me.query=void 0,Me},serialize:function(ue,ge){if((ue.port===(hr(ue)?443:80)||ue.port==="")&&(ue.port=void 0),typeof ue.secure=="boolean"&&(ue.scheme=ue.secure?"wss":"ws",ue.secure=void 0),ue.resourceName){var Me=ue.resourceName.split("?"),Le=d(Me,2),wt=Le[0],Ut=Le[1];ue.path=wt&&wt!=="/"?wt:void 0,ue.query=Ut,ue.resourceName=void 0}return ue.fragment=void 0,ue}},_i={scheme:"wss",domainHost:Sr.domainHost,parse:Sr.parse,serialize:Sr.serialize},Sn={},zn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",pr="[0-9A-Fa-f]",yr=i(i("%[EFef]"+pr+"%"+pr+pr+"%"+pr+pr)+"|"+i("%[89A-Fa-f]"+pr+"%"+pr+pr)+"|"+i("%"+pr+pr)),ea="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",rs="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",ms=r(rs,'[\\"\\\\]'),Ls="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Hr=new RegExp(zn,"g"),gs=new RegExp(yr,"g"),Mc=new RegExp(r("[^]",ea,"[\\.]",'[\\"]',ms),"g"),ta=new RegExp(r("[^]",zn,Ls),"g"),Vu=ta;function Br(me){var ue=Ce(me);return ue.match(Hr)?ue:me}var ki={scheme:"mailto",parse:function(ue,ge){var Me=ue,Le=Me.to=Me.path?Me.path.split(","):[];if(Me.path=void 0,Me.query){for(var wt=!1,Ut={},dn=Me.query.split("&"),Zn=0,ur=dn.length;Zn<ur;++Zn){var On=dn[Zn].split("=");switch(On[0]){case"to":for(var Ar=On[1].split(","),ai=0,an=Ar.length;ai<an;++ai)Le.push(Ar[ai]);break;case"subject":Me.subject=_t(On[1],ge);break;case"body":Me.body=_t(On[1],ge);break;default:wt=!0,Ut[_t(On[0],ge)]=_t(On[1],ge);break}}wt&&(Me.headers=Ut)}Me.query=void 0;for(var Cr=0,Jr=Le.length;Cr<Jr;++Cr){var vr=Le[Cr].split("@");if(vr[0]=_t(vr[0]),ge.unicodeSupport)vr[1]=_t(vr[1],ge).toLowerCase();else try{vr[1]=se.toASCII(_t(vr[1],ge).toLowerCase())}catch(Ni){Me.error=Me.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ni}Le[Cr]=vr.join("@")}return Me},serialize:function(ue,ge){var Me=ue,Le=a(ue.to);if(Le){for(var wt=0,Ut=Le.length;wt<Ut;++wt){var dn=String(Le[wt]),Zn=dn.lastIndexOf("@"),ur=dn.slice(0,Zn).replace(gs,Br).replace(gs,o).replace(Mc,he),On=dn.slice(Zn+1);try{On=ge.iri?se.toUnicode(On):se.toASCII(_t(On,ge).toLowerCase())}catch(Cr){Me.error=Me.error||"Email address's domain name can not be converted to "+(ge.iri?"Unicode":"ASCII")+" via punycode: "+Cr}Le[wt]=ur+"@"+On}Me.path=Le.join(",")}var Ar=ue.headers=ue.headers||{};ue.subject&&(Ar.subject=ue.subject),ue.body&&(Ar.body=ue.body);var ai=[];for(var an in Ar)Ar[an]!==Sn[an]&&ai.push(an.replace(gs,Br).replace(gs,o).replace(ta,he)+"="+Ar[an].replace(gs,Br).replace(gs,o).replace(Vu,he));return ai.length&&(Me.query=ai.join("&")),Me}},mi=/^([^\:]+)\:(.*)/,eo={scheme:"urn",parse:function(ue,ge){var Me=ue.path&&ue.path.match(mi),Le=ue;if(Me){var wt=ge.scheme||Le.scheme||"urn",Ut=Me[1].toLowerCase(),dn=Me[2],Zn=wt+":"+(ge.nid||Ut),ur=be[Zn];Le.nid=Ut,Le.nss=dn,Le.path=void 0,ur&&(Le=ur.parse(Le,ge))}else Le.error=Le.error||"URN can not be parsed.";return Le},serialize:function(ue,ge){var Me=ge.scheme||ue.scheme||"urn",Le=ue.nid,wt=Me+":"+(ge.nid||Le),Ut=be[wt];Ut&&(ue=Ut.serialize(ue,ge));var dn=ue,Zn=ue.nss;return dn.path=(Le||ge.nid)+":"+Zn,dn}},oi=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ri={scheme:"urn:uuid",parse:function(ue,ge){var Me=ue;return Me.uuid=Me.nss,Me.nss=void 0,!ge.tolerant&&(!Me.uuid||!Me.uuid.match(oi))&&(Me.error=Me.error||"UUID is not valid."),Me},serialize:function(ue,ge){var Me=ue;return Me.nss=(ue.uuid||"").toLowerCase(),Me}};be[jt.scheme]=jt,be[Un.scheme]=Un,be[Sr.scheme]=Sr,be[_i.scheme]=_i,be[ki.scheme]=ki,be[eo.scheme]=eo,be[Ri.scheme]=Ri,n.SCHEMES=be,n.pctEncChar=he,n.pctDecChars=Ce,n.parse=mt,n.removeDotSegments=Je,n.serialize=xe,n.resolveComponents=kt,n.resolve=Rt,n.normalize=Ee,n.equal=Oe,n.escapeComponent=ot,n.unescapeComponent=_t,Object.defineProperty(n,"__esModule",{value:!0})})})(mZ,mZ.exports);var A8n=mZ.exports;Object.defineProperty(ofe,"__esModule",{value:!0});const OYe=A8n;OYe.code='require("ajv/dist/runtime/uri").default';ofe.default=OYe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Uh;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=dr;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=q5,i=PC,s=vx,o=nc,a=dr,u=Ba,l=Fo,c=Ft,f=S8n,d=ofe,h=(F,j)=>new RegExp(F,j);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(F){var j,W,M,V,Q,se,be,he,Ce,De,rt,Re,Tt,Ze,It,mt,Se,Fe,st,yt,Nt,Je,xe,kt,Rt;const Ee=F.strict,Oe=(j=F.code)===null||j===void 0?void 0:j.optimize,ot=Oe===!0||Oe===void 0?1:Oe||0,_t=(M=(W=F.code)===null||W===void 0?void 0:W.regExp)!==null&&M!==void 0?M:h,jt=(V=F.uriResolver)!==null&&V!==void 0?V:d.default;return{strictSchema:(se=(Q=F.strictSchema)!==null&&Q!==void 0?Q:Ee)!==null&&se!==void 0?se:!0,strictNumbers:(he=(be=F.strictNumbers)!==null&&be!==void 0?be:Ee)!==null&&he!==void 0?he:!0,strictTypes:(De=(Ce=F.strictTypes)!==null&&Ce!==void 0?Ce:Ee)!==null&&De!==void 0?De:"log",strictTuples:(Re=(rt=F.strictTuples)!==null&&rt!==void 0?rt:Ee)!==null&&Re!==void 0?Re:"log",strictRequired:(Ze=(Tt=F.strictRequired)!==null&&Tt!==void 0?Tt:Ee)!==null&&Ze!==void 0?Ze:!1,code:F.code?{...F.code,optimize:ot,regExp:_t}:{optimize:ot,regExp:_t},loopRequired:(It=F.loopRequired)!==null&&It!==void 0?It:v,loopEnum:(mt=F.loopEnum)!==null&&mt!==void 0?mt:v,meta:(Se=F.meta)!==null&&Se!==void 0?Se:!0,messages:(Fe=F.messages)!==null&&Fe!==void 0?Fe:!0,inlineRefs:(st=F.inlineRefs)!==null&&st!==void 0?st:!0,schemaId:(yt=F.schemaId)!==null&&yt!==void 0?yt:"$id",addUsedSchema:(Nt=F.addUsedSchema)!==null&&Nt!==void 0?Nt:!0,validateSchema:(Je=F.validateSchema)!==null&&Je!==void 0?Je:!0,validateFormats:(xe=F.validateFormats)!==null&&xe!==void 0?xe:!0,unicodeRegExp:(kt=F.unicodeRegExp)!==null&&kt!==void 0?kt:!0,int32range:(Rt=F.int32range)!==null&&Rt!==void 0?Rt:!0,uriResolver:jt}}class w{constructor(j={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,j=this.opts={...j,...b(j)};const{es5:W,lines:M}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:M}),this.logger=L(j.logger);const V=j.validateFormats;j.validateFormats=!1,this.RULES=(0,s.getRules)(),x.call(this,g,j,"NOT SUPPORTED"),x.call(this,y,j,"DEPRECATED","warn"),this._metaOpts=k.call(this),j.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),j.keywords&&N.call(this,j.keywords),typeof j.meta=="object"&&this.addMetaSchema(j.meta),A.call(this),j.validateFormats=V}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:j,meta:W,schemaId:M}=this.opts;let V=f;M==="id"&&(V={...f},V.id=V.$id,delete V.$id),W&&j&&this.addMetaSchema(V,V[M],!1)}defaultMeta(){const{meta:j,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof j=="object"?j[W]||j:void 0}validate(j,W){let M;if(typeof j=="string"){if(M=this.getSchema(j),!M)throw new Error(`no schema with key or ref "${j}"`)}else M=this.compile(j);const V=M(W);return"$async"in M||(this.errors=M.errors),V}compile(j,W){const M=this._addSchema(j,W);return M.validate||this._compileSchemaEnv(M)}compileAsync(j,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:M}=this.opts;return V.call(this,j,W);async function V(De,rt){await Q.call(this,De.$schema);const Re=this._addSchema(De,rt);return Re.validate||se.call(this,Re)}async function Q(De){De&&!this.getSchema(De)&&await V.call(this,{$ref:De},!0)}async function se(De){try{return this._compileSchemaEnv(De)}catch(rt){if(!(rt instanceof i.default))throw rt;return be.call(this,rt),await he.call(this,rt.missingSchema),se.call(this,De)}}function be({missingSchema:De,missingRef:rt}){if(this.refs[De])throw new Error(`AnySchema ${De} is loaded but ${rt} cannot be resolved`)}async function he(De){const rt=await Ce.call(this,De);this.refs[De]||await Q.call(this,rt.$schema),this.refs[De]||this.addSchema(rt,De,W)}async function Ce(De){const rt=this._loading[De];if(rt)return rt;try{return await(this._loading[De]=M(De))}finally{delete this._loading[De]}}}addSchema(j,W,M,V=this.opts.validateSchema){if(Array.isArray(j)){for(const se of j)this.addSchema(se,void 0,M,V);return this}let Q;if(typeof j=="object"){const{schemaId:se}=this.opts;if(Q=j[se],Q!==void 0&&typeof Q!="string")throw new Error(`schema ${se} must be string`)}return W=(0,u.normalizeId)(W||Q),this._checkUnique(W),this.schemas[W]=this._addSchema(j,M,W,V,!0),this}addMetaSchema(j,W,M=this.opts.validateSchema){return this.addSchema(j,W,!0,M),this}validateSchema(j,W){if(typeof j=="boolean")return!0;let M;if(M=j.$schema,M!==void 0&&typeof M!="string")throw new Error("$schema must be a string");if(M=M||this.opts.defaultMeta||this.defaultMeta(),!M)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const V=this.validate(M,j);if(!V&&W){const Q="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Q);else throw new Error(Q)}return V}getSchema(j){let W;for(;typeof(W=S.call(this,j))=="string";)j=W;if(W===void 0){const{schemaId:M}=this.opts,V=new o.SchemaEnv({schema:{},schemaId:M});if(W=o.resolveSchema.call(this,V,j),!W)return;this.refs[j]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(j){if(j instanceof RegExp)return this._removeAllSchemas(this.schemas,j),this._removeAllSchemas(this.refs,j),this;switch(typeof j){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,j);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[j],delete this.refs[j],this}case"object":{const W=j;this._cache.delete(W);let M=j[this.opts.schemaId];return M&&(M=(0,u.normalizeId)(M),delete this.schemas[M],delete this.refs[M]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(j){for(const W of j)this.addKeyword(W);return this}addKeyword(j,W){let M;if(typeof j=="string")M=j,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=M);else if(typeof j=="object"&&W===void 0){if(W=j,M=W.keyword,Array.isArray(M)&&!M.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,M,W),!W)return(0,c.eachItem)(M,Q=>q.call(this,Q)),this;G.call(this,W);const V={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(M,V.type.length===0?Q=>q.call(this,Q,V):Q=>V.type.forEach(se=>q.call(this,Q,V,se))),this}getKeyword(j){const W=this.RULES.all[j];return typeof W=="object"?W.definition:!!W}removeKeyword(j){const{RULES:W}=this;delete W.keywords[j],delete W.all[j];for(const M of W.rules){const V=M.rules.findIndex(Q=>Q.keyword===j);V>=0&&M.rules.splice(V,1)}return this}addFormat(j,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[j]=W,this}errorsText(j=this.errors,{separator:W=", ",dataVar:M="data"}={}){return!j||j.length===0?"No errors":j.map(V=>`${M}${V.instancePath} ${V.message}`).reduce((V,Q)=>V+W+Q)}$dataMetaSchema(j,W){const M=this.RULES.all;j=JSON.parse(JSON.stringify(j));for(const V of W){const Q=V.split("/").slice(1);let se=j;for(const be of Q)se=se[be];for(const be in M){const he=M[be];if(typeof he!="object")continue;const{$data:Ce}=he.definition,De=se[be];Ce&&De&&(se[be]=J(De))}}return j}_removeAllSchemas(j,W){for(const M in j){const V=j[M];(!W||W.test(M))&&(typeof V=="string"?delete j[M]:V&&!V.meta&&(this._cache.delete(V.schema),delete j[M]))}}_addSchema(j,W,M,V=this.opts.validateSchema,Q=this.opts.addUsedSchema){let se;const{schemaId:be}=this.opts;if(typeof j=="object")se=j[be];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof j!="boolean")throw new Error("schema must be object or boolean")}let he=this._cache.get(j);if(he!==void 0)return he;M=(0,u.normalizeId)(se||M);const Ce=u.getSchemaRefs.call(this,j,M);return he=new o.SchemaEnv({schema:j,schemaId:be,meta:W,baseId:M,localRefs:Ce}),this._cache.set(he.schema,he),Q&&!M.startsWith("#")&&(M&&this._checkUnique(M),this.refs[M]=he),V&&this.validateSchema(j,!0),he}_checkUnique(j){if(this.schemas[j]||this.refs[j])throw new Error(`schema with key or id "${j}" already exists`)}_compileSchemaEnv(j){if(j.meta?this._compileMetaSchema(j):o.compileSchema.call(this,j),!j.validate)throw new Error("ajv implementation error");return j.validate}_compileMetaSchema(j){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,j)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function x(F,j,W,M="error"){for(const V in F){const Q=V;Q in j&&this.logger[M](`${W}: option ${V}. ${F[Q]}`)}}function S(F){return F=(0,u.normalizeId)(F),this.schemas[F]||this.refs[F]}function A(){const F=this.opts.schemas;if(F)if(Array.isArray(F))this.addSchema(F);else for(const j in F)this.addSchema(F[j],j)}function C(){for(const F in this.opts.formats){const j=this.opts.formats[F];j&&this.addFormat(F,j)}}function N(F){if(Array.isArray(F)){this.addVocabulary(F);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const j in F){const W=F[j];W.keyword||(W.keyword=j),this.addKeyword(W)}}function k(){const F={...this.opts};for(const j of p)delete F[j];return F}const D={log(){},warn(){},error(){}};function L(F){if(F===!1)return D;if(F===void 0)return console;if(F.log&&F.warn&&F.error)return F;throw new Error("logger must implement log, warn and error methods")}const O=/^[a-z_$][a-z0-9_$:-]*$/i;function B(F,j){const{RULES:W}=this;if((0,c.eachItem)(F,M=>{if(W.keywords[M])throw new Error(`Keyword ${M} is already defined`);if(!O.test(M))throw new Error(`Keyword ${M} has invalid name`)}),!!j&&j.$data&&!("code"in j||"validate"in j))throw new Error('$data keyword must have "code" or "validate" function')}function q(F,j,W){var M;const V=j==null?void 0:j.post;if(W&&V)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Q}=this;let se=V?Q.post:Q.rules.find(({type:he})=>he===W);if(se||(se={type:W,rules:[]},Q.rules.push(se)),Q.keywords[F]=!0,!j)return;const be={keyword:F,definition:{...j,type:(0,l.getJSONTypes)(j.type),schemaType:(0,l.getJSONTypes)(j.schemaType)}};j.before?H.call(this,se,be,j.before):se.rules.push(be),Q.all[F]=be,(M=j.implements)===null||M===void 0||M.forEach(he=>this.addKeyword(he))}function H(F,j,W){const M=F.rules.findIndex(V=>V.keyword===W);M>=0?F.rules.splice(M,0,j):(F.rules.push(j),this.logger.warn(`rule ${W} is not defined`))}function G(F){let{metaSchema:j}=F;j!==void 0&&(F.$data&&this.opts.$data&&(j=J(j)),F.validateSchema=this.compile(j,!0))}const K={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function J(F){return{anyOf:[F,K]}}})(nYe);var afe={},ufe={},lfe={};Object.defineProperty(lfe,"__esModule",{value:!0});const C8n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};lfe.default=C8n;var bx={};Object.defineProperty(bx,"__esModule",{value:!0});bx.callRef=bx.getValidate=void 0;const I8n=PC,sCe=lr,ql=dr,yE=hm,oCe=nc,iD=Ft,k8n={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=oCe.resolveRef.call(u,l,i,n);if(c===void 0)throw new I8n.default(r.opts.uriResolver,i,n);if(c instanceof oCe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return DO(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return DO(e,(0,ql._)`${p}.validate`,l,l.$async)}function d(p){const m=$Ye(e,p);DO(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,ql.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:ql.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function $Ye(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,ql._)`${n.scopeValue("wrapper",{ref:t})}.validate`}bx.getValidate=$Ye;function DO(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?yE.default.this:ql.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,ql._)`await ${(0,sCe.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,ql._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,sCe.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,ql._)`${p}.errors`;i.assign(yE.default.vErrors,(0,ql._)`${yE.default.vErrors} === null ? ${m} : ${yE.default.vErrors}.concat(${m})`),i.assign(yE.default.errors,(0,ql._)`${yE.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=iD.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,ql._)`${p}.evaluated.props`);s.props=iD.mergeEvaluated.props(i,y,s.props,ql.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=iD.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,ql._)`${p}.evaluated.items`);s.items=iD.mergeEvaluated.items(i,y,s.items,ql.Name)}}}bx.callRef=DO;bx.default=k8n;Object.defineProperty(ufe,"__esModule",{value:!0});const R8n=lfe,N8n=bx,P8n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",R8n.default,N8n.default];ufe.default=P8n;var cfe={},ffe={};Object.defineProperty(ffe,"__esModule",{value:!0});const p7=dr,ay=p7.operators,m7={maximum:{okStr:"<=",ok:ay.LTE,fail:ay.GT},minimum:{okStr:">=",ok:ay.GTE,fail:ay.LT},exclusiveMaximum:{okStr:"<",ok:ay.LT,fail:ay.GTE},exclusiveMinimum:{okStr:">",ok:ay.GT,fail:ay.LTE}},D8n={message:({keyword:e,schemaCode:t})=>(0,p7.str)`must be ${m7[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,p7._)`{comparison: ${m7[e].okStr}, limit: ${t}}`},O8n={keyword:Object.keys(m7),type:"number",schemaType:"number",$data:!0,error:D8n,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,p7._)`${n} ${m7[t].fail} ${r} || isNaN(${n})`)}};ffe.default=O8n;var dfe={};Object.defineProperty(dfe,"__esModule",{value:!0});const ik=dr,$8n={message:({schemaCode:e})=>(0,ik.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,ik._)`{multipleOf: ${e}}`},L8n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:$8n,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,ik._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,ik._)`${o} !== parseInt(${o})`;e.fail$data((0,ik._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};dfe.default=L8n;var hfe={},pfe={};Object.defineProperty(pfe,"__esModule",{value:!0});function LYe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}pfe.default=LYe;LYe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(hfe,"__esModule",{value:!0});const Q_=dr,M8n=Ft,F8n=pfe,B8n={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Q_.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Q_._)`{limit: ${e}}`},j8n={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:B8n,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Q_.operators.GT:Q_.operators.LT,o=i.opts.unicode===!1?(0,Q_._)`${n}.length`:(0,Q_._)`${(0,M8n.useFunc)(e.gen,F8n.default)}(${n})`;e.fail$data((0,Q_._)`${o} ${s} ${r}`)}};hfe.default=j8n;var mfe={};Object.defineProperty(mfe,"__esModule",{value:!0});const U8n=lr,g7=dr,z8n={message:({schemaCode:e})=>(0,g7.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,g7._)`{pattern: ${e}}`},V8n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:z8n,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,g7._)`(new RegExp(${i}, ${o}))`:(0,U8n.usePattern)(e,r);e.fail$data((0,g7._)`!${a}.test(${t})`)}};mfe.default=V8n;var gfe={};Object.defineProperty(gfe,"__esModule",{value:!0});const sk=dr,H8n={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,sk.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,sk._)`{limit: ${e}}`},q8n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:H8n,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?sk.operators.GT:sk.operators.LT;e.fail$data((0,sk._)`Object.keys(${n}).length ${i} ${r}`)}};gfe.default=q8n;var yfe={};Object.defineProperty(yfe,"__esModule",{value:!0});const mI=lr,ok=dr,W8n=Ft,G8n={message:({params:{missingProperty:e}})=>(0,ok.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,ok._)`{missingProperty: ${e}}`},Y8n={keyword:"required",type:"object",schemaType:"array",$data:!0,error:G8n,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,W8n.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(ok.nil,f);else for(const h of n)(0,mI.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,mI.checkMissingProp)(e,n,h)),(0,mI.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,mI.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,mI.propertyInData)(t,i,h,a.ownProperties)),t.if((0,ok.not)(p),()=>{e.error(),t.break()})},ok.nil)}}};yfe.default=Y8n;var vfe={};Object.defineProperty(vfe,"__esModule",{value:!0});const ak=dr,K8n={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,ak.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,ak._)`{limit: ${e}}`},X8n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:K8n,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?ak.operators.GT:ak.operators.LT;e.fail$data((0,ak._)`${n}.length ${i} ${r}`)}};vfe.default=X8n;var bfe={},W5={};Object.defineProperty(W5,"__esModule",{value:!0});const MYe=gre;MYe.code='require("ajv/dist/runtime/equal").default';W5.default=MYe;Object.defineProperty(bfe,"__esModule",{value:!0});const bG=Fo,Da=dr,Q8n=Ft,J8n=W5,Z8n={message:({params:{i:e,j:t}})=>(0,Da.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Da._)`{i: ${e}, j: ${t}}`},eDn={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Z8n,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,bG.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Da._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Da._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Da._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,bG.checkDataTypes)(l,g,a.opts.strictNumbers,bG.DataType.Wrong),v=t.const("indices",(0,Da._)`{}`);t.for((0,Da._)`;${p}--;`,()=>{t.let(g,(0,Da._)`${n}[${p}]`),t.if(y,(0,Da._)`continue`),l.length>1&&t.if((0,Da._)`typeof ${g} == "string"`,(0,Da._)`${g} += "_"`),t.if((0,Da._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,Da._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Da._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,Q8n.useFunc)(t,J8n.default),y=t.name("outer");t.label(y).for((0,Da._)`;${p}--;`,()=>t.for((0,Da._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Da._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};bfe.default=eDn;var _fe={};Object.defineProperty(_fe,"__esModule",{value:!0});const gZ=dr,tDn=Ft,nDn=W5,rDn={message:"must be equal to constant",params:({schemaCode:e})=>(0,gZ._)`{allowedValue: ${e}}`},iDn={keyword:"const",$data:!0,error:rDn,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,gZ._)`!${(0,tDn.useFunc)(t,nDn.default)}(${n}, ${i})`):e.fail((0,gZ._)`${s} !== ${n}`)}};_fe.default=iDn;var wfe={};Object.defineProperty(wfe,"__esModule",{value:!0});const l4=dr,sDn=Ft,oDn=W5,aDn={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,l4._)`{allowedValues: ${e}}`},uDn={keyword:"enum",schemaType:"array",$data:!0,error:aDn,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,sDn.useFunc)(t,oDn.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,l4.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,l4._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,l4._)`${l()}(${n}, ${h}[${p}])`:(0,l4._)`${n} === ${m}`}}};wfe.default=uDn;Object.defineProperty(cfe,"__esModule",{value:!0});const lDn=ffe,cDn=dfe,fDn=hfe,dDn=mfe,hDn=gfe,pDn=yfe,mDn=vfe,gDn=bfe,yDn=_fe,vDn=wfe,bDn=[lDn.default,cDn.default,fDn.default,dDn.default,hDn.default,pDn.default,mDn.default,gDn.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},yDn.default,vDn.default];cfe.default=bDn;var xfe={},DC={};Object.defineProperty(DC,"__esModule",{value:!0});DC.validateAdditionalItems=void 0;const J_=dr,yZ=Ft,_Dn={message:({params:{len:e}})=>(0,J_.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,J_._)`{limit: ${e}}`},wDn={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:_Dn,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,yZ.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}FYe(e,r)}};function FYe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,J_._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,J_._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,yZ.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,J_._)`${a} <= ${t.length}`);n.if((0,J_.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:yZ.Type.Num},l),o.allErrors||n.if((0,J_.not)(l),()=>n.break())})}}DC.validateAdditionalItems=FYe;DC.default=wDn;var Efe={},OC={};Object.defineProperty(OC,"__esModule",{value:!0});OC.validateTuple=void 0;const aCe=dr,OO=Ft,xDn=lr,EDn={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return BYe(e,"additionalItems",t);n.items=!0,!(0,OO.alwaysValidSchema)(n,t)&&e.ok((0,xDn.validateArray)(e))}};function BYe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=OO.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,aCe._)`${s}.length`);n.forEach((f,d)=>{(0,OO.alwaysValidSchema)(a,f)||(r.if((0,aCe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,OO.checkStrictMode)(a,g,d.strictTuples)}}}OC.validateTuple=BYe;OC.default=EDn;Object.defineProperty(Efe,"__esModule",{value:!0});const TDn=OC,SDn={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,TDn.validateTuple)(e,"items")};Efe.default=SDn;var Tfe={};Object.defineProperty(Tfe,"__esModule",{value:!0});const uCe=dr,ADn=Ft,CDn=lr,IDn=DC,kDn={message:({params:{len:e}})=>(0,uCe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,uCe._)`{limit: ${e}}`},RDn={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:kDn,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,ADn.alwaysValidSchema)(r,t)&&(i?(0,IDn.validateAdditionalItems)(e,i):e.ok((0,CDn.validateArray)(e)))}};Tfe.default=RDn;var Sfe={};Object.defineProperty(Sfe,"__esModule",{value:!0});const ed=dr,sD=Ft,NDn={message:({params:{min:e,max:t}})=>t===void 0?(0,ed.str)`must contain at least ${e} valid item(s)`:(0,ed.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,ed._)`{minContains: ${e}}`:(0,ed._)`{minContains: ${e}, maxContains: ${t}}`},PDn={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:NDn,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,ed._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,sD.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,sD.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,sD.alwaysValidSchema)(s,n)){let m=(0,ed._)`${c} >= ${o}`;a!==void 0&&(m=(0,ed._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,ed._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:sD.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,ed._)`${m}++`),a===void 0?t.if((0,ed._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,ed._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,ed._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};Sfe.default=PDn;var jYe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=dr,n=Ft,r=lr;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(jYe);var Afe={};Object.defineProperty(Afe,"__esModule",{value:!0});const UYe=dr,DDn=Ft,ODn={message:"property name must be valid",params:({params:e})=>(0,UYe._)`{propertyName: ${e.propertyName}}`},$Dn={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:ODn,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,DDn.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,UYe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Afe.default=$Dn;var Kj={};Object.defineProperty(Kj,"__esModule",{value:!0});const oD=lr,ah=dr,LDn=hm,aD=Ft,MDn={message:"must NOT have additional properties",params:({params:e})=>(0,ah._)`{additionalProperty: ${e.additionalProperty}}`},FDn={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:MDn,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,aD.alwaysValidSchema)(o,n))return;const l=(0,oD.allSchemaProperties)(r.properties),c=(0,oD.allSchemaProperties)(r.patternProperties);f(),e.ok((0,ah._)`${s} === ${LDn.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,aD.schemaRefOrVal)(o,r.properties,"properties");y=(0,oD.isOwnProperty)(t,v,g)}else l.length?y=(0,ah.or)(...l.map(v=>(0,ah._)`${g} === ${v}`)):y=ah.nil;return c.length&&(y=(0,ah.or)(y,...c.map(v=>(0,ah._)`${(0,oD.usePattern)(e,v)}.test(${g})`))),(0,ah.not)(y)}function h(g){t.code((0,ah._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,aD.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,ah.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,ah.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:aD.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};Kj.default=FDn;var Cfe={};Object.defineProperty(Cfe,"__esModule",{value:!0});const BDn=Uh,lCe=lr,_G=Ft,cCe=Kj,jDn={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&cCe.default.code(new BDn.KeywordCxt(s,cCe.default,"additionalProperties"));const o=(0,lCe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=_G.mergeEvaluated.props(t,(0,_G.toHash)(o),s.props));const a=o.filter(f=>!(0,_G.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,lCe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};Cfe.default=jDn;var Ife={};Object.defineProperty(Ife,"__esModule",{value:!0});const fCe=lr,uD=dr,dCe=Ft,hCe=Ft,UDn={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,fCe.allSchemaProperties)(n),u=a.filter(m=>(0,dCe.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof uD.Name)&&(s.props=(0,hCe.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,dCe.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,uD._)`${(0,fCe.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:hCe.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,uD._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,uD.not)(c),()=>t.break())})})}}};Ife.default=UDn;var kfe={};Object.defineProperty(kfe,"__esModule",{value:!0});const zDn=Ft,VDn={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,zDn.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};kfe.default=VDn;var Rfe={};Object.defineProperty(Rfe,"__esModule",{value:!0});const HDn=lr,qDn={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:HDn.validateUnion,error:{message:"must match a schema in anyOf"}};Rfe.default=qDn;var Nfe={};Object.defineProperty(Nfe,"__esModule",{value:!0});const $O=dr,WDn=Ft,GDn={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,$O._)`{passingSchemas: ${e.passing}}`},YDn={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:GDn,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,WDn.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,$O._)`${u} && ${o}`).assign(o,!1).assign(a,(0,$O._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,$O.Name)})})}}};Nfe.default=YDn;var Pfe={};Object.defineProperty(Pfe,"__esModule",{value:!0});const KDn=Ft,XDn={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,KDn.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};Pfe.default=XDn;var Dfe={};Object.defineProperty(Dfe,"__esModule",{value:!0});const y7=dr,zYe=Ft,QDn={message:({params:e})=>(0,y7.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,y7._)`{failingKeyword: ${e.ifClause}}`},JDn={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:QDn,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,zYe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=pCe(r,"then"),s=pCe(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,y7.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,y7._)`${c}`):e.setParams({ifClause:c})}}}};function pCe(e,t){const n=e.schema[t];return n!==void 0&&!(0,zYe.alwaysValidSchema)(e,n)}Dfe.default=JDn;var Ofe={};Object.defineProperty(Ofe,"__esModule",{value:!0});const ZDn=Ft,eOn={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,ZDn.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Ofe.default=eOn;Object.defineProperty(xfe,"__esModule",{value:!0});const tOn=DC,nOn=Efe,rOn=OC,iOn=Tfe,sOn=Sfe,oOn=jYe,aOn=Afe,uOn=Kj,lOn=Cfe,cOn=Ife,fOn=kfe,dOn=Rfe,hOn=Nfe,pOn=Pfe,mOn=Dfe,gOn=Ofe;function yOn(e=!1){const t=[fOn.default,dOn.default,hOn.default,pOn.default,mOn.default,gOn.default,aOn.default,uOn.default,oOn.default,lOn.default,cOn.default];return e?t.push(nOn.default,iOn.default):t.push(tOn.default,rOn.default),t.push(sOn.default),t}xfe.default=yOn;var $fe={},Lfe={};Object.defineProperty(Lfe,"__esModule",{value:!0});const io=dr,vOn={message:({schemaCode:e})=>(0,io.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,io._)`{format: ${e}}`},bOn={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:vOn,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,io._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,io._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,io._)`${m}.type || "string"`).assign(y,(0,io._)`${m}.validate`),()=>n.assign(g,(0,io._)`"string"`).assign(y,m)),e.fail$data((0,io.or)(v(),b()));function v(){return u.strictSchema===!1?io.nil:(0,io._)`${o} && !${y}`}function b(){const w=c.$async?(0,io._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,io._)`${y}(${r})`,x=(0,io._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,io._)`${y} && ${y} !== true && ${g} === ${t} && !${x}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(x());return}throw new Error(x());function x(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(x){const S=x instanceof RegExp?(0,io.regexpCode)(x):u.code.formats?(0,io._)`${u.code.formats}${(0,io.getProperty)(s)}`:void 0,A=n.scopeValue("formats",{key:s,ref:x,code:S});return typeof x=="object"&&!(x instanceof RegExp)?[x.type||"string",x.validate,(0,io._)`${A}.validate`]:["string",x,A]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,io._)`await ${y}(${r})`}return typeof g=="function"?(0,io._)`${y}(${r})`:(0,io._)`${y}.test(${r})`}}}};Lfe.default=bOn;Object.defineProperty($fe,"__esModule",{value:!0});const _On=Lfe,wOn=[_On.default];$fe.default=wOn;var aA={};Object.defineProperty(aA,"__esModule",{value:!0});aA.contentVocabulary=aA.metadataVocabulary=void 0;aA.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];aA.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(afe,"__esModule",{value:!0});const xOn=ufe,EOn=cfe,TOn=xfe,SOn=$fe,mCe=aA,AOn=[xOn.default,EOn.default,(0,TOn.default)(),SOn.default,mCe.metadataVocabulary,mCe.contentVocabulary];afe.default=AOn;var Mfe={},Xj={};Object.defineProperty(Xj,"__esModule",{value:!0});Xj.DiscrError=void 0;var gCe;(function(e){e.Tag="tag",e.Mapping="mapping"})(gCe||(Xj.DiscrError=gCe={}));Object.defineProperty(Mfe,"__esModule",{value:!0});const kE=dr,vZ=Xj,yCe=nc,COn=PC,IOn=Ft,kOn={message:({params:{discrError:e,tagName:t}})=>e===vZ.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,kE._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},ROn={keyword:"discriminator",type:"object",schemaType:"object",error:kOn,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,kE._)`${n}${(0,kE.getProperty)(a)}`);t.if((0,kE._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:vZ.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,kE._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:vZ.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,kE.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let x=o[w];if(x!=null&&x.$ref&&!(0,IOn.schemaHasRulesButRef)(x,s.self.RULES)){const A=x.$ref;if(x=yCe.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,A),x instanceof yCe.SchemaEnv&&(x=x.schema),x===void 0)throw new COn.default(s.opts.uriResolver,s.baseId,A)}const S=(h=x==null?void 0:x.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(x)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,x){if(w.const)b(w.const,x);else if(w.enum)for(const S of w.enum)b(S,x);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,x){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=x}}}};Mfe.default=ROn;const NOn="http://json-schema.org/draft-07/schema#",POn="http://json-schema.org/draft-07/schema#",DOn="Core schema meta-schema",OOn={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},$On=["object","boolean"],LOn={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},MOn={$schema:NOn,$id:POn,title:DOn,definitions:OOn,type:$On,properties:LOn,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=nYe,r=afe,i=Mfe,s=MOn,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Uh;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=dr;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=q5;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=PC;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(cZ,cZ.exports);var FOn=cZ.exports;const Ffe=Rf(FOn),BOn="#/definitions/StudyConfig",jOn="http://json-schema.org/draft-07/schema#",UOn={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},importedLibraries:{description:"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.",items:{type:"string"},type:"array"},recordStudyAudio:{description:"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.",type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},timeoutReject:{description:"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.",type:"boolean"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},zOn={$ref:BOn,$schema:jOn,definitions:UOn},VOn="#/definitions/GlobalConfig",HOn="http://json-schema.org/draft-07/schema#",qOn={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},WOn={$ref:VOn,$schema:HOn,definitions:qOn};var v7={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */v7.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,y=2,v=4,b=8,w=16,x=32,S=64,A=128,C=256,N=512,k=30,D="...",L=800,O=16,B=1,q=2,H=3,G=1/0,K=9007199254740991,J=17976931348623157e292,F=NaN,j=4294967295,W=j-1,M=j>>>1,V=[["ary",A],["bind",g],["bindKey",y],["curry",b],["curryRight",w],["flip",N],["partial",x],["partialRight",S],["rearg",C]],Q="[object Arguments]",se="[object Array]",be="[object AsyncFunction]",he="[object Boolean]",Ce="[object Date]",De="[object DOMException]",rt="[object Error]",Re="[object Function]",Tt="[object GeneratorFunction]",Ze="[object Map]",It="[object Number]",mt="[object Null]",Se="[object Object]",Fe="[object Promise]",st="[object Proxy]",yt="[object RegExp]",Nt="[object Set]",Je="[object String]",xe="[object Symbol]",kt="[object Undefined]",Rt="[object WeakMap]",Ee="[object WeakSet]",Oe="[object ArrayBuffer]",ot="[object DataView]",_t="[object Float32Array]",jt="[object Float64Array]",Un="[object Int8Array]",hr="[object Int16Array]",Sr="[object Int32Array]",_i="[object Uint8Array]",Sn="[object Uint8ClampedArray]",zn="[object Uint16Array]",pr="[object Uint32Array]",yr=/\b__p \+= '';/g,ea=/\b(__p \+=) '' \+/g,rs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ms=/&(?:amp|lt|gt|quot|#39);/g,Ls=/[&<>"']/g,Hr=RegExp(ms.source),gs=RegExp(Ls.source),Mc=/<%-([\s\S]+?)%>/g,ta=/<%([\s\S]+?)%>/g,Vu=/<%=([\s\S]+?)%>/g,Br=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ki=/^\w*$/,mi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eo=/[\\^$.*+?()[\]{}|]/g,oi=RegExp(eo.source),Ri=/^\s+/,me=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ge=/\{\n\/\* \[wrapped with (.+)\] \*/,Me=/,? & /,Le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wt=/[()=,{}\[\]\/\s]/,Ut=/\\(\\)?/g,dn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zn=/\w*$/,ur=/^[-+]0x[0-9a-f]+$/i,On=/^0b[01]+$/i,Ar=/^\[object .+?Constructor\]$/,ai=/^0o[0-7]+$/i,an=/^(?:0|[1-9]\d*)$/,Cr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jr=/($^)/,vr=/['\n\r\u2028\u2029\\]/g,Ni="\\ud800-\\udfff",bo="\\u0300-\\u036f",Pi="\\ufe20-\\ufe2f",ko="\\u20d0-\\u20ff",is=bo+Pi+ko,ss="\\u2700-\\u27bf",Ro="a-z\\xdf-\\xf6\\xf8-\\xff",Ca="\\xac\\xb1\\xd7\\xf7",_o="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ol="\\u2000-\\u206f",Of=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ee="A-Z\\xc0-\\xd6\\xd8-\\xde",pe="\\ufe0e\\ufe0f",oe=Ca+_o+Ol+Of,we="[']",Ae="["+Ni+"]",_e="["+oe+"]",qe="["+is+"]",it="\\d+",at="["+ss+"]",ut="["+Ro+"]",vt="[^"+Ni+oe+it+ss+Ro+ee+"]",Lt="\\ud83c[\\udffb-\\udfff]",$n="(?:"+qe+"|"+Lt+")",Kt="[^"+Ni+"]",er="(?:\\ud83c[\\udde6-\\uddff]){2}",qr="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+ee+"]",No="\\u200d",Fc="(?:"+ut+"|"+vt+")",Ud="(?:"+br+"|"+vt+")",$1="(?:"+we+"(?:d|ll|m|re|s|t|ve))?",bp="(?:"+we+"(?:D|LL|M|RE|S|T|VE))?",Wb=$n+"?",Hu="["+pe+"]?",nu="(?:"+No+"(?:"+[Kt,er,qr].join("|")+")"+Hu+Wb+")*",zd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",L1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Gb=Hu+Wb+nu,Vd="(?:"+[at,er,qr].join("|")+")"+Gb,Yb="(?:"+[Kt+qe+"?",qe,er,qr,Ae].join("|")+")",_2=RegExp(we,"g"),Hd=RegExp(qe,"g"),na=RegExp(Lt+"(?="+Lt+")|"+Yb+Gb,"g"),zC=RegExp([br+"?"+ut+"+"+$1+"(?="+[_e,br,"$"].join("|")+")",Ud+"+"+bp+"(?="+[_e,br+Fc,"$"].join("|")+")",br+"?"+Fc+"+"+$1,br+"+"+bp,L1,zd,it,Vd].join("|"),"g"),w2=RegExp("["+No+Ni+is+pe+"]"),mm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],x2=-1,Wr={};Wr[_t]=Wr[jt]=Wr[Un]=Wr[hr]=Wr[Sr]=Wr[_i]=Wr[Sn]=Wr[zn]=Wr[pr]=!0,Wr[Q]=Wr[se]=Wr[Oe]=Wr[he]=Wr[ot]=Wr[Ce]=Wr[rt]=Wr[Re]=Wr[Ze]=Wr[It]=Wr[Se]=Wr[yt]=Wr[Nt]=Wr[Je]=Wr[Rt]=!1;var Ir={};Ir[Q]=Ir[se]=Ir[Oe]=Ir[ot]=Ir[he]=Ir[Ce]=Ir[_t]=Ir[jt]=Ir[Un]=Ir[hr]=Ir[Sr]=Ir[Ze]=Ir[It]=Ir[Se]=Ir[yt]=Ir[Nt]=Ir[Je]=Ir[xe]=Ir[_i]=Ir[Sn]=Ir[zn]=Ir[pr]=!0,Ir[rt]=Ir[Re]=Ir[Rt]=!1;var E2={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ye={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=parseFloat,ir=parseInt,Gr=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,wi=typeof self=="object"&&self&&self.Object===Object&&self,un=Gr||wi||Function("return this")(),ui=t&&!t.nodeType&&t,xi=ui&&!0&&e&&!e.nodeType&&e,Po=xi&&xi.exports===ui,qd=Po&&Gr.process,Ms=function(){try{var Te=xi&&xi.require&&xi.require("util").types;return Te||qd&&qd.binding&&qd.binding("util")}catch{}}(),ym=Ms&&Ms.isArrayBuffer,vm=Ms&&Ms.isDate,Kb=Ms&&Ms.isMap,VC=Ms&&Ms.isRegExp,Xb=Ms&&Ms.isSet,cN=Ms&&Ms.isTypedArray;function ru(Te,Ye,je){switch(je.length){case 0:return Te.call(Ye);case 1:return Te.call(Ye,je[0]);case 2:return Te.call(Ye,je[0],je[1]);case 3:return Te.call(Ye,je[0],je[1],je[2])}return Te.apply(Ye,je)}function Qb(Te,Ye,je,zt){for(var Fn=-1,ci=Te==null?0:Te.length;++Fn<ci;){var Oo=Te[Fn];Ye(zt,Oo,je(Oo),Te)}return zt}function qu(Te,Ye){for(var je=-1,zt=Te==null?0:Te.length;++je<zt&&Ye(Te[je],je,Te)!==!1;);return Te}function fN(Te,Ye){for(var je=Te==null?0:Te.length;je--&&Ye(Te[je],je,Te)!==!1;);return Te}function T2(Te,Ye){for(var je=-1,zt=Te==null?0:Te.length;++je<zt;)if(!Ye(Te[je],je,Te))return!1;return!0}function $f(Te,Ye){for(var je=-1,zt=Te==null?0:Te.length,Fn=0,ci=[];++je<zt;){var Oo=Te[je];Ye(Oo,je,Te)&&(ci[Fn++]=Oo)}return ci}function Jb(Te,Ye){var je=Te==null?0:Te.length;return!!je&&bm(Te,Ye,0)>-1}function M1(Te,Ye,je){for(var zt=-1,Fn=Te==null?0:Te.length;++zt<Fn;)if(je(Ye,Te[zt]))return!0;return!1}function Vi(Te,Ye){for(var je=-1,zt=Te==null?0:Te.length,Fn=Array(zt);++je<zt;)Fn[je]=Ye(Te[je],je,Te);return Fn}function Wd(Te,Ye){for(var je=-1,zt=Ye.length,Fn=Te.length;++je<zt;)Te[Fn+je]=Ye[je];return Te}function Gd(Te,Ye,je,zt){var Fn=-1,ci=Te==null?0:Te.length;for(zt&&ci&&(je=Te[++Fn]);++Fn<ci;)je=Ye(je,Te[Fn],Fn,Te);return je}function dN(Te,Ye,je,zt){var Fn=Te==null?0:Te.length;for(zt&&Fn&&(je=Te[--Fn]);Fn--;)je=Ye(je,Te[Fn],Fn,Te);return je}function S2(Te,Ye){for(var je=-1,zt=Te==null?0:Te.length;++je<zt;)if(Ye(Te[je],je,Te))return!0;return!1}var hN=Y("length");function pN(Te){return Te.split("")}function A2(Te){return Te.match(Le)||[]}function iu(Te,Ye,je){var zt;return je(Te,function(Fn,ci,Oo){if(Ye(Fn,ci,Oo))return zt=ci,!1}),zt}function Zb(Te,Ye,je,zt){for(var Fn=Te.length,ci=je+(zt?1:-1);zt?ci--:++ci<Fn;)if(Ye(Te[ci],ci,Te))return ci;return-1}function bm(Te,Ye,je){return Ye===Ye?XQe(Te,Ye,je):Zb(Te,I,je)}function F1(Te,Ye,je,zt){for(var Fn=je-1,ci=Te.length;++Fn<ci;)if(zt(Te[Fn],Ye))return Fn;return-1}function I(Te){return Te!==Te}function U(Te,Ye){var je=Te==null?0:Te.length;return je?Ct(Te,Ye)/je:F}function Y(Te){return function(Ye){return Ye==null?n:Ye[Te]}}function ne(Te){return function(Ye){return Te==null?n:Te[Ye]}}function Ne(Te,Ye,je,zt,Fn){return Fn(Te,function(ci,Oo,Hi){je=zt?(zt=!1,ci):Ye(je,ci,Oo,Hi)}),je}function Ve(Te,Ye){var je=Te.length;for(Te.sort(Ye);je--;)Te[je]=Te[je].value;return Te}function Ct(Te,Ye){for(var je,zt=-1,Fn=Te.length;++zt<Fn;){var ci=Ye(Te[zt]);ci!==n&&(je=je===n?ci:je+ci)}return je}function li(Te,Ye){for(var je=-1,zt=Array(Te);++je<Te;)zt[je]=Ye(je);return zt}function Do(Te,Ye){return Vi(Ye,function(je){return[je,Te[je]]})}function kr(Te){return Te&&Te.slice(0,Gde(Te)+1).replace(Ri,"")}function gi(Te){return function(Ye){return Te(Ye)}}function wo(Te,Ye){return Vi(Ye,function(je){return Te[je]})}function Lf(Te,Ye){return Te.has(Ye)}function $l(Te,Ye){for(var je=-1,zt=Te.length;++je<zt&&bm(Ye,Te[je],0)>-1;);return je}function e_(Te,Ye){for(var je=Te.length;je--&&bm(Ye,Te[je],0)>-1;);return je}function HC(Te,Ye){for(var je=Te.length,zt=0;je--;)Te[je]===Ye&&++zt;return zt}var VQe=ne(E2),HQe=ne(le);function qQe(Te){return"\\"+Be[Te]}function WQe(Te,Ye){return Te==null?n:Te[Ye]}function C2(Te){return w2.test(Te)}function GQe(Te){return mm.test(Te)}function YQe(Te){for(var Ye,je=[];!(Ye=Te.next()).done;)je.push(Ye.value);return je}function _U(Te){var Ye=-1,je=Array(Te.size);return Te.forEach(function(zt,Fn){je[++Ye]=[Fn,zt]}),je}function Wde(Te,Ye){return function(je){return Te(Ye(je))}}function B1(Te,Ye){for(var je=-1,zt=Te.length,Fn=0,ci=[];++je<zt;){var Oo=Te[je];(Oo===Ye||Oo===c)&&(Te[je]=c,ci[Fn++]=je)}return ci}function mN(Te){var Ye=-1,je=Array(Te.size);return Te.forEach(function(zt){je[++Ye]=zt}),je}function KQe(Te){var Ye=-1,je=Array(Te.size);return Te.forEach(function(zt){je[++Ye]=[zt,zt]}),je}function XQe(Te,Ye,je){for(var zt=je-1,Fn=Te.length;++zt<Fn;)if(Te[zt]===Ye)return zt;return-1}function QQe(Te,Ye,je){for(var zt=je+1;zt--;)if(Te[zt]===Ye)return zt;return zt}function I2(Te){return C2(Te)?ZQe(Te):hN(Te)}function Yd(Te){return C2(Te)?eJe(Te):pN(Te)}function Gde(Te){for(var Ye=Te.length;Ye--&&me.test(Te.charAt(Ye)););return Ye}var JQe=ne(ye);function ZQe(Te){for(var Ye=na.lastIndex=0;na.test(Te);)++Ye;return Ye}function eJe(Te){return Te.match(na)||[]}function tJe(Te){return Te.match(zC)||[]}var nJe=function Te(Ye){Ye=Ye==null?un:k2.defaults(un.Object(),Ye,k2.pick(un,gm));var je=Ye.Array,zt=Ye.Date,Fn=Ye.Error,ci=Ye.Function,Oo=Ye.Math,Hi=Ye.Object,wU=Ye.RegExp,rJe=Ye.String,Mf=Ye.TypeError,gN=je.prototype,iJe=ci.prototype,R2=Hi.prototype,yN=Ye["__core-js_shared__"],vN=iJe.toString,Ei=R2.hasOwnProperty,sJe=0,Yde=function(){var _=/[^.]+$/.exec(yN&&yN.keys&&yN.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),bN=R2.toString,oJe=vN.call(Hi),aJe=un._,uJe=wU("^"+vN.call(Ei).replace(eo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_N=Po?Ye.Buffer:n,j1=Ye.Symbol,wN=Ye.Uint8Array,Kde=_N?_N.allocUnsafe:n,xN=Wde(Hi.getPrototypeOf,Hi),Xde=Hi.create,Qde=R2.propertyIsEnumerable,EN=gN.splice,Jde=j1?j1.isConcatSpreadable:n,qC=j1?j1.iterator:n,t_=j1?j1.toStringTag:n,TN=function(){try{var _=o_(Hi,"defineProperty");return _({},"",{}),_}catch{}}(),lJe=Ye.clearTimeout!==un.clearTimeout&&Ye.clearTimeout,cJe=zt&&zt.now!==un.Date.now&&zt.now,fJe=Ye.setTimeout!==un.setTimeout&&Ye.setTimeout,SN=Oo.ceil,AN=Oo.floor,xU=Hi.getOwnPropertySymbols,dJe=_N?_N.isBuffer:n,Zde=Ye.isFinite,hJe=gN.join,pJe=Wde(Hi.keys,Hi),$o=Oo.max,su=Oo.min,mJe=zt.now,gJe=Ye.parseInt,ehe=Oo.random,yJe=gN.reverse,EU=o_(Ye,"DataView"),WC=o_(Ye,"Map"),TU=o_(Ye,"Promise"),N2=o_(Ye,"Set"),GC=o_(Ye,"WeakMap"),YC=o_(Hi,"create"),CN=GC&&new GC,P2={},vJe=a_(EU),bJe=a_(WC),_Je=a_(TU),wJe=a_(N2),xJe=a_(GC),IN=j1?j1.prototype:n,KC=IN?IN.valueOf:n,the=IN?IN.toString:n;function Z(_){if(Fs(_)&&!Vn(_)&&!(_ instanceof _r)){if(_ instanceof Ff)return _;if(Ei.call(_,"__wrapped__"))return npe(_)}return new Ff(_)}var D2=function(){function _(){}return function(T){if(!Rs(T))return{};if(Xde)return Xde(T);_.prototype=T;var P=new _;return _.prototype=n,P}}();function kN(){}function Ff(_,T){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=n}Z.templateSettings={escape:Mc,evaluate:ta,interpolate:Vu,variable:"",imports:{_:Z}},Z.prototype=kN.prototype,Z.prototype.constructor=Z,Ff.prototype=D2(kN.prototype),Ff.prototype.constructor=Ff;function _r(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function EJe(){var _=new _r(this.__wrapped__);return _.__actions__=Ll(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=Ll(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=Ll(this.__views__),_}function TJe(){if(this.__filtered__){var _=new _r(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function SJe(){var _=this.__wrapped__.value(),T=this.__dir__,P=Vn(_),z=T<0,X=P?_.length:0,re=MZe(0,X,this.__views__),ce=re.start,ve=re.end,Ie=ve-ce,et=z?ve:ce-1,tt=this.__iteratees__,lt=tt.length,$t=0,Qt=su(Ie,this.__takeCount__);if(!P||!z&&X==Ie&&Qt==Ie)return She(_,this.__actions__);var mn=[];e:for(;Ie--&&$t<Qt;){et+=T;for(var tr=-1,gn=_[et];++tr<lt;){var mr=tt[tr],Rr=mr.iteratee,Uc=mr.type,Yu=Rr(gn);if(Uc==q)gn=Yu;else if(!Yu){if(Uc==B)continue e;break e}}mn[$t++]=gn}return mn}_r.prototype=D2(kN.prototype),_r.prototype.constructor=_r;function n_(_){var T=-1,P=_==null?0:_.length;for(this.clear();++T<P;){var z=_[T];this.set(z[0],z[1])}}function AJe(){this.__data__=YC?YC(null):{},this.size=0}function CJe(_){var T=this.has(_)&&delete this.__data__[_];return this.size-=T?1:0,T}function IJe(_){var T=this.__data__;if(YC){var P=T[_];return P===u?n:P}return Ei.call(T,_)?T[_]:n}function kJe(_){var T=this.__data__;return YC?T[_]!==n:Ei.call(T,_)}function RJe(_,T){var P=this.__data__;return this.size+=this.has(_)?0:1,P[_]=YC&&T===n?u:T,this}n_.prototype.clear=AJe,n_.prototype.delete=CJe,n_.prototype.get=IJe,n_.prototype.has=kJe,n_.prototype.set=RJe;function _m(_){var T=-1,P=_==null?0:_.length;for(this.clear();++T<P;){var z=_[T];this.set(z[0],z[1])}}function NJe(){this.__data__=[],this.size=0}function PJe(_){var T=this.__data__,P=RN(T,_);if(P<0)return!1;var z=T.length-1;return P==z?T.pop():EN.call(T,P,1),--this.size,!0}function DJe(_){var T=this.__data__,P=RN(T,_);return P<0?n:T[P][1]}function OJe(_){return RN(this.__data__,_)>-1}function $Je(_,T){var P=this.__data__,z=RN(P,_);return z<0?(++this.size,P.push([_,T])):P[z][1]=T,this}_m.prototype.clear=NJe,_m.prototype.delete=PJe,_m.prototype.get=DJe,_m.prototype.has=OJe,_m.prototype.set=$Je;function wm(_){var T=-1,P=_==null?0:_.length;for(this.clear();++T<P;){var z=_[T];this.set(z[0],z[1])}}function LJe(){this.size=0,this.__data__={hash:new n_,map:new(WC||_m),string:new n_}}function MJe(_){var T=zN(this,_).delete(_);return this.size-=T?1:0,T}function FJe(_){return zN(this,_).get(_)}function BJe(_){return zN(this,_).has(_)}function jJe(_,T){var P=zN(this,_),z=P.size;return P.set(_,T),this.size+=P.size==z?0:1,this}wm.prototype.clear=LJe,wm.prototype.delete=MJe,wm.prototype.get=FJe,wm.prototype.has=BJe,wm.prototype.set=jJe;function r_(_){var T=-1,P=_==null?0:_.length;for(this.__data__=new wm;++T<P;)this.add(_[T])}function UJe(_){return this.__data__.set(_,u),this}function zJe(_){return this.__data__.has(_)}r_.prototype.add=r_.prototype.push=UJe,r_.prototype.has=zJe;function Kd(_){var T=this.__data__=new _m(_);this.size=T.size}function VJe(){this.__data__=new _m,this.size=0}function HJe(_){var T=this.__data__,P=T.delete(_);return this.size=T.size,P}function qJe(_){return this.__data__.get(_)}function WJe(_){return this.__data__.has(_)}function GJe(_,T){var P=this.__data__;if(P instanceof _m){var z=P.__data__;if(!WC||z.length<i-1)return z.push([_,T]),this.size=++P.size,this;P=this.__data__=new wm(z)}return P.set(_,T),this.size=P.size,this}Kd.prototype.clear=VJe,Kd.prototype.delete=HJe,Kd.prototype.get=qJe,Kd.prototype.has=WJe,Kd.prototype.set=GJe;function nhe(_,T){var P=Vn(_),z=!P&&u_(_),X=!P&&!z&&q1(_),re=!P&&!z&&!X&&M2(_),ce=P||z||X||re,ve=ce?li(_.length,rJe):[],Ie=ve.length;for(var et in _)(T||Ei.call(_,et))&&!(ce&&(et=="length"||X&&(et=="offset"||et=="parent")||re&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||Sm(et,Ie)))&&ve.push(et);return ve}function rhe(_){var T=_.length;return T?_[$U(0,T-1)]:n}function YJe(_,T){return VN(Ll(_),i_(T,0,_.length))}function KJe(_){return VN(Ll(_))}function SU(_,T,P){(P!==n&&!Xd(_[T],P)||P===n&&!(T in _))&&xm(_,T,P)}function XC(_,T,P){var z=_[T];(!(Ei.call(_,T)&&Xd(z,P))||P===n&&!(T in _))&&xm(_,T,P)}function RN(_,T){for(var P=_.length;P--;)if(Xd(_[P][0],T))return P;return-1}function XJe(_,T,P,z){return U1(_,function(X,re,ce){T(z,X,P(X),ce)}),z}function ihe(_,T){return _&&wp(T,ra(T),_)}function QJe(_,T){return _&&wp(T,Fl(T),_)}function xm(_,T,P){T=="__proto__"&&TN?TN(_,T,{configurable:!0,enumerable:!0,value:P,writable:!0}):_[T]=P}function AU(_,T){for(var P=-1,z=T.length,X=je(z),re=_==null;++P<z;)X[P]=re?n:oz(_,T[P]);return X}function i_(_,T,P){return _===_&&(P!==n&&(_=_<=P?_:P),T!==n&&(_=_>=T?_:T)),_}function Bf(_,T,P,z,X,re){var ce,ve=T&f,Ie=T&d,et=T&h;if(P&&(ce=X?P(_,z,X,re):P(_)),ce!==n)return ce;if(!Rs(_))return _;var tt=Vn(_);if(tt){if(ce=BZe(_),!ve)return Ll(_,ce)}else{var lt=ou(_),$t=lt==Re||lt==Tt;if(q1(_))return Ihe(_,ve);if(lt==Se||lt==Q||$t&&!X){if(ce=Ie||$t?{}:Ghe(_),!ve)return Ie?IZe(_,QJe(ce,_)):CZe(_,ihe(ce,_))}else{if(!Ir[lt])return X?_:{};ce=jZe(_,lt,ve)}}re||(re=new Kd);var Qt=re.get(_);if(Qt)return Qt;re.set(_,ce),xpe(_)?_.forEach(function(gn){ce.add(Bf(gn,T,P,gn,_,re))}):_pe(_)&&_.forEach(function(gn,mr){ce.set(mr,Bf(gn,T,P,mr,_,re))});var mn=et?Ie?WU:qU:Ie?Fl:ra,tr=tt?n:mn(_);return qu(tr||_,function(gn,mr){tr&&(mr=gn,gn=_[mr]),XC(ce,mr,Bf(gn,T,P,mr,_,re))}),ce}function JJe(_){var T=ra(_);return function(P){return she(P,_,T)}}function she(_,T,P){var z=P.length;if(_==null)return!z;for(_=Hi(_);z--;){var X=P[z],re=T[X],ce=_[X];if(ce===n&&!(X in _)||!re(ce))return!1}return!0}function ohe(_,T,P){if(typeof _!="function")throw new Mf(o);return r3(function(){_.apply(n,P)},T)}function QC(_,T,P,z){var X=-1,re=Jb,ce=!0,ve=_.length,Ie=[],et=T.length;if(!ve)return Ie;P&&(T=Vi(T,gi(P))),z?(re=M1,ce=!1):T.length>=i&&(re=Lf,ce=!1,T=new r_(T));e:for(;++X<ve;){var tt=_[X],lt=P==null?tt:P(tt);if(tt=z||tt!==0?tt:0,ce&&lt===lt){for(var $t=et;$t--;)if(T[$t]===lt)continue e;Ie.push(tt)}else re(T,lt,z)||Ie.push(tt)}return Ie}var U1=Dhe(_p),ahe=Dhe(IU,!0);function ZJe(_,T){var P=!0;return U1(_,function(z,X,re){return P=!!T(z,X,re),P}),P}function NN(_,T,P){for(var z=-1,X=_.length;++z<X;){var re=_[z],ce=T(re);if(ce!=null&&(ve===n?ce===ce&&!jc(ce):P(ce,ve)))var ve=ce,Ie=re}return Ie}function eZe(_,T,P,z){var X=_.length;for(P=Kn(P),P<0&&(P=-P>X?0:X+P),z=z===n||z>X?X:Kn(z),z<0&&(z+=X),z=P>z?0:Tpe(z);P<z;)_[P++]=T;return _}function uhe(_,T){var P=[];return U1(_,function(z,X,re){T(z,X,re)&&P.push(z)}),P}function Ia(_,T,P,z,X){var re=-1,ce=_.length;for(P||(P=zZe),X||(X=[]);++re<ce;){var ve=_[re];T>0&&P(ve)?T>1?Ia(ve,T-1,P,z,X):Wd(X,ve):z||(X[X.length]=ve)}return X}var CU=Ohe(),lhe=Ohe(!0);function _p(_,T){return _&&CU(_,T,ra)}function IU(_,T){return _&&lhe(_,T,ra)}function PN(_,T){return $f(T,function(P){return Am(_[P])})}function s_(_,T){T=V1(T,_);for(var P=0,z=T.length;_!=null&&P<z;)_=_[xp(T[P++])];return P&&P==z?_:n}function che(_,T,P){var z=T(_);return Vn(_)?z:Wd(z,P(_))}function Wu(_){return _==null?_===n?kt:mt:t_&&t_ in Hi(_)?LZe(_):KZe(_)}function kU(_,T){return _>T}function tZe(_,T){return _!=null&&Ei.call(_,T)}function nZe(_,T){return _!=null&&T in Hi(_)}function rZe(_,T,P){return _>=su(T,P)&&_<$o(T,P)}function RU(_,T,P){for(var z=P?M1:Jb,X=_[0].length,re=_.length,ce=re,ve=je(re),Ie=1/0,et=[];ce--;){var tt=_[ce];ce&&T&&(tt=Vi(tt,gi(T))),Ie=su(tt.length,Ie),ve[ce]=!P&&(T||X>=120&&tt.length>=120)?new r_(ce&&tt):n}tt=_[0];var lt=-1,$t=ve[0];e:for(;++lt<X&&et.length<Ie;){var Qt=tt[lt],mn=T?T(Qt):Qt;if(Qt=P||Qt!==0?Qt:0,!($t?Lf($t,mn):z(et,mn,P))){for(ce=re;--ce;){var tr=ve[ce];if(!(tr?Lf(tr,mn):z(_[ce],mn,P)))continue e}$t&&$t.push(mn),et.push(Qt)}}return et}function iZe(_,T,P,z){return _p(_,function(X,re,ce){T(z,P(X),re,ce)}),z}function JC(_,T,P){T=V1(T,_),_=Qhe(_,T);var z=_==null?_:_[xp(Uf(T))];return z==null?n:ru(z,_,P)}function fhe(_){return Fs(_)&&Wu(_)==Q}function sZe(_){return Fs(_)&&Wu(_)==Oe}function oZe(_){return Fs(_)&&Wu(_)==Ce}function ZC(_,T,P,z,X){return _===T?!0:_==null||T==null||!Fs(_)&&!Fs(T)?_!==_&&T!==T:aZe(_,T,P,z,ZC,X)}function aZe(_,T,P,z,X,re){var ce=Vn(_),ve=Vn(T),Ie=ce?se:ou(_),et=ve?se:ou(T);Ie=Ie==Q?Se:Ie,et=et==Q?Se:et;var tt=Ie==Se,lt=et==Se,$t=Ie==et;if($t&&q1(_)){if(!q1(T))return!1;ce=!0,tt=!1}if($t&&!tt)return re||(re=new Kd),ce||M2(_)?Hhe(_,T,P,z,X,re):OZe(_,T,Ie,P,z,X,re);if(!(P&p)){var Qt=tt&&Ei.call(_,"__wrapped__"),mn=lt&&Ei.call(T,"__wrapped__");if(Qt||mn){var tr=Qt?_.value():_,gn=mn?T.value():T;return re||(re=new Kd),X(tr,gn,P,z,re)}}return $t?(re||(re=new Kd),$Ze(_,T,P,z,X,re)):!1}function uZe(_){return Fs(_)&&ou(_)==Ze}function NU(_,T,P,z){var X=P.length,re=X,ce=!z;if(_==null)return!re;for(_=Hi(_);X--;){var ve=P[X];if(ce&&ve[2]?ve[1]!==_[ve[0]]:!(ve[0]in _))return!1}for(;++X<re;){ve=P[X];var Ie=ve[0],et=_[Ie],tt=ve[1];if(ce&&ve[2]){if(et===n&&!(Ie in _))return!1}else{var lt=new Kd;if(z)var $t=z(et,tt,Ie,_,T,lt);if(!($t===n?ZC(tt,et,p|m,z,lt):$t))return!1}}return!0}function dhe(_){if(!Rs(_)||HZe(_))return!1;var T=Am(_)?uJe:Ar;return T.test(a_(_))}function lZe(_){return Fs(_)&&Wu(_)==yt}function cZe(_){return Fs(_)&&ou(_)==Nt}function fZe(_){return Fs(_)&&KN(_.length)&&!!Wr[Wu(_)]}function hhe(_){return typeof _=="function"?_:_==null?Bl:typeof _=="object"?Vn(_)?ghe(_[0],_[1]):mhe(_):$pe(_)}function PU(_){if(!n3(_))return pJe(_);var T=[];for(var P in Hi(_))Ei.call(_,P)&&P!="constructor"&&T.push(P);return T}function dZe(_){if(!Rs(_))return YZe(_);var T=n3(_),P=[];for(var z in _)z=="constructor"&&(T||!Ei.call(_,z))||P.push(z);return P}function DU(_,T){return _<T}function phe(_,T){var P=-1,z=Ml(_)?je(_.length):[];return U1(_,function(X,re,ce){z[++P]=T(X,re,ce)}),z}function mhe(_){var T=YU(_);return T.length==1&&T[0][2]?Khe(T[0][0],T[0][1]):function(P){return P===_||NU(P,_,T)}}function ghe(_,T){return XU(_)&&Yhe(T)?Khe(xp(_),T):function(P){var z=oz(P,_);return z===n&&z===T?az(P,_):ZC(T,z,p|m)}}function DN(_,T,P,z,X){_!==T&&CU(T,function(re,ce){if(X||(X=new Kd),Rs(re))hZe(_,T,ce,P,DN,z,X);else{var ve=z?z(JU(_,ce),re,ce+"",_,T,X):n;ve===n&&(ve=re),SU(_,ce,ve)}},Fl)}function hZe(_,T,P,z,X,re,ce){var ve=JU(_,P),Ie=JU(T,P),et=ce.get(Ie);if(et){SU(_,P,et);return}var tt=re?re(ve,Ie,P+"",_,T,ce):n,lt=tt===n;if(lt){var $t=Vn(Ie),Qt=!$t&&q1(Ie),mn=!$t&&!Qt&&M2(Ie);tt=Ie,$t||Qt||mn?Vn(ve)?tt=ve:to(ve)?tt=Ll(ve):Qt?(lt=!1,tt=Ihe(Ie,!0)):mn?(lt=!1,tt=khe(Ie,!0)):tt=[]:i3(Ie)||u_(Ie)?(tt=ve,u_(ve)?tt=Spe(ve):(!Rs(ve)||Am(ve))&&(tt=Ghe(Ie))):lt=!1}lt&&(ce.set(Ie,tt),X(tt,Ie,z,re,ce),ce.delete(Ie)),SU(_,P,tt)}function yhe(_,T){var P=_.length;if(P)return T+=T<0?P:0,Sm(T,P)?_[T]:n}function vhe(_,T,P){T.length?T=Vi(T,function(re){return Vn(re)?function(ce){return s_(ce,re.length===1?re[0]:re)}:re}):T=[Bl];var z=-1;T=Vi(T,gi(pn()));var X=phe(_,function(re,ce,ve){var Ie=Vi(T,function(et){return et(re)});return{criteria:Ie,index:++z,value:re}});return Ve(X,function(re,ce){return AZe(re,ce,P)})}function pZe(_,T){return bhe(_,T,function(P,z){return az(_,z)})}function bhe(_,T,P){for(var z=-1,X=T.length,re={};++z<X;){var ce=T[z],ve=s_(_,ce);P(ve,ce)&&e3(re,V1(ce,_),ve)}return re}function mZe(_){return function(T){return s_(T,_)}}function OU(_,T,P,z){var X=z?F1:bm,re=-1,ce=T.length,ve=_;for(_===T&&(T=Ll(T)),P&&(ve=Vi(_,gi(P)));++re<ce;)for(var Ie=0,et=T[re],tt=P?P(et):et;(Ie=X(ve,tt,Ie,z))>-1;)ve!==_&&EN.call(ve,Ie,1),EN.call(_,Ie,1);return _}function _he(_,T){for(var P=_?T.length:0,z=P-1;P--;){var X=T[P];if(P==z||X!==re){var re=X;Sm(X)?EN.call(_,X,1):FU(_,X)}}return _}function $U(_,T){return _+AN(ehe()*(T-_+1))}function gZe(_,T,P,z){for(var X=-1,re=$o(SN((T-_)/(P||1)),0),ce=je(re);re--;)ce[z?re:++X]=_,_+=P;return ce}function LU(_,T){var P="";if(!_||T<1||T>K)return P;do T%2&&(P+=_),T=AN(T/2),T&&(_+=_);while(T);return P}function sr(_,T){return ZU(Xhe(_,T,Bl),_+"")}function yZe(_){return rhe(F2(_))}function vZe(_,T){var P=F2(_);return VN(P,i_(T,0,P.length))}function e3(_,T,P,z){if(!Rs(_))return _;T=V1(T,_);for(var X=-1,re=T.length,ce=re-1,ve=_;ve!=null&&++X<re;){var Ie=xp(T[X]),et=P;if(Ie==="__proto__"||Ie==="constructor"||Ie==="prototype")return _;if(X!=ce){var tt=ve[Ie];et=z?z(tt,Ie,ve):n,et===n&&(et=Rs(tt)?tt:Sm(T[X+1])?[]:{})}XC(ve,Ie,et),ve=ve[Ie]}return _}var whe=CN?function(_,T){return CN.set(_,T),_}:Bl,bZe=TN?function(_,T){return TN(_,"toString",{configurable:!0,enumerable:!1,value:lz(T),writable:!0})}:Bl;function _Ze(_){return VN(F2(_))}function jf(_,T,P){var z=-1,X=_.length;T<0&&(T=-T>X?0:X+T),P=P>X?X:P,P<0&&(P+=X),X=T>P?0:P-T>>>0,T>>>=0;for(var re=je(X);++z<X;)re[z]=_[z+T];return re}function wZe(_,T){var P;return U1(_,function(z,X,re){return P=T(z,X,re),!P}),!!P}function ON(_,T,P){var z=0,X=_==null?z:_.length;if(typeof T=="number"&&T===T&&X<=M){for(;z<X;){var re=z+X>>>1,ce=_[re];ce!==null&&!jc(ce)&&(P?ce<=T:ce<T)?z=re+1:X=re}return X}return MU(_,T,Bl,P)}function MU(_,T,P,z){var X=0,re=_==null?0:_.length;if(re===0)return 0;T=P(T);for(var ce=T!==T,ve=T===null,Ie=jc(T),et=T===n;X<re;){var tt=AN((X+re)/2),lt=P(_[tt]),$t=lt!==n,Qt=lt===null,mn=lt===lt,tr=jc(lt);if(ce)var gn=z||mn;else et?gn=mn&&(z||$t):ve?gn=mn&&$t&&(z||!Qt):Ie?gn=mn&&$t&&!Qt&&(z||!tr):Qt||tr?gn=!1:gn=z?lt<=T:lt<T;gn?X=tt+1:re=tt}return su(re,W)}function xhe(_,T){for(var P=-1,z=_.length,X=0,re=[];++P<z;){var ce=_[P],ve=T?T(ce):ce;if(!P||!Xd(ve,Ie)){var Ie=ve;re[X++]=ce===0?0:ce}}return re}function Ehe(_){return typeof _=="number"?_:jc(_)?F:+_}function Bc(_){if(typeof _=="string")return _;if(Vn(_))return Vi(_,Bc)+"";if(jc(_))return the?the.call(_):"";var T=_+"";return T=="0"&&1/_==-1/0?"-0":T}function z1(_,T,P){var z=-1,X=Jb,re=_.length,ce=!0,ve=[],Ie=ve;if(P)ce=!1,X=M1;else if(re>=i){var et=T?null:PZe(_);if(et)return mN(et);ce=!1,X=Lf,Ie=new r_}else Ie=T?[]:ve;e:for(;++z<re;){var tt=_[z],lt=T?T(tt):tt;if(tt=P||tt!==0?tt:0,ce&&lt===lt){for(var $t=Ie.length;$t--;)if(Ie[$t]===lt)continue e;T&&Ie.push(lt),ve.push(tt)}else X(Ie,lt,P)||(Ie!==ve&&Ie.push(lt),ve.push(tt))}return ve}function FU(_,T){return T=V1(T,_),_=Qhe(_,T),_==null||delete _[xp(Uf(T))]}function The(_,T,P,z){return e3(_,T,P(s_(_,T)),z)}function $N(_,T,P,z){for(var X=_.length,re=z?X:-1;(z?re--:++re<X)&&T(_[re],re,_););return P?jf(_,z?0:re,z?re+1:X):jf(_,z?re+1:0,z?X:re)}function She(_,T){var P=_;return P instanceof _r&&(P=P.value()),Gd(T,function(z,X){return X.func.apply(X.thisArg,Wd([z],X.args))},P)}function BU(_,T,P){var z=_.length;if(z<2)return z?z1(_[0]):[];for(var X=-1,re=je(z);++X<z;)for(var ce=_[X],ve=-1;++ve<z;)ve!=X&&(re[X]=QC(re[X]||ce,_[ve],T,P));return z1(Ia(re,1),T,P)}function Ahe(_,T,P){for(var z=-1,X=_.length,re=T.length,ce={};++z<X;){var ve=z<re?T[z]:n;P(ce,_[z],ve)}return ce}function jU(_){return to(_)?_:[]}function UU(_){return typeof _=="function"?_:Bl}function V1(_,T){return Vn(_)?_:XU(_,T)?[_]:tpe(yi(_))}var xZe=sr;function H1(_,T,P){var z=_.length;return P=P===n?z:P,!T&&P>=z?_:jf(_,T,P)}var Che=lJe||function(_){return un.clearTimeout(_)};function Ihe(_,T){if(T)return _.slice();var P=_.length,z=Kde?Kde(P):new _.constructor(P);return _.copy(z),z}function zU(_){var T=new _.constructor(_.byteLength);return new wN(T).set(new wN(_)),T}function EZe(_,T){var P=T?zU(_.buffer):_.buffer;return new _.constructor(P,_.byteOffset,_.byteLength)}function TZe(_){var T=new _.constructor(_.source,Zn.exec(_));return T.lastIndex=_.lastIndex,T}function SZe(_){return KC?Hi(KC.call(_)):{}}function khe(_,T){var P=T?zU(_.buffer):_.buffer;return new _.constructor(P,_.byteOffset,_.length)}function Rhe(_,T){if(_!==T){var P=_!==n,z=_===null,X=_===_,re=jc(_),ce=T!==n,ve=T===null,Ie=T===T,et=jc(T);if(!ve&&!et&&!re&&_>T||re&&ce&&Ie&&!ve&&!et||z&&ce&&Ie||!P&&Ie||!X)return 1;if(!z&&!re&&!et&&_<T||et&&P&&X&&!z&&!re||ve&&P&&X||!ce&&X||!Ie)return-1}return 0}function AZe(_,T,P){for(var z=-1,X=_.criteria,re=T.criteria,ce=X.length,ve=P.length;++z<ce;){var Ie=Rhe(X[z],re[z]);if(Ie){if(z>=ve)return Ie;var et=P[z];return Ie*(et=="desc"?-1:1)}}return _.index-T.index}function Nhe(_,T,P,z){for(var X=-1,re=_.length,ce=P.length,ve=-1,Ie=T.length,et=$o(re-ce,0),tt=je(Ie+et),lt=!z;++ve<Ie;)tt[ve]=T[ve];for(;++X<ce;)(lt||X<re)&&(tt[P[X]]=_[X]);for(;et--;)tt[ve++]=_[X++];return tt}function Phe(_,T,P,z){for(var X=-1,re=_.length,ce=-1,ve=P.length,Ie=-1,et=T.length,tt=$o(re-ve,0),lt=je(tt+et),$t=!z;++X<tt;)lt[X]=_[X];for(var Qt=X;++Ie<et;)lt[Qt+Ie]=T[Ie];for(;++ce<ve;)($t||X<re)&&(lt[Qt+P[ce]]=_[X++]);return lt}function Ll(_,T){var P=-1,z=_.length;for(T||(T=je(z));++P<z;)T[P]=_[P];return T}function wp(_,T,P,z){var X=!P;P||(P={});for(var re=-1,ce=T.length;++re<ce;){var ve=T[re],Ie=z?z(P[ve],_[ve],ve,P,_):n;Ie===n&&(Ie=_[ve]),X?xm(P,ve,Ie):XC(P,ve,Ie)}return P}function CZe(_,T){return wp(_,KU(_),T)}function IZe(_,T){return wp(_,qhe(_),T)}function LN(_,T){return function(P,z){var X=Vn(P)?Qb:XJe,re=T?T():{};return X(P,_,pn(z,2),re)}}function O2(_){return sr(function(T,P){var z=-1,X=P.length,re=X>1?P[X-1]:n,ce=X>2?P[2]:n;for(re=_.length>3&&typeof re=="function"?(X--,re):n,ce&&Gu(P[0],P[1],ce)&&(re=X<3?n:re,X=1),T=Hi(T);++z<X;){var ve=P[z];ve&&_(T,ve,z,re)}return T})}function Dhe(_,T){return function(P,z){if(P==null)return P;if(!Ml(P))return _(P,z);for(var X=P.length,re=T?X:-1,ce=Hi(P);(T?re--:++re<X)&&z(ce[re],re,ce)!==!1;);return P}}function Ohe(_){return function(T,P,z){for(var X=-1,re=Hi(T),ce=z(T),ve=ce.length;ve--;){var Ie=ce[_?ve:++X];if(P(re[Ie],Ie,re)===!1)break}return T}}function kZe(_,T,P){var z=T&g,X=t3(_);function re(){var ce=this&&this!==un&&this instanceof re?X:_;return ce.apply(z?P:this,arguments)}return re}function $he(_){return function(T){T=yi(T);var P=C2(T)?Yd(T):n,z=P?P[0]:T.charAt(0),X=P?H1(P,1).join(""):T.slice(1);return z[_]()+X}}function $2(_){return function(T){return Gd(Dpe(Ppe(T).replace(_2,"")),_,"")}}function t3(_){return function(){var T=arguments;switch(T.length){case 0:return new _;case 1:return new _(T[0]);case 2:return new _(T[0],T[1]);case 3:return new _(T[0],T[1],T[2]);case 4:return new _(T[0],T[1],T[2],T[3]);case 5:return new _(T[0],T[1],T[2],T[3],T[4]);case 6:return new _(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new _(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var P=D2(_.prototype),z=_.apply(P,T);return Rs(z)?z:P}}function RZe(_,T,P){var z=t3(_);function X(){for(var re=arguments.length,ce=je(re),ve=re,Ie=L2(X);ve--;)ce[ve]=arguments[ve];var et=re<3&&ce[0]!==Ie&&ce[re-1]!==Ie?[]:B1(ce,Ie);if(re-=et.length,re<P)return jhe(_,T,MN,X.placeholder,n,ce,et,n,n,P-re);var tt=this&&this!==un&&this instanceof X?z:_;return ru(tt,this,ce)}return X}function Lhe(_){return function(T,P,z){var X=Hi(T);if(!Ml(T)){var re=pn(P,3);T=ra(T),P=function(ve){return re(X[ve],ve,X)}}var ce=_(T,P,z);return ce>-1?X[re?T[ce]:ce]:n}}function Mhe(_){return Tm(function(T){var P=T.length,z=P,X=Ff.prototype.thru;for(_&&T.reverse();z--;){var re=T[z];if(typeof re!="function")throw new Mf(o);if(X&&!ce&&UN(re)=="wrapper")var ce=new Ff([],!0)}for(z=ce?z:P;++z<P;){re=T[z];var ve=UN(re),Ie=ve=="wrapper"?GU(re):n;Ie&&QU(Ie[0])&&Ie[1]==(A|b|x|C)&&!Ie[4].length&&Ie[9]==1?ce=ce[UN(Ie[0])].apply(ce,Ie[3]):ce=re.length==1&&QU(re)?ce[ve]():ce.thru(re)}return function(){var et=arguments,tt=et[0];if(ce&&et.length==1&&Vn(tt))return ce.plant(tt).value();for(var lt=0,$t=P?T[lt].apply(this,et):tt;++lt<P;)$t=T[lt].call(this,$t);return $t}})}function MN(_,T,P,z,X,re,ce,ve,Ie,et){var tt=T&A,lt=T&g,$t=T&y,Qt=T&(b|w),mn=T&N,tr=$t?n:t3(_);function gn(){for(var mr=arguments.length,Rr=je(mr),Uc=mr;Uc--;)Rr[Uc]=arguments[Uc];if(Qt)var Yu=L2(gn),zc=HC(Rr,Yu);if(z&&(Rr=Nhe(Rr,z,X,Qt)),re&&(Rr=Phe(Rr,re,ce,Qt)),mr-=zc,Qt&&mr<et){var no=B1(Rr,Yu);return jhe(_,T,MN,gn.placeholder,P,Rr,no,ve,Ie,et-mr)}var Qd=lt?P:this,Im=$t?Qd[_]:_;return mr=Rr.length,ve?Rr=XZe(Rr,ve):mn&&mr>1&&Rr.reverse(),tt&&Ie<mr&&(Rr.length=Ie),this&&this!==un&&this instanceof gn&&(Im=tr||t3(Im)),Im.apply(Qd,Rr)}return gn}function Fhe(_,T){return function(P,z){return iZe(P,_,T(z),{})}}function FN(_,T){return function(P,z){var X;if(P===n&&z===n)return T;if(P!==n&&(X=P),z!==n){if(X===n)return z;typeof P=="string"||typeof z=="string"?(P=Bc(P),z=Bc(z)):(P=Ehe(P),z=Ehe(z)),X=_(P,z)}return X}}function VU(_){return Tm(function(T){return T=Vi(T,gi(pn())),sr(function(P){var z=this;return _(T,function(X){return ru(X,z,P)})})})}function BN(_,T){T=T===n?" ":Bc(T);var P=T.length;if(P<2)return P?LU(T,_):T;var z=LU(T,SN(_/I2(T)));return C2(T)?H1(Yd(z),0,_).join(""):z.slice(0,_)}function NZe(_,T,P,z){var X=T&g,re=t3(_);function ce(){for(var ve=-1,Ie=arguments.length,et=-1,tt=z.length,lt=je(tt+Ie),$t=this&&this!==un&&this instanceof ce?re:_;++et<tt;)lt[et]=z[et];for(;Ie--;)lt[et++]=arguments[++ve];return ru($t,X?P:this,lt)}return ce}function Bhe(_){return function(T,P,z){return z&&typeof z!="number"&&Gu(T,P,z)&&(P=z=n),T=Cm(T),P===n?(P=T,T=0):P=Cm(P),z=z===n?T<P?1:-1:Cm(z),gZe(T,P,z,_)}}function jN(_){return function(T,P){return typeof T=="string"&&typeof P=="string"||(T=zf(T),P=zf(P)),_(T,P)}}function jhe(_,T,P,z,X,re,ce,ve,Ie,et){var tt=T&b,lt=tt?ce:n,$t=tt?n:ce,Qt=tt?re:n,mn=tt?n:re;T|=tt?x:S,T&=~(tt?S:x),T&v||(T&=-4);var tr=[_,T,X,Qt,lt,mn,$t,ve,Ie,et],gn=P.apply(n,tr);return QU(_)&&Jhe(gn,tr),gn.placeholder=z,Zhe(gn,_,T)}function HU(_){var T=Oo[_];return function(P,z){if(P=zf(P),z=z==null?0:su(Kn(z),292),z&&Zde(P)){var X=(yi(P)+"e").split("e"),re=T(X[0]+"e"+(+X[1]+z));return X=(yi(re)+"e").split("e"),+(X[0]+"e"+(+X[1]-z))}return T(P)}}var PZe=N2&&1/mN(new N2([,-0]))[1]==G?function(_){return new N2(_)}:dz;function Uhe(_){return function(T){var P=ou(T);return P==Ze?_U(T):P==Nt?KQe(T):Do(T,_(T))}}function Em(_,T,P,z,X,re,ce,ve){var Ie=T&y;if(!Ie&&typeof _!="function")throw new Mf(o);var et=z?z.length:0;if(et||(T&=-97,z=X=n),ce=ce===n?ce:$o(Kn(ce),0),ve=ve===n?ve:Kn(ve),et-=X?X.length:0,T&S){var tt=z,lt=X;z=X=n}var $t=Ie?n:GU(_),Qt=[_,T,P,z,X,tt,lt,re,ce,ve];if($t&&GZe(Qt,$t),_=Qt[0],T=Qt[1],P=Qt[2],z=Qt[3],X=Qt[4],ve=Qt[9]=Qt[9]===n?Ie?0:_.length:$o(Qt[9]-et,0),!ve&&T&(b|w)&&(T&=-25),!T||T==g)var mn=kZe(_,T,P);else T==b||T==w?mn=RZe(_,T,ve):(T==x||T==(g|x))&&!X.length?mn=NZe(_,T,P,z):mn=MN.apply(n,Qt);var tr=$t?whe:Jhe;return Zhe(tr(mn,Qt),_,T)}function zhe(_,T,P,z){return _===n||Xd(_,R2[P])&&!Ei.call(z,P)?T:_}function Vhe(_,T,P,z,X,re){return Rs(_)&&Rs(T)&&(re.set(T,_),DN(_,T,n,Vhe,re),re.delete(T)),_}function DZe(_){return i3(_)?n:_}function Hhe(_,T,P,z,X,re){var ce=P&p,ve=_.length,Ie=T.length;if(ve!=Ie&&!(ce&&Ie>ve))return!1;var et=re.get(_),tt=re.get(T);if(et&&tt)return et==T&&tt==_;var lt=-1,$t=!0,Qt=P&m?new r_:n;for(re.set(_,T),re.set(T,_);++lt<ve;){var mn=_[lt],tr=T[lt];if(z)var gn=ce?z(tr,mn,lt,T,_,re):z(mn,tr,lt,_,T,re);if(gn!==n){if(gn)continue;$t=!1;break}if(Qt){if(!S2(T,function(mr,Rr){if(!Lf(Qt,Rr)&&(mn===mr||X(mn,mr,P,z,re)))return Qt.push(Rr)})){$t=!1;break}}else if(!(mn===tr||X(mn,tr,P,z,re))){$t=!1;break}}return re.delete(_),re.delete(T),$t}function OZe(_,T,P,z,X,re,ce){switch(P){case ot:if(_.byteLength!=T.byteLength||_.byteOffset!=T.byteOffset)return!1;_=_.buffer,T=T.buffer;case Oe:return!(_.byteLength!=T.byteLength||!re(new wN(_),new wN(T)));case he:case Ce:case It:return Xd(+_,+T);case rt:return _.name==T.name&&_.message==T.message;case yt:case Je:return _==T+"";case Ze:var ve=_U;case Nt:var Ie=z&p;if(ve||(ve=mN),_.size!=T.size&&!Ie)return!1;var et=ce.get(_);if(et)return et==T;z|=m,ce.set(_,T);var tt=Hhe(ve(_),ve(T),z,X,re,ce);return ce.delete(_),tt;case xe:if(KC)return KC.call(_)==KC.call(T)}return!1}function $Ze(_,T,P,z,X,re){var ce=P&p,ve=qU(_),Ie=ve.length,et=qU(T),tt=et.length;if(Ie!=tt&&!ce)return!1;for(var lt=Ie;lt--;){var $t=ve[lt];if(!(ce?$t in T:Ei.call(T,$t)))return!1}var Qt=re.get(_),mn=re.get(T);if(Qt&&mn)return Qt==T&&mn==_;var tr=!0;re.set(_,T),re.set(T,_);for(var gn=ce;++lt<Ie;){$t=ve[lt];var mr=_[$t],Rr=T[$t];if(z)var Uc=ce?z(Rr,mr,$t,T,_,re):z(mr,Rr,$t,_,T,re);if(!(Uc===n?mr===Rr||X(mr,Rr,P,z,re):Uc)){tr=!1;break}gn||(gn=$t=="constructor")}if(tr&&!gn){var Yu=_.constructor,zc=T.constructor;Yu!=zc&&"constructor"in _&&"constructor"in T&&!(typeof Yu=="function"&&Yu instanceof Yu&&typeof zc=="function"&&zc instanceof zc)&&(tr=!1)}return re.delete(_),re.delete(T),tr}function Tm(_){return ZU(Xhe(_,n,spe),_+"")}function qU(_){return che(_,ra,KU)}function WU(_){return che(_,Fl,qhe)}var GU=CN?function(_){return CN.get(_)}:dz;function UN(_){for(var T=_.name+"",P=P2[T],z=Ei.call(P2,T)?P.length:0;z--;){var X=P[z],re=X.func;if(re==null||re==_)return X.name}return T}function L2(_){var T=Ei.call(Z,"placeholder")?Z:_;return T.placeholder}function pn(){var _=Z.iteratee||cz;return _=_===cz?hhe:_,arguments.length?_(arguments[0],arguments[1]):_}function zN(_,T){var P=_.__data__;return VZe(T)?P[typeof T=="string"?"string":"hash"]:P.map}function YU(_){for(var T=ra(_),P=T.length;P--;){var z=T[P],X=_[z];T[P]=[z,X,Yhe(X)]}return T}function o_(_,T){var P=WQe(_,T);return dhe(P)?P:n}function LZe(_){var T=Ei.call(_,t_),P=_[t_];try{_[t_]=n;var z=!0}catch{}var X=bN.call(_);return z&&(T?_[t_]=P:delete _[t_]),X}var KU=xU?function(_){return _==null?[]:(_=Hi(_),$f(xU(_),function(T){return Qde.call(_,T)}))}:hz,qhe=xU?function(_){for(var T=[];_;)Wd(T,KU(_)),_=xN(_);return T}:hz,ou=Wu;(EU&&ou(new EU(new ArrayBuffer(1)))!=ot||WC&&ou(new WC)!=Ze||TU&&ou(TU.resolve())!=Fe||N2&&ou(new N2)!=Nt||GC&&ou(new GC)!=Rt)&&(ou=function(_){var T=Wu(_),P=T==Se?_.constructor:n,z=P?a_(P):"";if(z)switch(z){case vJe:return ot;case bJe:return Ze;case _Je:return Fe;case wJe:return Nt;case xJe:return Rt}return T});function MZe(_,T,P){for(var z=-1,X=P.length;++z<X;){var re=P[z],ce=re.size;switch(re.type){case"drop":_+=ce;break;case"dropRight":T-=ce;break;case"take":T=su(T,_+ce);break;case"takeRight":_=$o(_,T-ce);break}}return{start:_,end:T}}function FZe(_){var T=_.match(ge);return T?T[1].split(Me):[]}function Whe(_,T,P){T=V1(T,_);for(var z=-1,X=T.length,re=!1;++z<X;){var ce=xp(T[z]);if(!(re=_!=null&&P(_,ce)))break;_=_[ce]}return re||++z!=X?re:(X=_==null?0:_.length,!!X&&KN(X)&&Sm(ce,X)&&(Vn(_)||u_(_)))}function BZe(_){var T=_.length,P=new _.constructor(T);return T&&typeof _[0]=="string"&&Ei.call(_,"index")&&(P.index=_.index,P.input=_.input),P}function Ghe(_){return typeof _.constructor=="function"&&!n3(_)?D2(xN(_)):{}}function jZe(_,T,P){var z=_.constructor;switch(T){case Oe:return zU(_);case he:case Ce:return new z(+_);case ot:return EZe(_,P);case _t:case jt:case Un:case hr:case Sr:case _i:case Sn:case zn:case pr:return khe(_,P);case Ze:return new z;case It:case Je:return new z(_);case yt:return TZe(_);case Nt:return new z;case xe:return SZe(_)}}function UZe(_,T){var P=T.length;if(!P)return _;var z=P-1;return T[z]=(P>1?"& ":"")+T[z],T=T.join(P>2?", ":" "),_.replace(ue,`{
/* [wrapped with `+T+`] */
`)}function zZe(_){return Vn(_)||u_(_)||!!(Jde&&_&&_[Jde])}function Sm(_,T){var P=typeof _;return T=T??K,!!T&&(P=="number"||P!="symbol"&&an.test(_))&&_>-1&&_%1==0&&_<T}function Gu(_,T,P){if(!Rs(P))return!1;var z=typeof T;return(z=="number"?Ml(P)&&Sm(T,P.length):z=="string"&&T in P)?Xd(P[T],_):!1}function XU(_,T){if(Vn(_))return!1;var P=typeof _;return P=="number"||P=="symbol"||P=="boolean"||_==null||jc(_)?!0:ki.test(_)||!Br.test(_)||T!=null&&_ in Hi(T)}function VZe(_){var T=typeof _;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?_!=="__proto__":_===null}function QU(_){var T=UN(_),P=Z[T];if(typeof P!="function"||!(T in _r.prototype))return!1;if(_===P)return!0;var z=GU(P);return!!z&&_===z[0]}function HZe(_){return!!Yde&&Yde in _}var qZe=yN?Am:pz;function n3(_){var T=_&&_.constructor,P=typeof T=="function"&&T.prototype||R2;return _===P}function Yhe(_){return _===_&&!Rs(_)}function Khe(_,T){return function(P){return P==null?!1:P[_]===T&&(T!==n||_ in Hi(P))}}function WZe(_){var T=GN(_,function(z){return P.size===l&&P.clear(),z}),P=T.cache;return T}function GZe(_,T){var P=_[1],z=T[1],X=P|z,re=X<(g|y|A),ce=z==A&&P==b||z==A&&P==C&&_[7].length<=T[8]||z==(A|C)&&T[7].length<=T[8]&&P==b;if(!(re||ce))return _;z&g&&(_[2]=T[2],X|=P&g?0:v);var ve=T[3];if(ve){var Ie=_[3];_[3]=Ie?Nhe(Ie,ve,T[4]):ve,_[4]=Ie?B1(_[3],c):T[4]}return ve=T[5],ve&&(Ie=_[5],_[5]=Ie?Phe(Ie,ve,T[6]):ve,_[6]=Ie?B1(_[5],c):T[6]),ve=T[7],ve&&(_[7]=ve),z&A&&(_[8]=_[8]==null?T[8]:su(_[8],T[8])),_[9]==null&&(_[9]=T[9]),_[0]=T[0],_[1]=X,_}function YZe(_){var T=[];if(_!=null)for(var P in Hi(_))T.push(P);return T}function KZe(_){return bN.call(_)}function Xhe(_,T,P){return T=$o(T===n?_.length-1:T,0),function(){for(var z=arguments,X=-1,re=$o(z.length-T,0),ce=je(re);++X<re;)ce[X]=z[T+X];X=-1;for(var ve=je(T+1);++X<T;)ve[X]=z[X];return ve[T]=P(ce),ru(_,this,ve)}}function Qhe(_,T){return T.length<2?_:s_(_,jf(T,0,-1))}function XZe(_,T){for(var P=_.length,z=su(T.length,P),X=Ll(_);z--;){var re=T[z];_[z]=Sm(re,P)?X[re]:n}return _}function JU(_,T){if(!(T==="constructor"&&typeof _[T]=="function")&&T!="__proto__")return _[T]}var Jhe=epe(whe),r3=fJe||function(_,T){return un.setTimeout(_,T)},ZU=epe(bZe);function Zhe(_,T,P){var z=T+"";return ZU(_,UZe(z,QZe(FZe(z),P)))}function epe(_){var T=0,P=0;return function(){var z=mJe(),X=O-(z-P);if(P=z,X>0){if(++T>=L)return arguments[0]}else T=0;return _.apply(n,arguments)}}function VN(_,T){var P=-1,z=_.length,X=z-1;for(T=T===n?z:T;++P<T;){var re=$U(P,X),ce=_[re];_[re]=_[P],_[P]=ce}return _.length=T,_}var tpe=WZe(function(_){var T=[];return _.charCodeAt(0)===46&&T.push(""),_.replace(mi,function(P,z,X,re){T.push(X?re.replace(Ut,"$1"):z||P)}),T});function xp(_){if(typeof _=="string"||jc(_))return _;var T=_+"";return T=="0"&&1/_==-1/0?"-0":T}function a_(_){if(_!=null){try{return vN.call(_)}catch{}try{return _+""}catch{}}return""}function QZe(_,T){return qu(V,function(P){var z="_."+P[0];T&P[1]&&!Jb(_,z)&&_.push(z)}),_.sort()}function npe(_){if(_ instanceof _r)return _.clone();var T=new Ff(_.__wrapped__,_.__chain__);return T.__actions__=Ll(_.__actions__),T.__index__=_.__index__,T.__values__=_.__values__,T}function JZe(_,T,P){(P?Gu(_,T,P):T===n)?T=1:T=$o(Kn(T),0);var z=_==null?0:_.length;if(!z||T<1)return[];for(var X=0,re=0,ce=je(SN(z/T));X<z;)ce[re++]=jf(_,X,X+=T);return ce}function ZZe(_){for(var T=-1,P=_==null?0:_.length,z=0,X=[];++T<P;){var re=_[T];re&&(X[z++]=re)}return X}function eet(){var _=arguments.length;if(!_)return[];for(var T=je(_-1),P=arguments[0],z=_;z--;)T[z-1]=arguments[z];return Wd(Vn(P)?Ll(P):[P],Ia(T,1))}var tet=sr(function(_,T){return to(_)?QC(_,Ia(T,1,to,!0)):[]}),net=sr(function(_,T){var P=Uf(T);return to(P)&&(P=n),to(_)?QC(_,Ia(T,1,to,!0),pn(P,2)):[]}),ret=sr(function(_,T){var P=Uf(T);return to(P)&&(P=n),to(_)?QC(_,Ia(T,1,to,!0),n,P):[]});function iet(_,T,P){var z=_==null?0:_.length;return z?(T=P||T===n?1:Kn(T),jf(_,T<0?0:T,z)):[]}function set(_,T,P){var z=_==null?0:_.length;return z?(T=P||T===n?1:Kn(T),T=z-T,jf(_,0,T<0?0:T)):[]}function oet(_,T){return _&&_.length?$N(_,pn(T,3),!0,!0):[]}function aet(_,T){return _&&_.length?$N(_,pn(T,3),!0):[]}function uet(_,T,P,z){var X=_==null?0:_.length;return X?(P&&typeof P!="number"&&Gu(_,T,P)&&(P=0,z=X),eZe(_,T,P,z)):[]}function rpe(_,T,P){var z=_==null?0:_.length;if(!z)return-1;var X=P==null?0:Kn(P);return X<0&&(X=$o(z+X,0)),Zb(_,pn(T,3),X)}function ipe(_,T,P){var z=_==null?0:_.length;if(!z)return-1;var X=z-1;return P!==n&&(X=Kn(P),X=P<0?$o(z+X,0):su(X,z-1)),Zb(_,pn(T,3),X,!0)}function spe(_){var T=_==null?0:_.length;return T?Ia(_,1):[]}function cet(_){var T=_==null?0:_.length;return T?Ia(_,G):[]}function fet(_,T){var P=_==null?0:_.length;return P?(T=T===n?1:Kn(T),Ia(_,T)):[]}function det(_){for(var T=-1,P=_==null?0:_.length,z={};++T<P;){var X=_[T];z[X[0]]=X[1]}return z}function ope(_){return _&&_.length?_[0]:n}function het(_,T,P){var z=_==null?0:_.length;if(!z)return-1;var X=P==null?0:Kn(P);return X<0&&(X=$o(z+X,0)),bm(_,T,X)}function pet(_){var T=_==null?0:_.length;return T?jf(_,0,-1):[]}var met=sr(function(_){var T=Vi(_,jU);return T.length&&T[0]===_[0]?RU(T):[]}),get=sr(function(_){var T=Uf(_),P=Vi(_,jU);return T===Uf(P)?T=n:P.pop(),P.length&&P[0]===_[0]?RU(P,pn(T,2)):[]}),yet=sr(function(_){var T=Uf(_),P=Vi(_,jU);return T=typeof T=="function"?T:n,T&&P.pop(),P.length&&P[0]===_[0]?RU(P,n,T):[]});function vet(_,T){return _==null?"":hJe.call(_,T)}function Uf(_){var T=_==null?0:_.length;return T?_[T-1]:n}function bet(_,T,P){var z=_==null?0:_.length;if(!z)return-1;var X=z;return P!==n&&(X=Kn(P),X=X<0?$o(z+X,0):su(X,z-1)),T===T?QQe(_,T,X):Zb(_,I,X,!0)}function _et(_,T){return _&&_.length?yhe(_,Kn(T)):n}var wet=sr(ape);function ape(_,T){return _&&_.length&&T&&T.length?OU(_,T):_}function xet(_,T,P){return _&&_.length&&T&&T.length?OU(_,T,pn(P,2)):_}function Eet(_,T,P){return _&&_.length&&T&&T.length?OU(_,T,n,P):_}var Tet=Tm(function(_,T){var P=_==null?0:_.length,z=AU(_,T);return _he(_,Vi(T,function(X){return Sm(X,P)?+X:X}).sort(Rhe)),z});function Aet(_,T){var P=[];if(!(_&&_.length))return P;var z=-1,X=[],re=_.length;for(T=pn(T,3);++z<re;){var ce=_[z];T(ce,z,_)&&(P.push(ce),X.push(z))}return _he(_,X),P}function ez(_){return _==null?_:yJe.call(_)}function Cet(_,T,P){var z=_==null?0:_.length;return z?(P&&typeof P!="number"&&Gu(_,T,P)?(T=0,P=z):(T=T==null?0:Kn(T),P=P===n?z:Kn(P)),jf(_,T,P)):[]}function Iet(_,T){return ON(_,T)}function ket(_,T,P){return MU(_,T,pn(P,2))}function Ret(_,T){var P=_==null?0:_.length;if(P){var z=ON(_,T);if(z<P&&Xd(_[z],T))return z}return-1}function Net(_,T){return ON(_,T,!0)}function Pet(_,T,P){return MU(_,T,pn(P,2),!0)}function Det(_,T){var P=_==null?0:_.length;if(P){var z=ON(_,T,!0)-1;if(Xd(_[z],T))return z}return-1}function Oet(_){return _&&_.length?xhe(_):[]}function $et(_,T){return _&&_.length?xhe(_,pn(T,2)):[]}function Let(_){var T=_==null?0:_.length;return T?jf(_,1,T):[]}function Met(_,T,P){return _&&_.length?(T=P||T===n?1:Kn(T),jf(_,0,T<0?0:T)):[]}function Fet(_,T,P){var z=_==null?0:_.length;return z?(T=P||T===n?1:Kn(T),T=z-T,jf(_,T<0?0:T,z)):[]}function Bet(_,T){return _&&_.length?$N(_,pn(T,3),!1,!0):[]}function jet(_,T){return _&&_.length?$N(_,pn(T,3)):[]}var Uet=sr(function(_){return z1(Ia(_,1,to,!0))}),zet=sr(function(_){var T=Uf(_);return to(T)&&(T=n),z1(Ia(_,1,to,!0),pn(T,2))}),Vet=sr(function(_){var T=Uf(_);return T=typeof T=="function"?T:n,z1(Ia(_,1,to,!0),n,T)});function Het(_){return _&&_.length?z1(_):[]}function qet(_,T){return _&&_.length?z1(_,pn(T,2)):[]}function Wet(_,T){return T=typeof T=="function"?T:n,_&&_.length?z1(_,n,T):[]}function tz(_){if(!(_&&_.length))return[];var T=0;return _=$f(_,function(P){if(to(P))return T=$o(P.length,T),!0}),li(T,function(P){return Vi(_,Y(P))})}function upe(_,T){if(!(_&&_.length))return[];var P=tz(_);return T==null?P:Vi(P,function(z){return ru(T,n,z)})}var Get=sr(function(_,T){return to(_)?QC(_,T):[]}),Yet=sr(function(_){return BU($f(_,to))}),Ket=sr(function(_){var T=Uf(_);return to(T)&&(T=n),BU($f(_,to),pn(T,2))}),Xet=sr(function(_){var T=Uf(_);return T=typeof T=="function"?T:n,BU($f(_,to),n,T)}),Qet=sr(tz);function Jet(_,T){return Ahe(_||[],T||[],XC)}function Zet(_,T){return Ahe(_||[],T||[],e3)}var ett=sr(function(_){var T=_.length,P=T>1?_[T-1]:n;return P=typeof P=="function"?(_.pop(),P):n,upe(_,P)});function lpe(_){var T=Z(_);return T.__chain__=!0,T}function ttt(_,T){return T(_),_}function HN(_,T){return T(_)}var ntt=Tm(function(_){var T=_.length,P=T?_[0]:0,z=this.__wrapped__,X=function(re){return AU(re,_)};return T>1||this.__actions__.length||!(z instanceof _r)||!Sm(P)?this.thru(X):(z=z.slice(P,+P+(T?1:0)),z.__actions__.push({func:HN,args:[X],thisArg:n}),new Ff(z,this.__chain__).thru(function(re){return T&&!re.length&&re.push(n),re}))});function rtt(){return lpe(this)}function itt(){return new Ff(this.value(),this.__chain__)}function stt(){this.__values__===n&&(this.__values__=Epe(this.value()));var _=this.__index__>=this.__values__.length,T=_?n:this.__values__[this.__index__++];return{done:_,value:T}}function ott(){return this}function att(_){for(var T,P=this;P instanceof kN;){var z=npe(P);z.__index__=0,z.__values__=n,T?X.__wrapped__=z:T=z;var X=z;P=P.__wrapped__}return X.__wrapped__=_,T}function utt(){var _=this.__wrapped__;if(_ instanceof _r){var T=_;return this.__actions__.length&&(T=new _r(this)),T=T.reverse(),T.__actions__.push({func:HN,args:[ez],thisArg:n}),new Ff(T,this.__chain__)}return this.thru(ez)}function ltt(){return She(this.__wrapped__,this.__actions__)}var ctt=LN(function(_,T,P){Ei.call(_,P)?++_[P]:xm(_,P,1)});function ftt(_,T,P){var z=Vn(_)?T2:ZJe;return P&&Gu(_,T,P)&&(T=n),z(_,pn(T,3))}function dtt(_,T){var P=Vn(_)?$f:uhe;return P(_,pn(T,3))}var htt=Lhe(rpe),ptt=Lhe(ipe);function mtt(_,T){return Ia(qN(_,T),1)}function gtt(_,T){return Ia(qN(_,T),G)}function ytt(_,T,P){return P=P===n?1:Kn(P),Ia(qN(_,T),P)}function cpe(_,T){var P=Vn(_)?qu:U1;return P(_,pn(T,3))}function fpe(_,T){var P=Vn(_)?fN:ahe;return P(_,pn(T,3))}var vtt=LN(function(_,T,P){Ei.call(_,P)?_[P].push(T):xm(_,P,[T])});function btt(_,T,P,z){_=Ml(_)?_:F2(_),P=P&&!z?Kn(P):0;var X=_.length;return P<0&&(P=$o(X+P,0)),XN(_)?P<=X&&_.indexOf(T,P)>-1:!!X&&bm(_,T,P)>-1}var _tt=sr(function(_,T,P){var z=-1,X=typeof T=="function",re=Ml(_)?je(_.length):[];return U1(_,function(ce){re[++z]=X?ru(T,ce,P):JC(ce,T,P)}),re}),wtt=LN(function(_,T,P){xm(_,P,T)});function qN(_,T){var P=Vn(_)?Vi:phe;return P(_,pn(T,3))}function xtt(_,T,P,z){return _==null?[]:(Vn(T)||(T=T==null?[]:[T]),P=z?n:P,Vn(P)||(P=P==null?[]:[P]),vhe(_,T,P))}var Ett=LN(function(_,T,P){_[P?0:1].push(T)},function(){return[[],[]]});function Ttt(_,T,P){var z=Vn(_)?Gd:Ne,X=arguments.length<3;return z(_,pn(T,4),P,X,U1)}function Stt(_,T,P){var z=Vn(_)?dN:Ne,X=arguments.length<3;return z(_,pn(T,4),P,X,ahe)}function Att(_,T){var P=Vn(_)?$f:uhe;return P(_,YN(pn(T,3)))}function Ctt(_){var T=Vn(_)?rhe:yZe;return T(_)}function Itt(_,T,P){(P?Gu(_,T,P):T===n)?T=1:T=Kn(T);var z=Vn(_)?YJe:vZe;return z(_,T)}function ktt(_){var T=Vn(_)?KJe:_Ze;return T(_)}function Rtt(_){if(_==null)return 0;if(Ml(_))return XN(_)?I2(_):_.length;var T=ou(_);return T==Ze||T==Nt?_.size:PU(_).length}function Ntt(_,T,P){var z=Vn(_)?S2:wZe;return P&&Gu(_,T,P)&&(T=n),z(_,pn(T,3))}var Ptt=sr(function(_,T){if(_==null)return[];var P=T.length;return P>1&&Gu(_,T[0],T[1])?T=[]:P>2&&Gu(T[0],T[1],T[2])&&(T=[T[0]]),vhe(_,Ia(T,1),[])}),WN=cJe||function(){return un.Date.now()};function Dtt(_,T){if(typeof T!="function")throw new Mf(o);return _=Kn(_),function(){if(--_<1)return T.apply(this,arguments)}}function dpe(_,T,P){return T=P?n:T,T=_&&T==null?_.length:T,Em(_,A,n,n,n,n,T)}function hpe(_,T){var P;if(typeof T!="function")throw new Mf(o);return _=Kn(_),function(){return--_>0&&(P=T.apply(this,arguments)),_<=1&&(T=n),P}}var nz=sr(function(_,T,P){var z=g;if(P.length){var X=B1(P,L2(nz));z|=x}return Em(_,z,T,P,X)}),ppe=sr(function(_,T,P){var z=g|y;if(P.length){var X=B1(P,L2(ppe));z|=x}return Em(T,z,_,P,X)});function mpe(_,T,P){T=P?n:T;var z=Em(_,b,n,n,n,n,n,T);return z.placeholder=mpe.placeholder,z}function gpe(_,T,P){T=P?n:T;var z=Em(_,w,n,n,n,n,n,T);return z.placeholder=gpe.placeholder,z}function ype(_,T,P){var z,X,re,ce,ve,Ie,et=0,tt=!1,lt=!1,$t=!0;if(typeof _!="function")throw new Mf(o);T=zf(T)||0,Rs(P)&&(tt=!!P.leading,lt="maxWait"in P,re=lt?$o(zf(P.maxWait)||0,T):re,$t="trailing"in P?!!P.trailing:$t);function Qt(no){var Qd=z,Im=X;return z=X=n,et=no,ce=_.apply(Im,Qd),ce}function mn(no){return et=no,ve=r3(mr,T),tt?Qt(no):ce}function tr(no){var Qd=no-Ie,Im=no-et,Lpe=T-Qd;return lt?su(Lpe,re-Im):Lpe}function gn(no){var Qd=no-Ie,Im=no-et;return Ie===n||Qd>=T||Qd<0||lt&&Im>=re}function mr(){var no=WN();if(gn(no))return Rr(no);ve=r3(mr,tr(no))}function Rr(no){return ve=n,$t&&z?Qt(no):(z=X=n,ce)}function Uc(){ve!==n&&Che(ve),et=0,z=Ie=X=ve=n}function Yu(){return ve===n?ce:Rr(WN())}function zc(){var no=WN(),Qd=gn(no);if(z=arguments,X=this,Ie=no,Qd){if(ve===n)return mn(Ie);if(lt)return Che(ve),ve=r3(mr,T),Qt(Ie)}return ve===n&&(ve=r3(mr,T)),ce}return zc.cancel=Uc,zc.flush=Yu,zc}var Ott=sr(function(_,T){return ohe(_,1,T)}),$tt=sr(function(_,T,P){return ohe(_,zf(T)||0,P)});function Ltt(_){return Em(_,N)}function GN(_,T){if(typeof _!="function"||T!=null&&typeof T!="function")throw new Mf(o);var P=function(){var z=arguments,X=T?T.apply(this,z):z[0],re=P.cache;if(re.has(X))return re.get(X);var ce=_.apply(this,z);return P.cache=re.set(X,ce)||re,ce};return P.cache=new(GN.Cache||wm),P}GN.Cache=wm;function YN(_){if(typeof _!="function")throw new Mf(o);return function(){var T=arguments;switch(T.length){case 0:return!_.call(this);case 1:return!_.call(this,T[0]);case 2:return!_.call(this,T[0],T[1]);case 3:return!_.call(this,T[0],T[1],T[2])}return!_.apply(this,T)}}function Mtt(_){return hpe(2,_)}var Ftt=xZe(function(_,T){T=T.length==1&&Vn(T[0])?Vi(T[0],gi(pn())):Vi(Ia(T,1),gi(pn()));var P=T.length;return sr(function(z){for(var X=-1,re=su(z.length,P);++X<re;)z[X]=T[X].call(this,z[X]);return ru(_,this,z)})}),rz=sr(function(_,T){var P=B1(T,L2(rz));return Em(_,x,n,T,P)}),vpe=sr(function(_,T){var P=B1(T,L2(vpe));return Em(_,S,n,T,P)}),Btt=Tm(function(_,T){return Em(_,C,n,n,n,T)});function jtt(_,T){if(typeof _!="function")throw new Mf(o);return T=T===n?T:Kn(T),sr(_,T)}function Utt(_,T){if(typeof _!="function")throw new Mf(o);return T=T==null?0:$o(Kn(T),0),sr(function(P){var z=P[T],X=H1(P,0,T);return z&&Wd(X,z),ru(_,this,X)})}function ztt(_,T,P){var z=!0,X=!0;if(typeof _!="function")throw new Mf(o);return Rs(P)&&(z="leading"in P?!!P.leading:z,X="trailing"in P?!!P.trailing:X),ype(_,T,{leading:z,maxWait:T,trailing:X})}function Vtt(_){return dpe(_,1)}function Htt(_,T){return rz(UU(T),_)}function qtt(){if(!arguments.length)return[];var _=arguments[0];return Vn(_)?_:[_]}function Wtt(_){return Bf(_,h)}function Gtt(_,T){return T=typeof T=="function"?T:n,Bf(_,h,T)}function Ytt(_){return Bf(_,f|h)}function Ktt(_,T){return T=typeof T=="function"?T:n,Bf(_,f|h,T)}function Xtt(_,T){return T==null||she(_,T,ra(T))}function Xd(_,T){return _===T||_!==_&&T!==T}var Qtt=jN(kU),Jtt=jN(function(_,T){return _>=T}),u_=fhe(function(){return arguments}())?fhe:function(_){return Fs(_)&&Ei.call(_,"callee")&&!Qde.call(_,"callee")},Vn=je.isArray,Ztt=ym?gi(ym):sZe;function Ml(_){return _!=null&&KN(_.length)&&!Am(_)}function to(_){return Fs(_)&&Ml(_)}function ent(_){return _===!0||_===!1||Fs(_)&&Wu(_)==he}var q1=dJe||pz,tnt=vm?gi(vm):oZe;function nnt(_){return Fs(_)&&_.nodeType===1&&!i3(_)}function rnt(_){if(_==null)return!0;if(Ml(_)&&(Vn(_)||typeof _=="string"||typeof _.splice=="function"||q1(_)||M2(_)||u_(_)))return!_.length;var T=ou(_);if(T==Ze||T==Nt)return!_.size;if(n3(_))return!PU(_).length;for(var P in _)if(Ei.call(_,P))return!1;return!0}function int(_,T){return ZC(_,T)}function snt(_,T,P){P=typeof P=="function"?P:n;var z=P?P(_,T):n;return z===n?ZC(_,T,n,P):!!z}function iz(_){if(!Fs(_))return!1;var T=Wu(_);return T==rt||T==De||typeof _.message=="string"&&typeof _.name=="string"&&!i3(_)}function ont(_){return typeof _=="number"&&Zde(_)}function Am(_){if(!Rs(_))return!1;var T=Wu(_);return T==Re||T==Tt||T==be||T==st}function bpe(_){return typeof _=="number"&&_==Kn(_)}function KN(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=K}function Rs(_){var T=typeof _;return _!=null&&(T=="object"||T=="function")}function Fs(_){return _!=null&&typeof _=="object"}var _pe=Kb?gi(Kb):uZe;function ant(_,T){return _===T||NU(_,T,YU(T))}function unt(_,T,P){return P=typeof P=="function"?P:n,NU(_,T,YU(T),P)}function lnt(_){return wpe(_)&&_!=+_}function cnt(_){if(qZe(_))throw new Fn(s);return dhe(_)}function fnt(_){return _===null}function dnt(_){return _==null}function wpe(_){return typeof _=="number"||Fs(_)&&Wu(_)==It}function i3(_){if(!Fs(_)||Wu(_)!=Se)return!1;var T=xN(_);if(T===null)return!0;var P=Ei.call(T,"constructor")&&T.constructor;return typeof P=="function"&&P instanceof P&&vN.call(P)==oJe}var sz=VC?gi(VC):lZe;function hnt(_){return bpe(_)&&_>=-9007199254740991&&_<=K}var xpe=Xb?gi(Xb):cZe;function XN(_){return typeof _=="string"||!Vn(_)&&Fs(_)&&Wu(_)==Je}function jc(_){return typeof _=="symbol"||Fs(_)&&Wu(_)==xe}var M2=cN?gi(cN):fZe;function pnt(_){return _===n}function mnt(_){return Fs(_)&&ou(_)==Rt}function gnt(_){return Fs(_)&&Wu(_)==Ee}var ynt=jN(DU),vnt=jN(function(_,T){return _<=T});function Epe(_){if(!_)return[];if(Ml(_))return XN(_)?Yd(_):Ll(_);if(qC&&_[qC])return YQe(_[qC]());var T=ou(_),P=T==Ze?_U:T==Nt?mN:F2;return P(_)}function Cm(_){if(!_)return _===0?_:0;if(_=zf(_),_===G||_===-1/0){var T=_<0?-1:1;return T*J}return _===_?_:0}function Kn(_){var T=Cm(_),P=T%1;return T===T?P?T-P:T:0}function Tpe(_){return _?i_(Kn(_),0,j):0}function zf(_){if(typeof _=="number")return _;if(jc(_))return F;if(Rs(_)){var T=typeof _.valueOf=="function"?_.valueOf():_;_=Rs(T)?T+"":T}if(typeof _!="string")return _===0?_:+_;_=kr(_);var P=On.test(_);return P||ai.test(_)?ir(_.slice(2),P?2:8):ur.test(_)?F:+_}function Spe(_){return wp(_,Fl(_))}function bnt(_){return _?i_(Kn(_),-9007199254740991,K):_===0?_:0}function yi(_){return _==null?"":Bc(_)}var _nt=O2(function(_,T){if(n3(T)||Ml(T)){wp(T,ra(T),_);return}for(var P in T)Ei.call(T,P)&&XC(_,P,T[P])}),Ape=O2(function(_,T){wp(T,Fl(T),_)}),QN=O2(function(_,T,P,z){wp(T,Fl(T),_,z)}),wnt=O2(function(_,T,P,z){wp(T,ra(T),_,z)}),xnt=Tm(AU);function Ent(_,T){var P=D2(_);return T==null?P:ihe(P,T)}var Tnt=sr(function(_,T){_=Hi(_);var P=-1,z=T.length,X=z>2?T[2]:n;for(X&&Gu(T[0],T[1],X)&&(z=1);++P<z;)for(var re=T[P],ce=Fl(re),ve=-1,Ie=ce.length;++ve<Ie;){var et=ce[ve],tt=_[et];(tt===n||Xd(tt,R2[et])&&!Ei.call(_,et))&&(_[et]=re[et])}return _}),Snt=sr(function(_){return _.push(n,Vhe),ru(Cpe,n,_)});function Ant(_,T){return iu(_,pn(T,3),_p)}function Cnt(_,T){return iu(_,pn(T,3),IU)}function Int(_,T){return _==null?_:CU(_,pn(T,3),Fl)}function knt(_,T){return _==null?_:lhe(_,pn(T,3),Fl)}function Rnt(_,T){return _&&_p(_,pn(T,3))}function Nnt(_,T){return _&&IU(_,pn(T,3))}function Pnt(_){return _==null?[]:PN(_,ra(_))}function Dnt(_){return _==null?[]:PN(_,Fl(_))}function oz(_,T,P){var z=_==null?n:s_(_,T);return z===n?P:z}function Ont(_,T){return _!=null&&Whe(_,T,tZe)}function az(_,T){return _!=null&&Whe(_,T,nZe)}var $nt=Fhe(function(_,T,P){T!=null&&typeof T.toString!="function"&&(T=bN.call(T)),_[T]=P},lz(Bl)),Lnt=Fhe(function(_,T,P){T!=null&&typeof T.toString!="function"&&(T=bN.call(T)),Ei.call(_,T)?_[T].push(P):_[T]=[P]},pn),Mnt=sr(JC);function ra(_){return Ml(_)?nhe(_):PU(_)}function Fl(_){return Ml(_)?nhe(_,!0):dZe(_)}function Fnt(_,T){var P={};return T=pn(T,3),_p(_,function(z,X,re){xm(P,T(z,X,re),z)}),P}function Bnt(_,T){var P={};return T=pn(T,3),_p(_,function(z,X,re){xm(P,X,T(z,X,re))}),P}var jnt=O2(function(_,T,P){DN(_,T,P)}),Cpe=O2(function(_,T,P,z){DN(_,T,P,z)}),Unt=Tm(function(_,T){var P={};if(_==null)return P;var z=!1;T=Vi(T,function(re){return re=V1(re,_),z||(z=re.length>1),re}),wp(_,WU(_),P),z&&(P=Bf(P,f|d|h,DZe));for(var X=T.length;X--;)FU(P,T[X]);return P});function znt(_,T){return Ipe(_,YN(pn(T)))}var Vnt=Tm(function(_,T){return _==null?{}:pZe(_,T)});function Ipe(_,T){if(_==null)return{};var P=Vi(WU(_),function(z){return[z]});return T=pn(T),bhe(_,P,function(z,X){return T(z,X[0])})}function Hnt(_,T,P){T=V1(T,_);var z=-1,X=T.length;for(X||(X=1,_=n);++z<X;){var re=_==null?n:_[xp(T[z])];re===n&&(z=X,re=P),_=Am(re)?re.call(_):re}return _}function qnt(_,T,P){return _==null?_:e3(_,T,P)}function Wnt(_,T,P,z){return z=typeof z=="function"?z:n,_==null?_:e3(_,T,P,z)}var kpe=Uhe(ra),Rpe=Uhe(Fl);function Gnt(_,T,P){var z=Vn(_),X=z||q1(_)||M2(_);if(T=pn(T,4),P==null){var re=_&&_.constructor;X?P=z?new re:[]:Rs(_)?P=Am(re)?D2(xN(_)):{}:P={}}return(X?qu:_p)(_,function(ce,ve,Ie){return T(P,ce,ve,Ie)}),P}function Ynt(_,T){return _==null?!0:FU(_,T)}function Knt(_,T,P){return _==null?_:The(_,T,UU(P))}function Xnt(_,T,P,z){return z=typeof z=="function"?z:n,_==null?_:The(_,T,UU(P),z)}function F2(_){return _==null?[]:wo(_,ra(_))}function Qnt(_){return _==null?[]:wo(_,Fl(_))}function Jnt(_,T,P){return P===n&&(P=T,T=n),P!==n&&(P=zf(P),P=P===P?P:0),T!==n&&(T=zf(T),T=T===T?T:0),i_(zf(_),T,P)}function Znt(_,T,P){return T=Cm(T),P===n?(P=T,T=0):P=Cm(P),_=zf(_),rZe(_,T,P)}function ert(_,T,P){if(P&&typeof P!="boolean"&&Gu(_,T,P)&&(T=P=n),P===n&&(typeof T=="boolean"?(P=T,T=n):typeof _=="boolean"&&(P=_,_=n)),_===n&&T===n?(_=0,T=1):(_=Cm(_),T===n?(T=_,_=0):T=Cm(T)),_>T){var z=_;_=T,T=z}if(P||_%1||T%1){var X=ehe();return su(_+X*(T-_+Ht("1e-"+((X+"").length-1))),T)}return $U(_,T)}var trt=$2(function(_,T,P){return T=T.toLowerCase(),_+(P?Npe(T):T)});function Npe(_){return uz(yi(_).toLowerCase())}function Ppe(_){return _=yi(_),_&&_.replace(Cr,VQe).replace(Hd,"")}function nrt(_,T,P){_=yi(_),T=Bc(T);var z=_.length;P=P===n?z:i_(Kn(P),0,z);var X=P;return P-=T.length,P>=0&&_.slice(P,X)==T}function rrt(_){return _=yi(_),_&&gs.test(_)?_.replace(Ls,HQe):_}function irt(_){return _=yi(_),_&&oi.test(_)?_.replace(eo,"\\$&"):_}var srt=$2(function(_,T,P){return _+(P?"-":"")+T.toLowerCase()}),ort=$2(function(_,T,P){return _+(P?" ":"")+T.toLowerCase()}),art=$he("toLowerCase");function urt(_,T,P){_=yi(_),T=Kn(T);var z=T?I2(_):0;if(!T||z>=T)return _;var X=(T-z)/2;return BN(AN(X),P)+_+BN(SN(X),P)}function lrt(_,T,P){_=yi(_),T=Kn(T);var z=T?I2(_):0;return T&&z<T?_+BN(T-z,P):_}function crt(_,T,P){_=yi(_),T=Kn(T);var z=T?I2(_):0;return T&&z<T?BN(T-z,P)+_:_}function frt(_,T,P){return P||T==null?T=0:T&&(T=+T),gJe(yi(_).replace(Ri,""),T||0)}function drt(_,T,P){return(P?Gu(_,T,P):T===n)?T=1:T=Kn(T),LU(yi(_),T)}function hrt(){var _=arguments,T=yi(_[0]);return _.length<3?T:T.replace(_[1],_[2])}var prt=$2(function(_,T,P){return _+(P?"_":"")+T.toLowerCase()});function mrt(_,T,P){return P&&typeof P!="number"&&Gu(_,T,P)&&(T=P=n),P=P===n?j:P>>>0,P?(_=yi(_),_&&(typeof T=="string"||T!=null&&!sz(T))&&(T=Bc(T),!T&&C2(_))?H1(Yd(_),0,P):_.split(T,P)):[]}var grt=$2(function(_,T,P){return _+(P?" ":"")+uz(T)});function yrt(_,T,P){return _=yi(_),P=P==null?0:i_(Kn(P),0,_.length),T=Bc(T),_.slice(P,P+T.length)==T}function vrt(_,T,P){var z=Z.templateSettings;P&&Gu(_,T,P)&&(T=n),_=yi(_),T=QN({},T,z,zhe);var X=QN({},T.imports,z.imports,zhe),re=ra(X),ce=wo(X,re),ve,Ie,et=0,tt=T.interpolate||Jr,lt="__p += '",$t=wU((T.escape||Jr).source+"|"+tt.source+"|"+(tt===Vu?dn:Jr).source+"|"+(T.evaluate||Jr).source+"|$","g"),Qt="//# sourceURL="+(Ei.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++x2+"]")+`
`;_.replace($t,function(gn,mr,Rr,Uc,Yu,zc){return Rr||(Rr=Uc),lt+=_.slice(et,zc).replace(vr,qQe),mr&&(ve=!0,lt+=`' +
__e(`+mr+`) +
'`),Yu&&(Ie=!0,lt+=`';
`+Yu+`;
__p += '`),Rr&&(lt+=`' +
((__t = (`+Rr+`)) == null ? '' : __t) +
'`),et=zc+gn.length,gn}),lt+=`';
`;var mn=Ei.call(T,"variable")&&T.variable;if(!mn)lt=`with (obj) {
`+lt+`
}
`;else if(wt.test(mn))throw new Fn(a);lt=(Ie?lt.replace(yr,""):lt).replace(ea,"$1").replace(rs,"$1;"),lt="function("+(mn||"obj")+`) {
`+(mn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ve?", __e = _.escape":"")+(Ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+lt+`return __p
}`;var tr=Ope(function(){return ci(re,Qt+"return "+lt).apply(n,ce)});if(tr.source=lt,iz(tr))throw tr;return tr}function brt(_){return yi(_).toLowerCase()}function _rt(_){return yi(_).toUpperCase()}function wrt(_,T,P){if(_=yi(_),_&&(P||T===n))return kr(_);if(!_||!(T=Bc(T)))return _;var z=Yd(_),X=Yd(T),re=$l(z,X),ce=e_(z,X)+1;return H1(z,re,ce).join("")}function xrt(_,T,P){if(_=yi(_),_&&(P||T===n))return _.slice(0,Gde(_)+1);if(!_||!(T=Bc(T)))return _;var z=Yd(_),X=e_(z,Yd(T))+1;return H1(z,0,X).join("")}function Ert(_,T,P){if(_=yi(_),_&&(P||T===n))return _.replace(Ri,"");if(!_||!(T=Bc(T)))return _;var z=Yd(_),X=$l(z,Yd(T));return H1(z,X).join("")}function Trt(_,T){var P=k,z=D;if(Rs(T)){var X="separator"in T?T.separator:X;P="length"in T?Kn(T.length):P,z="omission"in T?Bc(T.omission):z}_=yi(_);var re=_.length;if(C2(_)){var ce=Yd(_);re=ce.length}if(P>=re)return _;var ve=P-I2(z);if(ve<1)return z;var Ie=ce?H1(ce,0,ve).join(""):_.slice(0,ve);if(X===n)return Ie+z;if(ce&&(ve+=Ie.length-ve),sz(X)){if(_.slice(ve).search(X)){var et,tt=Ie;for(X.global||(X=wU(X.source,yi(Zn.exec(X))+"g")),X.lastIndex=0;et=X.exec(tt);)var lt=et.index;Ie=Ie.slice(0,lt===n?ve:lt)}}else if(_.indexOf(Bc(X),ve)!=ve){var $t=Ie.lastIndexOf(X);$t>-1&&(Ie=Ie.slice(0,$t))}return Ie+z}function Srt(_){return _=yi(_),_&&Hr.test(_)?_.replace(ms,JQe):_}var Art=$2(function(_,T,P){return _+(P?" ":"")+T.toUpperCase()}),uz=$he("toUpperCase");function Dpe(_,T,P){return _=yi(_),T=P?n:T,T===n?GQe(_)?tJe(_):A2(_):_.match(T)||[]}var Ope=sr(function(_,T){try{return ru(_,n,T)}catch(P){return iz(P)?P:new Fn(P)}}),Crt=Tm(function(_,T){return qu(T,function(P){P=xp(P),xm(_,P,nz(_[P],_))}),_});function Irt(_){var T=_==null?0:_.length,P=pn();return _=T?Vi(_,function(z){if(typeof z[1]!="function")throw new Mf(o);return[P(z[0]),z[1]]}):[],sr(function(z){for(var X=-1;++X<T;){var re=_[X];if(ru(re[0],this,z))return ru(re[1],this,z)}})}function krt(_){return JJe(Bf(_,f))}function lz(_){return function(){return _}}function Rrt(_,T){return _==null||_!==_?T:_}var Nrt=Mhe(),Prt=Mhe(!0);function Bl(_){return _}function cz(_){return hhe(typeof _=="function"?_:Bf(_,f))}function Drt(_){return mhe(Bf(_,f))}function Ort(_,T){return ghe(_,Bf(T,f))}var $rt=sr(function(_,T){return function(P){return JC(P,_,T)}}),Lrt=sr(function(_,T){return function(P){return JC(_,P,T)}});function fz(_,T,P){var z=ra(T),X=PN(T,z);P==null&&!(Rs(T)&&(X.length||!z.length))&&(P=T,T=_,_=this,X=PN(T,ra(T)));var re=!(Rs(P)&&"chain"in P)||!!P.chain,ce=Am(_);return qu(X,function(ve){var Ie=T[ve];_[ve]=Ie,ce&&(_.prototype[ve]=function(){var et=this.__chain__;if(re||et){var tt=_(this.__wrapped__),lt=tt.__actions__=Ll(this.__actions__);return lt.push({func:Ie,args:arguments,thisArg:_}),tt.__chain__=et,tt}return Ie.apply(_,Wd([this.value()],arguments))})}),_}function Mrt(){return un._===this&&(un._=aJe),this}function dz(){}function Frt(_){return _=Kn(_),sr(function(T){return yhe(T,_)})}var Brt=VU(Vi),jrt=VU(T2),Urt=VU(S2);function $pe(_){return XU(_)?Y(xp(_)):mZe(_)}function zrt(_){return function(T){return _==null?n:s_(_,T)}}var Vrt=Bhe(),Hrt=Bhe(!0);function hz(){return[]}function pz(){return!1}function qrt(){return{}}function Wrt(){return""}function Grt(){return!0}function Yrt(_,T){if(_=Kn(_),_<1||_>K)return[];var P=j,z=su(_,j);T=pn(T),_-=j;for(var X=li(z,T);++P<_;)T(P);return X}function Krt(_){return Vn(_)?Vi(_,xp):jc(_)?[_]:Ll(tpe(yi(_)))}function Xrt(_){var T=++sJe;return yi(_)+T}var Qrt=FN(function(_,T){return _+T},0),Jrt=HU("ceil"),Zrt=FN(function(_,T){return _/T},1),eit=HU("floor");function tit(_){return _&&_.length?NN(_,Bl,kU):n}function nit(_,T){return _&&_.length?NN(_,pn(T,2),kU):n}function rit(_){return U(_,Bl)}function iit(_,T){return U(_,pn(T,2))}function sit(_){return _&&_.length?NN(_,Bl,DU):n}function oit(_,T){return _&&_.length?NN(_,pn(T,2),DU):n}var ait=FN(function(_,T){return _*T},1),uit=HU("round"),lit=FN(function(_,T){return _-T},0);function cit(_){return _&&_.length?Ct(_,Bl):0}function fit(_,T){return _&&_.length?Ct(_,pn(T,2)):0}return Z.after=Dtt,Z.ary=dpe,Z.assign=_nt,Z.assignIn=Ape,Z.assignInWith=QN,Z.assignWith=wnt,Z.at=xnt,Z.before=hpe,Z.bind=nz,Z.bindAll=Crt,Z.bindKey=ppe,Z.castArray=qtt,Z.chain=lpe,Z.chunk=JZe,Z.compact=ZZe,Z.concat=eet,Z.cond=Irt,Z.conforms=krt,Z.constant=lz,Z.countBy=ctt,Z.create=Ent,Z.curry=mpe,Z.curryRight=gpe,Z.debounce=ype,Z.defaults=Tnt,Z.defaultsDeep=Snt,Z.defer=Ott,Z.delay=$tt,Z.difference=tet,Z.differenceBy=net,Z.differenceWith=ret,Z.drop=iet,Z.dropRight=set,Z.dropRightWhile=oet,Z.dropWhile=aet,Z.fill=uet,Z.filter=dtt,Z.flatMap=mtt,Z.flatMapDeep=gtt,Z.flatMapDepth=ytt,Z.flatten=spe,Z.flattenDeep=cet,Z.flattenDepth=fet,Z.flip=Ltt,Z.flow=Nrt,Z.flowRight=Prt,Z.fromPairs=det,Z.functions=Pnt,Z.functionsIn=Dnt,Z.groupBy=vtt,Z.initial=pet,Z.intersection=met,Z.intersectionBy=get,Z.intersectionWith=yet,Z.invert=$nt,Z.invertBy=Lnt,Z.invokeMap=_tt,Z.iteratee=cz,Z.keyBy=wtt,Z.keys=ra,Z.keysIn=Fl,Z.map=qN,Z.mapKeys=Fnt,Z.mapValues=Bnt,Z.matches=Drt,Z.matchesProperty=Ort,Z.memoize=GN,Z.merge=jnt,Z.mergeWith=Cpe,Z.method=$rt,Z.methodOf=Lrt,Z.mixin=fz,Z.negate=YN,Z.nthArg=Frt,Z.omit=Unt,Z.omitBy=znt,Z.once=Mtt,Z.orderBy=xtt,Z.over=Brt,Z.overArgs=Ftt,Z.overEvery=jrt,Z.overSome=Urt,Z.partial=rz,Z.partialRight=vpe,Z.partition=Ett,Z.pick=Vnt,Z.pickBy=Ipe,Z.property=$pe,Z.propertyOf=zrt,Z.pull=wet,Z.pullAll=ape,Z.pullAllBy=xet,Z.pullAllWith=Eet,Z.pullAt=Tet,Z.range=Vrt,Z.rangeRight=Hrt,Z.rearg=Btt,Z.reject=Att,Z.remove=Aet,Z.rest=jtt,Z.reverse=ez,Z.sampleSize=Itt,Z.set=qnt,Z.setWith=Wnt,Z.shuffle=ktt,Z.slice=Cet,Z.sortBy=Ptt,Z.sortedUniq=Oet,Z.sortedUniqBy=$et,Z.split=mrt,Z.spread=Utt,Z.tail=Let,Z.take=Met,Z.takeRight=Fet,Z.takeRightWhile=Bet,Z.takeWhile=jet,Z.tap=ttt,Z.throttle=ztt,Z.thru=HN,Z.toArray=Epe,Z.toPairs=kpe,Z.toPairsIn=Rpe,Z.toPath=Krt,Z.toPlainObject=Spe,Z.transform=Gnt,Z.unary=Vtt,Z.union=Uet,Z.unionBy=zet,Z.unionWith=Vet,Z.uniq=Het,Z.uniqBy=qet,Z.uniqWith=Wet,Z.unset=Ynt,Z.unzip=tz,Z.unzipWith=upe,Z.update=Knt,Z.updateWith=Xnt,Z.values=F2,Z.valuesIn=Qnt,Z.without=Get,Z.words=Dpe,Z.wrap=Htt,Z.xor=Yet,Z.xorBy=Ket,Z.xorWith=Xet,Z.zip=Qet,Z.zipObject=Jet,Z.zipObjectDeep=Zet,Z.zipWith=ett,Z.entries=kpe,Z.entriesIn=Rpe,Z.extend=Ape,Z.extendWith=QN,fz(Z,Z),Z.add=Qrt,Z.attempt=Ope,Z.camelCase=trt,Z.capitalize=Npe,Z.ceil=Jrt,Z.clamp=Jnt,Z.clone=Wtt,Z.cloneDeep=Ytt,Z.cloneDeepWith=Ktt,Z.cloneWith=Gtt,Z.conformsTo=Xtt,Z.deburr=Ppe,Z.defaultTo=Rrt,Z.divide=Zrt,Z.endsWith=nrt,Z.eq=Xd,Z.escape=rrt,Z.escapeRegExp=irt,Z.every=ftt,Z.find=htt,Z.findIndex=rpe,Z.findKey=Ant,Z.findLast=ptt,Z.findLastIndex=ipe,Z.findLastKey=Cnt,Z.floor=eit,Z.forEach=cpe,Z.forEachRight=fpe,Z.forIn=Int,Z.forInRight=knt,Z.forOwn=Rnt,Z.forOwnRight=Nnt,Z.get=oz,Z.gt=Qtt,Z.gte=Jtt,Z.has=Ont,Z.hasIn=az,Z.head=ope,Z.identity=Bl,Z.includes=btt,Z.indexOf=het,Z.inRange=Znt,Z.invoke=Mnt,Z.isArguments=u_,Z.isArray=Vn,Z.isArrayBuffer=Ztt,Z.isArrayLike=Ml,Z.isArrayLikeObject=to,Z.isBoolean=ent,Z.isBuffer=q1,Z.isDate=tnt,Z.isElement=nnt,Z.isEmpty=rnt,Z.isEqual=int,Z.isEqualWith=snt,Z.isError=iz,Z.isFinite=ont,Z.isFunction=Am,Z.isInteger=bpe,Z.isLength=KN,Z.isMap=_pe,Z.isMatch=ant,Z.isMatchWith=unt,Z.isNaN=lnt,Z.isNative=cnt,Z.isNil=dnt,Z.isNull=fnt,Z.isNumber=wpe,Z.isObject=Rs,Z.isObjectLike=Fs,Z.isPlainObject=i3,Z.isRegExp=sz,Z.isSafeInteger=hnt,Z.isSet=xpe,Z.isString=XN,Z.isSymbol=jc,Z.isTypedArray=M2,Z.isUndefined=pnt,Z.isWeakMap=mnt,Z.isWeakSet=gnt,Z.join=vet,Z.kebabCase=srt,Z.last=Uf,Z.lastIndexOf=bet,Z.lowerCase=ort,Z.lowerFirst=art,Z.lt=ynt,Z.lte=vnt,Z.max=tit,Z.maxBy=nit,Z.mean=rit,Z.meanBy=iit,Z.min=sit,Z.minBy=oit,Z.stubArray=hz,Z.stubFalse=pz,Z.stubObject=qrt,Z.stubString=Wrt,Z.stubTrue=Grt,Z.multiply=ait,Z.nth=_et,Z.noConflict=Mrt,Z.noop=dz,Z.now=WN,Z.pad=urt,Z.padEnd=lrt,Z.padStart=crt,Z.parseInt=frt,Z.random=ert,Z.reduce=Ttt,Z.reduceRight=Stt,Z.repeat=drt,Z.replace=hrt,Z.result=Hnt,Z.round=uit,Z.runInContext=Te,Z.sample=Ctt,Z.size=Rtt,Z.snakeCase=prt,Z.some=Ntt,Z.sortedIndex=Iet,Z.sortedIndexBy=ket,Z.sortedIndexOf=Ret,Z.sortedLastIndex=Net,Z.sortedLastIndexBy=Pet,Z.sortedLastIndexOf=Det,Z.startCase=grt,Z.startsWith=yrt,Z.subtract=lit,Z.sum=cit,Z.sumBy=fit,Z.template=vrt,Z.times=Yrt,Z.toFinite=Cm,Z.toInteger=Kn,Z.toLength=Tpe,Z.toLower=brt,Z.toNumber=zf,Z.toSafeInteger=bnt,Z.toString=yi,Z.toUpper=_rt,Z.trim=wrt,Z.trimEnd=xrt,Z.trimStart=Ert,Z.truncate=Trt,Z.unescape=Srt,Z.uniqueId=Xrt,Z.upperCase=Art,Z.upperFirst=uz,Z.each=cpe,Z.eachRight=fpe,Z.first=ope,fz(Z,function(){var _={};return _p(Z,function(T,P){Ei.call(Z.prototype,P)||(_[P]=T)}),_}(),{chain:!1}),Z.VERSION=r,qu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){Z[_].placeholder=Z}),qu(["drop","take"],function(_,T){_r.prototype[_]=function(P){P=P===n?1:$o(Kn(P),0);var z=this.__filtered__&&!T?new _r(this):this.clone();return z.__filtered__?z.__takeCount__=su(P,z.__takeCount__):z.__views__.push({size:su(P,j),type:_+(z.__dir__<0?"Right":"")}),z},_r.prototype[_+"Right"]=function(P){return this.reverse()[_](P).reverse()}}),qu(["filter","map","takeWhile"],function(_,T){var P=T+1,z=P==B||P==H;_r.prototype[_]=function(X){var re=this.clone();return re.__iteratees__.push({iteratee:pn(X,3),type:P}),re.__filtered__=re.__filtered__||z,re}}),qu(["head","last"],function(_,T){var P="take"+(T?"Right":"");_r.prototype[_]=function(){return this[P](1).value()[0]}}),qu(["initial","tail"],function(_,T){var P="drop"+(T?"":"Right");_r.prototype[_]=function(){return this.__filtered__?new _r(this):this[P](1)}}),_r.prototype.compact=function(){return this.filter(Bl)},_r.prototype.find=function(_){return this.filter(_).head()},_r.prototype.findLast=function(_){return this.reverse().find(_)},_r.prototype.invokeMap=sr(function(_,T){return typeof _=="function"?new _r(this):this.map(function(P){return JC(P,_,T)})}),_r.prototype.reject=function(_){return this.filter(YN(pn(_)))},_r.prototype.slice=function(_,T){_=Kn(_);var P=this;return P.__filtered__&&(_>0||T<0)?new _r(P):(_<0?P=P.takeRight(-_):_&&(P=P.drop(_)),T!==n&&(T=Kn(T),P=T<0?P.dropRight(-T):P.take(T-_)),P)},_r.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},_r.prototype.toArray=function(){return this.take(j)},_p(_r.prototype,function(_,T){var P=/^(?:filter|find|map|reject)|While$/.test(T),z=/^(?:head|last)$/.test(T),X=Z[z?"take"+(T=="last"?"Right":""):T],re=z||/^find/.test(T);X&&(Z.prototype[T]=function(){var ce=this.__wrapped__,ve=z?[1]:arguments,Ie=ce instanceof _r,et=ve[0],tt=Ie||Vn(ce),lt=function(mr){var Rr=X.apply(Z,Wd([mr],ve));return z&&$t?Rr[0]:Rr};tt&&P&&typeof et=="function"&&et.length!=1&&(Ie=tt=!1);var $t=this.__chain__,Qt=!!this.__actions__.length,mn=re&&!$t,tr=Ie&&!Qt;if(!re&&tt){ce=tr?ce:new _r(this);var gn=_.apply(ce,ve);return gn.__actions__.push({func:HN,args:[lt],thisArg:n}),new Ff(gn,$t)}return mn&&tr?_.apply(this,ve):(gn=this.thru(lt),mn?z?gn.value()[0]:gn.value():gn)})}),qu(["pop","push","shift","sort","splice","unshift"],function(_){var T=gN[_],P=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",z=/^(?:pop|shift)$/.test(_);Z.prototype[_]=function(){var X=arguments;if(z&&!this.__chain__){var re=this.value();return T.apply(Vn(re)?re:[],X)}return this[P](function(ce){return T.apply(Vn(ce)?ce:[],X)})}}),_p(_r.prototype,function(_,T){var P=Z[T];if(P){var z=P.name+"";Ei.call(P2,z)||(P2[z]=[]),P2[z].push({name:T,func:P})}}),P2[MN(n,y).name]=[{name:"wrapper",func:n}],_r.prototype.clone=EJe,_r.prototype.reverse=TJe,_r.prototype.value=SJe,Z.prototype.at=ntt,Z.prototype.chain=rtt,Z.prototype.commit=itt,Z.prototype.next=stt,Z.prototype.plant=att,Z.prototype.reverse=utt,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=ltt,Z.prototype.first=Z.prototype.head,qC&&(Z.prototype[qC]=ott),Z},k2=nJe();xi?((xi.exports=k2)._=k2,ui._=k2):un._=k2}).call(Jt)})(v7,v7.exports);var GOn=v7.exports;const YOn="#/definitions/LibraryConfig",KOn="http://json-schema.org/draft-07/schema#",XOn={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LibraryConfig:{additionalProperties:!1,description:'LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\n\nBelow is the general template that should be followed when constructing a Library configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/LibraryConfigSchema.json",  "baseComponents": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  "components": {    // Components here are defined exactly as is in the StudyConfig  },  "sequences": {   // Sequences here are defined as "key": "value" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},description:{description:"A description of the library.",type:"string"},name:{description:"The name of the library.",type:"string"},reference:{description:"The reference to the paper where the content of the library is based on.",type:"string"},sequences:{additionalProperties:{$ref:"#/definitions/ComponentBlock"},description:"The order of the components in the study. This might include some randomness.",type:"object"}},required:["$schema","components","sequences"],type:"object"},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},QOn={$ref:YOn,$schema:KOn,definitions:XOn},VYe=new Ffe;VYe.addSchema(QOn);const JOn=VYe.getSchema("#/definitions/LibraryConfig");function HYe(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?HYe(n,t):`$${t}.components.${n}`)}}function qYe(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return qYe(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=HYe(l,a),l}return r})}}function ZOn(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;cC(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function e$n(e,t){let n=!1,r;try{r=qj.parse(e),n=JOn(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function t$n(e){const t=await(await fetch(`${vl}libraries/${e}/config.json`)).text();return e$n(t,e)}async function n$n(e,t,n){const r=e.map(async s=>{const o=await t$n(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(cC(a)){const u=GOn.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const WYe=new Ffe;WYe.addSchema(WOn);const vCe=WYe.getSchema("#/definitions/GlobalConfig"),GYe=new Ffe;GYe.addSchema(zOn);const bCe=GYe.getSchema("#/definitions/StudyConfig");function r$n(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function i$n(e){const t=qj.parse(e),n=vCe(t),r=r$n(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...vCe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function YYe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):YYe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function s$n(e,t){const n=[],r=[];ZOn(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;cC(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=mPe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return YYe(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function Bfe(e){let t=!1,n;try{n=qj.parse(e),t=bCe(n)}catch{t=!1}let r=bCe.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await n$n(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=qYe(n.sequence,o,r);const{errors:a,warnings:u}=s$n(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function o$n(e){const t=await(await fetch(`${vl}${e}`)).text();return await Bfe(t)}async function jfe(e,t){const n=t.configsList.find(r=>x5e(r)===e);if(n){const r=t.configs[n];return await o$n(`${r.path}`)}return null}async function a$n(e){const t={},n=e.configsList.map(async i=>jfe(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function u$n({globalConfig:e}){const t=Ux(),[n,r]=R.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";R.useEffect(()=>{if(t!=="__revisit-widget")return jfe(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&Bfe(m.data.payload).then(async g=>{r(g);const y=await HAe(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:y},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=R.useState([]),[a,u]=R.useState(null),{storageEngine:l}=yo(),[c]=xb(),f=R.useMemo(()=>c.get("participantId"),[c]);R.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await HAe(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(c.entries()),v=await fetch("https://api.ipify.org?format=json").catch(C=>""),b=v instanceof Response?await v.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},x=await l.initializeParticipantSession(t,y,n,w,f||g),S=await l.getModes(t),A=await XTt(t,n,x.sequence,w,x.answers,S,x.participantId);u(A),o([{element:E.jsx(sNn,{}),children:[{path:"/",element:E.jsx(WGe,{to:_h(0),replace:!0})},{path:"/:index",element:n.errors.length>0?E.jsxs(E.Fragment,{children:[E.jsx(Ws,{order:2,mb:8,children:"Error loading config"}),E.jsx(WD,{issues:n.errors,type:"error"})]}):E.jsx(z5n,{})}]}])}p()},[l,n,t,c,f]);const d=h5e(s);let h=null;return i?s.length===0?h=E.jsx(vf,{visible:!0}):h=d&&a?E.jsx(bPe.Provider,{value:a,children:E.jsx(WEt,{store:a.store,children:d})}):E.jsx(Iv,{}):h=E.jsx(Iv,{}),h}function LO({studyIds:e}){const t=rp(),{studyId:n}=k0(),r=wb(),i=e.map(o=>({value:o,label:o})),s=r.pathname.includes("analysis");return E.jsx(Oi.Header,{p:"md",children:E.jsxs(nf,{mt:-7,align:"center",children:[E.jsx(nf.Col,{span:6,children:E.jsxs(qt,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[E.jsx(bb,{w:40,src:`${vl}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),E.jsx(ba,{w:"md"}),E.jsx(Ws,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),E.jsx(nf.Col,{span:6,children:E.jsxs(qt,{justify:"flex-end",direction:"row",children:[s&&E.jsx(RA,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),E.jsx(b5e,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function KYe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=qee(!1),[a,u]=R.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;uoe(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return E.jsxs(E.Fragment,{children:[E.jsxs(bi,{style:{gap:n},children:[E.jsx(us,{label:"Download all participants data as JSON",children:E.jsx(on,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:E.jsx(v1t,{})})}),E.jsx(us,{label:"Download all participants data as a tidy CSV",children:E.jsx(on,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:E.jsx(_5e,{})})})]}),i&&a.length>0&&E.jsx(icn,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}var _Ce={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XYe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},l$n=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Ufe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(XYe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):l$n(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new c$n;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class c$n extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f$n=function(e){const t=XYe(e);return Ufe.encodeByteArray(t,!0)},b7=function(e){return f$n(e).replace(/\./g,"")},QYe=function(e){try{return Ufe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JYe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$n=()=>JYe().__FIREBASE_DEFAULTS__,h$n=()=>{if(typeof process>"u"||typeof _Ce>"u")return;const e=_Ce.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},p$n=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&QYe(e[1]);return t&&JSON.parse(t)},Qj=()=>{try{return d$n()||h$n()||p$n()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ZYe=e=>{var t,n;return(n=(t=Qj())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},m$n=e=>{const t=ZYe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},eKe=()=>{var e;return(e=Qj())===null||e===void 0?void 0:e.config},tKe=e=>{var t;return(t=Qj())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$n(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[b7(JSON.stringify(n)),b7(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y$n(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xa())}function v$n(){var e;const t=(e=Qj())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b$n(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function _$n(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w$n(){const e=Xa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function x$n(){return!v$n()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zfe(){try{return typeof indexedDB=="object"}catch{return!1}}function E$n(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$n="FirebaseError";class pm extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=T$n,Object.setPrototypeOf(this,pm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$C.prototype.create)}}class $C{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?S$n(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new pm(i,a,r)}}function S$n(e,t){return e.replace(A$n,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const A$n=/\{\$([^}]+)}/g;function C$n(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function G6(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(wCe(s)&&wCe(o)){if(!G6(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function wCe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function I$n(e,t){const n=new k$n(e,t);return n.subscribe.bind(n)}class k$n{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");R$n(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=wG),i.error===void 0&&(i.error=wG),i.complete===void 0&&(i.complete=wG);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R$n(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function wG(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$n=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$n=1e3,D$n=2,O$n=4*60*60*1e3,$$n=.5;function L$n(e,t=P$n,n=D$n){const r=t*Math.pow(n,e),i=Math.round($$n*r*(Math.random()-.5)*2);return Math.min(O$n,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(e){return e&&e._delegate?e._delegate:e}class q0{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M$n{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new W6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(B$n(t))try{this.getOrInitializeService({instanceIdentifier:B_})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=B_){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=B_){return this.instances.has(t)}getOptions(t=B_){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:F$n(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=B_){return this.component?this.component.multipleInstances?t:B_:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F$n(e){return e===B_?void 0:e}function B$n(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j$n{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new M$n(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Dr||(Dr={}));const U$n={debug:Dr.DEBUG,verbose:Dr.VERBOSE,info:Dr.INFO,warn:Dr.WARN,error:Dr.ERROR,silent:Dr.SILENT},z$n=Dr.INFO,V$n={[Dr.DEBUG]:"log",[Dr.VERBOSE]:"log",[Dr.INFO]:"info",[Dr.WARN]:"warn",[Dr.ERROR]:"error"},H$n=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=V$n[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Jj{constructor(t){this.name=t,this._logLevel=z$n,this._logHandler=H$n,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Dr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?U$n[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Dr.DEBUG,...t),this._logHandler(this,Dr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Dr.VERBOSE,...t),this._logHandler(this,Dr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Dr.INFO,...t),this._logHandler(this,Dr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Dr.WARN,...t),this._logHandler(this,Dr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Dr.ERROR,...t),this._logHandler(this,Dr.ERROR,...t)}}const q$n=(e,t)=>t.some(n=>e instanceof n);let xCe,ECe;function W$n(){return xCe||(xCe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G$n(){return ECe||(ECe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nKe=new WeakMap,bZ=new WeakMap,rKe=new WeakMap,xG=new WeakMap,Vfe=new WeakMap;function Y$n(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(vv(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&nKe.set(n,e)}).catch(()=>{}),Vfe.set(t,e),t}function K$n(e){if(bZ.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});bZ.set(e,t)}let _Z={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return bZ.get(e);if(t==="objectStoreNames")return e.objectStoreNames||rKe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vv(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function X$n(e){_Z=e(_Z)}function Q$n(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(EG(this),t,...n);return rKe.set(r,t.sort?t.sort():[t]),vv(r)}:G$n().includes(e)?function(...t){return e.apply(EG(this),t),vv(nKe.get(this))}:function(...t){return vv(e.apply(EG(this),t))}}function J$n(e){return typeof e=="function"?Q$n(e):(e instanceof IDBTransaction&&K$n(e),q$n(e,W$n())?new Proxy(e,_Z):e)}function vv(e){if(e instanceof IDBRequest)return Y$n(e);if(xG.has(e))return xG.get(e);const t=J$n(e);return t!==e&&(xG.set(e,t),Vfe.set(t,e)),t}const EG=e=>Vfe.get(e);function Z$n(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=vv(o);return r&&o.addEventListener("upgradeneeded",u=>{r(vv(o.result),u.oldVersion,u.newVersion,vv(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const e9n=["get","getKey","getAll","getAllKeys","count"],t9n=["put","add","delete","clear"],TG=new Map;function TCe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(TG.get(t))return TG.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=t9n.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||e9n.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return TG.set(t,s),s}X$n(e=>({...e,get:(t,n,r)=>TCe(t,n)||e.get(t,n,r),has:(t,n)=>!!TCe(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9n{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r9n(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function r9n(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const wZ="@firebase/app",SCe="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=new Jj("@firebase/app"),i9n="@firebase/app-compat",s9n="@firebase/analytics-compat",o9n="@firebase/analytics",a9n="@firebase/app-check-compat",u9n="@firebase/app-check",l9n="@firebase/auth",c9n="@firebase/auth-compat",f9n="@firebase/database",d9n="@firebase/database-compat",h9n="@firebase/functions",p9n="@firebase/functions-compat",m9n="@firebase/installations",g9n="@firebase/installations-compat",y9n="@firebase/messaging",v9n="@firebase/messaging-compat",b9n="@firebase/performance",_9n="@firebase/performance-compat",w9n="@firebase/remote-config",x9n="@firebase/remote-config-compat",E9n="@firebase/storage",T9n="@firebase/storage-compat",S9n="@firebase/firestore",A9n="@firebase/vertexai-preview",C9n="@firebase/firestore-compat",I9n="firebase",k9n="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xZ="[DEFAULT]",R9n={[wZ]:"fire-core",[i9n]:"fire-core-compat",[o9n]:"fire-analytics",[s9n]:"fire-analytics-compat",[u9n]:"fire-app-check",[a9n]:"fire-app-check-compat",[l9n]:"fire-auth",[c9n]:"fire-auth-compat",[f9n]:"fire-rtdb",[d9n]:"fire-rtdb-compat",[h9n]:"fire-fn",[p9n]:"fire-fn-compat",[m9n]:"fire-iid",[g9n]:"fire-iid-compat",[y9n]:"fire-fcm",[v9n]:"fire-fcm-compat",[b9n]:"fire-perf",[_9n]:"fire-perf-compat",[w9n]:"fire-rc",[x9n]:"fire-rc-compat",[E9n]:"fire-gcs",[T9n]:"fire-gcs-compat",[S9n]:"fire-fst",[C9n]:"fire-fst-compat",[A9n]:"fire-vertex","fire-js":"fire-js",[I9n]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7=new Map,N9n=new Map,EZ=new Map;function ACe(e,t){try{e.container.addComponent(t)}catch(n){_x.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function n1(e){const t=e.name;if(EZ.has(t))return _x.debug(`There were multiple attempts to register component ${t}.`),!1;EZ.set(t,e);for(const n of _7.values())ACe(n,e);for(const n of N9n.values())ACe(n,e);return!0}function LC(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function c0(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9n={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bv=new $C("app","Firebase",P9n);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9n{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new q0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw bv.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=k9n;function iKe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:xZ,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw bv.create("bad-app-name",{appName:String(i)});if(n||(n=eKe()),!n)throw bv.create("no-options");const s=_7.get(i);if(s){if(G6(n,s.options)&&G6(r,s.config))return s;throw bv.create("duplicate-app",{appName:i})}const o=new j$n(i);for(const u of EZ.values())o.addComponent(u);const a=new D9n(n,r,o);return _7.set(i,a),a}function Hfe(e=xZ){const t=_7.get(e);if(!t&&e===xZ&&eKe())return iKe();if(!t)throw bv.create("no-app",{appName:e});return t}function zh(e,t,n){var r;let i=(r=R9n[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),_x.warn(a.join(" "));return}n1(new q0(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9n="firebase-heartbeat-database",$9n=1,Y6="firebase-heartbeat-store";let SG=null;function sKe(){return SG||(SG=Z$n(O9n,$9n,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Y6)}catch(n){console.warn(n)}}}}).catch(e=>{throw bv.create("idb-open",{originalErrorMessage:e.message})})),SG}async function L9n(e){try{const n=(await sKe()).transaction(Y6),r=await n.objectStore(Y6).get(oKe(e));return await n.done,r}catch(t){if(t instanceof pm)_x.warn(t.message);else{const n=bv.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});_x.warn(n.message)}}}async function CCe(e,t){try{const r=(await sKe()).transaction(Y6,"readwrite");await r.objectStore(Y6).put(t,oKe(e)),await r.done}catch(n){if(n instanceof pm)_x.warn(n.message);else{const r=bv.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_x.warn(r.message)}}}function oKe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9n=1024,F9n=30*24*60*60*1e3;class B9n{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U9n(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ICe();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=F9n}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ICe(),{heartbeatsToSend:r,unsentEntries:i}=j9n(this._heartbeatsCache.heartbeats),s=b7(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ICe(){return new Date().toISOString().substring(0,10)}function j9n(e,t=M9n){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),kCe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kCe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class U9n{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zfe()?E$n().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await L9n(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return CCe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return CCe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function kCe(e){return b7(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9n(e){n1(new q0("platform-logger",t=>new n9n(t),"PRIVATE")),n1(new q0("heartbeat",t=>new B9n(t),"PRIVATE")),zh(wZ,SCe,e),zh(wZ,SCe,"esm2017"),zh("fire-js","")}z9n("");function aKe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const V9n=aKe,uKe=new $C("auth","Firebase",aKe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7=new Jj("@firebase/auth");function H9n(e,...t){w7.logLevel<=Dr.WARN&&w7.warn(`Auth (${m2}): ${e}`,...t)}function MO(e,...t){w7.logLevel<=Dr.ERROR&&w7.error(`Auth (${m2}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(e,...t){throw Wfe(e,...t)}function Vh(e,...t){return Wfe(e,...t)}function qfe(e,t,n){const r=Object.assign(Object.assign({},V9n()),{[t]:n});return new $C("auth","Firebase",r).create(t,{appName:e.name})}function _v(e){return qfe(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q9n(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&W0(e,"argument-error"),qfe(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wfe(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return uKe.create(e,...t)}function Rn(e,t,...n){if(!e)throw Wfe(t,...n)}function pg(e){const t="INTERNAL ASSERTION FAILED: "+e;throw MO(t),new Error(t)}function r1(e,t){e||pg(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TZ(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function W9n(){return RCe()==="http:"||RCe()==="https:"}function RCe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9n(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W9n()||b$n()||"connection"in navigator)?navigator.onLine:!0}function Y9n(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(t,n){this.shortDelay=t,this.longDelay=n,r1(n>t,"Short delay should be less than long delay!"),this.isMobile=y$n()||_$n()}get(){return G9n()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gfe(e,t){r1(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lKe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9n={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9n=new Y5(3e4,6e4);function Zj(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function MC(e,t,n,r,i={}){return cKe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=G5(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),lKe.fetch()(dKe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function cKe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},K9n),t);try{const i=new Q9n(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw lD(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw lD(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw lD(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw lD(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw qfe(e,c,l);W0(e,c)}}catch(i){if(i instanceof pm)throw i;W0(e,"network-request-failed",{message:String(i)})}}async function fKe(e,t,n,r,i={}){const s=await MC(e,t,n,r,i);return"mfaPendingCredential"in s&&W0(e,"multi-factor-auth-required",{_serverResponse:s}),s}function dKe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Gfe(e.config,i):`${e.config.apiScheme}://${i}`}class Q9n{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vh(this.auth,"network-request-failed")),X9n.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lD(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vh(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J9n(e,t){return MC(e,"POST","/v1/accounts:delete",t)}async function hKe(e,t){return MC(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Z9n(e,t=!1){const n=es(e),r=await n.getIdToken(t),i=Yfe(r);Rn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:uk(AG(i.auth_time)),issuedAtTime:uk(AG(i.iat)),expirationTime:uk(AG(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function AG(e){return Number(e)*1e3}function Yfe(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return MO("JWT malformed, contained fewer than 3 sections"),null;try{const i=QYe(n);return i?JSON.parse(i):(MO("Failed to decode base64 JWT payload"),null)}catch(i){return MO("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function NCe(e){const t=Yfe(e);return Rn(t,"internal-error"),Rn(typeof t.exp<"u","internal-error"),Rn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K6(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof pm&&eLn(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function eLn({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tLn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uk(this.lastLoginAt),this.creationTime=uk(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x7(e){var t;const n=e.auth,r=await e.getIdToken(),i=await K6(e,hKe(n,{idToken:r}));Rn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?pKe(s.providerUserInfo):[],a=rLn(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new SZ(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function nLn(e){const t=es(e);await x7(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function rLn(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function pKe(e){return e.map(t=>{var{providerId:n}=t,r=hR(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iLn(e,t){const n=await cKe(e,{},async()=>{const r=G5({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=dKe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",lKe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sLn(e,t){return MC(e,"POST","/v2/accounts:revokeToken",Zj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Rn(t.idToken,"internal-error"),Rn(typeof t.idToken<"u","internal-error"),Rn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):NCe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Rn(t.length!==0,"internal-error");const n=NCe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Rn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await iLn(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qT;return r&&(Rn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Rn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Rn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qT,this.toJSON())}_performRefresh(){return pg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(e,t){Rn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class mg{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=hR(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tLn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new SZ(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await K6(this,this.stsTokenManager.getToken(this.auth,t));return Rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Z9n(this,t)}reload(){return nLn(this)}_assign(t){this!==t&&(Rn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new mg(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await x7(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(c0(this.auth.app))return Promise.reject(_v(this.auth));const t=await this.getIdToken();return await K6(this,J9n(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:S,stsTokenManager:A}=n;Rn(b&&A,t,"internal-error");const C=qT.fromJSON(this.name,A);Rn(typeof b=="string",t,"internal-error"),uy(f,t.name),uy(d,t.name),Rn(typeof w=="boolean",t,"internal-error"),Rn(typeof x=="boolean",t,"internal-error"),uy(h,t.name),uy(p,t.name),uy(m,t.name),uy(g,t.name),uy(y,t.name),uy(v,t.name);const N=new mg({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(N.providerData=S.map(k=>Object.assign({},k))),g&&(N._redirectEventId=g),N}static async _fromIdTokenResponse(t,n,r=!1){const i=new qT;i.updateFromServerResponse(n);const s=new mg({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await x7(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Rn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?pKe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new qT;a.updateFromIdToken(r);const u=new mg({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new SZ(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PCe=new Map;function gg(e){r1(e instanceof Function,"Expected a class definition");let t=PCe.get(e);return t?(r1(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,PCe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mKe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}mKe.type="NONE";const DCe=mKe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(e,t,n){return`firebase:${e}:${t}:${n}`}class WT{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=FO(this.userKey,i.apiKey,s),this.fullPersistenceKey=FO("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?mg._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new WT(gg(DCe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||gg(DCe);const o=FO(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=mg._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new WT(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new WT(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OCe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vKe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gKe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_Ke(t))return"Blackberry";if(wKe(t))return"Webos";if(Kfe(t))return"Safari";if((t.includes("chrome/")||yKe(t))&&!t.includes("edge/"))return"Chrome";if(bKe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gKe(e=Xa()){return/firefox\//i.test(e)}function Kfe(e=Xa()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function yKe(e=Xa()){return/crios\//i.test(e)}function vKe(e=Xa()){return/iemobile/i.test(e)}function bKe(e=Xa()){return/android/i.test(e)}function _Ke(e=Xa()){return/blackberry/i.test(e)}function wKe(e=Xa()){return/webos/i.test(e)}function eU(e=Xa()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function oLn(e=Xa()){var t;return eU(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function aLn(){return w$n()&&document.documentMode===10}function xKe(e=Xa()){return eU(e)||bKe(e)||wKe(e)||_Ke(e)||/windows phone/i.test(e)||vKe(e)}function uLn(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EKe(e,t=[]){let n;switch(e){case"Browser":n=OCe(Xa());break;case"Worker":n=`${OCe(Xa())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${m2}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lLn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cLn(e,t={}){return MC(e,"GET","/v2/passwordPolicy",Zj(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fLn=6;class dLn{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fLn,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hLn{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $Ce(this),this.idTokenSubscription=new $Ce(this),this.beforeStateQueue=new lLn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uKe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=gg(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await WT.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await hKe(this,{idToken:t}),r=await mg._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(c0(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await x7(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Y9n()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(c0(this.app))return Promise.reject(_v(this));const n=t?es(t):null;return n&&Rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return c0(this.app)?Promise.reject(_v(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return c0(this.app)?Promise.reject(_v(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gg(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await cLn(this),n=new dLn(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new $C("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sLn(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&gg(t)||this._popupRedirectResolver;Rn(n,this,"argument-error"),this.redirectPersistenceManager=await WT.create(this,[gg(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=EKe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&H9n(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function K5(e){return es(e)}class $Ce{constructor(t){this.auth=t,this.observer=null,this.addObserver=I$n(n=>this.observer=n)}get next(){return Rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xfe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pLn(e){Xfe=e}function mLn(e){return Xfe.loadJS(e)}function gLn(){return Xfe.gapiScript}function yLn(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vLn(e,t){const n=LC(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(G6(s,t??{}))return i;W0(i,"already-initialized")}return n.initialize({options:t})}function bLn(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gg);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function _Ln(e,t,n){const r=K5(e);Rn(r._canInitEmulator,r,"emulator-config-failed"),Rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=TKe(t),{host:o,port:a}=wLn(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),xLn()}function TKe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wLn(e){const t=TKe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:LCe(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:LCe(o)}}}function LCe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function xLn(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SKe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return pg("not implemented")}_getIdTokenResponse(t){return pg("not implemented")}_linkToIdToken(t,n){return pg("not implemented")}_getReauthenticationResolver(t){return pg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(e,t){return fKe(e,"POST","/v1/accounts:signInWithIdp",Zj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ELn="http://localhost";class wx extends SKe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new wx(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):W0("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=hR(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new wx(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return GT(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,GT(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,GT(t,n)}buildRequest(){const t={requestUri:ELn,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=G5(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qfe{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5 extends Qfe{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py extends X5{constructor(){super("facebook.com")}static credential(t){return wx._fromParams({providerId:Py.PROVIDER_ID,signInMethod:Py.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Py.credentialFromTaggedObject(t)}static credentialFromError(t){return Py.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Py.credential(t.oauthAccessToken)}catch{return null}}}Py.FACEBOOK_SIGN_IN_METHOD="facebook.com";Py.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng extends X5{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return wx._fromParams({providerId:ng.PROVIDER_ID,signInMethod:ng.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return ng.credentialFromTaggedObject(t)}static credentialFromError(t){return ng.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ng.credential(n,r)}catch{return null}}}ng.GOOGLE_SIGN_IN_METHOD="google.com";ng.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy extends X5{constructor(){super("github.com")}static credential(t){return wx._fromParams({providerId:Dy.PROVIDER_ID,signInMethod:Dy.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dy.credentialFromTaggedObject(t)}static credentialFromError(t){return Dy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Dy.credential(t.oauthAccessToken)}catch{return null}}}Dy.GITHUB_SIGN_IN_METHOD="github.com";Dy.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy extends X5{constructor(){super("twitter.com")}static credential(t,n){return wx._fromParams({providerId:Oy.PROVIDER_ID,signInMethod:Oy.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Oy.credentialFromTaggedObject(t)}static credentialFromError(t){return Oy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Oy.credential(n,r)}catch{return null}}}Oy.TWITTER_SIGN_IN_METHOD="twitter.com";Oy.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TLn(e,t){return fKe(e,"POST","/v1/accounts:signUp",Zj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await mg._fromIdTokenResponse(t,r,i),o=MCe(r);return new sb({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=MCe(r);return new sb({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function MCe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SLn(e){var t;if(c0(e.app))return Promise.reject(_v(e));const n=K5(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new sb({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await TLn(n,{returnSecureToken:!0}),i=await sb._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7 extends pm{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,E7.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new E7(t,n,r,i)}}function AKe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?E7._fromErrorAndOperation(e,s,t,r):s})}async function ALn(e,t,n=!1){const r=await K6(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return sb._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CLn(e,t,n=!1){const{auth:r}=e;if(c0(r.app))return Promise.reject(_v(r));const i="reauthenticate";try{const s=await K6(e,AKe(r,i,t,e),n);Rn(s.idToken,r,"internal-error");const o=Yfe(s.idToken);Rn(o,r,"internal-error");const{sub:a}=o;return Rn(e.uid===a,r,"user-mismatch"),sb._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&W0(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ILn(e,t,n=!1){if(c0(e.app))return Promise.reject(_v(e));const r="signIn",i=await AKe(e,r,t),s=await sb._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function kLn(e,t,n,r){return es(e).onIdTokenChanged(t,n,r)}function RLn(e,t,n){return es(e).beforeAuthStateChanged(t,n)}function NLn(e,t,n,r){return es(e).onAuthStateChanged(t,n,r)}function PLn(e){return es(e).signOut()}const T7="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CKe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(T7,"1"),this.storage.removeItem(T7),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DLn(){const e=Xa();return Kfe(e)||eU(e)}const OLn=1e3,$Ln=10;class IKe extends CKe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=DLn()&&uLn(),this.fallbackToPolling=xKe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);aLn()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,$Ln):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},OLn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}IKe.type="LOCAL";const LLn=IKe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kKe extends CKe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}kKe.type="SESSION";const RKe=kKe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MLn(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new tU(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await MLn(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tU.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jfe(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FLn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=Jfe("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(){return window}function BLn(e){S0().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NKe(){return typeof S0().WorkerGlobalScope<"u"&&typeof S0().importScripts=="function"}async function jLn(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ULn(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function zLn(){return NKe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PKe="firebaseLocalStorageDb",VLn=1,S7="firebaseLocalStorage",DKe="fbase_key";class Q5{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nU(e,t){return e.transaction([S7],t?"readwrite":"readonly").objectStore(S7)}function HLn(){const e=indexedDB.deleteDatabase(PKe);return new Q5(e).toPromise()}function AZ(){const e=indexedDB.open(PKe,VLn);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(S7,{keyPath:DKe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(S7)?t(r):(r.close(),await HLn(),t(await AZ()))})})}async function FCe(e,t,n){const r=nU(e,!0).put({[DKe]:t,value:n});return new Q5(r).toPromise()}async function qLn(e,t){const n=nU(e,!1).get(t),r=await new Q5(n).toPromise();return r===void 0?null:r.value}function BCe(e,t){const n=nU(e,!0).delete(t);return new Q5(n).toPromise()}const WLn=800,GLn=3;class OKe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await AZ(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>GLn)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NKe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tU._getInstance(zLn()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await jLn(),!this.activeServiceWorker)return;this.sender=new FLn(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ULn()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await AZ();return await FCe(t,T7,"1"),await BCe(t,T7),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>FCe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>qLn(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>BCe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=nU(i,!1).getAll();return new Q5(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WLn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OKe.type="LOCAL";const YLn=OKe;new Y5(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Ke(e,t){return t?gg(t):(Rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zfe extends SKe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return GT(t,this._buildIdpRequest())}_linkToIdToken(t,n){return GT(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return GT(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function KLn(e){return ILn(e.auth,new Zfe(e),e.bypassAuthState)}function XLn(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),CLn(n,new Zfe(e),e.bypassAuthState)}async function QLn(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),ALn(n,new Zfe(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LKe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return KLn;case"linkViaPopup":case"linkViaRedirect":return QLn;case"reauthViaPopup":case"reauthViaRedirect":return XLn;default:W0(this.auth,"internal-error")}}resolve(t){r1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){r1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JLn=new Y5(2e3,1e4);async function ZLn(e,t,n){if(c0(e.app))return Promise.reject(Vh(e,"operation-not-supported-in-this-environment"));const r=K5(e);q9n(e,t,Qfe);const i=$Ke(r,n);return new bw(r,"signInViaPopup",t,i).executeNotNull()}class bw extends LKe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,bw.currentPopupAction&&bw.currentPopupAction.cancel(),bw.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Rn(t,this.auth,"internal-error"),t}async onExecution(){r1(this.filter.length===1,"Popup operations only handle one event");const t=Jfe();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Vh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bw.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,JLn.get())};t()}}bw.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7n="pendingRedirect",BO=new Map;class t7n extends LKe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=BO.get(this.auth._key());if(!t){try{const r=await n7n(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}BO.set(this.auth._key(),t)}return this.bypassAuthState||BO.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function n7n(e,t){const n=s7n(t),r=i7n(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function r7n(e,t){BO.set(e._key(),t)}function i7n(e){return gg(e._redirectPersistence)}function s7n(e){return FO(e7n,e.config.apiKey,e.name)}async function o7n(e,t,n=!1){if(c0(e.app))return Promise.reject(_v(e));const r=K5(e),i=$Ke(r,t),o=await new t7n(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7n=10*60*1e3;class u7n{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!l7n(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!MKe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vh(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=a7n&&this.cachedEventUids.clear(),this.cachedEventUids.has(jCe(t))}saveEventToCache(t){this.cachedEventUids.add(jCe(t)),this.lastProcessedEventTime=Date.now()}}function jCe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function MKe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function l7n(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MKe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c7n(e,t={}){return MC(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7n=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d7n=/^https?/;async function h7n(e){if(e.config.emulator)return;const{authorizedDomains:t}=await c7n(e);for(const n of t)try{if(p7n(n))return}catch{}W0(e,"unauthorized-domain")}function p7n(e){const t=TZ(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!d7n.test(n))return!1;if(f7n.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7n=new Y5(3e4,6e4);function UCe(){const e=S0().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function g7n(e){return new Promise((t,n)=>{var r,i,s;function o(){UCe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{UCe(),n(Vh(e,"network-request-failed"))},timeout:m7n.get()})}if(!((i=(r=S0().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=S0().gapi)===null||s===void 0)&&s.load)o();else{const a=yLn("iframefcb");return S0()[a]=()=>{gapi.load?o():n(Vh(e,"network-request-failed"))},mLn(`${gLn()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw jO=null,t})}let jO=null;function y7n(e){return jO=jO||g7n(e),jO}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7n=new Y5(5e3,15e3),b7n="__/auth/iframe",_7n="emulator/auth/iframe",w7n={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},x7n=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E7n(e){const t=e.config;Rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Gfe(t,_7n):`https://${e.config.authDomain}/${b7n}`,r={apiKey:t.apiKey,appName:e.name,v:m2},i=x7n.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${G5(r).slice(1)}`}async function T7n(e){const t=await y7n(e),n=S0().gapi;return Rn(n,e,"internal-error"),t.open({where:document.body,url:E7n(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w7n,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Vh(e,"network-request-failed"),a=S0().setTimeout(()=>{s(o)},v7n.get());function u(){S0().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7n={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A7n=500,C7n=600,I7n="_blank",k7n="http://localhost";class zCe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function R7n(e,t,n,r=A7n,i=C7n){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},S7n),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Xa().toLowerCase();n&&(a=yKe(l)?I7n:n),gKe(l)&&(t=t||k7n,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(oLn(l)&&a!=="_self")return N7n(t||"",a),new zCe(null);const f=window.open(t||"",a,c);Rn(f,e,"popup-blocked");try{f.focus()}catch{}return new zCe(f)}function N7n(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7n="__/auth/handler",D7n="emulator/auth/handler",O7n=encodeURIComponent("fac");async function VCe(e,t,n,r,i,s){Rn(e.config.authDomain,e,"auth-domain-config-required"),Rn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:m2,eventId:i};if(t instanceof Qfe){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",C$n(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof X5){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${O7n}=${encodeURIComponent(u)}`:"";return`${$7n(e)}?${G5(a).slice(1)}${l}`}function $7n({config:e}){return e.emulator?Gfe(e,D7n):`https://${e.authDomain}/${P7n}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CG="webStorageSupport";class L7n{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RKe,this._completeRedirectFn=o7n,this._overrideRedirectResult=r7n}async _openPopup(t,n,r,i){var s;r1((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await VCe(t,n,r,TZ(),i);return R7n(t,o,Jfe())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await VCe(t,n,r,TZ(),i);return BLn(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(r1(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await T7n(t),r=new u7n(t);return n.register("authEvent",i=>(Rn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(CG,{type:CG},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[CG];o!==void 0&&n(!!o),W0(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=h7n(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return xKe()||Kfe()||eU()}}const FKe=L7n;var HCe="@firebase/auth",qCe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7n{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7n(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function B7n(e){n1(new q0("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Rn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EKe(e)},l=new hLn(r,i,s,u);return bLn(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),n1(new q0("auth-internal",t=>{const n=K5(t.getProvider("auth").getImmediate());return(r=>new M7n(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zh(HCe,qCe,F7n(e)),zh(HCe,qCe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7n=5*60,U7n=tKe("authIdTokenMaxAge")||j7n;let WCe=null;const z7n=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>U7n)return;const i=n==null?void 0:n.token;WCe!==i&&(WCe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function A7(e=Hfe()){const t=LC(e,"auth");if(t.isInitialized())return t.getImmediate();const n=vLn(e,{popupRedirectResolver:FKe,persistence:[YLn,LLn,RKe]}),r=tKe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=z7n(s.toString());RLn(n,o,()=>o(n.currentUser)),kLn(n,a=>o(a))}}const i=ZYe("auth");return i&&_Ln(n,`http://${i}`),n}function V7n(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}pLn({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Vh("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",V7n().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});B7n("Browser");var H7n="firebase",q7n="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zh(H7n,q7n,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BKe="firebasestorage.googleapis.com",jKe="storageBucket",W7n=2*60*1e3,G7n=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends pm{constructor(t,n,r=0){super(IG(t),`Firebase Storage: ${n} (${IG(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return IG(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Js;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Js||(Js={}));function IG(e){return"storage/"+e}function ede(){const e="An unknown error occurred, please check the error payload for server response.";return new Zs(Js.UNKNOWN,e)}function Y7n(e){return new Zs(Js.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function K7n(e){return new Zs(Js.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function X7n(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zs(Js.UNAUTHENTICATED,e)}function Q7n(){return new Zs(Js.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function J7n(e){return new Zs(Js.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Z7n(){return new Zs(Js.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eMn(){return new Zs(Js.CANCELED,"User canceled the upload/download.")}function tMn(e){return new Zs(Js.INVALID_URL,"Invalid URL '"+e+"'.")}function nMn(e){return new Zs(Js.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function rMn(){return new Zs(Js.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+jKe+"' property when initializing the app?")}function iMn(){return new Zs(Js.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sMn(){return new Zs(Js.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oMn(e){return new Zs(Js.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function CZ(e){return new Zs(Js.INVALID_ARGUMENT,e)}function UKe(){return new Zs(Js.APP_DELETED,"The Firebase app was deleted.")}function aMn(e){return new Zs(Js.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lk(e,t){return new Zs(Js.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function gI(e){throw new Zs(Js.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=fl.makeFromUrl(t,n)}catch{return new fl(t,"")}if(r.path==="")return r;throw nMn(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===BKe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const x=b[w],S=x.regex.exec(t);if(S){const A=S[x.indices.bucket];let C=S[x.indices.path];C||(C=""),r=new fl(A,C),x.postModify(r);break}}if(r==null)throw tMn(t);return r}}class uMn{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lMn(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function cMn(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fMn(e){return e!==void 0}function dMn(e){return typeof e=="object"&&!Array.isArray(e)}function tde(e){return typeof e=="string"||e instanceof String}function GCe(e){return nde()&&e instanceof Blob}function nde(){return typeof Blob<"u"}function IZ(e,t,n,r){if(r<t)throw CZ(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw CZ(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function zKe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ow;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Ow||(Ow={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hMn(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pMn{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new cD(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ow.NO_ERROR,u=s.getStatus();if(!a||hMn(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Ow.ABORT;r(!1,new cD(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new cD(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());fMn(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=ede();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?UKe():eMn();o(u)}else{const u=Z7n();o(u)}};this.canceled_?n(!1,new cD(!1,null,!0)):this.backoffId_=lMn(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&cMn(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cD{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function mMn(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function gMn(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function yMn(e,t){t&&(e["X-Firebase-GMPID"]=t)}function vMn(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function bMn(e,t,n,r,i,s,o=!0){const a=zKe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return yMn(l,t),mMn(l,n),gMn(l,s),vMn(l,r),new pMn(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Mn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wMn(...e){const t=_Mn();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(nde())return new Blob(e);throw new Zs(Js.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xMn(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EMn(e){if(typeof atob>"u")throw oMn("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kG{constructor(t,n){this.data=t,this.contentType=n||null}}function TMn(e,t){switch(e){case f0.RAW:return new kG(VKe(t));case f0.BASE64:case f0.BASE64URL:return new kG(HKe(e,t));case f0.DATA_URL:return new kG(AMn(t),CMn(t))}throw ede()}function VKe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function SMn(e){let t;try{t=decodeURIComponent(e)}catch{throw lk(f0.DATA_URL,"Malformed data URL.")}return VKe(t)}function HKe(e,t){switch(e){case f0.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw lk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case f0.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw lk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=EMn(t)}catch(i){throw i.message.includes("polyfill")?i:lk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class qKe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw lk(f0.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=IMn(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function AMn(e){const t=new qKe(e);return t.base64?HKe(f0.BASE64,t.rest):SMn(t.rest)}function CMn(e){return new qKe(e).contentType}function IMn(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(t,n){let r=0,i="";GCe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(GCe(this.data_)){const r=this.data_,i=xMn(r,t,n);return i===null?null:new $y(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new $y(r,!0)}}static getBlob(...t){if(nde()){const n=t.map(r=>r instanceof $y?r.data_:r);return new $y(wMn.apply(null,n))}else{const n=t.map(o=>tde(o)?TMn(f0.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new $y(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rde(e){let t;try{t=JSON.parse(e)}catch{return null}return dMn(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kMn(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function RMn(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function WKe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NMn(e,t){return t}class Zu{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||NMn}}let fD=null;function PMn(e){return!tde(e)||e.length<2?e:WKe(e)}function GKe(){if(fD)return fD;const e=[];e.push(new Zu("bucket")),e.push(new Zu("generation")),e.push(new Zu("metageneration")),e.push(new Zu("name","fullPath",!0));function t(s,o){return PMn(o)}const n=new Zu("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Zu("size");return i.xform=r,e.push(i),e.push(new Zu("timeCreated")),e.push(new Zu("updated")),e.push(new Zu("md5Hash",null,!0)),e.push(new Zu("cacheControl",null,!0)),e.push(new Zu("contentDisposition",null,!0)),e.push(new Zu("contentEncoding",null,!0)),e.push(new Zu("contentLanguage",null,!0)),e.push(new Zu("contentType",null,!0)),e.push(new Zu("metadata","customMetadata",!0)),fD=e,fD}function DMn(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new fl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function OMn(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return DMn(r,e),r}function YKe(e,t,n){const r=rde(t);return r===null?null:OMn(e,r,n)}function $Mn(e,t,n,r){const i=rde(t);if(i===null||!tde(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=J5(d,n,r),p=zKe({alt:"media",token:l});return h+p})[0]}function LMn(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YCe="prefixes",KCe="items";function MMn(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[YCe])for(const i of n[YCe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new fl(t,s));r.prefixes.push(o)}if(n[KCe])for(const i of n[KCe]){const s=e._makeStorageReference(new fl(t,i.name));r.items.push(s)}return r}function FMn(e,t,n){const r=rde(n);return r===null?null:MMn(e,t,r)}class rU{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ide(e){if(!e)throw ede()}function BMn(e,t){function n(r,i){const s=YKe(e,i,t);return ide(s!==null),s}return n}function jMn(e,t){function n(r,i){const s=FMn(e,t,i);return ide(s!==null),s}return n}function UMn(e,t){function n(r,i){const s=YKe(e,i,t);return ide(s!==null),$Mn(s,i,e.host,e._protocol)}return n}function sde(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Q7n():i=X7n():n.getStatus()===402?i=K7n(e.bucket):n.getStatus()===403?i=J7n(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function KKe(e){const t=sde(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=Y7n(e.path)),s.serverResponse=i.serverResponse,s}return n}function zMn(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=J5(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new rU(a,u,jMn(e,t.bucket),l);return c.urlParams=s,c.errorHandler=sde(t),c}function VMn(e,t,n){const r=t.fullServerUrl(),i=J5(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new rU(i,s,UMn(e,n),o);return a.errorHandler=KKe(t),a}function HMn(e,t){const n=t.fullServerUrl(),r=J5(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new rU(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=KKe(t),a}function qMn(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function WMn(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=qMn(null,t)),r}function GMn(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=WMn(t,r,i),c=LMn(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=$y.getBlob(f,r,d);if(h===null)throw iMn();const p={name:l.fullPath},m=J5(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new rU(m,g,BMn(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=sde(t),v}class YMn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ow.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ow.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ow.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw gI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gI("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw gI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class KMn extends YMn{initXhr(){this.xhr_.responseType="text"}}function iU(){return new KMn}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t,n){this._service=t,n instanceof fl?this._location=n:this._location=fl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new xx(t,n)}get root(){const t=new fl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WKe(this._location.path)}get storage(){return this._service}get parent(){const t=kMn(this._location.path);if(t===null)return null;const n=new fl(this._location.bucket,t);return new xx(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw aMn(t)}}function XMn(e,t,n){e._throwIfRoot("uploadBytes");const r=GMn(e.storage,e._location,GKe(),new $y(t,!0),n);return e.storage.makeRequestWithTokens(r,iU).then(i=>({metadata:i,ref:e}))}function QMn(e){const t={prefixes:[],items:[]};return XKe(e,t).then(()=>t)}async function XKe(e,t,n){const i=await JMn(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await XKe(e,t,i.nextPageToken)}function JMn(e,t){t!=null&&typeof t.maxResults=="number"&&IZ("options.maxResults",1,1e3,t.maxResults);const n=t,r=zMn(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,iU)}function ZMn(e){e._throwIfRoot("getDownloadURL");const t=VMn(e.storage,e._location,GKe());return e.storage.makeRequestWithTokens(t,iU).then(n=>{if(n===null)throw sMn();return n})}function eFn(e){e._throwIfRoot("deleteObject");const t=HMn(e.storage,e._location);return e.storage.makeRequestWithTokens(t,iU)}function tFn(e,t){const n=RMn(e._location.path,t),r=new fl(e._location.bucket,n);return new xx(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nFn(e){return/^[A-Za-z]+:\/\//.test(e)}function rFn(e,t){return new xx(e,t)}function QKe(e,t){if(e instanceof ode){const n=e;if(n._bucket==null)throw rMn();const r=new xx(n,n._bucket);return t!=null?QKe(r,t):r}else return t!==void 0?tFn(e,t):e}function iFn(e,t){if(t&&nFn(t)){if(e instanceof ode)return rFn(e,t);throw CZ("To use ref(service, url), the first argument must be a Storage instance.")}else return QKe(e,t)}function XCe(e,t){const n=t==null?void 0:t[jKe];return n==null?null:fl.makeFromBucketSpec(n,e)}function sFn(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:g$n(i,e.app.options.projectId))}class ode{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=BKe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=W7n,this._maxUploadRetryTime=G7n,this._requests=new Set,i!=null?this._bucket=fl.makeFromBucketSpec(i,this._host):this._bucket=XCe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=fl.makeFromBucketSpec(this._url,t):this._bucket=XCe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){IZ("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){IZ("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new xx(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new uMn(UKe());{const o=bMn(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const QCe="@firebase/storage",JCe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JKe="storage";function dD(e,t,n){return e=es(e),XMn(e,t,n)}function yI(e){return e=es(e),QMn(e)}function hD(e){return e=es(e),ZMn(e)}function ZCe(e){return e=es(e),eFn(e)}function Vc(e,t){return e=es(e),iFn(e,t)}function e3e(e=Hfe(),t){e=es(e);const r=LC(e,JKe).getImmediate({identifier:t}),i=m$n("storage");return i&&oFn(r,...i),r}function oFn(e,t,n,r={}){sFn(e,t,n,r)}function aFn(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new ode(n,r,i,t,m2)}function uFn(){n1(new q0(JKe,aFn,"PUBLIC").setMultipleInstances(!0)),zh(QCe,JCe,""),zh(QCe,JCe,"esm2017")}uFn();var t3e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $w,ZKe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,C){function N(){}N.prototype=C.prototype,A.D=C.prototype,A.prototype=new N,A.prototype.constructor=A,A.C=function(k,D,L){for(var O=Array(arguments.length-2),B=2;B<arguments.length;B++)O[B-2]=arguments[B];return C.prototype[D].apply(k,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,C,N){N||(N=0);var k=Array(16);if(typeof C=="string")for(var D=0;16>D;++D)k[D]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(D=0;16>D;++D)k[D]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=A.g[0],N=A.g[1],D=A.g[2];var L=A.g[3],O=C+(L^N&(D^L))+k[0]+3614090360&4294967295;C=N+(O<<7&4294967295|O>>>25),O=L+(D^C&(N^D))+k[1]+3905402710&4294967295,L=C+(O<<12&4294967295|O>>>20),O=D+(N^L&(C^N))+k[2]+606105819&4294967295,D=L+(O<<17&4294967295|O>>>15),O=N+(C^D&(L^C))+k[3]+3250441966&4294967295,N=D+(O<<22&4294967295|O>>>10),O=C+(L^N&(D^L))+k[4]+4118548399&4294967295,C=N+(O<<7&4294967295|O>>>25),O=L+(D^C&(N^D))+k[5]+1200080426&4294967295,L=C+(O<<12&4294967295|O>>>20),O=D+(N^L&(C^N))+k[6]+2821735955&4294967295,D=L+(O<<17&4294967295|O>>>15),O=N+(C^D&(L^C))+k[7]+4249261313&4294967295,N=D+(O<<22&4294967295|O>>>10),O=C+(L^N&(D^L))+k[8]+1770035416&4294967295,C=N+(O<<7&4294967295|O>>>25),O=L+(D^C&(N^D))+k[9]+2336552879&4294967295,L=C+(O<<12&4294967295|O>>>20),O=D+(N^L&(C^N))+k[10]+4294925233&4294967295,D=L+(O<<17&4294967295|O>>>15),O=N+(C^D&(L^C))+k[11]+2304563134&4294967295,N=D+(O<<22&4294967295|O>>>10),O=C+(L^N&(D^L))+k[12]+1804603682&4294967295,C=N+(O<<7&4294967295|O>>>25),O=L+(D^C&(N^D))+k[13]+4254626195&4294967295,L=C+(O<<12&4294967295|O>>>20),O=D+(N^L&(C^N))+k[14]+2792965006&4294967295,D=L+(O<<17&4294967295|O>>>15),O=N+(C^D&(L^C))+k[15]+1236535329&4294967295,N=D+(O<<22&4294967295|O>>>10),O=C+(D^L&(N^D))+k[1]+4129170786&4294967295,C=N+(O<<5&4294967295|O>>>27),O=L+(N^D&(C^N))+k[6]+3225465664&4294967295,L=C+(O<<9&4294967295|O>>>23),O=D+(C^N&(L^C))+k[11]+643717713&4294967295,D=L+(O<<14&4294967295|O>>>18),O=N+(L^C&(D^L))+k[0]+3921069994&4294967295,N=D+(O<<20&4294967295|O>>>12),O=C+(D^L&(N^D))+k[5]+3593408605&4294967295,C=N+(O<<5&4294967295|O>>>27),O=L+(N^D&(C^N))+k[10]+38016083&4294967295,L=C+(O<<9&4294967295|O>>>23),O=D+(C^N&(L^C))+k[15]+3634488961&4294967295,D=L+(O<<14&4294967295|O>>>18),O=N+(L^C&(D^L))+k[4]+3889429448&4294967295,N=D+(O<<20&4294967295|O>>>12),O=C+(D^L&(N^D))+k[9]+568446438&4294967295,C=N+(O<<5&4294967295|O>>>27),O=L+(N^D&(C^N))+k[14]+3275163606&4294967295,L=C+(O<<9&4294967295|O>>>23),O=D+(C^N&(L^C))+k[3]+4107603335&4294967295,D=L+(O<<14&4294967295|O>>>18),O=N+(L^C&(D^L))+k[8]+1163531501&4294967295,N=D+(O<<20&4294967295|O>>>12),O=C+(D^L&(N^D))+k[13]+2850285829&4294967295,C=N+(O<<5&4294967295|O>>>27),O=L+(N^D&(C^N))+k[2]+4243563512&4294967295,L=C+(O<<9&4294967295|O>>>23),O=D+(C^N&(L^C))+k[7]+1735328473&4294967295,D=L+(O<<14&4294967295|O>>>18),O=N+(L^C&(D^L))+k[12]+2368359562&4294967295,N=D+(O<<20&4294967295|O>>>12),O=C+(N^D^L)+k[5]+4294588738&4294967295,C=N+(O<<4&4294967295|O>>>28),O=L+(C^N^D)+k[8]+2272392833&4294967295,L=C+(O<<11&4294967295|O>>>21),O=D+(L^C^N)+k[11]+1839030562&4294967295,D=L+(O<<16&4294967295|O>>>16),O=N+(D^L^C)+k[14]+4259657740&4294967295,N=D+(O<<23&4294967295|O>>>9),O=C+(N^D^L)+k[1]+2763975236&4294967295,C=N+(O<<4&4294967295|O>>>28),O=L+(C^N^D)+k[4]+1272893353&4294967295,L=C+(O<<11&4294967295|O>>>21),O=D+(L^C^N)+k[7]+4139469664&4294967295,D=L+(O<<16&4294967295|O>>>16),O=N+(D^L^C)+k[10]+3200236656&4294967295,N=D+(O<<23&4294967295|O>>>9),O=C+(N^D^L)+k[13]+681279174&4294967295,C=N+(O<<4&4294967295|O>>>28),O=L+(C^N^D)+k[0]+3936430074&4294967295,L=C+(O<<11&4294967295|O>>>21),O=D+(L^C^N)+k[3]+3572445317&4294967295,D=L+(O<<16&4294967295|O>>>16),O=N+(D^L^C)+k[6]+76029189&4294967295,N=D+(O<<23&4294967295|O>>>9),O=C+(N^D^L)+k[9]+3654602809&4294967295,C=N+(O<<4&4294967295|O>>>28),O=L+(C^N^D)+k[12]+3873151461&4294967295,L=C+(O<<11&4294967295|O>>>21),O=D+(L^C^N)+k[15]+530742520&4294967295,D=L+(O<<16&4294967295|O>>>16),O=N+(D^L^C)+k[2]+3299628645&4294967295,N=D+(O<<23&4294967295|O>>>9),O=C+(D^(N|~L))+k[0]+4096336452&4294967295,C=N+(O<<6&4294967295|O>>>26),O=L+(N^(C|~D))+k[7]+1126891415&4294967295,L=C+(O<<10&4294967295|O>>>22),O=D+(C^(L|~N))+k[14]+2878612391&4294967295,D=L+(O<<15&4294967295|O>>>17),O=N+(L^(D|~C))+k[5]+4237533241&4294967295,N=D+(O<<21&4294967295|O>>>11),O=C+(D^(N|~L))+k[12]+1700485571&4294967295,C=N+(O<<6&4294967295|O>>>26),O=L+(N^(C|~D))+k[3]+2399980690&4294967295,L=C+(O<<10&4294967295|O>>>22),O=D+(C^(L|~N))+k[10]+4293915773&4294967295,D=L+(O<<15&4294967295|O>>>17),O=N+(L^(D|~C))+k[1]+2240044497&4294967295,N=D+(O<<21&4294967295|O>>>11),O=C+(D^(N|~L))+k[8]+1873313359&4294967295,C=N+(O<<6&4294967295|O>>>26),O=L+(N^(C|~D))+k[15]+4264355552&4294967295,L=C+(O<<10&4294967295|O>>>22),O=D+(C^(L|~N))+k[6]+2734768916&4294967295,D=L+(O<<15&4294967295|O>>>17),O=N+(L^(D|~C))+k[13]+1309151649&4294967295,N=D+(O<<21&4294967295|O>>>11),O=C+(D^(N|~L))+k[4]+4149444226&4294967295,C=N+(O<<6&4294967295|O>>>26),O=L+(N^(C|~D))+k[11]+3174756917&4294967295,L=C+(O<<10&4294967295|O>>>22),O=D+(C^(L|~N))+k[2]+718787259&4294967295,D=L+(O<<15&4294967295|O>>>17),O=N+(L^(D|~C))+k[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+L&4294967295}r.prototype.u=function(A,C){C===void 0&&(C=A.length);for(var N=C-this.blockSize,k=this.B,D=this.h,L=0;L<C;){if(D==0)for(;L<=N;)i(this,A,L),L+=this.blockSize;if(typeof A=="string"){for(;L<C;)if(k[D++]=A.charCodeAt(L++),D==this.blockSize){i(this,k),D=0;break}}else for(;L<C;)if(k[D++]=A[L++],D==this.blockSize){i(this,k),D=0;break}}this.h=D,this.o+=C},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;var N=8*this.o;for(C=A.length-8;C<A.length;++C)A[C]=N&255,N/=256;for(this.u(A),A=Array(16),C=N=0;4>C;++C)for(var k=0;32>k;k+=8)A[N++]=this.g[C]>>>k&255;return A};function s(A,C){var N=a;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=C(A)}function o(A,C){this.h=C;for(var N=[],k=!0,D=A.length-1;0<=D;D--){var L=A[D]|0;k&&L==C||(N[D]=L,k=!1)}this.g=N}var a={};function u(A){return-128<=A&&128>A?s(A,function(C){return new o([C|0],0>C?-1:0)}):new o([A|0],0>A?-1:0)}function l(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return g(l(-A));for(var C=[],N=1,k=0;A>=N;k++)C[k]=A/N|0,N*=4294967296;return new o(C,0)}function c(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return g(c(A.substring(1),C));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=l(Math.pow(C,8)),k=f,D=0;D<A.length;D+=8){var L=Math.min(8,A.length-D),O=parseInt(A.substring(D,D+L),C);8>L?(L=l(Math.pow(C,L)),k=k.j(L).add(l(O))):(k=k.j(N),k=k.add(l(O)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var A=0,C=1,N=0;N<this.g.length;N++){var k=this.i(N);A+=(0<=k?k:4294967296+k)*C,C*=4294967296}return A},e.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(p(this))return"0";if(m(this))return"-"+g(this).toString(A);for(var C=l(Math.pow(A,6)),N=this,k="";;){var D=w(N,C).g;N=y(N,D.j(C));var L=((0<N.g.length?N.g[0]:N.h)>>>0).toString(A);if(N=D,p(N))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},e.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function p(A){if(A.h!=0)return!1;for(var C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function m(A){return A.h==-1}e.l=function(A){return A=y(this,A),m(A)?-1:p(A)?0:1};function g(A){for(var C=A.g.length,N=[],k=0;k<C;k++)N[k]=~A.g[k];return new o(N,~A.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(A){for(var C=Math.max(this.g.length,A.g.length),N=[],k=0,D=0;D<=C;D++){var L=k+(this.i(D)&65535)+(A.i(D)&65535),O=(L>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);k=O>>>16,L&=65535,O&=65535,N[D]=O<<16|L}return new o(N,N[N.length-1]&-2147483648?-1:0)};function y(A,C){return A.add(g(C))}e.j=function(A){if(p(this)||p(A))return f;if(m(this))return m(A)?g(this).j(g(A)):g(g(this).j(A));if(m(A))return g(this.j(g(A)));if(0>this.l(h)&&0>A.l(h))return l(this.m()*A.m());for(var C=this.g.length+A.g.length,N=[],k=0;k<2*C;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<A.g.length;D++){var L=this.i(k)>>>16,O=this.i(k)&65535,B=A.i(D)>>>16,q=A.i(D)&65535;N[2*k+2*D]+=O*q,v(N,2*k+2*D),N[2*k+2*D+1]+=L*q,v(N,2*k+2*D+1),N[2*k+2*D+1]+=O*B,v(N,2*k+2*D+1),N[2*k+2*D+2]+=L*B,v(N,2*k+2*D+2)}for(k=0;k<C;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=C;k<2*C;k++)N[k]=0;return new o(N,0)};function v(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function b(A,C){this.g=A,this.h=C}function w(A,C){if(p(C))throw Error("division by zero");if(p(A))return new b(f,f);if(m(A))return C=w(g(A),C),new b(g(C.g),g(C.h));if(m(C))return C=w(A,g(C)),new b(g(C.g),C.h);if(30<A.g.length){if(m(A)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var N=d,k=C;0>=k.l(A);)N=x(N),k=x(k);var D=S(N,1),L=S(k,1);for(k=S(k,2),N=S(N,2);!p(k);){var O=L.add(k);0>=O.l(A)&&(D=D.add(N),L=O),k=S(k,1),N=S(N,1)}return C=y(A,D.j(C)),new b(D,C)}for(D=f;0<=A.l(C);){for(N=Math.max(1,Math.floor(A.m()/C.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=l(N),O=L.j(C);m(O)||0<O.l(A);)N-=k,L=l(N),O=L.j(C);p(L)&&(L=d),D=D.add(L),A=y(A,O)}return new b(D,A)}e.A=function(A){return w(this,A).h},e.and=function(A){for(var C=Math.max(this.g.length,A.g.length),N=[],k=0;k<C;k++)N[k]=this.i(k)&A.i(k);return new o(N,this.h&A.h)},e.or=function(A){for(var C=Math.max(this.g.length,A.g.length),N=[],k=0;k<C;k++)N[k]=this.i(k)|A.i(k);return new o(N,this.h|A.h)},e.xor=function(A){for(var C=Math.max(this.g.length,A.g.length),N=[],k=0;k<C;k++)N[k]=this.i(k)^A.i(k);return new o(N,this.h^A.h)};function x(A){for(var C=A.g.length+1,N=[],k=0;k<C;k++)N[k]=A.i(k)<<1|A.i(k-1)>>>31;return new o(N,A.h)}function S(A,C){var N=C>>5;C%=32;for(var k=A.g.length-N,D=[],L=0;L<k;L++)D[L]=0<C?A.i(L+N)>>>C|A.i(L+N+1)<<32-C:A.i(L+N);return new o(D,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZKe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,$w=o}).apply(typeof t3e<"u"?t3e:typeof self<"u"?self:typeof window<"u"?window:{});var pD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eXe,tXe,c4,nXe,UO,kZ,rXe,iXe,sXe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,U,Y){return I==Array.prototype||I==Object.prototype||(I[U]=Y.value),I};function n(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof pD=="object"&&pD];for(var U=0;U<I.length;++U){var Y=I[U];if(Y&&Y.Math==Math)return Y}throw Error("Cannot find global object")}var r=n(this);function i(I,U){if(U)e:{var Y=r;I=I.split(".");for(var ne=0;ne<I.length-1;ne++){var Ne=I[ne];if(!(Ne in Y))break e;Y=Y[Ne]}I=I[I.length-1],ne=Y[I],U=U(ne),U!=ne&&U!=null&&t(Y,I,{configurable:!0,writable:!0,value:U})}}function s(I,U){I instanceof String&&(I+="");var Y=0,ne=!1,Ne={next:function(){if(!ne&&Y<I.length){var Ve=Y++;return{value:U(Ve,I[Ve]),done:!1}}return ne=!0,{done:!0,value:void 0}}};return Ne[Symbol.iterator]=function(){return Ne},Ne}i("Array.prototype.values",function(I){return I||function(){return s(this,function(U,Y){return Y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(I){var U=typeof I;return U=U!="object"?U:I?Array.isArray(I)?"array":U:"null",U=="array"||U=="object"&&typeof I.length=="number"}function l(I){var U=typeof I;return U=="object"&&I!=null||U=="function"}function c(I,U,Y){return I.call.apply(I.bind,arguments)}function f(I,U,Y){if(!I)throw Error();if(2<arguments.length){var ne=Array.prototype.slice.call(arguments,2);return function(){var Ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ne,ne),I.apply(U,Ne)}}return function(){return I.apply(U,arguments)}}function d(I,U,Y){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(I,U){var Y=Array.prototype.slice.call(arguments,1);return function(){var ne=Y.slice();return ne.push.apply(ne,arguments),I.apply(this,ne)}}function p(I,U){function Y(){}Y.prototype=U.prototype,I.aa=U.prototype,I.prototype=new Y,I.prototype.constructor=I,I.Qb=function(ne,Ne,Ve){for(var Ct=Array(arguments.length-2),li=2;li<arguments.length;li++)Ct[li-2]=arguments[li];return U.prototype[Ne].apply(ne,Ct)}}function m(I){const U=I.length;if(0<U){const Y=Array(U);for(let ne=0;ne<U;ne++)Y[ne]=I[ne];return Y}return[]}function g(I,U){for(let Y=1;Y<arguments.length;Y++){const ne=arguments[Y];if(u(ne)){const Ne=I.length||0,Ve=ne.length||0;I.length=Ne+Ve;for(let Ct=0;Ct<Ve;Ct++)I[Ne+Ct]=ne[Ct]}else I.push(ne)}}class y{constructor(U,Y){this.i=U,this.j=Y,this.h=0,this.g=null}get(){let U;return 0<this.h?(this.h--,U=this.g,this.g=U.next,U.next=null):U=this.i(),U}}function v(I){return/^[\s\xa0]*$/.test(I)}function b(){var I=a.navigator;return I&&(I=I.userAgent)?I:""}function w(I){return w[" "](I),I}w[" "]=function(){};var x=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S(I,U,Y){for(const ne in I)U.call(Y,I[ne],ne,I)}function A(I,U){for(const Y in I)U.call(void 0,I[Y],Y,I)}function C(I){const U={};for(const Y in I)U[Y]=I[Y];return U}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(I,U){let Y,ne;for(let Ne=1;Ne<arguments.length;Ne++){ne=arguments[Ne];for(Y in ne)I[Y]=ne[Y];for(let Ve=0;Ve<N.length;Ve++)Y=N[Ve],Object.prototype.hasOwnProperty.call(ne,Y)&&(I[Y]=ne[Y])}}function D(I){var U=1;I=I.split(":");const Y=[];for(;0<U&&I.length;)Y.push(I.shift()),U--;return I.length&&Y.push(I.join(":")),Y}function L(I){a.setTimeout(()=>{throw I},0)}function O(){var I=J;let U=null;return I.g&&(U=I.g,I.g=I.g.next,I.g||(I.h=null),U.next=null),U}class B{constructor(){this.h=this.g=null}add(U,Y){const ne=q.get();ne.set(U,Y),this.h?this.h.next=ne:this.g=ne,this.h=ne}}var q=new y(()=>new H,I=>I.reset());class H{constructor(){this.next=this.g=this.h=null}set(U,Y){this.h=U,this.g=Y,this.next=null}reset(){this.next=this.g=this.h=null}}let G,K=!1,J=new B,F=()=>{const I=a.Promise.resolve(void 0);G=()=>{I.then(j)}};var j=()=>{for(var I;I=O();){try{I.h.call(I.g)}catch(Y){L(Y)}var U=q;U.j(I),100>U.h&&(U.h++,I.next=U.g,U.g=I)}K=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(I,U){this.type=I,this.g=this.target=U,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var I=!1,U=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const Y=()=>{};a.addEventListener("test",Y,U),a.removeEventListener("test",Y,U)}catch{}return I}();function Q(I,U){if(M.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var Y=this.type=I.type,ne=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=U,U=I.relatedTarget){if(x){e:{try{w(U.nodeName);var Ne=!0;break e}catch{}Ne=!1}Ne||(U=null)}}else Y=="mouseover"?U=I.fromElement:Y=="mouseout"&&(U=I.toElement);this.relatedTarget=U,ne?(this.clientX=ne.clientX!==void 0?ne.clientX:ne.pageX,this.clientY=ne.clientY!==void 0?ne.clientY:ne.pageY,this.screenX=ne.screenX||0,this.screenY=ne.screenY||0):(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType=typeof I.pointerType=="string"?I.pointerType:se[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&Q.aa.h.call(this)}}p(Q,M);var se={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),he=0;function Ce(I,U,Y,ne,Ne){this.listener=I,this.proxy=null,this.src=U,this.type=Y,this.capture=!!ne,this.ha=Ne,this.key=++he,this.da=this.fa=!1}function De(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function rt(I){this.src=I,this.g={},this.h=0}rt.prototype.add=function(I,U,Y,ne,Ne){var Ve=I.toString();I=this.g[Ve],I||(I=this.g[Ve]=[],this.h++);var Ct=Tt(I,U,ne,Ne);return-1<Ct?(U=I[Ct],Y||(U.fa=!1)):(U=new Ce(U,this.src,Ve,!!ne,Ne),U.fa=Y,I.push(U)),U};function Re(I,U){var Y=U.type;if(Y in I.g){var ne=I.g[Y],Ne=Array.prototype.indexOf.call(ne,U,void 0),Ve;(Ve=0<=Ne)&&Array.prototype.splice.call(ne,Ne,1),Ve&&(De(U),I.g[Y].length==0&&(delete I.g[Y],I.h--))}}function Tt(I,U,Y,ne){for(var Ne=0;Ne<I.length;++Ne){var Ve=I[Ne];if(!Ve.da&&Ve.listener==U&&Ve.capture==!!Y&&Ve.ha==ne)return Ne}return-1}var Ze="closure_lm_"+(1e6*Math.random()|0),It={};function mt(I,U,Y,ne,Ne){if(Array.isArray(U)){for(var Ve=0;Ve<U.length;Ve++)mt(I,U[Ve],Y,ne,Ne);return null}return Y=Rt(Y),I&&I[be]?I.K(U,Y,l(ne)?!!ne.capture:!1,Ne):Se(I,U,Y,!1,ne,Ne)}function Se(I,U,Y,ne,Ne,Ve){if(!U)throw Error("Invalid event type");var Ct=l(Ne)?!!Ne.capture:!!Ne,li=xe(I);if(li||(I[Ze]=li=new rt(I)),Y=li.add(U,Y,ne,Ct,Ve),Y.proxy)return Y;if(ne=Fe(),Y.proxy=ne,ne.src=I,ne.listener=Y,I.addEventListener)V||(Ne=Ct),Ne===void 0&&(Ne=!1),I.addEventListener(U.toString(),ne,Ne);else if(I.attachEvent)I.attachEvent(Nt(U.toString()),ne);else if(I.addListener&&I.removeListener)I.addListener(ne);else throw Error("addEventListener and attachEvent are unavailable.");return Y}function Fe(){function I(Y){return U.call(I.src,I.listener,Y)}const U=Je;return I}function st(I,U,Y,ne,Ne){if(Array.isArray(U))for(var Ve=0;Ve<U.length;Ve++)st(I,U[Ve],Y,ne,Ne);else ne=l(ne)?!!ne.capture:!!ne,Y=Rt(Y),I&&I[be]?(I=I.i,U=String(U).toString(),U in I.g&&(Ve=I.g[U],Y=Tt(Ve,Y,ne,Ne),-1<Y&&(De(Ve[Y]),Array.prototype.splice.call(Ve,Y,1),Ve.length==0&&(delete I.g[U],I.h--)))):I&&(I=xe(I))&&(U=I.g[U.toString()],I=-1,U&&(I=Tt(U,Y,ne,Ne)),(Y=-1<I?U[I]:null)&&yt(Y))}function yt(I){if(typeof I!="number"&&I&&!I.da){var U=I.src;if(U&&U[be])Re(U.i,I);else{var Y=I.type,ne=I.proxy;U.removeEventListener?U.removeEventListener(Y,ne,I.capture):U.detachEvent?U.detachEvent(Nt(Y),ne):U.addListener&&U.removeListener&&U.removeListener(ne),(Y=xe(U))?(Re(Y,I),Y.h==0&&(Y.src=null,U[Ze]=null)):De(I)}}}function Nt(I){return I in It?It[I]:It[I]="on"+I}function Je(I,U){if(I.da)I=!0;else{U=new Q(U,this);var Y=I.listener,ne=I.ha||I.src;I.fa&&yt(I),I=Y.call(ne,U)}return I}function xe(I){return I=I[Ze],I instanceof rt?I:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(I){return typeof I=="function"?I:(I[kt]||(I[kt]=function(U){return I.handleEvent(U)}),I[kt])}function Ee(){W.call(this),this.i=new rt(this),this.M=this,this.F=null}p(Ee,W),Ee.prototype[be]=!0,Ee.prototype.removeEventListener=function(I,U,Y,ne){st(this,I,U,Y,ne)};function Oe(I,U){var Y,ne=I.F;if(ne)for(Y=[];ne;ne=ne.F)Y.push(ne);if(I=I.M,ne=U.type||U,typeof U=="string")U=new M(U,I);else if(U instanceof M)U.target=U.target||I;else{var Ne=U;U=new M(ne,I),k(U,Ne)}if(Ne=!0,Y)for(var Ve=Y.length-1;0<=Ve;Ve--){var Ct=U.g=Y[Ve];Ne=ot(Ct,ne,!0,U)&&Ne}if(Ct=U.g=I,Ne=ot(Ct,ne,!0,U)&&Ne,Ne=ot(Ct,ne,!1,U)&&Ne,Y)for(Ve=0;Ve<Y.length;Ve++)Ct=U.g=Y[Ve],Ne=ot(Ct,ne,!1,U)&&Ne}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var I=this.i,U;for(U in I.g){for(var Y=I.g[U],ne=0;ne<Y.length;ne++)De(Y[ne]);delete I.g[U],I.h--}}this.F=null},Ee.prototype.K=function(I,U,Y,ne){return this.i.add(String(I),U,!1,Y,ne)},Ee.prototype.L=function(I,U,Y,ne){return this.i.add(String(I),U,!0,Y,ne)};function ot(I,U,Y,ne){if(U=I.i.g[String(U)],!U)return!0;U=U.concat();for(var Ne=!0,Ve=0;Ve<U.length;++Ve){var Ct=U[Ve];if(Ct&&!Ct.da&&Ct.capture==Y){var li=Ct.listener,Do=Ct.ha||Ct.src;Ct.fa&&Re(I.i,Ct),Ne=li.call(Do,ne)!==!1&&Ne}}return Ne&&!ne.defaultPrevented}function _t(I,U,Y){if(typeof I=="function")Y&&(I=d(I,Y));else if(I&&typeof I.handleEvent=="function")I=d(I.handleEvent,I);else throw Error("Invalid listener argument");return 2147483647<Number(U)?-1:a.setTimeout(I,U||0)}function jt(I){I.g=_t(()=>{I.g=null,I.i&&(I.i=!1,jt(I))},I.l);const U=I.h;I.h=null,I.m.apply(null,U)}class Un extends W{constructor(U,Y){super(),this.m=U,this.l=Y,this.h=null,this.i=!1,this.g=null}j(U){this.h=arguments,this.g?this.i=!0:jt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hr(I){W.call(this),this.h=I,this.g={}}p(hr,W);var Sr=[];function _i(I){S(I.g,function(U,Y){this.g.hasOwnProperty(Y)&&yt(U)},I),I.g={}}hr.prototype.N=function(){hr.aa.N.call(this),_i(this)},hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=a.JSON.stringify,zn=a.JSON.parse,pr=class{stringify(I){return a.JSON.stringify(I,void 0)}parse(I){return a.JSON.parse(I,void 0)}};function yr(){}yr.prototype.h=null;function ea(I){return I.h||(I.h=I.i())}function rs(){}var ms={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ls(){M.call(this,"d")}p(Ls,M);function Hr(){M.call(this,"c")}p(Hr,M);var gs={},Mc=null;function ta(){return Mc=Mc||new Ee}gs.La="serverreachability";function Vu(I){M.call(this,gs.La,I)}p(Vu,M);function Br(I){const U=ta();Oe(U,new Vu(U))}gs.STAT_EVENT="statevent";function ki(I,U){M.call(this,gs.STAT_EVENT,I),this.stat=U}p(ki,M);function mi(I){const U=ta();Oe(U,new ki(U,I))}gs.Ma="timingevent";function eo(I,U){M.call(this,gs.Ma,I),this.size=U}p(eo,M);function oi(I,U){if(typeof I!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){I()},U)}function Ri(){this.g=!0}Ri.prototype.xa=function(){this.g=!1};function me(I,U,Y,ne,Ne,Ve){I.info(function(){if(I.g)if(Ve)for(var Ct="",li=Ve.split("&"),Do=0;Do<li.length;Do++){var kr=li[Do].split("=");if(1<kr.length){var gi=kr[0];kr=kr[1];var wo=gi.split("_");Ct=2<=wo.length&&wo[1]=="type"?Ct+(gi+"="+kr+"&"):Ct+(gi+"=redacted&")}}else Ct=null;else Ct=Ve;return"XMLHTTP REQ ("+ne+") [attempt "+Ne+"]: "+U+`
`+Y+`
`+Ct})}function ue(I,U,Y,ne,Ne,Ve,Ct){I.info(function(){return"XMLHTTP RESP ("+ne+") [ attempt "+Ne+"]: "+U+`
`+Y+`
`+Ve+" "+Ct})}function ge(I,U,Y,ne){I.info(function(){return"XMLHTTP TEXT ("+U+"): "+Le(I,Y)+(ne?" "+ne:"")})}function Me(I,U){I.info(function(){return"TIMEOUT: "+U})}Ri.prototype.info=function(){};function Le(I,U){if(!I.g)return U;if(!U)return null;try{var Y=JSON.parse(U);if(Y){for(I=0;I<Y.length;I++)if(Array.isArray(Y[I])){var ne=Y[I];if(!(2>ne.length)){var Ne=ne[1];if(Array.isArray(Ne)&&!(1>Ne.length)){var Ve=Ne[0];if(Ve!="noop"&&Ve!="stop"&&Ve!="close")for(var Ct=1;Ct<Ne.length;Ct++)Ne[Ct]=""}}}}return Sn(Y)}catch{return U}}var wt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ut={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dn;function Zn(){}p(Zn,yr),Zn.prototype.g=function(){return new XMLHttpRequest},Zn.prototype.i=function(){return{}},dn=new Zn;function ur(I,U,Y,ne){this.j=I,this.i=U,this.l=Y,this.R=ne||1,this.U=new hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new On}function On(){this.i=null,this.g="",this.h=!1}var Ar={},ai={};function an(I,U,Y){I.L=1,I.v=er(ut(U)),I.m=Y,I.P=!0,Cr(I,null)}function Cr(I,U){I.F=Date.now(),Ni(I),I.A=ut(I.v);var Y=I.A,ne=I.R;Array.isArray(ne)||(ne=[String(ne)]),Gb(Y.i,"t",ne),I.C=0,Y=I.j.J,I.h=new On,I.g=hN(I.j,Y?U:null,!I.m),0<I.O&&(I.M=new Un(d(I.Y,I,I.g),I.O)),U=I.U,Y=I.g,ne=I.ca;var Ne="readystatechange";Array.isArray(Ne)||(Ne&&(Sr[0]=Ne.toString()),Ne=Sr);for(var Ve=0;Ve<Ne.length;Ve++){var Ct=mt(Y,Ne[Ve],ne||U.handleEvent,!1,U.h||U);if(!Ct)break;U.g[Ct.key]=Ct}U=I.H?C(I.H):{},I.m?(I.u||(I.u="POST"),U["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,U)):(I.u="GET",I.g.ea(I.A,I.u,null,U)),Br(),me(I.i,I.u,I.A,I.l,I.R,I.m)}ur.prototype.ca=function(I){I=I.target;const U=this.M;U&&xi(I)==3?U.j():this.Y(I)},ur.prototype.Y=function(I){try{if(I==this.g)e:{const wo=xi(this.g);var U=this.g.Ba();const Lf=this.g.Z();if(!(3>wo)&&(wo!=3||this.g&&(this.h.h||this.g.oa()||Po(this.g)))){this.J||wo!=4||U==7||(U==8||0>=Lf?Br(3):Br(2)),Pi(this);var Y=this.g.Z();this.X=Y;t:if(Jr(this)){var ne=Po(this.g);I="";var Ne=ne.length,Ve=xi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){is(this),ko(this);var Ct="";break t}this.h.i=new a.TextDecoder}for(U=0;U<Ne;U++)this.h.h=!0,I+=this.h.i.decode(ne[U],{stream:!(Ve&&U==Ne-1)});ne.length=0,this.h.g+=I,this.C=0,Ct=this.h.g}else Ct=this.g.oa();if(this.o=Y==200,ue(this.i,this.u,this.A,this.l,this.R,wo,Y),this.o){if(this.T&&!this.K){t:{if(this.g){var li,Do=this.g;if((li=Do.g?Do.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(li)){var kr=li;break t}}kr=null}if(Y=kr)ge(this.i,this.l,Y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ss(this,Y);else{this.o=!1,this.s=3,mi(12),is(this),ko(this);break e}}if(this.P){Y=!0;let $l;for(;!this.J&&this.C<Ct.length;)if($l=vr(this,Ct),$l==ai){wo==4&&(this.s=4,mi(14),Y=!1),ge(this.i,this.l,null,"[Incomplete Response]");break}else if($l==Ar){this.s=4,mi(15),ge(this.i,this.l,Ct,"[Invalid Chunk]"),Y=!1;break}else ge(this.i,this.l,$l,null),ss(this,$l);if(Jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wo!=4||Ct.length!=0||this.h.h||(this.s=1,mi(16),Y=!1),this.o=this.o&&Y,!Y)ge(this.i,this.l,Ct,"[Invalid Chunked Response]"),is(this),ko(this);else if(0<Ct.length&&!this.W){this.W=!0;var gi=this.j;gi.g==this&&gi.ba&&!gi.M&&(gi.j.info("Great, no buffering proxy detected. Bytes received: "+Ct.length),$f(gi),gi.M=!0,mi(11))}}else ge(this.i,this.l,Ct,null),ss(this,Ct);wo==4&&is(this),this.o&&!this.J&&(wo==4?Vi(this.j,this):(this.o=!1,Ni(this)))}else qd(this.g),Y==400&&0<Ct.indexOf("Unknown SID")?(this.s=3,mi(12)):(this.s=0,mi(13)),is(this),ko(this)}}}catch{}finally{}};function Jr(I){return I.g?I.u=="GET"&&I.L!=2&&I.j.Ca:!1}function vr(I,U){var Y=I.C,ne=U.indexOf(`
`,Y);return ne==-1?ai:(Y=Number(U.substring(Y,ne)),isNaN(Y)?Ar:(ne+=1,ne+Y>U.length?ai:(U=U.slice(ne,ne+Y),I.C=ne+Y,U)))}ur.prototype.cancel=function(){this.J=!0,is(this)};function Ni(I){I.S=Date.now()+I.I,bo(I,I.I)}function bo(I,U){if(I.B!=null)throw Error("WatchDog timer not null");I.B=oi(d(I.ba,I),U)}function Pi(I){I.B&&(a.clearTimeout(I.B),I.B=null)}ur.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(Me(this.i,this.A),this.L!=2&&(Br(),mi(17)),is(this),this.s=2,ko(this)):bo(this,this.S-I)};function ko(I){I.j.G==0||I.J||Vi(I.j,I)}function is(I){Pi(I);var U=I.M;U&&typeof U.ma=="function"&&U.ma(),I.M=null,_i(I.U),I.g&&(U=I.g,I.g=null,U.abort(),U.ma())}function ss(I,U){try{var Y=I.j;if(Y.G!=0&&(Y.g==I||Of(Y.h,I))){if(!I.K&&Of(Y.h,I)&&Y.G==3){try{var ne=Y.Da.g.parse(U)}catch{ne=null}if(Array.isArray(ne)&&ne.length==3){var Ne=ne;if(Ne[0]==0){e:if(!Y.u){if(Y.g)if(Y.g.F+3e3<I.F)M1(Y),Kb(Y);else break e;T2(Y),mi(18)}}else Y.za=Ne[1],0<Y.za-Y.T&&37500>Ne[2]&&Y.F&&Y.v==0&&!Y.C&&(Y.C=oi(d(Y.Za,Y),6e3));if(1>=Ol(Y.h)&&Y.ca){try{Y.ca()}catch{}Y.ca=void 0}}else Gd(Y,11)}else if((I.K||Y.g==I)&&M1(Y),!v(U))for(Ne=Y.Da.g.parse(U),U=0;U<Ne.length;U++){let kr=Ne[U];if(Y.T=kr[0],kr=kr[1],Y.G==2)if(kr[0]=="c"){Y.K=kr[1],Y.ia=kr[2];const gi=kr[3];gi!=null&&(Y.la=gi,Y.j.info("VER="+Y.la));const wo=kr[4];wo!=null&&(Y.Aa=wo,Y.j.info("SVER="+Y.Aa));const Lf=kr[5];Lf!=null&&typeof Lf=="number"&&0<Lf&&(ne=1.5*Lf,Y.L=ne,Y.j.info("backChannelRequestTimeoutMs_="+ne)),ne=Y;const $l=I.g;if($l){const e_=$l.g?$l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e_){var Ve=ne.h;Ve.g||e_.indexOf("spdy")==-1&&e_.indexOf("quic")==-1&&e_.indexOf("h2")==-1||(Ve.j=Ve.l,Ve.g=new Set,Ve.h&&(ee(Ve,Ve.h),Ve.h=null))}if(ne.D){const HC=$l.g?$l.g.getResponseHeader("X-HTTP-Session-Id"):null;HC&&(ne.ya=HC,Kt(ne.I,ne.D,HC))}}Y.G=3,Y.l&&Y.l.ua(),Y.ba&&(Y.R=Date.now()-I.F,Y.j.info("Handshake RTT: "+Y.R+"ms")),ne=Y;var Ct=I;if(ne.qa=S2(ne,ne.J?ne.ia:null,ne.W),Ct.K){pe(ne.h,Ct);var li=Ct,Do=ne.L;Do&&(li.I=Do),li.B&&(Pi(li),Ni(li)),ne.g=Ct}else fN(ne);0<Y.i.length&&Xb(Y)}else kr[0]!="stop"&&kr[0]!="close"||Gd(Y,7);else Y.G==3&&(kr[0]=="stop"||kr[0]=="close"?kr[0]=="stop"?Gd(Y,7):vm(Y):kr[0]!="noop"&&Y.l&&Y.l.ta(kr),Y.v=0)}}Br(4)}catch{}}var Ro=class{constructor(I,U){this.g=I,this.map=U}};function Ca(I){this.l=I||10,a.PerformanceNavigationTiming?(I=a.performance.getEntriesByType("navigation"),I=0<I.length&&(I[0].nextHopProtocol=="hq"||I[0].nextHopProtocol=="h2")):I=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _o(I){return I.h?!0:I.g?I.g.size>=I.j:!1}function Ol(I){return I.h?1:I.g?I.g.size:0}function Of(I,U){return I.h?I.h==U:I.g?I.g.has(U):!1}function ee(I,U){I.g?I.g.add(U):I.h=U}function pe(I,U){I.h&&I.h==U?I.h=null:I.g&&I.g.has(U)&&I.g.delete(U)}Ca.prototype.cancel=function(){if(this.i=oe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const I of this.g.values())I.cancel();this.g.clear()}};function oe(I){if(I.h!=null)return I.i.concat(I.h.D);if(I.g!=null&&I.g.size!==0){let U=I.i;for(const Y of I.g.values())U=U.concat(Y.D);return U}return m(I.i)}function we(I){if(I.V&&typeof I.V=="function")return I.V();if(typeof Map<"u"&&I instanceof Map||typeof Set<"u"&&I instanceof Set)return Array.from(I.values());if(typeof I=="string")return I.split("");if(u(I)){for(var U=[],Y=I.length,ne=0;ne<Y;ne++)U.push(I[ne]);return U}U=[],Y=0;for(ne in I)U[Y++]=I[ne];return U}function Ae(I){if(I.na&&typeof I.na=="function")return I.na();if(!I.V||typeof I.V!="function"){if(typeof Map<"u"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set<"u"&&I instanceof Set)){if(u(I)||typeof I=="string"){var U=[];I=I.length;for(var Y=0;Y<I;Y++)U.push(Y);return U}U=[],Y=0;for(const ne in I)U[Y++]=ne;return U}}}function _e(I,U){if(I.forEach&&typeof I.forEach=="function")I.forEach(U,void 0);else if(u(I)||typeof I=="string")Array.prototype.forEach.call(I,U,void 0);else for(var Y=Ae(I),ne=we(I),Ne=ne.length,Ve=0;Ve<Ne;Ve++)U.call(void 0,ne[Ve],Y&&Y[Ve],I)}var qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(I,U){if(I){I=I.split("&");for(var Y=0;Y<I.length;Y++){var ne=I[Y].indexOf("="),Ne=null;if(0<=ne){var Ve=I[Y].substring(0,ne);Ne=I[Y].substring(ne+1)}else Ve=I[Y];U(Ve,Ne?decodeURIComponent(Ne.replace(/\+/g," ")):"")}}}function at(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof at){this.h=I.h,vt(this,I.j),this.o=I.o,this.g=I.g,Lt(this,I.s),this.l=I.l;var U=I.i,Y=new Hu;Y.i=U.i,U.g&&(Y.g=new Map(U.g),Y.h=U.h),$n(this,Y),this.m=I.m}else I&&(U=String(I).match(qe))?(this.h=!1,vt(this,U[1]||"",!0),this.o=qr(U[2]||""),this.g=qr(U[3]||"",!0),Lt(this,U[4]),this.l=qr(U[5]||"",!0),$n(this,U[6]||"",!0),this.m=qr(U[7]||"")):(this.h=!1,this.i=new Hu(null,this.h))}at.prototype.toString=function(){var I=[],U=this.j;U&&I.push(br(U,Fc,!0),":");var Y=this.g;return(Y||U=="file")&&(I.push("//"),(U=this.o)&&I.push(br(U,Fc,!0),"@"),I.push(encodeURIComponent(String(Y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Y=this.s,Y!=null&&I.push(":",String(Y))),(Y=this.l)&&(this.g&&Y.charAt(0)!="/"&&I.push("/"),I.push(br(Y,Y.charAt(0)=="/"?$1:Ud,!0))),(Y=this.i.toString())&&I.push("?",Y),(Y=this.m)&&I.push("#",br(Y,Wb)),I.join("")};function ut(I){return new at(I)}function vt(I,U,Y){I.j=Y?qr(U,!0):U,I.j&&(I.j=I.j.replace(/:$/,""))}function Lt(I,U){if(U){if(U=Number(U),isNaN(U)||0>U)throw Error("Bad port number "+U);I.s=U}else I.s=null}function $n(I,U,Y){U instanceof Hu?(I.i=U,Yb(I.i,I.h)):(Y||(U=br(U,bp)),I.i=new Hu(U,I.h))}function Kt(I,U,Y){I.i.set(U,Y)}function er(I){return Kt(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function qr(I,U){return I?U?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function br(I,U,Y){return typeof I=="string"?(I=encodeURI(I).replace(U,No),Y&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function No(I){return I=I.charCodeAt(0),"%"+(I>>4&15).toString(16)+(I&15).toString(16)}var Fc=/[#\/\?@]/g,Ud=/[#\?:]/g,$1=/[#\?]/g,bp=/[#\?@]/g,Wb=/#/g;function Hu(I,U){this.h=this.g=null,this.i=I||null,this.j=!!U}function nu(I){I.g||(I.g=new Map,I.h=0,I.i&&it(I.i,function(U,Y){I.add(decodeURIComponent(U.replace(/\+/g," ")),Y)}))}e=Hu.prototype,e.add=function(I,U){nu(this),this.i=null,I=Vd(this,I);var Y=this.g.get(I);return Y||this.g.set(I,Y=[]),Y.push(U),this.h+=1,this};function zd(I,U){nu(I),U=Vd(I,U),I.g.has(U)&&(I.i=null,I.h-=I.g.get(U).length,I.g.delete(U))}function L1(I,U){return nu(I),U=Vd(I,U),I.g.has(U)}e.forEach=function(I,U){nu(this),this.g.forEach(function(Y,ne){Y.forEach(function(Ne){I.call(U,Ne,ne,this)},this)},this)},e.na=function(){nu(this);const I=Array.from(this.g.values()),U=Array.from(this.g.keys()),Y=[];for(let ne=0;ne<U.length;ne++){const Ne=I[ne];for(let Ve=0;Ve<Ne.length;Ve++)Y.push(U[ne])}return Y},e.V=function(I){nu(this);let U=[];if(typeof I=="string")L1(this,I)&&(U=U.concat(this.g.get(Vd(this,I))));else{I=Array.from(this.g.values());for(let Y=0;Y<I.length;Y++)U=U.concat(I[Y])}return U},e.set=function(I,U){return nu(this),this.i=null,I=Vd(this,I),L1(this,I)&&(this.h-=this.g.get(I).length),this.g.set(I,[U]),this.h+=1,this},e.get=function(I,U){return I?(I=this.V(I),0<I.length?String(I[0]):U):U};function Gb(I,U,Y){zd(I,U),0<Y.length&&(I.i=null,I.g.set(Vd(I,U),m(Y)),I.h+=Y.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],U=Array.from(this.g.keys());for(var Y=0;Y<U.length;Y++){var ne=U[Y];const Ve=encodeURIComponent(String(ne)),Ct=this.V(ne);for(ne=0;ne<Ct.length;ne++){var Ne=Ve;Ct[ne]!==""&&(Ne+="="+encodeURIComponent(String(Ct[ne]))),I.push(Ne)}}return this.i=I.join("&")};function Vd(I,U){return U=String(U),I.j&&(U=U.toLowerCase()),U}function Yb(I,U){U&&!I.j&&(nu(I),I.i=null,I.g.forEach(function(Y,ne){var Ne=ne.toLowerCase();ne!=Ne&&(zd(this,ne),Gb(this,Ne,Y))},I)),I.j=U}function _2(I,U){const Y=new Ri;if(a.Image){const ne=new Image;ne.onload=h(na,Y,"TestLoadImage: loaded",!0,U,ne),ne.onerror=h(na,Y,"TestLoadImage: error",!1,U,ne),ne.onabort=h(na,Y,"TestLoadImage: abort",!1,U,ne),ne.ontimeout=h(na,Y,"TestLoadImage: timeout",!1,U,ne),a.setTimeout(function(){ne.ontimeout&&ne.ontimeout()},1e4),ne.src=I}else U(!1)}function Hd(I,U){const Y=new Ri,ne=new AbortController,Ne=setTimeout(()=>{ne.abort(),na(Y,"TestPingServer: timeout",!1,U)},1e4);fetch(I,{signal:ne.signal}).then(Ve=>{clearTimeout(Ne),Ve.ok?na(Y,"TestPingServer: ok",!0,U):na(Y,"TestPingServer: server error",!1,U)}).catch(()=>{clearTimeout(Ne),na(Y,"TestPingServer: error",!1,U)})}function na(I,U,Y,ne,Ne){try{Ne&&(Ne.onload=null,Ne.onerror=null,Ne.onabort=null,Ne.ontimeout=null),ne(Y)}catch{}}function zC(){this.g=new pr}function w2(I,U,Y){const ne=Y||"";try{_e(I,function(Ne,Ve){let Ct=Ne;l(Ne)&&(Ct=Sn(Ne)),U.push(ne+Ve+"="+encodeURIComponent(Ct))})}catch(Ne){throw U.push(ne+"type="+encodeURIComponent("_badmap")),Ne}}function mm(I){this.l=I.Ub||null,this.j=I.eb||!1}p(mm,yr),mm.prototype.g=function(){return new gm(this.l,this.j)},mm.prototype.i=function(I){return function(){return I}}({});function gm(I,U){Ee.call(this),this.D=I,this.o=U,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(gm,Ee),e=gm.prototype,e.open=function(I,U){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=U,this.readyState=1,Ir(this)},e.send=function(I){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const U={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&(U.body=I),(this.D||a).fetch(new Request(this.A,U)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wr(this)),this.readyState=0},e.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;x2(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))};function x2(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}e.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var U=I.value?I.value:new Uint8Array(0);(U=this.v.decode(U,{stream:!I.done}))&&(this.response=this.responseText+=U)}I.done?Wr(this):Ir(this),this.readyState==3&&x2(this)}},e.Ra=function(I){this.g&&(this.response=this.responseText=I,Wr(this))},e.Qa=function(I){this.g&&(this.response=I,Wr(this))},e.ga=function(){this.g&&Wr(this)};function Wr(I){I.readyState=4,I.l=null,I.j=null,I.v=null,Ir(I)}e.setRequestHeader=function(I,U){this.u.append(I,U)},e.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],U=this.h.entries();for(var Y=U.next();!Y.done;)Y=Y.value,I.push(Y[0]+": "+Y[1]),Y=U.next();return I.join(`\r
`)};function Ir(I){I.onreadystatechange&&I.onreadystatechange.call(I)}Object.defineProperty(gm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(I){this.m=I?"include":"same-origin"}});function E2(I){let U="";return S(I,function(Y,ne){U+=ne,U+=":",U+=Y,U+=`\r
`}),U}function le(I,U,Y){e:{for(ne in Y){var ne=!1;break e}ne=!0}ne||(Y=E2(Y),typeof I=="string"?Y!=null&&encodeURIComponent(String(Y)):Kt(I,U,Y))}function ye(I){Ee.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ye,Ee);var Be=/^https?$/i,Ht=["POST","PUT"];e=ye.prototype,e.Ha=function(I){this.J=I},e.ea=function(I,U,Y,ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);U=U?U.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dn.g(),this.v=this.o?ea(this.o):ea(dn),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(U,String(I),!0),this.B=!1}catch(Ve){ir(this,Ve);return}if(I=Y||"",Y=new Map(this.headers),ne)if(Object.getPrototypeOf(ne)===Object.prototype)for(var Ne in ne)Y.set(Ne,ne[Ne]);else if(typeof ne.keys=="function"&&typeof ne.get=="function")for(const Ve of ne.keys())Y.set(Ve,ne.get(Ve));else throw Error("Unknown input type for opt_headers: "+String(ne));ne=Array.from(Y.keys()).find(Ve=>Ve.toLowerCase()=="content-type"),Ne=a.FormData&&I instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ht,U,void 0))||ne||Ne||Y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ve,Ct]of Y)this.g.setRequestHeader(Ve,Ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ui(this),this.u=!0,this.g.send(I),this.u=!1}catch(Ve){ir(this,Ve)}};function ir(I,U){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=U,I.m=5,Gr(I),un(I)}function Gr(I){I.A||(I.A=!0,Oe(I,"complete"),Oe(I,"error"))}e.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,Oe(this,"complete"),Oe(this,"abort"),un(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),ye.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?wi(this):this.bb())},e.bb=function(){wi(this)};function wi(I){if(I.h&&typeof o<"u"&&(!I.v[1]||xi(I)!=4||I.Z()!=2)){if(I.u&&xi(I)==4)_t(I.Ea,0,I);else if(Oe(I,"readystatechange"),xi(I)==4){I.h=!1;try{const Ct=I.Z();e:switch(Ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var U=!0;break e;default:U=!1}var Y;if(!(Y=U)){var ne;if(ne=Ct===0){var Ne=String(I.D).match(qe)[1]||null;!Ne&&a.self&&a.self.location&&(Ne=a.self.location.protocol.slice(0,-1)),ne=!Be.test(Ne?Ne.toLowerCase():"")}Y=ne}if(Y)Oe(I,"complete"),Oe(I,"success");else{I.m=6;try{var Ve=2<xi(I)?I.g.statusText:""}catch{Ve=""}I.l=Ve+" ["+I.Z()+"]",Gr(I)}}finally{un(I)}}}}function un(I,U){if(I.g){ui(I);const Y=I.g,ne=I.v[0]?()=>{}:null;I.g=null,I.v=null,U||Oe(I,"ready");try{Y.onreadystatechange=ne}catch{}}}function ui(I){I.I&&(a.clearTimeout(I.I),I.I=null)}e.isActive=function(){return!!this.g};function xi(I){return I.g?I.g.readyState:0}e.Z=function(){try{return 2<xi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(I){if(this.g){var U=this.g.responseText;return I&&U.indexOf(I)==0&&(U=U.substring(I.length)),zn(U)}};function Po(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch{return null}}function qd(I){const U={};I=(I.g&&2<=xi(I)&&I.g.getAllResponseHeaders()||"").split(`\r
`);for(let ne=0;ne<I.length;ne++){if(v(I[ne]))continue;var Y=D(I[ne]);const Ne=Y[0];if(Y=Y[1],typeof Y!="string")continue;Y=Y.trim();const Ve=U[Ne]||[];U[Ne]=Ve,Ve.push(Y)}A(U,function(ne){return ne.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(I,U,Y){return Y&&Y.internalChannelParams&&Y.internalChannelParams[I]||U}function ym(I){this.Aa=0,this.i=[],this.j=new Ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,I),this.cb=Ms("retryDelaySeedMs",1e4,I),this.Wa=Ms("forwardChannelMaxRetries",2,I),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new Ca(I&&I.concurrentRequestLimit),this.Da=new zC,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ym.prototype,e.la=8,e.G=1,e.connect=function(I,U,Y,ne){mi(0),this.W=I,this.H=U||{},Y&&ne!==void 0&&(this.H.OSID=Y,this.H.OAID=ne),this.F=this.X,this.I=S2(this,null,this.W),Xb(this)};function vm(I){if(VC(I),I.G==3){var U=I.U++,Y=ut(I.I);if(Kt(Y,"SID",I.K),Kt(Y,"RID",U),Kt(Y,"TYPE","terminate"),Qb(I,Y),U=new ur(I,I.j,U),U.L=2,U.v=er(ut(Y)),Y=!1,a.navigator&&a.navigator.sendBeacon)try{Y=a.navigator.sendBeacon(U.v.toString(),"")}catch{}!Y&&a.Image&&(new Image().src=U.v,Y=!0),Y||(U.g=hN(U.j,null),U.g.ea(U.v)),U.F=Date.now(),Ni(U)}dN(I)}function Kb(I){I.g&&($f(I),I.g.cancel(),I.g=null)}function VC(I){Kb(I),I.u&&(a.clearTimeout(I.u),I.u=null),M1(I),I.h.cancel(),I.s&&(typeof I.s=="number"&&a.clearTimeout(I.s),I.s=null)}function Xb(I){if(!_o(I.h)&&!I.s){I.s=!0;var U=I.Ga;G||F(),K||(G(),K=!0),J.add(U,I),I.B=0}}function cN(I,U){return Ol(I.h)>=I.h.j-(I.s?1:0)?!1:I.s?(I.i=U.D.concat(I.i),!0):I.G==1||I.G==2||I.B>=(I.Va?0:I.Wa)?!1:(I.s=oi(d(I.Ga,I,U),Wd(I,I.B)),I.B++,!0)}e.Ga=function(I){if(this.s)if(this.s=null,this.G==1){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const Ne=new ur(this,this.j,I);let Ve=this.o;if(this.S&&(Ve?(Ve=C(Ve),k(Ve,this.S)):Ve=this.S),this.m!==null||this.O||(Ne.H=Ve,Ve=null),this.P)e:{for(var U=0,Y=0;Y<this.i.length;Y++){t:{var ne=this.i[Y];if("__data__"in ne.map&&(ne=ne.map.__data__,typeof ne=="string")){ne=ne.length;break t}ne=void 0}if(ne===void 0)break;if(U+=ne,4096<U){U=Y;break e}if(U===4096||Y===this.i.length-1){U=Y+1;break e}}U=1e3}else U=1e3;U=qu(this,Ne,U),Y=ut(this.I),Kt(Y,"RID",I),Kt(Y,"CVER",22),this.D&&Kt(Y,"X-HTTP-Session-Id",this.D),Qb(this,Y),Ve&&(this.O?U="headers="+encodeURIComponent(String(E2(Ve)))+"&"+U:this.m&&le(Y,this.m,Ve)),ee(this.h,Ne),this.Ua&&Kt(Y,"TYPE","init"),this.P?(Kt(Y,"$req",U),Kt(Y,"SID","null"),Ne.T=!0,an(Ne,Y,null)):an(Ne,Y,U),this.G=2}}else this.G==3&&(I?ru(this,I):this.i.length==0||_o(this.h)||ru(this))};function ru(I,U){var Y;U?Y=U.l:Y=I.U++;const ne=ut(I.I);Kt(ne,"SID",I.K),Kt(ne,"RID",Y),Kt(ne,"AID",I.T),Qb(I,ne),I.m&&I.o&&le(ne,I.m,I.o),Y=new ur(I,I.j,Y,I.B+1),I.m===null&&(Y.H=I.o),U&&(I.i=U.D.concat(I.i)),U=qu(I,Y,1e3),Y.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),ee(I.h,Y),an(Y,ne,U)}function Qb(I,U){I.H&&S(I.H,function(Y,ne){Kt(U,ne,Y)}),I.l&&_e({},function(Y,ne){Kt(U,ne,Y)})}function qu(I,U,Y){Y=Math.min(I.i.length,Y);var ne=I.l?d(I.l.Na,I.l,I):null;e:{var Ne=I.i;let Ve=-1;for(;;){const Ct=["count="+Y];Ve==-1?0<Y?(Ve=Ne[0].g,Ct.push("ofs="+Ve)):Ve=0:Ct.push("ofs="+Ve);let li=!0;for(let Do=0;Do<Y;Do++){let kr=Ne[Do].g;const gi=Ne[Do].map;if(kr-=Ve,0>kr)Ve=Math.max(0,Ne[Do].g-100),li=!1;else try{w2(gi,Ct,"req"+kr+"_")}catch{ne&&ne(gi)}}if(li){ne=Ct.join("&");break e}}}return I=I.i.splice(0,Y),U.D=I,ne}function fN(I){if(!I.g&&!I.u){I.Y=1;var U=I.Fa;G||F(),K||(G(),K=!0),J.add(U,I),I.v=0}}function T2(I){return I.g||I.u||3<=I.v?!1:(I.Y++,I.u=oi(d(I.Fa,I),Wd(I,I.v)),I.v++,!0)}e.Fa=function(){if(this.u=null,Jb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=oi(d(this.ab,this),I)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mi(10),Kb(this),Jb(this))};function $f(I){I.A!=null&&(a.clearTimeout(I.A),I.A=null)}function Jb(I){I.g=new ur(I,I.j,"rpc",I.Y),I.m===null&&(I.g.H=I.o),I.g.O=0;var U=ut(I.qa);Kt(U,"RID","rpc"),Kt(U,"SID",I.K),Kt(U,"AID",I.T),Kt(U,"CI",I.F?"0":"1"),!I.F&&I.ja&&Kt(U,"TO",I.ja),Kt(U,"TYPE","xmlhttp"),Qb(I,U),I.m&&I.o&&le(U,I.m,I.o),I.L&&(I.g.I=I.L);var Y=I.g;I=I.ia,Y.L=1,Y.v=er(ut(U)),Y.m=null,Y.P=!0,Cr(Y,I)}e.Za=function(){this.C!=null&&(this.C=null,Kb(this),T2(this),mi(19))};function M1(I){I.C!=null&&(a.clearTimeout(I.C),I.C=null)}function Vi(I,U){var Y=null;if(I.g==U){M1(I),$f(I),I.g=null;var ne=2}else if(Of(I.h,U))Y=U.D,pe(I.h,U),ne=1;else return;if(I.G!=0){if(U.o)if(ne==1){Y=U.m?U.m.length:0,U=Date.now()-U.F;var Ne=I.B;ne=ta(),Oe(ne,new eo(ne,Y)),Xb(I)}else fN(I);else if(Ne=U.s,Ne==3||Ne==0&&0<U.X||!(ne==1&&cN(I,U)||ne==2&&T2(I)))switch(Y&&0<Y.length&&(U=I.h,U.i=U.i.concat(Y)),Ne){case 1:Gd(I,5);break;case 4:Gd(I,10);break;case 3:Gd(I,6);break;default:Gd(I,2)}}}function Wd(I,U){let Y=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||(Y*=2),Y*U}function Gd(I,U){if(I.j.info("Error code "+U),U==2){var Y=d(I.fb,I),ne=I.Xa;const Ne=!ne;ne=new at(ne||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vt(ne,"https"),er(ne),Ne?_2(ne.toString(),Y):Hd(ne.toString(),Y)}else mi(2);I.G=0,I.l&&I.l.sa(U),dN(I),VC(I)}e.fb=function(I){I?(this.j.info("Successfully pinged google.com"),mi(2)):(this.j.info("Failed to ping google.com"),mi(1))};function dN(I){if(I.G=0,I.ka=[],I.l){const U=oe(I.h);(U.length!=0||I.i.length!=0)&&(g(I.ka,U),g(I.ka,I.i),I.h.i.length=0,m(I.i),I.i.length=0),I.l.ra()}}function S2(I,U,Y){var ne=Y instanceof at?ut(Y):new at(Y);if(ne.g!="")U&&(ne.g=U+"."+ne.g),Lt(ne,ne.s);else{var Ne=a.location;ne=Ne.protocol,U=U?U+"."+Ne.hostname:Ne.hostname,Ne=+Ne.port;var Ve=new at(null);ne&&vt(Ve,ne),U&&(Ve.g=U),Ne&&Lt(Ve,Ne),Y&&(Ve.l=Y),ne=Ve}return Y=I.D,U=I.ya,Y&&U&&Kt(ne,Y,U),Kt(ne,"VER",I.la),Qb(I,ne),ne}function hN(I,U,Y){if(U&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return U=I.Ca&&!I.pa?new ye(new mm({eb:Y})):new ye(I.pa),U.Ha(I.J),U}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function pN(){}e=pN.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function A2(){}A2.prototype.g=function(I,U){return new iu(I,U)};function iu(I,U){Ee.call(this),this.g=new ym(U),this.l=I,this.h=U&&U.messageUrlParams||null,I=U&&U.messageHeaders||null,U&&U.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=U&&U.initMessageHeaders||null,U&&U.messageContentType&&(I?I["X-WebChannel-Content-Type"]=U.messageContentType:I={"X-WebChannel-Content-Type":U.messageContentType}),U&&U.va&&(I?I["X-WebChannel-Client-Profile"]=U.va:I={"X-WebChannel-Client-Profile":U.va}),this.g.S=I,(I=U&&U.Sb)&&!v(I)&&(this.g.m=I),this.v=U&&U.supportsCrossDomainXhr||!1,this.u=U&&U.sendRawJson||!1,(U=U&&U.httpSessionIdParam)&&!v(U)&&(this.g.D=U,I=this.h,I!==null&&U in I&&(I=this.h,U in I&&delete I[U])),this.j=new F1(this)}p(iu,Ee),iu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},iu.prototype.close=function(){vm(this.g)},iu.prototype.o=function(I){var U=this.g;if(typeof I=="string"){var Y={};Y.__data__=I,I=Y}else this.u&&(Y={},Y.__data__=Sn(I),I=Y);U.i.push(new Ro(U.Ya++,I)),U.G==3&&Xb(U)},iu.prototype.N=function(){this.g.l=null,delete this.j,vm(this.g),delete this.g,iu.aa.N.call(this)};function Zb(I){Ls.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var U=I.__sm__;if(U){e:{for(const Y in U){I=Y;break e}I=void 0}(this.i=I)&&(I=this.i,U=U!==null&&I in U?U[I]:void 0),this.data=U}else this.data=I}p(Zb,Ls);function bm(){Hr.call(this),this.status=1}p(bm,Hr);function F1(I){this.g=I}p(F1,pN),F1.prototype.ua=function(){Oe(this.g,"a")},F1.prototype.ta=function(I){Oe(this.g,new Zb(I))},F1.prototype.sa=function(I){Oe(this.g,new bm)},F1.prototype.ra=function(){Oe(this.g,"b")},A2.prototype.createWebChannel=A2.prototype.g,iu.prototype.send=iu.prototype.o,iu.prototype.open=iu.prototype.m,iu.prototype.close=iu.prototype.close,sXe=function(){return new A2},iXe=function(){return ta()},rXe=gs,kZ={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wt.NO_ERROR=0,wt.TIMEOUT=8,wt.HTTP_ERROR=6,UO=wt,Ut.COMPLETE="complete",nXe=Ut,rs.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,c4=rs,tXe=mm,ye.prototype.listenOnce=ye.prototype.L,ye.prototype.getLastError=ye.prototype.Ka,ye.prototype.getLastErrorCode=ye.prototype.Ba,ye.prototype.getStatus=ye.prototype.Z,ye.prototype.getResponseJson=ye.prototype.Oa,ye.prototype.getResponseText=ye.prototype.oa,ye.prototype.send=ye.prototype.ea,ye.prototype.setWithCredentials=ye.prototype.Ha,eXe=ye}).apply(typeof pD<"u"?pD:typeof self<"u"?self:typeof window<"u"?window:{});const n3e="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Wl.UNAUTHENTICATED=new Wl(null),Wl.GOOGLE_CREDENTIALS=new Wl("google-credentials-uid"),Wl.FIRST_PARTY=new Wl("first-party-uid"),Wl.MOCK_USER=new Wl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FC="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=new Jj("@firebase/firestore");function vI(){return Ex.logLevel}function Yt(e,...t){if(Ex.logLevel<=Dr.DEBUG){const n=t.map(ade);Ex.debug(`Firestore (${FC}): ${e}`,...n)}}function i1(e,...t){if(Ex.logLevel<=Dr.ERROR){const n=t.map(ade);Ex.error(`Firestore (${FC}): ${e}`,...n)}}function X6(e,...t){if(Ex.logLevel<=Dr.WARN){const n=t.map(ade);Ex.warn(`Firestore (${FC}): ${e}`,...n)}}function ade(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(e="Unexpected state"){const t=`FIRESTORE (${FC}) INTERNAL ASSERTION FAILED: `+e;throw i1(t),new Error(t)}function Ji(e,t){e||Nn()}function jn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mt extends pm{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lFn{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class cFn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Wl.UNAUTHENTICATED))}shutdown(){}}class fFn{constructor(t){this.t=t,this.currentUser=Wl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Ng;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ng,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ng)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ji(typeof r.accessToken=="string"),new lFn(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ji(t===null||typeof t=="string"),new Wl(t)}}class dFn{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Wl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hFn{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new dFn(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Wl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pFn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mFn{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Yt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ji(typeof n.token=="string"),this.R=n.token,new pFn(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gFn(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oXe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=gFn(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function fi(e,t){return e<t?-1:e>t?1:0}function uA(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Go.fromMillis(Date.now())}static fromDate(t){return Go.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Go(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?fi(this.nanoseconds,t.nanoseconds):fi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Bn(t)}static min(){return new Bn(new Go(0,0))}static max(){return new Bn(new Go(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(t,n,r){n===void 0?n=0:n>t.length&&Nn(),r===void 0?r=t.length-n:r>t.length-n&&Nn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Q6.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Q6?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ds extends Q6{construct(t,n,r){return new ds(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Mt(nt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ds(n)}static emptyPath(){return new ds([])}}const yFn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ja extends Q6{construct(t,n,r){return new ja(t,n,r)}static isValidIdentifier(t){return yFn.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ja.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ja(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Mt(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Mt(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Mt(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Mt(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ja(n)}static emptyPath(){return new ja([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.path=t}static fromPath(t){return new cn(ds.fromString(t))}static fromName(t){return new cn(ds.fromString(t).popFirst(5))}static empty(){return new cn(ds.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ds.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ds.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new cn(new ds(t.slice()))}}function vFn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Bn.fromTimestamp(r===1e9?new Go(n+1,0):new Go(n,r));return new ob(i,cn.empty(),t)}function bFn(e){return new ob(e.readTime,e.key,-1)}class ob{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new ob(Bn.min(),cn.empty(),-1)}static max(){return new ob(Bn.max(),cn.empty(),-1)}}function _Fn(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=cn.comparator(e.documentKey,t.documentKey),n!==0?n:fi(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wFn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xFn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(e){if(e.code!==nt.FAILED_PRECONDITION||e.message!==wFn)throw e;Yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new dt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof dt?n:dt.resolve(n)}catch(n){return dt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.reject(n)}static resolve(t){return new dt((n,r)=>{n(t)})}static reject(t){return new dt((n,r)=>{r(t)})}static waitFor(t){return new dt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=dt.resolve(!1);for(const r of t)n=n.next(i=>i?dt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new dt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new dt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function EFn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function eN(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ude{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}ude.oe=-1;function sU(e){return e==null}function C7(e){return e===0&&1/e==-1/0}function TFn(e){return typeof e=="number"&&Number.isInteger(e)&&!C7(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3e(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function g2(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function aXe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,n){this.comparator=t,this.root=n||Fa.EMPTY}insert(t,n){return new $s(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Fa.BLACK,null,null))}remove(t){return new $s(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fa.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new mD(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new mD(this.root,t,this.comparator,!1)}getReverseIterator(){return new mD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new mD(this.root,t,this.comparator,!0)}}class mD{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fa{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Fa.RED,this.left=i??Fa.EMPTY,this.right=s??Fa.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Fa(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fa.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Fa.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fa.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nn();const t=this.left.check();if(t!==this.right.check())throw Nn();return t+(this.isRed()?0:1)}}Fa.EMPTY=null,Fa.RED=!0,Fa.BLACK=!1;Fa.EMPTY=new class{constructor(){this.size=0}get key(){throw Nn()}get value(){throw Nn()}get color(){throw Nn()}get left(){throw Nn()}get right(){throw Nn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Fa(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t){this.comparator=t,this.data=new $s(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new i3e(this.data.getIterator())}getIteratorFrom(t){return new i3e(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ga)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ga(this.comparator);return n.data=t,n}}class i3e{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(t){this.fields=t,t.sort(ja.comparator)}static empty(){return new uf([])}unionWith(t){let n=new Ga(ja.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new uf(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return uA(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uXe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uXe("Invalid base64 string: "+s):s}}(t);return new Bu(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Bu(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return fi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Bu.EMPTY_BYTE_STRING=new Bu("");const SFn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ab(e){if(Ji(!!e),typeof e=="string"){let t=0;const n=SFn.exec(e);if(Ji(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:To(e.seconds),nanos:To(e.nanos)}}function To(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Tx(e){return typeof e=="string"?Bu.fromBase64String(e):Bu.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lde(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cde(e){const t=e.mapValue.fields.__previous_value__;return lde(t)?cde(t):t}function J6(e){const t=ab(e.mapValue.fields.__local_write_time__.timestampValue);return new Go(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AFn{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Z6{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Z6("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Z6&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Sx(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?lde(e)?4:CFn(e)?9007199254740991:10:Nn()}function G0(e,t){if(e===t)return!0;const n=Sx(e);if(n!==Sx(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return J6(e).isEqual(J6(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ab(i.timestampValue),a=ab(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return Tx(i.bytesValue).isEqual(Tx(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return To(i.geoPointValue.latitude)===To(s.geoPointValue.latitude)&&To(i.geoPointValue.longitude)===To(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return To(i.integerValue)===To(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=To(i.doubleValue),a=To(s.doubleValue);return o===a?C7(o)===C7(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return uA(e.arrayValue.values||[],t.arrayValue.values||[],G0);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(r3e(o)!==r3e(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!G0(o[u],a[u])))return!1;return!0}(e,t);default:return Nn()}}function eR(e,t){return(e.values||[]).find(n=>G0(n,t))!==void 0}function lA(e,t){if(e===t)return 0;const n=Sx(e),r=Sx(t);if(n!==r)return fi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fi(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=To(s.integerValue||s.doubleValue),u=To(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return s3e(e.timestampValue,t.timestampValue);case 4:return s3e(J6(e),J6(t));case 5:return fi(e.stringValue,t.stringValue);case 6:return function(s,o){const a=Tx(s),u=Tx(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=fi(a[l],u[l]);if(c!==0)return c}return fi(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=fi(To(s.latitude),To(o.latitude));return a!==0?a:fi(To(s.longitude),To(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=lA(a[l],u[l]);if(c)return c}return fi(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===gD.mapValue&&o===gD.mapValue)return 0;if(s===gD.mapValue)return 1;if(o===gD.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=fi(u[f],c[f]);if(d!==0)return d;const h=lA(a[u[f]],l[c[f]]);if(h!==0)return h}return fi(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Nn()}}function s3e(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return fi(e,t);const n=ab(e),r=ab(t),i=fi(n.seconds,r.seconds);return i!==0?i:fi(n.nanos,r.nanos)}function cA(e){return RZ(e)}function RZ(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=ab(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Tx(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return cn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=RZ(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${RZ(n.fields[o])}`;return i+"}"}(e.mapValue):Nn()}function o3e(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function NZ(e){return!!e&&"integerValue"in e}function fde(e){return!!e&&"arrayValue"in e}function a3e(e){return!!e&&"nullValue"in e}function u3e(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zO(e){return!!e&&"mapValue"in e}function ck(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return g2(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=ck(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ck(e.arrayValue.values[n]);return t}return Object.assign({},e)}function CFn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(t){this.value=t}static empty(){return new rc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!zO(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ck(n)}setAll(t){let n=ja.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ck(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());zO(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return G0(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];zO(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){g2(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new rc(ck(this.value))}}function lXe(e){const t=[];return g2(e.fields,(n,r)=>{const i=new ja([n]);if(zO(r)){const s=lXe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new uf(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Eu(t,0,Bn.min(),Bn.min(),Bn.min(),rc.empty(),0)}static newFoundDocument(t,n,r,i){return new Eu(t,1,n,Bn.min(),r,i,0)}static newNoDocument(t,n){return new Eu(t,2,n,Bn.min(),Bn.min(),rc.empty(),0)}static newUnknownDocument(t,n){return new Eu(t,3,n,Bn.min(),Bn.min(),rc.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Bn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=rc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=rc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Eu&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Eu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(t,n){this.position=t,this.inclusive=n}}function l3e(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=cn.comparator(cn.fromName(o.referenceValue),n.key):r=lA(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function c3e(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!G0(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(t,n="asc"){this.field=t,this.dir=n}}function IFn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cXe{}class Ao extends cXe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new RFn(t,n,r):n==="array-contains"?new DFn(t,r):n==="in"?new OFn(t,r):n==="not-in"?new $Fn(t,r):n==="array-contains-any"?new LFn(t,r):new Ao(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new NFn(t,r):new PFn(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lA(n,this.value)):n!==null&&Sx(this.value)===Sx(n)&&this.matchesComparison(lA(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Nn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tp extends cXe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new tp(t,n)}matches(t){return fXe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fXe(e){return e.op==="and"}function dXe(e){return kFn(e)&&fXe(e)}function kFn(e){for(const t of e.filters)if(t instanceof tp)return!1;return!0}function PZ(e){if(e instanceof Ao)return e.field.canonicalString()+e.op.toString()+cA(e.value);if(dXe(e))return e.filters.map(t=>PZ(t)).join(",");{const t=e.filters.map(n=>PZ(n)).join(",");return`${e.op}(${t})`}}function hXe(e,t){return e instanceof Ao?function(r,i){return i instanceof Ao&&r.op===i.op&&r.field.isEqual(i.field)&&G0(r.value,i.value)}(e,t):e instanceof tp?function(r,i){return i instanceof tp&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&hXe(o,i.filters[a]),!0):!1}(e,t):void Nn()}function pXe(e){return e instanceof Ao?function(n){return`${n.field.canonicalString()} ${n.op} ${cA(n.value)}`}(e):e instanceof tp?function(n){return n.op.toString()+" {"+n.getFilters().map(pXe).join(" ,")+"}"}(e):"Filter"}class RFn extends Ao{constructor(t,n,r){super(t,n,r),this.key=cn.fromName(r.referenceValue)}matches(t){const n=cn.comparator(t.key,this.key);return this.matchesComparison(n)}}class NFn extends Ao{constructor(t,n){super(t,"in",n),this.keys=mXe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class PFn extends Ao{constructor(t,n){super(t,"not-in",n),this.keys=mXe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function mXe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>cn.fromName(r.referenceValue))}class DFn extends Ao{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return fde(n)&&eR(n.arrayValue,this.value)}}class OFn extends Ao{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&eR(this.value.arrayValue,n)}}class $Fn extends Ao{constructor(t,n){super(t,"not-in",n)}matches(t){if(eR(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!eR(this.value.arrayValue,n)}}class LFn extends Ao{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!fde(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>eR(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MFn{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function f3e(e,t=null,n=[],r=[],i=null,s=null,o=null){return new MFn(e,t,n,r,i,s,o)}function dde(e){const t=jn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>PZ(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),sU(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>cA(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>cA(r)).join(",")),t.ue=n}return t.ue}function hde(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!IFn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!hXe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!c3e(e.startAt,t.startAt)&&c3e(e.endAt,t.endAt)}function DZ(e){return cn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FFn(e,t,n,r,i,s,o,a){return new BC(e,t,n,r,i,s,o,a)}function pde(e){return new BC(e)}function d3e(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function gXe(e){return e.collectionGroup!==null}function fk(e){const t=jn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ga(ja.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new tR(s,r))}),n.has(ja.keyField().canonicalString())||t.ce.push(new tR(ja.keyField(),r))}return t.ce}function A0(e){const t=jn(e);return t.le||(t.le=BFn(t,fk(e))),t.le}function BFn(e,t){if(e.limitType==="F")return f3e(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new tR(i.field,s)});const n=e.endAt?new I7(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new I7(e.startAt.position,e.startAt.inclusive):null;return f3e(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function OZ(e,t){const n=e.filters.concat([t]);return new BC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $Z(e,t,n){return new BC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function oU(e,t){return hde(A0(e),A0(t))&&e.limitType===t.limitType}function yXe(e){return`${dde(A0(e))}|lt:${e.limitType}`}function RE(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>pXe(i)).join(", ")}]`),sU(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>cA(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>cA(i)).join(",")),`Target(${r})`}(A0(e))}; limitType=${e.limitType})`}function aU(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):cn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of fk(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=l3e(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,fk(r),i)||r.endAt&&!function(o,a,u){const l=l3e(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,fk(r),i))}(e,t)}function jFn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vXe(e){return(t,n)=>{let r=!1;for(const i of fk(e)){const s=UFn(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function UFn(e,t,n){const r=e.field.isKeyField()?cn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?lA(u,l):Nn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){g2(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return aXe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zFn=new $s(cn.comparator);function s1(){return zFn}const bXe=new $s(cn.comparator);function f4(...e){let t=bXe;for(const n of e)t=t.insert(n.key,n);return t}function _Xe(e){let t=bXe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function _w(){return dk()}function wXe(){return dk()}function dk(){return new jC(e=>e.toString(),(e,t)=>e.isEqual(t))}const VFn=new $s(cn.comparator),HFn=new Ga(cn.comparator);function wr(...e){let t=HFn;for(const n of e)t=t.add(n);return t}const qFn=new Ga(fi);function WFn(){return qFn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xXe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:C7(t)?"-0":t}}function EXe(e){return{integerValue:""+e}}function GFn(e,t){return TFn(t)?EXe(t):xXe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(){this._=void 0}}function YFn(e,t,n){return e instanceof nR?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&lde(s)&&(s=cde(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof rR?SXe(e,t):e instanceof iR?AXe(e,t):function(i,s){const o=TXe(i,s),a=h3e(o)+h3e(i.Pe);return NZ(o)&&NZ(i.Pe)?EXe(a):xXe(i.serializer,a)}(e,t)}function KFn(e,t,n){return e instanceof rR?SXe(e,t):e instanceof iR?AXe(e,t):n}function TXe(e,t){return e instanceof k7?function(r){return NZ(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class nR extends uU{}class rR extends uU{constructor(t){super(),this.elements=t}}function SXe(e,t){const n=CXe(t);for(const r of e.elements)n.some(i=>G0(i,r))||n.push(r);return{arrayValue:{values:n}}}class iR extends uU{constructor(t){super(),this.elements=t}}function AXe(e,t){let n=CXe(t);for(const r of e.elements)n=n.filter(i=>!G0(i,r));return{arrayValue:{values:n}}}class k7 extends uU{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function h3e(e){return To(e.integerValue||e.doubleValue)}function CXe(e){return fde(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XFn{constructor(t,n){this.field=t,this.transform=n}}function QFn(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof rR&&i instanceof rR||r instanceof iR&&i instanceof iR?uA(r.elements,i.elements,G0):r instanceof k7&&i instanceof k7?G0(r.Pe,i.Pe):r instanceof nR&&i instanceof nR}(e.transform,t.transform)}class JFn{constructor(t,n){this.version=t,this.transformResults=n}}class pf{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new pf}static exists(t){return new pf(void 0,t)}static updateTime(t){return new pf(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function VO(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class lU{}function IXe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new mde(e.key,pf.none()):new tN(e.key,e.data,pf.none());{const n=e.data,r=rc.empty();let i=new Ga(ja.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new qb(e.key,r,new uf(i.toArray()),pf.none())}}function ZFn(e,t,n){e instanceof tN?function(i,s,o){const a=i.value.clone(),u=m3e(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof qb?function(i,s,o){if(!VO(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=m3e(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(kXe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function hk(e,t,n,r){return e instanceof tN?function(s,o,a,u){if(!VO(s.precondition,o))return a;const l=s.value.clone(),c=g3e(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof qb?function(s,o,a,u){if(!VO(s.precondition,o))return a;const l=g3e(s.fieldTransforms,u,o),c=o.data;return c.setAll(kXe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return VO(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function eBn(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=TXe(r.transform,i||null);s!=null&&(n===null&&(n=rc.empty()),n.set(r.field,s))}return n||null}function p3e(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&uA(r,i,(s,o)=>QFn(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class tN extends lU{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qb extends lU{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function kXe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function m3e(e,t,n){const r=new Map;Ji(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,KFn(o,a,n[i]))}return r}function g3e(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,YFn(s,o,t))}return r}class mde extends lU{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tBn extends lU{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nBn{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&ZFn(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=hk(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=hk(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=wXe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=IXe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Bn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),wr())}isEqual(t){return this.batchId===t.batchId&&uA(this.mutations,t.mutations,(n,r)=>p3e(n,r))&&uA(this.baseMutations,t.baseMutations,(n,r)=>p3e(n,r))}}class gde{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Ji(t.mutations.length===r.length);let i=function(){return VFn}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new gde(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rBn{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iBn{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xo,jr;function sBn(e){switch(e){default:return Nn();case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0}}function RXe(e){if(e===void 0)return i1("GRPC error has no .code"),nt.UNKNOWN;switch(e){case xo.OK:return nt.OK;case xo.CANCELLED:return nt.CANCELLED;case xo.UNKNOWN:return nt.UNKNOWN;case xo.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case xo.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case xo.INTERNAL:return nt.INTERNAL;case xo.UNAVAILABLE:return nt.UNAVAILABLE;case xo.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case xo.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case xo.NOT_FOUND:return nt.NOT_FOUND;case xo.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case xo.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case xo.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case xo.ABORTED:return nt.ABORTED;case xo.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case xo.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case xo.DATA_LOSS:return nt.DATA_LOSS;default:return Nn()}}(jr=xo||(xo={}))[jr.OK=0]="OK",jr[jr.CANCELLED=1]="CANCELLED",jr[jr.UNKNOWN=2]="UNKNOWN",jr[jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jr[jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jr[jr.NOT_FOUND=5]="NOT_FOUND",jr[jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",jr[jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",jr[jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",jr[jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jr[jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jr[jr.ABORTED=10]="ABORTED",jr[jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",jr[jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",jr[jr.INTERNAL=13]="INTERNAL",jr[jr.UNAVAILABLE=14]="UNAVAILABLE",jr[jr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oBn(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aBn=new $w([4294967295,4294967295],0);function y3e(e){const t=oBn().encode(e),n=new ZKe;return n.update(t),new Uint8Array(n.digest())}function v3e(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new $w([n,r],0),new $w([i,s],0)]}class yde{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new d4(`Invalid padding: ${n}`);if(r<0)throw new d4(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new d4(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new d4(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=$w.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply($w.fromNumber(r)));return i.compare(aBn)===1&&(i=new $w([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=y3e(t),[r,i]=v3e(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new yde(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=y3e(t),[r,i]=v3e(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class d4 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,nN.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new cU(Bn.min(),i,new $s(fi),s1(),wr())}}class nN{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new nN(r,n,wr(),wr(),wr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class NXe{constructor(t,n){this.targetId=t,this.me=n}}class PXe{constructor(t,n,r=Bu.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class b3e{constructor(){this.fe=0,this.ge=w3e(),this.pe=Bu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=wr(),n=wr(),r=wr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Nn()}}),new nN(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=w3e()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Ji(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uBn{constructor(t){this.Le=t,this.Be=new Map,this.ke=s1(),this.qe=_3e(),this.Qe=new $s(fi)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Nn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(DZ(s))if(r===0){const o=new cn(s.path);this.Ue(n,o,Eu.newNoDocument(o,Bn.min()))}else Ji(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Tx(r).toUint8Array()}catch(u){if(u instanceof uXe)return X6("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new yde(o,i,s)}catch(u){return X6(u instanceof d4?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&DZ(a.target)){const u=new cn(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Eu.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=wr();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new cU(t,n,this.Qe,this.ke,r);return this.ke=s1(),this.qe=_3e(),this.Qe=new $s(fi),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new b3e,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Ga(fi),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Yt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new b3e),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function _3e(){return new $s(cn.comparator)}function w3e(){return new $s(cn.comparator)}const lBn={asc:"ASCENDING",desc:"DESCENDING"},cBn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fBn={and:"AND",or:"OR"};class dBn{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function LZ(e,t){return e.useProto3Json||sU(t)?t:{value:t}}function R7(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function DXe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function hBn(e,t){return R7(e,t.toTimestamp())}function C0(e){return Ji(!!e),Bn.fromTimestamp(function(n){const r=ab(n);return new Go(r.seconds,r.nanos)}(e))}function vde(e,t){return MZ(e,t).canonicalString()}function MZ(e,t){const n=function(i){return new ds(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function OXe(e){const t=ds.fromString(e);return Ji(BXe(t)),t}function FZ(e,t){return vde(e.databaseId,t.path)}function RG(e,t){const n=OXe(t);if(n.get(1)!==e.databaseId.projectId)throw new Mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cn(LXe(n))}function $Xe(e,t){return vde(e.databaseId,t)}function pBn(e){const t=OXe(e);return t.length===4?ds.emptyPath():LXe(t)}function BZ(e){return new ds(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function LXe(e){return Ji(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function x3e(e,t,n){return{name:FZ(e,t),fields:n.value.mapValue.fields}}function mBn(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Nn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Ji(c===void 0||typeof c=="string"),Bu.fromBase64String(c||"")):(Ji(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Bu.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?nt.UNKNOWN:RXe(l.code);return new Mt(c,l.message||"")}(o);n=new PXe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=RG(e,r.document.name),s=C0(r.document.updateTime),o=r.document.createTime?C0(r.document.createTime):Bn.min(),a=new rc({mapValue:{fields:r.document.fields}}),u=Eu.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new HO(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=RG(e,r.document),s=r.readTime?C0(r.readTime):Bn.min(),o=Eu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new HO([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=RG(e,r.document),s=r.removedTargetIds||[];n=new HO([],s,i,null)}else{if(!("filter"in t))return Nn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new iBn(i,s),a=r.targetId;n=new NXe(a,o)}}return n}function gBn(e,t){let n;if(t instanceof tN)n={update:x3e(e,t.key,t.value)};else if(t instanceof mde)n={delete:FZ(e,t.key)};else if(t instanceof qb)n={update:x3e(e,t.key,t.data),updateMask:SBn(t.fieldMask)};else{if(!(t instanceof tBn))return Nn();n={verify:FZ(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof nR)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rR)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof iR)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof k7)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Nn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:hBn(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Nn()}(e,t.precondition)),n}function yBn(e,t){return e&&e.length>0?(Ji(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?C0(i.updateTime):C0(s);return o.isEqual(Bn.min())&&(o=C0(s)),new JFn(o,i.transformResults||[])}(n,t))):[]}function vBn(e,t){return{documents:[$Xe(e,t.path)]}}function bBn(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$Xe(e,i);const s=function(l){if(l.length!==0)return FXe(tp.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:NE(d.field),direction:xBn(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=LZ(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function _Bn(e){let t=pBn(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ji(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=MXe(f);return d instanceof tp&&dXe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new tR(PE(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,sU(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new I7(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new I7(h,d)}(n.endAt)),FFn(t,i,o,s,a,"F",u,l)}function wBn(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function MXe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=PE(n.unaryFilter.field);return Ao.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=PE(n.unaryFilter.field);return Ao.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=PE(n.unaryFilter.field);return Ao.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=PE(n.unaryFilter.field);return Ao.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Nn()}}(e):e.fieldFilter!==void 0?function(n){return Ao.create(PE(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return tp.create(n.compositeFilter.filters.map(r=>MXe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Nn()}}(n.compositeFilter.op))}(e):Nn()}function xBn(e){return lBn[e]}function EBn(e){return cBn[e]}function TBn(e){return fBn[e]}function NE(e){return{fieldPath:e.canonicalString()}}function PE(e){return ja.fromServerFormat(e.fieldPath)}function FXe(e){return e instanceof Ao?function(n){if(n.op==="=="){if(u3e(n.value))return{unaryFilter:{field:NE(n.field),op:"IS_NAN"}};if(a3e(n.value))return{unaryFilter:{field:NE(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(u3e(n.value))return{unaryFilter:{field:NE(n.field),op:"IS_NOT_NAN"}};if(a3e(n.value))return{unaryFilter:{field:NE(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:NE(n.field),op:EBn(n.op),value:n.value}}}(e):e instanceof tp?function(n){const r=n.getFilters().map(i=>FXe(i));return r.length===1?r[0]:{compositeFilter:{op:TBn(n.op),filters:r}}}(e):Nn()}function SBn(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function BXe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(t,n,r,i,s=Bn.min(),o=Bn.min(),a=Bu.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Qy(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Qy(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Qy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Qy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ABn{constructor(t){this.ct=t}}function CBn(e){const t=_Bn({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?$Z(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IBn{constructor(){this._n=new kBn}addToCollectionParentIndex(t,n){return this._n.add(n),dt.resolve()}getCollectionParents(t,n){return dt.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return dt.resolve()}deleteFieldIndex(t,n){return dt.resolve()}deleteAllFieldIndexes(t){return dt.resolve()}createTargetIndexes(t,n){return dt.resolve()}getDocumentsMatchingTarget(t,n){return dt.resolve(null)}getIndexType(t,n){return dt.resolve(0)}getFieldIndexes(t,n){return dt.resolve([])}getNextCollectionGroupToUpdate(t){return dt.resolve(null)}getMinOffset(t,n){return dt.resolve(ob.min())}getMinOffsetFromCollectionGroup(t,n){return dt.resolve(ob.min())}updateCollectionGroup(t,n,r){return dt.resolve()}updateIndexEntries(t,n){return dt.resolve()}}class kBn{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Ga(ds.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Ga(ds.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new fA(0)}static Ln(){return new fA(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RBn{constructor(){this.changes=new jC(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Eu.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?dt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NBn{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PBn{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&hk(r.mutation,i,uf.empty(),Go.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,wr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=wr()){const i=_w();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=f4();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=_w();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,wr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=s1();const o=dk(),a=function(){return dk()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof qb)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),hk(c.mutation,l,c.mutation.getFieldMask(),Go.now())):o.set(l.key,uf.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new NBn(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=dk();let i=new $s((o,a)=>o-a),s=wr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||uf.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||wr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=wXe();c.forEach(d=>{if(!s.has(d)){const h=IXe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return dt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return cn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):gXe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):dt.resolve(_w());let a=-1,u=s;return o.next(l=>dt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?dt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,wr())).next(c=>({batchId:a,changes:_Xe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new cn(n)).next(r=>{let i=f4();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=f4();return this.indexManager.getCollectionParents(t,s).next(a=>dt.forEach(a,u=>{const l=function(f,d){return new BC(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Eu.newInvalidDocument(c)))});let a=f4();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&hk(c.mutation,l,uf.empty(),Go.now()),aU(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DBn{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return dt.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:C0(i.createTime)}}(n)),dt.resolve()}getNamedQuery(t,n){return dt.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:CBn(i.bundledQuery),readTime:C0(i.readTime)}}(n)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OBn{constructor(){this.overlays=new $s(cn.comparator),this.hr=new Map}getOverlay(t,n){return dt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=_w();return dt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),dt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),dt.resolve()}getOverlaysForCollection(t,n,r){const i=_w(),s=n.length+1,o=new cn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return dt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new $s((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=_w(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=_w(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return dt.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rBn(n,r));let s=this.hr.get(n);s===void 0&&(s=wr(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bde{constructor(){this.Pr=new Ga(aa.Ir),this.Tr=new Ga(aa.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new aa(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new aa(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new cn(new ds([])),r=new aa(n,t),i=new aa(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new cn(new ds([])),r=new aa(n,t),i=new aa(n,t+1);let s=wr();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new aa(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class aa{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return cn.comparator(t.key,n.key)||fi(t.pr,n.pr)}static Er(t,n){return fi(t.pr,n.pr)||cn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Bn{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ga(aa.Ir)}checkEmpty(t){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nBn(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new aa(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return dt.resolve(o)}lookupMutationBatch(t,n){return dt.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new aa(n,0),i=new aa(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ga(fi);return n.forEach(i=>{const s=new aa(i,0),o=new aa(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),dt.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;cn.isDocumentKey(s)||(s=s.child(""));const o=new aa(new cn(s),0);let a=new Ga(fi);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),dt.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Ji(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return dt.forEach(n.mutations,i=>{const s=new aa(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new aa(n,0),i=this.wr.firstAfterOrEqual(r);return dt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,dt.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LBn{constructor(t){this.vr=t,this.docs=function(){return new $s(cn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return dt.resolve(r?r.document.mutableCopy():Eu.newInvalidDocument(n))}getEntries(t,n){let r=s1();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Eu.newInvalidDocument(i))}),dt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=s1();const o=n.path,a=new cn(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||_Fn(bFn(c),r)<=0||(i.has(c.key)||aU(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return dt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Nn()}Fr(t,n){return dt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new MBn(this)}getSize(t){return dt.resolve(this.size)}}class MBn extends RBn{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),dt.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FBn{constructor(t){this.persistence=t,this.Mr=new jC(n=>dde(n),hde),this.lastRemoteSnapshotVersion=Bn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new bde,this.targetCount=0,this.Lr=fA.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),dt.resolve()}getLastRemoteSnapshotVersion(t){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return dt.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),dt.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new fA(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,dt.resolve()}updateTargetData(t,n){return this.qn(n),dt.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,dt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),dt.waitFor(s).next(()=>i)}getTargetCount(t){return dt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return dt.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),dt.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),dt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),dt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return dt.resolve(r)}containsKey(t,n){return dt.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BBn{constructor(t,n){this.Br={},this.overlays={},this.kr=new ude(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new FBn(this),this.indexManager=new IBn,this.remoteDocumentCache=function(i){return new LBn(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new ABn(n),this.$r=new DBn(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new OBn,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new $Bn(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Yt("MemoryPersistence","Starting transaction:",t);const i=new jBn(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return dt.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class jBn extends xFn{constructor(t){super(),this.currentSequenceNumber=t}}class _de{constructor(t){this.persistence=t,this.zr=new bde,this.jr=null}static Hr(t){return new _de(t)}get Jr(){if(this.jr)return this.jr;throw Nn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),dt.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),dt.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),dt.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.Jr,r=>{const i=cn.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,Bn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return dt.or([()=>dt.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wde{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=wr(),i=wr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new wde(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UBn{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zBn{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return x$n()?8:EFn(Xa())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new UBn;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(vI()<=Dr.DEBUG&&Yt("QueryEngine","SDK will not create cache indexes for query:",RE(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),dt.resolve()):(vI()<=Dr.DEBUG&&Yt("QueryEngine","Query:",RE(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(vI()<=Dr.DEBUG&&Yt("QueryEngine","The SDK decides to create cache indexes for query:",RE(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,A0(n))):dt.resolve())}ji(t,n){if(d3e(n))return dt.resolve(null);let r=A0(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=$Z(n,null,"F"),r=A0(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=wr(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,$Z(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return d3e(n)||i.isEqual(Bn.min())?dt.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?dt.resolve(null):(vI()<=Dr.DEBUG&&Yt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),RE(n)),this.es(t,o,n,vFn(i,-1)).next(a=>a))})}Zi(t,n){let r=new Ga(vXe(t));return n.forEach((i,s)=>{aU(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return vI()<=Dr.DEBUG&&Yt("QueryEngine","Using full collection scan to execute query:",RE(n)),this.zi.getDocumentsMatchingQuery(t,n,ob.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VBn{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new $s(fi),this.rs=new jC(s=>dde(s),hde),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new PBn(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function HBn(e,t,n,r){return new VBn(e,t,n,r)}async function jXe(e,t){const n=jn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=wr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function qBn(e,t){const n=jn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=dt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Ji(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=wr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function UXe(e){const t=jn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function WBn(e,t){const n=jn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Bu.EMPTY_BYTE_STRING,Bn.min()).withLastLimboFreeSnapshotVersion(Bn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=s1(),l=wr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(GBn(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(Bn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return dt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function GBn(e,t,n){let r=wr(),i=wr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=s1();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Bn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Yt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function YBn(e,t){const n=jn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function KBn(e,t){const n=jn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,dt.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Qy(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function jZ(e,t,n){const r=jn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!eN(o))throw o;Yt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function E3e(e,t,n){const r=jn(e);let i=Bn.min(),s=wr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=jn(u),d=f.rs.get(c);return d!==void 0?dt.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,A0(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:Bn.min(),n?s:wr())).next(a=>(XBn(r,jFn(t),a),{documents:a,hs:s})))}function XBn(e,t,n){let r=e.ss.get(t)||Bn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class T3e{constructor(){this.activeTargetIds=WFn()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class QBn{constructor(){this.no=new T3e,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new T3e,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JBn{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3e{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Yt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Yt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yD=null;function NG(){return yD===null?yD=function(){return 268435456+Math.round(2147483648*Math.random())}():yD++,"0x"+yD.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZBn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ejn{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu="WebChannelConnection";class tjn extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=NG(),u=this.vo(n,r.toUriEncodedString());Yt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(Yt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw X6("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+FC}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=ZBn[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=NG();return new Promise((o,a)=>{const u=new eXe;u.setWithCredentials(!0),u.listenOnce(nXe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case UO.NO_ERROR:const c=u.getResponseJson();Yt(pu,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case UO.TIMEOUT:Yt(pu,`RPC '${t}' ${s} timed out`),a(new Mt(nt.DEADLINE_EXCEEDED,"Request time out"));break;case UO.HTTP_ERROR:const f=u.getStatus();if(Yt(pu,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(y)>=0?y:nt.UNKNOWN}(h.status);a(new Mt(p,h.message))}else a(new Mt(nt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Mt(nt.UNAVAILABLE,"Connection failed."));break;default:Nn()}}finally{Yt(pu,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Yt(pu,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=NG(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=sXe(),a=iXe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new tXe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Yt(pu,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new ejn({lo:g=>{h?Yt(pu,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(Yt(pu,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Yt(pu,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,c4.EventType.OPEN,()=>{h||(Yt(pu,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,c4.EventType.CLOSE,()=>{h||(h=!0,Yt(pu,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,c4.EventType.ERROR,g=>{h||(h=!0,X6(pu,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Mt(nt.UNAVAILABLE,"The operation could not be completed")))}),m(f,c4.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Ji(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){Yt(pu,`RPC '${t}' stream ${i} received error:`,w);const x=w.status;let S=function(N){const k=xo[N];if(k!==void 0)return RXe(k)}(x),A=w.message;S===void 0&&(S=nt.INTERNAL,A="Unknown error status: "+x+" with message "+w.message),h=!0,p.po(new Mt(S,A)),f.close()}else Yt(pu,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,rXe.STAT_EVENT,g=>{g.stat===kZ.PROXY?Yt(pu,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===kZ.NOPROXY&&Yt(pu,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function PG(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(e){return new dBn(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zXe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Yt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VXe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new zXe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===nt.RESOURCE_EXHAUSTED?(i1(n.toString()),i1("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Mt(nt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return Yt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(Yt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class njn extends VXe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=mBn(this.serializer,t),r=function(s){if(!("targetChange"in s))return Bn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Bn.min():o.readTime?C0(o.readTime):Bn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=BZ(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=DZ(u)?{documents:vBn(s,u)}:{query:bBn(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=DXe(s,o.resumeToken);const l=LZ(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Bn.min())>0){a.readTime=R7(s,o.snapshotVersion.toTimestamp());const l=LZ(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=wBn(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=BZ(this.serializer),n.removeTarget=t,this.i_(n)}}class rjn extends VXe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(Ji(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=yBn(t.writeResults,t.commitTime),r=C0(t.commitTime);return this.listener.A_(r,n)}return Ji(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=BZ(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>gBn(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ijn extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Mt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,MZ(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Mt(nt.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,MZ(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Mt(nt.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class sjn{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(i1(n),this.y_=!1):Yt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ojn{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{y2(this)&&(Yt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=jn(u);l.M_.add(4),await iN(l),l.N_.set("Unknown"),l.M_.delete(4),await rN(l)}(this))})}),this.N_=new sjn(r,i)}}async function rN(e){if(y2(e))for(const t of e.x_)await t(!0)}async function iN(e){for(const t of e.x_)await t(!1)}function HXe(e,t){const n=jn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Sde(n)?Tde(n):UC(n).Xo()&&Ede(n,t))}function xde(e,t){const n=jn(e),r=UC(n);n.F_.delete(t),r.Xo()&&qXe(n,t),n.F_.size===0&&(r.Xo()?r.n_():y2(n)&&n.N_.set("Unknown"))}function Ede(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}UC(e).P_(t)}function qXe(e,t){e.L_.xe(t),UC(e).I_(t)}function Tde(e){e.L_=new uBn({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),UC(e).start(),e.N_.w_()}function Sde(e){return y2(e)&&!UC(e).Zo()&&e.F_.size>0}function y2(e){return jn(e).M_.size===0}function WXe(e){e.L_=void 0}async function ajn(e){e.N_.set("Online")}async function ujn(e){e.F_.forEach((t,n)=>{Ede(e,t)})}async function ljn(e,t){WXe(e),Sde(e)?(e.N_.D_(t),Tde(e)):e.N_.set("Unknown")}async function cjn(e,t,n){if(e.N_.set("Online"),t instanceof PXe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){Yt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await N7(e,r)}else if(t instanceof HO?e.L_.Ke(t):t instanceof NXe?e.L_.He(t):e.L_.We(t),!n.isEqual(Bn.min()))try{const r=await UXe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Bu.EMPTY_BYTE_STRING,c.snapshotVersion)),qXe(s,u);const f=new Qy(c.target,u,l,c.sequenceNumber);Ede(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Yt("RemoteStore","Failed to raise snapshot:",r),await N7(e,r)}}async function N7(e,t,n){if(!eN(t))throw t;e.M_.add(1),await iN(e),e.N_.set("Offline"),n||(n=()=>UXe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Yt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await rN(e)})}function GXe(e,t){return t().catch(n=>N7(e,n,t))}async function dU(e){const t=jn(e),n=ub(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;fjn(t);)try{const i=await YBn(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,djn(t,i)}catch(i){await N7(t,i)}YXe(t)&&KXe(t)}function fjn(e){return y2(e)&&e.v_.length<10}function djn(e,t){e.v_.push(t);const n=ub(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function YXe(e){return y2(e)&&!ub(e).Zo()&&e.v_.length>0}function KXe(e){ub(e).start()}async function hjn(e){ub(e).V_()}async function pjn(e){const t=ub(e);for(const n of e.v_)t.d_(n.mutations)}async function mjn(e,t,n){const r=e.v_.shift(),i=gde.from(r,t,n);await GXe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await dU(e)}async function gjn(e,t){t&&ub(e).E_&&await async function(r,i){if(function(o){return sBn(o)&&o!==nt.ABORTED}(i.code)){const s=r.v_.shift();ub(r).t_(),await GXe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await dU(r)}}(e,t),YXe(e)&&KXe(e)}async function A3e(e,t){const n=jn(e);n.asyncQueue.verifyOperationInProgress(),Yt("RemoteStore","RemoteStore received new credentials");const r=y2(n);n.M_.add(3),await iN(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await rN(n)}async function yjn(e,t){const n=jn(e);t?(n.M_.delete(2),await rN(n)):t||(n.M_.add(2),await iN(n),n.N_.set("Unknown"))}function UC(e){return e.B_||(e.B_=function(n,r,i){const s=jn(n);return s.f_(),new njn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:ajn.bind(null,e),To:ujn.bind(null,e),Ao:ljn.bind(null,e),h_:cjn.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),Sde(e)?Tde(e):e.N_.set("Unknown")):(await e.B_.stop(),WXe(e))})),e.B_}function ub(e){return e.k_||(e.k_=function(n,r,i){const s=jn(n);return s.f_(),new rjn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:hjn.bind(null,e),Ao:gjn.bind(null,e),R_:pjn.bind(null,e),A_:mjn.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await dU(e)):(await e.k_.stop(),e.v_.length>0&&(Yt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ade{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ng,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Ade(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Mt(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cde(e,t){if(i1("AsyncQueue",`${t}: ${e}`),eN(e))return new Mt(nt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(t){this.comparator=t?(n,r)=>t(n,r)||cn.comparator(n.key,r.key):(n,r)=>cn.comparator(n.key,r.key),this.keyedMap=f4(),this.sortedSet=new $s(this.comparator)}static emptySet(t){return new YT(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof YT)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new YT;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3e{constructor(){this.q_=new $s(cn.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Nn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class dA{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new dA(t,n,YT.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&oU(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vjn{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class bjn{constructor(){this.queries=new jC(t=>yXe(t),oU),this.onlineState="Unknown",this.z_=new Set}}async function XXe(e,t){const n=jn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new vjn,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Cde(o,`Initialization of query '${RE(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Ide(n)}async function QXe(e,t){const n=jn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _jn(e,t){const n=jn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Ide(n)}function wjn(e,t,n){const r=jn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function Ide(e){e.z_.forEach(t=>{t.next()})}var UZ,I3e;(I3e=UZ||(UZ={})).J_="default",I3e.Cache="cache";class JXe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new dA(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=dA.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==UZ.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZXe{constructor(t){this.key=t}}class eQe{constructor(t){this.key=t}}class xjn{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=wr(),this.mutatedKeys=wr(),this.Ia=vXe(t),this.Ta=new YT(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new C3e,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=aU(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new dA(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new C3e,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=wr(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new eQe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new ZXe(r))}),n}pa(t){this.la=t.hs,this.Pa=wr();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return dA.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Ejn{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Tjn{constructor(t){this.key=t,this.wa=!1}}class Sjn{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new jC(a=>yXe(a),oU),this.Da=new Map,this.Ca=new Set,this.va=new $s(cn.comparator),this.Fa=new Map,this.Ma=new bde,this.xa={},this.Oa=new Map,this.Na=fA.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Ajn(e,t,n=!0){const r=oQe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await tQe(r,t,n,!0),i}async function Cjn(e,t){const n=oQe(e);await tQe(n,t,!0,!1)}async function tQe(e,t,n,r){const i=await KBn(e.localStore,A0(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Ijn(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&HXe(e.remoteStore,i),a}async function Ijn(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await E3e(m.localStore,g.query,!1).then(({documents:A})=>g.view.da(A,b)));const w=v&&v.targetChanges.get(g.targetId),x=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,w,x);return R3e(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await E3e(e.localStore,t,!0),o=new xjn(t,s.hs),a=o.da(s.documents),u=nN.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);R3e(e,n,l.fa);const c=new Ejn(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function kjn(e,t,n){const r=jn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!oU(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await jZ(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xde(r.remoteStore,i.targetId),zZ(r,i.targetId)}).catch(Z5)):(zZ(r,i.targetId),await jZ(r.localStore,i.targetId,!0))}async function Rjn(e,t){const n=jn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xde(n.remoteStore,r.targetId))}async function Njn(e,t,n){const r=Fjn(e);try{const i=await function(o,a){const u=jn(o),l=Go.now(),c=a.reduce((h,p)=>h.add(p.key),wr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=s1(),m=wr();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=eBn(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new qb(v.key,b,lXe(b.value.mapValue),pf.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:_Xe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new $s(fi)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await sN(r,i.changes),await dU(r.remoteStore)}catch(i){const s=Cde(i,"Failed to persist write");n.reject(s)}}async function nQe(e,t){const n=jn(e);try{const r=await WBn(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(Ji(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Ji(o.wa):i.removedDocuments.size>0&&(Ji(o.wa),o.wa=!1))}),await sN(n,r,t)}catch(r){await Z5(r)}}function k3e(e,t,n){const r=jn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=jn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&Ide(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Pjn(e,t,n){const r=jn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new $s(cn.comparator);o=o.insert(s,Eu.newNoDocument(s,Bn.min()));const a=wr().add(s),u=new cU(Bn.min(),new Map,new $s(fi),o,a);await nQe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),kde(r)}else await jZ(r.localStore,t,!1).then(()=>zZ(r,t,n)).catch(Z5)}async function Djn(e,t){const n=jn(e),r=t.batch.batchId;try{const i=await qBn(n.localStore,t);iQe(n,r,null),rQe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sN(n,i)}catch(i){await Z5(i)}}async function Ojn(e,t,n){const r=jn(e);try{const i=await function(o,a){const u=jn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Ji(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);iQe(r,t,n),rQe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await sN(r,i)}catch(i){await Z5(i)}}function rQe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function iQe(e,t,n){const r=jn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function zZ(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||sQe(e,r)})}function sQe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(xde(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),kde(e))}function R3e(e,t,n){for(const r of n)r instanceof ZXe?(e.Ma.addReference(r.key,t),$jn(e,r)):r instanceof eQe?(Yt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||sQe(e,r.key)):Nn()}function $jn(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Yt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),kde(e))}function kde(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new cn(ds.fromString(t)),r=e.Na.next();e.Fa.set(r,new Tjn(n)),e.va=e.va.insert(n,r),HXe(e.remoteStore,new Qy(A0(pde(n.path)),r,"TargetPurposeLimboResolution",ude.oe))}}async function sN(e,t,n){const r=jn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=wde.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=jn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>dt.forEach(l,d=>dt.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>dt.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!eN(f))throw f;Yt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function Ljn(e,t){const n=jn(e);if(!n.currentUser.isEqual(t)){Yt("SyncEngine","User change. New user:",t.toKey());const r=await jXe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Mt(nt.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await sN(n,r.us)}}function Mjn(e,t){const n=jn(e),r=n.Fa.get(t);if(r&&r.wa)return wr().add(r.key);{let i=wr();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function oQe(e){const t=jn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nQe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mjn.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Pjn.bind(null,t),t.Sa.h_=_jn.bind(null,t.eventManager),t.Sa.ka=wjn.bind(null,t.eventManager),t}function Fjn(e){const t=jn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Djn.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ojn.bind(null,t),t}class N3e{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=fU(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return HBn(this.persistence,new zBn,t.initialUser,this.serializer)}createPersistence(t){return new BBn(_de.Hr,this.serializer)}createSharedClientState(t){return new QBn}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Bjn{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>k3e(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ljn.bind(null,this.syncEngine),await yjn(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new bjn}()}createDatastore(t){const n=fU(t.databaseInfo.databaseId),r=function(s){return new tjn(s)}(t.databaseInfo);return function(s,o,a,u){return new ijn(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new ojn(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>k3e(this.syncEngine,n,0),function(){return S3e.D()?new S3e:new JBn}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new Sjn(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=jn(r);Yt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await iN(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):i1("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jjn{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Wl.UNAUTHENTICATED,this.clientId=oXe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Yt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Yt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Mt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ng;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Cde(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function DG(e,t){e.asyncQueue.verifyOperationInProgress(),Yt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await jXe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function P3e(e,t){e.asyncQueue.verifyOperationInProgress();const n=await uQe(e);Yt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>A3e(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>A3e(t.remoteStore,i)),e._onlineComponents=t}function Ujn(e){return e.name==="FirebaseError"?e.code===nt.FAILED_PRECONDITION||e.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function uQe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Yt("FirestoreClient","Using user provided OfflineComponentProvider");try{await DG(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Ujn(n))throw n;X6("Error using user provided cache. Falling back to memory cache: "+n),await DG(e,new N3e)}}else Yt("FirestoreClient","Using default OfflineComponentProvider"),await DG(e,new N3e);return e._offlineComponents}async function Rde(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Yt("FirestoreClient","Using user provided OnlineComponentProvider"),await P3e(e,e._uninitializedComponentsProvider._online)):(Yt("FirestoreClient","Using default OnlineComponentProvider"),await P3e(e,new Bjn))),e._onlineComponents}function zjn(e){return uQe(e).then(t=>t.persistence)}function Vjn(e){return Rde(e).then(t=>t.remoteStore)}function Hjn(e){return Rde(e).then(t=>t.syncEngine)}async function lQe(e){const t=await Rde(e),n=t.eventManager;return n.onListen=Ajn.bind(null,t.syncEngine),n.onUnlisten=kjn.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Cjn.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Rjn.bind(null,t.syncEngine),n}function qjn(e){return e.asyncQueue.enqueue(async()=>{const t=await zjn(e),n=await Vjn(e);return t.setNetworkEnabled(!0),function(i){const s=jn(i);return s.M_.delete(0),rN(s)}(n)})}function Wjn(e,t,n={}){const r=new Ng;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new aQe({next:d=>{o.enqueueAndForget(()=>QXe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Mt(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Mt(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new JXe(pde(a.path),c,{includeMetadataChanges:!0,ra:!0});return XXe(s,f)}(await lQe(e),e.asyncQueue,t,n,r)),r.promise}function Gjn(e,t,n={}){const r=new Ng;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new aQe({next:d=>{o.enqueueAndForget(()=>QXe(s,f)),d.fromCache&&u.source==="server"?l.reject(new Mt(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new JXe(a,c,{includeMetadataChanges:!0,ra:!0});return XXe(s,f)}(await lQe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cQe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3e=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fQe(e,t,n){if(!n)throw new Mt(nt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Yjn(e,t,n,r){if(t===!0&&r===!0)throw new Mt(nt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function O3e(e){if(!cn.isDocumentKey(e))throw new Mt(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function $3e(e){if(cn.isDocumentKey(e))throw new Mt(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function hU(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Nn()}function Y0(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Mt(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hU(e);throw new Mt(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3e{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Mt(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Mt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Yjn("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cQe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Nde{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L3e({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Mt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Mt(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L3e(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cFn;switch(r.type){case"firstParty":return new hFn(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Mt(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=D3e.get(n);r&&(Yt("ComponentProvider","Removing Datastore"),D3e.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new v2(this.firestore,t,this._query)}}class gl{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wv(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new gl(this.firestore,t,this._key)}}class wv extends v2{constructor(t,n,r){super(t,n,pde(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new gl(this.firestore,null,new cn(t))}withConverter(t){return new wv(this.firestore,t,this._path)}}function zl(e,t,...n){if(e=es(e),fQe("collection","path",t),e instanceof Nde){const r=ds.fromString(t,...n);return $3e(r),new wv(e,null,r)}{if(!(e instanceof gl||e instanceof wv))throw new Mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ds.fromString(t,...n));return $3e(r),new wv(e.firestore,null,r)}}function os(e,t,...n){if(e=es(e),arguments.length===1&&(t=oXe.newId()),fQe("doc","path",t),e instanceof Nde){const r=ds.fromString(t,...n);return O3e(r),new gl(e,null,new cn(r))}{if(!(e instanceof gl||e instanceof wv))throw new Mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ds.fromString(t,...n));return O3e(r),new gl(e.firestore,e instanceof wv?e.converter:null,new cn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kjn{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new zXe(this,"async_queue_retry"),this.hu=()=>{const n=PG();n&&Yt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=PG();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=PG();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Ng;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!eN(t))throw t;Yt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw i1("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=Ade.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Nn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class b2 extends Nde{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new Kjn}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||dQe(this),this._firestoreClient.terminate()}}function Xjn(e,t,n){n||(n="(default)");const r=LC(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(G6(s,t))return i;throw new Mt(nt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Mt(nt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Mt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function oN(e){return e._firestoreClient||dQe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function dQe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new AFn(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,cQe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new jjn(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Qjn(e){return qjn(oN(e=Y0(e,b2)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hA(Bu.fromBase64String(t))}catch(n){throw new Mt(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new hA(Bu.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Mt(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ja(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pde{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Mt(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Mt(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return fi(this._lat,t._lat)||fi(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jjn=/^__.*__$/;class Zjn{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new qb(t,this.data,this.fieldMask,n,this.fieldTransforms):new tN(t,this.data,n,this.fieldTransforms)}}class hQe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new qb(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function pQe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nn()}}class Dde{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Dde(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return P7(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(pQe(this.fu)&&Jjn.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class eUn{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||fU(t)}Fu(t,n,r,i=!1){return new Dde({fu:t,methodName:n,vu:r,path:ja.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mU(e){const t=e._freezeSettings(),n=fU(e._databaseId);return new eUn(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mQe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);$de("Data must be an object, but it was:",o,r);const a=vQe(r,o);let u,l;if(s.merge)u=new uf(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=VZ(t,f,n);if(!o.contains(d))throw new Mt(nt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);_Qe(c,d)||c.push(d)}u=new uf(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new Zjn(new rc(a),u,l)}class gU extends pU{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof gU}}class Ode extends pU{_toFieldTransform(t){return new XFn(t.path,new nR)}isEqual(t){return t instanceof Ode}}function gQe(e,t,n,r){const i=e.Fu(1,t,n);$de("Data must be an object, but it was:",i,r);const s=[],o=rc.empty();g2(r,(u,l)=>{const c=Lde(t,u,n);l=es(l);const f=i.Su(c);if(l instanceof gU)s.push(c);else{const d=uN(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new uf(s);return new hQe(o,a,i.fieldTransforms)}function yQe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[VZ(t,r,n)],u=[i];if(s.length%2!=0)throw new Mt(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(VZ(t,s[d])),u.push(s[d+1]);const l=[],c=rc.empty();for(let d=a.length-1;d>=0;--d)if(!_Qe(l,a[d])){const h=a[d];let p=u[d];p=es(p);const m=o.Su(h);if(p instanceof gU)l.push(h);else{const g=uN(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new uf(l);return new hQe(c,f,o.fieldTransforms)}function tUn(e,t,n,r=!1){return uN(n,e.Fu(r?4:3,t))}function uN(e,t){if(bQe(e=es(e)))return $de("Unsupported field value:",t,e),vQe(e,t);if(e instanceof pU)return function(r,i){if(!pQe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=uN(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=es(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GFn(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Go.fromDate(r);return{timestampValue:R7(i.serializer,s)}}if(r instanceof Go){const s=new Go(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:R7(i.serializer,s)}}if(r instanceof Pde)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hA)return{bytesValue:DXe(i.serializer,r._byteString)};if(r instanceof gl){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vde(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${hU(r)}`)}(e,t)}function vQe(e,t){const n={};return aXe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):g2(e,(r,i)=>{const s=uN(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function bQe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Go||e instanceof Pde||e instanceof hA||e instanceof gl||e instanceof pU)}function $de(e,t,n){if(!bQe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=hU(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function VZ(e,t,n){if((t=es(t))instanceof aN)return t._internalPath;if(typeof t=="string")return Lde(e,t);throw P7("Field path arguments must be of type string or ",e,!1,void 0,n)}const nUn=new RegExp("[~\\*/\\[\\]]");function Lde(e,t,n){if(t.search(nUn)>=0)throw P7(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new aN(...t.split("."))._internalPath}catch{throw P7(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function P7(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Mt(nt.INVALID_ARGUMENT,a+e+u)}function _Qe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wQe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gl(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new rUn(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(yU("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rUn extends wQe{data(){return super.data()}}function yU(e,t){return typeof t=="string"?Lde(e,t):t instanceof aN?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iUn(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Mt(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mde{}class xQe extends Mde{}function OG(e,t,...n){let r=[];t instanceof Mde&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Fde).length,a=s.filter(u=>u instanceof vU).length;if(o>1||o>0&&a>0)throw new Mt(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class vU extends xQe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new vU(t,n,r)}_apply(t){const n=this._parse(t);return EQe(t._query,n),new v2(t.firestore,t.converter,OZ(t._query,n))}_parse(t){const n=mU(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Mt(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){j3e(f,c);const h=[];for(const p of f)h.push(B3e(u,s,p));d={arrayValue:{values:h}}}else d=B3e(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||j3e(f,c),d=tUn(a,o,f,c==="in"||c==="not-in");return Ao.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function M3e(e,t,n){const r=t,i=yU("where",e);return vU._create(i,r,n)}class Fde extends Mde{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Fde(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:tp.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)EQe(o,u),o=OZ(o,u)}(t._query,n),new v2(t.firestore,t.converter,OZ(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bde extends xQe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Bde(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tR(s,o)}(t._query,this._field,this._direction);return new v2(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new BC(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function F3e(e,t="asc"){const n=t,r=yU("orderBy",e);return Bde._create(r,n)}function B3e(e,t,n){if(typeof(n=es(n))=="string"){if(n==="")throw new Mt(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gXe(t)&&n.indexOf("/")!==-1)throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ds.fromString(n));if(!cn.isDocumentKey(r))throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return o3e(e,new cn(r))}if(n instanceof gl)return o3e(e,n._key);throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hU(n)}.`)}function j3e(e,t){if(!Array.isArray(e)||e.length===0)throw new Mt(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function EQe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Mt(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class sUn{convertValue(t,n="none"){switch(Sx(t)){case 0:return null;case 1:return t.booleanValue;case 2:return To(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Tx(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Nn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return g2(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Pde(To(t.latitude),To(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=cde(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(J6(t));default:return null}}convertTimestamp(t){const n=ab(t);return new Go(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ds.fromString(t);Ji(BXe(r));const i=new Z6(r.get(1),r.get(3)),s=new cn(r.popFirst(5));return i.isEqual(n)||i1(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TQe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class SQe extends wQe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new qO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(yU("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qO extends SQe{data(t={}){return super.data(t)}}class oUn{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new h4(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new qO(this._firestore,this._userDataWriter,r.key,r,new h4(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Mt(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new qO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new h4(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new qO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new h4(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:aUn(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function aUn(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(e){e=Y0(e,gl);const t=Y0(e.firestore,b2);return Wjn(oN(t),e._key).then(n=>uUn(t,e,n))}class AQe extends sUn{constructor(t){super(),this.firestore=t}convertBytes(t){return new hA(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new gl(this.firestore,null,n)}}function vE(e){e=Y0(e,v2);const t=Y0(e.firestore,b2),n=oN(t),r=new AQe(t);return iUn(e._query),Gjn(n,e._query).then(i=>new oUn(t,r,e,i))}function mu(e,t,n){e=Y0(e,gl);const r=Y0(e.firestore,b2),i=TQe(e.converter,t,n);return jde(r,[mQe(mU(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,pf.none())])}function U3e(e,t,n,...r){e=Y0(e,gl);const i=Y0(e.firestore,b2),s=mU(i);let o;return o=typeof(t=es(t))=="string"||t instanceof aN?yQe(s,"updateDoc",e._key,t,n,r):gQe(s,"updateDoc",e._key,t),jde(i,[o.toMutation(e._key,pf.exists(!0))])}function jde(e,t){return function(r,i){const s=new Ng;return r.asyncQueue.enqueueAndForget(async()=>Njn(await Hjn(r),i,s)),s.promise}(oN(e),t)}function uUn(e,t,n){const r=n.docs.get(t._key),i=new AQe(e);return new SQe(e,i,t._key,r,new h4(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lUn{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=mU(t)}set(t,n,r){this._verifyNotCommitted();const i=$G(t,this._firestore),s=TQe(i.converter,n,r),o=mQe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,pf.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=$G(t,this._firestore);let o;return o=typeof(n=es(n))=="string"||n instanceof aN?yQe(this._dataReader,"WriteBatch.update",s._key,n,r,i):gQe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,pf.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=$G(t,this._firestore);return this._mutations=this._mutations.concat(new mde(n._key,pf.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Mt(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $G(e,t){if((e=es(e)).firestore!==t)throw new Mt(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function z3e(){return new Ode("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3e(e){return oN(e=Y0(e,b2)),new lUn(e,t=>jde(e,t))}(function(t,n=!0){(function(i){FC=i})(m2),n1(new q0("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new b2(new fFn(r.getProvider("auth-internal")),new mFn(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Mt(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Z6(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),zh(n3e,"4.6.3",t),zh(n3e,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HZ=new Map,CQe={activated:!1,tokenObservers:[]},cUn={initialized:!1,enabled:!1};function Yo(e){return HZ.get(e)||Object.assign({},CQe)}function fUn(e,t){return HZ.set(e,t),HZ.get(e)}function bU(){return cUn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IQe="https://content-firebaseappcheck.googleapis.com/v1",dUn="exchangeRecaptchaV3Token",hUn="exchangeDebugToken",H3e={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},pUn=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mUn{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new W6,this.pending.promise.catch(n=>{}),await gUn(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new W6,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function gUn(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yUn={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},cc=new $C("appCheck","AppCheck",yUn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3e(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Ude(e){if(!Yo(e).activated)throw cc.create("use-before-activation",{appName:e.name})}function kQe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=bD(n)+"d:"),r&&(o+=bD(r)+"h:"),o+=bD(i)+"m:"+bD(s)+"s",o}function bD(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zde({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw cc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw cc.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw cc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw cc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function vUn(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${IQe}/projects/${n}/apps/${r}:${dUn}?key=${i}`,body:{recaptcha_v3_token:t}}}function RQe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${IQe}/projects/${n}/apps/${r}:${hUn}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bUn="firebase-app-check-database",_Un=1,sR="firebase-app-check-store",NQe="debug-token";let _D=null;function PQe(){return _D||(_D=new Promise((e,t)=>{try{const n=indexedDB.open(bUn,_Un);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(cc.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(sR,{keyPath:"compositeKey"})}}}catch(n){t(cc.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),_D)}function wUn(e){return OQe($Qe(e))}function xUn(e,t){return DQe($Qe(e),t)}function EUn(e){return DQe(NQe,e)}function TUn(){return OQe(NQe)}async function DQe(e,t){const r=(await PQe()).transaction(sR,"readwrite"),s=r.objectStore(sR).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(cc.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function OQe(e){const n=(await PQe()).transaction(sR,"readonly"),i=n.objectStore(sR).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(cc.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function $Qe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new Jj("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SUn(e){if(zfe()){let t;try{t=await wUn(e)}catch(n){oR.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function LG(e,t){return zfe()?xUn(e,t).catch(n=>{oR.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function AUn(){let e;try{e=await TUn()}catch{}if(e)return e;{const t=N$n();return EUn(t).catch(n=>oR.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vde(){return bU().enabled}async function Hde(){const e=bU();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function CUn(){const e=JYe(),t=bU();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new W6;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(AUn())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IUn={error:"UNKNOWN_ERROR"};function kUn(e){return Ufe.encodeString(JSON.stringify(e),!1)}async function qZ(e,t=!1){const n=e.app;Ude(n);const r=Yo(n);let i=r.token,s;if(i&&!sT(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(sT(u)?i=u:await LG(n,void 0))}if(!t&&i&&sT(i))return{token:i.token};let o=!1;if(Vde()){r.exchangeTokenPromise||(r.exchangeTokenPromise=zde(RQe(n,await Hde()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await LG(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Yo(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?oR.warn(u.message):oR.error(u),s=u}let a;return i?s?sT(i)?a={token:i.token,internalError:s}:a=G3e(s):(a={token:i.token},r.token=i,await LG(n,i)):a=G3e(s),o&&FQe(n,a),a}async function RUn(e){const t=e.app;Ude(t);const{provider:n}=Yo(t);if(Vde()){const r=await Hde(),{token:i}=await zde(RQe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function LQe(e,t,n,r){const{app:i}=e,s=Yo(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&sT(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),W3e(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>W3e(e))}function MQe(e,t){const n=Yo(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function W3e(e){const{app:t}=e,n=Yo(t);let r=n.tokenRefresher;r||(r=NUn(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function NUn(e){const{app:t}=e;return new mUn(async()=>{const n=Yo(t);let r;if(n.token?r=await qZ(e,!0):r=await qZ(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Yo(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},H3e.RETRIAL_MIN_WAIT,H3e.RETRIAL_MAX_WAIT)}function FQe(e,t){const n=Yo(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function sT(e){return e.expireTimeMillis-Date.now()>0}function G3e(e){return{token:kUn(IUn),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PUn{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Yo(this.app);for(const n of t)MQe(this.app,n.next);return Promise.resolve()}}function DUn(e,t){return new PUn(e,t)}function OUn(e){return{getToken:t=>qZ(e,t),getLimitedUseToken:()=>RUn(e),addTokenListener:t=>LQe(e,"INTERNAL",t),removeTokenListener:t=>MQe(e.app,t)}}const $Un="@firebase/app-check",LUn="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MUn="https://www.google.com/recaptcha/api.js";function FUn(e,t){const n=new W6,r=Yo(e);r.reCAPTCHAState={initialized:n};const i=BUn(e),s=q3e(!1);return s?Y3e(e,t,s,i,n):zUn(()=>{const o=q3e(!1);if(!o)throw new Error("no recaptcha");Y3e(e,t,o,i,n)}),n.promise}function Y3e(e,t,n,r,i){n.ready(()=>{UUn(e,t,n,r),i.resolve(n)})}function BUn(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function jUn(e){Ude(e);const n=await Yo(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Yo(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function UUn(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Yo(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Yo(e).reCAPTCHAState.succeeded=!1}}),s=Yo(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function zUn(e){const t=document.createElement("script");t.src=MUn,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qde{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;HUn(this._throttleData);const i=await jUn(this._app).catch(o=>{throw cc.create("recaptcha-error")});if(!(!((t=Yo(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw cc.create("recaptcha-error");let s;try{s=await zde(vUn(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=VUn(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),cc.create("throttled",{time:kQe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=LC(t,"heartbeat"),FUn(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof qde?this._siteKey===t._siteKey:!1}}function VUn(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+pUn,httpStatus:e};{const n=t?t.backoffCount:0,r=L$n(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function HUn(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw cc.create("throttled",{time:kQe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qUn(e=Hfe(),t){e=es(e);const n=LC(e,"app-check");if(bU().initialized||CUn(),Vde()&&Hde().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw cc.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return WUn(e,t.provider,t.isTokenAutoRefreshEnabled),Yo(e).isTokenAutoRefreshEnabled&&LQe(r,"INTERNAL",()=>{}),r}function WUn(e,t,n){const r=fUn(e,Object.assign({},CQe));r.activated=!0,r.provider=t,r.cachedTokenPromise=SUn(e).then(i=>(i&&sT(i)&&(r.token=i,FQe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const GUn="app-check",K3e="app-check-internal";function YUn(){n1(new q0(GUn,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return DUn(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(K3e).initialize()})),n1(new q0(K3e,e=>{const t=e.getProvider("app-check").getImmediate();return OUn(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),zh($Un,LUn)}YUn();var BQe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof kI=="function"&&kI;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof kI=="function"&&kI,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,x!==o&&m(this,x)}f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,S){if(typeof x!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var A=new this.constructor(o);if(this.state!==c){var C=this.state===l?x:S;h(A,C,this.outcome)}else this.queue.push(new d(A,x,S));return A};function d(x,S,A){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(x){a.resolve(this.promise,x)},d.prototype.otherCallFulfilled=function(x){h(this.promise,this.onFulfilled,x)},d.prototype.callRejected=function(x){a.reject(this.promise,x)},d.prototype.otherCallRejected=function(x){h(this.promise,this.onRejected,x)};function h(x,S,A){s(function(){var C;try{C=S(A)}catch(N){return a.reject(x,N)}C===x?a.reject(x,new TypeError("Cannot resolve promise with itself")):a.resolve(x,C)})}a.resolve=function(x,S){var A=g(p,S);if(A.status==="error")return a.reject(x,A.value);var C=A.value;if(C)m(x,C);else{x.state=l,x.outcome=S;for(var N=-1,k=x.queue.length;++N<k;)x.queue[N].callFulfilled(S)}return x},a.reject=function(x,S){x.state=u,x.outcome=S;for(var A=-1,C=x.queue.length;++A<C;)x.queue[A].callRejected(S);return x};function p(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function m(x,S){var A=!1;function C(L){A||(A=!0,a.reject(x,L))}function N(L){A||(A=!0,a.resolve(x,L))}function k(){S(N,C)}var D=g(k);D.status==="error"&&C(D.value)}function g(x,S){var A={};try{A.value=x(S),A.status="success"}catch(C){A.status="error",A.value=C}return A}f.resolve=y;function y(x){return x instanceof this?x:a.resolve(new this(o),x)}f.reject=v;function v(x){var S=new this(o);return a.reject(S,x)}f.all=b;function b(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=x.length,C=!1;if(!A)return this.resolve([]);for(var N=new Array(A),k=0,D=-1,L=new this(o);++D<A;)O(x[D],D);return L;function O(B,q){S.resolve(B).then(H,function(G){C||(C=!0,a.reject(L,G))});function H(G){N[q]=G,++k===A&&!C&&(C=!0,a.resolve(L,N))}}}f.race=w;function w(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=x.length,C=!1;if(!A)return this.resolve([]);for(var N=-1,k=new this(o);++N<A;)D(x[N]);return k;function D(L){S.resolve(L).then(function(O){C||(C=!0,a.resolve(k,O))},function(O){C||(C=!0,a.reject(k,O))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee};function o(ee,pe){if(!(ee instanceof pe))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ee=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),pe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ee||pe)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ee,pe){ee=ee||[],pe=pe||{};try{return new Blob(ee,pe)}catch(_e){if(_e.name!=="TypeError")throw _e;for(var oe=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,we=new oe,Ae=0;Ae<ee.length;Ae+=1)we.append(ee[Ae]);return we.getBlob(pe.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ee,pe){pe&&ee.then(function(oe){pe(null,oe)},function(oe){pe(oe)})}function h(ee,pe,oe){typeof pe=="function"&&ee.then(pe),typeof oe=="function"&&ee.catch(oe)}function p(ee){return typeof ee!="string"&&(console.warn(ee+" used as a key, but it is not a string."),ee=String(ee)),ee}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",x="readwrite";function S(ee){for(var pe=ee.length,oe=new ArrayBuffer(pe),we=new Uint8Array(oe),Ae=0;Ae<pe;Ae++)we[Ae]=ee.charCodeAt(Ae);return oe}function A(ee){return new f(function(pe){var oe=ee.transaction(g,x),we=c([""]);oe.objectStore(g).put(we,"key"),oe.onabort=function(Ae){Ae.preventDefault(),Ae.stopPropagation(),pe(!1)},oe.oncomplete=function(){var Ae=navigator.userAgent.match(/Chrome\/(\d+)/),_e=navigator.userAgent.match(/Edge\//);pe(_e||!Ae||parseInt(Ae[1],10)>=43)}}).catch(function(){return!1})}function C(ee){return typeof y=="boolean"?f.resolve(y):A(ee).then(function(pe){return y=pe,y})}function N(ee){var pe=v[ee.name],oe={};oe.promise=new f(function(we,Ae){oe.resolve=we,oe.reject=Ae}),pe.deferredOperations.push(oe),pe.dbReady?pe.dbReady=pe.dbReady.then(function(){return oe.promise}):pe.dbReady=oe.promise}function k(ee){var pe=v[ee.name],oe=pe.deferredOperations.pop();if(oe)return oe.resolve(),oe.promise}function D(ee,pe){var oe=v[ee.name],we=oe.deferredOperations.pop();if(we)return we.reject(pe),we.promise}function L(ee,pe){return new f(function(oe,we){if(v[ee.name]=v[ee.name]||W(),ee.db)if(pe)N(ee),ee.db.close();else return oe(ee.db);var Ae=[ee.name];pe&&Ae.push(ee.version);var _e=u.open.apply(u,Ae);pe&&(_e.onupgradeneeded=function(qe){var it=_e.result;try{it.createObjectStore(ee.storeName),qe.oldVersion<=1&&it.createObjectStore(g)}catch(at){if(at.name==="ConstraintError")console.warn('The database "'+ee.name+'" has been upgraded from version '+qe.oldVersion+" to version "+qe.newVersion+', but the storage "'+ee.storeName+'" already exists.');else throw at}}),_e.onerror=function(qe){qe.preventDefault(),we(_e.error)},_e.onsuccess=function(){var qe=_e.result;qe.onversionchange=function(it){it.target.close()},oe(qe),k(ee)}})}function O(ee){return L(ee,!1)}function B(ee){return L(ee,!0)}function q(ee,pe){if(!ee.db)return!0;var oe=!ee.db.objectStoreNames.contains(ee.storeName),we=ee.version<ee.db.version,Ae=ee.version>ee.db.version;if(we&&(ee.version!==pe&&console.warn('The database "'+ee.name+`" can't be downgraded from version `+ee.db.version+" to version "+ee.version+"."),ee.version=ee.db.version),Ae||oe){if(oe){var _e=ee.db.version+1;_e>ee.version&&(ee.version=_e)}return!0}return!1}function H(ee){return new f(function(pe,oe){var we=new FileReader;we.onerror=oe,we.onloadend=function(Ae){var _e=btoa(Ae.target.result||"");pe({__local_forage_encoded_blob:!0,data:_e,type:ee.type})},we.readAsBinaryString(ee)})}function G(ee){var pe=S(atob(ee.data));return c([pe],{type:ee.type})}function K(ee){return ee&&ee.__local_forage_encoded_blob}function J(ee){var pe=this,oe=pe._initReady().then(function(){var we=v[pe._dbInfo.name];if(we&&we.dbReady)return we.dbReady});return h(oe,ee,ee),oe}function F(ee){N(ee);for(var pe=v[ee.name],oe=pe.forages,we=0;we<oe.length;we++){var Ae=oe[we];Ae._dbInfo.db&&(Ae._dbInfo.db.close(),Ae._dbInfo.db=null)}return ee.db=null,O(ee).then(function(_e){return ee.db=_e,q(ee)?B(ee):_e}).then(function(_e){ee.db=pe.db=_e;for(var qe=0;qe<oe.length;qe++)oe[qe]._dbInfo.db=_e}).catch(function(_e){throw D(ee,_e),_e})}function j(ee,pe,oe,we){we===void 0&&(we=1);try{var Ae=ee.db.transaction(ee.storeName,pe);oe(null,Ae)}catch(_e){if(we>0&&(!ee.db||_e.name==="InvalidStateError"||_e.name==="NotFoundError"))return f.resolve().then(function(){if(!ee.db||_e.name==="NotFoundError"&&!ee.db.objectStoreNames.contains(ee.storeName)&&ee.version<=ee.db.version)return ee.db&&(ee.version=ee.db.version+1),B(ee)}).then(function(){return F(ee).then(function(){j(ee,pe,oe,we-1)})}).catch(oe);oe(_e)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function M(ee){var pe=this,oe={db:null};if(ee)for(var we in ee)oe[we]=ee[we];var Ae=v[oe.name];Ae||(Ae=W(),v[oe.name]=Ae),Ae.forages.push(pe),pe._initReady||(pe._initReady=pe.ready,pe.ready=J);var _e=[];function qe(){return f.resolve()}for(var it=0;it<Ae.forages.length;it++){var at=Ae.forages[it];at!==pe&&_e.push(at._initReady().catch(qe))}var ut=Ae.forages.slice(0);return f.all(_e).then(function(){return oe.db=Ae.db,O(oe)}).then(function(vt){return oe.db=vt,q(oe,pe._defaultConfig.version)?B(oe):vt}).then(function(vt){oe.db=Ae.db=vt,pe._dbInfo=oe;for(var Lt=0;Lt<ut.length;Lt++){var $n=ut[Lt];$n!==pe&&($n._dbInfo.db=oe.db,$n._dbInfo.version=oe.version)}})}function V(ee,pe){var oe=this;ee=p(ee);var we=new f(function(Ae,_e){oe.ready().then(function(){j(oe._dbInfo,w,function(qe,it){if(qe)return _e(qe);try{var at=it.objectStore(oe._dbInfo.storeName),ut=at.get(ee);ut.onsuccess=function(){var vt=ut.result;vt===void 0&&(vt=null),K(vt)&&(vt=G(vt)),Ae(vt)},ut.onerror=function(){_e(ut.error)}}catch(vt){_e(vt)}})}).catch(_e)});return d(we,pe),we}function Q(ee,pe){var oe=this,we=new f(function(Ae,_e){oe.ready().then(function(){j(oe._dbInfo,w,function(qe,it){if(qe)return _e(qe);try{var at=it.objectStore(oe._dbInfo.storeName),ut=at.openCursor(),vt=1;ut.onsuccess=function(){var Lt=ut.result;if(Lt){var $n=Lt.value;K($n)&&($n=G($n));var Kt=ee($n,Lt.key,vt++);Kt!==void 0?Ae(Kt):Lt.continue()}else Ae()},ut.onerror=function(){_e(ut.error)}}catch(Lt){_e(Lt)}})}).catch(_e)});return d(we,pe),we}function se(ee,pe,oe){var we=this;ee=p(ee);var Ae=new f(function(_e,qe){var it;we.ready().then(function(){return it=we._dbInfo,b.call(pe)==="[object Blob]"?C(it.db).then(function(at){return at?pe:H(pe)}):pe}).then(function(at){j(we._dbInfo,x,function(ut,vt){if(ut)return qe(ut);try{var Lt=vt.objectStore(we._dbInfo.storeName);at===null&&(at=void 0);var $n=Lt.put(at,ee);vt.oncomplete=function(){at===void 0&&(at=null),_e(at)},vt.onabort=vt.onerror=function(){var Kt=$n.error?$n.error:$n.transaction.error;qe(Kt)}}catch(Kt){qe(Kt)}})}).catch(qe)});return d(Ae,oe),Ae}function be(ee,pe){var oe=this;ee=p(ee);var we=new f(function(Ae,_e){oe.ready().then(function(){j(oe._dbInfo,x,function(qe,it){if(qe)return _e(qe);try{var at=it.objectStore(oe._dbInfo.storeName),ut=at.delete(ee);it.oncomplete=function(){Ae()},it.onerror=function(){_e(ut.error)},it.onabort=function(){var vt=ut.error?ut.error:ut.transaction.error;_e(vt)}}catch(vt){_e(vt)}})}).catch(_e)});return d(we,pe),we}function he(ee){var pe=this,oe=new f(function(we,Ae){pe.ready().then(function(){j(pe._dbInfo,x,function(_e,qe){if(_e)return Ae(_e);try{var it=qe.objectStore(pe._dbInfo.storeName),at=it.clear();qe.oncomplete=function(){we()},qe.onabort=qe.onerror=function(){var ut=at.error?at.error:at.transaction.error;Ae(ut)}}catch(ut){Ae(ut)}})}).catch(Ae)});return d(oe,ee),oe}function Ce(ee){var pe=this,oe=new f(function(we,Ae){pe.ready().then(function(){j(pe._dbInfo,w,function(_e,qe){if(_e)return Ae(_e);try{var it=qe.objectStore(pe._dbInfo.storeName),at=it.count();at.onsuccess=function(){we(at.result)},at.onerror=function(){Ae(at.error)}}catch(ut){Ae(ut)}})}).catch(Ae)});return d(oe,ee),oe}function De(ee,pe){var oe=this,we=new f(function(Ae,_e){if(ee<0){Ae(null);return}oe.ready().then(function(){j(oe._dbInfo,w,function(qe,it){if(qe)return _e(qe);try{var at=it.objectStore(oe._dbInfo.storeName),ut=!1,vt=at.openKeyCursor();vt.onsuccess=function(){var Lt=vt.result;if(!Lt){Ae(null);return}ee===0||ut?Ae(Lt.key):(ut=!0,Lt.advance(ee))},vt.onerror=function(){_e(vt.error)}}catch(Lt){_e(Lt)}})}).catch(_e)});return d(we,pe),we}function rt(ee){var pe=this,oe=new f(function(we,Ae){pe.ready().then(function(){j(pe._dbInfo,w,function(_e,qe){if(_e)return Ae(_e);try{var it=qe.objectStore(pe._dbInfo.storeName),at=it.openKeyCursor(),ut=[];at.onsuccess=function(){var vt=at.result;if(!vt){we(ut);return}ut.push(vt.key),vt.continue()},at.onerror=function(){Ae(at.error)}}catch(vt){Ae(vt)}})}).catch(Ae)});return d(oe,ee),oe}function Re(ee,pe){pe=m.apply(this,arguments);var oe=this.config();ee=typeof ee!="function"&&ee||{},ee.name||(ee.name=ee.name||oe.name,ee.storeName=ee.storeName||oe.storeName);var we=this,Ae;if(!ee.name)Ae=f.reject("Invalid arguments");else{var _e=ee.name===oe.name&&we._dbInfo.db,qe=_e?f.resolve(we._dbInfo.db):O(ee).then(function(it){var at=v[ee.name],ut=at.forages;at.db=it;for(var vt=0;vt<ut.length;vt++)ut[vt]._dbInfo.db=it;return it});ee.storeName?Ae=qe.then(function(it){if(it.objectStoreNames.contains(ee.storeName)){var at=it.version+1;N(ee);var ut=v[ee.name],vt=ut.forages;it.close();for(var Lt=0;Lt<vt.length;Lt++){var $n=vt[Lt];$n._dbInfo.db=null,$n._dbInfo.version=at}var Kt=new f(function(er,qr){var br=u.open(ee.name,at);br.onerror=function(No){var Fc=br.result;Fc.close(),qr(No)},br.onupgradeneeded=function(){var No=br.result;No.deleteObjectStore(ee.storeName)},br.onsuccess=function(){var No=br.result;No.close(),er(No)}});return Kt.then(function(er){ut.db=er;for(var qr=0;qr<vt.length;qr++){var br=vt[qr];br._dbInfo.db=er,k(br._dbInfo)}}).catch(function(er){throw(D(ee,er)||f.resolve()).catch(function(){}),er})}}):Ae=qe.then(function(it){N(ee);var at=v[ee.name],ut=at.forages;it.close();for(var vt=0;vt<ut.length;vt++){var Lt=ut[vt];Lt._dbInfo.db=null}var $n=new f(function(Kt,er){var qr=u.deleteDatabase(ee.name);qr.onerror=function(){var br=qr.result;br&&br.close(),er(qr.error)},qr.onblocked=function(){console.warn('dropInstance blocked for database "'+ee.name+'" until all open connections are closed')},qr.onsuccess=function(){var br=qr.result;br&&br.close(),Kt(br)}});return $n.then(function(Kt){at.db=Kt;for(var er=0;er<ut.length;er++){var qr=ut[er];k(qr._dbInfo)}}).catch(function(Kt){throw(D(ee,Kt)||f.resolve()).catch(function(){}),Kt})})}return d(Ae,pe),Ae}var Tt={_driver:"asyncStorage",_initStorage:M,_support:l(),iterate:Q,getItem:V,setItem:se,removeItem:be,clear:he,length:Ce,key:De,keys:rt,dropInstance:Re};function Ze(){return typeof openDatabase=="function"}var It="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mt="~~local_forage_type~",Se=/^~~local_forage_type~([^~]+)~/,Fe="__lfsc__:",st=Fe.length,yt="arbf",Nt="blob",Je="si08",xe="ui08",kt="uic8",Rt="si16",Ee="si32",Oe="ur16",ot="ui32",_t="fl32",jt="fl64",Un=st+yt.length,hr=Object.prototype.toString;function Sr(ee){var pe=ee.length*.75,oe=ee.length,we,Ae=0,_e,qe,it,at;ee[ee.length-1]==="="&&(pe--,ee[ee.length-2]==="="&&pe--);var ut=new ArrayBuffer(pe),vt=new Uint8Array(ut);for(we=0;we<oe;we+=4)_e=It.indexOf(ee[we]),qe=It.indexOf(ee[we+1]),it=It.indexOf(ee[we+2]),at=It.indexOf(ee[we+3]),vt[Ae++]=_e<<2|qe>>4,vt[Ae++]=(qe&15)<<4|it>>2,vt[Ae++]=(it&3)<<6|at&63;return ut}function _i(ee){var pe=new Uint8Array(ee),oe="",we;for(we=0;we<pe.length;we+=3)oe+=It[pe[we]>>2],oe+=It[(pe[we]&3)<<4|pe[we+1]>>4],oe+=It[(pe[we+1]&15)<<2|pe[we+2]>>6],oe+=It[pe[we+2]&63];return pe.length%3===2?oe=oe.substring(0,oe.length-1)+"=":pe.length%3===1&&(oe=oe.substring(0,oe.length-2)+"=="),oe}function Sn(ee,pe){var oe="";if(ee&&(oe=hr.call(ee)),ee&&(oe==="[object ArrayBuffer]"||ee.buffer&&hr.call(ee.buffer)==="[object ArrayBuffer]")){var we,Ae=Fe;ee instanceof ArrayBuffer?(we=ee,Ae+=yt):(we=ee.buffer,oe==="[object Int8Array]"?Ae+=Je:oe==="[object Uint8Array]"?Ae+=xe:oe==="[object Uint8ClampedArray]"?Ae+=kt:oe==="[object Int16Array]"?Ae+=Rt:oe==="[object Uint16Array]"?Ae+=Oe:oe==="[object Int32Array]"?Ae+=Ee:oe==="[object Uint32Array]"?Ae+=ot:oe==="[object Float32Array]"?Ae+=_t:oe==="[object Float64Array]"?Ae+=jt:pe(new Error("Failed to get type for BinaryArray"))),pe(Ae+_i(we))}else if(oe==="[object Blob]"){var _e=new FileReader;_e.onload=function(){var qe=mt+ee.type+"~"+_i(this.result);pe(Fe+Nt+qe)},_e.readAsArrayBuffer(ee)}else try{pe(JSON.stringify(ee))}catch(qe){console.error("Couldn't convert value into a JSON string: ",ee),pe(null,qe)}}function zn(ee){if(ee.substring(0,st)!==Fe)return JSON.parse(ee);var pe=ee.substring(Un),oe=ee.substring(st,Un),we;if(oe===Nt&&Se.test(pe)){var Ae=pe.match(Se);we=Ae[1],pe=pe.substring(Ae[0].length)}var _e=Sr(pe);switch(oe){case yt:return _e;case Nt:return c([_e],{type:we});case Je:return new Int8Array(_e);case xe:return new Uint8Array(_e);case kt:return new Uint8ClampedArray(_e);case Rt:return new Int16Array(_e);case Oe:return new Uint16Array(_e);case Ee:return new Int32Array(_e);case ot:return new Uint32Array(_e);case _t:return new Float32Array(_e);case jt:return new Float64Array(_e);default:throw new Error("Unkown type: "+oe)}}var pr={serialize:Sn,deserialize:zn,stringToBuffer:Sr,bufferToString:_i};function yr(ee,pe,oe,we){ee.executeSql("CREATE TABLE IF NOT EXISTS "+pe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],oe,we)}function ea(ee){var pe=this,oe={db:null};if(ee)for(var we in ee)oe[we]=typeof ee[we]!="string"?ee[we].toString():ee[we];var Ae=new f(function(_e,qe){try{oe.db=openDatabase(oe.name,String(oe.version),oe.description,oe.size)}catch(it){return qe(it)}oe.db.transaction(function(it){yr(it,oe,function(){pe._dbInfo=oe,_e()},function(at,ut){qe(ut)})},qe)});return oe.serializer=pr,Ae}function rs(ee,pe,oe,we,Ae,_e){ee.executeSql(oe,we,Ae,function(qe,it){it.code===it.SYNTAX_ERR?qe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[pe.storeName],function(at,ut){ut.rows.length?_e(at,it):yr(at,pe,function(){at.executeSql(oe,we,Ae,_e)},_e)},_e):_e(qe,it)},_e)}function ms(ee,pe){var oe=this;ee=p(ee);var we=new f(function(Ae,_e){oe.ready().then(function(){var qe=oe._dbInfo;qe.db.transaction(function(it){rs(it,qe,"SELECT * FROM "+qe.storeName+" WHERE key = ? LIMIT 1",[ee],function(at,ut){var vt=ut.rows.length?ut.rows.item(0).value:null;vt&&(vt=qe.serializer.deserialize(vt)),Ae(vt)},function(at,ut){_e(ut)})})}).catch(_e)});return d(we,pe),we}function Ls(ee,pe){var oe=this,we=new f(function(Ae,_e){oe.ready().then(function(){var qe=oe._dbInfo;qe.db.transaction(function(it){rs(it,qe,"SELECT * FROM "+qe.storeName,[],function(at,ut){for(var vt=ut.rows,Lt=vt.length,$n=0;$n<Lt;$n++){var Kt=vt.item($n),er=Kt.value;if(er&&(er=qe.serializer.deserialize(er)),er=ee(er,Kt.key,$n+1),er!==void 0){Ae(er);return}}Ae()},function(at,ut){_e(ut)})})}).catch(_e)});return d(we,pe),we}function Hr(ee,pe,oe,we){var Ae=this;ee=p(ee);var _e=new f(function(qe,it){Ae.ready().then(function(){pe===void 0&&(pe=null);var at=pe,ut=Ae._dbInfo;ut.serializer.serialize(pe,function(vt,Lt){Lt?it(Lt):ut.db.transaction(function($n){rs($n,ut,"INSERT OR REPLACE INTO "+ut.storeName+" (key, value) VALUES (?, ?)",[ee,vt],function(){qe(at)},function(Kt,er){it(er)})},function($n){if($n.code===$n.QUOTA_ERR){if(we>0){qe(Hr.apply(Ae,[ee,at,oe,we-1]));return}it($n)}})})}).catch(it)});return d(_e,oe),_e}function gs(ee,pe,oe){return Hr.apply(this,[ee,pe,oe,1])}function Mc(ee,pe){var oe=this;ee=p(ee);var we=new f(function(Ae,_e){oe.ready().then(function(){var qe=oe._dbInfo;qe.db.transaction(function(it){rs(it,qe,"DELETE FROM "+qe.storeName+" WHERE key = ?",[ee],function(){Ae()},function(at,ut){_e(ut)})})}).catch(_e)});return d(we,pe),we}function ta(ee){var pe=this,oe=new f(function(we,Ae){pe.ready().then(function(){var _e=pe._dbInfo;_e.db.transaction(function(qe){rs(qe,_e,"DELETE FROM "+_e.storeName,[],function(){we()},function(it,at){Ae(at)})})}).catch(Ae)});return d(oe,ee),oe}function Vu(ee){var pe=this,oe=new f(function(we,Ae){pe.ready().then(function(){var _e=pe._dbInfo;_e.db.transaction(function(qe){rs(qe,_e,"SELECT COUNT(key) as c FROM "+_e.storeName,[],function(it,at){var ut=at.rows.item(0).c;we(ut)},function(it,at){Ae(at)})})}).catch(Ae)});return d(oe,ee),oe}function Br(ee,pe){var oe=this,we=new f(function(Ae,_e){oe.ready().then(function(){var qe=oe._dbInfo;qe.db.transaction(function(it){rs(it,qe,"SELECT key FROM "+qe.storeName+" WHERE id = ? LIMIT 1",[ee+1],function(at,ut){var vt=ut.rows.length?ut.rows.item(0).key:null;Ae(vt)},function(at,ut){_e(ut)})})}).catch(_e)});return d(we,pe),we}function ki(ee){var pe=this,oe=new f(function(we,Ae){pe.ready().then(function(){var _e=pe._dbInfo;_e.db.transaction(function(qe){rs(qe,_e,"SELECT key FROM "+_e.storeName,[],function(it,at){for(var ut=[],vt=0;vt<at.rows.length;vt++)ut.push(at.rows.item(vt).key);we(ut)},function(it,at){Ae(at)})})}).catch(Ae)});return d(oe,ee),oe}function mi(ee){return new f(function(pe,oe){ee.transaction(function(we){we.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ae,_e){for(var qe=[],it=0;it<_e.rows.length;it++)qe.push(_e.rows.item(it).name);pe({db:ee,storeNames:qe})},function(Ae,_e){oe(_e)})},function(we){oe(we)})})}function eo(ee,pe){pe=m.apply(this,arguments);var oe=this.config();ee=typeof ee!="function"&&ee||{},ee.name||(ee.name=ee.name||oe.name,ee.storeName=ee.storeName||oe.storeName);var we=this,Ae;return ee.name?Ae=new f(function(_e){var qe;ee.name===oe.name?qe=we._dbInfo.db:qe=openDatabase(ee.name,"","",0),ee.storeName?_e({db:qe,storeNames:[ee.storeName]}):_e(mi(qe))}).then(function(_e){return new f(function(qe,it){_e.db.transaction(function(at){function ut(Kt){return new f(function(er,qr){at.executeSql("DROP TABLE IF EXISTS "+Kt,[],function(){er()},function(br,No){qr(No)})})}for(var vt=[],Lt=0,$n=_e.storeNames.length;Lt<$n;Lt++)vt.push(ut(_e.storeNames[Lt]));f.all(vt).then(function(){qe()}).catch(function(Kt){it(Kt)})},function(at){it(at)})})}):Ae=f.reject("Invalid arguments"),d(Ae,pe),Ae}var oi={_driver:"webSQLStorage",_initStorage:ea,_support:Ze(),iterate:Ls,getItem:ms,setItem:gs,removeItem:Mc,clear:ta,length:Vu,key:Br,keys:ki,dropInstance:eo};function Ri(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function me(ee,pe){var oe=ee.name+"/";return ee.storeName!==pe.storeName&&(oe+=ee.storeName+"/"),oe}function ue(){var ee="_localforage_support_test";try{return localStorage.setItem(ee,!0),localStorage.removeItem(ee),!1}catch{return!0}}function ge(){return!ue()||localStorage.length>0}function Me(ee){var pe=this,oe={};if(ee)for(var we in ee)oe[we]=ee[we];return oe.keyPrefix=me(ee,pe._defaultConfig),ge()?(pe._dbInfo=oe,oe.serializer=pr,f.resolve()):f.reject()}function Le(ee){var pe=this,oe=pe.ready().then(function(){for(var we=pe._dbInfo.keyPrefix,Ae=localStorage.length-1;Ae>=0;Ae--){var _e=localStorage.key(Ae);_e.indexOf(we)===0&&localStorage.removeItem(_e)}});return d(oe,ee),oe}function wt(ee,pe){var oe=this;ee=p(ee);var we=oe.ready().then(function(){var Ae=oe._dbInfo,_e=localStorage.getItem(Ae.keyPrefix+ee);return _e&&(_e=Ae.serializer.deserialize(_e)),_e});return d(we,pe),we}function Ut(ee,pe){var oe=this,we=oe.ready().then(function(){for(var Ae=oe._dbInfo,_e=Ae.keyPrefix,qe=_e.length,it=localStorage.length,at=1,ut=0;ut<it;ut++){var vt=localStorage.key(ut);if(vt.indexOf(_e)===0){var Lt=localStorage.getItem(vt);if(Lt&&(Lt=Ae.serializer.deserialize(Lt)),Lt=ee(Lt,vt.substring(qe),at++),Lt!==void 0)return Lt}}});return d(we,pe),we}function dn(ee,pe){var oe=this,we=oe.ready().then(function(){var Ae=oe._dbInfo,_e;try{_e=localStorage.key(ee)}catch{_e=null}return _e&&(_e=_e.substring(Ae.keyPrefix.length)),_e});return d(we,pe),we}function Zn(ee){var pe=this,oe=pe.ready().then(function(){for(var we=pe._dbInfo,Ae=localStorage.length,_e=[],qe=0;qe<Ae;qe++){var it=localStorage.key(qe);it.indexOf(we.keyPrefix)===0&&_e.push(it.substring(we.keyPrefix.length))}return _e});return d(oe,ee),oe}function ur(ee){var pe=this,oe=pe.keys().then(function(we){return we.length});return d(oe,ee),oe}function On(ee,pe){var oe=this;ee=p(ee);var we=oe.ready().then(function(){var Ae=oe._dbInfo;localStorage.removeItem(Ae.keyPrefix+ee)});return d(we,pe),we}function Ar(ee,pe,oe){var we=this;ee=p(ee);var Ae=we.ready().then(function(){pe===void 0&&(pe=null);var _e=pe;return new f(function(qe,it){var at=we._dbInfo;at.serializer.serialize(pe,function(ut,vt){if(vt)it(vt);else try{localStorage.setItem(at.keyPrefix+ee,ut),qe(_e)}catch(Lt){(Lt.name==="QuotaExceededError"||Lt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&it(Lt),it(Lt)}})})});return d(Ae,oe),Ae}function ai(ee,pe){if(pe=m.apply(this,arguments),ee=typeof ee!="function"&&ee||{},!ee.name){var oe=this.config();ee.name=ee.name||oe.name,ee.storeName=ee.storeName||oe.storeName}var we=this,Ae;return ee.name?Ae=new f(function(_e){ee.storeName?_e(me(ee,we._defaultConfig)):_e(ee.name+"/")}).then(function(_e){for(var qe=localStorage.length-1;qe>=0;qe--){var it=localStorage.key(qe);it.indexOf(_e)===0&&localStorage.removeItem(it)}}):Ae=f.reject("Invalid arguments"),d(Ae,pe),Ae}var an={_driver:"localStorageWrapper",_initStorage:Me,_support:Ri(),iterate:Ut,getItem:wt,setItem:Ar,removeItem:On,clear:Le,length:ur,key:dn,keys:Zn,dropInstance:ai},Cr=function(pe,oe){return pe===oe||typeof pe=="number"&&typeof oe=="number"&&isNaN(pe)&&isNaN(oe)},Jr=function(pe,oe){for(var we=pe.length,Ae=0;Ae<we;){if(Cr(pe[Ae],oe))return!0;Ae++}return!1},vr=Array.isArray||function(ee){return Object.prototype.toString.call(ee)==="[object Array]"},Ni={},bo={},Pi={INDEXEDDB:Tt,WEBSQL:oi,LOCALSTORAGE:an},ko=[Pi.INDEXEDDB._driver,Pi.WEBSQL._driver,Pi.LOCALSTORAGE._driver],is=["dropInstance"],ss=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(is),Ro={description:"",driver:ko.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ca(ee,pe){ee[pe]=function(){var oe=arguments;return ee.ready().then(function(){return ee[pe].apply(ee,oe)})}}function _o(){for(var ee=1;ee<arguments.length;ee++){var pe=arguments[ee];if(pe)for(var oe in pe)pe.hasOwnProperty(oe)&&(vr(pe[oe])?arguments[0][oe]=pe[oe].slice():arguments[0][oe]=pe[oe])}return arguments[0]}var Ol=function(){function ee(pe){o(this,ee);for(var oe in Pi)if(Pi.hasOwnProperty(oe)){var we=Pi[oe],Ae=we._driver;this[oe]=Ae,Ni[Ae]||this.defineDriver(we)}this._defaultConfig=_o({},Ro),this._config=_o({},this._defaultConfig,pe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ee.prototype.config=function(oe){if((typeof oe>"u"?"undefined":s(oe))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var we in oe){if(we==="storeName"&&(oe[we]=oe[we].replace(/\W/g,"_")),we==="version"&&typeof oe[we]!="number")return new Error("Database version must be a number.");this._config[we]=oe[we]}return"driver"in oe&&oe.driver?this.setDriver(this._config.driver):!0}else return typeof oe=="string"?this._config[oe]:this._config},ee.prototype.defineDriver=function(oe,we,Ae){var _e=new f(function(qe,it){try{var at=oe._driver,ut=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!oe._driver){it(ut);return}for(var vt=ss.concat("_initStorage"),Lt=0,$n=vt.length;Lt<$n;Lt++){var Kt=vt[Lt],er=!Jr(is,Kt);if((er||oe[Kt])&&typeof oe[Kt]!="function"){it(ut);return}}var qr=function(){for(var Fc=function(Hu){return function(){var nu=new Error("Method "+Hu+" is not implemented by the current driver"),zd=f.reject(nu);return d(zd,arguments[arguments.length-1]),zd}},Ud=0,$1=is.length;Ud<$1;Ud++){var bp=is[Ud];oe[bp]||(oe[bp]=Fc(bp))}};qr();var br=function(Fc){Ni[at]&&console.info("Redefining LocalForage driver: "+at),Ni[at]=oe,bo[at]=Fc,qe()};"_support"in oe?oe._support&&typeof oe._support=="function"?oe._support().then(br,it):br(!!oe._support):br(!0)}catch(No){it(No)}});return h(_e,we,Ae),_e},ee.prototype.driver=function(){return this._driver||null},ee.prototype.getDriver=function(oe,we,Ae){var _e=Ni[oe]?f.resolve(Ni[oe]):f.reject(new Error("Driver not found."));return h(_e,we,Ae),_e},ee.prototype.getSerializer=function(oe){var we=f.resolve(pr);return h(we,oe),we},ee.prototype.ready=function(oe){var we=this,Ae=we._driverSet.then(function(){return we._ready===null&&(we._ready=we._initDriver()),we._ready});return h(Ae,oe,oe),Ae},ee.prototype.setDriver=function(oe,we,Ae){var _e=this;vr(oe)||(oe=[oe]);var qe=this._getSupportedDrivers(oe);function it(){_e._config.driver=_e.driver()}function at(Lt){return _e._extend(Lt),it(),_e._ready=_e._initStorage(_e._config),_e._ready}function ut(Lt){return function(){var $n=0;function Kt(){for(;$n<Lt.length;){var er=Lt[$n];return $n++,_e._dbInfo=null,_e._ready=null,_e.getDriver(er).then(at).catch(Kt)}it();var qr=new Error("No available storage method found.");return _e._driverSet=f.reject(qr),_e._driverSet}return Kt()}}var vt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=vt.then(function(){var Lt=qe[0];return _e._dbInfo=null,_e._ready=null,_e.getDriver(Lt).then(function($n){_e._driver=$n._driver,it(),_e._wrapLibraryMethodsWithReady(),_e._initDriver=ut(qe)})}).catch(function(){it();var Lt=new Error("No available storage method found.");return _e._driverSet=f.reject(Lt),_e._driverSet}),h(this._driverSet,we,Ae),this._driverSet},ee.prototype.supports=function(oe){return!!bo[oe]},ee.prototype._extend=function(oe){_o(this,oe)},ee.prototype._getSupportedDrivers=function(oe){for(var we=[],Ae=0,_e=oe.length;Ae<_e;Ae++){var qe=oe[Ae];this.supports(qe)&&we.push(qe)}return we},ee.prototype._wrapLibraryMethodsWithReady=function(){for(var oe=0,we=ss.length;oe<we;oe++)Ca(this,ss[oe])},ee.prototype.createInstance=function(oe){return new ee(oe)},ee}(),Of=new Ol;r.exports=Of},{3:3}]},{},[4])(4)})})(BQe);var KUn=BQe.exports;const DE=Rf(KUn);var Pa=[];for(var MG=0;MG<256;++MG)Pa.push((MG+256).toString(16).slice(1));function XUn(e,t=0){return(Pa[e[t+0]]+Pa[e[t+1]]+Pa[e[t+2]]+Pa[e[t+3]]+"-"+Pa[e[t+4]]+Pa[e[t+5]]+"-"+Pa[e[t+6]]+Pa[e[t+7]]+"-"+Pa[e[t+8]]+Pa[e[t+9]]+"-"+Pa[e[t+10]]+Pa[e[t+11]]+Pa[e[t+12]]+Pa[e[t+13]]+Pa[e[t+14]]+Pa[e[t+15]]).toLowerCase()}var wD,QUn=new Uint8Array(16);function JUn(){if(!wD&&(wD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!wD))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wD(QUn)}var ZUn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const X3e={randomUUID:ZUn};function D7(e,t,n){if(X3e.randomUUID&&!e)return X3e.randomUUID();e=e||{};var r=e.random||(e.rng||JUn)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,XUn(r)}class jQe{constructor(t){Ku(this,"engine");Ku(this,"connected",!1);Ku(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function O7(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function bI(e){return e.participantId!==void 0}class Hp extends jQe{constructor(){super("firebase");Ku(this,"RECAPTCHAV3TOKEN","6LdQ8qUqAAAAAPE14fuWshHdzOerFOSMhzEdA1Wp");Ku(this,"firestore");Ku(this,"collectionPrefix","prod-");Ku(this,"studyCollection");Ku(this,"storage");Ku(this,"studyId","");Ku(this,"localForage",DE.createInstance({name:"currentParticipantId"}));Ku(this,"participantData",null);Ku(this,"userManagementData",{});const n=qj.parse(`
{
  apiKey: "AIzaSyBB3ZVfd5sNerH0LLPbe8Pn-NXtLOO4-8M",
  authDomain: "vis-decode-operator-1eb8d.firebaseapp.com",
  projectId: "vis-decode-operator-1eb8d",
  storageBucket: "vis-decode-operator-1eb8d.firebasestorage.app",
  messagingSenderId: "967262141033",
  appId: "1:967262141033:web:b1ed6ad992b441194440f8"
}
`),r=iKe(n);this.firestore=Xjn(r,{}),this.storage=e3e();try{qUn(r,{provider:new qde(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await Qjn(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=A7();if(!i.currentUser&&(await SLn(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=zl(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await O7(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(bI(a))return this.participantData=a,a;const l=await O7(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=os(this.studyCollection,"configHash"),r=await vD(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=os(this.studyCollection,"configHash");await mu(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Vc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=D7(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){const i=s=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,s.data)};n.addEventListener("dataavailable",i),n.requestData(),setTimeout(()=>{n.removeEventListener("dataavailable",i)},0)}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=os(this.studyCollection,"sequenceAssignment");await mu(i,{});const s=zl(i,"sequenceAssignment"),o=os(s,this.currentParticipantId),a=OG(s,M3e("rejected","==",!0),M3e("claimed","==",!1)),u=await vE(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await mu(m.ref,{claimed:!0}),await mu(o,{participantId:this.currentParticipantId,timestamp:g,rejected:!1,claimed:!1,completed:null}))}else r.dataCollectionEnabled&&await mu(o,{participantId:this.currentParticipantId,timestamp:z3e(),rejected:!1,claimed:!1,completed:null});const l=OG(s,F3e("timestamp","asc")),d=(await vE(l)).docs.map(m=>m.data()).filter(m=>!m.rejected).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Vc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await yI(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");bI(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=e3e(),s=await hD(Vc(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return bI(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=D7();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=os(this.studyCollection,"sequenceAssignment"),i=zl(r,"sequenceAssignment"),s=os(i,this.currentParticipantId);return await U3e(s,{completed:z3e()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=zl(this.firestore,"user-management"),i=await vE(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await mu(os(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await mu(os(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await mu(os(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await mu(os(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await mu(os(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Vc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await yI(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");bI(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=zl(this.firestore,`${this.collectionPrefix}${n}`),o=Vc(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!bI(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=os(s,"sequenceAssignment"),l=zl(u,"sequenceAssignment"),c=os(l,r);await U3e(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=os(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await mu(s,{[r]:i},{merge:!0})}async getModes(n){const r=os(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await vD(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await mu(r,s),s}async getParticipantsStatusCounts(n){const r=zl(this.firestore,`${this.collectionPrefix}${n}`),i=os(r,"sequenceAssignment"),s=zl(i,"sequenceAssignment"),o=OG(s,F3e("timestamp","asc")),u=(await vE(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=os(this.firestore,"metadata","collections"),i=await vD(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=os(this.firestore,"metadata","collections");await mu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=os(this.firestore,"metadata","collections");return await mu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=os(this.firestore,"metadata","collections"),i=await vD(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await mu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Vc(this.storage,n),s=(await yI(r)).items.map(o=>ZCe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Vc(this.storage,n),o=(await yI(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Vc(this.storage,n),s=Vc(this.storage,r),o=await hD(i),u=await(await fetch(o)).blob();await dD(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=zl(this.firestore,n),s=os(i,"sequenceAssignment"),o=zl(s,"sequenceAssignment"),a=zl(this.firestore,r),u=os(a,"sequenceAssignment");await mu(u,{});const l=zl(u,"sequenceAssignment"),c=await vE(o),f=V3e(this.firestore);c.docs.forEach(d=>{const h=os(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=zl(this.firestore,n),i=os(r,"sequenceAssignment"),s=zl(i,"sequenceAssignment"),o=await vE(s),a=V3e(this.firestore);o.forEach(u=>{const l=os(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Vc(this.storage,n);return(await yI(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Vc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await hD(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await hD(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=Vc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await dD(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await dD(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await dD(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Vc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await ZCe(i)}}const UQe=R.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),lN=()=>R.useContext(UQe);function ezn({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=R.useState(t),[o,a]=R.useState(!1),{storageEngine:u}=yo(),l=async()=>{const h=A7();try{await PLn(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;R.useEffect(()=>{s(t);let h;if(u instanceof Hp)try{h=A7()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof Hp){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=NLn(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=R.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return E.jsx(UQe.Provider,{value:d,children:i.determiningStatus?E.jsx(vf,{visible:!0}):e})}function tzn({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?E.jsx(ln.Td,{children:E.jsx($i,{miw:100,children:e.timedOut?E.jsx(Ue,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>E.jsxs(ke,{children:[E.jsxs(Ue,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?E.jsx(Ue,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):E.jsx(Ue,{span:!0,children:n})]},`cell-${t}`))})}):E.jsx(ln.Td,{children:"N/A"})}function Q3e({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=IFe(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?E.jsxs(ln.Td,{children:[t.toFixed(1)," ","s",n&&E.jsxs(E.Fragment,{children:[E.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):E.jsx(ln.Td,{children:"N/A"})}function nzn(e){const{metaData:t}=e;return E.jsx(ln.Td,{children:E.jsx(wne,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:E.jsxs($i,{gap:"xs",children:[E.jsxs(ke,{children:["IP:"," ",t.ip]}),E.jsxs(ke,{children:["Language:"," ",t.language]}),E.jsxs(ke,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),E.jsxs(ke,{children:["User Agent:"," ",t.userAgent]})]})})})}function rzn({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=yo(),{studyId:i}=k0(),{user:s}=lN(),o=async(w,x)=>{if(r&&i)if(s.isAdmin){const S=x===""?"Rejected by admin":x;await r.rejectParticipant(i,w,S),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=R.useState([]),[l,c]=R.useState(!1),[f,d]=R.useState(!1),[h,p]=R.useState(""),m=async()=>{c(!0),d(!1);const w=a.map(async x=>await o(x,h));await Promise.all(w),u([]),await n(),c(!1)};function g(w){w==="all"?a.length===e.length?u([]):u(e.map(x=>x.participantId)):a.includes(w)?u(a.filter(x=>x!==w)):u([...a,w])}const y=vPe(t.sequence),v=[E.jsx(ln.Th,{children:E.jsx(qt,{justify:"center",children:E.jsx(sc,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),E.jsx(ln.Th,{children:"ID"},"ID"),E.jsx(ln.Th,{children:"Status"},"status"),E.jsx(ln.Th,{children:"Tags"},"tags"),E.jsx(ln.Th,{children:"Meta"},"meta"),...y.flatMap(w=>[E.jsx(ln.Th,{children:w.componentName},`header-${w.componentName}-${w.timesSeenInBlock}`),E.jsxs(ln.Th,{children:[E.jsx("span",{style:{whiteSpace:"nowrap"},children:w.componentName})," ","Duration (clean)"]},`header-${w.componentName}-${w.timesSeenInBlock}-duration`)]),E.jsx(ln.Th,{children:"Total Duration (clean)"},"total-duration")],b=e.map(w=>E.jsxs(ln.Tr,{children:[E.jsx(ln.Td,{children:E.jsx(qt,{justify:"center",children:E.jsx(sc,{mb:-4,checked:a.includes(w.participantId),onChange:()=>g(w.participantId)})})}),E.jsx(ln.Td,{style:{whiteSpace:"nowrap"},children:w.participantId}),E.jsx(ln.Td,{children:E.jsxs(qt,{direction:"column",miw:100,children:[E.jsxs(qt,{direction:"row",align:"center",children:[w.rejected?E.jsx(us,{label:"Rejected",children:E.jsx(Mne,{size:16,color:"red",style:{marginBottom:-3}})}):w.completed?E.jsx(us,{label:"Completed",children:E.jsx(y5e,{size:16,color:"teal",style:{marginBottom:-3}})}):E.jsx(us,{label:"In Progress",children:E.jsx(v5e,{size:16,color:"orange",style:{marginBottom:-3}})}),!w.completed&&E.jsxs(Ue,{size:"sm",mb:-1,ml:4,children:[(Object.entries(w.answers).filter(([x,S])=>S.endTime!==-1&&S.endTime!==void 0).length/(Wh(w.sequence).length-1)*100).toFixed(2),"%"]})]}),w.rejected&&E.jsx(Ue,{mt:5,fz:10,children:w.rejected.reason})]})}),E.jsx(ln.Td,{children:E.jsx(qt,{direction:"column",miw:100,children:(w.participantTags||[]).map(x=>E.jsxs(Ue,{fz:10,children:["-"," ",x]},`tag-${x}`))})}),w.metadata?E.jsx(nzn,{metaData:w.metadata}):E.jsx(ln.Td,{children:"N/A"}),y.map(x=>{const S=lre(w.sequence,x.orderPath),A=S&&Object.entries(w.answers).sort((C,N)=>{const k=parseInt(C[0].slice(C[0].lastIndexOf("_")+1),10),D=parseInt(N[0].slice(N[0].lastIndexOf("_")+1),10);return k-D}).filter(([C])=>{const N=C.slice(0,C.lastIndexOf("_")),k=parseInt(C.slice(C.lastIndexOf("_")+1),10);return N===x.componentName&&k<=S[0].lastIndex&&k>=S[0].firstIndex});return A!==null&&A.length>=x.timesSeenInBlock+1&&A[x.timesSeenInBlock][1].endTime!==-1?E.jsxs(ni.Fragment,{children:[E.jsx(tzn,{cellData:A[x.timesSeenInBlock][1]}),E.jsx(Q3e,{cellData:A[x.timesSeenInBlock][1]})]},`cellgroup-${w.participantId}-${x.componentName}-${x.timesSeenInBlock}`):E.jsxs(ni.Fragment,{children:[E.jsx(ln.Td,{children:"N/A"}),E.jsx(ln.Td,{children:"N/A"})]},`cellgroup-${w.participantId}-${x.componentName}-${x.timesSeenInBlock}`)}),E.jsx(Q3e,{cellData:{startTime:Math.min(...Object.values(w.answers).filter(x=>x.endTime!==-1&&x.endTime!==void 0).map(x=>x.startTime)),endTime:Math.max(...Object.values(w.answers).filter(x=>x.endTime!==-1&&x.endTime!==void 0).map(x=>x.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(w.answers).flatMap(x=>x.windowEvents),timedOut:!1}},`cell-${w.participantId}-total-duration`)]},w.participantId));return e.length>0?E.jsxs(E.Fragment,{children:[E.jsx(vf,{visible:l,overlayProps:{blur:2}}),E.jsxs(qt,{justify:"space-between",mb:8,p:8,children:[E.jsx(bi,{children:E.jsx(RA,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(w=>w.participantId))],searchable:!0,value:null,leftSection:E.jsx(D1t,{size:14}),onChange:w=>w&&g(w)})}),E.jsxs(bi,{children:[E.jsx(KYe,{visibleParticipants:e,studyId:i||""}),E.jsxs(on,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),E.jsx(qt,{direction:"column",style:{width:"100%",overflow:"auto"},children:E.jsxs(ln,{striped:!0,withTableBorder:!0,children:[E.jsx(ln.Thead,{children:E.jsx(ln.Tr,{children:v})}),E.jsx(ln.Tbody,{children:b})]})}),E.jsxs(Ks,{opened:f,onClose:()=>d(!1),title:E.jsxs(Ue,{children:["Reject Participants (",a.length,")"]}),children:[E.jsx(ag,{label:"Please enter the reason for rejection.",onChange:w=>p(w.target.value)}),E.jsxs(qt,{mt:"sm",justify:"right",children:[E.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),E.jsx(on,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):E.jsxs(E.Fragment,{children:[E.jsx(ba,{h:"xl"}),E.jsx(qt,{justify:"center",align:"center",children:E.jsx(Ue,{children:"No data available"})})]})}function izn({studyId:e,refresh:t}){const[n,r]=R.useState(!1),[i,s]=R.useState(!1),[o,a]=R.useState(!1),[u,l]=R.useState(!1),[c,f]=R.useState(""),[d,h]=R.useState([]),[p,m]=R.useState(""),[g,y]=R.useState(""),[v,b]=R.useState(!1),[w,x]=R.useState(!1),{storageEngine:S}=yo(),A=S,C=R.useCallback(async()=>{x(!0);const F=await A.getSnapshots(e);h(F),x(!1)},[A,e]);R.useEffect(()=>{C()},[C]);const N=async(F,...j)=>{b(!0);const W=await F(...j);W.status==="SUCCESS"?(C(),b(!1),await t(),W.notifications&&W.notifications.forEach(M=>{w6(M)})):(b(!1),w6({title:W.error.title,message:W.error.message,color:"red"}))},k=async()=>{await N(A.createSnapshot.bind(A),e,!1)},D=async()=>{m(""),r(!1),await N(A.createSnapshot.bind(A),e,!0)},L=async()=>{a(!1),await N(A.renameSnapshot.bind(A),c,g)},O=async F=>{await N(A.restoreSnapshot.bind(A),e,F)},B=async()=>{m(""),s(!1),await N(A.removeSnapshotOrLive.bind(A),c,!0)},q=async()=>{m(""),l(!1),await N(A.removeSnapshotOrLive.bind(A),e,!0)},H=()=>age({title:"Create a Snapshot",children:E.jsx(Ue,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),G=F=>age({title:"Restore Snapshot",children:E.jsx(Ue,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>O(F)}),K=F=>{const j=/-snapshot-(.+)$/,W=F.match(j);return W&&W[1]?W[1].replace("T"," "):null},J=async F=>{const j=F.slice(F.indexOf("-")+1);return await A.getAllParticipantsDataByStudy(j)};return E.jsxs(E.Fragment,{children:[E.jsx(vf,{visible:v}),E.jsxs(qt,{justify:"space-between",align:"center",children:[E.jsxs(ke,{style:{width:"70%"},children:[E.jsx(Ws,{order:5,children:"Create a Snapshot"}),E.jsxs(Ue,{children:["This will create a snapshot of the live"," ",E.jsx(Ue,{span:!0,fw:700,children:e})," ","database. It will"," ",E.jsx(Ue,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),E.jsx(us,{label:"Create a snapshot",children:E.jsx(on,{onClick:H,children:"Snapshot"})})]}),E.jsx(ba,{h:"lg"}),E.jsxs(qt,{justify:"space-between",align:"center",children:[E.jsxs(ke,{style:{width:"70%"},children:[E.jsx(Ws,{order:5,children:"Archive Data"}),E.jsxs(Ue,{children:["This will create a snapshot of the live"," ",E.jsx(Ue,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),E.jsx(us,{label:"Snapshot and Delete Data",children:E.jsx(on,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),E.jsx(ba,{h:"lg"}),E.jsxs(qt,{justify:"space-between",align:"center",children:[E.jsxs(ke,{style:{width:"70%"},children:[E.jsx(Ws,{order:5,children:"Delete Data"}),E.jsxs(Ue,{children:["This will delete the live"," ",E.jsx(Ue,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),E.jsx(us,{label:"Delete Data",children:E.jsx(on,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),E.jsx(ba,{h:"xl"}),E.jsxs(qt,{direction:"column",children:[E.jsx(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:E.jsx(Ws,{order:5,children:"Snapshots"})}),E.jsxs(ke,{style:{position:"relative"},children:[E.jsx(vf,{visible:w}),d.length>0?E.jsxs(ln,{children:[E.jsx(ln.Thead,{children:E.jsxs(ln.Tr,{children:[E.jsx(ln.Th,{children:"Snapshot Name"}),E.jsx(ln.Th,{children:"Date Created"}),E.jsx(ln.Th,{children:"Actions"})]})}),E.jsx(ln.Tbody,{children:d.map(F=>E.jsxs(ln.Tr,{children:[E.jsx(ln.Td,{children:F.alternateName}),E.jsx(ln.Td,{children:K(F.originalName)}),E.jsx(ln.Td,{children:E.jsxs(qt,{children:[E.jsx(us,{label:"Rename",children:E.jsx(on,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(F.originalName)},children:E.jsx(I1t,{})})}),E.jsx(us,{label:"Restore Snapshot",children:E.jsx(on,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{G(F.originalName)},children:E.jsx(N1t,{})})}),E.jsx(us,{label:"Delete Snapshot",children:E.jsx(on,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(F.originalName)},children:E.jsx(w5e,{})})}),E.jsx(KYe,{visibleParticipants:()=>J(F.originalName),studyId:e,gap:"10px",fileName:F.alternateName})]})})]},F.originalName))})]}):E.jsx(Ue,{children:"No snapshots."})]})]}),E.jsxs(Ks,{opened:n,onClose:()=>{r(!1),m("")},title:E.jsx(Ue,{children:"Archive Data"}),children:[E.jsx(Ue,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),E.jsx(ag,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:F=>m(F.target.value)}),E.jsxs(qt,{mt:"sm",justify:"right",children:[E.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),E.jsx(on,{color:"red",onClick:D,disabled:p!==e,children:"Archive"})]})]}),E.jsxs(Ks,{opened:i,onClose:()=>{s(!1),m("")},title:E.jsx(Ue,{children:"Delete Snapshot"}),children:[E.jsxs(Ue,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",E.jsx(Ue,{span:!0,fw:700,children:"irreversible"}),"."]}),E.jsx(ag,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:F=>m(F.target.value)}),E.jsxs(qt,{mt:"sm",justify:"right",children:[E.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),E.jsx(on,{color:"red",onClick:B,disabled:p!==e,children:"Delete"})]})]}),E.jsxs(Ks,{opened:o,onClose:()=>{a(!1),y("")},title:E.jsx(Ue,{children:"Rename Snapshot"}),children:[E.jsx(ag,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:F=>y(F.target.value)}),E.jsxs(qt,{mt:"sm",justify:"right",children:[E.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),E.jsx(on,{color:"green",onClick:L,disabled:!g||g.length===0,children:"Rename"})]})]}),E.jsxs(Ks,{opened:u,onClose:()=>{l(!1),m("")},title:E.jsx(Ue,{children:"Delete Live Data"}),children:[E.jsxs(Ue,{mb:"sm",children:["This will permanently delete the live"," ",E.jsx(Ue,{span:!0,fw:700,children:e})," ","data. This action is"," ",E.jsx(Ue,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),E.jsx(ag,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:F=>m(F.target.value)}),E.jsxs(qt,{mt:"sm",justify:"right",children:[E.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),E.jsx(on,{color:"red",onClick:q,disabled:p!==e,children:"Delete"})]})]})]})}function szn({studyId:e}){const{storageEngine:t}=yo(),[n,r]=R.useState(!1),[i,s]=R.useState(!1),[o,a]=R.useState(!1),[u,l]=R.useState(!1);R.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&E.jsxs($i,{children:[E.jsx(gT,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),E.jsx(gT,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),E.jsx(gT,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function ozn({studyId:e,refresh:t}){const{storageEngine:n}=yo();return E.jsx(yl,{children:E.jsxs(Gl,{multiple:!0,variant:"contained",children:[E.jsxs(Gl.Item,{value:"ReVISit Modes",children:[E.jsx(Gl.Control,{children:E.jsx(Ws,{order:5,children:"ReVISit Modes"})}),E.jsx(Gl.Panel,{children:E.jsx(szn,{studyId:e})})]},"modes"),E.jsxs(Gl.Item,{value:"Data Management",children:[E.jsx(Gl.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:E.jsx(Ws,{order:5,children:"Data Management"})}),E.jsx(Gl.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&E.jsx(izn,{studyId:e,refresh:t})})]},"dataManagement")]})})}function azn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=qee(!0),[o,a]=cf(),u=R.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=R.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=R.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,y])=>y.endTime!==-1).map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return E.jsxs(bA,{p:"lg",withBorder:!0,ref:o,children:[E.jsxs(qt,{direction:"row",justify:"space-between",onClick:s,children:[E.jsxs(qt,{align:"center",children:[e.type==="metadata"&&E.jsx(y1t,{size:20}),e.type==="numerical"&&E.jsx(A1t,{size:20}),(e.type==="shortText"||e.type==="longText")&&E.jsx(p1t,{size:20}),e.type==="likert"&&E.jsx(_1t,{size:20}),e.type==="dropdown"&&E.jsx(O1t,{size:20}),e.type==="slider"&&E.jsx(u1t,{size:20}),e.type==="radio"&&E.jsx(R1t,{size:20}),e.type==="checkbox"&&E.jsx($1t,{size:20}),e.type==="iframe"&&E.jsx(x1t,{size:20}),E.jsx(Ws,{order:5,ml:4,children:e.id})]}),E.jsx(g1t,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),E.jsxs(tM,{in:i,mah:400,children:[E.jsx(ke,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:E.jsx(AA,{})}),E.jsxs(vne,{cols:2,h:360,children:[E.jsx(Lg,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?E.jsx(MAe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):E.jsxs(qt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&E.jsx(T4,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&E.jsxs(E.Fragment,{children:[E.jsx(Ue,{fw:700,children:"Response Values: "}),u.map((f,d)=>E.jsx(qt,{align:"center",gap:"xs",children:E.jsx(Ue,{children:f[e.id]})},d))]})]})}),E.jsx(Lg,{mih:200,children:e.type==="metadata"?E.jsx(MAe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):E.jsxs(E.Fragment,{children:[E.jsx(Ue,{fw:700,children:"Response Specification: "}),E.jsx(T4,{block:!0,children:JSON.stringify(e,null,2)}),E.jsx("br",{}),l&&E.jsxs(E.Fragment,{children:[E.jsx(Ue,{fw:700,children:"Correct Answer: "}),E.jsx(T4,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function uzn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&XGe(t.components[n],t),i=R.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?E.jsx(qt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>E.jsx(azn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):E.jsx(qt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:E.jsx(Ue,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function lzn({studyConfig:e,visibleParticipants:t}){const n=R.useMemo(()=>{let i=_g(e.sequence);return i=cre(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=k0();return E.jsx(bA,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?E.jsx(qt,{justify:"center",align:"center",pt:"lg",pb:"md",children:E.jsx(Ue,{children:"No data available."})}):E.jsxs(qt,{direction:"row",children:[E.jsx(ke,{w:340,children:E.jsx(f7,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),E.jsx(AA,{orientation:"vertical",mx:"md"}),E.jsx(uzn,{participantData:t,studyConfig:e,trialId:r})]})})}function czn({xScale:e,answer:t,height:n,labelHeight:r=0}){return E.jsx("g",{children:E.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const xD=3,bE=25,ED=25,TD=20,J3e=1;function fzn({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=R.useState(!1),[l,{width:c}]=cf();return E.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[E.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+J3e,width:e(t.endTime)-e(t.startTime)-J3e*2,y:r-bE,height:bE}),E.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-xD,width:c+xD*2,y:r-bE-ED-o,height:TD,fill:"whitesmoke"}),E.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-xD,x2:c+e(t.startTime)+xD,y1:r-bE-ED+TD-o,y2:r-bE-ED+TD-o}),E.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-bE-ED-o,height:TD,children:E.jsx(Ko,{style:{width:"fit-content"},children:E.jsx(Ue,{lineClamp:1,ref:l,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}const Z3e=25,dzn=8,FG={left:20,top:0,right:20,bottom:0};function hzn({participantData:e,width:t,height:n,selectedTask:r,studyId:i}){const s=rp(),o=R.useCallback(f=>{const d=f.split("_"),h=+d[d.length-1];s(`/${i}/${_h(h)}?participantId=${e.participantId}`)},[s,e.participantId,i]),a=R.useMemo(()=>{const f=Object.values(e.answers||{}).filter(p=>p.startTime).map(p=>[p.startTime,p.endTime]).flat(),d=Wk(f);return xa([FG.left,t-FG.left-FG.right]).domain(d).clamp(!0)},[e,t]),u=R.useMemo(()=>{let f=0;const d=Object.entries(e.answers||{}).filter(h=>!!h[1].startTime).sort((h,p)=>h[1].startTime-p[1].startTime);return d.map((h,p)=>{const[m,g]=h,y=p>0?d[p-f-1]:null;return y&&y[0].length*dzn+a(y[1].startTime)>a(g.startTime)?f+=1:f=0,{line:E.jsx(czn,{labelHeight:f*Z3e,answer:g,height:n,xScale:a},m),label:E.jsx(fzn,{labelHeight:f*Z3e,isSelected:r===m,setSelectedTask:o,answer:g,height:n,name:m,xScale:a},m)}})},[n,e.answers,r,o,a]),l=R.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const f=Object.values(e.answers).filter(d=>d.startTime).sort((d,h)=>d.startTime-h.startTime);return new Date(f[f.length-1].endTime-(f[0]?f[0].startTime:0)).getTime()},[e]),c=R.useMemo(()=>Object.entries(e.answers||{}).sort((d,h)=>d[1].startTime-h[1].startTime).map(d=>{const[h,p]=d,m=[];let g=[-1,-1],y="visible";if(p.windowEvents)for(let v=0;v<p.windowEvents.length;v+=1)p.windowEvents[v][1]==="visibility"&&(p.windowEvents[v][2]==="hidden"&&y==="visible"?(g=[p.windowEvents[v][0],-1],y="hidden"):p.windowEvents[v][2]==="visible"&&y==="hidden"&&(g[1]=p.windowEvents[v][0],m.push(g),g=[-1,-1],y="visible"));return m.map((v,b)=>E.jsx(us,{withinPortal:!0,label:"Browsed away",children:E.jsx("rect",{x:a(v[0]),width:a(v[1])-a(v[0]),y:n-5,height:10})},b))}),[n,e,a]);return E.jsx(Ko,{children:E.jsxs($i,{gap:25,style:{width:"100%"},children:[E.jsx(AA,{size:"md"}),E.jsxs(bi,{justify:"center",children:[E.jsx(yb,{href:"",onClick:()=>s(`/${i}/${_h(0)}?participantId=${e.participantId}`),children:e.participantId}),e.completed?null:E.jsx(Ue,{size:"xl",c:"red",children:"Not completed"}),E.jsx(Ue,{size:"xl",children:`${aZ(l)}`})]}),e.completed?E.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[u.map(f=>f.line),u.map(f=>f.label),c]}):null]})})}function pzn({visibleParticipants:e}){const{studyId:t}=k0(),[n,{width:r}]=cf();return E.jsx($i,{ref:n,style:{width:"100%"},children:e.map(i=>E.jsx(hzn,{studyId:t||"",height:200,participantData:i,width:r},i.participantId))})}function mzn({globalConfig:e}){const{studyId:t}=k0(),[n,r]=R.useState([]),[i,s]=R.useState(void 0),[o,a]=R.useState(!1),{storageEngine:u}=yo(),l=rp(),{tab:c}=k0(),{user:f}=lN();R.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const b=async w=>{if(w.data.type==="revisitWidget/CONFIG"&&u){const x=await Bfe(w.data.payload);s(x)}};return window.addEventListener("message",b),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",b)}}return jfe(t,e).then(b=>{b&&s(b)}),()=>{}},[t,e,u]);const d=R.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const b=await u.getAllParticipantsData();r(b),a(!1)}},[u,t,i]);R.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=R.useState([]),[m,g,y]=R.useMemo(()=>{const b=n.filter(S=>!S.rejected&&S.completed),w=n.filter(S=>!S.rejected&&!S.completed),x=n.filter(S=>S.rejected);return p([...b,...w,...x]),[b,w,x]},[n]),v=R.useCallback(b=>{const w=[];b.includes("completed")&&w.push(...m),b.includes("inprogress")&&w.push(...g),b.includes("rejected")&&w.push(...y),p(w)},[m,g,y]);return E.jsxs(E.Fragment,{children:[E.jsx(LO,{studyIds:e.configsList}),E.jsx(Oi.Main,{children:E.jsxs(yl,{fluid:!0,style:{height:"100%",position:"relative"},children:[E.jsx(vf,{visible:o}),E.jsxs(qt,{direction:"row",align:"center",justify:"space-between",children:[E.jsx(Ws,{order:5,children:t}),E.jsxs(qt,{direction:"row",align:"center",children:[E.jsx(Ue,{mt:-2,size:"sm",children:"Participants: "}),E.jsx(sc.Group,{defaultValue:["completed","inprogress","rejected"],onChange:v,mb:"xs",mt:8,ml:"xs",children:E.jsxs(bi,{children:[E.jsx(sc,{value:"completed",label:"Completed"}),E.jsx(sc,{value:"inprogress",label:"In Progress"}),E.jsx(sc,{value:"rejected",label:"Rejected"})]})})]})]}),E.jsx(ba,{h:"xs"}),E.jsxs(Pr,{variant:"outline",value:c,onChange:b=>l(`/analysis/stats/${t}/${b}`),style:{height:"100%"},children:[E.jsxs(Pr.List,{children:[E.jsx(Pr.Tab,{value:"table",leftSection:E.jsx(L1t,{size:16}),children:"Table View"}),E.jsx(Pr.Tab,{value:"stats",leftSection:E.jsx(m1t,{size:16}),children:"Trial Stats"}),E.jsx(Pr.Tab,{value:"replay",leftSection:E.jsx(k1t,{size:16}),children:"Participant Replay"}),E.jsx(Pr.Tab,{value:"manage",leftSection:E.jsx(b5e,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),E.jsx(Pr.Panel,{value:"table",pt:"xs",children:i&&E.jsx(rzn,{visibleParticipants:h,studyConfig:i,refresh:d})}),E.jsx(Pr.Panel,{value:"stats",pt:"xs",children:i&&E.jsx(lzn,{studyConfig:i,visibleParticipants:h})}),E.jsx(Pr.Panel,{value:"replay",pt:"xs",children:E.jsx(pzn,{visibleParticipants:h})}),E.jsx(Pr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?E.jsx(ozn,{studyId:t,refresh:d}):E.jsx(yl,{mt:20,children:E.jsx(bg,{title:"Unauthorized Access",variant:"light",color:"red",icon:E.jsx($ne,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function eIe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=lN(),{storageEngine:o}=yo(),[a,u]=R.useState(!1),l=k0();return R.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?E.jsx(vf,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?E.jsx(Dne,{to:"/login"}):E.jsx(E.Fragment,{children:e})}async function zQe(e,t){if(e instanceof Hp){t(!0);const n=new ng,r=A7();try{await ZLn(r,n,FKe)}catch(i){w6({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function gzn(){const{user:e}=lN(),[t,n]=R.useState(!1),{storageEngine:r}=yo();return R.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&w6({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?E.jsx(Dne,{to:"/"}):E.jsx(yl,{children:E.jsx(SA,{padding:"lg",children:E.jsxs(qt,{align:"center",direction:"column",justify:"center",children:[E.jsx(bb,{maw:200,mt:50,mb:100,src:`${vl}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),E.jsxs(E.Fragment,{children:[E.jsx(Ue,{mb:20,children:"To access admin settings, please sign in using your Google account."}),E.jsx(on,{onClick:()=>zQe(r,n),leftSection:E.jsx(M1t,{}),variant:"filled",children:"Sign In With Google"})]}),E.jsx(vf,{visible:t})]})})})}function yzn(){const{user:e,triggerAuth:t}=lN(),{storageEngine:n}=yo(),[r,i]=R.useState(!1),[s,o]=R.useState([]),[a,u]=R.useState(!1),[l,c]=R.useState(!1),[f,d]=R.useState(!1),[h,p]=R.useState(!1),[m,g]=R.useState(!1),[y,v]=R.useState(""),[b,w]=R.useState(null),x=IPe({initialValues:{email:""},validate:{email:qSt("Invalid email")}});R.useEffect(()=>{(async()=>{if(u(!0),n instanceof Hp){const O=await(n==null?void 0:n.getUserManagementData("authentication"));i((O==null?void 0:O.isEnabled)||!1);const B=await(n==null?void 0:n.getUserManagementData("adminUsers"));B&&B.adminUsersList&&o(B==null?void 0:B.adminUsersList.map(q=>q.email))}else i(!1);u(!1)})()},[n]);const S=async()=>{if(u(!0),n instanceof Hp){const L=await zQe(n,u);L&&L.email?(w({email:L.email,uid:L.uid}),p(!0)):g(!0)}u(!1)},A=async L=>{u(!0),n instanceof Hp&&L&&(await n.changeAuth(!0),await n.addAdminUser(L),o([L.email]),i(!0),t()),p(!1),u(!1)},C=async()=>{if(u(!0),n instanceof Hp){await n.addAdminUser({email:x.values.email,uid:null});const L=await n.getUserManagementData("adminUsers");o((L==null?void 0:L.adminUsersList.map(O=>O.email))||[])}u(!1),c(!1),x.setValues({email:""})},N=L=>{d(!0),v(L)},k=async()=>{if(u(!0),n instanceof Hp){await n.removeAdminUser(y);const L=await n.getUserManagementData("adminUsers");o((L==null?void 0:L.adminUsersList.map(O=>O.email))||[])}d(!1),u(!1)},D=R.useMemo(()=>n instanceof Hp,[n]);return E.jsxs(E.Fragment,{children:[E.jsx(yl,{children:E.jsxs(SA,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[E.jsx(Ws,{mb:20,order:3,children:"Authentication"}),r?E.jsx(qt,{children:E.jsx(Ue,{children:"Authentication is enabled."})}):E.jsxs(qt,{justify:"space-between",children:[E.jsx(ke,{children:E.jsx(Ue,{children:"Authentication is currently disabled."})}),E.jsx(us,{label:"You can only enable auth when using Firebase",disabled:D,children:E.jsx(on,{onClick:L=>D?S():L.preventDefault(),color:"green","data-disabled":D?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?E.jsxs(qt,{mt:40,direction:"column",children:[E.jsxs(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[E.jsx(Ws,{order:6,children:"Enabled Users"}),E.jsx(Lne,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(L=>{var O;return E.jsxs(qt,{justify:"space-between",mb:10,children:[E.jsx(Ue,{children:L}),L===((O=e.user)==null?void 0:O.email)?E.jsx(Ue,{color:"blue",size:"xs",children:"You"}):E.jsx(Px,{variant:"subtle",onClick:()=>N(L),children:E.jsx(w5e,{color:"red"})})]},L)}):null]}):null]})}),E.jsx(Ks,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:E.jsxs(ke,{component:"form",onSubmit:x.onSubmit(()=>C()),children:[E.jsx(ag,{leftSection:E.jsx(f1t,{}),placeholder:"User Gmail Account",...x.getInputProps("email")}),E.jsxs(qt,{mt:30,justify:"right",children:[E.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),E.jsx(on,{type:"submit",children:"Save"})]})]})}),E.jsxs(Ks,{opened:f,size:"large",onClose:()=>d(!1),title:E.jsxs(Ue,{fw:700,children:["Remove",y,"?"]}),children:[E.jsxs(Ue,{mt:40,children:["Are you sure you want to remove",E.jsx("b",{children:y})," ","as an administrator?"]}),E.jsxs(qt,{mt:40,justify:"right",children:[E.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),E.jsx(on,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),E.jsxs(Ks,{opened:h,size:"md",onClose:()=>p(!1),title:E.jsx(Ue,{fw:700,children:"Enable Authentication?"}),children:[E.jsxs(Ue,{mt:40,children:["User"," ",E.jsx("b",{children:b==null?void 0:b.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),E.jsxs(qt,{mt:40,justify:"right",children:[E.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),E.jsx(on,{onClick:()=>A(b),children:"Yes, I'm sure."})]})]}),E.jsxs(Ks,{opened:m,size:"md",onClose:()=>g(!1),title:E.jsx(Ue,{fw:700,children:"An Error Occurred."}),children:[E.jsxs(Ue,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",E.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),E.jsx(qt,{mt:40,justify:"right",children:E.jsx(on,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),E.jsx(vf,{visible:a})]})}class vzn extends jQe{constructor(){super("localStorage");Ku(this,"studyDatabase");Ku(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await DE.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await O7(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await O7(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await DE.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=D7();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=DE.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=D7();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await DE.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await DE.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function bzn(){let e;{const t=new vzn;await t.connect(),e=t}return e}function _I({title:e}){const t=wb();return R.useEffect(()=>{document.title=e},[t,e]),null}async function _zn(){const t=await(await fetch(`${vl}global.json`)).text();return i$n(t)}function wzn(){const[e,t]=R.useState(null),[n,r]=R.useState({});R.useEffect(()=>{async function a(){e&&r(await a$n(e))}a()},[e]),R.useEffect(()=>{e||_zn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=yo();R.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await bzn();s(u)}a()},[s,i]);const o=async a=>i instanceof Hp?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?E.jsx(e1t,{basename:vl,children:E.jsx(ezn,{children:E.jsx(o1t,{children:E.jsxs(Xgt,{children:[E.jsx(C_,{path:"/",element:E.jsxs(E.Fragment,{children:[E.jsx(_I,{title:"ReVISit | Home"}),E.jsxs(Oi,{padding:"md",header:{height:70},children:[E.jsx(LO,{studyIds:e.configsList}),E.jsx(TEt,{globalConfig:e,studyConfigs:n})]})]})}),E.jsx(C_,{path:"/:studyId/*",element:E.jsxs(E.Fragment,{children:[E.jsx(_I,{title:"ReVISit | Study"}),E.jsx(u$n,{globalConfig:e})]})}),E.jsx(C_,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:E.jsxs(E.Fragment,{children:[E.jsx(_I,{title:"ReVISit | Analysis"}),E.jsx(eIe,{paramToCheck:"studyId",paramCallback:o,children:E.jsx(Oi,{padding:"md",header:{height:70},children:E.jsx(mzn,{globalConfig:e})})})]})}),E.jsx(C_,{path:"/analysis/stats/:studyId",element:E.jsx(WGe,{to:"./table",replace:!0})}),E.jsx(C_,{path:"/settings",element:E.jsxs(eIe,{children:[E.jsx(_I,{title:"ReVISit | Settings"}),E.jsxs(Oi,{padding:"md",header:{height:70},children:[E.jsx(LO,{studyIds:e.configsList}),E.jsx(Oi.Main,{children:E.jsx(yzn,{})})]})]})}),E.jsx(C_,{path:"/login",element:E.jsxs(E.Fragment,{children:[E.jsx(_I,{title:"ReVISit | Login"}),E.jsxs(Oi,{padding:"md",header:{height:70},children:[E.jsx(LO,{studyIds:e.configsList}),E.jsx(Oi.Main,{children:E.jsx(gzn,{})})]})]})})]})})})}):null}BG.createRoot(document.getElementById("root")).render(E.jsx(ni.StrictMode,{children:E.jsx(ogt,{children:E.jsxs(Lke,{children:[E.jsx(h1,{}),E.jsx(wzn,{})]})})}))});export default xzn();
